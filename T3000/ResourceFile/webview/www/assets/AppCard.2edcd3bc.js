import{o as s,c as n,w as e,X as S,a as t,S as p,Q as r,V as k,P as m,a2 as f,W as v,K as y,Y as A,R as g,U as $}from"./index.7a304d87.js";import{c as P,Q as V,a as u,b as d,C as h,d as C}from"./ClosePopup.7058a11c.js";import{u as I,l as Q}from"./api.a3f70ecf.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";var E="/assets/placeholder.1a8352b9.png";const N={class:"relative",style:{height:"205px",width:"100%"}},M=["src"],U={key:1,src:E},z={class:"text-h6"},L={class:"text-subtitle2"},j={key:0,class:"text-right"},O={__name:"AppCard",props:{app:{type:Object,required:!0},showActions:{type:Boolean,required:!1,default:!1},showPrivateStatus:{type:Boolean,required:!1,default:!1}},emits:["updated","deleted"],setup(a,{emit:w}){const b=w,x={}.API_URL+"/file/",l=I();function B(o){l.dialog({title:"Delete Application",message:`Are you sure you want to delete (${o.name}) application?`,ok:{label:"Delete",color:"red-8",flat:!0},cancel:!0,persistent:!0}).onOk(()=>{l.loading.show(),Q.delete(`t3Apps/${o.id}`).then(()=>{l.loading.hide(),l.notify({message:"App has been deleted successfully.",color:"primary",icon:"done"}),b("deleted",o)}).catch(i=>{l.loading.hide(),l.notify({message:"Error: App couldn't be deleted! "+i,color:"negative",icon:"error",timeout:0,actions:[{label:"Dismiss",color:"grey-5",handler:()=>{}}]})})}).onCancel(()=>{}).onDismiss(()=>{})}function _(o,i){Q.patch(`t3Apps/${o.id}`,{json:i}).then(()=>{l.loading.hide(),l.notify({message:"App has been updated successfully.",color:"primary",icon:"done"}),b("deleted",o)}).catch(c=>{l.loading.hide(),l.notify({message:"Error: App couldn't be updated! "+c,color:"negative",icon:"error",timeout:0,actions:[{label:"Dismiss",color:"grey-5",handler:()=>{}}]})})}function D(o){document.getElementById(o).classList.toggle("active")}return(o,i)=>(s(),n($,{class:"app-card"},{default:e(()=>[(s(),n(S,{key:0,class:"app-card-action-btn hidden absolute right-2.5 top-2.5",id:"app-card-action-btn-"+a.app.id,dense:"",flat:"",size:"md",round:"",color:"primary",icon:"more_vert"},{default:e(()=>[t(P,{"onUpdate:modelValue":i[3]||(i[3]=c=>D("app-card-action-btn-"+a.app.id))},{default:e(()=>[t(V,{style:{"min-width":"70px"}},{default:e(()=>[t(u,{dense:"",to:"/apps-library/"+a.app.id+"/edit"},{default:e(()=>[t(d,{avatar:""},{default:e(()=>[t(p,{name:"edit"})]),_:1}),t(d,null,{default:e(()=>[r("Edit")]),_:1})]),_:1},8,["to"]),t(k),m((s(),n(u,{clickable:"",dense:"",onClick:i[0]||(i[0]=c=>B(a.app))},{default:e(()=>[t(d,{avatar:""},{default:e(()=>[t(p,{name:"delete"})]),_:1}),t(d,null,{default:e(()=>[r("Delete")]),_:1})]),_:1})),[[h]]),t(k),a.app.private===!0?m((s(),n(u,{key:0,clickable:"",dense:"",onClick:i[1]||(i[1]=c=>_(a.app,{private:!1}))},{default:e(()=>[t(d,{avatar:""},{default:e(()=>[t(p,{name:"visibility"})]),_:1}),t(d,null,{default:e(()=>[r("Make public")]),_:1})]),_:1})),[[h]]):f("",!0),a.app.private===!1?m((s(),n(u,{key:1,clickable:"",dense:"",onClick:i[2]||(i[2]=c=>_(a.app,{private:!0}))},{default:e(()=>[t(d,{avatar:""},{default:e(()=>[t(p,{name:"visibility_off"})]),_:1}),t(d,null,{default:e(()=>[r("Make private")]),_:1})]),_:1})),[[h]]):f("",!0)]),_:1})]),_:1})]),_:1},8,["id"])),v("div",N,[a.app.image?(s(),y("img",{key:0,class:"app-image",src:x+a.app.image.path+"?w=208&h=205"},null,8,M)):(s(),y("img",U))]),t(A,null,{default:e(()=>[v("div",z,g(a.app.name),1),v("div",L,"by "+g(a.app.user.name),1)]),_:1}),t(A,{class:"q-pt-none"},{default:e(()=>[r(g(a.app.description)+" ",1),a.showPrivateStatus?(s(),y("div",j,[a.app.private?(s(),n(C,{key:0,icon:"visibility_off",size:"md"},{default:e(()=>[r("Private")]),_:1})):(s(),n(C,{key:1,icon:"visibility",size:"md"},{default:e(()=>[r("Public")]),_:1}))])):f("",!0)]),_:1})]),_:1}))}};var X=q(O,[["__scopeId","data-v-652dd659"]]);export{X as A};

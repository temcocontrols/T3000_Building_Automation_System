import{h as e,a as t,o as l,Y as a,Z as i,$ as o,c as n,a5 as s,ao as d,ar as r,ax as u,ap as c,an as p,a0 as g,a4 as m,C as y,a1 as _,ay as f,au as v,av as b}from"./index.3bd6c859.js";import{Q as V}from"./QSelect.6850d5f4.js";import{Q as h,a as w}from"./QTable.5bb8bb75.js";import{Q as k}from"./QChip.2cea4c57.js";import{u as S}from"./use-quasar.7b655738.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";import"./QItem.dc1462d4.js";import"./QItemLabel.e2a12bb6.js";import"./QMenu.e18b116c.js";import"./position-engine.69644a20.js";import"./format.b9446fb2.js";import"./QMarkupTable.295fb157.js";const x={class:"database-settings-panel"},F={class:"filters-row"},U={class:"setting-value"},q={class:"context-info"},D={class:"text-h6"},j={class:"setting-form"},A={class:"context-section q-mt-md"};var T=C({name:"ApplicationSettingsPanel",setup(){const a=S(),i=e([]),o=e(!1),n=e(!1),s=e(null),d=e({search:"",category:null,dataType:null}),r=e({category:"",setting_key:"",setting_value:"",data_type:"string",description:"",user_id:null,device_serial:null,panel_id:null,is_read_only:!1}),u=e({sortBy:"category",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),c=t((()=>{let e=i.value;if(d.value.search){const t=d.value.search.toLowerCase();e=e.filter((e=>e.category.toLowerCase().includes(t)||e.setting_key.toLowerCase().includes(t)||e.setting_value.toLowerCase().includes(t)))}return d.value.category&&(e=e.filter((e=>e.category===d.value.category))),d.value.dataType&&(e=e.filter((e=>e.data_type===d.value.dataType))),e})),p=()=>{n.value=!1,s.value=null,r.value={category:"",setting_key:"",setting_value:"",data_type:"string",description:"",user_id:null,device_serial:null,panel_id:null,is_read_only:!1}};return l((()=>{(async()=>{o.value=!0;try{i.value=[{id:1,category:"UI",setting_key:"theme",setting_value:"dark",data_type:"string",description:"Application theme preference",user_id:null,device_serial:null,panel_id:null,is_read_only:!1},{id:2,category:"Device",setting_key:"sample_rate",setting_value:"30",data_type:"number",description:"Device sampling rate in seconds",user_id:null,device_serial:12345,panel_id:1,is_read_only:!1},{id:3,category:"User",setting_key:"dashboard_layout",setting_value:'{"widgets": ["chart", "table"]}',data_type:"object",description:"User dashboard configuration",user_id:1,device_serial:null,panel_id:null,is_read_only:!1}]}catch(e){a.notify({type:"negative",message:"Failed to load settings"})}finally{o.value=!1}})()})),{settings:i,loading:o,showAddDialog:n,editingId:s,filters:d,settingForm:r,pagination:u,categoryOptions:["UI","Device","User","System","TrendLog","HVAC"],dataTypeOptions:["string","number","boolean","object"],columns:[{name:"category",label:"Category",field:"category",sortable:!0,align:"left"},{name:"setting_key",label:"Key",field:"setting_key",sortable:!0,align:"left"},{name:"value",label:"Value",field:"setting_value",sortable:!1,align:"left"},{name:"data_type",label:"Type",field:"data_type",sortable:!0,align:"center"},{name:"context",label:"Context",field:"context",sortable:!1,align:"left"},{name:"actions",label:"Actions",field:"actions",sortable:!1,align:"center"}],filteredSettings:c,formatValue:(e,t)=>{if("object"===t)try{const t=JSON.parse(e);return JSON.stringify(t,null,2)}catch{return e}return e},editSetting:e=>{s.value=e.id,r.value={...e},n.value=!0},deleteSetting:e=>{a.dialog({title:"Confirm Delete",message:`Are you sure you want to delete the setting "${e.setting_key}"?`,cancel:!0,persistent:!0}).onOk((()=>{i.value=i.value.filter((t=>t.id!==e.id)),a.notify({type:"positive",message:"Setting deleted successfully"})}))},saveSetting:()=>{if(s.value){const e=i.value.findIndex((e=>e.id===s.value));-1!==e&&(i.value[e]={...r.value}),a.notify({type:"positive",message:"Setting updated successfully"})}else{const e={...r.value,id:Date.now(),created_at:(new Date).toISOString()};i.value.push(e),a.notify({type:"positive",message:"Setting added successfully"})}p()},cancelEdit:p,onRequest:e=>{console.log("Table request:",e)}}}},[["render",function(e,t,l,S,C,T){return a(),i("div",x,[t[16]||(t[16]=o("div",{class:"page-header"},[o("h2",null,"Application Settings Management"),o("p",null,"Manage application configuration and user preferences")],-1)),n(p,{flat:"",bordered:"",class:"q-mb-md"},{default:s((()=>[n(d,null,{default:s((()=>[o("div",F,[n(r,{modelValue:S.filters.search,"onUpdate:modelValue":t[0]||(t[0]=e=>S.filters.search=e),placeholder:"Search settings...",outlined:"",dense:"",class:"filter-input"},{prepend:s((()=>[n(u,{name:"search"})])),_:1},8,["modelValue"]),n(V,{modelValue:S.filters.category,"onUpdate:modelValue":t[1]||(t[1]=e=>S.filters.category=e),options:S.categoryOptions,placeholder:"All Categories",outlined:"",dense:"",clearable:"",class:"filter-select"},null,8,["modelValue","options"]),n(V,{modelValue:S.filters.dataType,"onUpdate:modelValue":t[2]||(t[2]=e=>S.filters.dataType=e),options:S.dataTypeOptions,placeholder:"All Types",outlined:"",dense:"",clearable:"",class:"filter-select"},null,8,["modelValue","options"]),n(c,{color:"primary",icon:"add",label:"Add Setting",onClick:t[3]||(t[3]=e=>S.showAddDialog=!0)})])])),_:1})])),_:1}),n(p,{flat:"",bordered:""},{default:s((()=>[n(d,null,{default:s((()=>[n(h,{rows:S.filteredSettings,columns:S.columns,"row-key":"id",loading:S.loading,pagination:S.pagination,onRequest:S.onRequest},{"body-cell-actions":s((e=>[n(w,{props:e},{default:s((()=>[n(c,{flat:"",round:"",dense:"",color:"primary",icon:"edit",onClick:t=>S.editSetting(e.row)},null,8,["onClick"]),n(c,{flat:"",round:"",dense:"",color:"negative",icon:"delete",onClick:t=>S.deleteSetting(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),"body-cell-value":s((e=>[n(w,{props:e},{default:s((()=>[o("div",U,g(S.formatValue(e.row.setting_value,e.row.data_type)),1)])),_:2},1032,["props"])])),"body-cell-context":s((e=>[n(w,{props:e},{default:s((()=>[o("div",q,[e.row.user_id?(a(),m(k,{key:0,size:"sm",color:"blue","text-color":"white"},{default:s((()=>[y(" User: "+g(e.row.user_id),1)])),_:2},1024)):_("",!0),e.row.device_serial?(a(),m(k,{key:1,size:"sm",color:"purple","text-color":"white"},{default:s((()=>[y(" Device: "+g(e.row.device_serial),1)])),_:2},1024)):_("",!0),e.row.user_id||e.row.device_serial?_("",!0):(a(),m(k,{key:2,size:"sm",color:"grey","text-color":"white"},{default:s((()=>[...t[14]||(t[14]=[y(" Global ",-1)])])),_:1}))])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","pagination","onRequest"])])),_:1})])),_:1}),n(b,{modelValue:S.showAddDialog,"onUpdate:modelValue":t[13]||(t[13]=e=>S.showAddDialog=e),persistent:""},{default:s((()=>[n(p,{style:{width:"500px","max-width":"90vw"}},{default:s((()=>[n(d,null,{default:s((()=>[o("div",D,g(S.editingId?"Edit Setting":"Add New Setting"),1)])),_:1}),n(d,null,{default:s((()=>[o("div",j,[n(r,{modelValue:S.settingForm.category,"onUpdate:modelValue":t[4]||(t[4]=e=>S.settingForm.category=e),label:"Category",outlined:"",rules:[e=>!!e||"Category is required"]},null,8,["modelValue","rules"]),n(r,{modelValue:S.settingForm.setting_key,"onUpdate:modelValue":t[5]||(t[5]=e=>S.settingForm.setting_key=e),label:"Setting Key",outlined:"",rules:[e=>!!e||"Setting key is required"],class:"q-mt-md"},null,8,["modelValue","rules"]),n(r,{modelValue:S.settingForm.setting_value,"onUpdate:modelValue":t[6]||(t[6]=e=>S.settingForm.setting_value=e),label:"Setting Value",outlined:"",type:"number"===S.settingForm.data_type?"number":"text",class:"q-mt-md"},null,8,["modelValue","type"]),n(V,{modelValue:S.settingForm.data_type,"onUpdate:modelValue":t[7]||(t[7]=e=>S.settingForm.data_type=e),options:S.dataTypeOptions,label:"Data Type",outlined:"",class:"q-mt-md"},null,8,["modelValue","options"]),n(r,{modelValue:S.settingForm.description,"onUpdate:modelValue":t[8]||(t[8]=e=>S.settingForm.description=e),label:"Description",outlined:"",type:"textarea",rows:"3",class:"q-mt-md"},null,8,["modelValue"]),o("div",A,[t[15]||(t[15]=o("div",{class:"text-subtitle2 q-mb-sm"},"Context (Optional)",-1)),n(r,{modelValue:S.settingForm.user_id,"onUpdate:modelValue":t[9]||(t[9]=e=>S.settingForm.user_id=e),label:"User ID",outlined:"",type:"number",hint:"Leave empty for global setting"},null,8,["modelValue"]),n(r,{modelValue:S.settingForm.device_serial,"onUpdate:modelValue":t[10]||(t[10]=e=>S.settingForm.device_serial=e),label:"Device Serial",outlined:"",type:"number",hint:"Leave empty for non-device setting",class:"q-mt-md"},null,8,["modelValue"]),n(r,{modelValue:S.settingForm.panel_id,"onUpdate:modelValue":t[11]||(t[11]=e=>S.settingForm.panel_id=e),label:"Panel ID",outlined:"",type:"number",hint:"Leave empty for non-panel setting",class:"q-mt-md"},null,8,["modelValue"])]),n(f,{modelValue:S.settingForm.is_read_only,"onUpdate:modelValue":t[12]||(t[12]=e=>S.settingForm.is_read_only=e),label:"Read Only",class:"q-mt-md"},null,8,["modelValue"])])])),_:1}),n(v,{align:"right"},{default:s((()=>[n(c,{flat:"",label:"Cancel",onClick:S.cancelEdit},null,8,["onClick"]),n(c,{color:"primary",label:S.editingId?"Update":"Add",onClick:S.saveSetting},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}],["__scopeId","data-v-6f979e78"]]);export{T as default};

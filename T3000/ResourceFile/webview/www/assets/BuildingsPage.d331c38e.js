import{j as e}from"./react.1acd1a13.js";import{r,R as s}from"./client.58f92968.js";import{c as l,D as a,a as t,b as i,d as o,e as d,f as n}from"./DataGridHeaderCell.f7016832.js";import{n as p,T as c,y as x,br as u,aG as m,P as h,S as j}from"./App.3fe38e41.js";import{T as f}from"./TableCellLayout.9e29eb07.js";import"./index.2479820c.js";import"./Serializer.f6a5f515.js";import"./T3Data.5fdf3c76.js";import"./_commonjsHelpers.a5007c1f.js";var b="_container_5kvuf_7",g="_bladeContentContainer_5kvuf_19",C="_bladeContentWrapper_5kvuf_27",_="_bladeContent_5kvuf_19",v="_partContent_5kvuf_43",P="_toolbar_5kvuf_52",k="_toolbarContainer_5kvuf_61",N="_toolbarButton_5kvuf_69",W="_searchInputWrapper_5kvuf_116",y="_searchIcon_5kvuf_123",I="_searchInput_5kvuf_116",S="_overviewHr_5kvuf_182",H="_dockingBody_5kvuf_190";const R=()=>{const[R,A]=r.exports.useState([]),[B,w]=r.exports.useState(!1),[z,T]=r.exports.useState(null),[D,F]=r.exports.useState(!1),[M,E]=r.exports.useState(""),G=r.exports.useCallback((async()=>{w(!0),T(null);try{const e="/api/buildings",r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch buildings: ${r.statusText}`);const s=await r.json();A(s.buildings||[])}catch(e){const r=e instanceof Error?e.message:"Failed to load buildings";T(r)}finally{w(!1)}}),[]),L=s.useMemo((()=>0===R.length?Array(10).fill(null).map(((e,r)=>({id:void 0,buildingName:"",protocol:"",ipAddress:"",ipPort:"",comPort:"",baudRate:"",buildingPath:""}))):R),[R]),O=e=>!e.id&&0===R.length,$=[l({columnId:"id",compare:(e,r)=>(e.id||0)-(r.id||0),renderHeaderCell:()=>"Item",renderCell:r=>e.exports.jsx(f,{children:!O(r)&&(r.id||"-")})}),l({columnId:"buildingName",compare:(e,r)=>(e.buildingName||"").localeCompare(r.buildingName||""),renderHeaderCell:()=>"Building",renderCell:r=>e.exports.jsx(f,{children:!O(r)&&(r.buildingName||"-")})}),l({columnId:"protocol",compare:(e,r)=>(e.protocol||"").localeCompare(r.protocol||""),renderHeaderCell:()=>"Protocol",renderCell:r=>e.exports.jsx(f,{children:!O(r)&&(r.protocol||"-")})}),l({columnId:"ipAddress",compare:(e,r)=>(e.ipAddress||"").localeCompare(r.ipAddress||""),renderHeaderCell:()=>"IP/Domain/Tel#/SerialNumber",renderCell:r=>e.exports.jsx(f,{children:!O(r)&&(r.ipAddress||"-")})}),l({columnId:"ipPort",compare:(e,r)=>(e.ipPort||"").localeCompare(r.ipPort||""),renderHeaderCell:()=>"Modbus TCP Port",renderCell:r=>e.exports.jsx(f,{children:!O(r)&&(r.ipPort||"-")})}),l({columnId:"comPort",compare:(e,r)=>(e.comPort||"").localeCompare(r.comPort||""),renderHeaderCell:()=>"COM Port",renderCell:r=>e.exports.jsx(f,{children:!O(r)&&(r.comPort||"-")})}),l({columnId:"baudRate",compare:(e,r)=>(e.baudRate||"").localeCompare(r.baudRate||""),renderHeaderCell:()=>"Baud Rate",renderCell:r=>e.exports.jsx(f,{children:!O(r)&&(r.baudRate||"-")})}),l({columnId:"buildingPath",compare:(e,r)=>(e.buildingPath||"").localeCompare(r.buildingPath||""),renderHeaderCell:()=>"Building Path",renderCell:r=>e.exports.jsx(f,{children:!O(r)&&(r.buildingPath||"-")})})];return e.exports.jsx("div",{className:b,children:e.exports.jsx("div",{className:g,children:e.exports.jsx("div",{className:C,children:e.exports.jsx("div",{className:_,children:e.exports.jsxs("div",{className:v,children:[z&&e.exports.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#fef6f6",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.exports.jsx(p,{style:{color:"#d13438",fontSize:"16px",flexShrink:0}}),e.exports.jsx(c,{style:{color:"#d13438",fontWeight:500,fontSize:"13px"},children:z})]}),e.exports.jsx("div",{className:P,children:e.exports.jsxs("div",{className:k,children:[e.exports.jsxs("button",{className:N,onClick:async()=>{F(!0),await G(),F(!1)},disabled:D,"aria-label":"Refresh",children:[e.exports.jsx(x,{}),e.exports.jsx("span",{children:"Refresh"})]}),e.exports.jsxs("button",{className:N,onClick:()=>{},"aria-label":"Add Building",children:[e.exports.jsx(u,{}),e.exports.jsx("span",{children:"Add Building"})]}),e.exports.jsxs("button",{className:N,onClick:()=>{},"aria-label":"Delete Building",children:[e.exports.jsx(m,{}),e.exports.jsx("span",{children:"Delete Building"})]}),e.exports.jsxs("div",{className:W,children:[e.exports.jsx(h,{className:y}),e.exports.jsx("input",{className:I,type:"text",placeholder:"Search buildings...",value:M,onChange:e=>{E(e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search buildings"})]})]})}),e.exports.jsx("div",{style:{padding:"0"},children:e.exports.jsx("hr",{className:S})}),e.exports.jsxs("div",{className:H,children:[(B||D)&&e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px"},children:[e.exports.jsx(j,{size:"tiny"}),e.exports.jsx(c,{size:200,weight:"regular",children:"Loading buildings..."})]}),e.exports.jsx(e.exports.Fragment,{children:e.exports.jsxs(a,{items:L,columns:$,sortable:!0,resizableColumns:!0,columnSizingOptions:{id:{minWidth:60,defaultWidth:80},buildingName:{minWidth:120,defaultWidth:150},protocol:{minWidth:100,defaultWidth:120},ipAddress:{minWidth:150,defaultWidth:200},ipPort:{minWidth:100,defaultWidth:120},comPort:{minWidth:80,defaultWidth:100},baudRate:{minWidth:80,defaultWidth:100},buildingPath:{minWidth:200,defaultWidth:400}},children:[e.exports.jsx(t,{children:e.exports.jsx(i,{children:({renderHeaderCell:r})=>e.exports.jsx(o,{children:r()})})}),e.exports.jsx(d,{children:({item:r,rowId:s})=>e.exports.jsx(i,{children:({renderCell:s})=>e.exports.jsx(n,{children:s(r)})},s)})]})})]})]})})})})})};export{R as BuildingsPage};

import{j as e}from"./react.2da10d74.js";import{r}from"./client.b9d1bbf8.js";import{c as s,D as l,a as t,b as o,d as i,e as d,f as a,T as n}from"./DataGridHeaderCell.34491fc4.js";import{y as c,bg as x,bh as p,C as h,F as m,T as u}from"./App.2c62e2d1.js";import"./index.5672de35.js";import"./useFocusableGroup.6d334b5b.js";import"./Serializer.f6a5f515.js";var j="_container_nxdho_13",b="_bladeContentContainer_nxdho_37",g="_bladeContentWrapper_nxdho_53",C="_bladeContent_nxdho_37",_="_partContent_nxdho_85",f="_toolbar_nxdho_103",N="_toolbarContainer_nxdho_121",v="_toolbarButton_nxdho_137",y="_searchInputWrapper_nxdho_231",P="_searchIcon_nxdho_245",W="_searchInput_nxdho_231",I="_overviewHr_nxdho_363",w="_dockingBody_nxdho_379",H="_loading_nxdho_397";const B=()=>{const[B,A]=r.exports.useState([]),[S,k]=r.exports.useState(!1),[R,z]=r.exports.useState(null),[T,D]=r.exports.useState(!1),[F,M]=r.exports.useState(""),Z=r.exports.useCallback((async()=>{k(!0),z(null);try{const e="/api/buildings",r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch buildings: ${r.statusText}`);const s=await r.json();A(s.buildings||[])}catch(e){const r=e instanceof Error?e.message:"Failed to load buildings";z(r)}finally{k(!1)}}),[]),E=[s({columnId:"id",compare:(e,r)=>(e.id||0)-(r.id||0),renderHeaderCell:()=>"Item",renderCell:r=>e.exports.jsx(n,{children:r.id||"-"})}),s({columnId:"buildingName",compare:(e,r)=>(e.buildingName||"").localeCompare(r.buildingName||""),renderHeaderCell:()=>"Building",renderCell:r=>e.exports.jsx(n,{children:r.buildingName||"-"})}),s({columnId:"protocol",compare:(e,r)=>(e.protocol||"").localeCompare(r.protocol||""),renderHeaderCell:()=>"Protocol",renderCell:r=>e.exports.jsx(n,{children:r.protocol||"-"})}),s({columnId:"ipAddress",compare:(e,r)=>(e.ipAddress||"").localeCompare(r.ipAddress||""),renderHeaderCell:()=>"IP/Domain/Tel#/SerialNumber",renderCell:r=>e.exports.jsx(n,{children:r.ipAddress||"-"})}),s({columnId:"ipPort",compare:(e,r)=>(e.ipPort||"").localeCompare(r.ipPort||""),renderHeaderCell:()=>"Modbus TCP Port",renderCell:r=>e.exports.jsx(n,{children:r.ipPort||"-"})}),s({columnId:"comPort",compare:(e,r)=>(e.comPort||"").localeCompare(r.comPort||""),renderHeaderCell:()=>"COM Port",renderCell:r=>e.exports.jsx(n,{children:r.comPort||"-"})}),s({columnId:"baudRate",compare:(e,r)=>(e.baudRate||"").localeCompare(r.baudRate||""),renderHeaderCell:()=>"Baud Rate",renderCell:r=>e.exports.jsx(n,{children:r.baudRate||"-"})}),s({columnId:"buildingPath",compare:(e,r)=>(e.buildingPath||"").localeCompare(r.buildingPath||""),renderHeaderCell:()=>"Building Path",renderCell:r=>e.exports.jsx(n,{children:r.buildingPath||"-"})})];return e.exports.jsx("div",{className:j,children:e.exports.jsx("div",{className:b,children:e.exports.jsx("div",{className:g,children:e.exports.jsx("div",{className:C,children:e.exports.jsxs("div",{className:_,children:[e.exports.jsx("div",{className:f,children:e.exports.jsxs("div",{className:N,children:[e.exports.jsxs("button",{className:v,onClick:async()=>{D(!0),await Z(),D(!1)},disabled:T,"aria-label":"Refresh",children:[e.exports.jsx(c,{}),e.exports.jsx("span",{children:"Refresh"})]}),e.exports.jsxs("button",{className:v,onClick:()=>{},"aria-label":"Add Building",children:[e.exports.jsx(x,{}),e.exports.jsx("span",{children:"Add Building"})]}),e.exports.jsxs("button",{className:v,onClick:()=>{},"aria-label":"Delete Building",children:[e.exports.jsx(p,{}),e.exports.jsx("span",{children:"Delete Building"})]}),e.exports.jsxs("div",{className:y,children:[e.exports.jsx(h,{className:P}),e.exports.jsx("input",{className:W,type:"text",placeholder:"Search buildings...",value:F,onChange:e=>{M(e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search buildings"})]})]})}),e.exports.jsx("div",{style:{padding:"0"},children:e.exports.jsx("hr",{className:I})}),e.exports.jsxs("div",{className:w,children:[S&&0===B.length&&e.exports.jsxs("div",{className:H,style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.exports.jsx(m,{size:"large"}),e.exports.jsx(u,{style:{marginLeft:"12px"},children:"Loading buildings..."})]}),!S&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsxs(l,{items:B,columns:E,sortable:!0,resizableColumns:!0,columnSizingOptions:{id:{minWidth:60,defaultWidth:80},buildingName:{minWidth:120,defaultWidth:150},protocol:{minWidth:100,defaultWidth:120},ipAddress:{minWidth:150,defaultWidth:200},ipPort:{minWidth:100,defaultWidth:120},comPort:{minWidth:80,defaultWidth:100},baudRate:{minWidth:80,defaultWidth:100},buildingPath:{minWidth:200,defaultWidth:400}},children:[e.exports.jsx(t,{children:e.exports.jsx(o,{children:({renderHeaderCell:r})=>e.exports.jsx(i,{children:r()})})}),e.exports.jsx(d,{children:({item:r,rowId:s})=>e.exports.jsx(o,{children:({renderCell:s})=>e.exports.jsx(a,{children:s(r)})},s)})]}),0===B.length&&e.exports.jsxs("div",{style:{marginTop:"24px",textAlign:"center",padding:"0 20px"},children:[e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[e.exports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{opacity:.5},children:e.exports.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4ZM10 8V16H14V8H10Z",fill:"currentColor"})}),e.exports.jsx(u,{size:400,weight:"semibold",children:"No buildings found"})]}),e.exports.jsx(u,{size:300,style:{display:"block",marginBottom:"16px",color:"#605e5c",textAlign:"center"},children:"No buildings configured in the system"})]})]})]})]})})})})})};export{B as BuildingsPage};

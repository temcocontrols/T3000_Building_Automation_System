import{j as e}from"./react.8639cc86.js";import{r,R as s}from"./client.58f92968.js";import{l,n as i,T as t,y as o,bk as a,aG as d,P as n,S as c}from"./App.7c34790a.js";import{c as p,D as x,a as m,b as h,d as u,e as j,f as b}from"./DataGridHeaderCell.ec45a911.js";import{T as g}from"./TableCellLayout.d4b0b796.js";import"./index.3bd6c859.js";import"./Serializer.f6a5f515.js";import"./axios.65f6a2c9.js";import"./T3Data.63f93fe7.js";import"./_commonjsHelpers.a5007c1f.js";var _="_container_5ei19_7",C="_bladeContentContainer_5ei19_19",f="_bladeContentWrapper_5ei19_27",P="_bladeContent_5ei19_19",v="_partContent_5ei19_43",N="_toolbar_5ei19_52",W="_toolbarContainer_5ei19_61",y="_toolbarButton_5ei19_69",I="_searchInputWrapper_5ei19_116",S="_searchIcon_5ei19_123",H="_searchInput_5ei19_116",A="_overviewHr_5ei19_182",R="_dockingBody_5ei19_190",k="_noData_5ei19_221",w="_centerText_5ei19_229";const B=()=>{const{selectedDevice:B}=l(),[z,D]=r.exports.useState([]),[T,F]=r.exports.useState(!1),[E,M]=r.exports.useState(null),[G,L]=r.exports.useState(!1),[O,q]=r.exports.useState(""),$=r.exports.useCallback((async()=>{F(!0),M(null);try{const e="/api/buildings",r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch buildings: ${r.statusText}`);const s=await r.json();D(s.buildings||[])}catch(e){const r=e instanceof Error?e.message:"Failed to load buildings";M(r),console.error("Error fetching buildings:",e)}finally{F(!1)}}),[]),J=s.useMemo((()=>0===z.length?Array(10).fill(null).map(((e,r)=>({id:void 0,buildingName:"",protocol:"",ipAddress:"",ipPort:"",comPort:"",baudRate:"",buildingPath:""}))):z),[z]),K=e=>!e.id&&0===z.length,Q=[p({columnId:"id",compare:(e,r)=>(e.id||0)-(r.id||0),renderHeaderCell:()=>"Item",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.id||"-")})}),p({columnId:"buildingName",compare:(e,r)=>(e.buildingName||"").localeCompare(r.buildingName||""),renderHeaderCell:()=>"Building",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.buildingName||"-")})}),p({columnId:"protocol",compare:(e,r)=>(e.protocol||"").localeCompare(r.protocol||""),renderHeaderCell:()=>"Protocol",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.protocol||"-")})}),p({columnId:"ipAddress",compare:(e,r)=>(e.ipAddress||"").localeCompare(r.ipAddress||""),renderHeaderCell:()=>"IP/Domain/Tel#/SerialNumber",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.ipAddress||"-")})}),p({columnId:"ipPort",compare:(e,r)=>(e.ipPort||"").localeCompare(r.ipPort||""),renderHeaderCell:()=>"Modbus TCP Port",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.ipPort||"-")})}),p({columnId:"comPort",compare:(e,r)=>(e.comPort||"").localeCompare(r.comPort||""),renderHeaderCell:()=>"COM Port",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.comPort||"-")})}),p({columnId:"baudRate",compare:(e,r)=>(e.baudRate||"").localeCompare(r.baudRate||""),renderHeaderCell:()=>"Baud Rate",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.baudRate||"-")})}),p({columnId:"buildingPath",compare:(e,r)=>(e.buildingPath||"").localeCompare(r.buildingPath||""),renderHeaderCell:()=>"Building Path",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.buildingPath||"-")})})];return e.exports.jsx("div",{className:_,children:e.exports.jsx("div",{className:C,children:e.exports.jsx("div",{className:f,children:e.exports.jsx("div",{className:P,children:e.exports.jsxs("div",{className:v,children:[E&&e.exports.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#fef6f6",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.exports.jsx(i,{style:{color:"#d13438",fontSize:"16px",flexShrink:0}}),e.exports.jsx(t,{style:{color:"#d13438",fontWeight:500,fontSize:"13px"},children:E})]}),B&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("div",{className:N,children:e.exports.jsxs("div",{className:W,children:[e.exports.jsxs("button",{className:y,onClick:async()=>{L(!0),await $(),L(!1)},disabled:G,"aria-label":"Refresh",children:[e.exports.jsx(o,{}),e.exports.jsx("span",{children:"Refresh"})]}),e.exports.jsxs("button",{className:y,onClick:()=>{console.log("Add building")},"aria-label":"Add Building",children:[e.exports.jsx(a,{}),e.exports.jsx("span",{children:"Add Building"})]}),e.exports.jsxs("button",{className:y,onClick:()=>{console.log("Delete building")},"aria-label":"Delete Building",children:[e.exports.jsx(d,{}),e.exports.jsx("span",{children:"Delete Building"})]}),e.exports.jsxs("div",{className:I,children:[e.exports.jsx(n,{className:S}),e.exports.jsx("input",{className:H,type:"text",placeholder:"Search buildings...",value:O,onChange:e=>{q(e.target.value),console.log("Search query:",e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search buildings"})]})]})}),e.exports.jsx("div",{style:{padding:"0"},children:e.exports.jsx("hr",{className:A})})]}),e.exports.jsxs("div",{className:R,children:[(T||G)&&e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px"},children:[e.exports.jsx(c,{size:"tiny"}),e.exports.jsx(t,{size:200,weight:"regular",children:"Loading buildings..."})]}),!B&&!T&&e.exports.jsx("div",{className:k,children:e.exports.jsxs("div",{className:w,children:[e.exports.jsx(t,{size:400,weight:"semibold",children:"No device selected"}),e.exports.jsx("br",{}),e.exports.jsx(t,{size:200,children:"Please select a device from the tree to view inputs"})]})}),B&&!T&&e.exports.jsx(e.exports.Fragment,{children:e.exports.jsxs(x,{items:J,columns:Q,sortable:!0,resizableColumns:!0,columnSizingOptions:{id:{minWidth:60,defaultWidth:80},buildingName:{minWidth:120,defaultWidth:150},protocol:{minWidth:100,defaultWidth:120},ipAddress:{minWidth:150,defaultWidth:200},ipPort:{minWidth:100,defaultWidth:120},comPort:{minWidth:80,defaultWidth:100},baudRate:{minWidth:80,defaultWidth:100},buildingPath:{minWidth:200,defaultWidth:400}},children:[e.exports.jsx(m,{children:e.exports.jsx(h,{children:({renderHeaderCell:r})=>e.exports.jsx(u,{children:r()})})}),e.exports.jsx(j,{children:({item:r,rowId:s})=>e.exports.jsx(h,{children:({renderCell:s})=>e.exports.jsx(b,{children:s(r)})},s)})]})})]})]})})})})})};export{B as BuildingsPage};

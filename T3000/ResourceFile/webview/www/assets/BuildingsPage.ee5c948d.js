import{j as e}from"./react.3bc90b5d.js";import{r,R as s}from"./client.58f92968.js";import{u as l,E as t,T as a,h as i,bn as o,aG as d,P as n,S as c}from"./App.4ea21eda.js";import{c as p,D as x,a as h,b as m,d as u,e as j,f as b}from"./DataGridHeaderCell.c083631d.js";import{T as g}from"./TableCellLayout.777c5080.js";import"./index.f111124c.js";import"./Serializer.f6a5f515.js";import"./axios.65f6a2c9.js";import"./T3Data.f6c34e59.js";import"./_commonjsHelpers.a5007c1f.js";var _="_container_2h9zz_13",C="_bladeContentContainer_2h9zz_37",f="_bladeContentWrapper_2h9zz_53",z="_bladeContent_2h9zz_37",P="_partContent_2h9zz_85",N="_toolbar_2h9zz_103",v="_toolbarContainer_2h9zz_121",W="_toolbarButton_2h9zz_137",y="_searchInputWrapper_2h9zz_231",I="_searchIcon_2h9zz_245",S="_searchInput_2h9zz_231",H="_overviewHr_2h9zz_363",R="_dockingBody_2h9zz_379",w="_noData_2h9zz_441",A="_centerText_2h9zz_457";const B=()=>{const{selectedDevice:B}=l(),[k,D]=r.exports.useState([]),[T,F]=r.exports.useState(!1),[E,M]=r.exports.useState(null),[G,L]=r.exports.useState(!1),[O,$]=r.exports.useState(""),q=r.exports.useCallback((async()=>{F(!0),M(null);try{const e="/api/buildings",r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch buildings: ${r.statusText}`);const s=await r.json();D(s.buildings||[])}catch(e){const r=e instanceof Error?e.message:"Failed to load buildings";M(r)}finally{F(!1)}}),[]),J=s.useMemo((()=>0===k.length?Array(10).fill(null).map(((e,r)=>({id:void 0,buildingName:"",protocol:"",ipAddress:"",ipPort:"",comPort:"",baudRate:"",buildingPath:""}))):k),[k]),K=e=>!e.id&&0===k.length,Q=[p({columnId:"id",compare:(e,r)=>(e.id||0)-(r.id||0),renderHeaderCell:()=>"Item",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.id||"-")})}),p({columnId:"buildingName",compare:(e,r)=>(e.buildingName||"").localeCompare(r.buildingName||""),renderHeaderCell:()=>"Building",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.buildingName||"-")})}),p({columnId:"protocol",compare:(e,r)=>(e.protocol||"").localeCompare(r.protocol||""),renderHeaderCell:()=>"Protocol",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.protocol||"-")})}),p({columnId:"ipAddress",compare:(e,r)=>(e.ipAddress||"").localeCompare(r.ipAddress||""),renderHeaderCell:()=>"IP/Domain/Tel#/SerialNumber",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.ipAddress||"-")})}),p({columnId:"ipPort",compare:(e,r)=>(e.ipPort||"").localeCompare(r.ipPort||""),renderHeaderCell:()=>"Modbus TCP Port",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.ipPort||"-")})}),p({columnId:"comPort",compare:(e,r)=>(e.comPort||"").localeCompare(r.comPort||""),renderHeaderCell:()=>"COM Port",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.comPort||"-")})}),p({columnId:"baudRate",compare:(e,r)=>(e.baudRate||"").localeCompare(r.baudRate||""),renderHeaderCell:()=>"Baud Rate",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.baudRate||"-")})}),p({columnId:"buildingPath",compare:(e,r)=>(e.buildingPath||"").localeCompare(r.buildingPath||""),renderHeaderCell:()=>"Building Path",renderCell:r=>e.exports.jsx(g,{children:!K(r)&&(r.buildingPath||"-")})})];return e.exports.jsx("div",{className:_,children:e.exports.jsx("div",{className:C,children:e.exports.jsx("div",{className:f,children:e.exports.jsx("div",{className:z,children:e.exports.jsxs("div",{className:P,children:[E&&e.exports.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#fef6f6",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.exports.jsx(t,{style:{color:"#d13438",fontSize:"16px",flexShrink:0}}),e.exports.jsx(a,{style:{color:"#d13438",fontWeight:500,fontSize:"13px"},children:E})]}),B&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("div",{className:N,children:e.exports.jsxs("div",{className:v,children:[e.exports.jsxs("button",{className:W,onClick:async()=>{L(!0),await q(),L(!1)},disabled:G,"aria-label":"Refresh",children:[e.exports.jsx(i,{}),e.exports.jsx("span",{children:"Refresh"})]}),e.exports.jsxs("button",{className:W,onClick:()=>{},"aria-label":"Add Building",children:[e.exports.jsx(o,{}),e.exports.jsx("span",{children:"Add Building"})]}),e.exports.jsxs("button",{className:W,onClick:()=>{},"aria-label":"Delete Building",children:[e.exports.jsx(d,{}),e.exports.jsx("span",{children:"Delete Building"})]}),e.exports.jsxs("div",{className:y,children:[e.exports.jsx(n,{className:I}),e.exports.jsx("input",{className:S,type:"text",placeholder:"Search buildings...",value:O,onChange:e=>{$(e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search buildings"})]})]})}),e.exports.jsx("div",{style:{padding:"0"},children:e.exports.jsx("hr",{className:H})})]}),e.exports.jsxs("div",{className:R,children:[(T||G)&&e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px"},children:[e.exports.jsx(c,{size:"tiny"}),e.exports.jsx(a,{size:200,weight:"regular",children:"Loading buildings..."})]}),!B&&!T&&e.exports.jsx("div",{className:w,children:e.exports.jsxs("div",{className:A,children:[e.exports.jsx(a,{size:400,weight:"semibold",children:"No device selected"}),e.exports.jsx("br",{}),e.exports.jsx(a,{size:200,children:"Please select a device from the tree to view inputs"})]})}),B&&!T&&e.exports.jsx(e.exports.Fragment,{children:e.exports.jsxs(x,{items:J,columns:Q,sortable:!0,resizableColumns:!0,columnSizingOptions:{id:{minWidth:60,defaultWidth:80},buildingName:{minWidth:120,defaultWidth:150},protocol:{minWidth:100,defaultWidth:120},ipAddress:{minWidth:150,defaultWidth:200},ipPort:{minWidth:100,defaultWidth:120},comPort:{minWidth:80,defaultWidth:100},baudRate:{minWidth:80,defaultWidth:100},buildingPath:{minWidth:200,defaultWidth:400}},children:[e.exports.jsx(h,{children:e.exports.jsx(m,{children:({renderHeaderCell:r})=>e.exports.jsx(u,{children:r()})})}),e.exports.jsx(j,{children:({item:r,rowId:s})=>e.exports.jsx(m,{children:({renderCell:s})=>e.exports.jsx(b,{children:s(r)})},s)})]})})]})]})})})})})};export{B as BuildingsPage};

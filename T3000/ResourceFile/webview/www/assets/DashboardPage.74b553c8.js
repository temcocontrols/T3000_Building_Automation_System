import{j as e}from"./react.3bc90b5d.js";import{r as s,R as t}from"./client.58f92968.js";import{u as a,S as i,C as r,T as c,B as o,I as l,W as n,E as x,a as d,b as p,O as m,c as _,D as h,F as j,d as v,e as y,f as u,g as N,A as g,h as f,i as S,j as w,k as b,G as M,l as T}from"./App.4ea21eda.js";import{C as A}from"./Card.8c416f8b.js";import"./index.e8ef0632.js";import{i as D}from"./install.00f124f0.js";import"./index.f111124c.js";import"./Serializer.f6a5f515.js";import"./axios.65f6a2c9.js";import"./T3Data.f6c34e59.js";import"./_commonjsHelpers.a5007c1f.js";var I={widget:"_widget_kwwjp_5",header:"_header_kwwjp_33",title:"_title_kwwjp_51",actions:"_actions_kwwjp_69",content:"_content_kwwjp_79",small:"_small_kwwjp_91",medium:"_medium_kwwjp_101",large:"_large_kwwjp_111",full:"_full_kwwjp_121"};const z=({title:s,children:t,className:a="",size:i="medium",actions:r})=>e.exports.jsxs(A,{className:`${I.widget} ${I[i]} ${a}`,children:[e.exports.jsxs("div",{className:I.header,children:[e.exports.jsx("div",{className:I.title,children:s}),r&&e.exports.jsx("div",{className:I.actions,children:r})]}),e.exports.jsx("div",{className:I.content,children:t})]});var C="_overview_1mo9n_5",k="_loading_1mo9n_17",L="_card_1mo9n_31",P="_cardContent_1mo9n_61",$="_cardLabel_1mo9n_75",B="_cardValue_1mo9n_91",H="_cardDetail_1mo9n_107";const E=()=>{const{devices:t,deviceStatuses:r}=a(),[c,o]=s.exports.useState({totalDevices:0,onlineDevices:0,offlineDevices:0,totalPoints:0,activeAlarms:0,graphics:0}),[l,n]=s.exports.useState(!0);return s.exports.useEffect((()=>{(async()=>{const e=Array.from(r.values()).filter((e=>"online"===e)).length,s=35*t.length;o({totalDevices:t.length,onlineDevices:e,offlineDevices:t.length-e,totalPoints:s,activeAlarms:0,graphics:12}),n(!1)})()}),[t,r]),l?e.exports.jsx("div",{className:k,children:e.exports.jsx(i,{size:"small"})}):e.exports.jsxs("div",{className:C,children:[e.exports.jsx("div",{className:L,children:e.exports.jsxs("div",{className:P,children:[e.exports.jsx("div",{className:$,children:"DEVICES"}),e.exports.jsx("div",{className:B,children:c.totalDevices}),e.exports.jsxs("div",{className:H,children:[c.onlineDevices," online • ",c.offlineDevices," offline"]})]})}),e.exports.jsx("div",{className:L,children:e.exports.jsxs("div",{className:P,children:[e.exports.jsx("div",{className:$,children:"SYSTEM HEALTH"}),e.exports.jsx("div",{className:B,children:"Good"}),e.exports.jsx("div",{className:H,children:"45% CPU • 62% Memory"})]})}),e.exports.jsx("div",{className:L,children:e.exports.jsxs("div",{className:P,children:[e.exports.jsx("div",{className:$,children:"SYNC"}),e.exports.jsx("div",{className:B,children:"2 min ago"}),e.exports.jsxs("div",{className:H,children:["Connected • ",c.totalPoints," points"]})]})}),e.exports.jsx("div",{className:L,children:e.exports.jsxs("div",{className:P,children:[e.exports.jsx("div",{className:$,children:"ALARMS"}),e.exports.jsx("div",{className:B,children:c.activeAlarms}),e.exports.jsx("div",{className:H,children:0===c.activeAlarms?"All clear":"Attention needed"})]})}),e.exports.jsx("div",{className:L,children:e.exports.jsxs("div",{className:P,children:[e.exports.jsx("div",{className:$,children:"POINTS"}),e.exports.jsx("div",{className:B,children:c.totalPoints}),e.exports.jsx("div",{className:H,children:"Monitored"})]})}),e.exports.jsx("div",{className:L,children:e.exports.jsxs("div",{className:P,children:[e.exports.jsx("div",{className:$,children:"GRAPHICS"}),e.exports.jsx("div",{className:B,children:c.graphics}),e.exports.jsx("div",{className:H,children:"Active"})]})})]})};var R="_container_1gltm_5",V="_empty_1gltm_17",O="_emptyIcon_1gltm_37",G="_emptyText_1gltm_49",F="_emptySubtext_1gltm_63",U="_alarmList_1gltm_73",W="_alarmItem_1gltm_89",Y="_alarmIcon_1gltm_117",J="_alarmContent_1gltm_127",q="_alarmMessage_1gltm_141",K="_alarmMeta_1gltm_153",Q="_viewAllButton_1gltm_163";const X=()=>{const s=[],t=s=>{switch(s){case"high":return e.exports.jsx(x,{style:{color:"#d13438",fontSize:"16px"}});case"medium":return e.exports.jsx(n,{style:{color:"#f7630c",fontSize:"16px"}});case"low":return e.exports.jsx(l,{style:{color:"#ffc83d",fontSize:"16px"}});default:return e.exports.jsx(l,{style:{color:"#a19f9d",fontSize:"16px"}})}};return e.exports.jsx("div",{className:R,children:0===s.length?e.exports.jsxs("div",{className:V,children:[e.exports.jsx("div",{className:O,children:e.exports.jsx(r,{style:{fontSize:"32px",color:"#107c10"}})}),e.exports.jsx(c,{className:G,children:"No active alarms"}),e.exports.jsx(c,{className:F,children:"System is running normally"})]}):e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("div",{className:U,children:s.map((s=>e.exports.jsxs("div",{className:W,children:[e.exports.jsx("div",{className:Y,children:t(s.severity)}),e.exports.jsxs("div",{className:J,children:[e.exports.jsx("div",{className:q,children:s.message}),e.exports.jsxs("div",{className:K,children:[s.timestamp," | ",s.device]})]})]},s.id)))}),e.exports.jsx(o,{appearance:"subtle",className:Q,onClick:()=>window.location.href="/t3000/alarms",children:"View All Alarms →"})]})})};var Z="_container_olygt_5",ee="_metric_olygt_17",se="_metricHeader_olygt_29",te="_metricLabel_olygt_41",ae="_metricValue_olygt_53",ie="_progressBar_olygt_65",re="_progressFill_olygt_79";const ce=()=>{const[t,a]=s.exports.useState({cpu:45,memory:32,database:245,databaseMax:1024});s.exports.useEffect((()=>{const e=setInterval((()=>{a((e=>({...e,cpu:Math.min(100,Math.max(0,e.cpu+10*(Math.random()-.5))),memory:Math.min(100,Math.max(0,e.memory+5*(Math.random()-.5)))})))}),5e3);return()=>clearInterval(e)}),[]);const i=e=>e>80?"#d13438":e>60?"#f7630c":"#107c10";return e.exports.jsxs("div",{className:Z,children:[e.exports.jsxs("div",{className:ee,children:[e.exports.jsxs("div",{className:se,children:[e.exports.jsx(c,{className:te,children:"CPU Usage"}),e.exports.jsxs(c,{className:ae,children:[Math.round(t.cpu),"%"]})]}),e.exports.jsx("div",{className:ie,children:e.exports.jsx("div",{className:re,style:{width:`${t.cpu}%`,backgroundColor:i(t.cpu)}})})]}),e.exports.jsxs("div",{className:ee,children:[e.exports.jsxs("div",{className:se,children:[e.exports.jsx(c,{className:te,children:"Memory"}),e.exports.jsxs(c,{className:ae,children:[Math.round(t.memory),"%"]})]}),e.exports.jsx("div",{className:ie,children:e.exports.jsx("div",{className:re,style:{width:`${t.memory}%`,backgroundColor:i(t.memory)}})})]}),e.exports.jsxs("div",{className:ee,children:[e.exports.jsxs("div",{className:se,children:[e.exports.jsx(c,{className:te,children:"Database Size"}),e.exports.jsxs(c,{className:ae,children:[t.database," MB / ",t.databaseMax," MB"]})]}),e.exports.jsx("div",{className:ie,children:e.exports.jsx("div",{className:re,style:{width:t.database/t.databaseMax*100+"%",backgroundColor:"#0078d4"}})})]})]})};var oe="_container_12f4d_5",le="_serviceCard_12f4d_59",ne="_cardHeader_12f4d_109",xe="_iconWrapper_12f4d_121",de="_icon_12f4d_121",pe="_label_12f4d_145",me="_sync_12f4d_159";const _e=()=>{const s=d(),a=[{label:"Inputs",path:"/t3000/inputs",icon:e.exports.jsx(p,{}),color:"#0078d4",count:48,lastSync:"2 min ago"},{label:"Outputs",path:"/t3000/outputs",icon:e.exports.jsx(m,{}),color:"#107c10",count:32,lastSync:"2 min ago"},{label:"Variables",path:"/t3000/variables",icon:e.exports.jsx(_,{}),color:"#8764b8",count:64,lastSync:"2 min ago"},{label:"Programs",path:"/t3000/programs",icon:e.exports.jsx(h,{}),color:"#d13438",count:12,lastSync:"5 min ago"},{label:"PID Loops",path:"/t3000/pidloops",icon:e.exports.jsx(j,{}),color:"#f7630c",count:8,lastSync:"3 min ago"},{label:"Graphics",path:"/t3000/graphics",icon:e.exports.jsx(v,{}),color:"#5c2d91",count:12,lastSync:"10 min ago"},{label:"Schedules",path:"/t3000/schedules",icon:e.exports.jsx(y,{}),color:"#00a4a4",count:15,lastSync:"1 min ago"},{label:"Holidays",path:"/t3000/holidays",icon:e.exports.jsx(u,{}),color:"#8a8886",count:6,lastSync:"1 hr ago"},{label:"Trends",path:"/t3000/trendlogs",icon:e.exports.jsx(N,{}),color:"#0078d4",count:24,lastSync:"1 min ago"},{label:"Alarms",path:"/t3000/alarms",icon:e.exports.jsx(g,{}),color:"#d13438",count:0,lastSync:"Just now"}];return e.exports.jsx("div",{className:oe,children:a.map((a=>e.exports.jsxs("button",{className:le,onClick:()=>s(a.path),children:[e.exports.jsxs("div",{className:ne,children:[e.exports.jsx("div",{className:xe,children:t.cloneElement(a.icon,{className:de,style:{color:a.color}})}),e.exports.jsx("span",{className:pe,children:a.label})]}),e.exports.jsxs(c,{className:me,children:[a.count," items • ",a.lastSync]})]},a.path)))})};var he={container:"_container_siw27_5",empty:"_empty_siw27_17",emptyText:"_emptyText_siw27_35",activityList:"_activityList_siw27_45",activityItem:"_activityItem_siw27_59",activityIcon:"_activityIcon_siw27_85",icon:"_icon_siw27_101",activityContent:"_activityContent_siw27_111",activityTop:"_activityTop_siw27_125",activityDevice:"_activityDevice_siw27_139",activityMessage:"_activityMessage_siw27_151",activityTimeInfo:"_activityTimeInfo_siw27_165",activityTime:"_activityTime_siw27_165",activityTimestamp:"_activityTimestamp_siw27_193",timeDivider:"_timeDivider_siw27_209",activitySyncType:"_activitySyncType_siw27_221"};const je=()=>{const{devices:t}=a(),[i,r]=s.exports.useState([]);s.exports.useEffect((()=>{if(t.length>0){const e=new Date,s=["Manual Sync","Auto Sync","Network Sync","Scheduled Sync"],a=t.slice(0,5).map(((t,a)=>{const i=3*a+2,r=new Date(e.getTime()-6e4*i),c=r.getFullYear(),o=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0"),n=r.getHours(),x=String(r.getMinutes()).padStart(2,"0"),d=String(r.getSeconds()).padStart(2,"0"),p=n>=12?"PM":"AM",m=`${c}-${o}-${l} ${String(n%12||12).padStart(2,"0")}:${x}:${d} ${p}`,_=i<60?`${i} min ago`:`${Math.floor(i/60)} hr ago`;return{id:`activity-${a}`,type:"sync",message:"Synced successfully",device:t.nameShowOnTree,timestamp:m,timeAgo:_,syncType:s[a%s.length]}}));r(a)}}),[t]);const o=s=>{switch(s){case"sync":return e.exports.jsx(f,{className:he.icon,style:{color:"#0078d4"}});case"update":return e.exports.jsx(w,{className:he.icon,style:{color:"#107c10"}});case"config":return e.exports.jsx(S,{className:he.icon,style:{color:"#8764b8"}});case"alarm":return e.exports.jsx(g,{className:he.icon,style:{color:"#d13438"}});default:return e.exports.jsx(f,{className:he.icon,style:{color:"#605e5c"}})}};return e.exports.jsx("div",{className:he.container,children:0===i.length?e.exports.jsx("div",{className:he.emptyState,children:e.exports.jsx(c,{className:he.emptyText,children:"No recent activity"})}):e.exports.jsx("div",{className:he.activityList,children:i.map((s=>e.exports.jsxs("div",{className:he.activityItem,children:[e.exports.jsx("div",{className:he.activityIcon,children:o(s.type)}),e.exports.jsxs("div",{className:he.activityContent,children:[e.exports.jsxs("div",{className:he.activityTop,children:[e.exports.jsx("div",{className:he.activityDevice,children:s.device}),e.exports.jsx("div",{className:he.activityMessage,children:s.message})]}),e.exports.jsxs("div",{className:he.activityTimeInfo,children:[e.exports.jsx("span",{className:he.activityTimestamp,children:s.timestamp}),e.exports.jsx("span",{className:he.timeDivider,children:"•"}),e.exports.jsx("span",{className:he.activityTime,children:s.timeAgo}),e.exports.jsx("span",{className:he.timeDivider,children:"•"}),e.exports.jsx("span",{className:he.activitySyncType,children:s.syncType})]})]})]},s.id)))})})};var ve="_container_1305w_5",ye="_chart_1305w_19";const ue=()=>{const t=s.exports.useRef(null);return s.exports.useEffect((()=>{if(!t.current)return;const e=D(t.current),s=Date.now(),a=[],i=[];for(let t=0;t<24;t++){const e=s-36e5*(24-t);a.push([e,20+5*Math.random()+3*Math.sin(t/4)]),i.push([e,50+10*Math.random()+8*Math.cos(t/3)])}const r={tooltip:{trigger:"axis",axisPointer:{type:"cross"},textStyle:{fontSize:11}},grid:{left:"50",right:"40",top:"30",bottom:"30"},xAxis:{type:"time",axisLabel:{fontSize:10,formatter:e=>new Date(e).getHours()+":00"}},yAxis:[{type:"value",name:"Temp (°C)",nameTextStyle:{fontSize:10},axisLabel:{fontSize:10},splitLine:{lineStyle:{type:"dashed",color:"#e0e0e0"}}},{type:"value",name:"Humidity (%)",nameTextStyle:{fontSize:10},axisLabel:{fontSize:10},splitLine:{show:!1}}],series:[{name:"Temperature",type:"line",data:a,smooth:!0,lineStyle:{width:2,color:"#0078d4"},itemStyle:{color:"#0078d4"},showSymbol:!1,yAxisIndex:0},{name:"Humidity",type:"line",data:i,smooth:!0,lineStyle:{width:2,color:"#107c10"},itemStyle:{color:"#107c10"},showSymbol:!1,yAxisIndex:1}]};e.setOption(r);const c=()=>e.resize();return window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c),e.dispose()}}),[]),e.exports.jsx("div",{className:ve,children:e.exports.jsx("div",{ref:t,className:ye})})};var Ne="_container_1lrpc_5",ge="_empty_1lrpc_17",fe="_emptyText_1lrpc_37",Se="_scheduleList_1lrpc_47",we="_scheduleItem_1lrpc_59",be="_scheduleIcon_1lrpc_93",Me="_scheduleInfo_1lrpc_111",Te="_scheduleName_1lrpc_127",Ae="_scheduleTime_1lrpc_145",De="_statusDot_1lrpc_157";const Ie=()=>{const s=[{id:"1",name:"HVAC Start",time:"06:00 AM",status:"active"},{id:"2",name:"Lighting On",time:"07:00 AM",status:"active"},{id:"3",name:"Peak Hours",time:"09:00 AM",status:"upcoming"},{id:"4",name:"HVAC Stop",time:"06:00 PM",status:"upcoming"},{id:"5",name:"Lighting Off",time:"07:00 PM",status:"upcoming"},{id:"6",name:"Night Mode",time:"10:00 PM",status:"upcoming"},{id:"7",name:"Backup Sys",time:"11:00 PM",status:"upcoming"},{id:"8",name:"Chiller Start",time:"05:30 AM",status:"upcoming"}],t=e=>{switch(e){case"active":return"#107c10";case"upcoming":return"#0078d4";default:return"#8a8886"}};return e.exports.jsx("div",{className:Ne,children:0===s.length?e.exports.jsxs("div",{className:ge,children:[e.exports.jsx(y,{style:{fontSize:"32px",color:"#c8c6c4"}}),e.exports.jsx(c,{className:fe,children:"No schedules"})]}):e.exports.jsx("div",{className:Se,children:s.map((s=>e.exports.jsxs("div",{className:we,children:[e.exports.jsx("div",{className:be,children:e.exports.jsx(b,{style:{fontSize:"12px",color:t(s.status)}})}),e.exports.jsxs("div",{className:Me,children:[e.exports.jsx("div",{className:Te,children:s.name}),e.exports.jsx("div",{className:Ae,children:s.time})]}),e.exports.jsx("div",{className:De,style:{backgroundColor:t(s.status)}})]},s.id)))})})};var ze="_container_12j36_5",Ce="_infoBar_12j36_21",ke="_infoBarLeft_12j36_43",Le="_infoBarIcon_12j36_57",Pe="_infoBarContent_12j36_85",$e="_infoBarTitle_12j36_97",Be="_infoBarDescription_12j36_113",He="_infoBarRight_12j36_125",Ee="_infoBarStat_12j36_137",Re="_infoBarStatLabel_12j36_151",Ve="_infoBarStatValue_12j36_167",Oe="_statusDot_12j36_185",Ge="_content_12j36_223",Fe="_quickAccessSection_12j36_243",Ue="_section_12j36_257",We="_sectionTitle_12j36_273",Ye="_monitoringGrid_12j36_325",Je="_dataPlanningGrid_12j36_339";const qe=()=>{const{devices:t,deviceStatuses:i,lastSyncTime:r}=a(),[o,l]=s.exports.useState(new Date);s.exports.useEffect((()=>{const e=setInterval((()=>l(new Date)),1e3);return()=>clearInterval(e)}),[]);const n=Array.from(i.values()).filter((e=>"online"===e)).length;return e.exports.jsxs("div",{className:ze,children:[e.exports.jsxs("div",{className:Ce,children:[e.exports.jsxs("div",{className:ke,children:[e.exports.jsx("div",{className:Le,children:e.exports.jsx(M,{})}),e.exports.jsxs("div",{className:Pe,children:[e.exports.jsx("h1",{className:$e,children:"T3000 Building Automation System"}),e.exports.jsxs(c,{className:Be,children:["Real-time monitoring and control dashboard • ",t.length," devices configured",n>0&&` • ${n} online`,i.size>0&&` • Last sync: ${(e=>{if(!e)return"Not synced";const s=Math.floor((o.getTime()-e.getTime())/1e3);if(s<60)return"Just now";const t=Math.floor(s/60);if(t<60)return`${t} min ago`;return`${Math.floor(t/60)} hr ago`})(r)}`]})]})]}),e.exports.jsxs("div",{className:He,children:[e.exports.jsxs("div",{className:Ee,children:[e.exports.jsx("span",{className:Re,children:"System Status"}),e.exports.jsxs("span",{className:Ve,children:[e.exports.jsx("span",{className:Oe}),"Operational"]})]}),e.exports.jsxs("div",{className:Ee,children:[e.exports.jsx("span",{className:Re,children:"Current Time"}),e.exports.jsx("span",{className:Ve,children:o.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})]}),e.exports.jsxs("div",{className:Ge,children:[e.exports.jsx("div",{className:Fe,children:e.exports.jsx(_e,{})}),e.exports.jsxs("div",{className:Ue,children:[e.exports.jsx("div",{className:We,children:"System Overview"}),e.exports.jsx(E,{})]}),e.exports.jsxs("div",{className:Ue,children:[e.exports.jsx("div",{className:We,children:"Data & Planning"}),e.exports.jsxs("div",{className:Je,children:[e.exports.jsx(z,{title:"Trend Logs",size:"large",actions:e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",color:"#0078d4"},onClick:()=>window.location.href="/t3000/trendlog",children:[e.exports.jsx("span",{style:{fontSize:"12px",fontWeight:500},children:"View All"}),e.exports.jsx(T,{style:{fontSize:"14px"}})]}),children:e.exports.jsx(ue,{})}),e.exports.jsx(z,{title:"Schedules",size:"medium",actions:e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer",color:"#0078d4"},onClick:()=>window.location.href="/t3000/schedule",children:[e.exports.jsx("span",{style:{fontSize:"12px",fontWeight:500},children:"View All"}),e.exports.jsx(T,{style:{fontSize:"14px"}})]}),children:e.exports.jsx(Ie,{})})]})]}),e.exports.jsxs("div",{className:Ue,children:[e.exports.jsx("div",{className:We,children:"Monitoring"}),e.exports.jsxs("div",{className:Ye,children:[e.exports.jsx(z,{title:"Recent Alarms",size:"medium",children:e.exports.jsx(X,{})}),e.exports.jsx(z,{title:"System Health",size:"medium",actions:e.exports.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.exports.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#107c10"}}),e.exports.jsx("span",{style:{fontSize:"12px",color:"#605e5c"},children:"API Server"})]}),e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.exports.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#107c10"}}),e.exports.jsx("span",{style:{fontSize:"12px",color:"#605e5c"},children:"Database"})]})]}),children:e.exports.jsx(ce,{})}),e.exports.jsx(z,{title:"Recent Activity",size:"medium",children:e.exports.jsx(je,{})})]})]})]})]})};export{qe as DashboardPage};

import{j as e}from"./react.2da10d74.js";import{r as s}from"./client.b9d1bbf8.js";import{A as r,y as t,bg as o,bh as l,C as i,F as n,T as a,B as d,H as p,J as c,K as x}from"./App.2c62e2d1.js";import{c as m,D as u,a as j,b as h,d as b,e as C,f as g,T as f}from"./DataGridHeaderCell.34491fc4.js";import{B as y}from"./Badge.bfe12ada.js";import"./index.5672de35.js";import"./Serializer.f6a5f515.js";import"./useFocusableGroup.6d334b5b.js";var _="_container_t8pbm_13",v="_bladeContentContainer_t8pbm_37",I="_bladeContentWrapper_t8pbm_53",N="_bladeContent_t8pbm_37",w="_partContent_t8pbm_85",W="_toolbar_t8pbm_103",S="_toolbarContainer_t8pbm_121",k="_toolbarButton_t8pbm_137",H="_toolbarSeparator_t8pbm_215",A="_searchInputWrapper_t8pbm_231",L="_searchIcon_t8pbm_245",D="_searchInput_t8pbm_231",B="_overviewHr_t8pbm_365",z="_dockingBody_t8pbm_381",R="_loading_t8pbm_399",F="_noData_t8pbm_401";const M=()=>{const[M,T]=s.exports.useState([]),[P,E]=s.exports.useState(!1),[Z,G]=s.exports.useState(null),[V,$]=s.exports.useState(!1),[J,K]=s.exports.useState(""),[O,q]=s.exports.useState(null),[Q,U]=s.exports.useState("ascending"),X=s.exports.useCallback((async()=>{E(!0),G(null);try{const e=await fetch(`${r}/api/discover/devices`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();T(s)}catch(e){G(e instanceof Error?e.message:"Failed to fetch devices")}finally{E(!1)}}),[]),Y=async()=>{$(!0),await X(),$(!1)},ee=e=>{O===e?U("ascending"===Q?"descending":"ascending"):(q(e),U("ascending"))},se=M.filter((e=>{if(!J)return!0;const s=J.toLowerCase();return e.model.toLowerCase().includes(s)||e.building.toLowerCase().includes(s)||e.floor.toLowerCase().includes(s)||e.room.toLowerCase().includes(s)||e.subnet.toLowerCase().includes(s)||e.serialNumber.toLowerCase().includes(s)||e.ipAddress.toLowerCase().includes(s)||e.port.toLowerCase().includes(s)||e.protocol.toLowerCase().includes(s)||e.modbusId.toLowerCase().includes(s)})),re=[m({columnId:"model",compare:(e,s)=>e.model.localeCompare(s.model),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>ee("model"),children:[e.exports.jsx("span",{children:"Model"}),"model"===O?"ascending"===Q?e.exports.jsx(p,{}):e.exports.jsx(c,{}):e.exports.jsx(x,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(f,{truncate:!0,title:s.model,children:s.model})}),m({columnId:"building",compare:(e,s)=>e.building.localeCompare(s.building),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>ee("building"),children:[e.exports.jsx("span",{children:"Building"}),"building"===O?"ascending"===Q?e.exports.jsx(p,{}):e.exports.jsx(c,{}):e.exports.jsx(x,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(f,{truncate:!0,title:s.building,children:s.building})}),m({columnId:"floor",compare:(e,s)=>e.floor.localeCompare(s.floor),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>ee("floor"),children:[e.exports.jsx("span",{children:"Floor"}),"floor"===O?"ascending"===Q?e.exports.jsx(p,{}):e.exports.jsx(c,{}):e.exports.jsx(x,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(f,{truncate:!0,title:s.floor,children:s.floor})}),m({columnId:"room",compare:(e,s)=>e.room.localeCompare(s.room),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>ee("room"),children:[e.exports.jsx("span",{children:"Room"}),"room"===O?"ascending"===Q?e.exports.jsx(p,{}):e.exports.jsx(c,{}):e.exports.jsx(x,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(f,{truncate:!0,title:s.room,children:s.room})}),m({columnId:"subnet",compare:(e,s)=>e.subnet.localeCompare(s.subnet),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>ee("subnet"),children:[e.exports.jsx("span",{children:"Sub_net"}),"subnet"===O?"ascending"===Q?e.exports.jsx(p,{}):e.exports.jsx(c,{}):e.exports.jsx(x,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(f,{truncate:!0,title:s.subnet,children:s.subnet})}),m({columnId:"serialNumber",compare:(e,s)=>e.serialNumber.localeCompare(s.serialNumber),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>ee("serialNumber"),children:[e.exports.jsx("span",{children:"Serial#"}),"serialNumber"===O?"ascending"===Q?e.exports.jsx(p,{}):e.exports.jsx(c,{}):e.exports.jsx(x,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(f,{truncate:!0,title:s.serialNumber,children:s.serialNumber})}),m({columnId:"ipAddress",compare:(e,s)=>e.ipAddress.localeCompare(s.ipAddress),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>ee("ipAddress"),children:[e.exports.jsx("span",{children:"IP Address"}),"ipAddress"===O?"ascending"===Q?e.exports.jsx(p,{}):e.exports.jsx(c,{}):e.exports.jsx(x,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(f,{truncate:!0,title:s.ipAddress,children:s.ipAddress})}),m({columnId:"port",compare:(e,s)=>e.port.localeCompare(s.port),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>ee("port"),children:[e.exports.jsx("span",{children:"Port"}),"port"===O?"ascending"===Q?e.exports.jsx(p,{}):e.exports.jsx(c,{}):e.exports.jsx(x,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(f,{truncate:!0,title:s.port,children:s.port})}),m({columnId:"protocol",compare:(e,s)=>e.protocol.localeCompare(s.protocol),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>ee("protocol"),children:[e.exports.jsx("span",{children:"Protocol"}),"protocol"===O?"ascending"===Q?e.exports.jsx(p,{}):e.exports.jsx(c,{}):e.exports.jsx(x,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(f,{truncate:!0,title:s.protocol,children:s.protocol})}),m({columnId:"modbusId",compare:(e,s)=>e.modbusId.localeCompare(s.modbusId),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>ee("modbusId"),children:[e.exports.jsx("span",{children:"ID"}),"modbusId"===O?"ascending"===Q?e.exports.jsx(p,{}):e.exports.jsx(c,{}):e.exports.jsx(x,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(f,{truncate:!0,title:s.modbusId,children:s.modbusId})})];return e.exports.jsx("div",{className:_,children:e.exports.jsx("div",{className:v,children:e.exports.jsx("div",{className:I,children:e.exports.jsx("div",{className:N,children:e.exports.jsxs("div",{className:w,children:[e.exports.jsx("div",{className:W,children:e.exports.jsxs("div",{className:S,children:[e.exports.jsxs("button",{className:k,onClick:Y,disabled:V,title:"Refresh","aria-label":"Refresh",children:[e.exports.jsx(t,{}),e.exports.jsx("span",{children:V?"Refreshing...":"Refresh"})]}),e.exports.jsxs("button",{className:k,onClick:()=>{X()},title:"Start Scan","aria-label":"Start Scan",children:[e.exports.jsx(o,{}),e.exports.jsx("span",{children:"Start Scan"})]}),e.exports.jsx("div",{className:H,role:"separator"}),e.exports.jsxs("button",{className:k,onClick:()=>{},title:"Delete Device","aria-label":"Delete Device",children:[e.exports.jsx(l,{}),e.exports.jsx("span",{children:"Delete Device"})]}),e.exports.jsxs("div",{className:A,children:[e.exports.jsx(i,{className:L}),e.exports.jsx("input",{className:D,type:"text",placeholder:"Search devices...",value:J,onChange:e=>{K(e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search devices"})]})]})}),e.exports.jsx("div",{style:{padding:"0"},children:e.exports.jsx("hr",{className:B})}),e.exports.jsxs("div",{className:z,children:[P&&e.exports.jsxs("div",{className:R,style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[e.exports.jsx(n,{size:"small"}),e.exports.jsx(a,{size:300,style:{marginLeft:"8px"},children:"Loading devices..."})]}),Z&&!P&&e.exports.jsx("div",{className:F,children:e.exports.jsxs("div",{style:{textAlign:"center"},children:[e.exports.jsx(y,{appearance:"filled",color:"danger",children:"Error"}),e.exports.jsx("br",{}),e.exports.jsx(a,{size:300,children:Z})]})}),!P&&!Z&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsxs(u,{items:se,columns:re,sortable:!0,resizableColumns:!0,columnSizingOptions:{model:{minWidth:150,defaultWidth:200},building:{minWidth:100,defaultWidth:130},floor:{minWidth:80,defaultWidth:100},room:{minWidth:80,defaultWidth:100},subnet:{minWidth:80,defaultWidth:100},serialNumber:{minWidth:100,defaultWidth:120},ipAddress:{minWidth:120,defaultWidth:150},port:{minWidth:80,defaultWidth:100},protocol:{minWidth:100,defaultWidth:120},modbusId:{minWidth:60,defaultWidth:80}},focusMode:"composite",children:[e.exports.jsx(j,{children:e.exports.jsx(h,{children:({renderHeaderCell:s})=>e.exports.jsx(b,{children:s()})})}),e.exports.jsx(C,{children:({item:s,rowId:r})=>e.exports.jsx(h,{children:({renderCell:r})=>e.exports.jsx(g,{children:r(s)})},r)})]}),0===M.length&&e.exports.jsxs("div",{style:{marginTop:"24px",textAlign:"center",padding:"0 20px"},children:[e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[e.exports.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{opacity:.5},children:e.exports.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4ZM10 8V16H14V8H10Z",fill:"currentColor"})}),e.exports.jsx(a,{size:400,weight:"semibold",children:"No devices found"})]}),e.exports.jsx(a,{size:300,style:{display:"block",marginBottom:"16px",color:"#605e5c",textAlign:"center"},children:'Click "Start Scan" to discover devices on the network'}),e.exports.jsx(d,{appearance:"subtle",icon:e.exports.jsx(t,{}),onClick:Y,style:{minWidth:"120px",fontWeight:"normal"},children:"Refresh"})]})]})]})]})})})})})};export{M as DiscoverPage};

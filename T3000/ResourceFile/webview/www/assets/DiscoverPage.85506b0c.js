import{j as e}from"./react.3bc90b5d.js";import{r as s,R as r}from"./client.58f92968.js";import{u as t,M as o,E as l,T as i,h as a,bn as n,aG as d,P as p,S as c,U as x,V as m,X as u}from"./App.4ea21eda.js";import{c as j,D as h,a as g,b,d as C,e as f,f as y}from"./DataGridHeaderCell.c083631d.js";import{T as _}from"./TableCellLayout.777c5080.js";import"./index.f111124c.js";import"./Serializer.f6a5f515.js";import"./axios.65f6a2c9.js";import"./T3Data.f6c34e59.js";import"./_commonjsHelpers.a5007c1f.js";var v="_container_106gt_13",I="_bladeContentContainer_106gt_37",N="_bladeContentWrapper_106gt_53",S="_bladeContent_106gt_37",W="_partContent_106gt_85",w="_toolbar_106gt_103",k="_toolbarContainer_106gt_121",H="_toolbarButton_106gt_137",A="_toolbarSeparator_106gt_215",L="_searchInputWrapper_106gt_231",D="_searchIcon_106gt_245",z="_searchInput_106gt_231",R="_overviewHr_106gt_365",T="_dockingBody_106gt_381",P="_noData_106gt_443",B="_centerText_106gt_459";const F=()=>{const{selectedDevice:F}=t(),[M,E]=s.exports.useState([]),[G,$]=s.exports.useState(!1),[O,U]=s.exports.useState(null),[V,X]=s.exports.useState(!1),[q,J]=s.exports.useState(""),[K,Q]=s.exports.useState(null),[Y,Z]=s.exports.useState("ascending"),ee=s.exports.useCallback((async()=>{$(!0),U(null);try{const e=await fetch(`${o}/api/discover/devices`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();E(s)}catch(e){U(e instanceof Error?e.message:"Failed to fetch devices")}finally{$(!1)}}),[]),se=e=>{K===e?Z("ascending"===Y?"descending":"ascending"):(Q(e),Z("ascending"))},re=M.filter((e=>{if(!q)return!0;const s=q.toLowerCase();return e.model.toLowerCase().includes(s)||e.building.toLowerCase().includes(s)||e.floor.toLowerCase().includes(s)||e.room.toLowerCase().includes(s)||e.subnet.toLowerCase().includes(s)||e.serialNumber.toLowerCase().includes(s)||e.ipAddress.toLowerCase().includes(s)||e.port.toLowerCase().includes(s)||e.protocol.toLowerCase().includes(s)||e.modbusId.toLowerCase().includes(s)})),te=r.useMemo((()=>0===M.length?Array(10).fill(null).map(((e,s)=>({id:"",model:"",building:"",floor:"",room:"",subnet:"",serialNumber:"",ipAddress:"",port:"",protocol:"",modbusId:""}))):re),[M.length,re]),oe=e=>!e.id&&0===M.length,le=[j({columnId:"model",compare:(e,s)=>e.model.localeCompare(s.model),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>se("model"),children:[e.exports.jsx("span",{children:"Model"}),"model"===K?"ascending"===Y?e.exports.jsx(x,{}):e.exports.jsx(m,{}):e.exports.jsx(u,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(_,{truncate:!0,title:s.model,children:!oe(s)&&s.model})}),j({columnId:"building",compare:(e,s)=>e.building.localeCompare(s.building),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>se("building"),children:[e.exports.jsx("span",{children:"Building"}),"building"===K?"ascending"===Y?e.exports.jsx(x,{}):e.exports.jsx(m,{}):e.exports.jsx(u,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(_,{truncate:!0,title:s.building,children:!oe(s)&&s.building})}),j({columnId:"floor",compare:(e,s)=>e.floor.localeCompare(s.floor),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>se("floor"),children:[e.exports.jsx("span",{children:"Floor"}),"floor"===K?"ascending"===Y?e.exports.jsx(x,{}):e.exports.jsx(m,{}):e.exports.jsx(u,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(_,{truncate:!0,title:s.floor,children:!oe(s)&&s.floor})}),j({columnId:"room",compare:(e,s)=>e.room.localeCompare(s.room),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>se("room"),children:[e.exports.jsx("span",{children:"Room"}),"room"===K?"ascending"===Y?e.exports.jsx(x,{}):e.exports.jsx(m,{}):e.exports.jsx(u,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(_,{truncate:!0,title:s.room,children:!oe(s)&&s.room})}),j({columnId:"subnet",compare:(e,s)=>e.subnet.localeCompare(s.subnet),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>se("subnet"),children:[e.exports.jsx("span",{children:"Sub_net"}),"subnet"===K?"ascending"===Y?e.exports.jsx(x,{}):e.exports.jsx(m,{}):e.exports.jsx(u,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(_,{truncate:!0,title:s.subnet,children:!oe(s)&&s.subnet})}),j({columnId:"serialNumber",compare:(e,s)=>e.serialNumber.localeCompare(s.serialNumber),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>se("serialNumber"),children:[e.exports.jsx("span",{children:"Serial#"}),"serialNumber"===K?"ascending"===Y?e.exports.jsx(x,{}):e.exports.jsx(m,{}):e.exports.jsx(u,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(_,{truncate:!0,title:s.serialNumber,children:!oe(s)&&s.serialNumber})}),j({columnId:"ipAddress",compare:(e,s)=>e.ipAddress.localeCompare(s.ipAddress),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>se("ipAddress"),children:[e.exports.jsx("span",{children:"IP Address"}),"ipAddress"===K?"ascending"===Y?e.exports.jsx(x,{}):e.exports.jsx(m,{}):e.exports.jsx(u,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(_,{truncate:!0,title:s.ipAddress,children:!oe(s)&&s.ipAddress})}),j({columnId:"port",compare:(e,s)=>e.port.localeCompare(s.port),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>se("port"),children:[e.exports.jsx("span",{children:"Port"}),"port"===K?"ascending"===Y?e.exports.jsx(x,{}):e.exports.jsx(m,{}):e.exports.jsx(u,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(_,{truncate:!0,title:s.port,children:!oe(s)&&s.port})}),j({columnId:"protocol",compare:(e,s)=>e.protocol.localeCompare(s.protocol),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>se("protocol"),children:[e.exports.jsx("span",{children:"Protocol"}),"protocol"===K?"ascending"===Y?e.exports.jsx(x,{}):e.exports.jsx(m,{}):e.exports.jsx(u,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(_,{truncate:!0,title:s.protocol,children:!oe(s)&&s.protocol})}),j({columnId:"modbusId",compare:(e,s)=>e.modbusId.localeCompare(s.modbusId),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>se("modbusId"),children:[e.exports.jsx("span",{children:"ID"}),"modbusId"===K?"ascending"===Y?e.exports.jsx(x,{}):e.exports.jsx(m,{}):e.exports.jsx(u,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(_,{truncate:!0,title:s.modbusId,children:!oe(s)&&s.modbusId})})];return e.exports.jsx("div",{className:v,children:e.exports.jsx("div",{className:I,children:e.exports.jsx("div",{className:N,children:e.exports.jsx("div",{className:S,children:e.exports.jsxs("div",{className:W,children:[O&&e.exports.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#fef6f6",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.exports.jsx(l,{style:{color:"#d13438",fontSize:"16px",flexShrink:0}}),e.exports.jsx(i,{style:{color:"#d13438",fontWeight:500,fontSize:"13px"},children:O})]}),F&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("div",{className:w,children:e.exports.jsxs("div",{className:k,children:[e.exports.jsxs("button",{className:H,onClick:async()=>{X(!0),await ee(),X(!1)},disabled:V,title:"Refresh","aria-label":"Refresh",children:[e.exports.jsx(a,{}),e.exports.jsx("span",{children:V?"Refreshing...":"Refresh"})]}),e.exports.jsxs("button",{className:H,onClick:()=>{ee()},title:"Start Scan","aria-label":"Start Scan",children:[e.exports.jsx(n,{}),e.exports.jsx("span",{children:"Start Scan"})]}),e.exports.jsx("div",{className:A,role:"separator"}),e.exports.jsxs("button",{className:H,onClick:()=>{},title:"Delete Device","aria-label":"Delete Device",children:[e.exports.jsx(d,{}),e.exports.jsx("span",{children:"Delete Device"})]}),e.exports.jsxs("div",{className:L,children:[e.exports.jsx(p,{className:D}),e.exports.jsx("input",{className:z,type:"text",placeholder:"Search devices...",value:q,onChange:e=>{J(e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search devices"})]})]})}),e.exports.jsx("div",{style:{padding:"0"},children:e.exports.jsx("hr",{className:R})})]}),e.exports.jsxs("div",{className:T,children:[G&&e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px"},children:[e.exports.jsx(c,{size:"tiny"}),e.exports.jsx(i,{size:200,weight:"regular",children:"Loading devices..."})]}),!F&&!G&&e.exports.jsx("div",{className:P,children:e.exports.jsxs("div",{className:B,children:[e.exports.jsx(i,{size:400,weight:"semibold",children:"No device selected"}),e.exports.jsx("br",{}),e.exports.jsx(i,{size:200,children:"Please select a device from the tree to view inputs"})]})}),F&&!G&&e.exports.jsx(e.exports.Fragment,{children:e.exports.jsxs(h,{items:te,columns:le,sortable:!0,resizableColumns:!0,columnSizingOptions:{model:{minWidth:150,defaultWidth:200},building:{minWidth:100,defaultWidth:130},floor:{minWidth:80,defaultWidth:100},room:{minWidth:80,defaultWidth:100},subnet:{minWidth:80,defaultWidth:100},serialNumber:{minWidth:100,defaultWidth:120},ipAddress:{minWidth:120,defaultWidth:150},port:{minWidth:80,defaultWidth:100},protocol:{minWidth:100,defaultWidth:120},modbusId:{minWidth:60,defaultWidth:80}},focusMode:"composite",children:[e.exports.jsx(g,{children:e.exports.jsx(b,{children:({renderHeaderCell:s})=>e.exports.jsx(C,{children:s()})})}),e.exports.jsx(f,{children:({item:s,rowId:r})=>e.exports.jsx(b,{children:({renderCell:r})=>e.exports.jsx(y,{children:r(s)})},r)})]})})]})]})})})})})};export{F as DiscoverPage};

import{j as e}from"./react.1acd1a13.js";import{r as s,R as r}from"./client.58f92968.js";import{M as o,n as t,T as l,y as i,br as a,aG as d,P as n,S as p,U as c,V as x,X as m}from"./App.3fe38e41.js";import{c as u,D as j,a as h,b,d as g,e as C,f}from"./DataGridHeaderCell.f7016832.js";import{T as y}from"./TableCellLayout.9e29eb07.js";import"./index.2479820c.js";import"./Serializer.f6a5f515.js";import"./T3Data.5fdf3c76.js";import"./_commonjsHelpers.a5007c1f.js";var _="_container_12db6_7",I="_bladeContentContainer_12db6_19",v="_bladeContentWrapper_12db6_27",N="_bladeContent_12db6_19",S="_partContent_12db6_43",W="_toolbar_12db6_52",k="_toolbarContainer_12db6_61",w="_toolbarButton_12db6_69",H="_toolbarSeparator_12db6_108",A="_searchInputWrapper_12db6_116",L="_searchIcon_12db6_123",D="_searchInput_12db6_116",z="_overviewHr_12db6_183",R="_dockingBody_12db6_191";const T=()=>{const[T,P]=s.exports.useState([]),[B,M]=s.exports.useState(!1),[F,E]=s.exports.useState(null),[G,$]=s.exports.useState(!1),[O,U]=s.exports.useState(""),[V,X]=s.exports.useState(null),[q,J]=s.exports.useState("ascending"),K=s.exports.useCallback((async()=>{M(!0),E(null);try{const e=await fetch(`${o}/api/discover/devices`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json();P(s)}catch(e){E(e instanceof Error?e.message:"Failed to fetch devices")}finally{M(!1)}}),[]),Q=e=>{V===e?J("ascending"===q?"descending":"ascending"):(X(e),J("ascending"))},Y=T.filter((e=>{if(!O)return!0;const s=O.toLowerCase();return e.model.toLowerCase().includes(s)||e.building.toLowerCase().includes(s)||e.floor.toLowerCase().includes(s)||e.room.toLowerCase().includes(s)||e.subnet.toLowerCase().includes(s)||e.serialNumber.toLowerCase().includes(s)||e.ipAddress.toLowerCase().includes(s)||e.port.toLowerCase().includes(s)||e.protocol.toLowerCase().includes(s)||e.modbusId.toLowerCase().includes(s)})),Z=r.useMemo((()=>0===T.length?Array(10).fill(null).map(((e,s)=>({id:"",model:"",building:"",floor:"",room:"",subnet:"",serialNumber:"",ipAddress:"",port:"",protocol:"",modbusId:""}))):Y),[T.length,Y]),ee=e=>!e.id&&0===T.length,se=[u({columnId:"model",compare:(e,s)=>e.model.localeCompare(s.model),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>Q("model"),children:[e.exports.jsx("span",{children:"Model"}),"model"===V?"ascending"===q?e.exports.jsx(c,{}):e.exports.jsx(x,{}):e.exports.jsx(m,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(y,{truncate:!0,title:s.model,children:!ee(s)&&s.model})}),u({columnId:"building",compare:(e,s)=>e.building.localeCompare(s.building),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>Q("building"),children:[e.exports.jsx("span",{children:"Building"}),"building"===V?"ascending"===q?e.exports.jsx(c,{}):e.exports.jsx(x,{}):e.exports.jsx(m,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(y,{truncate:!0,title:s.building,children:!ee(s)&&s.building})}),u({columnId:"floor",compare:(e,s)=>e.floor.localeCompare(s.floor),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>Q("floor"),children:[e.exports.jsx("span",{children:"Floor"}),"floor"===V?"ascending"===q?e.exports.jsx(c,{}):e.exports.jsx(x,{}):e.exports.jsx(m,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(y,{truncate:!0,title:s.floor,children:!ee(s)&&s.floor})}),u({columnId:"room",compare:(e,s)=>e.room.localeCompare(s.room),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>Q("room"),children:[e.exports.jsx("span",{children:"Room"}),"room"===V?"ascending"===q?e.exports.jsx(c,{}):e.exports.jsx(x,{}):e.exports.jsx(m,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(y,{truncate:!0,title:s.room,children:!ee(s)&&s.room})}),u({columnId:"subnet",compare:(e,s)=>e.subnet.localeCompare(s.subnet),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>Q("subnet"),children:[e.exports.jsx("span",{children:"Sub_net"}),"subnet"===V?"ascending"===q?e.exports.jsx(c,{}):e.exports.jsx(x,{}):e.exports.jsx(m,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(y,{truncate:!0,title:s.subnet,children:!ee(s)&&s.subnet})}),u({columnId:"serialNumber",compare:(e,s)=>e.serialNumber.localeCompare(s.serialNumber),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>Q("serialNumber"),children:[e.exports.jsx("span",{children:"Serial#"}),"serialNumber"===V?"ascending"===q?e.exports.jsx(c,{}):e.exports.jsx(x,{}):e.exports.jsx(m,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(y,{truncate:!0,title:s.serialNumber,children:!ee(s)&&s.serialNumber})}),u({columnId:"ipAddress",compare:(e,s)=>e.ipAddress.localeCompare(s.ipAddress),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>Q("ipAddress"),children:[e.exports.jsx("span",{children:"IP Address"}),"ipAddress"===V?"ascending"===q?e.exports.jsx(c,{}):e.exports.jsx(x,{}):e.exports.jsx(m,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(y,{truncate:!0,title:s.ipAddress,children:!ee(s)&&s.ipAddress})}),u({columnId:"port",compare:(e,s)=>e.port.localeCompare(s.port),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>Q("port"),children:[e.exports.jsx("span",{children:"Port"}),"port"===V?"ascending"===q?e.exports.jsx(c,{}):e.exports.jsx(x,{}):e.exports.jsx(m,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(y,{truncate:!0,title:s.port,children:!ee(s)&&s.port})}),u({columnId:"protocol",compare:(e,s)=>e.protocol.localeCompare(s.protocol),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>Q("protocol"),children:[e.exports.jsx("span",{children:"Protocol"}),"protocol"===V?"ascending"===q?e.exports.jsx(c,{}):e.exports.jsx(x,{}):e.exports.jsx(m,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(y,{truncate:!0,title:s.protocol,children:!ee(s)&&s.protocol})}),u({columnId:"modbusId",compare:(e,s)=>e.modbusId.localeCompare(s.modbusId),renderHeaderCell:()=>e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",cursor:"pointer"},onClick:()=>Q("modbusId"),children:[e.exports.jsx("span",{children:"ID"}),"modbusId"===V?"ascending"===q?e.exports.jsx(c,{}):e.exports.jsx(x,{}):e.exports.jsx(m,{style:{opacity:.5}})]}),renderCell:s=>e.exports.jsx(y,{truncate:!0,title:s.modbusId,children:!ee(s)&&s.modbusId})})];return e.exports.jsx("div",{className:_,children:e.exports.jsx("div",{className:I,children:e.exports.jsx("div",{className:v,children:e.exports.jsx("div",{className:N,children:e.exports.jsxs("div",{className:S,children:[F&&e.exports.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#fef6f6",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.exports.jsx(t,{style:{color:"#d13438",fontSize:"16px",flexShrink:0}}),e.exports.jsx(l,{style:{color:"#d13438",fontWeight:500,fontSize:"13px"},children:F})]}),e.exports.jsx("div",{className:W,children:e.exports.jsxs("div",{className:k,children:[e.exports.jsxs("button",{className:w,onClick:async()=>{$(!0),await K(),$(!1)},disabled:G,title:"Refresh","aria-label":"Refresh",children:[e.exports.jsx(i,{}),e.exports.jsx("span",{children:G?"Refreshing...":"Refresh"})]}),e.exports.jsxs("button",{className:w,onClick:()=>{K()},title:"Start Scan","aria-label":"Start Scan",children:[e.exports.jsx(a,{}),e.exports.jsx("span",{children:"Start Scan"})]}),e.exports.jsx("div",{className:H,role:"separator"}),e.exports.jsxs("button",{className:w,onClick:()=>{},title:"Delete Device","aria-label":"Delete Device",children:[e.exports.jsx(d,{}),e.exports.jsx("span",{children:"Delete Device"})]}),e.exports.jsxs("div",{className:A,children:[e.exports.jsx(n,{className:L}),e.exports.jsx("input",{className:D,type:"text",placeholder:"Search devices...",value:O,onChange:e=>{U(e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search devices"})]})]})}),e.exports.jsx("div",{style:{padding:"0"},children:e.exports.jsx("hr",{className:z})}),e.exports.jsxs("div",{className:R,children:[B&&e.exports.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px"},children:[e.exports.jsx(p,{size:"tiny"}),e.exports.jsx(l,{size:200,weight:"regular",children:"Loading devices..."})]}),!B&&e.exports.jsx(e.exports.Fragment,{children:e.exports.jsxs(j,{items:Z,columns:se,sortable:!0,resizableColumns:!0,columnSizingOptions:{model:{minWidth:150,defaultWidth:200},building:{minWidth:100,defaultWidth:130},floor:{minWidth:80,defaultWidth:100},room:{minWidth:80,defaultWidth:100},subnet:{minWidth:80,defaultWidth:100},serialNumber:{minWidth:100,defaultWidth:120},ipAddress:{minWidth:120,defaultWidth:150},port:{minWidth:80,defaultWidth:100},protocol:{minWidth:100,defaultWidth:120},modbusId:{minWidth:60,defaultWidth:80}},focusMode:"composite",children:[e.exports.jsx(h,{children:e.exports.jsx(b,{children:({renderHeaderCell:s})=>e.exports.jsx(g,{children:s()})})}),e.exports.jsx(C,{children:({item:s,rowId:r})=>e.exports.jsx(b,{children:({renderCell:r})=>e.exports.jsx(f,{children:r(s)})},r)})]})})]})]})})})})})};export{T as DiscoverPage};

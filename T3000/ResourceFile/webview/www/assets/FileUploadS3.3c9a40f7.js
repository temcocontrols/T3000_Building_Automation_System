import{p as vi}from"./T3Data.8df31f71.js";import{h as to,bA as io,C as so,r as ro,o as no,c as ao}from"./index.b8957d33.js";import{_ as oo}from"./plugin-vue_export-helper.21dcd24c.js";function bi(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var lo=0;function xn(i){return"__private_"+lo+++"_"+i}function ho(i,e,t){const s=[];return i.forEach(r=>typeof r!="string"?s.push(r):e[Symbol.split](r).forEach((n,a,o)=>{n!==""&&s.push(n),a<o.length-1&&s.push(t)})),s}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function gr(i,e){const t=/\$/g,s="$$$$";let r=[i];if(e==null)return r;for(const n of Object.keys(e))if(n!=="_"){let a=e[n];typeof a=="string"&&(a=t[Symbol.replace](a,s)),r=ho(r,new RegExp(`%\\{${n}\\}`,"g"),a)}return r}const uo=i=>{throw new Error(`missing string: ${i}`)};var Dt=xn("onMissingKey"),At=xn("apply");class Nn{constructor(e,t){let{onMissingKey:s=uo}=t===void 0?{}:t;Object.defineProperty(this,At,{value:co}),Object.defineProperty(this,Dt,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(r){return r===1?0:1}},Array.isArray(e)?e.forEach(bi(this,At)[At],this):bi(this,At)[At](e),bi(this,Dt)[Dt]=s}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let s=this.locale.strings[e];if(s==null&&(bi(this,Dt)[Dt](e),s=e),typeof s=="object"){if(t&&typeof t.smart_count!="undefined"){const n=this.locale.pluralize(t.smart_count);return gr(s[n],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof s!="string")throw new Error("string was not a string");return gr(s,t)}}function co(i){if(!(i!=null&&i.strings))return;const e=this.locale;Object.assign(this.locale,{strings:{...e.strings,...i.strings},pluralize:i.pluralize||e.pluralize})}var po=function(){var e={},t=e._fns={};e.emit=function(a,o,l,h,d,u,p){var f=s(a);f.length&&r(a,f,[o,l,h,d,u,p])},e.on=function(a,o){t[a]||(t[a]=[]),t[a].push(o)},e.once=function(a,o){function l(){o.apply(this,arguments),e.off(a,l)}this.on(a,l)},e.off=function(a,o){var l=[];if(a&&o){var h=this._fns[a],d=0,u=h?h.length:0;for(d;d<u;d++)h[d]!==o&&l.push(h[d])}l.length?this._fns[a]=l:delete this._fns[a]};function s(n){var a=t[n]?t[n]:[],o=n.indexOf(":"),l=o===-1?[n]:[n.substring(0,o),n.substring(o+1)],h=Object.keys(t),d=0,u=h.length;for(d;d<u;d++){var p=h[d];if(p==="*"&&(a=a.concat(t[p])),l.length===2&&l[0]===p){a=a.concat(t[p]);break}}return a}function r(n,a,o){var l=0,h=a.length;for(l;l<h&&a[l];l++)a[l].event=n,a[l].apply(a[l],o)}return e};let fo="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Js=(i=21)=>{let e="",t=i;for(;t--;)e+=fo[Math.random()*64|0];return e};function mo(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var Zs=mo,go=typeof vi=="object"&&vi&&vi.Object===Object&&vi,yo=go,vo=yo,bo=typeof self=="object"&&self&&self.Object===Object&&self,wo=vo||bo||Function("return this")(),Mn=wo,_o=Mn,Fo=function(){return _o.Date.now()},So=Fo,Po=/\s/;function To(i){for(var e=i.length;e--&&Po.test(i.charAt(e)););return e}var Co=To,Eo=Co,Oo=/^\s+/;function Do(i){return i&&i.slice(0,Eo(i)+1).replace(Oo,"")}var Ao=Do,xo=Mn,No=xo.Symbol,kn=No,yr=kn,Rn=Object.prototype,Mo=Rn.hasOwnProperty,ko=Rn.toString,xt=yr?yr.toStringTag:void 0;function Ro(i){var e=Mo.call(i,xt),t=i[xt];try{i[xt]=void 0;var s=!0}catch{}var r=ko.call(i);return s&&(e?i[xt]=t:delete i[xt]),r}var Uo=Ro,Io=Object.prototype,Bo=Io.toString;function Lo(i){return Bo.call(i)}var $o=Lo,vr=kn,zo=Uo,jo=$o,Ho="[object Null]",qo="[object Undefined]",br=vr?vr.toStringTag:void 0;function Vo(i){return i==null?i===void 0?qo:Ho:br&&br in Object(i)?zo(i):jo(i)}var Wo=Vo;function Go(i){return i!=null&&typeof i=="object"}var Xo=Go,Yo=Wo,Ko=Xo,Qo="[object Symbol]";function Jo(i){return typeof i=="symbol"||Ko(i)&&Yo(i)==Qo}var Zo=Jo,el=Ao,wr=Zs,tl=Zo,_r=0/0,il=/^[-+]0x[0-9a-f]+$/i,sl=/^0b[01]+$/i,rl=/^0o[0-7]+$/i,nl=parseInt;function al(i){if(typeof i=="number")return i;if(tl(i))return _r;if(wr(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=wr(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=el(i);var t=sl.test(i);return t||rl.test(i)?nl(i.slice(2),t?2:8):il.test(i)?_r:+i}var ol=al,ll=Zs,Ki=So,Fr=ol,hl="Expected a function",ul=Math.max,dl=Math.min;function cl(i,e,t){var s,r,n,a,o,l,h=0,d=!1,u=!1,p=!0;if(typeof i!="function")throw new TypeError(hl);e=Fr(e)||0,ll(t)&&(d=!!t.leading,u="maxWait"in t,n=u?ul(Fr(t.maxWait)||0,e):n,p="trailing"in t?!!t.trailing:p);function f(g){var P=s,C=r;return s=r=void 0,h=g,a=i.apply(C,P),a}function m(g){return h=g,o=setTimeout(b,e),d?f(g):a}function v(g){var P=g-l,C=g-h,O=e-P;return u?dl(O,n-C):O}function y(g){var P=g-l,C=g-h;return l===void 0||P>=e||P<0||u&&C>=n}function b(){var g=Ki();if(y(g))return w(g);o=setTimeout(b,v(g))}function w(g){return o=void 0,p&&s?f(g):(s=r=void 0,a)}function _(){o!==void 0&&clearTimeout(o),h=0,s=l=r=o=void 0}function E(){return o===void 0?a:w(Ki())}function F(){var g=Ki(),P=y(g);if(s=arguments,r=this,l=g,P){if(o===void 0)return m(l);if(u)return clearTimeout(o),o=setTimeout(b,e),f(l)}return o===void 0&&(o=setTimeout(b,e)),a}return F.cancel=_,F.flush=E,F}var Un=cl,pl=Un,fl=Zs,ml="Expected a function";function gl(i,e,t){var s=!0,r=!0;if(typeof i!="function")throw new TypeError(ml);return fl(t)&&(s="leading"in t?!!t.leading:s,r="trailing"in t?!!t.trailing:r),pl(i,e,{leading:s,maxWait:e,trailing:r})}var yl=gl;function Di(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var vl=0;function In(i){return"__private_"+vl+++"_"+i}const bl={version:"3.2.2"};var st=In("callbacks"),Qi=In("publish");class Bn{constructor(){Object.defineProperty(this,Qi,{value:wl}),this.state={},Object.defineProperty(this,st,{writable:!0,value:new Set})}getState(){return this.state}setState(e){const t={...this.state},s={...this.state,...e};this.state=s,Di(this,Qi)[Qi](t,s,e)}subscribe(e){return Di(this,st)[st].add(e),()=>{Di(this,st)[st].delete(e)}}}function wl(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];Di(this,st)[st].forEach(s=>{s(...e)})}Bn.VERSION=bl.version;function Ln(i){const e=i.lastIndexOf(".");return e===-1||e===i.length-1?{name:i,extension:void 0}:{name:i.slice(0,e),extension:i.slice(e+1)}}var Sr={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function $n(i){var e;if(i.type)return i.type;const t=i.name?(e=Ln(i.name).extension)==null?void 0:e.toLowerCase():null;return t&&t in Sr?Sr[t]:"application/octet-stream"}function _l(i){return i.charCodeAt(0).toString(32)}function Pr(i){let e="";return i.replace(/[^A-Z0-9]/gi,t=>(e+=`-${_l(t)}`,"/"))+e}function Fl(i,e){let t=e||"uppy";return typeof i.name=="string"&&(t+=`-${Pr(i.name.toLowerCase())}`),i.type!==void 0&&(t+=`-${i.type}`),i.meta&&typeof i.meta.relativePath=="string"&&(t+=`-${Pr(i.meta.relativePath.toLowerCase())}`),i.data.size!==void 0&&(t+=`-${i.data.size}`),i.data.lastModified!==void 0&&(t+=`-${i.data.lastModified}`),t}function Sl(i){return!i.isRemote||!i.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(i.remote.provider)}function Pl(i,e){if(Sl(i))return i.id;const t=$n(i);return Fl({...i,type:t},e)}function Tl(i){if(i==null&&typeof navigator!="undefined"&&(i=navigator.userAgent),!i)return!0;const e=/Edge\/(\d+\.\d+)/.exec(i);if(!e)return!0;const s=e[1].split(".",2),r=parseInt(s[0],10),n=parseInt(s[1],10);return r<15||r===15&&n<15063||r>18||r===18&&n>=18218}function Cl(i,e){return e.name?e.name:i.split("/")[0]==="image"?`${i.split("/")[0]}.${i.split("/")[1]}`:"noname"}function Ji(i){return i<10?`0${i}`:i.toString()}function Ai(){const i=new Date,e=Ji(i.getHours()),t=Ji(i.getMinutes()),s=Ji(i.getSeconds());return`${e}:${t}:${s}`}const El={debug:()=>{},warn:()=>{},error:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.error(`[Uppy] [${Ai()}]`,...e)}},Ol={debug:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.debug(`[Uppy] [${Ai()}]`,...e)},warn:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.warn(`[Uppy] [${Ai()}]`,...e)},error:function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return console.error(`[Uppy] [${Ai()}]`,...e)}};var Ft=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const t=e<0,s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return`${(t?"-":"")+e} B`;const r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),s.length-1);e=Number(e/1024**r);const n=s[r];return e>=10||e%1===0?`${(t?"-":"")+e.toFixed(0)} ${n}`:`${(t?"-":"")+e.toFixed(1)} ${n}`};function zn(i,e){this.text=i=i||"",this.hasWild=~i.indexOf("*"),this.separator=e,this.parts=i.split(e)}zn.prototype.match=function(i){var e=!0,t=this.parts,s,r=t.length,n;if(typeof i=="string"||i instanceof String)if(!this.hasWild&&this.text!=i)e=!1;else{for(n=(i||"").split(this.separator),s=0;e&&s<r;s++)t[s]!=="*"&&(s<n.length?e=t[s]===n[s]:e=!1);e=e&&n}else if(typeof i.splice=="function")for(e=[],s=i.length;s--;)this.match(i[s])&&(e[e.length]=i[s]);else if(typeof i=="object"){e={};for(var a in i)this.match(a)&&(e[a]=i[a])}return e};var Dl=function(i,e,t){var s=new zn(i,t||/[\/\.]/);return typeof e!="undefined"?s.match(e):s},Al=Dl,xl=/[\/\+\.]/,Nl=function(i,e){function t(s){var r=Al(s,i,xl);return r&&r.length>=2}return e?t(e.split(";")[0]):t};const Ml={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class fe extends Error{constructor(e,t){var s;super(e),this.isRestriction=!0,this.isUserFacing=(s=t==null?void 0:t.isUserFacing)!=null?s:!0,t!=null&&t.file&&(this.file=t.file)}}class kl{constructor(e,t){this.getI18n=t,this.getOpts=()=>{var s;const r=e();if(((s=r.restrictions)==null?void 0:s.allowedFileTypes)!=null&&!Array.isArray(r.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return r}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:s,maxNumberOfFiles:r}=this.getOpts().restrictions;if(r&&e.filter(a=>!a.isGhost).length+t.length>r)throw new fe(`${this.getI18n()("youCanOnlyUploadX",{smart_count:r})}`);if(s){let n=e.reduce((a,o)=>{var l;return a+((l=o.size)!=null?l:0)},0);for(const a of t)if(a.size!=null&&(n+=a.size,n>s))throw new fe(this.getI18n()("exceedsSize",{size:Ft(s),file:a.name}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:s,allowedFileTypes:r}=this.getOpts().restrictions;if(r&&!r.some(a=>a.includes("/")?e.type?Nl(e.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&e.extension?e.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){const a=r.join(", ");throw new fe(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:e})}if(t&&e.size!=null&&e.size>t)throw new fe(this.getI18n()("exceedsSize",{size:Ft(t),file:e.name}),{file:e});if(s&&e.size!=null&&e.size<s)throw new fe(this.getI18n()("inferiorSize",{size:Ft(s)}),{file:e})}validate(e,t){t.forEach(s=>{this.validateSingleFile(s)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new fe(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new fe(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name})),{requiredMetaFields:s}=this.getOpts().restrictions,r=[];for(const n of s)(!Object.hasOwn(e.meta,n)||e.meta[n]==="")&&r.push(n);return{missingFields:r,error:t}}}var Rl={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled"}};let jn,Hn;function S(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var Ul=0;function L(i){return"__private_"+Ul+++"_"+i}const Il={version:"3.11.3"},wi={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var W=L("plugins"),ne=L("restricter"),Nt=L("storeUnsubscribe"),Ce=L("emitter"),rt=L("preProcessors"),nt=L("uploaders"),Re=L("postProcessors"),ae=L("informAndEmit"),ei=L("checkRequiredMetaFieldsOnFile"),Zi=L("checkRequiredMetaFields"),Mt=L("assertNewUploadAllowed"),Os=L("transformFile"),kt=L("startIfAutoProceed"),Rt=L("checkAndUpdateFileState"),es=L("addListeners"),ge=L("updateOnlineStatus"),Ut=L("requestClientById"),Ee=L("createUpload"),ts=L("getUpload"),lt=L("removeUpload"),Oe=L("runUpload");jn=Symbol.for("uppy test: getPlugins");Hn=Symbol.for("uppy test: createUpload");class $i{constructor(e){Object.defineProperty(this,Oe,{value:Yl}),Object.defineProperty(this,lt,{value:Xl}),Object.defineProperty(this,ts,{value:Gl}),Object.defineProperty(this,Ee,{value:Wl}),Object.defineProperty(this,es,{value:Vl}),Object.defineProperty(this,Rt,{value:ql}),Object.defineProperty(this,kt,{value:Hl}),Object.defineProperty(this,Os,{value:jl}),Object.defineProperty(this,Mt,{value:zl}),Object.defineProperty(this,Zi,{value:$l}),Object.defineProperty(this,ei,{value:Ll}),Object.defineProperty(this,ae,{value:Bl}),Object.defineProperty(this,W,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,Nt,{writable:!0,value:void 0}),Object.defineProperty(this,Ce,{writable:!0,value:po()}),Object.defineProperty(this,rt,{writable:!0,value:new Set}),Object.defineProperty(this,nt,{writable:!0,value:new Set}),Object.defineProperty(this,Re,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,this.calculateProgress=yl((r,n)=>{const a=this.getFile(r==null?void 0:r.id);if(r==null||!a){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}if(a.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${r.id}`);return}const o=Number.isFinite(n.bytesTotal)&&n.bytesTotal>0;this.setFileState(r.id,{progress:{...a.progress,bytesUploaded:n.bytesUploaded,bytesTotal:n.bytesTotal,percentage:o?Math.round(n.bytesUploaded/n.bytesTotal*100):0}}),this.calculateTotalProgress()},500,{leading:!0,trailing:!0}),Object.defineProperty(this,ge,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,Ut,{writable:!0,value:new Map}),this.defaultLocale=Rl;const t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Ml,meta:{},onBeforeFileAdded:(r,n)=>!Object.hasOwn(n,r.id),onBeforeUpload:r=>r,store:new Bn,logger:El,infoTimeout:5e3},s={...t,...e};this.opts={...s,restrictions:{...t.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Ol),this.log(`Using Core v${$i.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...wi,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Tl(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),S(this,ne)[ne]=new kl(()=>this.opts,()=>this.i18n),S(this,Nt)[Nt]=this.store.subscribe((r,n,a)=>{this.emit("state-update",r,n,a),this.updateAll(n)}),this.opts.debug&&typeof window!="undefined"&&(window[this.opts.id]=this),S(this,es)[es]()}emit(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];S(this,Ce)[Ce].emit(e,...s)}on(e,t){return S(this,Ce)[Ce].on(e,t),this}once(e,t){return S(this,Ce)[Ce].once(e,t),this}off(e,t){return S(this,Ce)[Ce].off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(s=>{let[r,n]=s;return[r,{...t[r],...n}]}))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=s=>this.log(`Missing i18n string: ${s}`,"error"),t=new Nn([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e==null?void 0:e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},s={};Object.keys(t).forEach(r=>{s[r]={...t[r],progress:{...t[r].progress,...e}}}),this.setState({files:s,...wi}),this.emit("reset-progress")}clearUploadedFiles(){this.setState({...wi,files:{}})}addPreProcessor(e){S(this,rt)[rt].add(e)}removePreProcessor(e){return S(this,rt)[rt].delete(e)}addPostProcessor(e){S(this,Re)[Re].add(e)}removePostProcessor(e){return S(this,Re)[Re].delete(e)}addUploader(e){S(this,nt)[nt].add(e)}removeUploader(e){return S(this,nt)[nt].delete(e)}setMeta(e){const t={...this.getState().meta,...e},s={...this.getState().files};Object.keys(s).forEach(r=>{s[r]={...s[r],meta:{...s[r].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:s})}setFileMeta(e,t){const s={...this.getState().files};if(!s[e]){this.log("Was trying to set metadata for a file that has been removed: ",e);return}const r={...s[e].meta,...t};s[e]={...s[e],meta:r},this.setState({files:s})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:s}=this.getState(),r=Object.values(e),n=[],a=[],o=[],l=[],h=[],d=[],u=[],p=[],f=[];for(const m of r){const{progress:v}=m;!v.uploadComplete&&v.uploadStarted&&(n.push(m),m.isPaused||p.push(m)),v.uploadStarted||a.push(m),(v.uploadStarted||v.preprocess||v.postprocess)&&o.push(m),v.uploadStarted&&l.push(m),m.isPaused&&h.push(m),v.uploadComplete&&d.push(m),m.error&&u.push(m),(v.preprocess||v.postprocess)&&f.push(m)}return{newFiles:a,startedFiles:o,uploadStartedFiles:l,pausedFiles:h,completeFiles:d,erroredFiles:u,inProgressFiles:n,inProgressNotPausedFiles:p,processingFiles:f,isUploadStarted:l.length>0,isAllComplete:t===100&&d.length===r.length&&f.length===0,isAllErrored:!!s&&u.length===r.length,isAllPaused:n.length!==0&&h.length===n.length,isUploadInProgress:n.length>0,isSomeGhost:r.some(m=>m.isGhost)}}validateRestrictions(e,t){t===void 0&&(t=this.getFiles());try{S(this,ne)[ne].validate(t,[e])}catch(s){return s}return null}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){S(this,Mt)[Mt](e);const{nextFilesState:t,validFilesToAdd:s,errors:r}=S(this,Rt)[Rt]([e]),n=r.filter(o=>o.isRestriction);if(S(this,ae)[ae](n),r.length>0)throw r[0];this.setState({files:t});const[a]=s;return this.emit("file-added",a),this.emit("files-added",s),this.log(`Added file: ${a.name}, ${a.id}, mime type: ${a.type}`),S(this,kt)[kt](),a.id}addFiles(e){S(this,Mt)[Mt]();const{nextFilesState:t,validFilesToAdd:s,errors:r}=S(this,Rt)[Rt](e),n=r.filter(o=>o.isRestriction);S(this,ae)[ae](n);const a=r.filter(o=>!o.isRestriction);if(a.length>0){let o=`Multiple errors occurred while adding files:
`;if(a.forEach(l=>{o+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:a.length}),details:o},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(a,o);{const l=new Error(o);throw l.errors=a,l}}this.setState({files:t}),s.forEach(o=>{this.emit("file-added",o)}),this.emit("files-added",s),s.length>5?this.log(`Added batch of ${s.length} files`):Object.values(s).forEach(o=>{this.log(`Added file: ${o.name}
 id: ${o.id}
 type: ${o.type}`)}),s.length>0&&S(this,kt)[kt]()}removeFiles(e,t){const{files:s,currentUploads:r}=this.getState(),n={...s},a={...r},o=Object.create(null);e.forEach(u=>{s[u]&&(o[u]=s[u],delete n[u])});function l(u){return o[u]===void 0}Object.keys(a).forEach(u=>{const p=r[u].fileIDs.filter(l);if(p.length===0){delete a[u];return}const{capabilities:f}=this.getState();if(p.length!==r[u].fileIDs.length&&!f.individualCancellation)throw new Error("individualCancellation is disabled");a[u]={...r[u],fileIDs:p}});const h={currentUploads:a,files:n};Object.keys(n).length===0&&(h.allowNewUpload=!0,h.error=null,h.recoveredState=null),this.setState(h),this.calculateTotalProgress();const d=Object.keys(o);d.forEach(u=>{this.emit("file-removed",o[u],t)}),d.length>5?this.log(`Removed ${d.length} files`):this.log(`Removed files: ${d.join(", ")}`)}removeFile(e,t){this.removeFiles([e],t)}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const s=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:s}),this.emit("upload-pause",e,s),s}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const r={...e[s],isPaused:!0};e[s]=r}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const r={...e[s],isPaused:!1,error:null};e[s]=r}),this.setState({files:e}),this.emit("resume-all")}retryAll(){const e={...this.getState().files},t=Object.keys(e).filter(r=>e[r].error);if(t.forEach(r=>{const n={...e[r],isPaused:!1,error:null};e[r]=n}),this.setState({files:e,error:null}),this.emit("retry-all",t),t.length===0)return Promise.resolve({successful:[],failed:[]});const s=S(this,Ee)[Ee](t,{forceAllowNewUpload:!0});return S(this,Oe)[Oe](s)}cancelAll(e){let{reason:t="user"}=e===void 0?{}:e;if(this.emit("cancel-all",{reason:t}),t==="user"){const{files:s}=this.getState(),r=Object.keys(s);r.length&&this.removeFiles(r,"cancel-all"),this.setState(wi)}}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);const t=S(this,Ee)[Ee]([e],{forceAllowNewUpload:!0});return S(this,Oe)[Oe](t)}logout(){this.iteratePlugins(e=>{var t;(t=e.provider)==null||t.logout==null||t.logout()})}calculateTotalProgress(){const t=this.getFiles().filter(h=>h.progress.uploadStarted||h.progress.preprocess||h.progress.postprocess);if(t.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}const s=t.filter(h=>h.progress.bytesTotal!=null),r=t.filter(h=>h.progress.bytesTotal==null);if(s.length===0){const h=t.length*100,d=r.reduce((p,f)=>p+f.progress.percentage,0),u=Math.round(d/h*100);this.setState({totalProgress:u});return}let n=s.reduce((h,d)=>{var u;return h+((u=d.progress.bytesTotal)!=null?u:0)},0);const a=n/s.length;n+=a*r.length;let o=0;s.forEach(h=>{o+=h.progress.bytesUploaded}),r.forEach(h=>{o+=a*(h.progress.percentage||0)/100});let l=n===0?0:Math.round(o/n*100);l>100&&(l=100),this.setState({totalProgress:l}),this.emit("progress",l)}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,t){if(typeof e!="function"){const a=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(a)}const s=new e(this,t),r=s.id;if(!r)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");const n=this.getPlugin(r);if(n){const a=`Already found a plugin named '${n.id}'. Tried to use: '${r}'.
Uppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(a)}return e.VERSION&&this.log(`Using ${r} v${e.VERSION}`),s.type in S(this,W)[W]?S(this,W)[W][s.type].push(s):S(this,W)[W][s.type]=[s],s.install(),this.emit("plugin-added",s),this}getPlugin(e){for(const t of Object.values(S(this,W)[W])){const s=t.find(r=>r.id===e);if(s!=null)return s}}[jn](e){return S(this,W)[W][e]}iteratePlugins(e){Object.values(S(this,W)[W]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=S(this,W)[W][e.type],s=t.findIndex(a=>a.id===e.id);s!==-1&&t.splice(s,1);const n={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(n)}close(e){let{reason:t}=e===void 0?{}:e;this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll({reason:t}),S(this,Nt)[Nt](),this.iteratePlugins(s=>{this.removePlugin(s)}),typeof window!="undefined"&&window.removeEventListener&&(window.removeEventListener("online",S(this,ge)[ge]),window.removeEventListener("offline",S(this,ge)[ge]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,s){t===void 0&&(t="info"),s===void 0&&(s=3e3);const r=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:r?e.message:e,details:r?e.details:null}]}),setTimeout(()=>this.hideInfo(),s),this.emit("info-visible")}log(e,t){const{logger:s}=this.opts;switch(t){case"error":s.error(e);break;case"warning":s.warn(e);break;default:s.debug(e);break}}registerRequestClient(e,t){S(this,Ut)[Ut].set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const t=S(this,Ut)[Ut].get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?S(this,Oe)[Oe](e):(S(this,lt)[lt](e),Promise.reject(new Error("Nonexistent upload")))}[Hn](){return S(this,Ee)[Ee](...arguments)}addResultData(e,t){if(!S(this,ts)[ts](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:s}=this.getState(),r={...s[e],result:{...s[e].result,...t}};this.setState({currentUploads:{...s,[e]:r}})}upload(){var e;(e=S(this,W)[W].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();const s=this.opts.onBeforeUpload(t);return s===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(s&&typeof s=="object"&&(t=s,this.setState({files:t})),Promise.resolve().then(()=>S(this,ne)[ne].validateMinNumberOfFiles(t)).catch(r=>{throw S(this,ae)[ae]([r]),r}).then(()=>{if(!S(this,Zi)[Zi](t))throw new fe(this.i18n("missingRequiredMetaField"))}).catch(r=>{throw r}).then(()=>{const{currentUploads:r}=this.getState(),n=Object.values(r).flatMap(l=>l.fileIDs),a=[];Object.keys(t).forEach(l=>{const h=this.getFile(l);!h.progress.uploadStarted&&n.indexOf(l)===-1&&a.push(h.id)});const o=S(this,Ee)[Ee](a);return S(this,Oe)[Oe](o)}).catch(r=>{throw this.emit("error",r),this.log(r,"error"),r}))}}function Bl(i){for(const n of i)n.isRestriction?this.emit("restriction-failed",n.file,n):this.emit("error",n,n.file),this.log(n,"warning");const e=i.filter(n=>n.isUserFacing),t=4,s=e.slice(0,t),r=e.slice(t);s.forEach(n=>{let{message:a,details:o=""}=n;this.info({message:a,details:o},"error",this.opts.infoTimeout)}),r.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:r.length})})}function Ll(i){const{missingFields:e,error:t}=S(this,ne)[ne].getMissingRequiredMetaFields(i);return e.length>0?(this.setFileState(i.id,{missingRequiredMetaFields:e}),this.log(t.message),this.emit("restriction-failed",i,t),!1):!0}function $l(i){let e=!0;for(const t of Object.values(i))S(this,ei)[ei](t)||(e=!1);return e}function zl(i){const{allowNewUpload:e}=this.getState();if(e===!1){const t=new fe(this.i18n("noMoreFilesAllowed"),{file:i});throw S(this,ae)[ae]([t]),t}}function jl(i){const e=i instanceof File?{name:i.name,type:i.type,size:i.size,data:i}:i,t=$n(e),s=Cl(t,e),r=Ln(s).extension,n=Pl(e,this.getID()),a=e.meta||{};a.name=s,a.type=t;const o=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:n,name:s,extension:r||"",meta:{...this.getState().meta,...a},type:t,data:e.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:o,uploadComplete:!1,uploadStarted:null},size:o,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote||"",preview:e.preview}}function Hl(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(i=>{i.isRestriction||this.log(i.stack||i.message||i)})},4))}function ql(i){const{files:e}=this.getState(),t={...e},s=[],r=[];for(const a of i)try{var n;let o=S(this,Os)[Os](a);const l=(n=e[o.id])==null?void 0:n.isGhost;l&&(o={...e[o.id],isGhost:!1,data:a.data},this.log(`Replaced the blob in the restored ghost file: ${o.name}, ${o.id}`));const h=this.opts.onBeforeFileAdded(o,t);if(!h&&this.checkIfFileAlreadyExists(o.id))throw new fe(this.i18n("noDuplicates",{fileName:o.name}),{file:a});if(h===!1&&!l)throw new fe("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof h=="object"&&h!==null&&(o=h),S(this,ne)[ne].validateSingleFile(o),t[o.id]=o,s.push(o)}catch(o){r.push(o)}try{S(this,ne)[ne].validateAggregateRestrictions(Object.values(e),s)}catch(a){return r.push(a),{nextFilesState:e,validFilesToAdd:[],errors:r}}return{nextFilesState:t,validFilesToAdd:s,errors:r}}function Vl(){const i=(s,r,n)=>{let a=s.message||"Unknown error";s.details&&(a+=` ${s.details}`),this.setState({error:a}),r!=null&&r.id in this.getState().files&&this.setFileState(r.id,{error:a,response:n})};this.on("error",i),this.on("upload-error",(s,r,n)=>{if(i(r,s,n),typeof r=="object"&&r.message){var a;this.log(r.message,"error");const o=new Error(this.i18n("failedToUpload",{file:(a=s==null?void 0:s.name)!=null?a:""}));o.isUserFacing=!0,o.details=r.message,r.details&&(o.details+=` ${r.details}`),S(this,ae)[ae]([o])}else S(this,ae)[ae]([r])});let e=null;this.on("upload-stalled",(s,r)=>{const{message:n}=s,a=r.map(o=>o.meta.name).join(", ");e||(this.info({message:n,details:a},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${n} ${a}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const t=s=>{const r=s.filter(a=>{const o=a!=null&&this.getFile(a.id);return o||this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`),o}),n=Object.fromEntries(r.map(a=>[a.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:a.size}}]));this.patchFilesState(n)};this.on("upload-start",s=>{s.forEach(r=>{this.emit("upload-started",r)}),t(s)}),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(s,r)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const n=this.getFile(s.id).progress;this.setFileState(s.id,{progress:{...n,postprocess:S(this,Re)[Re].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:n.bytesTotal},response:r,uploadURL:r.uploadURL,isPaused:!1}),s.size==null&&this.setFileState(s.id,{size:r.bytesUploaded||n.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(s,r)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getFile(s.id).progress,preprocess:r}})}),this.on("preprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const r={...this.getState().files};r[s.id]={...r[s.id],progress:{...r[s.id].progress}},delete r[s.id].progress.preprocess,this.setState({files:r})}),this.on("postprocess-progress",(s,r)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getState().files[s.id].progress,postprocess:r}})}),this.on("postprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const r={...this.getState().files};r[s.id]={...r[s.id],progress:{...r[s.id].progress}},delete r[s.id].progress.postprocess,this.setState({files:r})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",s=>{s&&S(this,ei)[ei](s)}),typeof window!="undefined"&&window.addEventListener&&(window.addEventListener("online",S(this,ge)[ge]),window.addEventListener("offline",S(this,ge)[ge]),setTimeout(S(this,ge)[ge],3e3))}function Wl(i,e){e===void 0&&(e={});const{forceAllowNewUpload:t=!1}=e,{allowNewUpload:s,currentUploads:r}=this.getState();if(!s&&!t)throw new Error("Cannot create a new upload: already uploading.");const n=Js();return this.emit("upload",{id:n,fileIDs:i}),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...r,[n]:{fileIDs:i,step:0,result:{}}}}),n}function Gl(i){const{currentUploads:e}=this.getState();return e[i]}function Xl(i){const e={...this.getState().currentUploads};delete e[i],this.setState({currentUploads:e})}async function Yl(i){const e=()=>{const{currentUploads:n}=this.getState();return n[i]};let t=e();const s=[...S(this,rt)[rt],...S(this,nt)[nt],...S(this,Re)[Re]];try{for(let n=t.step||0;n<s.length&&t;n++){const a=s[n];this.setState({currentUploads:{...this.getState().currentUploads,[i]:{...t,step:n}}});const{fileIDs:o}=t;await a(o,i),t=e()}}catch(n){throw S(this,lt)[lt](i),n}if(t){t.fileIDs.forEach(l=>{const h=this.getFile(l);h&&h.progress.postprocess&&this.emit("postprocess-complete",h)});const n=t.fileIDs.map(l=>this.getFile(l)),a=n.filter(l=>!l.error),o=n.filter(l=>l.error);this.addResultData(i,{successful:a,failed:o,uploadID:i}),t=e()}let r;return t&&(r=t.result,this.emit("complete",r),S(this,lt)[lt](i)),r==null&&this.log(`Not setting result for an upload that has been removed: ${i}`),r}$i.VERSION=Il.version;var Kl=$i,hi,R,qn,at,Tr,Vn,Ds,er,As,xs,ti={},Wn=[],Ql=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,zi=Array.isArray;function Be(i,e){for(var t in e)i[t]=e[t];return i}function Gn(i){var e=i.parentNode;e&&e.removeChild(i)}function c(i,e,t){var s,r,n,a={};for(n in e)n=="key"?s=e[n]:n=="ref"?r=e[n]:a[n]=e[n];if(arguments.length>2&&(a.children=arguments.length>3?hi.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(n in i.defaultProps)a[n]===void 0&&(a[n]=i.defaultProps[n]);return Qt(i,a,s,r,null)}function Qt(i,e,t,s,r){var n={type:i,props:e,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r==null?++qn:r,__i:-1,__u:0};return r==null&&R.vnode!=null&&R.vnode(n),n}function Jl(){return{current:null}}function qe(i){return i.children}function Se(i,e){this.props=i,this.context=e}function dt(i,e){if(e==null)return i.__?dt(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?dt(i):null}function Xn(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return Xn(i)}}function Cr(i){(!i.__d&&(i.__d=!0)&&at.push(i)&&!ki.__r++||Tr!==R.debounceRendering)&&((Tr=R.debounceRendering)||Vn)(ki)}function ki(){var i,e,t,s,r,n,a,o;for(at.sort(Ds);i=at.shift();)i.__d&&(e=at.length,s=void 0,n=(r=(t=i).__v).__e,a=[],o=[],t.__P&&((s=Be({},r)).__v=r.__v+1,R.vnode&&R.vnode(s),tr(t.__P,s,r,t.__n,t.__P.namespaceURI,32&r.__u?[n]:null,a,n==null?dt(r):n,!!(32&r.__u),o),s.__v=r.__v,s.__.__k[s.__i]=s,Qn(a,s,o),s.__e!=n&&Xn(s)),at.length>e&&at.sort(Ds));ki.__r=0}function Yn(i,e,t,s,r,n,a,o,l,h,d){var u,p,f,m,v,y=s&&s.__k||Wn,b=e.length;for(t.__d=l,Zl(t,e,y),l=t.__d,u=0;u<b;u++)(f=t.__k[u])!=null&&typeof f!="boolean"&&typeof f!="function"&&(p=f.__i===-1?ti:y[f.__i]||ti,f.__i=u,tr(i,f,p,r,n,a,o,l,h,d),m=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&ir(p.ref,null,f),d.push(f.ref,f.__c||m,f)),v==null&&m!=null&&(v=m),65536&f.__u||p.__k===f.__k?(l&&!l.isConnected&&(l=dt(p)),l=Kn(f,l,i)):typeof f.type=="function"&&f.__d!==void 0?l=f.__d:m&&(l=m.nextSibling),f.__d=void 0,f.__u&=-196609);t.__d=l,t.__e=v}function Zl(i,e,t){var s,r,n,a,o,l=e.length,h=t.length,d=h,u=0;for(i.__k=[],s=0;s<l;s++)a=s+u,(r=i.__k[s]=(r=e[s])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?Qt(null,r,null,null,null):zi(r)?Qt(qe,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?Qt(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=i,r.__b=i.__b+1,o=eh(r,t,a,d),r.__i=o,n=null,o!==-1&&(d--,(n=t[o])&&(n.__u|=131072)),n==null||n.__v===null?(o==-1&&u--,typeof r.type!="function"&&(r.__u|=65536)):o!==a&&(o===a+1?u++:o>a?d>l-a?u+=o-a:u--:o<a?o==a-1&&(u=o-a):u=0,o!==s+u&&(r.__u|=65536))):(n=t[a])&&n.key==null&&n.__e&&(131072&n.__u)==0&&(n.__e==i.__d&&(i.__d=dt(n)),Ns(n,n,!1),t[a]=null,d--);if(d)for(s=0;s<h;s++)(n=t[s])!=null&&(131072&n.__u)==0&&(n.__e==i.__d&&(i.__d=dt(n)),Ns(n,n))}function Kn(i,e,t){var s,r;if(typeof i.type=="function"){for(s=i.__k,r=0;s&&r<s.length;r++)s[r]&&(s[r].__=i,e=Kn(s[r],e,t));return e}i.__e!=e&&(t.insertBefore(i.__e,e||null),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function $e(i,e){return e=e||[],i==null||typeof i=="boolean"||(zi(i)?i.some(function(t){$e(t,e)}):e.push(i)),e}function eh(i,e,t,s){var r=i.key,n=i.type,a=t-1,o=t+1,l=e[t];if(l===null||l&&r==l.key&&n===l.type&&(131072&l.__u)==0)return t;if(s>(l!=null&&(131072&l.__u)==0?1:0))for(;a>=0||o<e.length;){if(a>=0){if((l=e[a])&&(131072&l.__u)==0&&r==l.key&&n===l.type)return a;a--}if(o<e.length){if((l=e[o])&&(131072&l.__u)==0&&r==l.key&&n===l.type)return o;o++}}return-1}function Er(i,e,t){e[0]==="-"?i.setProperty(e,t==null?"":t):i[e]=t==null?"":typeof t!="number"||Ql.test(e)?t:t+"px"}function _i(i,e,t,s,r){var n;e:if(e==="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof s=="string"&&(i.style.cssText=s=""),s)for(e in s)t&&e in t||Er(i.style,e,"");if(t)for(e in t)s&&t[e]===s[e]||Er(i.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")n=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in i||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),i.l||(i.l={}),i.l[e+n]=t,t?s?t.u=s.u:(t.u=er,i.addEventListener(e,n?xs:As,n)):i.removeEventListener(e,n?xs:As,n);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e in i)try{i[e]=t==null?"":t;break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?i.removeAttribute(e):i.setAttribute(e,t))}}function Or(i){return function(e){if(this.l){var t=this.l[e.type+i];if(e.t==null)e.t=er++;else if(e.t<t.u)return;return t(R.event?R.event(e):e)}}}function tr(i,e,t,s,r,n,a,o,l,h){var d,u,p,f,m,v,y,b,w,_,E,F,g,P,C,O=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),n=[o=e.__e=t.__e]),(d=R.__b)&&d(e);e:if(typeof O=="function")try{if(b=e.props,w=(d=O.contextType)&&s[d.__c],_=d?w?w.props.value:d.__:s,t.__c?y=(u=e.__c=t.__c).__=u.__E:("prototype"in O&&O.prototype.render?e.__c=u=new O(b,_):(e.__c=u=new Se(b,_),u.constructor=O,u.render=ih),w&&w.sub(u),u.props=b,u.state||(u.state={}),u.context=_,u.__n=s,p=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),O.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Be({},u.__s)),Be(u.__s,O.getDerivedStateFromProps(b,u.__s))),f=u.props,m=u.state,u.__v=e,p)O.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(O.getDerivedStateFromProps==null&&b!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(b,_),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(b,u.__s,_)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(u.props=b,u.state=u.__s,u.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(I){I&&(I.__=e)}),E=0;E<u._sb.length;E++)u.__h.push(u._sb[E]);u._sb=[],u.__h.length&&a.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(b,u.__s,_),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,m,v)})}if(u.context=_,u.props=b,u.__P=i,u.__e=!1,F=R.__r,g=0,"prototype"in O&&O.prototype.render){for(u.state=u.__s,u.__d=!1,F&&F(e),d=u.render(u.props,u.state,u.context),P=0;P<u._sb.length;P++)u.__h.push(u._sb[P]);u._sb=[]}else do u.__d=!1,F&&F(e),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++g<25);u.state=u.__s,u.getChildContext!=null&&(s=Be(Be({},s),u.getChildContext())),p||u.getSnapshotBeforeUpdate==null||(v=u.getSnapshotBeforeUpdate(f,m)),Yn(i,zi(C=d!=null&&d.type===qe&&d.key==null?d.props.children:d)?C:[C],e,t,s,r,n,a,o,l,h),u.base=e.__e,e.__u&=-161,u.__h.length&&a.push(u),y&&(u.__E=u.__=null)}catch(I){e.__v=null,l||n!=null?(e.__e=o,e.__u|=l?160:32,n[n.indexOf(o)]=null):(e.__e=t.__e,e.__k=t.__k),R.__e(I,e,t)}else n==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=th(t.__e,e,t,s,r,n,a,l,h);(d=R.diffed)&&d(e)}function Qn(i,e,t){e.__d=void 0;for(var s=0;s<t.length;s++)ir(t[s],t[++s],t[++s]);R.__c&&R.__c(e,i),i.some(function(r){try{i=r.__h,r.__h=[],i.some(function(n){n.call(r)})}catch(n){R.__e(n,r.__v)}})}function th(i,e,t,s,r,n,a,o,l){var h,d,u,p,f,m,v,y=t.props,b=e.props,w=e.type;if(w==="svg"?r="http://www.w3.org/2000/svg":w==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),n!=null){for(h=0;h<n.length;h++)if((f=n[h])&&"setAttribute"in f==!!w&&(w?f.localName===w:f.nodeType===3)){i=f,n[h]=null;break}}if(i==null){if(w===null)return document.createTextNode(b);i=document.createElementNS(r,w,b.is&&b),n=null,o=!1}if(w===null)y===b||o&&i.data===b||(i.data=b);else{if(n=n&&hi.call(i.childNodes),y=t.props||ti,!o&&n!=null)for(y={},h=0;h<i.attributes.length;h++)y[(f=i.attributes[h]).name]=f.value;for(h in y)if(f=y[h],h!="children"){if(h=="dangerouslySetInnerHTML")u=f;else if(h!=="key"&&!(h in b)){if(h=="value"&&"defaultValue"in b||h=="checked"&&"defaultChecked"in b)continue;_i(i,h,null,f,r)}}for(h in b)f=b[h],h=="children"?p=f:h=="dangerouslySetInnerHTML"?d=f:h=="value"?m=f:h=="checked"?v=f:h==="key"||o&&typeof f!="function"||y[h]===f||_i(i,h,f,y[h],r);if(d)o||u&&(d.__html===u.__html||d.__html===i.innerHTML)||(i.innerHTML=d.__html),e.__k=[];else if(u&&(i.innerHTML=""),Yn(i,zi(p)?p:[p],e,t,s,w==="foreignObject"?"http://www.w3.org/1999/xhtml":r,n,a,n?n[0]:t.__k&&dt(t,0),o,l),n!=null)for(h=n.length;h--;)n[h]!=null&&Gn(n[h]);o||(h="value",m!==void 0&&(m!==i[h]||w==="progress"&&!m||w==="option"&&m!==y[h])&&_i(i,h,m,y[h],r),h="checked",v!==void 0&&v!==i[h]&&_i(i,h,v,y[h],r))}return i}function ir(i,e,t){try{typeof i=="function"?i(e):i.current=e}catch(s){R.__e(s,t)}}function Ns(i,e,t){var s,r;if(R.unmount&&R.unmount(i),(s=i.ref)&&(s.current&&s.current!==i.__e||ir(s,null,e)),(s=i.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(n){R.__e(n,e)}s.base=s.__P=null}if(s=i.__k)for(r=0;r<s.length;r++)s[r]&&Ns(s[r],e,t||typeof i.type!="function");t||i.__e==null||Gn(i.__e),i.__c=i.__=i.__e=i.__d=void 0}function ih(i,e,t){return this.constructor(i,t)}function Dr(i,e,t){var s,r,n,a;R.__&&R.__(i,e),r=(s=typeof t=="function")?null:t&&t.__k||e.__k,n=[],a=[],tr(e,i=(!s&&t||e).__k=c(qe,null,[i]),r||ti,ti,e.namespaceURI,!s&&t?[t]:r?null:e.firstChild?hi.call(e.childNodes):null,n,!s&&t?t:r?r.__e:e.firstChild,s,a),Qn(n,i,a)}function Jn(i,e,t){var s,r,n,a,o=Be({},i.props);for(n in i.type&&i.type.defaultProps&&(a=i.type.defaultProps),e)n=="key"?s=e[n]:n=="ref"?r=e[n]:o[n]=e[n]===void 0&&a!==void 0?a[n]:e[n];return arguments.length>2&&(o.children=arguments.length>3?hi.call(arguments,2):t),Qt(i.type,o,s||i.key,r||i.ref,null)}hi=Wn.slice,R={__e:function(i,e,t,s){for(var r,n,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((n=r.constructor)&&n.getDerivedStateFromError!=null&&(r.setState(n.getDerivedStateFromError(i)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(i,s||{}),a=r.__d),a)return r.__E=r}catch(o){i=o}throw i}},qn=0,Se.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Be({},this.state),typeof i=="function"&&(i=i(Be({},t),this.props)),i&&Be(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),Cr(this))},Se.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),Cr(this))},Se.prototype.render=qe,at=[],Vn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ds=function(i,e){return i.__v.__b-e.__v.__b},ki.__r=0,er=0,As=Or(!1),xs=Or(!0);function Zn(i){return typeof i!="object"||i===null||!("nodeType"in i)?!1:i.nodeType===Node.ELEMENT_NODE}function sh(i,e){return e===void 0&&(e=document),typeof i=="string"?e.querySelector(i):Zn(i)?i:null}function ea(i){for(var e;i&&!i.dir;)i=i.parentNode;return(e=i)==null?void 0:e.dir}class ta{constructor(e,t){this.uppy=e,this.opts=t!=null?t:{}}getPluginState(){const{plugins:e}=this.uppy.getState();return(e==null?void 0:e[this.id])||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new Nn([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}function Ar(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var rh=0;function nh(i){return"__private_"+rh+++"_"+i}function ah(i){let e=null,t;return function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return t=r,e||(e=Promise.resolve().then(()=>(e=null,i(...t)))),e}}var It=nh("updateUI");class Ri extends ta{constructor(){super(...arguments),Object.defineProperty(this,It,{writable:!0,value:void 0})}getTargetPlugin(e){let t;if(typeof(e==null?void 0:e.addTarget)=="function")t=e,t instanceof Ri||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:Ri}}));else if(typeof e=="function"){const s=e;this.uppy.iteratePlugins(r=>{r instanceof s&&(t=r)})}return t}mount(e,t){const s=t.id,r=sh(e);if(r){this.isTargetDOMEl=!0;const o=document.createElement("div");return o.classList.add("uppy-Root"),Ar(this,It)[It]=ah(l=>{!this.uppy.getPlugin(this.id)||(Dr(this.render(l),o),this.afterUpdate())}),this.uppy.log(`Installing ${s} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),Dr(this.render(this.uppy.getState()),o),this.el=o,r.appendChild(o),o.dir=this.opts.direction||ea(o)||"ltr",this.onMount(),this.el}const n=this.getTargetPlugin(e);if(n)return this.uppy.log(`Installing ${s} to ${n.id}`),this.parent=n,this.el=n.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${s}`);let a=`Invalid target option given to ${s}.`;throw typeof e=="function"?a+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":a+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(a)}render(e){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){if(this.el!=null){var t,s;(t=(s=Ar(this,It))[It])==null||t.call(s,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}}var Ve=Ri;function xr(i,e,t,s){return t===0||i===e?i:s===0?e:i+(e-i)*2**(-s/t)}var Fe={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"},ia={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(i){(function(){var e={}.hasOwnProperty;function t(){for(var n="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(n=r(n,s(o)))}return n}function s(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var a="";for(var o in n)e.call(n,o)&&n[o]&&(a=r(a,o));return a}function r(n,a){return a?n?n+" "+a:n+a:n}i.exports?(t.default=t,i.exports=t):window.classNames=t})()})(ia);var ve=ia.exports;function is(i){const e=[];let t="indeterminate",s;for(const{progress:n}of Object.values(i)){const{preprocess:a,postprocess:o}=n;s==null&&(a||o)&&({mode:t,message:s}=a||o),(a==null?void 0:a.mode)==="determinate"&&e.push(a.value),(o==null?void 0:o.mode)==="determinate"&&e.push(o.value)}const r=e.reduce((n,a)=>n+a/e.length,0);return{mode:t,message:s,value:r}}function oh(i){const e=Math.floor(i/3600)%24,t=Math.floor(i/60)%60,s=Math.floor(i%60);return{hours:e,minutes:t,seconds:s}}function lh(i){const e=oh(i),t=e.hours===0?"":`${e.hours}h`,s=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,r=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${s}${r}`}const hh="\xB7",Nr=()=>` ${hh} `;function uh(i){const{newFiles:e,isUploadStarted:t,recoveredState:s,i18n:r,uploadState:n,isSomeGhost:a,startUpload:o}=i,l=ve("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":n===Fe.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":a}),h=e&&t&&!s?r("uploadXNewFiles",{smart_count:e}):r("uploadXFiles",{smart_count:e});return c("button",{type:"button",className:l,"aria-label":r("uploadXFiles",{smart_count:e}),onClick:o,disabled:a,"data-uppy-super-focusable":!0},h)}function dh(i){const{i18n:e,uppy:t}=i;return c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},c("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function ch(i){const{i18n:e,uppy:t}=i;return c("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},c("g",{fill:"none",fillRule:"evenodd"},c("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),c("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function ph(i){const{isAllPaused:e,i18n:t,isAllComplete:s,resumableUploads:r,uppy:n}=i,a=t(e?"resume":"pause");function o(){if(!s){if(!r){n.cancelAll();return}if(e){n.resumeAll();return}n.pauseAll()}}return c("button",{title:a,"aria-label":a,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:o,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},c("g",{fill:"none",fillRule:"evenodd"},c("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),c("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function fh(i){const{i18n:e,doneButtonHandler:t}=i;return c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0},e("done"))}function sa(){return c("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},c("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function mh(i){const{progress:e}=i,{value:t,mode:s,message:r}=e,n="\xB7";return c("div",{className:"uppy-StatusBar-content"},c(sa,null),s==="determinate"?`${Math.round(t*100)}% ${n} `:"",r)}function gh(i){const{numUploads:e,complete:t,totalUploadedSize:s,totalSize:r,totalETA:n,i18n:a}=i,o=e>1;return c("div",{className:"uppy-StatusBar-statusSecondary"},o&&a("filesUploadedOfTotal",{complete:t,smart_count:e}),c("span",{className:"uppy-StatusBar-additionalInfo"},o&&Nr(),a("dataUploadedOfTotal",{complete:Ft(s),total:Ft(r)}),Nr(),a("xTimeLeft",{time:lh(n)})))}function ra(i){const{i18n:e,complete:t,numUploads:s}=i;return c("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:t,smart_count:s}))}function yh(i){const{i18n:e,newFiles:t,startUpload:s}=i,r=ve("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return c("div",{className:"uppy-StatusBar-statusSecondary"},c("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:t})),c("button",{type:"button",className:r,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:s},e("upload")))}function vh(i){const{i18n:e,supportsUploadProgress:t,totalProgress:s,showProgressDetails:r,isUploadStarted:n,isAllComplete:a,isAllPaused:o,newFiles:l,numUploads:h,complete:d,totalUploadedSize:u,totalSize:p,totalETA:f,startUpload:m}=i,v=l&&n;if(!n||a)return null;const y=e(o?"paused":"uploading");function b(){return!o&&!v&&r?t?c(gh,{numUploads:h,complete:d,totalUploadedSize:u,totalSize:p,totalETA:f,i18n:e}):c(ra,{i18n:e,complete:d,numUploads:h}):null}return c("div",{className:"uppy-StatusBar-content","aria-label":y,title:y},o?null:c(sa,null),c("div",{className:"uppy-StatusBar-status"},c("div",{className:"uppy-StatusBar-statusPrimary"},t?`${y}: ${s}%`:y),b(),v?c(yh,{i18n:e,newFiles:l,startUpload:m}):null))}function bh(i){const{i18n:e}=i;return c("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},c("div",{className:"uppy-StatusBar-status"},c("div",{className:"uppy-StatusBar-statusPrimary"},c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},c("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function wh(i){const{error:e,i18n:t,complete:s,numUploads:r}=i;function n(){const a=`${t("uploadFailed")} 

 ${e}`;alert(a)}return c("div",{className:"uppy-StatusBar-content",title:t("uploadFailed")},c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},c("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),c("div",{className:"uppy-StatusBar-status"},c("div",{className:"uppy-StatusBar-statusPrimary"},t("uploadFailed"),c("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:n,type:"button"},"?")),c(ra,{i18n:t,complete:s,numUploads:r})))}const{STATE_ERROR:Mr,STATE_WAITING:kr,STATE_PREPROCESSING:ss,STATE_UPLOADING:Fi,STATE_POSTPROCESSING:rs,STATE_COMPLETE:Si}=Fe;function na(i){const{newFiles:e,allowNewUpload:t,isUploadInProgress:s,isAllPaused:r,resumableUploads:n,error:a,hideUploadButton:o,hidePauseResumeButton:l,hideCancelButton:h,hideRetryButton:d,recoveredState:u,uploadState:p,totalProgress:f,files:m,supportsUploadProgress:v,hideAfterFinish:y,isSomeGhost:b,doneButtonHandler:w,isUploadStarted:_,i18n:E,startUpload:F,uppy:g,isAllComplete:P,showProgressDetails:C,numUploads:O,complete:I,totalSize:G,totalETA:le,totalUploadedSize:te}=i;function V(){switch(p){case rs:case ss:{const yi=is(m);return yi.mode==="determinate"?yi.value*100:f}case Mr:return null;case Fi:return v?f:null;default:return f}}function U(){switch(p){case rs:case ss:{const{mode:yi}=is(m);return yi==="indeterminate"}case Fi:return!v;default:return!1}}function ce(){if(u)return!1;switch(p){case kr:return o||e===0;case Si:return y;default:return!1}}const we=V(),Ot=ce(),We=we!=null?we:100,pi=!a&&e&&!s&&!r&&t&&!o,fi=!h&&p!==kr&&p!==Si,mi=n&&!l&&p===Fi,gi=a&&!P&&!d,Xi=w&&p===Si,Yi=ve("uppy-StatusBar-progress",{"is-indeterminate":U()}),eo=ve("uppy-StatusBar",`is-${p}`,{"has-ghosts":b});return c("div",{className:eo,"aria-hidden":Ot},c("div",{className:Yi,style:{width:`${We}%`},role:"progressbar","aria-label":`${We}%`,"aria-valuetext":`${We}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":we}),(()=>{switch(p){case ss:case rs:return c(mh,{progress:is(m)});case Si:return c(bh,{i18n:E});case Mr:return c(wh,{error:a,i18n:E,numUploads:O,complete:I});case Fi:return c(vh,{i18n:E,supportsUploadProgress:v,totalProgress:f,showProgressDetails:C,isUploadStarted:_,isAllComplete:P,isAllPaused:r,newFiles:e,numUploads:O,complete:I,totalUploadedSize:te,totalSize:G,totalETA:le,startUpload:F});default:return null}})(),c("div",{className:"uppy-StatusBar-actions"},u||pi?c(uh,{newFiles:e,isUploadStarted:_,recoveredState:u,i18n:E,isSomeGhost:b,startUpload:F,uploadState:p}):null,gi?c(dh,{i18n:E,uppy:g}):null,mi?c(ph,{isAllPaused:r,i18n:E,isAllComplete:P,resumableUploads:n,uppy:g}):null,fi?c(ch,{i18n:E,uppy:g}):null,Xi?c(fh,{i18n:E,doneButtonHandler:w}):null))}na.defaultProps={doneButtonHandler:void 0,hideAfterFinish:!1,hideCancelButton:!1,hidePauseResumeButton:!1,hideRetryButton:!1,hideUploadButton:void 0,showProgressDetails:void 0};var _h={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function k(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var Fh=0;function Ct(i){return"__private_"+Fh+++"_"+i}const Sh={version:"3.3.3"},Ph=2e3,Th=2e3;function Ch(i,e,t,s){if(i)return Fe.STATE_ERROR;if(e)return Fe.STATE_COMPLETE;if(t)return Fe.STATE_WAITING;let r=Fe.STATE_WAITING;const n=Object.keys(s);for(let a=0;a<n.length;a++){const{progress:o}=s[n[a]];if(o.uploadStarted&&!o.uploadComplete)return Fe.STATE_UPLOADING;o.preprocess&&(r=Fe.STATE_PREPROCESSING),o.postprocess&&r!==Fe.STATE_PREPROCESSING&&(r=Fe.STATE_POSTPROCESSING)}return r}const Eh={target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var de=Ct("lastUpdateTime"),me=Ct("previousUploadedBytes"),ke=Ct("previousSpeed"),se=Ct("previousETA"),ns=Ct("computeSmoothETA"),Bt=Ct("onUploadStart");class aa extends Ve{constructor(e,t){super(e,{...Eh,...t}),Object.defineProperty(this,ns,{value:Oh}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,me,{writable:!0,value:void 0}),Object.defineProperty(this,ke,{writable:!0,value:void 0}),Object.defineProperty(this,se,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,Bt,{writable:!0,value:()=>{const{recoveredState:s}=this.uppy.getState();if(k(this,ke)[ke]=null,k(this,se)[se]=null,s){k(this,me)[me]=Object.values(s.files).reduce((r,n)=>{let{progress:a}=n;return r+a.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}k(this,de)[de]=performance.now(),k(this,me)[me]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=_h,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){const{capabilities:t,files:s,allowNewUpload:r,totalProgress:n,error:a,recoveredState:o}=e,{newFiles:l,startedFiles:h,completeFiles:d,isUploadStarted:u,isAllComplete:p,isAllErrored:f,isAllPaused:m,isUploadInProgress:v,isSomeGhost:y}=this.uppy.getObjectOfFilesPerState(),b=o?Object.values(s):l,w=!!t.resumableUploads,_=t.uploadProgress!==!1;let E=0,F=0;h.forEach(P=>{E+=P.progress.bytesTotal||0,F+=P.progress.bytesUploaded||0});const g=k(this,ns)[ns]({uploaded:F,total:E,remaining:E-F});return na({error:a,uploadState:Ch(a,p,o,e.files||{}),allowNewUpload:r,totalProgress:n,totalSize:E,totalUploadedSize:F,isAllComplete:!1,isAllPaused:m,isAllErrored:f,isUploadStarted:u,isUploadInProgress:v,isSomeGhost:y,recoveredState:o,complete:d.length,newFiles:b.length,numUploads:h.length,totalETA:g,files:s,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:w,supportsUploadProgress:_,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})}onMount(){const e=this.el;ea(e)||(e.dir="ltr")}install(){const{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",k(this,Bt)[Bt]),k(this,de)[de]=performance.now(),k(this,me)[me]=this.uppy.getFiles().reduce((t,s)=>t+s.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",k(this,Bt)[Bt])}}function Oh(i){var e,t;if(i.total===0||i.remaining===0)return 0;(t=(e=k(this,de))[de])!=null||(e[de]=performance.now());const s=performance.now()-k(this,de)[de];if(s===0){var r;return Math.round(((r=k(this,se)[se])!=null?r:0)/100)/10}const n=i.uploaded-k(this,me)[me];if(k(this,me)[me]=i.uploaded,n<=0){var a;return Math.round(((a=k(this,se)[se])!=null?a:0)/100)/10}const o=n/s,l=k(this,ke)[ke]==null?o:xr(o,k(this,ke)[ke],Ph,s);k(this,ke)[ke]=l;const h=i.remaining/l,d=Math.max(k(this,se)[se]-s,0),u=k(this,se)[se]==null?h:xr(h,d,Th,s);return k(this,se)[se]=u,k(this,de)[de]=performance.now(),Math.round(u/100)/10}aa.VERSION=Sh.version;const Rr=300;class Dh extends Se{constructor(){super(...arguments),this.ref=Jl()}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,Rr)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,Rr)}render(){const{children:e}=this.props;return c("div",{className:"uppy-Informer-animated",ref:this.ref},e)}}function Ah(i,e){return Object.assign(i,e)}function xh(i,e){var t;return(t=i==null?void 0:i.key)!=null?t:e}function Nh(i,e){const t=i._ptgLinkedRefs||(i._ptgLinkedRefs={});return t[e]||(t[e]=s=>{i.refs[e]=s})}function Lt(i){const e={};for(let t=0;t<i.length;t++)if(i[t]!=null){const s=xh(i[t],t.toString(36));e[s]=i[t]}return e}function Mh(i,e){i=i||{},e=e||{};const t=a=>e.hasOwnProperty(a)?e[a]:i[a],s={};let r=[];for(const a in i)e.hasOwnProperty(a)?r.length&&(s[a]=r,r=[]):r.push(a);const n={};for(const a in e){if(s.hasOwnProperty(a))for(let o=0;o<s[a].length;o++){const l=s[a][o];n[s[a][o]]=t(l)}n[a]=t(a)}for(let a=0;a<r.length;a++)n[r[a]]=t(r[a]);return n}const kh=i=>i;class oa extends Se{constructor(e,t){super(e,t),this.refs={},this.state={children:Lt($e($e(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){const t=Lt($e(e.children)||[]),s=this.state.children;this.setState(n=>({children:Mh(n.children,t)}));let r;for(r in t)if(t.hasOwnProperty(r)){const n=s&&s.hasOwnProperty(r);t[r]&&n&&this.currentlyTransitioningKeys[r]?(this.keysToEnter.push(r),this.keysToAbortLeave.push(r)):t[r]&&!n&&!this.currentlyTransitioningKeys[r]&&this.keysToEnter.push(r)}for(r in s)if(s.hasOwnProperty(r)){const n=t&&t.hasOwnProperty(r);s[r]&&!n&&!this.currentlyTransitioningKeys[r]&&this.keysToLeave.push(r)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){const t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t!=null&&t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const t=this.refs[e];t!=null&&t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const s=Lt($e(this.props.children)||[]);(!s||!s.hasOwnProperty(e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t!=null&&t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const t=this.refs[e];t!=null&&t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const s=Lt($e(this.props.children)||[]);(!s||!s.hasOwnProperty(e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const s=this.refs[e];s!=null&&s.componentWillLeave?s.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const s=this.refs[e];s!=null&&s.componentDidLeave&&s.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const r=Lt($e(this.props.children)||[]);if(r&&r.hasOwnProperty(e))this.performEnter(e);else{const n=Ah({},this.state.children);delete n[e],this.setState({children:n})}}render(e,t){let{childFactory:s,transitionLeave:r,transitionName:n,transitionAppear:a,transitionEnter:o,transitionLeaveTimeout:l,transitionEnterTimeout:h,transitionAppearTimeout:d,component:u,...p}=e,{children:f}=t;const m=Object.entries(f).map(v=>{let[y,b]=v;if(!b)return;const w=Nh(this,y);return Jn(s(b),{ref:w,key:y})}).filter(Boolean);return c(u,p,m)}}oa.defaultProps={component:"span",childFactory:kh};const Rh={version:"3.1.0"};class la extends Ve{constructor(e,t){super(e,t),this.render=s=>c("div",{className:"uppy uppy-Informer"},c(oa,null,s.info.map(r=>c(Dh,{key:r.message},c("p",{role:"alert"},r.message," ",r.details&&c("span",{"aria-label":r.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${r.message} 

 ${r.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){const{target:e}=this.opts;e&&this.mount(e,this)}}la.VERSION=Rh.version;const Uh=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function Ih(i,e,t){var s,r;const n=Uh.exec(i),a=(s=(r=e.mimeType)!=null?r:n==null?void 0:n[1])!=null?s:"plain/text";let o;if((n==null?void 0:n[2])!=null){const l=atob(decodeURIComponent(n[3])),h=new Uint8Array(l.length);for(let d=0;d<l.length;d++)h[d]=l.charCodeAt(d);o=[h]}else(n==null?void 0:n[3])!=null&&(o=[decodeURIComponent(n[3])]);return t?new File(o,e.name||"",{type:a}):new Blob(o,{type:a})}function Ur(i){return i.startsWith("blob:")}function Ir(i){return i?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(i):!1}function A(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var ha=typeof self!="undefined"?self:global;const ii=typeof navigator!="undefined",Bh=ii&&typeof HTMLImageElement=="undefined",Br=!(typeof global=="undefined"||typeof process=="undefined"||!process.versions||!process.versions.node),ua=ha.Buffer,da=!!ua,Lh=i=>i!==void 0;function ca(i){return i===void 0||(i instanceof Map?i.size===0:Object.values(i).filter(Lh).length===0)}function q(i){let e=new Error(i);throw delete e.stack,e}function Lr(i){let e=function(t){let s=0;return t.ifd0.enabled&&(s+=1024),t.exif.enabled&&(s+=2048),t.makerNote&&(s+=2048),t.userComment&&(s+=1024),t.gps.enabled&&(s+=512),t.interop.enabled&&(s+=100),t.ifd1.enabled&&(s+=1024),s+2048}(i);return i.jfif.enabled&&(e+=50),i.xmp.enabled&&(e+=2e4),i.iptc.enabled&&(e+=14e3),i.icc.enabled&&(e+=6e3),e}const as=i=>String.fromCharCode.apply(null,i),$r=typeof TextDecoder!="undefined"?new TextDecoder("utf-8"):void 0;class ye{static from(e,t){return e instanceof this&&e.le===t?e:new ye(e,void 0,void 0,t)}constructor(e,t=0,s,r){if(typeof r=="boolean"&&(this.le=r),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){s===void 0&&(s=e.byteLength-t);let n=new DataView(e,t,s);this._swapDataView(n)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof ye){s===void 0&&(s=e.byteLength-t),(t+=e.byteOffset)+s>e.byteOffset+e.byteLength&&q("Creating view outside of available memory in ArrayBuffer");let n=new DataView(e.buffer,t,s);this._swapDataView(n)}else if(typeof e=="number"){let n=new DataView(new ArrayBuffer(e));this._swapDataView(n)}else q("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,s=ye){return e instanceof DataView||e instanceof ye?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||q("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new s(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new ye(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return r=this.getUint8Array(e,t),$r?$r.decode(r):da?Buffer.from(r).toString("utf8"):decodeURIComponent(escape(as(r)));var r}getLatin1String(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return as(s)}getUnicodeString(e=0,t=this.byteLength){const s=[];for(let r=0;r<t&&e+r<this.byteLength;r+=2)s.push(this.getUint16(e+r));return as(s)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,s){switch(t){case 1:return this.getUint8(e,s);case 2:return this.getUint16(e,s);case 4:return this.getUint32(e,s);case 8:return this.getUint64&&this.getUint64(e,s)}}getUint(e,t,s){switch(t){case 8:return this.getUint8(e,s);case 16:return this.getUint16(e,s);case 32:return this.getUint32(e,s);case 64:return this.getUint64&&this.getUint64(e,s)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Ms(i,e){q(`${i} '${e}' was not loaded, try using full build of exifr.`)}class sr extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Ms(this.kind,e),t&&(e in t||function(s,r){q(`Unknown ${s} '${r}'.`)}(this.kind,e),t[e].enabled||Ms(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var ji=new sr("file parser"),oe=new sr("segment parser"),ui=new sr("file reader");let $h=ha.fetch;function zr(i,e){return(t=i).startsWith("data:")||t.length>1e4?Rs(i,e,"base64"):Br&&i.includes("://")?ks(i,e,"url",Ui):Br?Rs(i,e,"fs"):ii?ks(i,e,"url",Ui):void q("Invalid input argument");var t}async function ks(i,e,t,s){return ui.has(t)?Rs(i,e,t):s?async function(r,n){let a=await n(r);return new ye(a)}(i,s):void q(`Parser ${t} is not loaded`)}async function Rs(i,e,t){let s=new(ui.get(t))(i,e);return await s.read(),s}const Ui=i=>$h(i).then(e=>e.arrayBuffer()),si=i=>new Promise((e,t)=>{let s=new FileReader;s.onloadend=()=>e(s.result||new ArrayBuffer),s.onerror=t,s.readAsArrayBuffer(i)});class zh extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function pa(i,e,t){let s=new zh;for(let[r,n]of t)s.set(r,n);if(Array.isArray(e))for(let r of e)i.set(r,s);else i.set(e,s);return s}function fa(i,e,t){let s,r=i.get(e);for(s of t)r.set(s[0],s[1])}const di=new Map,rr=new Map,nr=new Map,mt=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Hi=["jfif","xmp","icc","iptc","ihdr"],ri=["tiff",...Hi],$=["ifd0","ifd1","exif","gps","interop"],gt=[...ri,...$],yt=["makerNote","userComment"],qi=["translateKeys","translateValues","reviveValues","multiSegment"],vt=[...qi,"sanitize","mergeOutput","silentErrors"];class ma{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class $t extends ma{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,s,r){if(super(),A(this,"enabled",!1),A(this,"skip",new Set),A(this,"pick",new Set),A(this,"deps",new Set),A(this,"translateKeys",!1),A(this,"translateValues",!1),A(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(r),this.canBeFiltered=$.includes(e),this.canBeFiltered&&(this.dict=di.get(e)),s!==void 0)if(Array.isArray(s))this.parse=this.enabled=!0,this.canBeFiltered&&s.length>0&&this.translateTagSet(s,this.pick);else if(typeof s=="object"){if(this.enabled=!0,this.parse=s.parse!==!1,this.canBeFiltered){let{pick:n,skip:a}=s;n&&n.length>0&&this.translateTagSet(n,this.pick),a&&a.length>0&&this.translateTagSet(a,this.skip)}this.applyInheritables(s)}else s===!0||s===!1?this.parse=this.enabled=s:q(`Invalid options argument: ${s}`)}applyInheritables(e){let t,s;for(t of qi)s=e[t],s!==void 0&&(this[t]=s)}translateTagSet(e,t){if(this.dict){let s,r,{tagKeys:n,tagValues:a}=this.dict;for(s of e)typeof s=="string"?(r=a.indexOf(s),r===-1&&(r=n.indexOf(Number(s))),r!==-1&&t.add(Number(n[r]))):t.add(s)}else for(let s of e)t.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Ii(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Ii(this.pick,this.deps)}}var K={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},jr=new Map;class ci extends ma{static useCached(e){let t=jr.get(e);return t!==void 0||(t=new this(e),jr.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):q(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=ii?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of mt)this[e]=K[e];for(e of vt)this[e]=K[e];for(e of yt)this[e]=K[e];for(e of gt)this[e]=new $t(e,K[e],void 0,this)}setupFromTrue(){let e;for(e of mt)this[e]=K[e];for(e of vt)this[e]=K[e];for(e of yt)this[e]=!0;for(e of gt)this[e]=new $t(e,!0,void 0,this)}setupFromArray(e){let t;for(t of mt)this[t]=K[t];for(t of vt)this[t]=K[t];for(t of yt)this[t]=K[t];for(t of gt)this[t]=new $t(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,$)}setupFromObject(e){let t;for(t of($.ifd0=$.ifd0||$.image,$.ifd1=$.ifd1||$.thumbnail,Object.assign(this,e),mt))this[t]=os(e[t],K[t]);for(t of vt)this[t]=os(e[t],K[t]);for(t of yt)this[t]=os(e[t],K[t]);for(t of ri)this[t]=new $t(t,K[t],e[t],this);for(t of $)this[t]=new $t(t,K[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,$,gt),e.tiff===!0?this.batchEnableWithBool($,!0):e.tiff===!1?this.batchEnableWithUserValue($,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,$):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,$)}batchEnableWithBool(e,t){for(let s of e)this[s].enabled=t}batchEnableWithUserValue(e,t){for(let s of e){let r=t[s];this[s].enabled=r!==!1&&r!==void 0}}setupGlobalFilters(e,t,s,r=s){if(e&&e.length){for(let a of r)this[a].enabled=!1;let n=Hr(e,s);for(let[a,o]of n)Ii(this[a].pick,o),this[a].enabled=!0}else if(t&&t.length){let n=Hr(t,s);for(let[a,o]of n)Ii(this[a].skip,o)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:s,iptc:r,icc:n}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),s.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),n.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:s,interop:r}=this;r.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),s.needed&&e.deps.add(34853),this.tiff.enabled=$.some(n=>this[n].enabled===!0)||this.makerNote||this.userComment;for(let n of $)this[n].finalizeFilters()}get onlyTiff(){return!Hi.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of ri)this[e].enabled&&!oe.has(e)&&Ms("segment parser",e)}}function Hr(i,e){let t,s,r,n,a=[];for(r of e){for(n of(t=di.get(r),s=[],t))(i.includes(n[0])||i.includes(n[1]))&&s.push(n[0]);s.length&&a.push([r,s])}return a}function os(i,e){return i!==void 0?i:e!==void 0?e:void 0}function Ii(i,e){for(let t of e)i.add(t)}A(ci,"default",K);class Vi{constructor(e){A(this,"parsers",{}),A(this,"output",{}),A(this,"errors",[]),A(this,"pushToErrors",t=>this.errors.push(t)),this.options=ci.useCached(e)}async read(e){this.file=await function(t,s){return typeof t=="string"?zr(t,s):ii&&!Bh&&t instanceof HTMLImageElement?zr(t.src,s):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new ye(t):ii&&t instanceof Blob?ks(t,s,"blob",si):void q("Invalid input argument")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[s,r]of ji)if(r.canHandle(e,t))return this.fileParser=new r(this.options,this.file,this.parsers),e[s]=!0;this.file.close&&this.file.close(),q("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),ca(s=e)?void 0:s;var s}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map(async s=>{let r=await s.parse();s.assignToOutput(e,r)});this.options.silentErrors&&(t=t.map(s=>s.catch(this.pushToErrors))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,s=oe.get("tiff",e);var r;if(t.tiff?r={start:0,type:"tiff"}:t.jpeg&&(r=await this.fileParser.getOrFindSegment("tiff")),r===void 0)return;let n=await this.fileParser.ensureSegmentChunk(r),a=this.parsers.tiff=new s(n,e,t),o=await a.extractThumbnail();return t.close&&t.close(),o}}async function ga(i,e){let t=new Vi(e);return await t.read(i),t.parse()}var jh=Object.freeze({__proto__:null,parse:ga,Exifr:Vi,fileParsers:ji,segmentParsers:oe,fileReaders:ui,tagKeys:di,tagValues:rr,tagRevivers:nr,createDictionary:pa,extendDictionary:fa,fetchUrlAsArrayBuffer:Ui,readBlobAsArrayBuffer:si,chunkedProps:mt,otherSegments:Hi,segments:ri,tiffBlocks:$,segmentsAndBlocks:gt,tiffExtractables:yt,inheritables:qi,allFormatters:vt,Options:ci});class bt{static findPosition(e,t){let s=e.getUint16(t+2)+2,r=typeof this.headerLength=="function"?this.headerLength(e,t,s):this.headerLength,n=t+r,a=s-r;return{offset:t,length:s,headerLength:r,start:n,size:a,end:n+a}}static parse(e,t={}){return new this(e,new ci({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof ye?e:new ye(e)}constructor(e,t={},s){A(this,"errors",[]),A(this,"raw",new Map),A(this,"handleError",r=>{if(!this.options.silentErrors)throw r;this.errors.push(r.message)}),this.chunk=this.normalizeInput(e),this.file=s,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let s=nr.get(t),r=rr.get(t),n=di.get(t),a=this.options[t],o=a.reviveValues&&!!s,l=a.translateValues&&!!r,h=a.translateKeys&&!!n,d={};for(let[u,p]of e)o&&s.has(u)?p=s.get(u)(p):l&&r.has(u)&&(p=this.translateValue(p,r.get(u))),h&&n.has(u)&&(u=n.get(u)||u),d[u]=p;return d}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,s){if(this.globalOptions.mergeOutput)return Object.assign(e,s);e[t]?Object.assign(e[t],s):e[t]=s}}A(bt,"headerLength",4),A(bt,"type",void 0),A(bt,"multiSegment",!1),A(bt,"canHandle",()=>!1);function Hh(i){return i===192||i===194||i===196||i===219||i===221||i===218||i===254}function qh(i){return i>=224&&i<=239}function Vh(i,e,t){for(let[s,r]of oe)if(r.canHandle(i,e,t))return s}class qr extends class{constructor(e,t,s){A(this,"errors",[]),A(this,"ensureSegmentChunk",async r=>{let n=r.start,a=r.size||65536;if(this.file.chunked)if(this.file.available(n,a))r.chunk=this.file.subarray(n,a);else try{r.chunk=await this.file.readChunk(n,a)}catch(o){q(`Couldn't read segment: ${JSON.stringify(r)}. ${o.message}`)}else this.file.byteLength>n+a?r.chunk=this.file.subarray(n,a):r.size===void 0?r.chunk=this.file.subarray(n):q("Segment unreachable: "+JSON.stringify(r));return r.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=s}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let s=new(oe.get(e))(t,this.options,this.file);return this.parsers[e]=s}createParsers(e){for(let t of e){let{type:s,chunk:r}=t,n=this.options[s];if(n&&n.enabled){let a=this.parsers[s];a&&a.append||a||this.createParser(s,r)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),A(this,"appSegments",[]),A(this,"jpegSegments",[]),A(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(oe.keyList())):(e=e===void 0?oe.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&oe.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:s,findAll:r,wanted:n,remaining:a}=this;if(!r&&this.file.chunked&&(r=Array.from(n).some(o=>{let l=oe.get(o),h=this.options[o];return l.multiSegment&&h.multiSegment}),r&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,s.byteLength),!this.options.onlyTiff&&s.chunked){let o=!1;for(;a.size>0&&!o&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=s,h=this.appSegments.some(d=>!this.file.available(d.offset||d.start,d.length||d.size));if(o=e>l&&!h?!await s.readNextChunk(e):!await s.readNextChunk(l),(e=this.findAppSegmentsInRange(e,s.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let s,r,n,a,o,l,{file:h,findAll:d,wanted:u,remaining:p,options:f}=this;for(;e<t;e++)if(h.getUint8(e)===255){if(s=h.getUint8(e+1),qh(s)){if(r=h.getUint16(e+2),n=Vh(h,e,r),n&&u.has(n)&&(a=oe.get(n),o=a.findPosition(h,e),l=f[n],o.type=n,this.appSegments.push(o),!d&&(a.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||p.delete(n)):p.delete(n),p.size===0)))break;f.recordUnknownSegments&&(o=bt.findPosition(h,e),o.marker=s,this.unknownSegments.push(o)),e+=r+1}else if(Hh(s)){if(r=h.getUint16(e+2),s===218&&f.stopAfterSos!==!1)return;f.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:s}),e+=r+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=function(t,s){let r,n,a,o=new Map;for(let l=0;l<t.length;l++)r=t[l],n=r[s],o.has(n)?a=o.get(n):o.set(n,a=[]),a.push(r);return Array.from(o)}(this.appSegments,"type");this.mergedAppSegments=e.map(([t,s])=>{let r=oe.get(t,this.options);return r.handleMultiSegments?{type:t,chunk:r.handleMultiSegments(s)}:s[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}A(qr,"type","jpeg"),ji.set("jpeg",qr);const Wh=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Gh extends bt{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,s=new Map){let{pick:r,skip:n}=this.options[t];r=new Set(r);let a=r.size>0,o=n.size===0,l=this.chunk.getUint16(e);e+=2;for(let h=0;h<l;h++){let d=this.chunk.getUint16(e);if(a){if(r.has(d)&&(s.set(d,this.parseTag(e,d,t)),r.delete(d),r.size===0))break}else!o&&n.has(d)||s.set(d,this.parseTag(e,d,t));e+=12}return s}parseTag(e,t,s){let{chunk:r}=this,n=r.getUint16(e+2),a=r.getUint32(e+4),o=Wh[n];if(o*a<=4?e+=8:e=r.getUint32(e+8),(n<1||n>13)&&q(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${n}, offset ${e}`),e>r.byteLength&&q(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${n}, offset ${e} is outside of chunk size ${r.byteLength}`),n===1)return r.getUint8Array(e,a);if(n===2)return(l=function(h){for(;h.endsWith("\0");)h=h.slice(0,-1);return h}(l=r.getString(e,a)).trim())===""?void 0:l;var l;if(n===7)return r.getUint8Array(e,a);if(a===1)return this.parseTagValue(n,e);{let h=new(function(u){switch(u){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(n))(a),d=o;for(let u=0;u<a;u++)h[u]=this.parseTagValue(n,e),e+=d;return h}}parseTagValue(e,t){let{chunk:s}=this;switch(e){case 1:return s.getUint8(t);case 3:return s.getUint16(t);case 4:return s.getUint32(t);case 5:return s.getUint32(t)/s.getUint32(t+4);case 6:return s.getInt8(t);case 8:return s.getInt16(t);case 9:return s.getInt32(t);case 10:return s.getInt32(t)/s.getInt32(t+4);case 11:return s.getFloat(t);case 12:return s.getDouble(t);case 13:return s.getUint32(t);default:q(`Invalid tiff type ${e}`)}}}class ls extends Gh{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let s=new Map;return this[t]=s,this.parseTags(e,t,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&q("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&q(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,Lr(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Lr(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let s=e.get(t);s&&s.length===1&&e.set(t,s[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Vr(...e.get(2),e.get(1))),e.set("longitude",Vr(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,s,r={};for(t of $)if(e=this[t],!ca(e))if(s=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(r,s)}else r[t]=s;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[s,r]of Object.entries(t))this.assignObjectToOutput(e,s,r)}}function Vr(i,e,t,s){var r=i+e/60+t/3600;return s!=="S"&&s!=="W"||(r*=-1),r}A(ls,"type","tiff"),A(ls,"headerLength",10),oe.set("tiff",ls);Object.freeze({__proto__:null,default:jh,Exifr:Vi,fileParsers:ji,segmentParsers:oe,fileReaders:ui,tagKeys:di,tagValues:rr,tagRevivers:nr,createDictionary:pa,extendDictionary:fa,fetchUrlAsArrayBuffer:Ui,readBlobAsArrayBuffer:si,chunkedProps:mt,otherSegments:Hi,segments:ri,tiffBlocks:$,segmentsAndBlocks:gt,tiffExtractables:yt,inheritables:qi,allFormatters:vt,Options:ci,parse:ga});const ar={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},ar,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},ar,{tiff:!1,ifd1:!0,mergeOutput:!1});const Xh=Object.assign({},ar,{firstChunkSize:4e4,ifd0:[274]});async function Yh(i){let e=new Vi(Xh);await e.read(i);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const Kh=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Yt=!0,Kt=!0;if(typeof navigator=="object"){let i=navigator.userAgent;if(i.includes("iPad")||i.includes("iPhone")){let e=i.match(/OS (\d+)_(\d+)/);if(e){let[,t,s]=e;Yt=Number(t)+.1*Number(s)<13.4,Kt=!1}}else if(i.includes("OS X 10")){let[,e]=i.match(/OS X 10[_.](\d+)/);Yt=Kt=Number(e)<15}if(i.includes("Chrome/")){let[,e]=i.match(/Chrome\/(\d+)/);Yt=Kt=Number(e)<81}else if(i.includes("Firefox/")){let[,e]=i.match(/Firefox\/(\d+)/);Yt=Kt=Number(e)<77}}async function Qh(i){let e=await Yh(i);return Object.assign({canvas:Yt,css:Kt},Kh[e])}class Jh extends ye{constructor(...e){super(...e),A(this,"ranges",new Zh),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,s){if(e===0&&this.byteLength===0&&s){let r=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(r)}else{let r=e+t;if(r>this.byteLength){let{dataView:n}=this._extend(r);this._swapDataView(n)}}}_extend(e){let t;t=da?ua.allocUnsafe(e):new Uint8Array(e);let s=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:s}}subarray(e,t,s=!1){return t=t||this._lengthToEnd(e),s&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,s=!1){s&&this._tryExtend(t,e.byteLength,e);let r=super.set(e,t);return this.ranges.add(t,r.byteLength),r}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class Zh{constructor(){A(this,"list",[])}get length(){return this.list.length}add(e,t,s=0){let r=e+t,n=this.list.filter(a=>Wr(e,a.offset,r)||Wr(e,a.end,r));if(n.length>0){e=Math.min(e,...n.map(o=>o.offset)),r=Math.max(r,...n.map(o=>o.end)),t=r-e;let a=n.shift();a.offset=e,a.length=t,a.end=r,this.list=this.list.filter(o=>!n.includes(o))}else this.list.push({offset:e,length:t,end:r})}available(e,t){let s=e+t;return this.list.some(r=>r.offset<=e&&s<=r.end)}}function Wr(i,e,t){return i<=e&&e<=t}class eu extends Jh{constructor(e,t){super(0),A(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,s=await this.readChunk(e,t);return!!s&&s.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ui.set("blob",class extends eu{async readWhole(){this.chunked=!1;let i=await si(this.input);this._swapArrayBuffer(i)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(i,e){let t=e?i+e:void 0,s=this.input.slice(i,t),r=await si(s);return this.set(r,i,!0)}});var tu={strings:{generatingThumbnails:"Generating thumbnails..."}};const iu={version:"3.1.0"};function su(i,e,t){try{i.getContext("2d").getImageData(0,0,1,1)}catch(s){if(s.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return i.toBlob?new Promise(s=>{i.toBlob(s,e,t)}).then(s=>{if(s===null)throw new Error("cannot read image, probably an svg with external resources");return s}):Promise.resolve().then(()=>Ih(i.toDataURL(e,t),{})).then(s=>{if(s===null)throw new Error("could not extract blob, probably an old browser");return s})}function ru(i,e){let t=i.width,s=i.height;(e.deg===90||e.deg===270)&&(t=i.height,s=i.width);const r=document.createElement("canvas");r.width=t,r.height=s;const n=r.getContext("2d");return n.translate(t/2,s/2),e.canvas&&(n.rotate(e.rad),n.scale(e.scaleX,e.scaleY)),n.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),r}function nu(i){const e=i.width/i.height,t=5e6,s=4096;let r=Math.floor(Math.sqrt(t*e)),n=Math.floor(t/Math.sqrt(t*e));if(r>s&&(r=s,n=Math.round(r/e)),n>s&&(n=s,r=Math.round(e*n)),i.width>r){const a=document.createElement("canvas");return a.width=r,a.height=n,a.getContext("2d").drawImage(i,0,0,r,n),a}return i}const au={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class ya extends Ve{constructor(e,t){if(super(e,{...au,...t}),this.onFileAdded=s=>{!s.preview&&s.data&&Ir(s.type)&&!s.isRemote&&this.addToQueue(s.id)},this.onCancelRequest=s=>{const r=this.queue.indexOf(s.id);r!==-1&&this.queue.splice(r,1)},this.onFileRemoved=s=>{const r=this.queue.indexOf(s.id);r!==-1&&this.queue.splice(r,1),s.preview&&Ur(s.preview)&&URL.revokeObjectURL(s.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(r=>r.isRestored).forEach(r=>{(!r.preview||Ur(r.preview))&&this.addToQueue(r.id)})},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=s=>{s.forEach(n=>{const a=this.uppy.getFile(n);this.uppy.emit("preprocess-progress",a,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const r=()=>{s.forEach(n=>{const a=this.uppy.getFile(n);this.uppy.emit("preprocess-complete",a)})};return new Promise(n=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{r(),n()}):(r(),n())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=tu,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,s){const r=URL.createObjectURL(e.data),n=new Promise((o,l)=>{const h=new Image;h.src=r,h.addEventListener("load",()=>{URL.revokeObjectURL(r),o(h)}),h.addEventListener("error",d=>{URL.revokeObjectURL(r),l(d.error||new Error("Could not create thumbnail"))})}),a=Qh(e.data).catch(()=>1);return Promise.all([n,a]).then(o=>{let[l,h]=o;const d=this.getProportionalDimensions(l,t,s,h.deg),u=ru(l,h),p=this.resizeImage(u,d.width,d.height);return su(p,this.thumbnailType,80)}).then(o=>URL.createObjectURL(o))}getProportionalDimensions(e,t,s,r){let n=e.width/e.height;return(r===90||r===270)&&(n=e.height/e.width),t!=null?{width:t,height:Math.round(t/n)}:s!=null?{width:Math.round(s*n),height:s}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/n)}}resizeImage(e,t,s){let r=nu(e),n=Math.ceil(Math.log2(r.width/t));n<1&&(n=1);let a=t*2**(n-1),o=s*2**(n-1);const l=2;for(;n--;){const h=document.createElement("canvas");h.width=a,h.height=o,h.getContext("2d").drawImage(r,0,0,a,o),r=h,a=Math.round(a/l),o=Math.round(o/l)}return r}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return Ir(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}ya.VERSION=iu.version;function Gr(i){if(typeof i=="string"){const e=document.querySelectorAll(i);return e.length===0?null:Array.from(e)}return typeof i=="object"&&Zn(i)?[i]:null}var ht=Array.from;function va(i,e,t,s){let{onSuccess:r}=s;i.readEntries(n=>{const a=[...e,...n];n.length?queueMicrotask(()=>{va(i,a,t,{onSuccess:r})}):r(a)},n=>{t(n),r(e)})}function ba(i,e){return i==null?i:{kind:i.isFile?"file":i.isDirectory?"directory":void 0,name:i.name,getFile(){return new Promise((t,s)=>i.file(t,s))},async*values(){const t=i.createReader();yield*await new Promise(r=>{va(t,[],e,{onSuccess:n=>r(n.map(a=>ba(a,e)))})})},isSameEntry:void 0}}function wa(i,e,t){try{return t===void 0&&(t=void 0),async function*(){const s=()=>`${e}/${i.name}`;if(i.kind==="file"){const r=await i.getFile();r!=null?(r.relativePath=e?s():null,yield r):t!=null&&(yield t)}else if(i.kind==="directory")for await(const r of i.values())yield*wa(r,e?s():i.name);else t!=null&&(yield t)}()}catch(s){return Promise.reject(s)}}async function*ou(i,e){const t=await Promise.all(Array.from(i.items,async s=>{var r;let n;const a=()=>typeof s.getAsEntry=="function"?s.getAsEntry():s.webkitGetAsEntry();return(r=n)!=null||(n=ba(a(),e)),{fileSystemHandle:n,lastResortFile:s.getAsFile()}}));for(const{lastResortFile:s,fileSystemHandle:r}of t)if(r!=null)try{yield*wa(r,"",s)}catch(n){s!=null?yield s:e(n)}else s!=null&&(yield s)}function lu(i){const e=ht(i.files);return Promise.resolve(e)}async function _a(i,e){var t;const s=(t=e==null?void 0:e.logDropError)!=null?t:Function.prototype;try{const r=[];for await(const n of ou(i,s))r.push(n);return r}catch{return lu(i)}}var hu={exports:{}};(function(i){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function r(l,h,d){this.fn=l,this.context=h,this.once=d||!1}function n(l,h,d,u,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new r(d,u||l,p),m=t?t+h:h;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function a(l,h){--l._eventsCount===0?l._events=new s:delete l._events[h]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],d,u;if(this._eventsCount===0)return h;for(u in d=this._events)e.call(d,u)&&h.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(d)):h},o.prototype.listeners=function(h){var d=t?t+h:h,u=this._events[d];if(!u)return[];if(u.fn)return[u.fn];for(var p=0,f=u.length,m=new Array(f);p<f;p++)m[p]=u[p].fn;return m},o.prototype.listenerCount=function(h){var d=t?t+h:h,u=this._events[d];return u?u.fn?1:u.length:0},o.prototype.emit=function(h,d,u,p,f,m){var v=t?t+h:h;if(!this._events[v])return!1;var y=this._events[v],b=arguments.length,w,_;if(y.fn){switch(y.once&&this.removeListener(h,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,u),!0;case 4:return y.fn.call(y.context,d,u,p),!0;case 5:return y.fn.call(y.context,d,u,p,f),!0;case 6:return y.fn.call(y.context,d,u,p,f,m),!0}for(_=1,w=new Array(b-1);_<b;_++)w[_-1]=arguments[_];y.fn.apply(y.context,w)}else{var E=y.length,F;for(_=0;_<E;_++)switch(y[_].once&&this.removeListener(h,y[_].fn,void 0,!0),b){case 1:y[_].fn.call(y[_].context);break;case 2:y[_].fn.call(y[_].context,d);break;case 3:y[_].fn.call(y[_].context,d,u);break;case 4:y[_].fn.call(y[_].context,d,u,p);break;default:if(!w)for(F=1,w=new Array(b-1);F<b;F++)w[F-1]=arguments[F];y[_].fn.apply(y[_].context,w)}}return!0},o.prototype.on=function(h,d,u){return n(this,h,d,u,!1)},o.prototype.once=function(h,d,u){return n(this,h,d,u,!0)},o.prototype.removeListener=function(h,d,u,p){var f=t?t+h:h;if(!this._events[f])return this;if(!d)return a(this,f),this;var m=this._events[f];if(m.fn)m.fn===d&&(!p||m.once)&&(!u||m.context===u)&&a(this,f);else{for(var v=0,y=[],b=m.length;v<b;v++)(m[v].fn!==d||p&&!m[v].once||u&&m[v].context!==u)&&y.push(m[v]);y.length?this._events[f]=y.length===1?y[0]:y:a(this,f)}return this},o.prototype.removeAllListeners=function(h){var d;return h?(d=t?t+h:h,this._events[d]&&a(this,d)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,i.exports=o})(hu);globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;var ni,B,hs,Xr,ai=0,Fa=[],xi=[],z=R,Yr=z.__b,Kr=z.__r,Qr=z.diffed,Jr=z.__c,Zr=z.unmount,en=z.__;function or(i,e){z.__h&&z.__h(B,i,ai||e),ai=0;var t=B.__H||(B.__H={__:[],__h:[]});return i>=t.__.length&&t.__.push({__V:xi}),t.__[i]}function Bi(i){return ai=1,uu(Pa,i)}function uu(i,e,t){var s=or(ni++,2);if(s.t=i,!s.__c&&(s.__=[t?t(e):Pa(void 0,e),function(o){var l=s.__N?s.__N[0]:s.__[0],h=s.t(l,o);l!==h&&(s.__N=[h,s.__[1]],s.__c.setState({}))}],s.__c=B,!B.u)){var r=function(o,l,h){if(!s.__c.__H)return!0;var d=s.__c.__H.__.filter(function(p){return!!p.__c});if(d.every(function(p){return!p.__N}))return!n||n.call(this,o,l,h);var u=!1;return d.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(u=!0)}}),!(!u&&s.__c.props===o)&&(!n||n.call(this,o,l,h))};B.u=!0;var n=B.shouldComponentUpdate,a=B.componentWillUpdate;B.componentWillUpdate=function(o,l,h){if(this.__e){var d=n;n=void 0,r(o,l,h),n=d}a&&a.call(this,o,l,h)},B.shouldComponentUpdate=r}return s.__N||s.__}function Us(i,e){var t=or(ni++,3);!z.__s&&Sa(t.__H,e)&&(t.__=i,t.i=e,B.__H.__h.push(t))}function us(i){return ai=5,lr(function(){return{current:i}},[])}function lr(i,e){var t=or(ni++,7);return Sa(t.__H,e)?(t.__V=i(),t.i=e,t.__h=i,t.__V):t.__}function du(i,e){return ai=8,lr(function(){return i},e)}function cu(){for(var i;i=Fa.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(Ni),i.__H.__h.forEach(Is),i.__H.__h=[]}catch(e){i.__H.__h=[],z.__e(e,i.__v)}}z.__b=function(i){B=null,Yr&&Yr(i)},z.__=function(i,e){i&&e.__k&&e.__k.__m&&(i.__m=e.__k.__m),en&&en(i,e)},z.__r=function(i){Kr&&Kr(i),ni=0;var e=(B=i.__c).__H;e&&(hs===B?(e.__h=[],B.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=xi,t.__N=t.i=void 0})):(e.__h.forEach(Ni),e.__h.forEach(Is),e.__h=[],ni=0)),hs=B},z.diffed=function(i){Qr&&Qr(i);var e=i.__c;e&&e.__H&&(e.__H.__h.length&&(Fa.push(e)!==1&&Xr===z.requestAnimationFrame||((Xr=z.requestAnimationFrame)||pu)(cu)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==xi&&(t.__=t.__V),t.i=void 0,t.__V=xi})),hs=B=null},z.__c=function(i,e){e.some(function(t){try{t.__h.forEach(Ni),t.__h=t.__h.filter(function(s){return!s.__||Is(s)})}catch(s){e.some(function(r){r.__h&&(r.__h=[])}),e=[],z.__e(s,t.__v)}}),Jr&&Jr(i,e)},z.unmount=function(i){Zr&&Zr(i);var e,t=i.__c;t&&t.__H&&(t.__H.__.forEach(function(s){try{Ni(s)}catch(r){e=r}}),t.__H=void 0,e&&z.__e(e,t.__v))};var tn=typeof requestAnimationFrame=="function";function pu(i){var e,t=function(){clearTimeout(s),tn&&cancelAnimationFrame(e),setTimeout(i)},s=setTimeout(t,100);tn&&(e=requestAnimationFrame(t))}function Ni(i){var e=B,t=i.__c;typeof t=="function"&&(i.__c=void 0,t()),B=e}function Is(i){var e=B;i.__c=i.__(),B=e}function Sa(i,e){return!i||i.length!==e.length||e.some(function(t,s){return t!==i[s]})}function Pa(i,e){return typeof e=="function"?e(i):e}function Bs(){return Bs=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Bs.apply(this,arguments)}const fu={position:"relative",width:"100%",minHeight:"100%"},mu={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class gu extends Se{constructor(e){super(e),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(e){let{data:t,rowHeight:s,renderRow:r,overscanCount:n=10,...a}=e;const{offset:o,height:l}=this.state;let h=Math.floor(o/s),d=Math.floor(l/s);n&&(h=Math.max(0,h-h%n),d+=n);const u=h+d+4,p=t.slice(h,u),f={...fu,height:t.length*s},m={...mu,top:h*s};return c("div",Bs({onScroll:this.handleScroll},a),c("div",{role:"presentation",style:f},c("div",{role:"presentation",style:m},p.map(r))))}}function yu(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},c("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var sn=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function vu(i,e){return!!(i===e||sn(i)&&sn(e))}function bu(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!vu(i[t],e[t]))return!1;return!0}function rn(i,e){e===void 0&&(e=bu);var t=null;function s(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t&&t.lastThis===this&&e(r,t.lastArgs))return t.lastResult;var a=i.apply(this,r);return t={lastResult:a,lastArgs:r,lastThis:this},a}return s.clear=function(){t=null},s}var Ta=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function Ca(i,e){if(e){const t=i.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return i}function nn(i,e){const t=e[0];t&&(t.focus(),i.preventDefault())}function wu(i,e){const t=e[e.length-1];t&&(t.focus(),i.preventDefault())}function _u(i){return i.contains(document.activeElement)}function Ea(i,e,t){const s=Ca(t,e),r=ht(s.querySelectorAll(Ta)),n=r.indexOf(document.activeElement);_u(s)?i.shiftKey&&n===0?wu(i,r):!i.shiftKey&&n===r.length-1&&nn(i,r):nn(i,r)}function Fu(i,e,t){e===null||Ea(i,e,t)}function Su(){let i=!1;return Un((t,s)=>{const r=Ca(t,s),n=r.contains(document.activeElement);if(n&&i)return;const a=r.querySelector("[data-uppy-super-focusable]");if(!(n&&!a))if(a)a.focus({preventScroll:!0}),i=!0;else{const o=r.querySelector(Ta);o==null||o.focus({preventScroll:!0}),i=!1}},260)}function Oa(){const i=document.body;return!(!("draggable"in i)||!("ondragstart"in i&&"ondrop"in i)||!("FormData"in window)||!("FileReader"in window))}var Pu=function(e,t){if(e===t)return!0;for(var s in e)if(!(s in t))return!1;for(var s in t)if(e[s]!==t[s])return!1;return!0};function Tu(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},c("g",{fill:"#686DE0",fillRule:"evenodd"},c("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),c("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),c("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function Cu(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},c("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function Eu(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},c("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function Ou(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},c("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function Du(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},c("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function Au(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},c("g",{fill:"#A7AFB7",fillRule:"nonzero"},c("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),c("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function xu(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},c("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}function hr(i){const e={color:"#838999",icon:Au()};if(!i)return e;const t=i.split("/")[0],s=i.split("/")[1];return t==="text"?{color:"#5a5e69",icon:xu()}:t==="image"?{color:"#686de0",icon:Tu()}:t==="audio"?{color:"#068dbb",icon:Cu()}:t==="video"?{color:"#19af67",icon:Eu()}:t==="application"&&s==="pdf"?{color:"#e25149",icon:Ou()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(s)!==-1?{color:"#00C469",icon:Du()}:e}function Da(i){const{file:e}=i;if(e.preview)return c("img",{className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:t,icon:s}=hr(e.type);return c("div",{className:"uppy-Dashboard-Item-previewIconWrap"},c("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t}},s),c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},c("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}const Nu=(i,e)=>(typeof e=="function"?e():e).filter(r=>r.id===i)[0].name;function Aa(i){const{file:e,toggleFileCard:t,i18n:s,metaFields:r}=i,{missingRequiredMetaFields:n}=e;if(!(n!=null&&n.length))return null;const a=n.map(o=>Nu(o,r)).join(", ");return c("div",{className:"uppy-Dashboard-Item-errorMessage"},s("missingRequiredMetaFields",{smart_count:n.length,fields:a})," ",c("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id)},s("editFile")))}function Mu(i){const{file:e,i18n:t,toggleFileCard:s,metaFields:r,showLinkToFileUploadResult:n}=i,a="rgba(255, 255, 255, 0.5)",o=e.preview?a:hr(e.type).color;return c("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:o}},n&&e.uploadURL&&c("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name},c("span",{hidden:!0},e.meta.name)),c(Da,{file:e}),c(Aa,{file:e,i18n:t,toggleFileCard:s,metaFields:r}))}function ku(i){if(!i.isUploaded){if(i.error&&!i.hideRetryButton){i.uppy.retryUpload(i.file.id);return}i.resumableUploads&&!i.hidePauseResumeButton?i.uppy.pauseResume(i.file.id):i.individualCancellation&&!i.hideCancelButton&&i.uppy.removeFile(i.file.id)}}function an(i){return i.isUploaded?i.i18n("uploadComplete"):i.error?i.i18n("retryUpload"):i.resumableUploads?i.file.isPaused?i.i18n("resumeUpload"):i.i18n("pauseUpload"):i.individualCancellation?i.i18n("cancelUpload"):""}function ds(i){return c("div",{className:"uppy-Dashboard-Item-progress"},c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":an(i),title:an(i),onClick:()=>ku(i)},i.children))}function Pi(i){let{children:e}=i;return c("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},e)}function cs(i){let{progress:e}=i;const t=2*Math.PI*15;return c("g",null,c("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),c("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e}))}function Ru(i){if(!i.file.progress.uploadStarted)return null;if(i.isUploaded)return c("div",{className:"uppy-Dashboard-Item-progress"},c("div",{className:"uppy-Dashboard-Item-progressIndicator"},c(Pi,null,c("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),c("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"}))));if(!i.recoveredState)return i.error&&!i.hideRetryButton?c(ds,i,c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},c("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),c("path",{d:"M7.9 3H10v2H7.9z"}),c("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),c("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):i.resumableUploads&&!i.hidePauseResumeButton?c(ds,i,c(Pi,null,c(cs,{progress:i.file.progress.percentage}),i.file.isPaused?c("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):c("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},c("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),c("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!i.resumableUploads&&i.individualCancellation&&!i.hideCancelButton?c(ds,i,c(Pi,null,c(cs,{progress:i.file.progress.percentage}),c("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):c("div",{className:"uppy-Dashboard-Item-progress"},c("div",{className:"uppy-Dashboard-Item-progressIndicator"},c(Pi,null,c(cs,{progress:i.file.progress.percentage}))))}const ps="...";function xa(i,e){if(e===0)return"";if(i.length<=e)return i;if(e<=ps.length+1)return`${i.slice(0,e-1)}\u2026`;const t=e-ps.length,s=Math.ceil(t/2),r=Math.floor(t/2);return i.slice(0,s)+ps+i.slice(-r)}const Uu=i=>{const{author:e,name:t}=i.file.meta;function s(){return i.isSingleFile&&i.containerHeight>=350?90:i.containerWidth<=352?35:i.containerWidth<=576?60:e?20:30}return c("div",{className:"uppy-Dashboard-Item-name",title:t},xa(t,s()))},Iu=i=>{var e;const{author:t}=i.file.meta,s=(e=i.file.remote)==null?void 0:e.providerName,r="\xB7";return t?c("div",{className:"uppy-Dashboard-Item-author"},c("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},xa(t.name,13)),s?c(qe,null,` ${r} `,s,` ${r} `):null):null},Bu=i=>i.file.size&&c("div",{className:"uppy-Dashboard-Item-statusSize"},Ft(i.file.size)),Lu=i=>i.file.isGhost&&c("span",null," \u2022 ",c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:i.toggleAddFilesPanel},i.i18n("reSelect"))),$u=i=>{let{file:e,onClick:t}=i;return e.error?c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button"},"?"):null};function zu(i){const{file:e}=i;return c("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source},c("div",{className:"uppy-Dashboard-Item-fileName"},Uu(i),c($u,{file:i.file,onClick:()=>alert(i.file.error)})),c("div",{className:"uppy-Dashboard-Item-status"},Iu(i),Bu(i),Lu(i)),c(Aa,{file:i.file,i18n:i.i18n,toggleFileCard:i.toggleFileCard,metaFields:i.metaFields}))}function ju(i,e){return e===void 0&&(e="Copy the URL below"),new Promise(t=>{const s=document.createElement("textarea");s.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),s.value=i,document.body.appendChild(s),s.select();const r=n=>{document.body.removeChild(s),window.prompt(e,i),t()};try{return document.execCommand("copy")?(document.body.removeChild(s),t()):r("copy command unavailable")}catch{return document.body.removeChild(s),r()}})}function Hu(i){let{file:e,uploadInProgressOrComplete:t,metaFields:s,canEditFile:r,i18n:n,onClick:a}=i;return!t&&s&&s.length>0||!t&&r(e)?c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":n("editFileWithFilename",{file:e.meta.name}),title:n("editFileWithFilename",{file:e.meta.name}),onClick:()=>a()},c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},c("g",{fillRule:"evenodd"},c("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),c("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),c("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function qu(i){let{i18n:e,onClick:t,file:s}=i;return c("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:s.meta.name}),title:e("removeFile",{file:s.meta.name}),onClick:()=>t()},c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},c("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),c("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}const Vu=(i,e)=>{ju(e.file.uploadURL,e.i18n("copyLinkToClipboardFallback")).then(()=>{e.uppy.log("Link copied to clipboard."),e.uppy.info(e.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.uppy.log).then(()=>i.target.focus({preventScroll:!0}))};function Wu(i){const{i18n:e}=i;return c("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":e("copyLink"),title:e("copyLink"),onClick:t=>Vu(t,i)},c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},c("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function Gu(i){const{uppy:e,file:t,uploadInProgressOrComplete:s,canEditFile:r,metaFields:n,showLinkToFileUploadResult:a,showRemoveButton:o,i18n:l,toggleFileCard:h,openFileEditor:d}=i;return c("div",{className:"uppy-Dashboard-Item-actionWrapper"},c(Hu,{i18n:l,file:t,uploadInProgressOrComplete:s,canEditFile:r,metaFields:n,onClick:()=>{n&&n.length>0?h(!0,t.id):d(t)}}),a&&t.uploadURL?c(Wu,{file:t,uppy:e,i18n:l}):null,o?c(qu,{i18n:l,file:t,uppy:e,onClick:()=>e.removeFile(t.id,"removed-by-user")}):null)}class Xu extends Se{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!Pu(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,s=e.progress.uploadComplete&&!t&&!e.error,r=e.progress.uploadStarted||t,n=e.progress.uploadStarted&&!e.progress.uploadComplete||t,a=e.error||!1,{isGhost:o}=e;let l=(this.props.individualCancellation||!n)&&!s;s&&this.props.showRemoveButtonAfterComplete&&(l=!0);const h=ve({"uppy-Dashboard-Item":!0,"is-inprogress":n&&!this.props.recoveredState,"is-processing":t,"is-complete":s,"is-error":!!a,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":o});return c("div",{className:h,id:`uppy_${e.id}`,role:this.props.role},c("div",{className:"uppy-Dashboard-Item-preview"},c(Mu,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),c(Ru,{uppy:this.props.uppy,file:e,error:a,isUploaded:s,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),c("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},c(zu,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),c(Gu,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:l,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:r,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}}function Yu(i,e){const t=[];let s=[];return i.forEach(r=>{s.length<e?s.push(r):(t.push(s),s=[r])}),s.length&&t.push(s),t}function Ku(i){let{id:e,error:t,i18n:s,uppy:r,files:n,acquirers:a,resumableUploads:o,hideRetryButton:l,hidePauseResumeButton:h,hideCancelButton:d,showLinkToFileUploadResult:u,showRemoveButtonAfterComplete:p,isWide:f,metaFields:m,isSingleFile:v,toggleFileCard:y,handleRequestThumbnail:b,handleCancelThumbnail:w,recoveredState:_,individualCancellation:E,itemsPerRow:F,openFileEditor:g,canEditFile:P,toggleAddFilesPanel:C,containerWidth:O,containerHeight:I}=i;const G=F===1?71:200,le=lr(()=>{const V=(ce,we)=>n[we].isGhost-n[ce].isGhost,U=Object.keys(n);return _&&U.sort(V),Yu(U,F)},[n,F,_]),te=V=>c("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:V[0]},V.map(U=>c(Xu,{key:U,uppy:r,id:e,error:t,i18n:s,acquirers:a,resumableUploads:o,individualCancellation:E,hideRetryButton:l,hidePauseResumeButton:h,hideCancelButton:d,showLinkToFileUploadResult:u,showRemoveButtonAfterComplete:p,isWide:f,metaFields:m,recoveredState:_,isSingleFile:v,containerWidth:O,containerHeight:I,toggleFileCard:y,handleRequestThumbnail:b,handleCancelThumbnail:w,role:"listitem",openFileEditor:g,canEditFile:P,toggleAddFilesPanel:C,file:n[U]})));return v?c("div",{class:"uppy-Dashboard-files"},te(le[0])):c(gu,{class:"uppy-Dashboard-files",role:"list",data:le,renderRow:te,rowHeight:G})}let Na;Na=Symbol.for("uppy test: disable unused locale key warning");class Ma extends Se{constructor(){super(...arguments),this.triggerFileInputClick=()=>{this.fileInput.click()},this.triggerFolderInputClick=()=>{this.folderInput.click()},this.triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput.click()},this.triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput.click()},this.onFileInputChange=e=>{this.props.handleInputChange(e),e.target.value=null},this.renderHiddenInput=(e,t)=>c("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes,ref:t}),this.renderHiddenCameraInput=(e,t,s)=>{const n={photo:"image/*",video:"video/*"}[e];return c("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t,accept:n,ref:s})},this.renderMyDeviceAcquirer=()=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},c("div",{className:"uppy-DashboardTab-inner"},c("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},c("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"}))),c("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderPhotoCamera=()=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick},c("div",{className:"uppy-DashboardTab-inner"},c("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},c("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"}))),c("div",{className:"uppy-DashboardTab-name"},this.props.i18n("takePictureBtn")))),this.renderVideoCamera=()=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick},c("div",{className:"uppy-DashboardTab-inner"},c("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},c("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "}))),c("div",{className:"uppy-DashboardTab-name"},this.props.i18n("recordVideoBtn")))),this.renderBrowseButton=(e,t)=>{const s=this.props.acquirers.length;return c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":s===0},e)},this.renderDropPasteBrowseTagline=e=>{const t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),s=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),r=this.props.fileManagerSelectionType,n=r.charAt(0).toUpperCase()+r.slice(1);return c("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${n}`,{browseFiles:t,browseFolders:s,browse:t}):this.props.i18nArray(`dropPaste${n}`,{browseFiles:t,browseFolders:s,browse:t}))},this.renderAcquirer=e=>{var t;return c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":((t=this.props.activePickerPanel)==null?void 0:t.id)===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id)},c("div",{className:"uppy-DashboardTab-inner"},e.icon()),c("div",{className:"uppy-DashboardTab-name"},e.name)))},this.renderAcquirers=e=>{const t=[...e],s=t.splice(e.length-2,e.length);return c(qe,null,t.map(r=>this.renderAcquirer(r)),c("span",{role:"presentation",style:{"white-space":"nowrap"}},s.map(r=>this.renderAcquirer(r))))},this.renderSourcesList=(e,t)=>{const{showNativePhotoCameraButton:s,showNativeVideoCameraButton:r}=this.props;let n=[];const a="myDevice";t||n.push({key:a,elements:this.renderMyDeviceAcquirer()}),s&&n.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),r&&n.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),n.push(...e.map(u=>({key:u.id,elements:this.renderAcquirer(u)}))),n.length===1&&n[0].key===a&&(n=[]);const l=[...n],h=l.splice(n.length-2,n.length),d=u=>u.map(p=>{let{key:f,elements:m}=p;return c(qe,{key:f},m)});return c(qe,null,this.renderDropPasteBrowseTagline(n.length),c("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},d(l),c("span",{role:"presentation",style:{"white-space":"nowrap"}},d(h))))}}[Na](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:e}=this.props,t=c("span",null,c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},c("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),c("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),s=e("poweredBy",{uppy:t});return c("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},s)}render(){const{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:s}=this.props;return c("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,r=>{this.fileInput=r}),this.renderHiddenInput(!0,r=>{this.folderInput=r}),e&&this.renderHiddenCameraInput("photo",s,r=>{this.mobilePhotoFileInput=r}),t&&this.renderHiddenCameraInput("video",s,r=>{this.mobileVideoFileInput=r}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),c("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&c("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))}}const Qu=i=>c("div",{className:ve("uppy-Dashboard-AddFilesPanel",i.className),"data-uppy-panelType":"AddFiles","aria-hidden":!i.showAddFilesPanel},c("div",{className:"uppy-DashboardContent-bar"},c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},i.i18n("addingMoreFiles")),c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>i.toggleAddFilesPanel(!1)},i.i18n("back"))),c(Ma,i));function ze(i){const{tagName:e}=i.target;if(e==="INPUT"||e==="TEXTAREA"){i.stopPropagation();return}i.preventDefault(),i.stopPropagation()}function Ju(i){let{activePickerPanel:e,className:t,hideAllPanels:s,i18n:r,state:n,uppy:a}=i;return c("div",{className:ve("uppy-DashboardContent-panel",t),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:ze,onDragLeave:ze,onDrop:ze,onPaste:ze},c("div",{className:"uppy-DashboardContent-bar"},c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r("importFrom",{name:e.name})),c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:s},r("cancel"))),c("div",{className:"uppy-DashboardContent-panelBody"},a.getPlugin(e.id).render(n)))}function Zu(i){const e=i.files[i.fileCardFor],t=()=>{i.uppy.emit("file-editor:cancel",e),i.closeFileEditor()};return c("div",{className:ve("uppy-DashboardContent-panel",i.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},c("div",{className:"uppy-DashboardContent-bar"},c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},i.i18nArray("editing",{file:c("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t},i.i18n("cancel")),c("button",{className:"uppy-DashboardContent-save",type:"button",onClick:i.saveFileEditor},i.i18n("save"))),c("div",{className:"uppy-DashboardContent-panelBody"},i.editors.map(s=>i.uppy.getPlugin(s.id).render(i.state))))}const _e={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function ed(i,e,t,s){if(s===void 0&&(s={}),i)return _e.STATE_ERROR;if(e)return _e.STATE_COMPLETE;if(t)return _e.STATE_PAUSED;let r=_e.STATE_WAITING;const n=Object.keys(s);for(let a=0;a<n.length;a++){const{progress:o}=s[n[a]];if(o.uploadStarted&&!o.uploadComplete)return _e.STATE_UPLOADING;o.preprocess&&r!==_e.STATE_UPLOADING&&(r=_e.STATE_PREPROCESSING),o.postprocess&&r!==_e.STATE_UPLOADING&&r!==_e.STATE_PREPROCESSING&&(r=_e.STATE_POSTPROCESSING)}return r}function td(i){let{files:e,i18n:t,isAllComplete:s,isAllErrored:r,isAllPaused:n,inProgressNotPausedFiles:a,newFiles:o,processingFiles:l}=i;switch(ed(r,s,n,e)){case"uploading":return t("uploadingXFiles",{smart_count:a.length});case"preprocessing":case"postprocessing":return t("processingXFiles",{smart_count:l.length});case"paused":return t("uploadPaused");case"waiting":return t("xFilesSelected",{smart_count:o.length});case"complete":return t("uploadComplete");case"error":return t("error")}}function id(i){const{i18n:e,isAllComplete:t,hideCancelButton:s,maxNumberOfFiles:r,toggleAddFilesPanel:n,uppy:a}=i;let{allowNewUpload:o}=i;return o&&r&&(o=i.totalFileCount<i.maxNumberOfFiles),c("div",{className:"uppy-DashboardContent-bar"},!t&&!s?c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>a.cancelAll()},e("cancel")):c("div",null),c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},c(td,i)),o?c("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>n(!0)},c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},c("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),c("span",{className:"uppy-DashboardContent-addMoreCaption"},e("addMore"))):c("div",null))}function sd(i){const{computedMetaFields:e,requiredMetaFields:t,updateMeta:s,form:r,formState:n}=i,a={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(o=>{const l=`uppy-Dashboard-FileCard-input-${o.id}`,h=t.includes(o.id);return c("fieldset",{key:o.id,className:"uppy-Dashboard-FileCard-fieldset"},c("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:l},o.name),o.render!==void 0?o.render({value:n[o.id],onChange:d=>s(d,o.id),fieldCSSClasses:a,required:h,form:r.id},c):c("input",{className:a.text,id:l,form:r.id,type:o.type||"text",required:h,value:n[o.id],placeholder:o.placeholder,onInput:d=>s(d.target.value,o.id),"data-uppy-super-focusable":!0}))})}function rd(i){var e;const{files:t,fileCardFor:s,toggleFileCard:r,saveFileCard:n,metaFields:a,requiredMetaFields:o,openFileEditor:l,i18n:h,i18nArray:d,className:u,canEditFile:p}=i,f=()=>typeof a=="function"?a(t[s]):a,m=t[s],v=(e=f())!=null?e:[],y=p(m),b={};v.forEach(C=>{var O;b[C.id]=(O=m.meta[C.id])!=null?O:""});const[w,_]=Bi(b),E=du(C=>{C.preventDefault(),n(w,s)},[n,w,s]),F=(C,O)=>{_({...w,[O]:C})},g=()=>{r(!1)},[P]=Bi(()=>{const C=document.createElement("form");return C.setAttribute("tabindex","-1"),C.id=Js(),C});return Us(()=>(document.body.appendChild(P),P.addEventListener("submit",E),()=>{P.removeEventListener("submit",E),document.body.removeChild(P)}),[P,E]),c("div",{className:ve("uppy-Dashboard-FileCard",u),"data-uppy-panelType":"FileCard",onDragOver:ze,onDragLeave:ze,onDrop:ze,onPaste:ze},c("div",{className:"uppy-DashboardContent-bar"},c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},d("editing",{file:c("span",{className:"uppy-DashboardContent-titleFile"},m.meta?m.meta.name:m.name)})),c("button",{className:"uppy-DashboardContent-back",type:"button",form:P.id,title:h("finishEditingFile"),onClick:g},h("cancel"))),c("div",{className:"uppy-Dashboard-FileCard-inner"},c("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:hr(m.type).color}},c(Da,{file:m}),y&&c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:C=>{E(C),l(m)}},h("editImage"))),c("div",{className:"uppy-Dashboard-FileCard-info"},c(sd,{computedMetaFields:v,requiredMetaFields:o,updateMeta:F,form:P,formState:w})),c("div",{className:"uppy-Dashboard-FileCard-actions"},c("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:P.id},h("saveChanges")),c("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:g,form:P.id},h("cancel")))))}const pt="uppy-transition-slideDownUp",on=250;function Ti(i){let{children:e}=i;const[t,s]=Bi(null),[r,n]=Bi(""),a=us(),o=us(),l=us(),h=()=>{n(`${pt}-enter`),cancelAnimationFrame(l.current),clearTimeout(o.current),o.current=void 0,l.current=requestAnimationFrame(()=>{n(`${pt}-enter ${pt}-enter-active`),a.current=setTimeout(()=>{n("")},on)})},d=()=>{n(`${pt}-leave`),cancelAnimationFrame(l.current),clearTimeout(a.current),a.current=void 0,l.current=requestAnimationFrame(()=>{n(`${pt}-leave ${pt}-leave-active`),o.current=setTimeout(()=>{s(null),n("")},on)})};return Us(()=>{const u=$e(e)[0];t!==u&&(u&&!t?h():t&&!u&&!o.current&&d(),s(u))},[e,t]),Us(()=>()=>{clearTimeout(a.current),clearTimeout(o.current),cancelAnimationFrame(l.current)},[]),t?Jn(t,{className:ve(r,t.props.className)}):null}function ot(){return ot=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},ot.apply(this,arguments)}const ln=900,hn=700,fs=576,un=330;function nd(i){const e=i.totalFileCount===0,t=i.totalFileCount===1,s=i.containerWidth>fs,r=i.containerHeight>un,n=ve({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":i.disabled,"uppy-Dashboard--animateOpenClose":i.animateOpenClose,"uppy-Dashboard--isClosing":i.isClosing,"uppy-Dashboard--isDraggingOver":i.isDraggingOver,"uppy-Dashboard--modal":!i.inline,"uppy-size--md":i.containerWidth>fs,"uppy-size--lg":i.containerWidth>hn,"uppy-size--xl":i.containerWidth>ln,"uppy-size--height-md":i.containerHeight>un,"uppy-Dashboard--isAddFilesPanelVisible":i.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":i.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":i.singleFileFullScreen&&t&&r});let a=1;i.containerWidth>ln?a=5:i.containerWidth>hn?a=4:i.containerWidth>fs&&(a=3);const o=i.showSelectedFiles&&!e,l=i.recoveredState?Object.keys(i.recoveredState.files).length:null,h=i.files?Object.keys(i.files).filter(p=>i.files[p].isGhost).length:null,d=()=>h>0?i.i18n("recoveredXFiles",{smart_count:h}):i.i18n("recoveredAllFiles");return c("div",{className:n,"data-uppy-theme":i.theme,"data-uppy-num-acquirers":i.acquirers.length,"data-uppy-drag-drop-supported":!i.disableLocalFiles&&Oa(),"aria-hidden":i.inline?"false":i.isHidden,"aria-disabled":i.disabled,"aria-label":i.inline?i.i18n("dashboardTitle"):i.i18n("dashboardWindowTitle"),onPaste:i.handlePaste,onDragOver:i.handleDragOver,onDragLeave:i.handleDragLeave,onDrop:i.handleDrop},c("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:i.handleClickOutside}),c("div",{className:"uppy-Dashboard-inner","aria-modal":!i.inline&&"true",role:i.inline?void 0:"dialog",style:{width:i.inline&&i.width?i.width:"",height:i.inline&&i.height?i.height:""}},i.inline?null:c("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":i.i18n("closeModal"),title:i.i18n("closeModal"),onClick:i.closeModal},c("span",{"aria-hidden":"true"},"\xD7")),c("div",{className:"uppy-Dashboard-innerWrap"},c("div",{className:"uppy-Dashboard-dropFilesHereHint"},i.i18n("dropHint")),o&&c(id,i),l&&c("div",{className:"uppy-Dashboard-serviceMsg"},c("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},c("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},c("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),c("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),c("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),c("strong",{className:"uppy-Dashboard-serviceMsg-title"},i.i18n("sessionRestored")),c("div",{className:"uppy-Dashboard-serviceMsg-text"},d())),o?c(Ku,{id:i.id,error:i.error,i18n:i.i18n,uppy:i.uppy,files:i.files,acquirers:i.acquirers,resumableUploads:i.resumableUploads,hideRetryButton:i.hideRetryButton,hidePauseResumeButton:i.hidePauseResumeButton,hideCancelButton:i.hideCancelButton,showLinkToFileUploadResult:i.showLinkToFileUploadResult,showRemoveButtonAfterComplete:i.showRemoveButtonAfterComplete,isWide:i.isWide,metaFields:i.metaFields,toggleFileCard:i.toggleFileCard,handleRequestThumbnail:i.handleRequestThumbnail,handleCancelThumbnail:i.handleCancelThumbnail,recoveredState:i.recoveredState,individualCancellation:i.individualCancellation,openFileEditor:i.openFileEditor,canEditFile:i.canEditFile,toggleAddFilesPanel:i.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:a}):c(Ma,ot({},i,{isSizeMD:s})),c(Ti,null,i.showAddFilesPanel?c(Qu,ot({key:"AddFiles"},i,{isSizeMD:s})):null),c(Ti,null,i.fileCardFor?c(rd,ot({key:"FileCard"},i)):null),c(Ti,null,i.activePickerPanel?c(Ju,ot({key:"Picker"},i)):null),c(Ti,null,i.showFileEditor?c(Zu,ot({key:"Editor"},i)):null),c("div",{className:"uppy-Dashboard-progressindicators"},i.progressindicators.map(p=>i.uppy.getPlugin(p.id).render(i.state))))))}var ad={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function x(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var od=0;function be(i){return"__private_"+od+++"_"+i}const ld={version:"3.8.3"},ms=rn.default||rn,dn=9,hd=27;function cn(){const i={};return i.promise=new Promise((e,t)=>{i.resolve=e,i.reject=t}),i}const ud={target:"body",metaFields:[],inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:yu,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1,doneButtonHandler:null,onRequestCloseModal:null};var Ge=be("disabledNodes"),De=be("generateLargeThumbnailIfSingleFile"),zt=be("openFileEditorWhenFilesAdded"),Xe=be("attachRenderFunctionToTarget"),gs=be("isTargetSupported"),ys=be("getAcquirers"),vs=be("getProgressIndicators"),Ae=be("getEditors"),bs=be("addSpecifiedPluginsFromOptions"),ws=be("autoDiscoverPlugins"),Ye=be("addSupportedPluginIfNoTarget");class ka extends Ve{constructor(e,t){var s,r,n,a;let o;t?t.autoOpen===void 0?o=t.autoOpenFileEditor?"imageEditor":null:o=t.autoOpen:o=null,super(e,{...ud,...t,autoOpen:o}),Object.defineProperty(this,Ge,{writable:!0,value:void 0}),this.modalName=`uppy-Dashboard-${Js()}`,this.superFocus=Su(),this.ifFocusedOnUppyRecently=!1,this.removeTarget=l=>{const d=this.getPluginState().targets.filter(u=>u.id!==l.id);this.setPluginState({targets:d})},this.addTarget=l=>{const h=l.id||l.constructor.name,d=l.title||h,u=l.type;if(u!=="acquirer"&&u!=="progressindicator"&&u!=="editor"){const v="Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor";return this.uppy.log(v,"error"),null}const p={id:h,name:d,type:u},m=this.getPluginState().targets.slice();return m.push(p),this.setPluginState({targets:m}),this.el},this.hideAllPanels=()=>{var l;const h=this.getPluginState(),d={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};h.activePickerPanel===d.activePickerPanel&&h.showAddFilesPanel===d.showAddFilesPanel&&h.showFileEditor===d.showFileEditor&&h.activeOverlayType===d.activeOverlayType||(this.setPluginState(d),this.uppy.emit("dashboard:close-panel",(l=h.activePickerPanel)==null?void 0:l.id))},this.showPanel=l=>{const{targets:h}=this.getPluginState(),d=h.find(u=>u.type==="acquirer"&&u.id===l);this.setPluginState({activePickerPanel:d,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",l)},this.canEditFile=l=>{const{targets:h}=this.getPluginState();return x(this,Ae)[Ae](h).some(u=>this.uppy.getPlugin(u.id).canEditFile(l))},this.openFileEditor=l=>{const{targets:h}=this.getPluginState(),d=x(this,Ae)[Ae](h);this.setPluginState({showFileEditor:!0,fileCardFor:l.id||null,activeOverlayType:"FileEditor"}),d.forEach(u=>{this.uppy.getPlugin(u.id).selectFile(l)})},this.closeFileEditor=()=>{const{metaFields:l}=this.getPluginState();l&&l.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})},this.saveFileEditor=()=>{const{targets:l}=this.getPluginState();x(this,Ae)[Ae](l).forEach(d=>{this.uppy.getPlugin(d.id).save()}),this.closeFileEditor()},this.openModal=()=>{const{promise:l,resolve:h}=cn();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const d=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",d,!1),h()};this.el.addEventListener("animationend",d,!1)}else this.setPluginState({isHidden:!1}),h();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),l},this.closeModal=l=>{var h;const d=(h=l==null?void 0:l.manualClose)!=null?h:!0,{isHidden:u,isClosing:p}=this.getPluginState();if(u||p)return;const{promise:f,resolve:m}=cn();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const y=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",y,!1),m()};this.el.addEventListener("animationend",y,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),m();if(document.removeEventListener("keydown",this.handleKeyDownInModal),d&&this.opts.browserBackButtonClose){var v;(v=history.state)!=null&&v[this.modalName]&&history.back()}return this.uppy.emit("dashboard:modal-closed"),f},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=l=>{const{capabilities:h}=this.uppy.getState();this.uppy.setState({capabilities:{...h,darkMode:l}})},this.handleSystemDarkModeChange=l=>{const h=l.matches;this.uppy.log(`[Dashboard] Dark mode is ${h?"on":"off"}`),this.setDarkModeCapability(h)},this.toggleFileCard=(l,h)=>{const d=this.uppy.getFile(h);l?this.uppy.emit("dashboard:file-edit-start",d):this.uppy.emit("dashboard:file-edit-complete",d),this.setPluginState({fileCardFor:l?h:null,activeOverlayType:l?"FileCard":null})},this.toggleAddFilesPanel=l=>{this.setPluginState({showAddFilesPanel:l,activeOverlayType:l?"AddFiles":null})},this.addFiles=l=>{const h=l.map(d=>({source:this.id,name:d.name,type:d.type,data:d,meta:{relativePath:d.relativePath||d.webkitRelativePath||null}}));try{this.uppy.addFiles(h)}catch(d){this.uppy.log(d)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(l=>{const h=l[0],{width:d,height:u}=h.contentRect;this.setPluginState({containerWidth:d,containerHeight:u,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const l=this.getPluginState(),h=!this.opts.inline&&l.isHidden;!l.areInsidesReadyToBeVisible&&!h&&(this.uppy.log("[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=l=>{this.el.contains(l.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableInteractiveElements=l=>{var h;const d=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],u=(h=x(this,Ge)[Ge])!=null?h:ht(this.el.querySelectorAll(d)).filter(p=>!p.classList.contains("uppy-Dashboard-close"));for(const p of u)p.tagName==="A"?p.setAttribute("aria-disabled",l):p.disabled=l;l?x(this,Ge)[Ge]=u:x(this,Ge)[Ge]=null,this.dashboardIsDisabled=l},this.updateBrowserHistory=()=>{var l;(l=history.state)!=null&&l[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=l=>{var h;this.isModalOpen()&&(!l.state||!l.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(h=l.state)!=null&&h[this.modalName]&&history.back()},this.handleKeyDownInModal=l=>{l.keyCode===hd&&this.requestCloseModal(),l.keyCode===dn&&Ea(l,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=l=>{this.uppy.iteratePlugins(d=>{d.type==="acquirer"&&(d.handleRootPaste==null||d.handleRootPaste(l))});const h=ht(l.clipboardData.files);h.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(h))},this.handleInputChange=l=>{l.preventDefault();const h=ht(l.target.files);h.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(h))},this.handleDragOver=l=>{var h,d;l.preventDefault(),l.stopPropagation();const u=()=>{let v=!0;return this.uppy.iteratePlugins(y=>{y.canHandleRootDrop!=null&&y.canHandleRootDrop(l)&&(v=!0)}),v},p=()=>{const{types:v}=l.dataTransfer;return v.some(y=>y==="Files")},f=u(),m=p();if(!f&&!m||this.opts.disabled||this.opts.disableLocalFiles&&(m||!f)||!this.uppy.getState().allowNewUpload){l.dataTransfer.dropEffect="none",clearTimeout(this.removeDragOverClassTimeout);return}l.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),(h=(d=this.opts).onDragOver)==null||h.call(d,l)},this.handleDragLeave=l=>{var h,d;l.preventDefault(),l.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{this.setPluginState({isDraggingOver:!1})},50),(h=(d=this.opts).onDragLeave)==null||h.call(d,l)},this.handleDrop=async l=>{var h,d;l.preventDefault(),l.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(m=>{m.type==="acquirer"&&(m.handleRootDrop==null||m.handleRootDrop(l))});let u=!1;const p=m=>{this.uppy.log(m,"error"),u||(this.uppy.info(m.message,"error"),u=!0)};this.uppy.log("[Dashboard] Processing dropped files");const f=await _a(l.dataTransfer,{logDropError:p});f.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(f)),(h=(d=this.opts).onDrop)==null||h.call(d,l)},this.handleRequestThumbnail=l=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",l)},this.handleCancelThumbnail=l=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",l)},this.handleKeyDownInInline=l=>{l.keyCode===dn&&Fu(l,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=l=>{this.el.contains(document.activeElement)&&this.handlePaste(l)},this.handleComplete=l=>{let{failed:h}=l;this.opts.closeAfterFinish&&!(h!=null&&h.length)&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,De,{writable:!0,value:()=>{if(this.opts.disableThumbnailGenerator)return;const l=600,h=this.uppy.getFiles();if(h.length===1){const d=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);d==null||d.setOptions({thumbnailWidth:l});const u={...h[0],preview:void 0};d==null||d.requestThumbnail(u).then(()=>{d==null||d.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}}}),Object.defineProperty(this,zt,{writable:!0,value:l=>{const h=l[0],{metaFields:d}=this.getPluginState(),u=d&&d.length>0,p=this.canEditFile(h);u&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,h.id):p&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(h)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const l=Gr(this.opts.trigger);l?l.forEach(h=>h.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",x(this,Ye)[Ye]),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",x(this,De)[De]),this.uppy.on("file-removed",x(this,De)[De]),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",x(this,zt)[zt])},this.removeEvents=()=>{const l=Gr(this.opts.trigger);!this.opts.inline&&l&&l.forEach(h=>h.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",x(this,Ye)[Ye]),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",x(this,De)[De]),this.uppy.off("file-removed",x(this,De)[De]),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",x(this,zt)[zt])},this.superFocusOnEachUpdate=()=>{const l=this.el.contains(document.activeElement),h=document.activeElement===document.body||document.activeElement===null,d=this.uppy.getState().info.length===0,u=!this.opts.inline;d&&(u||l||h&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(l,h)=>{this.uppy.setFileMeta(h,l),this.toggleFileCard(!1,h)},Object.defineProperty(this,Xe,{writable:!0,value:l=>{const h=this.uppy.getPlugin(l.id);return{...l,icon:h.icon||this.opts.defaultPickerIcon,render:h.render}}}),Object.defineProperty(this,gs,{writable:!0,value:l=>{const h=this.uppy.getPlugin(l.id);return typeof h.isSupported!="function"?!0:h.isSupported()}}),Object.defineProperty(this,ys,{writable:!0,value:ms(l=>l.filter(h=>h.type==="acquirer"&&x(this,gs)[gs](h)).map(x(this,Xe)[Xe]))}),Object.defineProperty(this,vs,{writable:!0,value:ms(l=>l.filter(h=>h.type==="progressindicator").map(x(this,Xe)[Xe]))}),Object.defineProperty(this,Ae,{writable:!0,value:ms(l=>l.filter(h=>h.type==="editor").map(x(this,Xe)[Xe]))}),this.render=l=>{const h=this.getPluginState(),{files:d,capabilities:u,allowNewUpload:p}=l,{newFiles:f,uploadStartedFiles:m,completeFiles:v,erroredFiles:y,inProgressFiles:b,inProgressNotPausedFiles:w,processingFiles:_,isUploadStarted:E,isAllComplete:F,isAllErrored:g,isAllPaused:P}=this.uppy.getObjectOfFilesPerState(),C=x(this,ys)[ys](h.targets),O=x(this,vs)[vs](h.targets),I=x(this,Ae)[Ae](h.targets);let G;return this.opts.theme==="auto"?G=u.darkMode?"dark":"light":G=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),nd({state:l,isHidden:h.isHidden,files:d,newFiles:f,uploadStartedFiles:m,completeFiles:v,erroredFiles:y,inProgressFiles:b,inProgressNotPausedFiles:w,processingFiles:_,isUploadStarted:E,isAllComplete:F,isAllErrored:g,isAllPaused:P,totalFileCount:Object.keys(d).length,totalProgress:l.totalProgress,allowNewUpload:p,acquirers:C,theme:G,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:h.activePickerPanel,showFileEditor:h.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:h.isClosing,progressindicators:O,editors:I,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:l.recoveredState,metaFields:h.metaFields,resumableUploads:u.resumableUploads||!1,individualCancellation:u.individualCancellation,isMobileDevice:u.isMobileDevice,fileCardFor:h.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:h.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:h.containerWidth,containerHeight:h.containerHeight,areInsidesReadyToBeVisible:h.areInsidesReadyToBeVisible,isTargetDOMEl:this.isTargetDOMEl,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:h.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},Object.defineProperty(this,bs,{writable:!0,value:()=>{(this.opts.plugins||[]).forEach(h=>{const d=this.uppy.getPlugin(h);d?d.mount(this,d):this.uppy.log(`[Uppy] Dashboard could not find plugin '${h}', make sure to uppy.use() the plugins you are specifying`,"warning")})}}),Object.defineProperty(this,ws,{writable:!0,value:()=>{this.uppy.iteratePlugins(x(this,Ye)[Ye])}}),Object.defineProperty(this,Ye,{writable:!0,value:l=>{var h;const d=["acquirer","editor"];l&&!((h=l.opts)!=null&&h.target)&&d.includes(l.type)&&(this.getPluginState().targets.some(p=>l.id===p.id)||l.mount(this,l))}}),this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:l,closeAfterFinish:h}=this.opts;if(l&&h)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:d,allowMultipleUploadBatches:u}=this.uppy.opts;(d||u)&&h&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:p}=this.opts;p&&this.mount(p,this),this.opts.disableStatusBar||this.uppy.use(aa,{id:`${this.id}:StatusBar`,target:this,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,showProgressDetails:this.opts.showProgressDetails,hideAfterFinish:this.opts.hideProgressAfterFinish,locale:this.opts.locale,doneButtonHandler:this.opts.doneButtonHandler}),this.opts.disableInformer||this.uppy.use(la,{id:`${this.id}:Informer`,target:this}),this.opts.disableThumbnailGenerator||this.uppy.use(ya,{id:`${this.id}:ThumbnailGenerator`,thumbnailWidth:this.opts.thumbnailWidth,thumbnailHeight:this.opts.thumbnailHeight,thumbnailType:this.opts.thumbnailType,waitForThumbnailsBeforeUpload:this.opts.waitForThumbnailsBeforeUpload,lazy:!this.opts.waitForThumbnailsBeforeUpload}),this.darkModeMediaQuery=typeof window!="undefined"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const f=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;if(this.uppy.log(`[Dashboard] Dark mode is ${f?"on":"off"}`),this.setDarkModeCapability(f),this.opts.theme==="auto"){var m;(m=this.darkModeMediaQuery)==null||m.addListener(this.handleSystemDarkModeChange)}x(this,bs)[bs](),x(this,ws)[ws](),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){const d=this.uppy.getPlugin(`${this.id}:Informer`);d&&this.uppy.removePlugin(d)}if(!this.opts.disableStatusBar){const d=this.uppy.getPlugin(`${this.id}:StatusBar`);d&&this.uppy.removePlugin(d)}if(!this.opts.disableThumbnailGenerator){const d=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);d&&this.uppy.removePlugin(d)}if((this.opts.plugins||[]).forEach(d=>{const u=this.uppy.getPlugin(d);u&&u.unmount()}),this.opts.theme==="auto"){var h;(h=this.darkModeMediaQuery)==null||h.removeListener(this.handleSystemDarkModeChange)}this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=ad,(r=(s=this.opts).doneButtonHandler)!=null||(s.doneButtonHandler=()=>{this.uppy.clearUploadedFiles(),this.requestCloseModal()}),(a=(n=this.opts).onRequestCloseModal)!=null||(n.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}}ka.VERSION=ld.version;function dd(i,e){if(i===e)return!0;if(!i||!e)return!1;var t=Object.keys(i),s=Object.keys(e),r=t.length;if(s.length!==r)return!1;for(var n=0;n<r;n++){var a=t[n];if(i[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}const cd=function(){return arguments.length>0&&typeof(arguments.length<=0?void 0:arguments[0])=="function"};var pd={data(){return{plugin:{}}},props:{uppy:{required:!0},props:{type:Object},plugins:{type:Array}},mounted(){this.installPlugin()},methods:{installPlugin(){const{uppy:i}=this,e={id:"vue:Dashboard",inline:!0,plugins:this.plugins,...this.props,target:this.$refs.container};i.use(ka,e),this.plugin=i.getPlugin(e.id)},uninstallPlugin(i){i.removePlugin(this.plugin)}},beforeDestroy(){this.uninstallPlugin(this.uppy)},beforeUnmount(){this.uninstallPlugin(this.uppy)},watch:{uppy(i,e){e!==i&&(this.uninstallPlugin(e),this.installPlugin())},props(i,e){dd(i,e)||this.plugin.setOptions({...i})}},render(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];if(cd(...e)){const[s]=e;return s("div",{ref:"container"})}return to("div",{ref:"container"})}},fd={strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}};const md={version:"3.1.0"},gd={inputName:"files[]",width:"100%",height:"100%"};class ur extends Ve{constructor(e,t){super(e,{...gd,...t}),this.isDragDropSupported=Oa(),this.addFiles=s=>{const r=s.map(n=>({source:this.id,name:n.name,type:n.type,data:n,meta:{relativePath:n.relativePath||null}}));try{this.uppy.addFiles(r)}catch(n){this.uppy.log(n)}},this.onInputChange=s=>{const r=ht(s.target.files);r.length>0&&(this.uppy.log("[DragDrop] Files selected through input"),this.addFiles(r)),s.target.value=null},this.handleDragOver=s=>{var r,n;s.preventDefault(),s.stopPropagation();const{types:a}=s.dataTransfer,o=a.some(h=>h==="Files"),{allowNewUpload:l}=this.uppy.getState();if(!o||!l){s.dataTransfer.dropEffect="none",clearTimeout(this.removeDragOverClassTimeout);return}s.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),(r=(n=this.opts).onDragOver)==null||r.call(n,s)},this.handleDragLeave=s=>{var r,n;s.preventDefault(),s.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{this.setPluginState({isDraggingOver:!1})},50),(r=(n=this.opts).onDragLeave)==null||r.call(n,s)},this.handleDrop=async s=>{var r,n;s.preventDefault(),s.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1});const a=l=>{this.uppy.log(l,"error")},o=await _a(s.dataTransfer,{logDropError:a});o.length>0&&(this.uppy.log("[DragDrop] Files dropped"),this.addFiles(o)),(r=(n=this.opts).onDrop)==null||r.call(n,s)},this.type="acquirer",this.id=this.opts.id||"DragDrop",this.title="Drag & Drop",this.defaultLocale=fd,this.i18nInit()}renderHiddenFileInput(){const{restrictions:e}=this.uppy.opts;return c("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:t=>{this.fileInputRef=t},name:this.opts.inputName,multiple:e.maxNumberOfFiles!==1,accept:e.allowedFileTypes,onChange:this.onInputChange})}static renderArrowSvg(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},c("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))}renderLabel(){return c("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:c("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))}renderNote(){return c("span",{className:"uppy-DragDrop-note"},this.opts.note)}render(){const e=`uppy-u-reset
      uppy-DragDrop-container
      ${this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":""}
      ${this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":""}
    `,t={width:this.opts.width,height:this.opts.height};return c("button",{type:"button",className:e,style:t,onClick:()=>this.fileInputRef.click(),onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),c("div",{className:"uppy-DragDrop-inner"},ur.renderArrowSvg(),this.renderLabel(),this.renderNote()))}install(){const{target:e}=this.opts;this.setPluginState({isDraggingOver:!1}),e&&this.mount(e,this)}uninstall(){this.unmount()}}ur.VERSION=md.version;const yd={version:"3.1.1"},vd={target:"body",fixed:!1,hideAfterFinish:!0};class bd extends Ve{constructor(e,t){super(e,{...vd,...t}),this.id=this.opts.id||"ProgressBar",this.title="Progress Bar",this.type="progressindicator",this.render=this.render.bind(this)}render(e){const t=e.totalProgress||0,s=(t===0||t===100)&&this.opts.hideAfterFinish;return c("div",{className:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":s},c("div",{className:"uppy-ProgressBar-inner",style:{width:`${t}%`}}),c("div",{className:"uppy-ProgressBar-percentage"},t))}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}}bd.VERSION=yd.version;var wd={strings:{chooseFiles:"Choose files"}};const _d={version:"3.1.2"},Fd={pretty:!0,inputName:"files[]"};class Sd extends Ve{constructor(e,t){super(e,{...Fd,...t}),this.id=this.opts.id||"FileInput",this.title="File Input",this.type="acquirer",this.defaultLocale=wd,this.i18nInit(),this.render=this.render.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleClick=this.handleClick.bind(this)}addFiles(e){const t=e.map(s=>({source:this.id,name:s.name,type:s.type,data:s}));try{this.uppy.addFiles(t)}catch(s){this.uppy.log(s)}}handleInputChange(e){this.uppy.log("[FileInput] Something selected through input...");const t=ht(e.target.files);this.addFiles(t),e.target.value=null}handleClick(){this.input.click()}render(){const e={width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},{restrictions:t}=this.uppy.opts,s=t.allowedFileTypes?t.allowedFileTypes.join(","):void 0;return c("div",{className:"uppy-FileInput-container"},c("input",{className:"uppy-FileInput-input",style:this.opts.pretty?e:void 0,type:"file",name:this.opts.inputName,onChange:this.handleInputChange,multiple:t.maxNumberOfFiles!==1,accept:s,ref:r=>{this.input=r}}),this.opts.pretty&&c("button",{className:"uppy-FileInput-btn",type:"button",onClick:this.handleClick},this.i18n("chooseFiles")))}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}}Sd.VERSION=_d.version;/*!
 * Cropper.js v1.5.7
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2020-05-23T05:23:00.081Z
 */function Mi(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mi=function(e){return typeof e}:Mi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(i)}function Pd(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function pn(i,e){for(var t=0;t<e.length;t++){var s=e[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function Td(i,e,t){return e&&pn(i.prototype,e),t&&pn(i,t),i}function Cd(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function fn(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,s)}return t}function Ra(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fn(Object(t),!0).forEach(function(s){Cd(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):fn(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}function Ua(i){return Ed(i)||Od(i)||Dd(i)||Ad()}function Ed(i){if(Array.isArray(i))return Ls(i)}function Od(i){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(i))return Array.from(i)}function Dd(i,e){if(!!i){if(typeof i=="string")return Ls(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ls(i,e)}}function Ls(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=i[t];return s}function Ad(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Wi=typeof window!="undefined"&&typeof window.document!="undefined",Te=Wi?window:{},dr=Wi&&Te.document.documentElement?"ontouchstart"in Te.document.documentElement:!1,cr=Wi?"PointerEvent"in Te:!1,N="cropper",pr="all",Ia="crop",Ba="move",La="zoom",Ke="e",Qe="w",ft="s",Le="n",jt="ne",Ht="nw",qt="se",Vt="sw",$s="".concat(N,"-crop"),mn="".concat(N,"-disabled"),Z="".concat(N,"-hidden"),gn="".concat(N,"-hide"),xd="".concat(N,"-invisible"),Li="".concat(N,"-modal"),zs="".concat(N,"-move"),oi="".concat(N,"Action"),Ci="".concat(N,"Preview"),fr="crop",$a="move",za="none",js="crop",Hs="cropend",qs="cropmove",Vs="cropstart",yn="dblclick",Nd=dr?"touchstart":"mousedown",Md=dr?"touchmove":"mousemove",kd=dr?"touchend touchcancel":"mouseup",vn=cr?"pointerdown":Nd,bn=cr?"pointermove":Md,wn=cr?"pointerup pointercancel":kd,_n="ready",Fn="resize",Sn="wheel",Ws="zoom",Pn="image/jpeg",Rd=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Ud=/^data:/,Id=/^data:image\/jpeg;base64,/,Bd=/^img|canvas$/i,Tn={viewMode:0,dragMode:fr,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ld='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',$d=Number.isNaN||Te.isNaN;function D(i){return typeof i=="number"&&!$d(i)}var Cn=function(e){return e>0&&e<1/0};function _s(i){return typeof i=="undefined"}function ct(i){return Mi(i)==="object"&&i!==null}var zd=Object.prototype.hasOwnProperty;function wt(i){if(!ct(i))return!1;try{var e=i.constructor,t=e.prototype;return e&&t&&zd.call(t,"isPrototypeOf")}catch{return!1}}function J(i){return typeof i=="function"}var jd=Array.prototype.slice;function ja(i){return Array.from?Array.from(i):jd.call(i)}function j(i,e){return i&&J(e)&&(Array.isArray(i)||D(i.length)?ja(i).forEach(function(t,s){e.call(i,t,s,i)}):ct(i)&&Object.keys(i).forEach(function(t){e.call(i,i[t],t,i)})),i}var M=Object.assign||function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return ct(e)&&s.length>0&&s.forEach(function(n){ct(n)&&Object.keys(n).forEach(function(a){e[a]=n[a]})}),e},Hd=/\.\d*(?:0|9){12}\d*$/;function St(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Hd.test(i)?Math.round(i*e)/e:i}var qd=/^width|height|left|top|marginLeft|marginTop$/;function je(i,e){var t=i.style;j(e,function(s,r){qd.test(r)&&D(s)&&(s="".concat(s,"px")),t[r]=s})}function Vd(i,e){return i.classList?i.classList.contains(e):i.className.indexOf(e)>-1}function H(i,e){if(!!e){if(D(i.length)){j(i,function(s){H(s,e)});return}if(i.classList){i.classList.add(e);return}var t=i.className.trim();t?t.indexOf(e)<0&&(i.className="".concat(t," ").concat(e)):i.className=e}}function Pe(i,e){if(!!e){if(D(i.length)){j(i,function(t){Pe(t,e)});return}if(i.classList){i.classList.remove(e);return}i.className.indexOf(e)>=0&&(i.className=i.className.replace(e,""))}}function _t(i,e,t){if(!!e){if(D(i.length)){j(i,function(s){_t(s,e,t)});return}t?H(i,e):Pe(i,e)}}var Wd=/([a-z\d])([A-Z])/g;function mr(i){return i.replace(Wd,"$1-$2").toLowerCase()}function Gs(i,e){return ct(i[e])?i[e]:i.dataset?i.dataset[e]:i.getAttribute("data-".concat(mr(e)))}function li(i,e,t){ct(t)?i[e]=t:i.dataset?i.dataset[e]=t:i.setAttribute("data-".concat(mr(e)),t)}function Gd(i,e){if(ct(i[e]))try{delete i[e]}catch{i[e]=void 0}else if(i.dataset)try{delete i.dataset[e]}catch{i.dataset[e]=void 0}else i.removeAttribute("data-".concat(mr(e)))}var Ha=/\s\s*/,qa=function(){var i=!1;if(Wi){var e=!1,t=function(){},s=Object.defineProperty({},"once",{get:function(){return i=!0,e},set:function(n){e=n}});Te.addEventListener("test",t,s),Te.removeEventListener("test",t,s)}return i}();function pe(i,e,t){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;e.trim().split(Ha).forEach(function(n){if(!qa){var a=i.listeners;a&&a[n]&&a[n][t]&&(r=a[n][t],delete a[n][t],Object.keys(a[n]).length===0&&delete a[n],Object.keys(a).length===0&&delete i.listeners)}i.removeEventListener(n,r,s)})}function ue(i,e,t){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;e.trim().split(Ha).forEach(function(n){if(s.once&&!qa){var a=i.listeners,o=a===void 0?{}:a;r=function(){delete o[n][t],i.removeEventListener(n,r,s);for(var h=arguments.length,d=new Array(h),u=0;u<h;u++)d[u]=arguments[u];t.apply(i,d)},o[n]||(o[n]={}),o[n][t]&&i.removeEventListener(n,o[n][t],s),o[n][t]=r,i.listeners=o}i.addEventListener(n,r,s)})}function Pt(i,e,t){var s;return J(Event)&&J(CustomEvent)?s=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent"),s.initCustomEvent(e,!0,!0,t)),i.dispatchEvent(s)}function Va(i){var e=i.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Fs=Te.location,Xd=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function En(i){var e=i.match(Xd);return e!==null&&(e[1]!==Fs.protocol||e[2]!==Fs.hostname||e[3]!==Fs.port)}function On(i){var e="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+e}function Jt(i){var e=i.rotate,t=i.scaleX,s=i.scaleY,r=i.translateX,n=i.translateY,a=[];D(r)&&r!==0&&a.push("translateX(".concat(r,"px)")),D(n)&&n!==0&&a.push("translateY(".concat(n,"px)")),D(e)&&e!==0&&a.push("rotate(".concat(e,"deg)")),D(t)&&t!==1&&a.push("scaleX(".concat(t,")")),D(s)&&s!==1&&a.push("scaleY(".concat(s,")"));var o=a.length?a.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function Yd(i){var e=Ra({},i),t=[];return j(i,function(s,r){delete e[r],j(e,function(n){var a=Math.abs(s.startX-n.startX),o=Math.abs(s.startY-n.startY),l=Math.abs(s.endX-n.endX),h=Math.abs(s.endY-n.endY),d=Math.sqrt(a*a+o*o),u=Math.sqrt(l*l+h*h),p=(u-d)/d;t.push(p)})}),t.sort(function(s,r){return Math.abs(s)<Math.abs(r)}),t[0]}function Ei(i,e){var t=i.pageX,s=i.pageY,r={endX:t,endY:s};return e?r:Ra({startX:t,startY:s},r)}function Kd(i){var e=0,t=0,s=0;return j(i,function(r){var n=r.startX,a=r.startY;e+=n,t+=a,s+=1}),e/=s,t/=s,{pageX:e,pageY:t}}function He(i){var e=i.aspectRatio,t=i.height,s=i.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",n=Cn(s),a=Cn(t);if(n&&a){var o=t*e;r==="contain"&&o>s||r==="cover"&&o<s?t=s/e:s=t*e}else n?t=s/e:a&&(s=t*e);return{width:s,height:t}}function Qd(i){var e=i.width,t=i.height,s=i.degree;if(s=Math.abs(s)%180,s===90)return{width:t,height:e};var r=s%90*Math.PI/180,n=Math.sin(r),a=Math.cos(r),o=e*a+t*n,l=e*n+t*a;return s>90?{width:l,height:o}:{width:o,height:l}}function Jd(i,e,t,s){var r=e.aspectRatio,n=e.naturalWidth,a=e.naturalHeight,o=e.rotate,l=o===void 0?0:o,h=e.scaleX,d=h===void 0?1:h,u=e.scaleY,p=u===void 0?1:u,f=t.aspectRatio,m=t.naturalWidth,v=t.naturalHeight,y=s.fillColor,b=y===void 0?"transparent":y,w=s.imageSmoothingEnabled,_=w===void 0?!0:w,E=s.imageSmoothingQuality,F=E===void 0?"low":E,g=s.maxWidth,P=g===void 0?1/0:g,C=s.maxHeight,O=C===void 0?1/0:C,I=s.minWidth,G=I===void 0?0:I,le=s.minHeight,te=le===void 0?0:le,V=document.createElement("canvas"),U=V.getContext("2d"),ce=He({aspectRatio:f,width:P,height:O}),we=He({aspectRatio:f,width:G,height:te},"cover"),Ot=Math.min(ce.width,Math.max(we.width,m)),We=Math.min(ce.height,Math.max(we.height,v)),pi=He({aspectRatio:r,width:P,height:O}),fi=He({aspectRatio:r,width:G,height:te},"cover"),mi=Math.min(pi.width,Math.max(fi.width,n)),gi=Math.min(pi.height,Math.max(fi.height,a)),Xi=[-mi/2,-gi/2,mi,gi];return V.width=St(Ot),V.height=St(We),U.fillStyle=b,U.fillRect(0,0,Ot,We),U.save(),U.translate(Ot/2,We/2),U.rotate(l*Math.PI/180),U.scale(d,p),U.imageSmoothingEnabled=_,U.imageSmoothingQuality=F,U.drawImage.apply(U,[i].concat(Ua(Xi.map(function(Yi){return Math.floor(St(Yi))})))),U.restore(),V}var Wa=String.fromCharCode;function Zd(i,e,t){var s="";t+=e;for(var r=e;r<t;r+=1)s+=Wa(i.getUint8(r));return s}var ec=/^data:.*,/;function tc(i){var e=i.replace(ec,""),t=atob(e),s=new ArrayBuffer(t.length),r=new Uint8Array(s);return j(r,function(n,a){r[a]=t.charCodeAt(a)}),s}function ic(i,e){for(var t=[],s=8192,r=new Uint8Array(i);r.length>0;)t.push(Wa.apply(null,ja(r.subarray(0,s)))),r=r.subarray(s);return"data:".concat(e,";base64,").concat(btoa(t.join("")))}function sc(i){var e=new DataView(i),t;try{var s,r,n;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var a=e.byteLength,o=2;o+1<a;){if(e.getUint8(o)===255&&e.getUint8(o+1)===225){r=o;break}o+=1}if(r){var l=r+4,h=r+10;if(Zd(e,l,4)==="Exif"){var d=e.getUint16(h);if(s=d===18761,(s||d===19789)&&e.getUint16(h+2,s)===42){var u=e.getUint32(h+4,s);u>=8&&(n=h+u)}}}if(n){var p=e.getUint16(n,s),f,m;for(m=0;m<p;m+=1)if(f=n+m*12+2,e.getUint16(f,s)===274){f+=8,t=e.getUint16(f,s),e.setUint16(f,1,s);break}}}catch{t=1}return t}function rc(i){var e=0,t=1,s=1;switch(i){case 2:t=-1;break;case 3:e=-180;break;case 4:s=-1;break;case 5:e=90,s=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:s}}var nc={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,s=this.container,r=this.cropper;H(r,Z),Pe(e,Z);var n={width:Math.max(s.offsetWidth,Number(t.minContainerWidth)||200),height:Math.max(s.offsetHeight,Number(t.minContainerHeight)||100)};this.containerData=n,je(r,{width:n.width,height:n.height}),H(e,Z),Pe(r,Z)},initCanvas:function(){var e=this.containerData,t=this.imageData,s=this.options.viewMode,r=Math.abs(t.rotate)%180===90,n=r?t.naturalHeight:t.naturalWidth,a=r?t.naturalWidth:t.naturalHeight,o=n/a,l=e.width,h=e.height;e.height*o>e.width?s===3?l=e.height*o:h=e.width/o:s===3?h=e.width/o:l=e.height*o;var d={aspectRatio:o,naturalWidth:n,naturalHeight:a,width:l,height:h};d.left=(e.width-l)/2,d.top=(e.height-h)/2,d.oldLeft=d.left,d.oldTop=d.top,this.canvasData=d,this.limited=s===1||s===2,this.limitCanvas(!0,!0),this.initialImageData=M({},t),this.initialCanvasData=M({},d)},limitCanvas:function(e,t){var s=this.options,r=this.containerData,n=this.canvasData,a=this.cropBoxData,o=s.viewMode,l=n.aspectRatio,h=this.cropped&&a;if(e){var d=Number(s.minCanvasWidth)||0,u=Number(s.minCanvasHeight)||0;o>1?(d=Math.max(d,r.width),u=Math.max(u,r.height),o===3&&(u*l>d?d=u*l:u=d/l)):o>0&&(d?d=Math.max(d,h?a.width:0):u?u=Math.max(u,h?a.height:0):h&&(d=a.width,u=a.height,u*l>d?d=u*l:u=d/l));var p=He({aspectRatio:l,width:d,height:u});d=p.width,u=p.height,n.minWidth=d,n.minHeight=u,n.maxWidth=1/0,n.maxHeight=1/0}if(t)if(o>(h?0:1)){var f=r.width-n.width,m=r.height-n.height;n.minLeft=Math.min(0,f),n.minTop=Math.min(0,m),n.maxLeft=Math.max(0,f),n.maxTop=Math.max(0,m),h&&this.limited&&(n.minLeft=Math.min(a.left,a.left+(a.width-n.width)),n.minTop=Math.min(a.top,a.top+(a.height-n.height)),n.maxLeft=a.left,n.maxTop=a.top,o===2&&(n.width>=r.width&&(n.minLeft=Math.min(0,f),n.maxLeft=Math.max(0,f)),n.height>=r.height&&(n.minTop=Math.min(0,m),n.maxTop=Math.max(0,m))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=r.width,n.maxTop=r.height},renderCanvas:function(e,t){var s=this.canvasData,r=this.imageData;if(t){var n=Qd({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),a=n.width,o=n.height,l=s.width*(a/s.naturalWidth),h=s.height*(o/s.naturalHeight);s.left-=(l-s.width)/2,s.top-=(h-s.height)/2,s.width=l,s.height=h,s.aspectRatio=a/o,s.naturalWidth=a,s.naturalHeight=o,this.limitCanvas(!0,!1)}(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCanvas(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,je(this.canvas,M({width:s.width,height:s.height},Jt({translateX:s.left,translateY:s.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,s=this.imageData,r=s.naturalWidth*(t.width/t.naturalWidth),n=s.naturalHeight*(t.height/t.naturalHeight);M(s,{width:r,height:n,left:(t.width-r)/2,top:(t.height-n)/2}),je(this.image,M({width:s.width,height:s.height},Jt(M({translateX:s.left,translateY:s.top},s)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,s=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,n={width:t.width,height:t.height};s&&(t.height*s>t.width?n.height=n.width/s:n.width=n.height*s),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*r),n.height=Math.max(n.minHeight,n.height*r),n.left=t.left+(t.width-n.width)/2,n.top=t.top+(t.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=M({},n)},limitCropBox:function(e,t){var s=this.options,r=this.containerData,n=this.canvasData,a=this.cropBoxData,o=this.limited,l=s.aspectRatio;if(e){var h=Number(s.minCropBoxWidth)||0,d=Number(s.minCropBoxHeight)||0,u=o?Math.min(r.width,n.width,n.width+n.left,r.width-n.left):r.width,p=o?Math.min(r.height,n.height,n.height+n.top,r.height-n.top):r.height;h=Math.min(h,r.width),d=Math.min(d,r.height),l&&(h&&d?d*l>h?d=h/l:h=d*l:h?d=h/l:d&&(h=d*l),p*l>u?p=u/l:u=p*l),a.minWidth=Math.min(h,u),a.minHeight=Math.min(d,p),a.maxWidth=u,a.maxHeight=p}t&&(o?(a.minLeft=Math.max(0,n.left),a.minTop=Math.max(0,n.top),a.maxLeft=Math.min(r.width,n.left+n.width)-a.width,a.maxTop=Math.min(r.height,n.top+n.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=r.width-a.width,a.maxTop=r.height-a.height))},renderCropBox:function(){var e=this.options,t=this.containerData,s=this.cropBoxData;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,e.movable&&e.cropBoxMovable&&li(this.face,oi,s.width>=t.width&&s.height>=t.height?Ba:pr),je(this.cropBox,M({width:s.width,height:s.height},Jt({translateX:s.left,translateY:s.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Pt(this.element,js,this.getData())}},ac={initPreview:function(){var e=this.element,t=this.crossOrigin,s=this.options.preview,r=t?this.crossOriginUrl:this.url,n=e.alt||"The image to preview",a=document.createElement("img");if(t&&(a.crossOrigin=t),a.src=r,a.alt=n,this.viewBox.appendChild(a),this.viewBoxImage=a,!!s){var o=s;typeof s=="string"?o=e.ownerDocument.querySelectorAll(s):s.querySelector&&(o=[s]),this.previews=o,j(o,function(l){var h=document.createElement("img");li(l,Ci,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),t&&(h.crossOrigin=t),h.src=r,h.alt=n,h.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(h)})}},resetPreview:function(){j(this.previews,function(e){var t=Gs(e,Ci);je(e,{width:t.width,height:t.height}),e.innerHTML=t.html,Gd(e,Ci)})},preview:function(){var e=this.imageData,t=this.canvasData,s=this.cropBoxData,r=s.width,n=s.height,a=e.width,o=e.height,l=s.left-t.left-e.left,h=s.top-t.top-e.top;!this.cropped||this.disabled||(je(this.viewBoxImage,M({width:a,height:o},Jt(M({translateX:-l,translateY:-h},e)))),j(this.previews,function(d){var u=Gs(d,Ci),p=u.width,f=u.height,m=p,v=f,y=1;r&&(y=p/r,v=n*y),n&&v>f&&(y=f/n,m=r*y,v=f),je(d,{width:m,height:v}),je(d.getElementsByTagName("img")[0],M({width:a*y,height:o*y},Jt(M({translateX:-l*y,translateY:-h*y},e))))}))}},oc={bind:function(){var e=this.element,t=this.options,s=this.cropper;J(t.cropstart)&&ue(e,Vs,t.cropstart),J(t.cropmove)&&ue(e,qs,t.cropmove),J(t.cropend)&&ue(e,Hs,t.cropend),J(t.crop)&&ue(e,js,t.crop),J(t.zoom)&&ue(e,Ws,t.zoom),ue(s,vn,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&ue(s,Sn,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&ue(s,yn,this.onDblclick=this.dblclick.bind(this)),ue(e.ownerDocument,bn,this.onCropMove=this.cropMove.bind(this)),ue(e.ownerDocument,wn,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&ue(window,Fn,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,s=this.cropper;J(t.cropstart)&&pe(e,Vs,t.cropstart),J(t.cropmove)&&pe(e,qs,t.cropmove),J(t.cropend)&&pe(e,Hs,t.cropend),J(t.crop)&&pe(e,js,t.crop),J(t.zoom)&&pe(e,Ws,t.zoom),pe(s,vn,this.onCropStart),t.zoomable&&t.zoomOnWheel&&pe(s,Sn,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&pe(s,yn,this.onDblclick),pe(e.ownerDocument,bn,this.onCropMove),pe(e.ownerDocument,wn,this.onCropEnd),t.responsive&&pe(window,Fn,this.onResize)}},lc={resize:function(){if(!this.disabled){var e=this.options,t=this.container,s=this.containerData,r=t.offsetWidth/s.width;if(r!==1||t.offsetHeight!==s.height){var n,a;e.restore&&(n=this.getCanvasData(),a=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(j(n,function(o,l){n[l]=o*r})),this.setCropBoxData(j(a,function(o,l){a[l]=o*r})))}}},dblclick:function(){this.disabled||this.options.dragMode===za||this.setDragMode(Vd(this.dragBox,$s)?$a:fr)},wheel:function(e){var t=this,s=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*s,e)))},cropStart:function(e){var t=e.buttons,s=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(D(t)&&t!==1||D(s)&&s!==0||e.ctrlKey))){var r=this.options,n=this.pointers,a;e.changedTouches?j(e.changedTouches,function(o){n[o.identifier]=Ei(o)}):n[e.pointerId||0]=Ei(e),Object.keys(n).length>1&&r.zoomable&&r.zoomOnTouch?a=La:a=Gs(e.target,oi),!!Rd.test(a)&&Pt(this.element,Vs,{originalEvent:e,action:a})!==!1&&(e.preventDefault(),this.action=a,this.cropping=!1,a===Ia&&(this.cropping=!0,H(this.dragBox,Li)))}},cropMove:function(e){var t=this.action;if(!(this.disabled||!t)){var s=this.pointers;e.preventDefault(),Pt(this.element,qs,{originalEvent:e,action:t})!==!1&&(e.changedTouches?j(e.changedTouches,function(r){M(s[r.identifier]||{},Ei(r,!0))}):M(s[e.pointerId||0]||{},Ei(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,s=this.pointers;e.changedTouches?j(e.changedTouches,function(r){delete s[r.identifier]}):delete s[e.pointerId||0],t&&(e.preventDefault(),Object.keys(s).length||(this.action=""),this.cropping&&(this.cropping=!1,_t(this.dragBox,Li,this.cropped&&this.options.modal)),Pt(this.element,Hs,{originalEvent:e,action:t}))}}},hc={change:function(e){var t=this.options,s=this.canvasData,r=this.containerData,n=this.cropBoxData,a=this.pointers,o=this.action,l=t.aspectRatio,h=n.left,d=n.top,u=n.width,p=n.height,f=h+u,m=d+p,v=0,y=0,b=r.width,w=r.height,_=!0,E;!l&&e.shiftKey&&(l=u&&p?u/p:1),this.limited&&(v=n.minLeft,y=n.minTop,b=v+Math.min(r.width,s.width,s.left+s.width),w=y+Math.min(r.height,s.height,s.top+s.height));var F=a[Object.keys(a)[0]],g={x:F.endX-F.startX,y:F.endY-F.startY},P=function(O){switch(O){case Ke:f+g.x>b&&(g.x=b-f);break;case Qe:h+g.x<v&&(g.x=v-h);break;case Le:d+g.y<y&&(g.y=y-d);break;case ft:m+g.y>w&&(g.y=w-m);break}};switch(o){case pr:h+=g.x,d+=g.y;break;case Ke:if(g.x>=0&&(f>=b||l&&(d<=y||m>=w))){_=!1;break}P(Ke),u+=g.x,u<0&&(o=Qe,u=-u,h-=u),l&&(p=u/l,d+=(n.height-p)/2);break;case Le:if(g.y<=0&&(d<=y||l&&(h<=v||f>=b))){_=!1;break}P(Le),p-=g.y,d+=g.y,p<0&&(o=ft,p=-p,d-=p),l&&(u=p*l,h+=(n.width-u)/2);break;case Qe:if(g.x<=0&&(h<=v||l&&(d<=y||m>=w))){_=!1;break}P(Qe),u-=g.x,h+=g.x,u<0&&(o=Ke,u=-u,h-=u),l&&(p=u/l,d+=(n.height-p)/2);break;case ft:if(g.y>=0&&(m>=w||l&&(h<=v||f>=b))){_=!1;break}P(ft),p+=g.y,p<0&&(o=Le,p=-p,d-=p),l&&(u=p*l,h+=(n.width-u)/2);break;case jt:if(l){if(g.y<=0&&(d<=y||f>=b)){_=!1;break}P(Le),p-=g.y,d+=g.y,u=p*l}else P(Le),P(Ke),g.x>=0?f<b?u+=g.x:g.y<=0&&d<=y&&(_=!1):u+=g.x,g.y<=0?d>y&&(p-=g.y,d+=g.y):(p-=g.y,d+=g.y);u<0&&p<0?(o=Vt,p=-p,u=-u,d-=p,h-=u):u<0?(o=Ht,u=-u,h-=u):p<0&&(o=qt,p=-p,d-=p);break;case Ht:if(l){if(g.y<=0&&(d<=y||h<=v)){_=!1;break}P(Le),p-=g.y,d+=g.y,u=p*l,h+=n.width-u}else P(Le),P(Qe),g.x<=0?h>v?(u-=g.x,h+=g.x):g.y<=0&&d<=y&&(_=!1):(u-=g.x,h+=g.x),g.y<=0?d>y&&(p-=g.y,d+=g.y):(p-=g.y,d+=g.y);u<0&&p<0?(o=qt,p=-p,u=-u,d-=p,h-=u):u<0?(o=jt,u=-u,h-=u):p<0&&(o=Vt,p=-p,d-=p);break;case Vt:if(l){if(g.x<=0&&(h<=v||m>=w)){_=!1;break}P(Qe),u-=g.x,h+=g.x,p=u/l}else P(ft),P(Qe),g.x<=0?h>v?(u-=g.x,h+=g.x):g.y>=0&&m>=w&&(_=!1):(u-=g.x,h+=g.x),g.y>=0?m<w&&(p+=g.y):p+=g.y;u<0&&p<0?(o=jt,p=-p,u=-u,d-=p,h-=u):u<0?(o=qt,u=-u,h-=u):p<0&&(o=Ht,p=-p,d-=p);break;case qt:if(l){if(g.x>=0&&(f>=b||m>=w)){_=!1;break}P(Ke),u+=g.x,p=u/l}else P(ft),P(Ke),g.x>=0?f<b?u+=g.x:g.y>=0&&m>=w&&(_=!1):u+=g.x,g.y>=0?m<w&&(p+=g.y):p+=g.y;u<0&&p<0?(o=Ht,p=-p,u=-u,d-=p,h-=u):u<0?(o=Vt,u=-u,h-=u):p<0&&(o=jt,p=-p,d-=p);break;case Ba:this.move(g.x,g.y),_=!1;break;case La:this.zoom(Yd(a),e),_=!1;break;case Ia:if(!g.x||!g.y){_=!1;break}E=Va(this.cropper),h=F.startX-E.left,d=F.startY-E.top,u=n.minWidth,p=n.minHeight,g.x>0?o=g.y>0?qt:jt:g.x<0&&(h-=u,o=g.y>0?Vt:Ht),g.y<0&&(d-=p),this.cropped||(Pe(this.cropBox,Z),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}_&&(n.width=u,n.height=p,n.left=h,n.top=d,this.action=o,this.renderCropBox()),j(a,function(C){C.startX=C.endX,C.startY=C.endY})}},uc={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&H(this.dragBox,Li),Pe(this.cropBox,Z),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=M({},this.initialImageData),this.canvasData=M({},this.initialCanvasData),this.cropBoxData=M({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(M(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Pe(this.dragBox,Li),H(this.cropBox,Z)),this},replace:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,j(this.previews,function(s){s.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Pe(this.cropper,mn)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,H(this.cropper,mn)),this},destroy:function(){var e=this.element;return e[N]?(e[N]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=this.canvasData,r=s.left,n=s.top;return this.moveTo(_s(e)?e:r+Number(e),_s(t)?t:n+Number(t))},moveTo:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(D(e)&&(s.left=e,r=!0),D(t)&&(s.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var s=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(s.width*e/s.naturalWidth,null,t)},zoomTo:function(e,t,s){var r=this.options,n=this.canvasData,a=n.width,o=n.height,l=n.naturalWidth,h=n.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var d=l*e,u=h*e;if(Pt(this.element,Ws,{ratio:e,oldRatio:a/l,originalEvent:s})===!1)return this;if(s){var p=this.pointers,f=Va(this.cropper),m=p&&Object.keys(p).length?Kd(p):{pageX:s.pageX,pageY:s.pageY};n.left-=(d-a)*((m.pageX-f.left-n.left)/a),n.top-=(u-o)*((m.pageY-f.top-n.top)/o)}else wt(t)&&D(t.x)&&D(t.y)?(n.left-=(d-a)*((t.x-n.left)/a),n.top-=(u-o)*((t.y-n.top)/o)):(n.left-=(d-a)/2,n.top-=(u-o)/2);n.width=d,n.height=u,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),D(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,D(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(D(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(D(e)&&(s.scaleX=e,r=!0),D(t)&&(s.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,s=this.imageData,r=this.canvasData,n=this.cropBoxData,a;if(this.ready&&this.cropped){a={x:n.left-r.left,y:n.top-r.top,width:n.width,height:n.height};var o=s.width/s.naturalWidth;if(j(a,function(d,u){a[u]=d/o}),e){var l=Math.round(a.y+a.height),h=Math.round(a.x+a.width);a.x=Math.round(a.x),a.y=Math.round(a.y),a.width=h-a.x,a.height=l-a.y}}else a={x:0,y:0,width:0,height:0};return t.rotatable&&(a.rotate=s.rotate||0),t.scalable&&(a.scaleX=s.scaleX||1,a.scaleY=s.scaleY||1),a},setData:function(e){var t=this.options,s=this.imageData,r=this.canvasData,n={};if(this.ready&&!this.disabled&&wt(e)){var a=!1;t.rotatable&&D(e.rotate)&&e.rotate!==s.rotate&&(s.rotate=e.rotate,a=!0),t.scalable&&(D(e.scaleX)&&e.scaleX!==s.scaleX&&(s.scaleX=e.scaleX,a=!0),D(e.scaleY)&&e.scaleY!==s.scaleY&&(s.scaleY=e.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var o=s.width/s.naturalWidth;D(e.x)&&(n.left=e.x*o+r.left),D(e.y)&&(n.top=e.y*o+r.top),D(e.width)&&(n.width=e.width*o),D(e.height)&&(n.height=e.height*o),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?M({},this.containerData):{}},getImageData:function(){return this.sized?M({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&j(["left","top","width","height","naturalWidth","naturalHeight"],function(s){t[s]=e[s]}),t},setCanvasData:function(e){var t=this.canvasData,s=t.aspectRatio;return this.ready&&!this.disabled&&wt(e)&&(D(e.left)&&(t.left=e.left),D(e.top)&&(t.top=e.top),D(e.width)?(t.width=e.width,t.height=e.width/s):D(e.height)&&(t.height=e.height,t.width=e.height*s),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(e){var t=this.cropBoxData,s=this.options.aspectRatio,r,n;return this.ready&&this.cropped&&!this.disabled&&wt(e)&&(D(e.left)&&(t.left=e.left),D(e.top)&&(t.top=e.top),D(e.width)&&e.width!==t.width&&(r=!0,t.width=e.width),D(e.height)&&e.height!==t.height&&(n=!0,t.height=e.height),s&&(r?t.height=t.width/s:n&&(t.width=t.height*s)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,s=Jd(this.image,this.imageData,t,e);if(!this.cropped)return s;var r=this.getData(),n=r.x,a=r.y,o=r.width,l=r.height,h=s.width/Math.floor(t.naturalWidth);h!==1&&(n*=h,a*=h,o*=h,l*=h);var d=o/l,u=He({aspectRatio:d,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),p=He({aspectRatio:d,width:e.minWidth||0,height:e.minHeight||0},"cover"),f=He({aspectRatio:d,width:e.width||(h!==1?s.width:o),height:e.height||(h!==1?s.height:l)}),m=f.width,v=f.height;m=Math.min(u.width,Math.max(p.width,m)),v=Math.min(u.height,Math.max(p.height,v));var y=document.createElement("canvas"),b=y.getContext("2d");y.width=St(m),y.height=St(v),b.fillStyle=e.fillColor||"transparent",b.fillRect(0,0,m,v);var w=e.imageSmoothingEnabled,_=w===void 0?!0:w,E=e.imageSmoothingQuality;b.imageSmoothingEnabled=_,E&&(b.imageSmoothingQuality=E);var F=s.width,g=s.height,P=n,C=a,O,I,G,le,te,V;P<=-o||P>F?(P=0,O=0,G=0,te=0):P<=0?(G=-P,P=0,O=Math.min(F,o+P),te=O):P<=F&&(G=0,O=Math.min(o,F-P),te=O),O<=0||C<=-l||C>g?(C=0,I=0,le=0,V=0):C<=0?(le=-C,C=0,I=Math.min(g,l+C),V=I):C<=g&&(le=0,I=Math.min(l,g-C),V=I);var U=[P,C,O,I];if(te>0&&V>0){var ce=m/o;U.push(G*ce,le*ce,te*ce,V*ce)}return b.drawImage.apply(b,[s].concat(Ua(U.map(function(we){return Math.floor(St(we))})))),y},setAspectRatio:function(e){var t=this.options;return!this.disabled&&!_s(e)&&(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,s=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var n=e===fr,a=t.movable&&e===$a;e=n||a?e:za,t.dragMode=e,li(s,oi,e),_t(s,$s,n),_t(s,zs,a),t.cropBoxMovable||(li(r,oi,e),_t(r,$s,n),_t(r,zs,a))}return this}},dc=Te.Cropper,Ga=function(){function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Pd(this,i),!e||!Bd.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=M({},Tn,wt(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Td(i,[{key:"init",value:function(){var t=this.element,s=t.tagName.toLowerCase(),r;if(!t[N]){if(t[N]=this,s==="img"){if(this.isImg=!0,r=t.getAttribute("src")||"",this.originalUrl=r,!r)return;r=t.src}else s==="canvas"&&window.HTMLCanvasElement&&(r=t.toDataURL());this.load(r)}}},{key:"load",value:function(t){var s=this;if(!!t){this.url=t,this.imageData={};var r=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Ud.test(t)){Id.test(t)?this.read(tc(t)):this.clone();return}var a=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=o,a.onerror=o,a.ontimeout=o,a.onprogress=function(){a.getResponseHeader("content-type")!==Pn&&a.abort()},a.onload=function(){s.read(a.response)},a.onloadend=function(){s.reloading=!1,s.xhr=null},n.checkCrossOrigin&&En(t)&&r.crossOrigin&&(t=On(t)),a.open("GET",t),a.responseType="arraybuffer",a.withCredentials=r.crossOrigin==="use-credentials",a.send()}}},{key:"read",value:function(t){var s=this.options,r=this.imageData,n=sc(t),a=0,o=1,l=1;if(n>1){this.url=ic(t,Pn);var h=rc(n);a=h.rotate,o=h.scaleX,l=h.scaleY}s.rotatable&&(r.rotate=a),s.scalable&&(r.scaleX=o,r.scaleY=l),this.clone()}},{key:"clone",value:function(){var t=this.element,s=this.url,r=t.crossOrigin,n=s;this.options.checkCrossOrigin&&En(s)&&(r||(r="anonymous"),n=On(s)),this.crossOrigin=r,this.crossOriginUrl=n;var a=document.createElement("img");r&&(a.crossOrigin=r),a.src=n||s,a.alt=t.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),H(a,gn),t.parentNode.insertBefore(a,t.nextSibling)}},{key:"start",value:function(){var t=this,s=this.image;s.onload=null,s.onerror=null,this.sizing=!0;var r=Te.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Te.navigator.userAgent),n=function(h,d){M(t.imageData,{naturalWidth:h,naturalHeight:d,aspectRatio:h/d}),t.sizing=!1,t.sized=!0,t.build()};if(s.naturalWidth&&!r){n(s.naturalWidth,s.naturalHeight);return}var a=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){n(a.width,a.height),r||o.removeChild(a)},a.src=s.src,r||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(a))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,s=this.options,r=this.image,n=t.parentNode,a=document.createElement("div");a.innerHTML=Ld;var o=a.querySelector(".".concat(N,"-container")),l=o.querySelector(".".concat(N,"-canvas")),h=o.querySelector(".".concat(N,"-drag-box")),d=o.querySelector(".".concat(N,"-crop-box")),u=d.querySelector(".".concat(N,"-face"));this.container=n,this.cropper=o,this.canvas=l,this.dragBox=h,this.cropBox=d,this.viewBox=o.querySelector(".".concat(N,"-view-box")),this.face=u,l.appendChild(r),H(t,Z),n.insertBefore(o,t.nextSibling),this.isImg||Pe(r,gn),this.initPreview(),this.bind(),s.initialAspectRatio=Math.max(0,s.initialAspectRatio)||NaN,s.aspectRatio=Math.max(0,s.aspectRatio)||NaN,s.viewMode=Math.max(0,Math.min(3,Math.round(s.viewMode)))||0,H(d,Z),s.guides||H(d.getElementsByClassName("".concat(N,"-dashed")),Z),s.center||H(d.getElementsByClassName("".concat(N,"-center")),Z),s.background&&H(o,"".concat(N,"-bg")),s.highlight||H(u,xd),s.cropBoxMovable&&(H(u,zs),li(u,oi,pr)),s.cropBoxResizable||(H(d.getElementsByClassName("".concat(N,"-line")),Z),H(d.getElementsByClassName("".concat(N,"-point")),Z)),this.render(),this.ready=!0,this.setDragMode(s.dragMode),s.autoCrop&&this.crop(),this.setData(s.data),J(s.ready)&&ue(t,_n,s.ready,{once:!0}),Pt(t,_n)}}},{key:"unbuild",value:function(){!this.ready||(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Pe(this.element,Z))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=dc,i}},{key:"setDefaults",value:function(t){M(Tn,wt(t)&&t)}}]),i}();M(Ga.prototype,nc,ac,oc,lc,hc,uc);function cc(i,e){const t=i.width/e.width,s=i.height/e.height,r=Math.min(t,s),n=e.width*r,a=e.height*r,o=(i.width-n)/2,l=(i.height-a)/2;return{width:n,height:a,left:o,top:l}}function pc(i){return i*(Math.PI/180)}function fc(i,e,t){const s=Math.abs(pc(t));return Math.max((Math.sin(s)*i+Math.cos(s)*e)/e,(Math.sin(s)*e+Math.cos(s)*i)/i)}function mc(i,e,t){return e.left<i.left?{left:i.left,width:t.width}:e.top<i.top?{top:i.top,height:t.height}:e.left+e.width>i.left+i.width?{left:i.left+i.width-t.width,width:t.width}:e.top+e.height>i.top+i.height?{top:i.top+i.height-t.height,height:t.height}:null}function gc(i,e,t){return e.left<i.left?{left:i.left,width:t.left+t.width-i.left}:e.top<i.top?{top:i.top,height:t.top+t.height-i.top}:e.left+e.width>i.left+i.width?{left:t.left,width:i.left+i.width-t.left}:e.top+e.height>i.top+i.height?{top:t.top,height:i.top+i.height-t.top}:null}class yc extends Se{constructor(e){super(e),this.onRotate90Deg=()=>{const{angle90Deg:t}=this.state,s=t-90;this.setState({angle90Deg:s,angleGranular:0}),this.cropper.scale(1),this.cropper.rotateTo(s);const r=this.cropper.getCanvasData(),n=this.cropper.getContainerData(),a=cc(n,r);this.cropper.setCanvasData(a),this.cropper.setCropBoxData(a)},this.onRotateGranular=t=>{const s=Number(t.target.value);this.setState({angleGranular:s});const{angle90Deg:r}=this.state,n=r+s;this.cropper.rotateTo(n);const a=this.cropper.getImageData(),o=fc(a.naturalWidth,a.naturalHeight,s),l=this.cropper.getImageData().scaleX<0?-o:o;this.cropper.scale(l,o)},this.state={angle90Deg:0,angleGranular:0,prevCropboxData:null},this.storePrevCropboxData=this.storePrevCropboxData.bind(this),this.limitCropboxMovement=this.limitCropboxMovement.bind(this)}componentDidMount(){const{opts:e,storeCropperInstance:t}=this.props;this.cropper=new Ga(this.imgElement,e.cropperOptions),this.imgElement.addEventListener("cropstart",this.storePrevCropboxData),this.imgElement.addEventListener("cropend",this.limitCropboxMovement),t(this.cropper)}componentWillUnmount(){this.cropper.destroy(),this.imgElement.removeEventListener("cropstart",this.storePrevCropboxData),this.imgElement.removeEventListener("cropend",this.limitCropboxMovement)}storePrevCropboxData(){this.setState({prevCropboxData:this.cropper.getCropBoxData()})}limitCropboxMovement(e){const t=this.cropper.getCanvasData(),s=this.cropper.getCropBoxData(),{prevCropboxData:r}=this.state;if(e.detail.action==="all"){const n=mc(t,s,r);n&&this.cropper.setCropBoxData(n)}else{const n=gc(t,s,r);n&&this.cropper.setCropBoxData(n)}}renderGranularRotate(){const{i18n:e}=this.props,{angleGranular:t}=this.state;return c("label",{role:"tooltip","aria-label":`${t}\xBA`,"data-microtip-position":"top",className:"uppy-ImageCropper-rangeWrapper"},c("input",{className:"uppy-ImageCropper-range uppy-u-reset",type:"range",onInput:this.onRotateGranular,onChange:this.onRotateGranular,value:t,min:"-45",max:"45","aria-label":e("rotate")}))}renderRevert(){const{i18n:e,opts:t}=this.props;return c("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("revert"),onClick:()=>{this.cropper.reset(),this.cropper.setAspectRatio(t.cropperOptions.initialAspectRatio),this.setState({angle90Deg:0,angleGranular:0})}},c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},c("path",{d:"M0 0h24v24H0z",fill:"none"}),c("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})))}renderRotate(){const{i18n:e}=this.props;return c("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("rotate"),onClick:this.onRotate90Deg},c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},c("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),c("path",{d:"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z"})))}renderFlip(){const{i18n:e}=this.props;return c("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("flipHorizontal"),onClick:()=>this.cropper.scaleX(-this.cropper.getData().scaleX||-1)},c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},c("path",{d:"M0 0h24v24H0z",fill:"none"}),c("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"})))}renderZoomIn(){const{i18n:e}=this.props;return c("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("zoomIn"),onClick:()=>this.cropper.zoom(.1)},c("svg",{"aria-hidden":"true",className:"uppy-c-icon",height:"24",viewBox:"0 0 24 24",width:"24"},c("path",{d:"M0 0h24v24H0V0z",fill:"none"}),c("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),c("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}renderZoomOut(){const{i18n:e}=this.props;return c("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("zoomOut"),onClick:()=>this.cropper.zoom(-.1)},c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},c("path",{d:"M0 0h24v24H0V0z",fill:"none"}),c("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})))}renderCropSquare(){const{i18n:e}=this.props;return c("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioSquare"),onClick:()=>this.cropper.setAspectRatio(1)},c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},c("path",{d:"M0 0h24v24H0z",fill:"none"}),c("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))}renderCropWidescreen(){const{i18n:e}=this.props;return c("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioLandscape"),onClick:()=>this.cropper.setAspectRatio(16/9)},c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},c("path",{d:"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z"}),c("path",{fill:"none",d:"M0 0h24v24H0z"})))}renderCropWidescreenVertical(){const{i18n:e}=this.props;return c("button",{role:"button tooltip","data-microtip-position":"top",type:"button","aria-label":e("aspectRatioPortrait"),className:"uppy-u-reset uppy-c-btn",onClick:()=>this.cropper.setAspectRatio(9/16)},c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},c("path",{d:"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z"}),c("path",{d:"M0 0h24v24H0z",fill:"none"})))}render(){const{currentImage:e,opts:t}=this.props,{actions:s}=t,r=URL.createObjectURL(e.data);return c("div",{className:"uppy-ImageCropper"},c("div",{className:"uppy-ImageCropper-container"},c("img",{className:"uppy-ImageCropper-image",alt:e.name,src:r,ref:n=>{this.imgElement=n}})),c("div",{className:"uppy-ImageCropper-controls"},s.revert&&this.renderRevert(),s.rotate&&this.renderRotate(),s.granularRotate&&this.renderGranularRotate(),s.flip&&this.renderFlip(),s.zoomIn&&this.renderZoomIn(),s.zoomOut&&this.renderZoomOut(),s.cropSquare&&this.renderCropSquare(),s.cropWidescreen&&this.renderCropWidescreen(),s.cropWidescreenVertical&&this.renderCropWidescreenVertical()))}}var vc={strings:{revert:"Reset",rotate:"Rotate 90\xB0",zoomIn:"Zoom in",zoomOut:"Zoom out",flipHorizontal:"Flip horizontally",aspectRatioSquare:"Crop square",aspectRatioLandscape:"Crop landscape (16:9)",aspectRatioPortrait:"Crop portrait (9:16)"}};const bc={version:"2.4.6"},Xa={viewMode:0,background:!1,autoCropArea:1,responsive:!0,minCropBoxWidth:70,minCropBoxHeight:70,croppedCanvasOptions:{},initialAspectRatio:0},Ya={revert:!0,rotate:!0,granularRotate:!0,flip:!0,zoomIn:!0,zoomOut:!0,cropSquare:!0,cropWidescreen:!0,cropWidescreenVertical:!0},wc={quality:.8,actions:Ya,cropperOptions:Xa};class Ka extends Ve{constructor(e,t){super(e,{...wc,...t,actions:{...Ya,...t==null?void 0:t.actions},cropperOptions:{...Xa,...t==null?void 0:t.cropperOptions}}),this.save=()=>{const s=a=>{const{currentImage:o}=this.getPluginState();this.uppy.setFileState(o.id,{data:new File([a],o.name,{type:a.type}),size:a.size,preview:void 0});const l=this.uppy.getFile(o.id);this.uppy.emit("thumbnail:request",l),this.setPluginState({currentImage:l}),this.uppy.emit("file-editor:complete",l)},{currentImage:r}=this.getPluginState(),n=this.cropper.getCroppedCanvas({});n.width%2!==0&&this.cropper.setData({width:n.width-1}),n.height%2!==0&&this.cropper.setData({height:n.height-1}),this.cropper.getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions).toBlob(s,r.type,this.opts.quality)},this.storeCropperInstance=s=>{this.cropper=s},this.selectFile=s=>{this.uppy.emit("file-editor:start",s),this.setPluginState({currentImage:s})},this.id=this.opts.id||"ImageEditor",this.title="Image Editor",this.type="editor",this.defaultLocale=vc,this.i18nInit()}canEditFile(e){if(!e.type||e.isRemote)return!1;const t=e.type.split("/")[1];return!!/^(jpe?g|gif|png|bmp|webp)$/.test(t)}install(){this.setPluginState({currentImage:null});const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){const{currentImage:e}=this.getPluginState();if(e){const t=this.uppy.getFile(e.id);this.uppy.emit("file-editor:cancel",t)}this.unmount()}render(){const{currentImage:e}=this.getPluginState();return e===null||e.isRemote?null:c(yc,{currentImage:e,storeCropperInstance:this.storeCropperInstance,save:this.save,opts:this.opts,i18n:this.i18n})}}Ka.VERSION=bc.version;function xe(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var _c=0;function Qa(i){return"__private_"+_c+++"_"+i}var X=Qa("uppy"),Wt=Qa("events");class Fc{constructor(e){Object.defineProperty(this,X,{writable:!0,value:void 0}),Object.defineProperty(this,Wt,{writable:!0,value:[]}),xe(this,X)[X]=e}on(e,t){return xe(this,Wt)[Wt].push([e,t]),xe(this,X)[X].on(e,t)}remove(){for(const[e,t]of xe(this,Wt)[Wt].splice(0))xe(this,X)[X].off(e,t)}onFilePause(e,t){this.on("upload-pause",(s,r)=>{e===s&&t(r)})}onFileRemove(e,t){this.on("file-removed",s=>{e===s.id&&t(s.id)})}onPause(e,t){this.on("upload-pause",(s,r)=>{e===s&&t(r)})}onRetry(e,t){this.on("upload-retry",s=>{e===s&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{!xe(this,X)[X].getFile(e)||t()})}onPauseAll(e,t){this.on("pause-all",()=>{!xe(this,X)[X].getFile(e)||t()})}onCancelAll(e,t){var s=this;this.on("cancel-all",function(){!xe(s,X)[X].getFile(e)||t(...arguments)})}onResumeAll(e,t){this.on("resume-all",()=>{!xe(this,X)[X].getFile(e)||t()})}}function T(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var Sc=0;function ee(i){return"__private_"+Sc+++"_"+i}function Pc(i){return new Error("Cancelled",{cause:i})}function Dn(i){if(i!=null){var e;const t=()=>this.abort(i.reason);i.addEventListener("abort",t,{once:!0});const s=()=>{i.removeEventListener("abort",t)};(e=this.then)==null||e.call(this,s,s)}return this}var re=ee("activeRequests"),Q=ee("queuedHandlers"),ie=ee("paused"),Je=ee("pauseTimer"),Y=ee("downLimit"),Ze=ee("upperLimit"),Ne=ee("rateLimitingTimer"),Zt=ee("call"),Ue=ee("queueNext"),Xs=ee("next"),Ss=ee("queue"),Ys=ee("dequeue"),Ps=ee("resume"),et=ee("increaseLimit");class Tc{constructor(e){Object.defineProperty(this,Ys,{value:Ac}),Object.defineProperty(this,Ss,{value:Dc}),Object.defineProperty(this,Xs,{value:Oc}),Object.defineProperty(this,Ue,{value:Ec}),Object.defineProperty(this,Zt,{value:Cc}),Object.defineProperty(this,re,{writable:!0,value:0}),Object.defineProperty(this,Q,{writable:!0,value:[]}),Object.defineProperty(this,ie,{writable:!0,value:!1}),Object.defineProperty(this,Je,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:1}),Object.defineProperty(this,Ze,{writable:!0,value:void 0}),Object.defineProperty(this,Ne,{writable:!0,value:void 0}),Object.defineProperty(this,Ps,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,et,{writable:!0,value:()=>{if(T(this,ie)[ie]){T(this,Ne)[Ne]=setTimeout(T(this,et)[et],0);return}T(this,Y)[Y]=this.limit,this.limit=Math.ceil((T(this,Ze)[Ze]+T(this,Y)[Y])/2);for(let t=T(this,Y)[Y];t<=this.limit;t++)T(this,Ue)[Ue]();T(this,Ze)[Ze]-T(this,Y)[Y]>3?T(this,Ne)[Ne]=setTimeout(T(this,et)[et],2e3):T(this,Y)[Y]=Math.floor(T(this,Y)[Y]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!T(this,ie)[ie]&&T(this,re)[re]<this.limit?T(this,Zt)[Zt](e):T(this,Ss)[Ss](e,t)}wrapSyncFunction(e,t){var s=this;return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];const o=s.run(()=>(e(...n),queueMicrotask(()=>o.done()),()=>{}),t);return{abortOn:Dn,abort(){o.abort()}}}}wrapPromiseFunction(e,t){var s=this;return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];let o;const l=new Promise((h,d)=>{o=s.run(()=>{let u,p;try{p=Promise.resolve(e(...n))}catch(f){p=Promise.reject(f)}return p.then(f=>{u?d(u):(o.done(),h(f))},f=>{u?d(u):(o.done(),d(f))}),f=>{u=Pc(f)}},t)});return l.abort=h=>{o.abort(h)},l.abortOn=Dn,l}}resume(){T(this,ie)[ie]=!1,clearTimeout(T(this,Je)[Je]);for(let e=0;e<this.limit;e++)T(this,Ue)[Ue]()}pause(e){e===void 0&&(e=null),T(this,ie)[ie]=!0,clearTimeout(T(this,Je)[Je]),e!=null&&(T(this,Je)[Je]=setTimeout(T(this,Ps)[Ps],e))}rateLimit(e){clearTimeout(T(this,Ne)[Ne]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(T(this,Ze)[Ze]=this.limit-1,this.limit=T(this,Y)[Y],T(this,Ne)[Ne]=setTimeout(T(this,et)[et],e))}get isPaused(){return T(this,ie)[ie]}}function Cc(i){T(this,re)[re]+=1;let e=!1,t;try{t=i()}catch(s){throw T(this,re)[re]-=1,s}return{abort:s=>{e||(e=!0,T(this,re)[re]-=1,t==null||t(s),T(this,Ue)[Ue]())},done:()=>{e||(e=!0,T(this,re)[re]-=1,T(this,Ue)[Ue]())}}}function Ec(){queueMicrotask(()=>T(this,Xs)[Xs]())}function Oc(){if(T(this,ie)[ie]||T(this,re)[re]>=this.limit||T(this,Q)[Q].length===0)return;const i=T(this,Q)[Q].shift();if(i==null)throw new Error("Invariant violation: next is null");const e=T(this,Zt)[Zt](i.fn);i.abort=e.abort,i.done=e.done}function Dc(i,e){const t={fn:i,priority:(e==null?void 0:e.priority)||0,abort:()=>{T(this,Ys)[Ys](t)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},s=T(this,Q)[Q].findIndex(r=>t.priority>r.priority);return s===-1?T(this,Q)[Q].push(t):T(this,Q)[Q].splice(s,0,t),t}function Ac(i){const e=T(this,Q)[Q].indexOf(i);e!==-1&&T(this,Q)[Q].splice(e,1)}const Ts=Symbol("__queue");class Tt extends Error{constructor(e,t){t===void 0&&(t=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}}function Ja(i){return i?i.readyState!==0&&i.readyState!==4||i.status===0:!1}function he(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var xc=0;function Gi(i){return"__private_"+xc+++"_"+i}var Me=Gi("aliveTimer"),tt=Gi("isDone"),Gt=Gi("onTimedOut"),it=Gi("timeout");class Nc{constructor(e,t){Object.defineProperty(this,Me,{writable:!0,value:void 0}),Object.defineProperty(this,tt,{writable:!0,value:!1}),Object.defineProperty(this,Gt,{writable:!0,value:void 0}),Object.defineProperty(this,it,{writable:!0,value:void 0}),he(this,it)[it]=e,he(this,Gt)[Gt]=()=>t(e)}progress(){he(this,tt)[tt]||he(this,it)[it]>0&&(clearTimeout(he(this,Me)[Me]),he(this,Me)[Me]=setTimeout(he(this,Gt)[Gt],he(this,it)[it]))}done(){he(this,tt)[tt]||(clearTimeout(he(this,Me)[Me]),he(this,Me)[Me]=void 0,he(this,tt)[tt]=!0)}}const Oi=()=>{};function Mc(i,e){e===void 0&&(e={});const{body:t=null,headers:s={},method:r="GET",onBeforeRequest:n=Oi,onUploadProgress:a=Oi,shouldRetry:o=()=>!0,onAfterRequest:l=Oi,onTimeout:h=Oi,responseType:d,retries:u=3,signal:p=null,timeout:f=3e4,withCredentials:m=!1}=e,v=w=>.3*2**(w-1)*1e3,y=new Nc(f,h);function b(w){return w===void 0&&(w=0),new Promise(async(_,E)=>{const F=new XMLHttpRequest;F.open(r,i,!0),F.withCredentials=m,d&&(F.responseType=d),p==null||p.addEventListener("abort",()=>{F.abort(),E(new DOMException("Aborted","AbortError"))}),F.onload=async()=>{await l(F,w),F.status>=200&&F.status<300?(y.done(),_(F)):o(F)&&w<u?setTimeout(()=>{b(w+1).then(_,E)},v(w)):(y.done(),E(new Tt(F.statusText,F)))},F.onerror=()=>{o(F)&&w<u?setTimeout(()=>{b(w+1).then(_,E)},v(w)):(y.done(),E(new Tt(F.statusText,F)))},F.upload.onprogress=g=>{y.progress(),a(g)},s&&Object.keys(s).forEach(g=>{F.setRequestHeader(g,s[g])}),await n(F,w),F.send(t)})}return b()}function kc(i){const e=t=>"error"in t&&!!t.error;return i.filter(t=>!e(t))}function Rc(i){return i.filter(e=>{var t;return!((t=e.progress)!=null&&t.uploadStarted)||!e.isRestored})}var Uc={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function Ie(i,e){if(!Object.prototype.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var Ic=0;function Et(i){return"__private_"+Ic+++"_"+i}const Bc={version:"3.6.7"};function Lc(i,e){let t=e;return t||(t=new Error("Upload error")),typeof t=="string"&&(t=new Error(t)),t instanceof Error||(t=Object.assign(new Error("Upload error"),{data:t})),Ja(i)?(t=new Tt(t,i),t):(t.request=i,t)}function An(i){return i.data.slice(0,i.data.size,i.meta.type)}const $c={formData:!0,fieldName:"file",method:"post",allowedMetaFields:null,responseUrlFieldName:"url",bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:"",getResponseData(i){let e={};try{e=JSON.parse(i)}catch{}return e},getResponseError(i,e){let t=new Error("Upload error");return Ja(e)&&(t=new Tt(t,e)),t},validateStatus(i){return i>=200&&i<300}};var ut=Et("getFetcher"),Ks=Et("uploadLocalFile"),Cs=Et("uploadBundle"),Qs=Et("getCompanionClientArgs"),Es=Et("uploadFiles"),Xt=Et("handleUpload");class Za extends ta{constructor(e,t){if(super(e,{...$c,fieldName:t.bundle?"files[]":"file",...t}),Object.defineProperty(this,Es,{value:qc}),Object.defineProperty(this,Qs,{value:Hc}),Object.defineProperty(this,Cs,{value:jc}),Object.defineProperty(this,Ks,{value:zc}),Object.defineProperty(this,ut,{writable:!0,value:void 0}),Object.defineProperty(this,Xt,{writable:!0,value:async s=>{if(s.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[Ts]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const r=this.uppy.getFilesByIds(s),n=kc(r),a=Rc(n);if(this.uppy.emit("upload-start",a),this.opts.bundle){if(n.some(l=>l.isRemote))throw new Error("Can\u2019t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await Ie(this,Cs)[Cs](n)}else await Ie(this,Es)[Es](n)}}),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=Uc,this.i18nInit(),Ts in this.opts?this.requests=this.opts[Ts]:this.requests=new Tc(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if((t==null?void 0:t.allowedMetaFields)===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),Ie(this,ut)[ut]=s=>async(r,n)=>{try{var a;const o=await Mc(r,{...n,method:n==null||(a=n.method)==null?void 0:a.toUpperCase(),onTimeout:d=>{const u=Math.ceil(d/1e3),p=new Error(this.i18n("uploadStalled",{seconds:u}));this.uppy.emit("upload-stalled",p,s)},onUploadProgress:d=>{if(d.lengthComputable)for(const u of s)this.uppy.emit("upload-progress",u,{uploader:this,bytesUploaded:d.loaded/d.total*u.size,bytesTotal:u.size})}});if(!this.opts.validateStatus(o.status,o.responseText,o))throw new Tt(o.statusText,o);const l=this.opts.getResponseData(o.responseText,o),h=l==null?void 0:l[this.opts.responseUrlFieldName];for(const d of s)this.uppy.emit("upload-success",d,{status:o.status,body:l,uploadURL:h});return o}catch(o){if(o.name==="AbortError")return;if(o instanceof Tt){const l=o.request,h=Lc(l,this.opts.getResponseError(l.responseText,l));for(const d of s)this.uppy.emit("upload-error",d,h)}throw o}}}getOptions(e){const t=this.uppy.getState().xhrUpload,{headers:s}=this.opts,r={...this.opts,...t||{},...e.xhrUpload||{},headers:{}};return typeof s=="function"?r.headers=s(e):Object.assign(r.headers,this.opts.headers),t&&Object.assign(r.headers,t.headers),e.xhrUpload&&Object.assign(r.headers,e.xhrUpload.headers),r}addMetadata(e,t,s){(Array.isArray(s.allowedMetaFields)?s.allowedMetaFields:Object.keys(t)).forEach(n=>{const a=t[n];Array.isArray(a)?a.forEach(o=>e.append(n,o)):e.append(n,a)})}createFormDataUpload(e,t){const s=new FormData;this.addMetadata(s,e.meta,t);const r=An(e);return e.name?s.append(t.fieldName,r,e.meta.name):s.append(t.fieldName,r),s}createBundledUpload(e,t){const s=new FormData,{meta:r}=this.uppy.getState();return this.addMetadata(s,r,t),e.forEach(n=>{const a=this.getOptions(n),o=An(n);n.name?s.append(a.fieldName,o,n.name):s.append(a.fieldName,o)}),s}install(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!1}})}this.uppy.addUploader(Ie(this,Xt)[Xt])}uninstall(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!0}})}this.uppy.removeUploader(Ie(this,Xt)[Xt])}}async function zc(i){const e=new Fc(this.uppy),t=new AbortController,s=this.requests.wrapPromiseFunction(async()=>{const r=this.getOptions(i),n=Ie(this,ut)[ut]([i]),a=r.formData?this.createFormDataUpload(i,r):i.data;return n(r.endpoint,{...r,body:a,signal:t.signal})});e.onFileRemove(i.id,()=>t.abort()),e.onCancelAll(i.id,r=>{let{reason:n}=r;n==="user"&&t.abort()});try{await s().abortOn(t.signal)}catch(r){if(r.message!=="Cancelled")throw r}finally{e.remove()}}async function jc(i){const e=new AbortController,t=this.requests.wrapPromiseFunction(async()=>{var r;const n=(r=this.uppy.getState().xhrUpload)!=null?r:{},a=Ie(this,ut)[ut](i),o=this.createBundledUpload(i,{...this.opts,...n});return a(this.opts.endpoint,{...this.opts,body:o,signal:e.signal})});function s(){e.abort()}this.uppy.once("cancel-all",s);try{await t().abortOn(e.signal)}catch(r){if(r.message!=="Cancelled")throw r}finally{this.uppy.off("cancel-all",s)}}function Hc(i){var e;const t=this.getOptions(i),s=Array.isArray(t.allowedMetaFields)?t.allowedMetaFields:Object.keys(i.meta);return{...(e=i.remote)==null?void 0:e.body,protocol:"multipart",endpoint:t.endpoint,size:i.data.size,fieldname:t.fieldName,metadata:Object.fromEntries(s.map(r=>[r,i.meta[r]])),httpMethod:t.method,useFormData:t.formData,headers:t.headers}}async function qc(i){await Promise.allSettled(i.map(e=>{if(e.isRemote){const t=()=>this.requests,s=new AbortController,r=a=>{a.id===e.id&&s.abort()};this.uppy.on("file-removed",r);const n=this.uppy.getRequestClientForFile(e).uploadRemoteFile(e,Ie(this,Qs)[Qs](e),{signal:s.signal,getQueue:t});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",r)},{priority:-1})(),n}return Ie(this,Ks)[Ks](e)}))}Za.VERSION=Bc.version;const Vc={components:{Dashboard:pd},props:{endpoint:{type:String,default:()=>({}).API_URL+"/file"},headers:{type:Object,default:()=>({auth:io.get("token")})},types:{type:Array,default:null},path:{type:String,default:"files"},maxNumberOfFiles:{type:Number,default:1},height:{type:Number,default:300}},emits:["uploaded","fileAdded","fileRemoved"],setup(i,e){const t=new Kl({autoProceed:!1,restrictions:{allowedFileTypes:i.types,maxNumberOfFiles:i.maxNumberOfFiles}});t.use(Za,{endpoint:i.endpoint+`?path=${i.path}`,fieldName:"file",method:"post",headers:i.headers}),t.use(Ka,{quality:1}),t.on("complete",n=>{var a,o;((a=n.successful)==null?void 0:a.length)>0&&e.emit("uploaded",(o=n.successful[0])==null?void 0:o.response)}),t.on("file-added",n=>{e.emit("fileAdded",n)}),t.on("file-removed",(n,a)=>{e.emit("fileRemoved",n)}),so(()=>{t.close()});function s(){t.upload()}function r(){t.cancelAll()}return{uppy:t,upload:s,cancel:r}}};function Wc(i,e,t,s,r,n){const a=ro("dashboard");return no(),ao(a,{ref:"dash",uppy:s.uppy,props:{proudlyDisplayPoweredByUppy:!1,hideUploadButton:!0,height:t.height,metaFields:[{id:"name",name:"Name",placeholder:"file name"},{id:"caption",name:"Caption",placeholder:"describe what the image is about"}]},plugins:["ImageEditor"]},null,8,["uppy","props"])}var Kc=oo(Vc,[["render",Wc],["__scopeId","data-v-0739f5ca"]]);export{pd as D,Kc as F,Ka as I,Kl as U};

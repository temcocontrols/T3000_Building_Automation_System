import{Q as t}from"./QTooltip.6e2fc110.js";import{d as e,a1 as n,a2 as i,h as r,w as a,a3 as o,a4 as s,c as l,a9 as u,k as c,a8 as d,ar as h,C as p,as as f,at as g,F as m,au as v,av as y,aw as _,ax as x,ay as b,u as w,az as M,aA as S,aB as C,aC as k,o as I,a as D,f as T,a5 as A,aD as E,aE as L,aF as P,aG as N,aH as O,X as z,aa as R,aI as V,a6 as F,S as B,r as H,aJ as G,Q as j,e as W,W as U,aK as Y,aL as $,aM as q,t as X}from"./index.43a69561.js";import{Q as Z,a as J}from"./QItem.37b7f197.js";import{Q as K,a as Q}from"./QExpansionItem.f6315431.js";import{Q as tt}from"./QChip.e0f2eff0.js";import{Q as et,a as nt}from"./QMenu.750dec7e.js";import{Q as it}from"./QPage.32ce735b.js";import{Q as rt}from"./touch.7fcb283a.js";import{Q as at,a as ot}from"./QBtnGroup.77efcc20.js";import{K as st,g as lt,Q as ut,a as ct,b as dt,c as ht,T as pt,d as ft,e as gt,f as mt,G as vt,F as yt}from"./QTree.c164370a.js";import{C as _t}from"./ClosePopup.99ee9e9f.js";import{u as xt}from"./use-quasar.e382389b.js";import{u as bt}from"./use-meta.18155aec.js";import{M as wt,P as Mt,i as St,a as Ct,E as kt,s as It,D as Dt,g as Tt,c as At,b as Et,d as Lt,e as Pt,f as Nt,h as Ot,j as zt,k as Rt,r as Vt,l as Ft,m as Bt,G as Ht,n as Gt,o as jt,p as Wt,q as Ut,t as Yt,u as $t,v as qt,w as Xt,x as Zt,y as Jt,z as Kt,A as Qt,B as te,C as ee,S as ne,F as ie,H as re,I as ae,J as oe,K as se,L as le,N as ue,O as ce,Q as de,R as he,T as pe,U as fe,V as ge,W as me,X as ve,Y as ye,_ as _e,Z as xe,$ as be,a0 as we,a1 as Me,a2 as Se,a3 as Ce,a4 as ke,a5 as Ie,a6 as De,a7 as Te,a8 as Ae,a9 as Ee,aa as Le,ab as Pe,ac as Ne,ad as Oe,ae as ze,af as Re,ag as Ve,ah as Fe,ai as Be,aj as He,ak as Ge,al as je,am as We,an as Ue,ao as Ye,ap as $e,aq as qe,ar as Xe,as as Ze,at as Je,au as Ke,av as Qe,aw as tn,ax as en,ay as nn,az as rn,aA as an,aB as on,aC as sn,aD as ln,aE as un,aF as cn,aG as dn,aH as hn,aI as pn,aJ as fn,aK as gn,aL as mn,aM as vn,aN as yn,aO as _n,aP as xn,aQ as bn,aR as wn,aS as Mn,aT as Sn,aU as Cn,aV as kn,aW as In,aX as Dn,aY as Tn,aZ as An,a_ as En,a$ as Ln,b0 as Pn,b1 as Nn,b2 as On,b3 as zn,b4 as Rn,b5 as Vn,b6 as Fn,b7 as Bn,b8 as Hn,b9 as Gn,ba as jn,bb as Wn,bc as Un,bd as Yn,be as $n,bf as qn,bg as Xn,bh as Zn,bi as Jn,bj as Kn,bk as Qn,bl as ti,bm as ei,bn as ni,bo as ii,bp as ri,bq as ai,br as oi,bs as si,bt as li,bu as ui,bv as ci,bw as di,bx as hi,by as pi,bz as fi,bA as gi,bB as mi,bC as vi,bD as yi,bE as _i,bF as xi,bG as bi,bH as wi,bI as Mi,bJ as Si,bK as Ci,bL as ki,bM as Ii,bN as Di,bO as Ti,bP as Ai,bQ as Ei,bR as Li,bS as Pi,bT as Ni,bU as Oi,bV as zi,bW as Ri,bX as Vi,bY as Fi,bZ as Bi,b_ as Hi,b$ as Gi,c0 as ji,c1 as Wi,c2 as Ui,c3 as Yi,c4 as $i,c5 as qi,c6 as Xi,c7 as Zi,c8 as Ji,c9 as Ki,ca as Qi,cb as tr,cc as er,cd as nr,ce as ir,cf as rr,cg as ar,ch as or,ci as sr,cj as lr,ck as ur,cl as cr,cm as dr,cn as hr,co as pr,cp as fr,cq as gr,cr as mr,cs as vr,ct as yr,cu as _r,cv as xr,cw as br,cx as wr,cy as Mr,cz as Sr,cA as Cr,cB as kr,cC as Ir,cD as Dr,cE as Tr,cF as Ar,cG as Er,cH as Lr,cI as Pr,cJ as Nr,cK as Or,cL as zr,cM as Rr,cN as Vr,cO as Fr,cP as Br,cQ as Hr,cR as Gr,cS as jr,cT as Wr,cU as Ur,cV as Yr,cW as $r,cX as qr,cY as Xr,cZ as Zr,c_ as Jr,c$ as Kr,d0 as Qr,d1 as ta,d2 as ea,d3 as na,d4 as ia,d5 as ra,d6 as aa,d7 as oa,d8 as sa,d9 as la,da as ua,db as ca,dc as da,dd as ha,de as pa,df as fa,dg as ga,dh as ma,di as va,dj as ya,dk as _a,dl as xa,dm as ba,dn as wa,dp as Ma,dq as Sa,dr as Ca,ds as ka,dt as Ia,du as Da,dv as Ta,dw as Aa,dx as Ea,dy as La,dz as Pa,dA as Na,dB as Oa,dC as za,dD as Ra,dE as Va,dF as Fa,dG as Ba,dH as Ha,dI as Ga,dJ as ja,dK as Wa,dL as Ua,dM as Ya,dN as $a,dO as qa,dP as Xa,dQ as Za,dR as Ja,dS as Ka,dT as Qa,dU as to,dV as eo,dW as no,dX as io,dY as ro,dZ as ao,d_ as oo,d$ as so,e0 as lo,e1 as uo,e2 as co,e3 as ho,e4 as po,e5 as fo,e6 as go,e7 as mo,e8 as vo,e9 as yo,ea as _o,eb as xo,ec as bo,ed as wo,ee as Mo,ef as So,eg as Co,eh as ko,ei as Io,ej as Do,ek as To,el as Ao,em as Eo,en as Lo,eo as Po,ep as No,eq as Oo,er as zo,es as Ro,et as Vo,eu as Fo,ev as Bo,ew as Ho,ex as Go,ey as jo,ez as Wo,eA as Uo,eB as Yo,eC as $o,eD as qo,eE as Xo,eF as Zo,eG as Jo,eH as Ko,eI as Qo,eJ as ts,eK as es,eL as ns,eM as is,eN as rs,eO as as,eP as os,eQ as ss,eR as ls,eS as us,eT as cs,eU as ds,eV as hs,eW as ps,eX as fs,eY as gs,eZ as ms,e_ as vs,e$ as ys,f0 as _s,f1 as xs,f2 as bs,f3 as ws,f4 as Ms,f5 as Ss,f6 as Cs,f7 as ks,f8 as Is,f9 as Ds}from"./Hvac.f9bb192f.js";import{u as Ts,d as As,l as Es,g as Ls,T as Ps,i as Ns,a as Os,b as zs,c as Rs,m as Vs,e as Fs,f as Bs,r as Hs,v as Gs,h as js,j as Ws,k as Us,s as Ys,n as $s,o as qs,p as Xs,q as Zs}from"./T3Data.de2b1c3e.js";import{Q as Js}from"./QBtnDropdown.cc348c7c.js";import{Q as Ks}from"./QToolbar.5dfa306c.js";import{t as Qs,a as tl,i as el,s as nl}from"./common.d19c69b8.js";import{_ as il}from"./plugin-vue_export-helper.21dcd24c.js";import{F as rl}from"./FileUploadS3.e2d6c42d.js";import{l as al}from"./api.63c77652.js";import{g as ol,a as sl,c as ll,b as ul}from"./_commonjsHelpers.a5007c1f.js";import{s as cl,a as dl,c as hl,t as pl,b as fl,l as gl,r as ml,d as vl,m as yl,e as _l,f as xl,g as bl,h as wl,i as Ml,j as Sl,k as Cl}from"./RefConstant.5def7c1d.js";import{d as kl}from"./dayjs.min.a4094c4f.js";import{f as Il}from"./chartjs-adapter-date-fns.esm.6cd07d05.js";import{aD as Dl,aG as Tl,aC as Al,aB as El}from"./index.5cc7168b.js";import{ak as Ll}from"./index.c8614cb4.js";import{B as Pl}from"./button.06b25135.js";import{_ as Nl}from"./TrendLogModal.999e5f31.js";import"./QResizeObserver.975d6f51.js";import"./AntdIcon.53cf09ff.js";import"./index.c36a7bea.js";import"./index.d11c4764.js";import"./CheckOutlined.78ae8c86.js";import"./TrendLogChart.f1c96a09.js";import"./auto.4ae97206.js";import"./ReloadOutlined.e0a6cb50.js";const Ol={};wt.forEach((t=>{Ol[t]=function(...e){return this.$_moveable[t](...e)}}));const zl={};Mt.forEach((t=>{zl[t]=function(e){this.$_moveable[t]=e}}));const Rl=e({name:"moveable",methods:Ol,props:Mt,watch:zl,mounted(){const t={},e=this.$props;Mt.forEach((n=>{const i=e[n];St(i)||(t[n]=e[n])}));const n=this.$refs.moveableElement,i=new Ct(n,{...t,warpSelf:!0});kt.forEach((t=>{i.on(t,(e=>{this.$emit(t,{...e})}))})),this.$_moveable=i},beforeUnmount(){this.$_moveable.destroy()}}),Vl={ref:"moveableElement"};const Fl=((t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n})(Rl,[["render",function(t,e,r,a,o,s){return n(),i("div",Vl,null,512)}]]);var Bl=function(t,e){return(Bl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Hl(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Bl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Gl=function(){return Gl=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Gl.apply(this,arguments)};function jl(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function Wl(t,e,n){if(n||2===arguments.length)for(var i,r=0,a=e.length;r<a;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Ul(t,e,n){var i=t.tag,r=t.children,a=t.attributes,o=t.className,s=t.style,l=e||Nt(n).createElement(i);for(var u in a)l.setAttribute(u,a[u]);var c=l.children;if(r.forEach((function(t,e){Ul(t,c[e],l)})),o&&o.split(/\s+/g).forEach((function(t){t&&!Yt(l,t)&&$t(l,t)})),s){var d=l.style;for(var u in s)d[u]=s[u]}return!e&&n&&n.appendChild(l),l}function Yl(t,e,n){t!==e&&n(t,e)}function $l(t,e,n){var i;void 0===n&&(n=t.data.boundArea);var r=t.distX,a=void 0===r?0:r,o=t.distY,s=void 0===o?0:o,l=t.data,u=l.startX,c=l.startY;if(e>0){var d=Math.sqrt((a*a+s*s)/(1+e*e));a=(a>=0?1:-1)*(e*d),s=(s>=0?1:-1)*d}var h=Math.abs(a),p=Math.abs(s),f=a<0?u-n.left:n.right-u,g=s<0?c-n.top:n.bottom-c;a=(a>=0?1:-1)*(h=(i=qt([h,p],[0,0],[f,g],!!e))[0]),s=(s>=0?1:-1)*(p=i[1]);var m=u+Math.min(0,a),v=c+Math.min(0,s);return{left:m,top:v,right:m+h,bottom:v+p,width:h,height:p}}function ql(t){var e=t.getBoundingClientRect(),n=e.left,i=e.top,r=e.width,a=e.height;return{pos1:[n,i],pos2:[n+r,i],pos3:[n,i+a],pos4:[n+r,i+a]}}function Xl(t,e,n){var i=Rt(t,e),r=i.list,a=i.prevList,o=i.added,s=i.removed,l=i.maintained;return Wl(Wl(Wl([],o.map((function(t){return r[t]})),!0),s.map((function(t){return a[t]})),!0),n?l.map((function(t){var e=t[1];return r[e]})):[],!0)}function Zl(t){for(var e=0,n=t.length,i=1;i<n;++i)e=Math.max(te(t[i],t[i-1]),e);return e}var Jl=It("\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    pointer-events: none;\n    will-change: transform;\n    z-index: 100;\n}\n"),Kl="selecto-selection ".concat(Jl.className),Ql=["className","boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],tu=Wl(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],Ql,!0),eu=["dragStart","drag","dragEnd","selectStart","select","selectEnd","keydown","keyup","scroll","innerScroll"],nu=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.selectedTargets=[],n.dragScroll=new Dt,n._onDragStart=function(t,e){var i=t.data,r=t.clientX,a=t.clientY,o=t.inputEvent,s=n.options,l=s.selectFromInside,u=s.selectByClick,c=s.rootContainer,d=s.boundContainer,h=s.preventDragFromInside,p=void 0===h||h,f=s.clickBySelectEnd,g=s.dragCondition;if(!g||g(t)){i.data={};var m=Tt(n.container);i.innerWidth=m.innerWidth,i.innerHeight=m.innerHeight,n.findSelectableTargets(i),i.startSelectedTargets=n.selectedTargets,i.scaleMatrix=At(),i.containerX=0,i.containerY=0;var v=n.container,y={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(c){var _=n.container.getBoundingClientRect();i.containerX=_.left,i.containerY=_.top,i.scaleMatrix=Et(n.container,c)}if(d){var x=Lt(d)&&"element"in d?Gl({left:!0,top:!0,bottom:!0,right:!0},d):{element:d,left:!0,top:!0,bottom:!0,right:!0},b=x.element;if(b){var w=(Pt(b)?Nt(v).querySelector(b):!0===b?n.container:b).getBoundingClientRect();x.left&&(y.left=w.left),x.top&&(y.top=w.top),x.right&&(y.right=w.right),x.bottom&&(y.bottom=w.bottom)}}i.boundArea=y;var M={left:r,top:a,right:r,bottom:a,width:0,height:0},S=[],C=u&&!f,k=!1;if(!l||C){var I=n._findElement(e||o.target,i.selectableTargets);k=!!I,C&&(S=I?[I]:[])}var D=!l&&k;if(D&&!u)return t.stop(),!1;var T=o.type,A="mousedown"===T||"touchstart"===T;if(!(!(!t.isClick&&A)||n.emit("dragStart",Gl(Gl({},t),{data:i.data}))))return t.stop(),!1;if(n.continueSelect?(S=Xl(n.selectedTargets,S,n.continueSelectWithoutDeselect),i.startPassedTargets=n.selectedTargets):i.startPassedTargets=[],n._select(S,M,t,!0,D&&u&&!f&&p),i.startX=r,i.startY=a,i.selectFlag=!1,i.preventDragFromInside=!1,o.target){var E=Ot(i.scaleMatrix,[r-i.containerX,a-i.containerY]);n.target.style.cssText+="position: ".concat(c?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(E[0],"px, ").concat(E[1],"px)")}if(D&&u&&!f)o.preventDefault(),p&&(n._selectEnd(i.startSelectedTargets,i.startPassedTargets,M,t,!0),i.preventDragFromInside=!0);else{i.selectFlag=!0;var L=n.options,P=L.scrollOptions,N=L.innerScrollOptions,O=!1;if(N){for(var z=null,R=t.inputEvent.target;R&&R!==Nt(v).body;){if("visible"!==getComputedStyle(R).overflow){z=R;break}R=R.parentElement}z&&(i.innerScrollOptions=Gl({container:z,checkScrollEvent:!0},!0===N?{}:N),n.dragScroll.dragStart(t,i.innerScrollOptions),O=!0)}!O&&P&&P.container&&n.dragScroll.dragStart(t,P),D&&u&&f&&(i.selectFlag=!1,t.preventDrag())}return!0}t.stop()},n._onDrag=function(t){if(t.data.selectFlag){var e=n.scrollOptions,i=t.data.innerScrollOptions;if((i||(null==e?void 0:e.container))&&!t.isScroll&&n.dragScroll.drag(t,i||e))return}n._checkSelected(t)},n._onDragEnd=function(t){var e,i,r,a,o=t.data,s=t.inputEvent,l=$l(t,n.options.ratio),u=o.selectFlag,c=n.container;if(s&&n.emit("dragEnd",Gl(Gl({isDouble:!!t.isDouble,isClick:!!t.isClick,isDrag:!1,isSelect:u},t),{data:o.data,rect:l})),n.target.style.cssText+="display: none;",u)o.selectFlag=!1,n.dragScroll.dragEnd();else if(n.selectByClick&&n.clickBySelectEnd){var d=n._findElement((null==s?void 0:s.target)||(e=c,i=t.clientX,r=t.clientY,(a=Nt(e)).elementFromPoint&&a.elementFromPoint(i,r)||null),o.selectableTargets);n._select(d?[d]:[],l,t)}o.preventDragFromInside||n._selectEnd(o.startSelectedTargets,o.startPassedTargets,l,t)},n._onKeyDown=function(t){var e=n.options,i=!1;if(!n._keydownContinueSelect){var r=n._sameCombiKey(t,e.toggleContinueSelect);n._keydownContinueSelect=r,i||(i=r)}if(!n._keydownContinueSelectWithoutDeselection){r=n._sameCombiKey(t,e.toggleContinueSelectWithoutDeselect);n._keydownContinueSelectWithoutDeselection=r,i||(i=r)}i&&n.emit("keydown",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection})},n._onKeyUp=function(t){var e=n.options,i=!1;if(n._keydownContinueSelect){var r=n._sameCombiKey(t,e.toggleContinueSelect,!0);n._keydownContinueSelect=!r,i||(i=r)}if(n._keydownContinueSelectWithoutDeselection){r=n._sameCombiKey(t,e.toggleContinueSelectWithoutDeselect,!0);n._keydownContinueSelectWithoutDeselection=!r,i||(i=r)}i&&n.emit("keyup",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection})},n._onBlur=function(){(n._keydownContinueSelect||n._keydownContinueSelectWithoutDeselection)&&(n._keydownContinueSelect=!1,n._keydownContinueSelectWithoutDeselection=!1,n.emit("keyup",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection}))},n._onDocumentSelectStart=function(t){var e=Nt(n.container);if(n.gesto.isFlag()){var i=n.dragContainer;i===Tt(n.container)&&(i=e.documentElement);var r=zt(i)?[i]:[].slice.call(i),a=t.target;r.some((function(e){if(e===a||e.contains(a))return t.preventDefault(),!0}))}},n.target=e.portalContainer;var i=e.container;n.options=Gl({className:"",portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:null,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:ql,cspNonce:"",ratio:0},e);var r=n.options.portalContainer;return r&&(i=r.parentElement),n.container=i||document.body,n.initElement(),n.initDragScroll(),n.setKeyController(),n}Hl(e,t);var n=e.prototype;return n.setSelectedTargets=function(t){var e=this.selectedTargets,n=Rt(e,t),i=n.added,r=n.removed,a=n.prevList,o=n.list;return this.selectedTargets=t,{added:i.map((function(t){return o[t]})),removed:r.map((function(t){return a[t]})),beforeSelected:e,selected:t}},n.setSelectedTargetsByPoints=function(t,e){var n=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),r=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),o={left:n,top:i,right:r,bottom:a,width:r-n,height:a-i},s={ignoreClick:!0};this.findSelectableTargets(s);var l=this.hitTest(o,s,!0,null),u=this.setSelectedTargets(l);return Gl(Gl({},u),{rect:o})},n.selectTargetsByPoints=function(t,e){var n=new MouseEvent("mousedown",{clientX:t[0],clientY:t[1],cancelable:!0,bubbles:!0}),i=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),r=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),a=this.gesto;!1!==a.onDragStart(n)&&(a.onDrag(i),a.onDragEnd(r))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(t){return this.gesto.triggerDragStart(t),this},n.destroy=function(){var t;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),Vt(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||null===(t=this.target.parentElement)||void 0===t||t.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(t){var e=this.getElementRect||ql,n=e(t),i=[n.pos1,n.pos2,n.pos4,n.pos3];if(e!==ql){var r=t.getBoundingClientRect();return Ft(i,r)}return i},n.getSelectableElements=function(){var t=this.container,e=[];return this.options.selectableTargets.forEach((function(n){if(Bt(n)){var i=n();i&&e.push.apply(e,[].slice.call(i))}else if(zt(n))e.push(n);else if(Lt(n))e.push(n.value||n.current);else{var r=[].slice.call(Nt(t).querySelectorAll(n));e.push.apply(e,r)}})),e},n.checkScroll=function(){if(this.gesto.isFlag()){var t=this.scrollOptions,e=this.gesto.getEventData().innerScrollOptions;(e||(null==t?void 0:t.container))&&this.dragScroll.checkScroll(Gl({inputEvent:this.gesto.getCurrentEvent()},e||t))}},n.findSelectableTargets=function(t){var e=this;void 0===t&&(t=this.gesto.getEventData());var n=this.getSelectableElements(),i=n.map((function(t){return e.getElementPoints(t)}));t.selectableTargets=n,t.selectablePoints=i,t.selectableParentMap=null;var r=this.options,a=r.checkOverflow||r.innerScrollOptions,o=Nt(this.container);if(a){var s=new Map;t.selectableInnerScrollParentMap=s,t.selectableInnerScrollPathsList=n.map((function(t,e){for(var n=t.parentElement,i=[],r=[],a=function(){var t=s.get(n);if(!t&&"visible"!==getComputedStyle(n).overflow){var a=ql(n);t={parentElement:n,indexes:[],points:[a.pos1,a.pos2,a.pos4,a.pos3],paths:Wl([],r,!0)},i.push(n),i.forEach((function(e){s.set(e,t)})),i=[]}t?(n=t.parentElement,s.get(n).indexes.push(e),r.push(n)):i.push(n),n=n.parentElement};n&&n!==o.body;)a();return r}))}return r.checkOverflow||(t.selectableInners=n.map((function(){return!0}))),this._refreshGroups(t),n},n.clickTarget=function(t,e){var n=function(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}return{clientX:t.clientX,clientY:t.clientY}}(t),i={data:{selectFlag:!1},clientX:n.clientX,clientY:n.clientY,inputEvent:t,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(i,e)&&this._onDragEnd(i),this},n.setKeyController=function(){var t=this.options,e=t.keyContainer,n=t.toggleContinueSelect,i=t.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(n||i)&&(this.keycon=new st(e||Tt(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setClassName=function(t){this.options.className=t,this.target.setAttribute("class","".concat(Kl," ").concat(t||""))},n.setKeyEvent=function(){var t=this.options,e=t.toggleContinueSelect,n=t.toggleContinueSelectWithoutDeselect;!e&&!n||this.keycon||this.setKeyController()},n.setKeyContainer=function(t){var e=this,n=this.options;Yl(n.keyContainer,t,(function(){n.keyContainer=t,e.setKeyController()}))},n.getContinueSelect=function(){var t=this.options,e=t.continueSelect;return t.toggleContinueSelect&&this._keydownContinueSelect?!e:e},n.getContinueSelectWithoutDeselect=function(){var t=this.options,e=t.continueSelectWithoutDeselect;return t.toggleContinueSelectWithoutDeselect&&this._keydownContinueSelectWithoutDeselection?!e:e},n.setToggleContinueSelect=function(t){var e=this,n=this.options;Yl(n.toggleContinueSelect,t,(function(){n.toggleContinueSelect=t,e.setKeyEvent()}))},n.setToggleContinueSelectWithoutDeselect=function(t){var e=this,n=this.options;Yl(n.toggleContinueSelectWithoutDeselect,t,(function(){n.toggleContinueSelectWithoutDeselect=t,e.setKeyEvent()}))},n.setPreventDefault=function(t){this.gesto.options.preventDefault=t},n.setCheckInput=function(t){this.gesto.options.checkInput=t},n.initElement=function(){var t=this.options,e=t.dragContainer,n=t.checkInput,i=t.preventDefault,r=t.preventClickEventOnDragStart,a=t.preventClickEventOnDrag,o=t.preventClickEventByCondition,s=t.preventRightClick,l=void 0===s||s,u=t.className,c=this.container;this.target=Ul(function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=e||{},a=r.className,o=void 0===a?"":a,s=r.style,l=void 0===s?{}:s,u=jl(r,["className","style"]);return{tag:t,className:o,style:l,attributes:u,children:n}}("div",{className:"".concat(Kl," ").concat(u||"")}),this.target,c);var d=this.target;this.dragContainer="string"==typeof e?[].slice.call(Nt(c).querySelectorAll(e)):e||this.target.parentNode,this.gesto=new Ht(this.dragContainer,{checkWindowBlur:!0,container:Tt(c),checkInput:n,preventDefault:i,preventClickEventOnDragStart:r,preventClickEventOnDrag:a,preventClickEventByCondition:o,preventRightClick:l}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),Gt(document,"selectstart",this._onDocumentSelectStart),this.injectResult=Jl.inject(d,{nonce:this.options.cspNonce})},n.hitTest=function(t,e,n,i){var r=this.options,a=r.hitRate,o=r.selectByClick,s=t.left,l=t.top,u=t.right,c=t.bottom,d=e.innerGroups,h=e.innerWidth,p=e.innerHeight,f=null==i?void 0:i.clientX,g=null==i?void 0:i.clientY,m=e.ignoreClick,v=[[s,l],[u,l],[u,c],[s,c]],y=function(t,e){var i=Xt("".concat("function"==typeof a?a(e):a)),r=!m&&Zt([f,g],t);if(!n&&o&&r)return!0;var s=Wt(v,t);if(!s.length)return!1;var l=Jt(s),u=0;return 0===l&&0===Jt(t)?(u=Zl(t),l=Zl(s)):u=Jt(t),"px"===i.unit?l>=i.value:ee(Math.round(l/u*100),0,100)>=Math.min(100,i.value)},_=e.selectableTargets,x=e.selectablePoints,b=e.selectableInners;if(!d)return _.filter((function(t,e){return!!b[e]&&y(x[e],_[e])}));for(var w=[],M=Math.floor(s/h),S=Math.floor(u/h),C=Math.floor(l/p),k=Math.floor(c/p),I=M;I<=S;++I){var D=d[I];if(D)for(var T=C;T<=k;++T){var A=D[T];A&&A.forEach((function(t){var e=x[t],n=b[t],i=_[t];n&&y(e,i)&&w.push(i)}))}}return function(t){if("undefined"==typeof Map)return t.filter((function(e,n){return t.indexOf(e)===n}));var e=new Map;return t.filter((function(t){return!e.has(t)&&(e.set(t,!0),!0)}))}(w)},n.initDragScroll=function(){var t=this;this.dragScroll.on("scrollDrag",(function(e){(0,e.next)(t.gesto.getCurrentEvent())})).on("scroll",(function(e){var n=e.container,i=e.direction;t.gesto.getEventData().innerScrollOptions?t.emit("innerScroll",{container:n,direction:i}):t.emit("scroll",{container:n,direction:i})})).on("move",(function(e){var n=e.offsetX,i=e.offsetY,r=e.inputEvent,a=t.gesto;if(a&&a.isFlag()){var o=t.gesto.getEventData(),s=o.boundArea;o.startX-=n,o.startY-=i;var l=t.gesto.getEventData().innerScrollOptions,u=null==l?void 0:l.container,c=!1;if(u){var d=o.selectableInnerScrollParentMap,h=d.get(u);h&&(h.paths.forEach((function(t){d.get(t).points.forEach((function(t){t[0]-=n,t[1]-=i}))})),h.indexes.forEach((function(t){o.selectablePoints[t].forEach((function(t){t[0]-=n,t[1]-=i}))})),c=!0)}c||o.selectablePoints.forEach((function(t){t.forEach((function(t){t[0]-=n,t[1]-=i}))})),t._refreshGroups(o),s.left-=n,s.right-=n,s.top-=i,s.bottom-=i,t.gesto.scrollBy(n,i,r.inputEvent),t._checkSelected(t.gesto.getCurrentEvent())}}))},n._select=function(t,e,n,i,r){void 0===r&&(r=!1);var a=n.inputEvent,o=n.data,s=this.setSelectedTargets(t),l=Rt(o.startSelectedTargets,t),u=l.added,c=l.removed,d=l.prevList,h=l.list,p={startSelected:d,startAdded:u.map((function(t){return h[t]})),startRemoved:c.map((function(t){return d[t]}))};i&&this.emit("selectStart",Gl(Gl(Gl({},s),p),{rect:e,inputEvent:a,data:o.data,isTrusted:n.isTrusted,isDragStartEnd:r})),(s.added.length||s.removed.length)&&this.emit("select",Gl(Gl(Gl({},s),p),{rect:e,inputEvent:a,data:o.data,isTrusted:n.isTrusted,isDragStartEnd:r}))},n._selectEnd=function(t,e,n,i,r){void 0===r&&(r=!1);var a=i.inputEvent,o=i.isDouble,s=i.data,l=a&&a.type,u="mousedown"===l||"touchstart"===l,c=Rt(t,this.selectedTargets),d=c.added,h=c.removed,p=c.prevList,f=c.list,g=Rt(e,this.selectedTargets),m=g.added,v=g.removed,y=g.prevList,_=g.list;this.emit("selectEnd",{startSelected:t,beforeSelected:e,selected:this.selectedTargets,added:d.map((function(t){return f[t]})),removed:h.map((function(t){return p[t]})),afterAdded:m.map((function(t){return _[t]})),afterRemoved:v.map((function(t){return y[t]})),isDragStart:u&&r,isDragStartEnd:u&&r,isClick:!!i.isClick,isDouble:!!o,rect:n,inputEvent:a,data:s.data,isTrusted:i.isTrusted})},n._checkSelected=function(t,e){void 0===e&&(e=$l(t,this.options.ratio));var n=t.data,i=e.top,r=e.left,a=e.width,o=e.height,s=n.selectFlag,l=n.containerX,u=n.containerY,c=n.scaleMatrix,d=Ot(c,[r-l,i-u]),h=Ot(c,[a,o]),p=[];if(s){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(d[0],"px, ").concat(d[1],"px);")+"width:".concat(h[0],"px;height:").concat(h[1],"px;");var f=this.hitTest(e,n,!0,t);p=Xl(n.startPassedTargets,f,this.continueSelect&&this.continueSelectWithoutDeselect)}if(!1===this.emit("drag",Gl(Gl({},t),{data:n.data,isSelect:s,rect:e})))return this.target.style.cssText+="display: none;",void t.stop();s&&this._select(p,e,t)},n._sameCombiKey=function(t,e,n){if(!e)return!1;var i=lt(t.inputEvent,t.key),r=[].concat(e),a=jt(r[0])?r:[r];if(n){var o=t.key;return a.some((function(t){return t.some((function(t){return t===o}))}))}return a.some((function(t){return t.every((function(t){return i.indexOf(t)>-1}))}))},n._findElement=function(t,e){for(var n=t;n&&!(e.indexOf(n)>-1);)n=n.parentElement;return n},n._refreshGroups=function(t){var e,n=t.innerWidth,i=t.innerHeight,r=t.selectablePoints;if(this.options.checkOverflow){var a=null===(e=this.gesto.getEventData().innerScrollOptions)||void 0===e?void 0:e.container,o=t.selectableInnerScrollParentMap,s=t.selectableInnerScrollPathsList;t.selectableInners=s.map((function(t,e){var n=!1;return t.every((function(t){if(n)return!0;if(t===a)return n=!0,!0;var i=o.get(t);if(i){var s=r[e],l=i.points;if(!Wt(s,l).length)return!1}return!0}))}))}if(n&&i){var l=t.selectablePoints,u={};l.forEach((function(t,e){var r=1/0,a=-1/0,o=1/0,s=-1/0;t.forEach((function(t){var e=Math.floor(t[0]/n),l=Math.floor(t[1]/i);r=Math.min(e,r),a=Math.max(e,a),o=Math.min(l,o),s=Math.max(l,s)}));for(var l=r;l<=a;++l)for(var c=o;c<=s;++c)u[l]=u[l]||{},u[l][c]=u[l][c]||[],u[l][c].push(e)})),t.innerGroups=u}else t.innerGroups=null},e=function(t,e,n,i){var r,a=arguments.length,o=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(o=(a<3?r(o):a>3?r(e,n,o):r(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}([Kt(Ql,(function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},i=Qt("get ".concat(e));t[i]?n.get=function(){return this[i]()}:n.get=function(){return this.options[e]};var r=Qt("set ".concat(e));t[r]?n.set=function(t){this[r](t)}:n.set=function(t){this.options[e]=t},Object.defineProperty(t,e,n)}))],e),e}(Ut),iu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hl(e,t),e}(nu),ru=function(){return ru=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ru.apply(this,arguments)},au={};["clickTarget","getSelectableElements","setSelectedTargets","getElementPoints","getSelectedTargets","findSelectableTargets","triggerDragStart","checkScroll","selectTargetsByPoints","setSelectedTargetsByPoints"].forEach((function(t){au[t]=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return(e=this.$_selecto)[t].apply(e,n)}}));var ou={};Ql.forEach((function(t){ou[t]=function(e){return this.$_selecto[t]=e}}));var su=e({name:"selecto",methods:au,props:tu,watch:ou,mounted:function(){var t=this,e=this.$props,n={};tu.forEach((function(t){var i=e[t];St(i)||(n[t]=i)}));var i=new iu(ru(ru({},n),{portalContainer:this.$refs.selectoElement}));this.$_selecto=i,eu.forEach((function(e){i.on(e,(function(n){t.$emit(e,ru({},n))}))}))},beforeUnmount:function(){this.$_selecto.destroy()}});const lu={ref:"selectoElement"};su.render=function(t,e,r,a,o,s){return n(),i("div",lu,null,512)},su.__file="src/Selecto.vue";var uu=function(t){this.coordSysDims=[],this.axisMap=re(),this.categoryAxisMap=re(),this.coordSysName=t};var cu={cartesian2d:function(t,e,n,i){var r=t.getReferringComponents("xAxis",ne).models[0],a=t.getReferringComponents("yAxis",ne).models[0];e.coordSysDims=["x","y"],n.set("x",r),n.set("y",a),du(r)&&(i.set("x",r),e.firstCategoryDimIndex=0),du(a)&&(i.set("y",a),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,i){var r=t.getReferringComponents("singleAxis",ne).models[0];e.coordSysDims=["single"],n.set("single",r),du(r)&&(i.set("single",r),e.firstCategoryDimIndex=0)},polar:function(t,e,n,i){var r=t.getReferringComponents("polar",ne).models[0],a=r.findAxisModel("radiusAxis"),o=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",o),du(a)&&(i.set("radius",a),e.firstCategoryDimIndex=0),du(o)&&(i.set("angle",o),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,i){var r=t.ecModel,a=r.getComponent("parallel",t.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();ie(a.parallelAxisIndex,(function(t,a){var s=r.getComponent("parallelAxis",t),l=o[a];n.set(l,s),du(s)&&(i.set(l,s),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=a))}))}};function du(t){return"category"===t.get("type")}function hu(t,e,n){n=n||{};var i,r=e.getSourceManager(),a=!1;t?(a=!0,i=ae(t)):a=(i=r.getSource()).sourceFormat===oe;var o=function(t){var e=t.get("coordinateSystem"),n=new uu(e),i=cu[e];if(i)return i(t,n,n.axisMap,n.categoryAxisMap),n}(e),s=function(t,e){var n,i=t.get("coordinateSystem"),r=ge.get(i);return e&&e.coordSysDims&&(n=me(e.coordSysDims,(function(t){var n={name:t},i=e.axisMap.get(t);if(i){var r=i.get("type");n.type=ve(r)}return n}))),n||(n=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),n}(e,o),l=n.useEncodeDefaulter,u=se(l)?l:l?le(ue,s,e):null,c={coordDimensions:s,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!a},d=ce(i,c),h=function(t,e,n){var i,r;return n&&ie(t,(function(t,a){var o=t.coordDim,s=n.categoryAxisMap.get(o);s&&(null==i&&(i=a),t.ordinalMeta=s.getOrdinalMeta(),e&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(r=!0)})),r||null==i||(t[i].otherDims.itemName=0),i}(d.dimensions,n.createInvertedIndices,o),p=a?null:r.getSharedDataStore(d),f=de(e,{schema:d,store:p}),g=new he(d,e);g.setCalculationInfo(f);var m=null!=h&&function(t){if(t.sourceFormat===oe){var e=function(t){var e=0;for(;e<t.length&&null==t[e];)e++;return t[e]}(t.data||[]);return!pe(fe(e))}}(i)?function(t,e,n,i){return i===h?n:this.defaultDimValueGetter(t,e,n,i)}:null;return g.hasItemOption=!1,g.initData(a?i:p,null,m),g}var pu=function(){function t(){}return t.prototype.getNeedCrossZero=function(){return!this.option.scale},t.prototype.getCoordSysModel=function(){},t}();function fu(t,e){return Math.abs(t-e)<1e-8}function gu(t,e,n){var i=0,r=t[0];if(!r)return!1;for(var a=1;a<t.length;a++){var o=t[a];i+=ye(r[0],r[1],o[0],o[1],e,n),r=o}var s=t[0];return fu(r[0],s[0])&&fu(r[1],s[1])||(i+=ye(r[0],r[1],s[0],s[1],e,n)),0!==i}var mu=[];function vu(t,e){for(var n=0;n<t.length;n++)Se(t[n],t[n],e)}function yu(t,e,n,i){for(var r=0;r<t.length;r++){var a=t[r];i&&(a=i.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(Ce(e,e,a),ke(n,n,a))}}var _u=function(){function t(t){this.name=t}return t.prototype.setCenter=function(t){this._center=t},t.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},t}(),xu=function(t,e){this.type="polygon",this.exterior=t,this.interiors=e},bu=function(t){this.type="linestring",this.points=t},wu=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.type="geoJSON",r.geometries=n,r._center=i&&[i[0],i[1]],r}return _e(e,t),e.prototype.calcCenter=function(){for(var t,e=this.geometries,n=0,i=0;i<e.length;i++){var r=e[i],a=r.exterior,o=a&&a.length;o>n&&(t=r,n=o)}if(t)return function(t){for(var e=0,n=0,i=0,r=t.length,a=t[r-1][0],o=t[r-1][1],s=0;s<r;s++){var l=t[s][0],u=t[s][1],c=a*u-l*o;e+=c,n+=(a+l)*c,i+=(o+u)*c,a=l,o=u}return e?[n/e/3,i/e/3,e]:[t[0][0]||0,t[0][1]||0]}(t.exterior);var s=this.getBoundingRect();return[s.x+s.width/2,s.y+s.height/2]},e.prototype.getBoundingRect=function(t){var e=this._rect;if(e&&!t)return e;var n=[1/0,1/0],i=[-1/0,-1/0],r=this.geometries;return ie(r,(function(e){"polygon"===e.type?yu(e.exterior,n,i,t):ie(e.points,(function(e){yu(e,n,i,t)}))})),isFinite(n[0])&&isFinite(n[1])&&isFinite(i[0])&&isFinite(i[1])||(n[0]=n[1]=i[0]=i[1]=0),e=new xe(n[0],n[1],i[0]-n[0],i[1]-n[1]),t||(this._rect=e),e},e.prototype.contain=function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,r=n.length;i<r;i++){var a=n[i];if("polygon"===a.type){var o=a.exterior,s=a.interiors;if(gu(o,t[0],t[1])){for(var l=0;l<(s?s.length:0);l++)if(gu(s[l],t[0],t[1]))continue t;return!0}}}return!1},e.prototype.transformTo=function(t,e,n,i){var r=this.getBoundingRect(),a=r.width/r.height;n?i||(i=n/a):n=a*i;for(var o=new xe(t,e,n,i),s=r.calculateTransform(o),l=this.geometries,u=0;u<l.length;u++){var c=l[u];"polygon"===c.type?(vu(c.exterior,s),ie(c.interiors,(function(t){vu(t,s)}))):ie(c.points,(function(t){vu(t,s)}))}(r=this._rect).copy(o),this._center=[r.x+r.width/2,r.y+r.height/2]},e.prototype.cloneShallow=function(t){null==t&&(t=this.name);var n=new e(t,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},e}(_u),Mu=function(t){function e(e,n){var i=t.call(this,e)||this;return i.type="geoSVG",i._elOnlyForCalculate=n,i}return _e(e,t),e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,e=t.getBoundingRect(),n=[e.x+e.width/2,e.y+e.height/2],i=be(mu),r=t;r&&!r.isGeoSVGGraphicRoot;)we(i,r.getLocalTransform(),i),r=r.parent;return Me(i,i),Se(n,n,i),n},e}(_u);function Su(t,e,n){for(var i=0;i<t.length;i++)t[i]=Cu(t[i],e[i],n)}function Cu(t,e,n){for(var i=[],r=e[0],a=e[1],o=0;o<t.length;o+=2){var s=t.charCodeAt(o)-64,l=t.charCodeAt(o+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),r=s+=r,a=l+=a,i.push([s/n,l/n])}return i}function ku(t,e){return t=function(t){if(!t.UTF8Encoding)return t;var e=t,n=e.UTF8Scale;null==n&&(n=1024);var i=e.features;return ie(i,(function(t){var e=t.geometry,i=e.encodeOffsets,r=e.coordinates;if(i)switch(e.type){case"LineString":e.coordinates=Cu(r,i,n);break;case"Polygon":case"MultiLineString":Su(r,i,n);break;case"MultiPolygon":ie(r,(function(t,e){return Su(t,i[e],n)}))}})),e.UTF8Encoding=!1,e}(t),me(Ie(t.features,(function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0})),(function(t){var n=t.properties,i=t.geometry,r=[];switch(i.type){case"Polygon":var a=i.coordinates;r.push(new xu(a[0],a.slice(1)));break;case"MultiPolygon":ie(i.coordinates,(function(t){t[0]&&r.push(new xu(t[0],t.slice(1)))}));break;case"LineString":r.push(new bu([i.coordinates]));break;case"MultiLineString":r.push(new bu(i.coordinates))}var o=new wu(n[e||"name"],r,n.cp);return o.properties=n,o}))}var Iu=De();function Du(t,e){var n=me(e,(function(e){return t.scale.parse(e)}));return"time"===t.type&&n.length>0&&(n.sort(),n.unshift(n[0]),n.push(n[n.length-1])),n}function Tu(t){var e=t.getLabelModel().get("customValues");if(e){var n=Te(t),i=t.scale.getExtent(),r=Du(t,e),a=Ie(r,(function(t){return t>=i[0]&&t<=i[1]}));return{labels:me(a,(function(e){var i={value:e};return{formattedLabel:n(i),rawLabel:t.scale.getLabel(i),tickValue:e}}))}}return"category"===t.type?function(t){var e=t.getLabelModel(),n=Eu(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(t):function(t){var e=t.scale.getTicks(),n=Te(t);return{labels:me(e,(function(e,i){return{level:e.level,formattedLabel:n(e,i),rawLabel:t.scale.getLabel(e),tickValue:e.value}}))}}(t)}function Au(t,e){var n=t.getTickModel().get("customValues");if(n){var i=t.scale.getExtent(),r=Du(t,n);return{ticks:Ie(r,(function(t){return t>=i[0]&&t<=i[1]}))}}return"category"===t.type?function(t,e){var n,i,r=Lu(t,"ticks"),a=Ae(e),o=Pu(r,a);if(o)return o;e.get("show")&&!t.scale.isBlank()||(n=[]);if(se(a))n=zu(t,a,!0);else if("auto"===a){var s=Eu(t,t.getLabelModel());i=s.labelCategoryInterval,n=me(s.labels,(function(t){return t.tickValue}))}else n=Ou(t,i=a,!0);return Nu(r,a,{ticks:n,tickCategoryInterval:i})}(t,e):{ticks:me(t.scale.getTicks(),(function(t){return t.value}))}}function Eu(t,e){var n,i,r=Lu(t,"labels"),a=Ae(e),o=Pu(r,a);return o||(se(a)?n=zu(t,a):(i="auto"===a?function(t){var e=Iu(t).autoInterval;return null!=e?e:Iu(t).autoInterval=t.calculateCategoryInterval()}(t):a,n=Ou(t,i)),Nu(r,a,{labels:n,labelCategoryInterval:i}))}function Lu(t,e){return Iu(t)[e]||(Iu(t)[e]=[])}function Pu(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function Nu(t,e,n){return t.push({key:e,value:n}),n}function Ou(t,e,n){var i=Te(t),r=t.scale,a=r.getExtent(),o=t.getLabelModel(),s=[],l=Math.max((e||0)+1,1),u=a[0],c=r.count();0!==u&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var d=Le(t),h=o.get("showMinLabel")||d,p=o.get("showMaxLabel")||d;h&&u!==a[0]&&g(a[0]);for(var f=u;f<=a[1];f+=l)g(f);function g(t){var e={value:t};s.push(n?t:{formattedLabel:i(e),rawLabel:r.getLabel(e),tickValue:t})}return p&&f-l!==a[1]&&g(a[1]),s}function zu(t,e,n){var i=t.scale,r=Te(t),a=[];return ie(i.getTicks(),(function(t){var o=i.getLabel(t),s=t.value;e(t.value,o)&&a.push(n?s:{formattedLabel:r(t),rawLabel:o,tickValue:s})})),a}var Ru=[0,1];function Vu(t,e){var n=(t[1]-t[0])/e/2;t[0]+=n,t[1]-=n}var Fu=function(){function t(t,e,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=n||[0,0]}return t.prototype.contain=function(t){var e=this._extent,n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return t>=n&&t<=i},t.prototype.containData=function(t){return this.scale.contain(t)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(t){return Pe(t||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(t,e){var n=this._extent;n[0]=t,n[1]=e},t.prototype.dataToCoord=function(t,e){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&"ordinal"===i.type&&Vu(n=n.slice(),i.count()),Ne(t,Ru,n,e)},t.prototype.coordToData=function(t,e){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&Vu(n=n.slice(),i.count());var r=Ne(t,n,Ru,e);return this.scale.scale(r)},t.prototype.pointToData=function(t,e){},t.prototype.getTicksCoords=function(t){var e=(t=t||{}).tickModel||this.getTickModel(),n=Au(this,e).ticks,i=me(n,(function(t){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(t):t),tickValue:t}}),this);return function(t,e,n,i){var r=e.length;if(!t.onBand||n||!r)return;var a,o,s=t.getExtent();if(1===r)e[0].coord=s[0],a=e[1]={coord:s[1],tickValue:e[0].tickValue};else{var l=e[r-1].tickValue-e[0].tickValue,u=(e[r-1].coord-e[0].coord)/l;ie(e,(function(t){t.coord-=u/2}));var c=t.scale.getExtent();o=1+c[1]-e[r-1].tickValue,a={coord:e[r-1].coord+u*o,tickValue:c[1]+1},e.push(a)}var d=s[0]>s[1];h(e[0].coord,s[0])&&(i?e[0].coord=s[0]:e.shift());i&&h(s[0],e[0].coord)&&e.unshift({coord:s[0]});h(s[1],a.coord)&&(i?a.coord=s[1]:e.pop());i&&h(a.coord,s[1])&&e.push({coord:s[1]});function h(t,e){return t=Oe(t),e=Oe(e),d?t>e:t<e}}(this,i,e.get("alignWithLabel"),t.clamp),i},t.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");t>0&&t<100||(t=5);var e=this.scale.getMinorTicks(t);return me(e,(function(t){return me(t,(function(t){return{coord:this.dataToCoord(t),tickValue:t}}),this)}),this)},t.prototype.getViewLabels=function(){return Tu(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},t.prototype.calculateCategoryInterval=function(){return function(t){var e=function(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}(t),n=Te(t),i=(e.axisRotate-e.labelRotate)/180*Math.PI,r=t.scale,a=r.getExtent(),o=r.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],u=t.dataToCoord(l+1)-t.dataToCoord(l),c=Math.abs(u*Math.cos(i)),d=Math.abs(u*Math.sin(i)),h=0,p=0;l<=a[1];l+=s){var f,g,m=Ee(n({value:l}),e.font,"center","top");f=1.3*m.width,g=1.3*m.height,h=Math.max(h,f,7),p=Math.max(p,g,7)}var v=h/c,y=p/d;isNaN(v)&&(v=1/0),isNaN(y)&&(y=1/0);var _=Math.max(0,Math.floor(Math.min(v,y))),x=Iu(t.model),b=t.getExtent(),w=x.lastAutoInterval,M=x.lastTickCount;return null!=w&&null!=M&&Math.abs(w-_)<=1&&Math.abs(M-o)<=1&&w>_&&x.axisExtent0===b[0]&&x.axisExtent1===b[1]?_=w:(x.lastTickCount=o,x.lastAutoInterval=_,x.axisExtent0=b[0],x.axisExtent1=b[1]),_}(this)},t}(),Bu=2*Math.PI,Hu=ze.CMD,Gu=["top","right","bottom","left"];function ju(t,e,n,i,r){var a=n.width,o=n.height;switch(t){case"top":i.set(n.x+a/2,n.y-e),r.set(0,-1);break;case"bottom":i.set(n.x+a/2,n.y+o+e),r.set(0,1);break;case"left":i.set(n.x-e,n.y+o/2),r.set(-1,0);break;case"right":i.set(n.x+a+e,n.y+o/2),r.set(1,0)}}function Wu(t,e,n,i,r,a,o,s,l){o-=t,s-=e;var u=Math.sqrt(o*o+s*s),c=(o/=u)*n+t,d=(s/=u)*n+e;if(Math.abs(i-r)%Bu<1e-4)return l[0]=c,l[1]=d,u-n;if(a){var h=i;i=qe(r),r=qe(h)}else i=qe(i),r=qe(r);i>r&&(r+=Bu);var p=Math.atan2(s,o);if(p<0&&(p+=Bu),p>=i&&p<=r||p+Bu>=i&&p+Bu<=r)return l[0]=c,l[1]=d,u-n;var f=n*Math.cos(i)+t,g=n*Math.sin(i)+e,m=n*Math.cos(r)+t,v=n*Math.sin(r)+e,y=(f-o)*(f-o)+(g-s)*(g-s),_=(m-o)*(m-o)+(v-s)*(v-s);return y<_?(l[0]=f,l[1]=g,Math.sqrt(y)):(l[0]=m,l[1]=v,Math.sqrt(_))}function Uu(t,e,n,i,r,a,o,s){var l=r-t,u=a-e,c=n-t,d=i-e,h=Math.sqrt(c*c+d*d),p=(l*(c/=h)+u*(d/=h))/h;s&&(p=Math.min(Math.max(p,0),1)),p*=h;var f=o[0]=t+p*c,g=o[1]=e+p*d;return Math.sqrt((f-r)*(f-r)+(g-a)*(g-a))}function Yu(t,e,n,i,r,a,o){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i);var s=t+n,l=e+i,u=o[0]=Math.min(Math.max(r,t),s),c=o[1]=Math.min(Math.max(a,e),l);return Math.sqrt((u-r)*(u-r)+(c-a)*(c-a))}var $u=[];function qu(t,e,n){var i=Yu(e.x,e.y,e.width,e.height,t.x,t.y,$u);return n.set($u[0],$u[1]),i}function Xu(t,e,n){for(var i,r,a=0,o=0,s=0,l=0,u=1/0,c=e.data,d=t.x,h=t.y,p=0;p<c.length;){var f=c[p++];1===p&&(s=a=c[p],l=o=c[p+1]);var g=u;switch(f){case Hu.M:a=s=c[p++],o=l=c[p++];break;case Hu.L:g=Uu(a,o,c[p],c[p+1],d,h,$u,!0),a=c[p++],o=c[p++];break;case Hu.C:g=$e(a,o,c[p++],c[p++],c[p++],c[p++],c[p],c[p+1],d,h,$u),a=c[p++],o=c[p++];break;case Hu.Q:g=Ye(a,o,c[p++],c[p++],c[p],c[p+1],d,h,$u),a=c[p++],o=c[p++];break;case Hu.A:var m=c[p++],v=c[p++],y=c[p++],_=c[p++],x=c[p++],b=c[p++];p+=1;var w=!!(1-c[p++]);i=Math.cos(x)*y+m,r=Math.sin(x)*_+v,p<=1&&(s=i,l=r),g=Wu(m,v,_,x,x+b,w,(d-m)*_/y+m,h,$u),a=Math.cos(x+b)*y+m,o=Math.sin(x+b)*_+v;break;case Hu.R:g=Yu(s=a=c[p++],l=o=c[p++],c[p++],c[p++],d,h,$u);break;case Hu.Z:g=Uu(a,o,s,l,d,h,$u,!0),a=s,o=l}g<u&&(u=g,n.set($u[0],$u[1]))}return u}var Zu=new Re,Ju=new Re,Ku=new Re,Qu=new Re,tc=new Re;function ec(t,e){if(t){var n=t.getTextGuideLine(),i=t.getTextContent();if(i&&n){var r=t.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=r.candidates||Gu,s=i.getBoundingRect().clone();s.applyTransform(i.getComputedTransform());var l=1/0,u=r.anchor,c=t.getComputedTransform(),d=c&&Me([],c),h=e.get("length2")||0;u&&Ku.copy(u);for(var p=0;p<o.length;p++){ju(o[p],0,s,Zu,Qu),Re.scaleAndAdd(Ju,Zu,Qu,h),Ju.transform(d);var f=t.getBoundingRect(),g=u?u.distance(Ju):t instanceof je?Xu(Ju,t.path,Ku):qu(Ju,f,Ku);g<l&&(l=g,Ju.transform(c),Ku.transform(c),Ku.toArray(a[0]),Ju.toArray(a[1]),Zu.toArray(a[2]))}rc(a,e.get("minTurnAngle")),n.setShape({points:a})}}}var nc=[],ic=new Re;function rc(t,e){if(e<=180&&e>0){e=e/180*Math.PI,Zu.fromArray(t[0]),Ju.fromArray(t[1]),Ku.fromArray(t[2]),Re.sub(Qu,Zu,Ju),Re.sub(tc,Ku,Ju);var n=Qu.len(),i=tc.len();if(!(n<.001||i<.001)){Qu.scale(1/n),tc.scale(1/i);var r=Qu.dot(tc);if(Math.cos(e)<r){var a=Uu(Ju.x,Ju.y,Ku.x,Ku.y,Zu.x,Zu.y,nc,!1);ic.fromArray(nc),ic.scaleAndAdd(tc,a/Math.tan(Math.PI-e));var o=Ku.x!==Ju.x?(ic.x-Ju.x)/(Ku.x-Ju.x):(ic.y-Ju.y)/(Ku.y-Ju.y);if(isNaN(o))return;o<0?Re.copy(ic,Ju):o>1&&Re.copy(ic,Ku),ic.toArray(t[1])}}}}function ac(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,Zu.fromArray(t[0]),Ju.fromArray(t[1]),Ku.fromArray(t[2]),Re.sub(Qu,Ju,Zu),Re.sub(tc,Ku,Ju);var i=Qu.len(),r=tc.len();if(!(i<.001||r<.001))if(Qu.scale(1/i),tc.scale(1/r),Qu.dot(e)<Math.cos(n)){var a=Uu(Ju.x,Ju.y,Ku.x,Ku.y,Zu.x,Zu.y,nc,!1);ic.fromArray(nc);var o=Math.PI/2,s=o+Math.acos(tc.dot(e))-n;if(s>=o)Re.copy(ic,Ku);else{ic.scaleAndAdd(tc,a/Math.tan(Math.PI/2-s));var l=Ku.x!==Ju.x?(ic.x-Ju.x)/(Ku.x-Ju.x):(ic.y-Ju.y)/(Ku.y-Ju.y);if(isNaN(l))return;l<0?Re.copy(ic,Ju):l>1&&Re.copy(ic,Ku)}ic.toArray(t[1])}}}function oc(t,e,n,i){var r="normal"===n,a=r?t:t.ensureState(n);a.ignore=e;var o=i.get("smooth");o&&!0===o&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=i.getModel("lineStyle").getLineStyle();r?t.useStyle(s):a.style=s}function sc(t,e){var n=e.smooth,i=e.points;if(i)if(t.moveTo(i[0][0],i[0][1]),n>0&&i.length>=3){var r=We(i[0],i[1]),a=We(i[1],i[2]);if(!r||!a)return t.lineTo(i[1][0],i[1][1]),void t.lineTo(i[2][0],i[2][1]);var o=Math.min(r,a)*n,s=Ue([],i[1],i[0],o/r),l=Ue([],i[1],i[2],o/a),u=Ue([],s,l,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var c=1;c<i.length;c++)t.lineTo(i[c][0],i[c][1])}function lc(t,e,n){var i=t.getTextGuideLine(),r=t.getTextContent();if(r){for(var a=e.normal,o=a.get("show"),s=r.ignore,l=0;l<Ve.length;l++){var u=Ve[l],c=e[u],d="normal"===u;if(c){var h=c.get("show");if((d?s:Fe(r.states[u]&&r.states[u].ignore,s))||!Fe(h,o)){var p=d?i:i&&i.states[u];p&&(p.ignore=!0),i&&oc(i,!0,u,c);continue}i||(i=new Be,t.setTextGuideLine(i),d||!s&&o||oc(i,!0,"normal",e.normal),t.stateProxy&&(i.stateProxy=t.stateProxy)),oc(i,!1,u,c)}}if(i){He(i.style,n),i.style.fill=null;var f=a.get("showAbove");(t.textGuideLineConfig=t.textGuideLineConfig||{}).showAbove=f||!1,i.buildPath=sc}}else i&&t.removeTextGuideLine()}function uc(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},i=0;i<Ge.length;i++){var r=Ge[i];n[r]=t.getModel([r,e])}return n}function cc(t){if(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice());return e}}function dc(t,e){var n=t.label,i=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:cc(i&&i.shape.points)}}var hc=["align","verticalAlign","width","height","fontSize"],pc=new Xe,fc=De(),gc=De();function mc(t,e,n){for(var i=0;i<n.length;i++){var r=n[i];null!=e[r]&&(t[r]=e[r])}}var vc=["x","y","rotation"],yc=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(t,e,n,i,r){var a=i.style,o=i.__hostTarget.textConfig||{},s=i.getComputedTransform(),l=i.getBoundingRect().plain();xe.applyTransform(l,l,s),s?pc.setLocalTransform(s):(pc.x=pc.y=pc.rotation=pc.originX=pc.originY=0,pc.scaleX=pc.scaleY=1),pc.rotation=qe(pc.rotation);var u,c=i.__hostTarget;if(c){u=c.getBoundingRect().plain();var d=c.getComputedTransform();xe.applyTransform(u,u,d)}var h=u&&c.getTextGuideLine();this._labelList.push({label:i,labelLine:h,seriesModel:n,dataIndex:t,dataType:e,layoutOption:r,computedLayoutOption:null,rect:l,hostRect:u,priority:u?u.width*u.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:h&&h.ignore,x:pc.x,y:pc.y,scaleX:pc.scaleX,scaleY:pc.scaleY,rotation:pc.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:i.cursor,attachedPos:o.position,attachedRot:o.rotation}})},t.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var n=t.__model,i=n.get("labelLayout");(se(i)||Ze(i).length)&&t.group.traverse((function(t){if(t.ignore)return!0;var r=t.getTextContent(),a=Je(t);r&&!r.disableLabelLayout&&e._addLabel(a.dataIndex,a.dataType,n,r,i)}))},t.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),n=t.getHeight();function i(t,e){return function(){ec(t,e)}}for(var r=0;r<this._labelList.length;r++){var a=this._labelList[r],o=a.label,s=o.__hostTarget,l=a.defaultAttr,u=void 0;u=(u=se(a.layoutOption)?a.layoutOption(dc(a,s)):a.layoutOption)||{},a.computedLayoutOption=u;var c=Math.PI/180;s&&s.setTextConfig({local:!1,position:null!=u.x||null!=u.y?null:l.attachedPos,rotation:null!=u.rotate?u.rotate*c:l.attachedRot,offset:[u.dx||0,u.dy||0]});var d=!1;if(null!=u.x?(o.x=Ke(u.x,e),o.setStyle("x",0),d=!0):(o.x=l.x,o.setStyle("x",l.style.x)),null!=u.y?(o.y=Ke(u.y,n),o.setStyle("y",0),d=!0):(o.y=l.y,o.setStyle("y",l.style.y)),u.labelLinePoints){var h=s.getTextGuideLine();h&&(h.setShape({points:u.labelLinePoints}),d=!1)}fc(o).needsUpdateLabelLine=d,o.rotation=null!=u.rotate?u.rotate*c:l.rotation,o.scaleX=l.scaleX,o.scaleY=l.scaleY;for(var p=0;p<hc.length;p++){var f=hc[p];o.setStyle(f,null!=u[f]?u[f]:l.style[f])}if(u.draggable){if(o.draggable=!0,o.cursor="move",s){var g=a.seriesModel;if(null!=a.dataIndex)g=a.seriesModel.getData(a.dataType).getItemModel(a.dataIndex);o.on("drag",i(s,g.getModel("labelLine")))}}else o.off("drag"),o.cursor=l.cursor}},t.prototype.layout=function(t){var e=t.getWidth(),n=t.getHeight(),i=Qe(this._labelList),r=Ie(i,(function(t){return"shiftX"===t.layoutOption.moveOverlap})),a=Ie(i,(function(t){return"shiftY"===t.layoutOption.moveOverlap}));tn(r,0,e),en(a,0,n);var o=Ie(i,(function(t){return t.layoutOption.hideOverlap}));nn(o)},t.prototype.processLabelsOverall=function(){var t=this;ie(this._chartViewList,(function(e){var n=e.__model,i=e.ignoreLabelLineUpdate,r=n.isAnimationEnabled();e.group.traverse((function(e){if(e.ignore&&!e.forceLabelAnimation)return!0;var a=!i,o=e.getTextContent();!a&&o&&(a=fc(o).needsUpdateLabelLine),a&&t._updateLabelLine(e,n),r&&t._animateLabels(e,n)}))}))},t.prototype._updateLabelLine=function(t,e){var n=t.getTextContent(),i=Je(t),r=i.dataIndex;if(n&&null!=r){var a=e.getData(i.dataType),o=a.getItemModel(r),s={},l=a.getItemVisual(r,"style");if(l){var u=a.getVisual("drawType");s.stroke=l[u]}var c=o.getModel("labelLine");lc(t,uc(o),s),ec(t,c)}},t.prototype._animateLabels=function(t,e){var n=t.getTextContent(),i=t.getTextGuideLine();if(n&&(t.forceLabelAnimation||!n.ignore&&!n.invisible&&!t.disableLabelAnimation&&!rn(t))){var r=(p=fc(n)).oldLayout,a=Je(t),o=a.dataIndex,s={x:n.x,y:n.y,rotation:n.rotation},l=e.getData(a.dataType);if(r){n.attr(r);var u=t.prevStates;u&&(sn(u,"select")>=0&&n.attr(p.oldLayoutSelect),sn(u,"emphasis")>=0&&n.attr(p.oldLayoutEmphasis)),ln(n,s,e,o)}else if(n.attr(s),!an(n).valueAnimation){var c=Fe(n.style.opacity,1);n.style.opacity=0,on(n,{style:{opacity:c}},e,o)}if(p.oldLayout=s,n.states.select){var d=p.oldLayoutSelect={};mc(d,s,vc),mc(d,n.states.select,vc)}if(n.states.emphasis){var h=p.oldLayoutEmphasis={};mc(h,s,vc),mc(h,n.states.emphasis,vc)}un(n,o,l,e,e)}if(i&&!i.ignore&&!i.invisible){r=(p=gc(i)).oldLayout;var p,f={points:i.shape.points};r?(i.attr({shape:r}),ln(i,{shape:f},e)):(i.setShape(f),i.style.strokePercent=0,on(i,{style:{strokePercent:1}},e)),p.oldLayout=f}},t}(),_c=De();var xc=Math.sin,bc=Math.cos,wc=Math.PI,Mc=2*Math.PI,Sc=180/wc,Cc=function(){function t(){}return t.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},t.prototype.moveTo=function(t,e){this._add("M",t,e)},t.prototype.lineTo=function(t,e){this._add("L",t,e)},t.prototype.bezierCurveTo=function(t,e,n,i,r,a){this._add("C",t,e,n,i,r,a)},t.prototype.quadraticCurveTo=function(t,e,n,i){this._add("Q",t,e,n,i)},t.prototype.arc=function(t,e,n,i,r,a){this.ellipse(t,e,n,n,0,i,r,a)},t.prototype.ellipse=function(t,e,n,i,r,a,o,s){var l=o-a,u=!s,c=Math.abs(l),d=cn(c-Mc)||(u?l>=Mc:-l>=Mc),h=l>0?l%Mc:l%Mc+Mc,p=!1;p=!!d||!cn(c)&&h>=wc==!!u;var f=t+n*bc(a),g=e+i*xc(a);this._start&&this._add("M",f,g);var m=Math.round(r*Sc);if(d){var v=1/this._p,y=(u?1:-1)*(Mc-v);this._add("A",n,i,m,1,+u,t+n*bc(a+y),e+i*xc(a+y)),v>.01&&this._add("A",n,i,m,0,+u,f,g)}else{var _=t+n*bc(o),x=e+i*xc(o);this._add("A",n,i,m,+p,+u,_,x)}},t.prototype.rect=function(t,e,n,i){this._add("M",t,e),this._add("l",n,0),this._add("l",0,i),this._add("l",-n,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(t,e,n,i,r,a,o,s,l){for(var u=[],c=this._p,d=1;d<arguments.length;d++){var h=arguments[d];if(isNaN(h))return void(this._invalid=!0);u.push(Math.round(h*c)/c)}this._d.push(t+u.join(" ")),this._start="Z"===t},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),kc=Math.round;var Ic=["lineCap","miterLimit","lineJoin"],Dc=me(Ic,(function(t){return"stroke-"+t.toLowerCase()}));var Tc="http://www.w3.org/2000/svg",Ac="http://www.w3.org/1999/xlink";function Ec(t){return document.createElementNS(Tc,t)}function Lc(t,e,n,i,r){return{tag:t,attrs:n||{},children:i,text:r,key:e}}function Pc(t,e){var n=(e=e||{}).newline?"\n":"";return function t(e){var i=e.children,r=e.tag,a=e.attrs,o=e.text;return function(t,e){var n=[];if(e)for(var i in e){var r=e[i],a=i;!1!==r&&(!0!==r&&null!=r&&(a+='="'+r+'"'),n.push(a))}return"<"+t+" "+n.join(" ")+">"}(r,a)+("style"!==r?gn(o):o||"")+(i?""+n+me(i,(function(e){return t(e)})).join(n)+n:"")+("</"+r+">")}(t)}function Nc(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function Oc(t,e,n,i){return Lc("svg","root",{width:t,height:e,xmlns:Tc,"xmlns:xlink":Ac,version:"1.1",baseProfile:"full",viewBox:!!i&&"0 0 "+t+" "+e},n)}var zc=0;function Rc(){return zc++}var Vc={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"};function Fc(t,e,n){var i=xn({},t.shape);xn(i,e),t.buildPath(n,i);var r=new Cc;return r.reset(wn(t)),n.rebuildPath(r,1),r.generateStr(),r.getStr()}function Bc(t,e){var n=e.originX,i=e.originY;(n||i)&&(t["transform-origin"]=n+"px "+i+"px")}var Hc={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Gc(t,e){var n=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[n]=t,n}function jc(t){return vn(t)?Vc[t]?"cubic-bezier("+Vc[t]+")":yn(t)?t:"":""}function Wc(t,e,n,i){var r=t.animators,a=r.length,o=[];if(t instanceof mn){var s=function(t,e,n){var i,r,a=t.shape.paths,o={};if(ie(a,(function(t){var e=Nc(n.zrId);e.animation=!0,Wc(t,{},e,!0);var a=e.cssAnims,s=e.cssNodes,l=Ze(a),u=l.length;if(u){var c=a[r=l[u-1]];for(var d in c){var h=c[d];o[d]=o[d]||{d:""},o[d].d+=h.d||""}for(var p in s){var f=s[p].animation;f.indexOf(r)>=0&&(i=f)}}})),i){e.d=!1;var s=Gc(o,n);return i.replace(r,s)}}(t,e,n);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},u=0;u<a;u++){var c=r[u],d=[c.getMaxTime()/1e3+"s"],h=jc(c.getClip().easing),p=c.getDelay();h?d.push(h):d.push("linear"),p&&d.push(p/1e3+"s"),c.getLoop()&&d.push("infinite");var f=d.join(" ");l[f]=l[f]||[f,[]],l[f][1].push(c)}function g(r){var a,o=r[1],s=o.length,l={},u={},c={};function d(t,e,n){for(var i=t.getTracks(),r=t.getMaxTime(),a=0;a<i.length;a++){var o=i[a];if(o.needsAnimate()){var s=o.keyframes,l=o.propName;if(n&&(l=n(l)),l)for(var u=0;u<s.length;u++){var c=s[u],d=Math.round(c.time/r*100)+"%",h=jc(c.easing),p=c.rawValue;(vn(p)||Mn(p))&&(e[d]=e[d]||{},e[d][l]=c.rawValue,h&&(e[d]["animation-timing-function"]=h))}}}}for(var h=0;h<s;h++){(w=(b=o[h]).targetName)?"shape"===w&&d(b,u):!i&&d(b,l)}for(var p in l){var f={};_n(f,t),xn(f,l[p]);var g=bn(f),m=l[p]["animation-timing-function"];c[p]=g?{transform:g}:{},Bc(c[p],f),m&&(c[p]["animation-timing-function"]=m)}var v=!0;for(var p in u){c[p]=c[p]||{};var y=!a;m=u[p]["animation-timing-function"];y&&(a=new ze);var _=a.len();a.reset(),c[p].d=Fc(t,u[p],a);var x=a.len();if(!y&&_!==x){v=!1;break}m&&(c[p]["animation-timing-function"]=m)}if(!v)for(var p in c)delete c[p].d;if(!i)for(h=0;h<s;h++){var b,w;"style"===(w=(b=o[h]).targetName)&&d(b,c,(function(t){return Hc[t]}))}var M,S=Ze(c),C=!0;for(h=1;h<S.length;h++){var k=S[h-1],I=S[h];if(c[k]["transform-origin"]!==c[I]["transform-origin"]){C=!1;break}M=c[k]["transform-origin"]}if(C&&M){for(var p in c)c[p]["transform-origin"]&&delete c[p]["transform-origin"];e["transform-origin"]=M}if(Ie(S,(function(t){return Ze(c[t]).length>0})).length)return Gc(c,n)+" "+r[0]+" both"}for(var m in l){(s=g(l[m]))&&o.push(s)}if(o.length){var v=n.zrId+"-cls-"+Rc();n.cssNodes["."+v]={animation:o.join(",")},e.class=v}}function Uc(t,e,n,i){var r=JSON.stringify(t),a=n.cssStyleCache[r];a||(a=n.zrId+"-cls-"+Rc(),n.cssStyleCache[r]=a,n.cssNodes["."+a+(i?":hover":"")]=t),e.class=e.class?e.class+" "+a:a}var Yc=Math.round;function $c(t){return t&&vn(t.src)}function qc(t){return t&&se(t.toDataURL)}function Xc(t,e,n,i){!function(t,e,n,i){var r=null==e.opacity?1:e.opacity;if(n instanceof dn)t("opacity",r);else{if(function(t){var e=t.fill;return null!=e&&"none"!==e}(e)){var a=hn(e.fill);t("fill",a.color);var o=null!=e.fillOpacity?e.fillOpacity*a.opacity*r:a.opacity*r;(i||o<1)&&t("fill-opacity",o)}else t("fill","none");if(function(t){var e=t.stroke;return null!=e&&"none"!==e}(e)){var s=hn(e.stroke);t("stroke",s.color);var l=e.strokeNoScale?n.getLineScale():1,u=l?(e.lineWidth||0)/l:0,c=null!=e.strokeOpacity?e.strokeOpacity*s.opacity*r:s.opacity*r,d=e.strokeFirst;if((i||1!==u)&&t("stroke-width",u),(i||d)&&t("paint-order",d?"stroke":"fill"),(i||c<1)&&t("stroke-opacity",c),e.lineDash){var h=pn(n),p=h[0],f=h[1];p&&(f=kc(f||0),t("stroke-dasharray",p.join(",")),(f||i)&&t("stroke-dashoffset",f))}else i&&t("stroke-dasharray","none");for(var g=0;g<Ic.length;g++){var m=Ic[g];if(i||e[m]!==fn[m]){var v=e[m]||fn[m];v&&t(Dc[g],v)}}}else i&&t("stroke","none")}}((function(r,a){var o="fill"===r||"stroke"===r;o&&Hn(a)?od(e,t,r,i):o&&Gn(a)?sd(n,t,r,i):t[r]=a,o&&i.ssr&&"none"===a&&(t["pointer-events"]="visible")}),e,n,!1),function(t,e,n){var i=t.style;if(Un(i)){var r=Yn(t),a=n.shadowCache,o=a[r];if(!o){var s=t.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var c=i.shadowOffsetX||0,d=i.shadowOffsetY||0,h=i.shadowBlur,p=hn(i.shadowColor),f=p.opacity,g=p.color,m=h/2/l+" "+h/2/u;o=n.zrId+"-s"+n.shadowIdx++,n.defs[o]=Lc("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Lc("feDropShadow","",{dx:c/l,dy:d/u,stdDeviation:m,"flood-color":g,"flood-opacity":f})]),a[r]=o}e.filter=Tn(o)}}(n,t,i)}function Zc(t,e){var n=jn(e);n&&(n.each((function(e,n){null!=e&&(t[("ecmeta_"+n).toLowerCase()]=e+"")})),e.isSilent()&&(t.ecmeta_silent="true"))}function Jc(t){return cn(t[0]-1)&&cn(t[1])&&cn(t[2])&&cn(t[3]-1)}function Kc(t,e,n){if(e&&(!function(t){return cn(t[4])&&cn(t[5])}(e)||!Jc(e))){var i=n?10:1e4;t.transform=Jc(e)?"translate("+Yc(e[4]*i)/i+" "+Yc(e[5]*i)/i+")":Wn(e)}}function Qc(t,e,n){for(var i=t.points,r=[],a=0;a<i.length;a++)r.push(Yc(i[a][0]*n)/n),r.push(Yc(i[a][1]*n)/n);e.points=r.join(" ")}function td(t){return!t.smooth}var ed,nd,id={circle:[(ed=["cx","cy","r"],nd=me(ed,(function(t){return"string"==typeof t?[t,t]:t})),function(t,e,n){for(var i=0;i<nd.length;i++){var r=nd[i],a=t[r[0]];null!=a&&(e[r[1]]=Yc(a*n)/n)}})],polyline:[Qc,td],polygon:[Qc,td]};function rd(t,e){var n=t.style,i=t.shape,r=id[t.type],a={},o=e.animation,s="path",l=t.style.strokePercent,u=e.compress&&wn(t)||4;if(!r||e.willUpdate||r[1]&&!r[1](i)||o&&function(t){for(var e=t.animators,n=0;n<e.length;n++)if("shape"===e[n].targetName)return!0;return!1}(t)||l<1){var c=!t.path||t.shapeChanged();t.path||t.createPathProxy();var d=t.path;c&&(d.beginPath(),t.buildPath(d,t.shape),t.pathUpdated());var h=d.getVersion(),p=t,f=p.__svgPathBuilder;p.__svgPathVersion===h&&f&&l===p.__svgPathStrokePercent||(f||(f=p.__svgPathBuilder=new Cc),f.reset(u),d.rebuildPath(f,l),f.generateStr(),p.__svgPathVersion=h,p.__svgPathStrokePercent=l),a.d=f.getStr()}else{s=t.type;var g=Math.pow(10,u);r[0](i,a,g)}return Kc(a,t.transform),Xc(a,n,t,e),Zc(a,t),e.animation&&Wc(t,a,e),e.emphasis&&function(t,e,n){if(!t.ignore)if(t.isSilent())Uc(u={"pointer-events":"none"},e,n,!0);else{var i=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},r=i.fill;if(!r){var a=t.style&&t.style.fill,o=t.states.select&&t.states.select.style&&t.states.select.style.fill,s=t.currentStates.indexOf("select")>=0&&o||a;s&&(r=Sn(s))}var l=i.lineWidth;l&&(l/=!i.strokeNoScale&&t.transform?t.transform[0]:1);var u={cursor:"pointer"};r&&(u.fill=r),i.stroke&&(u.stroke=i.stroke),l&&(u["stroke-width"]=l),Uc(u,e,n,!0)}}(t,a,e),Lc(s,t.id+"",a)}function ad(t,e){return t instanceof je?rd(t,e):t instanceof dn?function(t,e){var n=t.style,i=n.image;if(i&&!vn(i)&&($c(i)?i=i.src:qc(i)&&(i=i.toDataURL())),i){var r=n.x||0,a=n.y||0,o={href:i,width:n.width,height:n.height};return r&&(o.x=r),a&&(o.y=a),Kc(o,t.transform),Xc(o,n,t,e),Zc(o,t),e.animation&&Wc(t,o,e),Lc("image",t.id+"",o)}}(t,e):t instanceof Cn?function(t,e){var n=t.style,i=n.text;if(null!=i&&(i+=""),i&&!isNaN(n.x)&&!isNaN(n.y)){var r=n.font||Nn,a=n.x||0,o=On(n.y||0,zn(r),n.textBaseline),s={"dominant-baseline":"central","text-anchor":Rn[n.textAlign]||n.textAlign};if(Vn(n)){var l="",u=n.fontStyle,c=Fn(n.fontSize);if(!parseFloat(c))return;var d=n.fontFamily||Bn,h=n.fontWeight;l+="font-size:"+c+";font-family:"+d+";",u&&"normal"!==u&&(l+="font-style:"+u+";"),h&&"normal"!==h&&(l+="font-weight:"+h+";"),s.style=l}else s.style="font: "+r;return i.match(/\s/)&&(s["xml:space"]="preserve"),a&&(s.x=a),o&&(s.y=o),Kc(s,t.transform),Xc(s,n,t,e),Zc(s,t),e.animation&&Wc(t,s,e),Lc("text",t.id+"",s,void 0,i)}}(t,e):void 0}function od(t,e,n,i){var r,a=t[n],o={gradientUnits:a.global?"userSpaceOnUse":"objectBoundingBox"};if(kn(a))r="linearGradient",o.x1=a.x,o.y1=a.y,o.x2=a.x2,o.y2=a.y2;else{if(!In(a))return;r="radialGradient",o.cx=Fe(a.x,.5),o.cy=Fe(a.y,.5),o.r=Fe(a.r,.5)}for(var s=a.colorStops,l=[],u=0,c=s.length;u<c;++u){var d=100*Dn(s[u].offset)+"%",h=s[u].color,p=hn(h),f=p.color,g=p.opacity,m={offset:d};m["stop-color"]=f,g<1&&(m["stop-opacity"]=g),l.push(Lc("stop",u+"",m))}var v=Pc(Lc(r,"",o,l)),y=i.gradientCache,_=y[v];_||(_=i.zrId+"-g"+i.gradientIdx++,y[v]=_,o.id=_,i.defs[_]=Lc(r,_,o,l)),e[n]=Tn(_)}function sd(t,e,n,i){var r,a=t.style[n],o=t.getBoundingRect(),s={},l=a.repeat,u="no-repeat"===l,c="repeat-x"===l,d="repeat-y"===l;if(An(a)){var h=a.imageWidth,p=a.imageHeight,f=void 0,g=a.image;if(vn(g)?f=g:$c(g)?f=g.src:qc(g)&&(f=g.toDataURL()),"undefined"==typeof Image){var m="Image width/height must been given explictly in svg-ssr renderer.";En(h,m),En(p,m)}else if(null==h||null==p){var v=function(t,e){if(t){var n=t.elm,i=h||e.width,r=p||e.height;"pattern"===t.tag&&(c?(r=1,i/=o.width):d&&(i=1,r/=o.height)),t.attrs.width=i,t.attrs.height=r,n&&(n.setAttribute("width",i),n.setAttribute("height",r))}},y=Ln(f,null,t,(function(t){u||v(w,t),v(r,t)}));y&&y.width&&y.height&&(h=h||y.width,p=p||y.height)}r=Lc("image","img",{href:f,width:h,height:p}),s.width=h,s.height=p}else a.svgElement&&(r=Pn(a.svgElement),s.width=a.svgWidth,s.height=a.svgHeight);if(r){var _,x;u?_=x=1:c?(x=1,_=s.width/o.width):d?(_=1,x=s.height/o.height):s.patternUnits="userSpaceOnUse",null==_||isNaN(_)||(s.width=_),null==x||isNaN(x)||(s.height=x);var b=bn(a);b&&(s.patternTransform=b);var w=Lc("pattern","",s,[r]),M=Pc(w),S=i.patternCache,C=S[M];C||(C=i.zrId+"-p"+i.patternIdx++,S[M]=C,s.id=C,w=i.defs[C]=Lc("pattern",C,s,[r])),e[n]=Tn(C)}}function ld(t,e,n){var i=n.clipPathCache,r=n.defs,a=i[t.id];if(!a){var o={id:a=n.zrId+"-c"+n.clipPathIdx++};i[t.id]=a,r[a]=Lc("clipPath",a,o,[rd(t,n)])}e["clip-path"]=Tn(a)}function ud(t){return document.createTextNode(t)}function cd(t,e,n){t.insertBefore(e,n)}function dd(t,e){t.removeChild(e)}function hd(t,e){t.appendChild(e)}function pd(t){return t.parentNode}function fd(t){return t.nextSibling}function gd(t,e){t.textContent=e}var md=Lc("","");function vd(t){return void 0===t}function yd(t){return void 0!==t}function _d(t,e,n){for(var i={},r=e;r<=n;++r){var a=t[r].key;void 0!==a&&(i[a]=r)}return i}function xd(t,e){var n=t.key===e.key;return t.tag===e.tag&&n}function bd(t){var e,n=t.children,i=t.tag;if(yd(i)){var r=t.elm=Ec(i);if(Sd(md,t),pe(n))for(e=0;e<n.length;++e){var a=n[e];null!=a&&hd(r,bd(a))}else yd(t.text)&&!$n(t.text)&&hd(r,ud(t.text))}else t.elm=ud(t.text);return t.elm}function wd(t,e,n,i,r){for(;i<=r;++i){var a=n[i];null!=a&&cd(t,bd(a),e)}}function Md(t,e,n,i){for(;n<=i;++n){var r=e[n];if(null!=r)if(yd(r.tag))dd(pd(r.elm),r.elm);else dd(t,r.elm)}}function Sd(t,e){var n,i=e.elm,r=t&&t.attrs||{},a=e.attrs||{};if(r!==a){for(n in a){var o=a[n];r[n]!==o&&(!0===o?i.setAttribute(n,""):!1===o?i.removeAttribute(n):"style"===n?i.style.cssText=o:120!==n.charCodeAt(0)?i.setAttribute(n,o):"xmlns:xlink"===n||"xmlns"===n?i.setAttributeNS("http://www.w3.org/2000/xmlns/",n,o):58===n.charCodeAt(3)?i.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,o):58===n.charCodeAt(5)?i.setAttributeNS(Ac,n,o):i.setAttribute(n,o))}for(n in r)n in a||i.removeAttribute(n)}}function Cd(t,e){var n=e.elm=t.elm,i=t.children,r=e.children;t!==e&&(Sd(t,e),vd(e.text)?yd(i)&&yd(r)?i!==r&&function(t,e,n){for(var i,r,a,o=0,s=0,l=e.length-1,u=e[0],c=e[l],d=n.length-1,h=n[0],p=n[d];o<=l&&s<=d;)null==u?u=e[++o]:null==c?c=e[--l]:null==h?h=n[++s]:null==p?p=n[--d]:xd(u,h)?(Cd(u,h),u=e[++o],h=n[++s]):xd(c,p)?(Cd(c,p),c=e[--l],p=n[--d]):xd(u,p)?(Cd(u,p),cd(t,u.elm,fd(c.elm)),u=e[++o],p=n[--d]):xd(c,h)?(Cd(c,h),cd(t,c.elm,u.elm),c=e[--l],h=n[++s]):(vd(i)&&(i=_d(e,o,l)),vd(r=i[h.key])||(a=e[r]).tag!==h.tag?cd(t,bd(h),u.elm):(Cd(a,h),e[r]=void 0,cd(t,a.elm,u.elm)),h=n[++s]);(o<=l||s<=d)&&(o>l?wd(t,null==n[d+1]?null:n[d+1].elm,n,s,d):Md(t,e,o,l))}(n,i,r):yd(r)?(yd(t.text)&&gd(n,""),wd(n,null,r,0,r.length-1)):yd(i)?Md(n,i,0,i.length-1):yd(t.text)&&gd(n,""):t.text!==e.text&&(yd(i)&&Md(n,i,0,i.length-1),gd(n,e.text)))}var kd=0;var Id=function(){function t(t,e,n){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=e,this._opts=n=xn({},n),this.root=t,this._id="zr"+kd++,this._oldVNode=Oc(n.width,n.height),t&&!n.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var r=this._svgDom=this._oldVNode.elm=Ec("svg");Sd(null,this._oldVNode),i.appendChild(r),t.appendChild(i)}this.resize(n.width,n.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",function(t,e){if(xd(t,e))Cd(t,e);else{var n=t.elm,i=pd(n);bd(e),null!==i&&(cd(i,e.elm,fd(n)),Md(i,[t],0,0))}}(this._oldVNode,t),this._oldVNode=t}},t.prototype.renderOneToVNode=function(t){return ad(t,Nc(this._id))},t.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),n=this._width,i=this._height,r=Nc(this._id);r.animation=t.animation,r.willUpdate=t.willUpdate,r.compress=t.compress,r.emphasis=t.emphasis,r.ssr=this._opts.ssr;var a=[],o=this._bgVNode=function(t,e,n,i){var r;if(n&&"none"!==n)if(r=Lc("rect","bg",{width:t,height:e,x:"0",y:"0"}),Hn(n))od({fill:n},r.attrs,"fill",i);else if(Gn(n))sd({style:{fill:n},dirty:Zn,getBoundingRect:function(){return{width:t,height:e}}},r.attrs,"fill",i);else{var a=hn(n),o=a.color,s=a.opacity;r.attrs.fill=o,s<1&&(r.attrs["fill-opacity"]=s)}return r}(n,i,this._backgroundColor,r);o&&a.push(o);var s=t.compress?null:this._mainVNode=Lc("g","main",{},[]);this._paintList(e,r,s?s.children:a),s&&a.push(s);var l=me(Ze(r.defs),(function(t){return r.defs[t]}));if(l.length&&a.push(Lc("defs","defs",{},l)),t.animation){var u=function(t,e,n){var i=(n=n||{}).newline?"\n":"",r=" {"+i,a=i+"}",o=me(Ze(t),(function(e){return e+r+me(Ze(t[e]),(function(n){return n+":"+t[e][n]+";"})).join(i)+a})).join(i),s=me(Ze(e),(function(t){return"@keyframes "+t+r+me(Ze(e[t]),(function(n){return n+r+me(Ze(e[t][n]),(function(i){var r=e[t][n][i];return"d"===i&&(r='path("'+r+'")'),i+":"+r+";"})).join(i)+a})).join(i)+a})).join(i);return o||s?["<![CDATA[",o,s,"]]>"].join(i):""}(r.cssNodes,r.cssAnims,{newline:!0});if(u){var c=Lc("style","stl",{},[],u);a.push(c)}}return Oc(n,i,a,t.useViewBox)},t.prototype.renderToString=function(t){return t=t||{},Pc(this.renderToVNode({animation:Fe(t.cssAnimation,!0),emphasis:Fe(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:Fe(t.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(t,e,n){for(var i,r,a=t.length,o=[],s=0,l=0,u=0;u<a;u++){var c=t[u];if(!c.invisible){var d=c.__clipPaths,h=d&&d.length||0,p=r&&r.length||0,f=void 0;for(f=Math.max(h-1,p-1);f>=0&&(!d||!r||d[f]!==r[f]);f--);for(var g=p-1;g>f;g--)i=o[--s-1];for(var m=f+1;m<h;m++){var v={};ld(d[m],v,e);var y=Lc("g","clip-g-"+l++,v,[]);(i?i.children:n).push(y),o[s++]=y,i=y}r=d;var _=ad(c,e);_&&(i?i.children:n).push(_)}}},t.prototype.resize=function(t,e){var n=this._opts,i=this.root,r=this._viewport;if(null!=t&&(n.width=t),null!=e&&(n.height=e),i&&r&&(r.style.display="none",t=qn(i,0,n),e=qn(i,1,n),r.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,r){var a=r.style;a.width=t+"px",a.height=e+"px"}if(Gn(this._backgroundColor))this.refresh();else{var o=this._svgDom;o&&(o.setAttribute("width",t),o.setAttribute("height",e));var s=this._bgVNode&&this._bgVNode.elm;s&&(s.setAttribute("width",t),s.setAttribute("height",e))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(t){var e=this.renderToString(),n="data:image/svg+xml;";return t?(e=Xn(e))&&n+"base64,"+e:n+"charset=UTF-8,"+encodeURIComponent(e)},t}();var Dd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return _e(e,t),e.prototype.getInitialData=function(t){return hu(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new Jn,n=Kn("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(n),n.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),r=this.getData().getVisual("symbolRotate"),a="none"===i?"circle":i,o=.8*t.itemHeight,s=Kn(a,(t.itemWidth-o)/2,(t.itemHeight-o)/2,o,o,t.itemStyle.fill);e.add(s),s.setStyle(t.itemStyle);var l="inherit"===t.iconRotate?r:t.iconRotate||0;return s.rotation=l*Math.PI/180,s.setOrigin([t.itemWidth/2,t.itemHeight/2]),a.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(Qn);function Td(t,e){var n=t.mapDimensionsAll("defaultedLabel"),i=n.length;if(1===i){var r=ti(t,e,n[0]);return null!=r?r+"":null}if(i){for(var a=[],o=0;o<n.length;o++)a.push(ti(t,e,n[o]));return a.join(" ")}}function Ad(t,e){var n=t.mapDimensionsAll("defaultedLabel");if(!pe(e))return e+"";for(var i=[],r=0;r<n.length;r++){var a=t.getDimensionIndex(n[r]);a>=0&&i.push(e[a])}return i.join(" ")}function Ed(t,e){this.parent.drift(t,e)}var Ld=function(t){function e(e,n,i,r){var a=t.call(this)||this;return a.updateData(e,n,i,r),a}return _e(e,t),e.prototype._createSymbol=function(t,e,n,i,r){this.removeAll();var a=Kn(t,-1,-1,2,2,null,r);a.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),a.drift=Ed,this._symbolType=t,this.add(a)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){ei(this.childAt(0))},e.prototype.downplay=function(){ni(this.childAt(0))},e.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},e.prototype.setDraggable=function(t,e){var n=this.childAt(0);n.draggable=t,n.cursor=!e&&t?"move":n.cursor},e.prototype.updateData=function(t,n,i,r){this.silent=!1;var a=t.getItemVisual(n,"symbol")||"circle",o=t.hostModel,s=e.getSymbolSize(t,n),l=a!==this._symbolType,u=r&&r.disableAnimation;if(l){var c=t.getItemVisual(n,"symbolKeepAspect");this._createSymbol(a,t,n,s,c)}else{(h=this.childAt(0)).silent=!1;var d={scaleX:s[0]/2,scaleY:s[1]/2};u?h.attr(d):ln(h,d,o,n),ii(h)}if(this._updateCommon(t,n,s,i,r),l){var h=this.childAt(0);if(!u){d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,on(h,d,o,n)}}u&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,e,n,i,r){var a,o,s,l,u,c,d,h,p,f=this.childAt(0),g=t.hostModel;if(i&&(a=i.emphasisItemStyle,o=i.blurItemStyle,s=i.selectItemStyle,l=i.focus,u=i.blurScope,d=i.labelStatesModels,h=i.hoverScale,p=i.cursorStyle,c=i.emphasisDisabled),!i||t.hasItemOption){var m=i&&i.itemModel?i.itemModel:t.getItemModel(e),v=m.getModel("emphasis");a=v.getModel("itemStyle").getItemStyle(),s=m.getModel(["select","itemStyle"]).getItemStyle(),o=m.getModel(["blur","itemStyle"]).getItemStyle(),l=v.get("focus"),u=v.get("blurScope"),c=v.get("disabled"),d=ri(m),h=v.getShallow("scale"),p=m.getShallow("cursor")}var y=t.getItemVisual(e,"symbolRotate");f.attr("rotation",(y||0)*Math.PI/180||0);var _=ai(t.getItemVisual(e,"symbolOffset"),n);_&&(f.x=_[0],f.y=_[1]),p&&f.attr("cursor",p);var x=t.getItemVisual(e,"style"),b=x.fill;if(f instanceof dn){var w=f.style;f.useStyle(xn({image:w.image,x:w.x,y:w.y,width:w.width,height:w.height},x))}else f.__isEmptyBrush?f.useStyle(xn({},x)):f.useStyle(x),f.style.decal=null,f.setColor(b,r&&r.symbolInnerColor),f.style.strokeNoScale=!0;var M=t.getItemVisual(e,"liftZ"),S=this._z2;null!=M?null==S&&(this._z2=f.z2,f.z2+=M):null!=S&&(f.z2=S,this._z2=null);var C=r&&r.useNameLabel;oi(f,d,{labelFetcher:g,labelDataIndex:e,defaultText:function(e){return C?t.getName(e):Td(t,e)},inheritColor:b,defaultOpacity:x.opacity}),this._sizeX=n[0]/2,this._sizeY=n[1]/2;var k=f.ensureState("emphasis");k.style=a,f.ensureState("select").style=s,f.ensureState("blur").style=o;var I=null==h||!0===h?Math.max(1.1,3/this._sizeY):isFinite(h)&&h>0?+h:1;k.scaleX=this._sizeX*I,k.scaleY=this._sizeY*I,this.setSymbolScale(1),si(this,l,u,c)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e,n){var i=this.childAt(0),r=Je(this).dataIndex,a=n&&n.animation;if(this.silent=i.silent=!0,n&&n.fadeLabel){var o=i.getTextContent();o&&li(o,{style:{opacity:0}},e,{dataIndex:r,removeOpt:a,cb:function(){i.removeTextContent()}})}else i.removeTextContent();li(i,{style:{opacity:0},scaleX:0,scaleY:0},e,{dataIndex:r,cb:t,removeOpt:a})},e.getSymbolSize=function(t,e){return ui(t.getItemVisual(e,"symbolSize"))},e}(Jn);function Pd(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function Nd(t){return null==t||$n(t)||(t={isIgnore:t}),t||{}}function Od(t){var e=t.hostModel,n=e.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:ri(e),cursorStyle:e.get("cursor")}}var zd=function(){function t(t){this.group=new Jn,this._SymbolCtor=t||Ld}return t.prototype.updateData=function(t,e){this._progressiveEls=null,e=Nd(e);var n=this.group,i=t.hostModel,r=this._data,a=this._SymbolCtor,o=e.disableAnimation,s=Od(t),l={disableAnimation:o},u=e.getSymbolPoint||function(e){return t.getItemLayout(e)};r||n.removeAll(),t.diff(r).add((function(i){var r=u(i);if(Pd(t,r,i,e)){var o=new a(t,i,s,l);o.setPosition(r),t.setItemGraphicEl(i,o),n.add(o)}})).update((function(c,d){var h=r.getItemGraphicEl(d),p=u(c);if(Pd(t,p,c,e)){var f=t.getItemVisual(c,"symbol")||"circle",g=h&&h.getSymbolType&&h.getSymbolType();if(!h||g&&g!==f)n.remove(h),(h=new a(t,c,s,l)).setPosition(p);else{h.updateData(t,c,s,l);var m={x:p[0],y:p[1]};o?h.attr(m):ln(h,m,i)}n.add(h),t.setItemGraphicEl(c,h)}else n.remove(h)})).remove((function(t){var e=r.getItemGraphicEl(t);e&&e.fadeOut((function(){n.remove(e)}),i)})).execute(),this._getSymbolPoint=u,this._data=t},t.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl((function(e,n){var i=t._getSymbolPoint(n);e.setPosition(i),e.markRedraw()}))},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Od(t),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e,n){function i(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],n=Nd(n);for(var r=t.start;r<t.end;r++){var a=e.getItemLayout(r);if(Pd(e,a,r,n)){var o=new this._SymbolCtor(e,r,this._seriesScope);o.traverse(i),o.setPosition(a),this.group.add(o),e.setItemGraphicEl(r,o),this._progressiveEls.push(o)}}},t.prototype.eachRendered=function(t){ci(this._progressiveEls||this.group,t)},t.prototype.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl((function(t){t.fadeOut((function(){e.remove(t)}),n.hostModel)})):e.removeAll()},t}();function Rd(t,e,n){var i=t.getBaseAxis(),r=t.getOtherAxis(i),a=function(t,e){var n=0,i=t.scale.getExtent();"start"===e?n=i[0]:"end"===e?n=i[1]:Mn(e)&&!isNaN(e)?n=e:i[0]>0?n=i[0]:i[1]<0&&(n=i[1]);return n}(r,n),o=i.dim,s=r.dim,l=e.mapDimension(s),u=e.mapDimension(o),c="x"===s||"radius"===s?1:0,d=me(t.dimensions,(function(t){return e.mapDimension(t)})),h=!1,p=e.getCalculationInfo("stackResultDimension");return di(e,d[0])&&(h=!0,d[0]=p),di(e,d[1])&&(h=!0,d[1]=p),{dataDimsForPoint:d,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Vd(t,e,n,i){var r=NaN;t.stacked&&(r=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=t.valueStart);var a=t.baseDataOffset,o=[];return o[a]=n.get(t.baseDim,i),o[1-a]=r,e.dataToPoint(o)}var Fd=Math.min,Bd=Math.max;function Hd(t,e){return isNaN(t)||isNaN(e)}function Gd(t,e,n,i,r,a,o,s,l){for(var u,c,d,h,p,f,g=n,m=0;m<i;m++){var v=e[2*g],y=e[2*g+1];if(g>=r||g<0)break;if(Hd(v,y)){if(l){g+=a;continue}break}if(g===n)t[a>0?"moveTo":"lineTo"](v,y),d=v,h=y;else{var _=v-u,x=y-c;if(_*_+x*x<.5){g+=a;continue}if(o>0){for(var b=g+a,w=e[2*b],M=e[2*b+1];w===v&&M===y&&m<i;)m++,g+=a,w=e[2*(b+=a)],M=e[2*b+1],_=(v=e[2*g])-u,x=(y=e[2*g+1])-c;var S=m+1;if(l)for(;Hd(w,M)&&S<i;)S++,w=e[2*(b+=a)],M=e[2*b+1];var C=.5,k=0,I=0,D=void 0,T=void 0;if(S>=i||Hd(w,M))p=v,f=y;else{k=w-u,I=M-c;var A=v-u,E=w-v,L=y-c,P=M-y,N=void 0,O=void 0;if("x"===s){var z=k>0?1:-1;p=v-z*(N=Math.abs(A))*o,f=y,D=v+z*(O=Math.abs(E))*o,T=y}else if("y"===s){var R=I>0?1:-1;p=v,f=y-R*(N=Math.abs(L))*o,D=v,T=y+R*(O=Math.abs(P))*o}else N=Math.sqrt(A*A+L*L),p=v-k*o*(1-(C=(O=Math.sqrt(E*E+P*P))/(O+N))),f=y-I*o*(1-C),T=y+I*o*C,D=Fd(D=v+k*o*C,Bd(w,v)),T=Fd(T,Bd(M,y)),D=Bd(D,Fd(w,v)),f=y-(I=(T=Bd(T,Fd(M,y)))-y)*N/O,p=Fd(p=v-(k=D-v)*N/O,Bd(u,v)),f=Fd(f,Bd(c,y)),D=v+(k=v-(p=Bd(p,Fd(u,v))))*O/N,T=y+(I=y-(f=Bd(f,Fd(c,y))))*O/N}t.bezierCurveTo(d,h,p,f,v,y),d=D,h=T}else t.lineTo(v,y)}u=v,c=y,g+=a}return m}var jd=function(){this.smooth=0,this.smoothConstraint=!0},Wd=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polyline",n}return _e(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new jd},e.prototype.buildPath=function(t,e){var n=e.points,i=0,r=n.length/2;if(e.connectNulls){for(;r>0&&Hd(n[2*r-2],n[2*r-1]);r--);for(;i<r&&Hd(n[2*i],n[2*i+1]);i++);}for(;i<r;)i+=Gd(t,n,i,r,r,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,i,r=this.path.data,a=ze.CMD,o="x"===e,s=[],l=0;l<r.length;){var u=void 0,c=void 0,d=void 0,h=void 0,p=void 0,f=void 0,g=void 0;switch(r[l++]){case a.M:n=r[l++],i=r[l++];break;case a.L:if(u=r[l++],c=r[l++],(g=o?(t-n)/(u-n):(t-i)/(c-i))<=1&&g>=0){var m=o?(c-i)*g+i:(u-n)*g+n;return o?[t,m]:[m,t]}n=u,i=c;break;case a.C:u=r[l++],c=r[l++],d=r[l++],h=r[l++],p=r[l++],f=r[l++];var v=o?pi(n,u,d,p,t,s):pi(i,c,h,f,t,s);if(v>0)for(var y=0;y<v;y++){var _=s[y];if(_<=1&&_>=0){m=o?fi(i,c,h,f,_):fi(n,u,d,p,_);return o?[t,m]:[m,t]}}n=p,i=f}}},e}(je),Ud=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e}(jd),Yd=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polygon",n}return _e(e,t),e.prototype.getDefaultShape=function(){return new Ud},e.prototype.buildPath=function(t,e){var n=e.points,i=e.stackedOnPoints,r=0,a=n.length/2,o=e.smoothMonotone;if(e.connectNulls){for(;a>0&&Hd(n[2*a-2],n[2*a-1]);a--);for(;r<a&&Hd(n[2*r],n[2*r+1]);r++);}for(;r<a;){var s=Gd(t,n,r,a,a,1,e.smooth,o,e.connectNulls);Gd(t,i,r+s-1,s,a,-1,e.stackedOnSmooth,o,e.connectNulls),r+=s+1,t.closePath()}},e}(je);function $d(t,e,n,i,r){var a=t.getArea(),o=a.x,s=a.y,l=a.width,u=a.height,c=n.get(["lineStyle","width"])||0;o-=c/2,s-=c/2,l+=c,u+=c,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var d=new gi({shape:{x:o,y:s,width:l,height:u}});if(e){var h=t.getBaseAxis(),p=h.isHorizontal(),f=h.inverse;p?(f&&(d.shape.x+=l),d.shape.width=0):(f||(d.shape.y+=u),d.shape.height=0);var g=se(r)?function(t){r(t,d)}:null;on(d,{shape:{width:l,height:u,x:o,y:s}},n,null,i,g)}return d}function qd(t,e,n){var i=t.getArea(),r=Oe(i.r0,1),a=Oe(i.r,1),o=new mi({shape:{cx:Oe(t.cx,1),cy:Oe(t.cy,1),r0:r,r:a,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});e&&("angle"===t.getBaseAxis().dim?o.shape.endAngle=i.startAngle:o.shape.r=r,on(o,{shape:{endAngle:i.endAngle,r:a}},n));return o}function Xd(t,e,n,i,r){return t?"polar"===t.type?qd(t,e,n):"cartesian2d"===t.type?$d(t,e,n,i,r):null:null}function Zd(t,e){return t.type===e}function Jd(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return!0}}function Kd(t){for(var e=1/0,n=1/0,i=-1/0,r=-1/0,a=0;a<t.length;){var o=t[a++],s=t[a++];isNaN(o)||(e=Math.min(o,e),i=Math.max(o,i)),isNaN(s)||(n=Math.min(s,n),r=Math.max(s,r))}return[[e,n],[i,r]]}function Qd(t,e){var n=Kd(t),i=n[0],r=n[1],a=Kd(e),o=a[0],s=a[1];return Math.max(Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1]),Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]))}function th(t){return Mn(t)?t:t?.5:0}function eh(t,e,n,i,r){var a=n.getBaseAxis(),o="x"===a.dim||"radius"===a.dim?0:1,s=[],l=0,u=[],c=[],d=[],h=[];if(r){for(l=0;l<t.length;l+=2){var p=e||t;isNaN(p[l])||isNaN(p[l+1])||h.push(t[l],t[l+1])}t=h}for(l=0;l<t.length-2;l+=2)switch(d[0]=t[l+2],d[1]=t[l+3],c[0]=t[l],c[1]=t[l+1],s.push(c[0],c[1]),i){case"end":u[o]=d[o],u[1-o]=c[1-o],s.push(u[0],u[1]);break;case"middle":var f=(c[o]+d[o])/2,g=[];u[o]=g[o]=f,u[1-o]=c[1-o],g[1-o]=d[1-o],s.push(u[0],u[1]),s.push(g[0],g[1]);break;default:u[o]=c[o],u[1-o]=d[1-o],s.push(u[0],u[1])}return s.push(t[l++],t[l++]),s}function nh(t,e,n){var i=t.getVisual("visualMeta");if(i&&i.length&&t.count()&&"cartesian2d"===e.type){for(var r,a,o=i.length-1;o>=0;o--){var s=t.getDimensionInfo(i[o].dimension);if("x"===(r=s&&s.coordDim)||"y"===r){a=i[o];break}}if(a){var l=e.getAxis(r),u=me(a.stops,(function(t){return{coord:l.toGlobalCoord(l.dataToCoord(t.value)),color:t.color}})),c=u.length,d=a.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),d.reverse());var h=function(t,e){var n,i,r=[],a=t.length;function o(t,e,n){var i=t.coord,r=(n-i)/(e.coord-i);return{coord:n,color:ki(r,[t.color,e.color])}}for(var s=0;s<a;s++){var l=t[s],u=l.coord;if(u<0)n=l;else{if(u>e){i?r.push(o(i,l,e)):n&&r.push(o(n,l,0),o(n,l,e));break}n&&(r.push(o(n,l,0)),n=null),r.push(l),i=l}}return r}(u,"x"===r?n.getWidth():n.getHeight()),p=h.length;if(!p&&c)return u[0].coord<0?d[1]?d[1]:u[c-1].color:d[0]?d[0]:u[0].color;var f=h[0].coord-10,g=h[p-1].coord+10,m=g-f;if(m<.001)return"transparent";ie(h,(function(t){t.offset=(t.coord-f)/m})),h.push({offset:p?h[p-1].offset:.5,color:d[1]||"transparent"}),h.unshift({offset:p?h[0].offset:.5,color:d[0]||"transparent"});var v=new Ci(0,0,0,0,h,!0);return v[r]=f,v[r+"2"]=g,v}}}function ih(t,e,n){var i=t.get("showAllSymbol"),r="auto"===i;if(!i||r){var a=n.getAxesByScale("ordinal")[0];if(a&&(!r||!function(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var r=e.count(),a=Math.max(1,Math.round(r/5)),o=0;o<r;o+=a)if(1.5*Ld.getSymbolSize(e,o)[t.isHorizontal()?1:0]>i)return!1;return!0}(a,e))){var o=e.mapDimension(a.dim),s={};return ie(a.getViewLabels(),(function(t){var e=a.scale.getRawOrdinalNumber(t.tickValue);s[e]=1})),function(t){return!s.hasOwnProperty(e.get(o,t))}}}}function rh(t,e){return[t[2*e],t[2*e+1]]}function ah(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<Ge.length;e++)if(t.get([Ge[e],"endLabel","show"]))return!0;return!1}function oh(t,e,n,i){if(Zd(e,"cartesian2d")){var r=i.getModel("endLabel"),a=r.get("valueAnimation"),o=i.getData(),s={lastFrameIndex:0},l=ah(i)?function(n,i){t._endLabelOnDuring(n,i,o,s,a,r,e)}:null,u=e.getBaseAxis().isHorizontal(),c=$d(e,n,i,(function(){var e=t._endLabel;e&&n&&null!=s.originalX&&e.attr({x:s.originalX,y:s.originalY})}),l);if(!i.get("clip",!0)){var d=c.shape,h=Math.max(d.width,d.height);u?(d.y-=h,d.height+=2*h):(d.x-=h,d.width+=2*h)}return l&&l(1,c),c}return qd(e,n,i)}var sh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.init=function(){var t=new Jn,e=new zd;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t,this._changePolyState=vi(this._changePolyState,this)},e.prototype.render=function(t,e,n){var i=t.coordinateSystem,r=this.group,a=t.getData(),o=t.getModel("lineStyle"),s=t.getModel("areaStyle"),l=a.getLayout("points")||[],u="polar"===i.type,c=this._coordSys,d=this._symbolDraw,h=this._polyline,p=this._polygon,f=this._lineGroup,g=!e.ssr&&t.get("animation"),m=!s.isEmpty(),v=s.get("origin"),y=Rd(i,a,v),_=m&&function(t,e,n){if(!n.valueDim)return[];for(var i=e.count(),r=hi(2*i),a=0;a<i;a++){var o=Vd(n,t,e,a);r[2*a]=o[0],r[2*a+1]=o[1]}return r}(i,a,y),x=t.get("showSymbol"),b=t.get("connectNulls"),w=x&&!u&&ih(t,a,i),M=this._data;M&&M.eachItemGraphicEl((function(t,e){t.__temp&&(r.remove(t),M.setItemGraphicEl(e,null))})),x||d.remove(),r.add(f);var S,C=!u&&t.get("step");i&&i.getArea&&t.get("clip",!0)&&(null!=(S=i.getArea()).width?(S.x-=.1,S.y-=.1,S.width+=.2,S.height+=.2):S.r0&&(S.r0-=.5,S.r+=.5)),this._clipShapeForSymbol=S;var k=nh(a,i,n)||a.getVisual("style")[a.getVisual("drawType")];if(h&&c.type===i.type&&C===this._step){m&&!p?p=this._newPolygon(l,_):p&&!m&&(f.remove(p),p=this._polygon=null),u||this._initOrUpdateEndLabel(t,i,yi(k));var I=f.getClipPath();if(I){var D=oh(this,i,!1,t);on(I,{shape:D.shape},t)}else f.setClipPath(oh(this,i,!0,t));x&&d.updateData(a,{isIgnore:w,clipShape:S,disableAnimation:!0,getSymbolPoint:function(t){return[l[2*t],l[2*t+1]]}}),Jd(this._stackedOnPoints,_)&&Jd(this._points,l)||(g?this._doUpdateAnimation(a,_,i,n,C,v,b):(C&&(_&&(_=eh(_,l,i,C,b)),l=eh(l,null,i,C,b)),h.setShape({points:l}),p&&p.setShape({points:l,stackedOnPoints:_})))}else x&&d.updateData(a,{isIgnore:w,clipShape:S,disableAnimation:!0,getSymbolPoint:function(t){return[l[2*t],l[2*t+1]]}}),g&&this._initSymbolLabelAnimation(a,i,S),C&&(_&&(_=eh(_,l,i,C,b)),l=eh(l,null,i,C,b)),h=this._newPolyline(l),m?p=this._newPolygon(l,_):p&&(f.remove(p),p=this._polygon=null),u||this._initOrUpdateEndLabel(t,i,yi(k)),f.setClipPath(oh(this,i,!0,t));var T=t.getModel("emphasis"),A=T.get("focus"),E=T.get("blurScope"),L=T.get("disabled");(h.useStyle(He(o.getLineStyle(),{fill:"none",stroke:k,lineJoin:"bevel"})),_i(h,t,"lineStyle"),h.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"]))&&(h.getState("emphasis").style.lineWidth=+h.style.lineWidth+1);Je(h).seriesIndex=t.seriesIndex,si(h,A,E,L);var P=th(t.get("smooth")),N=t.get("smoothMonotone");if(h.setShape({smooth:P,smoothMonotone:N,connectNulls:b}),p){var O=a.getCalculationInfo("stackedOnSeries"),z=0;p.useStyle(He(s.getAreaStyle(),{fill:k,opacity:.7,lineJoin:"bevel",decal:a.getVisual("style").decal})),O&&(z=th(O.get("smooth"))),p.setShape({smooth:P,stackedOnSmooth:z,smoothMonotone:N,connectNulls:b}),_i(p,t,"areaStyle"),Je(p).seriesIndex=t.seriesIndex,si(p,A,E,L)}var R=this._changePolyState;a.eachItemGraphicEl((function(t){t&&(t.onHoverStateChange=R)})),this._polyline.onHoverStateChange=R,this._data=a,this._coordSys=i,this._stackedOnPoints=_,this._points=l,this._step=C,this._valueOrigin=v,t.get("triggerLineEvent")&&(this.packEventData(t,h),p&&this.packEventData(t,p))},e.prototype.packEventData=function(t,e){Je(e).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,e,n,i){var r=t.getData(),a=xi(r,i);if(this._changePolyState("emphasis"),!(a instanceof Array)&&null!=a&&a>=0){var o=r.getLayout("points"),s=r.getItemGraphicEl(a);if(!s){var l=o[2*a],u=o[2*a+1];if(isNaN(l)||isNaN(u))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,u))return;var c=t.get("zlevel")||0,d=t.get("z")||0;(s=new Ld(r,a)).x=l,s.y=u,s.setZ(c,d);var h=s.getSymbolPath().getTextContent();h&&(h.zlevel=c,h.z=d,h.z2=this._polyline.z2+1),s.__temp=!0,r.setItemGraphicEl(a,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else bi.prototype.highlight.call(this,t,e,n,i)},e.prototype.downplay=function(t,e,n,i){var r=t.getData(),a=xi(r,i);if(this._changePolyState("normal"),null!=a&&a>=0){var o=r.getItemGraphicEl(a);o&&(o.__temp?(r.setItemGraphicEl(a,null),this.group.remove(o)):o.downplay())}else bi.prototype.downplay.call(this,t,e,n,i)},e.prototype._changePolyState=function(t){var e=this._polygon;wi(this._polyline,t),e&&wi(e,t)},e.prototype._newPolyline=function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new Wd({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(e),this._polyline=e,e},e.prototype._newPolygon=function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Yd({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,e,n){var i,r,a=e.getBaseAxis(),o=a.inverse;"cartesian2d"===e.type?(i=a.isHorizontal(),r=!1):"polar"===e.type&&(i="angle"===a.dim,r=!0);var s=t.hostModel,l=s.get("animationDuration");se(l)&&(l=l(null));var u=s.get("animationDelay")||0,c=se(u)?u(null):u;t.eachItemGraphicEl((function(t,a){var s=t;if(s){var d=[t.x,t.y],h=void 0,p=void 0,f=void 0;if(n)if(r){var g=n,m=e.pointToCoord(d);i?(h=g.startAngle,p=g.endAngle,f=-m[1]/180*Math.PI):(h=g.r0,p=g.r,f=m[0])}else{var v=n;i?(h=v.x,p=v.x+v.width,f=t.x):(h=v.y+v.height,p=v.y,f=t.y)}var y=p===h?0:(f-h)/(p-h);o&&(y=1-y);var _=se(u)?u(a):l*y+c,x=s.getSymbolPath(),b=x.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:_}),b&&b.animateFrom({style:{opacity:0}},{duration:300,delay:_}),x.disableLabelAnimation=!0}}))},e.prototype._initOrUpdateEndLabel=function(t,e,n){var i=t.getModel("endLabel");if(ah(t)){var r=t.getData(),a=this._polyline,o=r.getLayout("points");if(!o)return a.removeTextContent(),void(this._endLabel=null);var s=this._endLabel;s||((s=this._endLabel=new Mi({z2:200})).ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var l=function(t){for(var e,n,i=t.length/2;i>0&&(e=t[2*i-2],n=t[2*i-1],isNaN(e)||isNaN(n));i--);return i-1}(o);l>=0&&(oi(a,ri(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:l,defaultText:function(t,e,n){return null!=n?Ad(r,n):Td(r,t)},enableTextSetter:!0},function(t,e){var n=e.getBaseAxis(),i=n.isHorizontal(),r=n.inverse,a=i?r?"right":"left":"center",o=i?"middle":r?"top":"bottom";return{normal:{align:t.get("align")||a,verticalAlign:t.get("verticalAlign")||o}}}(i,e)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,n,i,r,a,o){var s=this._endLabel,l=this._polyline;if(s){t<1&&null==i.originalX&&(i.originalX=s.x,i.originalY=s.y);var u=n.getLayout("points"),c=n.hostModel,d=c.get("connectNulls"),h=a.get("precision"),p=a.get("distance")||0,f=o.getBaseAxis(),g=f.isHorizontal(),m=f.inverse,v=e.shape,y=m?g?v.x:v.y+v.height:g?v.x+v.width:v.y,_=(g?p:0)*(m?-1:1),x=(g?0:-p)*(m?-1:1),b=g?"x":"y",w=function(t,e,n){for(var i,r,a=t.length/2,o="x"===n?0:1,s=0,l=-1,u=0;u<a;u++)if(r=t[2*u+o],!isNaN(r)&&!isNaN(t[2*u+1-o]))if(0!==u){if(i<=e&&r>=e||i>=e&&r<=e){l=u;break}s=u,i=r}else i=r;return{range:[s,l],t:(e-i)/(r-i)}}(u,y,b),M=w.range,S=M[1]-M[0],C=void 0;if(S>=1){if(S>1&&!d){var k=rh(u,M[0]);s.attr({x:k[0]+_,y:k[1]+x}),r&&(C=c.getRawValue(M[0]))}else{(k=l.getPointOn(y,b))&&s.attr({x:k[0]+_,y:k[1]+x});var I=c.getRawValue(M[0]),D=c.getRawValue(M[1]);r&&(C=Si(n,h,I,D,w.t))}i.lastFrameIndex=M[0]}else{var T=1===t||i.lastFrameIndex>0?M[0]:0;k=rh(u,T);r&&(C=c.getRawValue(T)),s.attr({x:k[0]+_,y:k[1]+x})}if(r){var A=an(s);"function"==typeof A.setLabelText&&A.setLabelText(C)}}},e.prototype._doUpdateAnimation=function(t,e,n,i,r,a,o){var s=this._polyline,l=this._polygon,u=t.hostModel,c=function(t,e,n,i,r,a,o,s){for(var l=function(t,e){var n=[];return e.diff(t).add((function(t){n.push({cmd:"+",idx:t})})).update((function(t,e){n.push({cmd:"=",idx:e,idx1:t})})).remove((function(t){n.push({cmd:"-",idx:t})})).execute(),n}(t,e),u=[],c=[],d=[],h=[],p=[],f=[],g=[],m=Rd(r,e,o),v=t.getLayout("points")||[],y=e.getLayout("points")||[],_=0;_<l.length;_++){var x=l[_],b=!0,w=void 0,M=void 0;switch(x.cmd){case"=":w=2*x.idx,M=2*x.idx1;var S=v[w],C=v[w+1],k=y[M],I=y[M+1];(isNaN(S)||isNaN(C))&&(S=k,C=I),u.push(S,C),c.push(k,I),d.push(n[w],n[w+1]),h.push(i[M],i[M+1]),g.push(e.getRawIndex(x.idx1));break;case"+":var D=x.idx,T=m.dataDimsForPoint,A=r.dataToPoint([e.get(T[0],D),e.get(T[1],D)]);M=2*D,u.push(A[0],A[1]),c.push(y[M],y[M+1]);var E=Vd(m,r,e,D);d.push(E[0],E[1]),h.push(i[M],i[M+1]),g.push(e.getRawIndex(D));break;case"-":b=!1}b&&(p.push(x),f.push(f.length))}f.sort((function(t,e){return g[t]-g[e]}));var L=u.length,P=hi(L),N=hi(L),O=hi(L),z=hi(L),R=[];for(_=0;_<f.length;_++){var V=f[_],F=2*_,B=2*V;P[F]=u[B],P[F+1]=u[B+1],N[F]=c[B],N[F+1]=c[B+1],O[F]=d[B],O[F+1]=d[B+1],z[F]=h[B],z[F+1]=h[B+1],R[_]=p[V]}return{current:P,next:N,stackedOnCurrent:O,stackedOnNext:z,status:R}}(this._data,t,this._stackedOnPoints,e,this._coordSys,0,this._valueOrigin),d=c.current,h=c.stackedOnCurrent,p=c.next,f=c.stackedOnNext;if(r&&(h=eh(c.stackedOnCurrent,c.current,n,r,o),d=eh(c.current,null,n,r,o),f=eh(c.stackedOnNext,c.next,n,r,o),p=eh(c.next,null,n,r,o)),Qd(d,p)>3e3||l&&Qd(h,f)>3e3)return s.stopAnimation(),s.setShape({points:p}),void(l&&(l.stopAnimation(),l.setShape({points:p,stackedOnPoints:f})));s.shape.__points=c.current,s.shape.points=d;var g={shape:{points:p}};c.current!==d&&(g.shape.__points=c.next),s.stopAnimation(),ln(s,g,u),l&&(l.setShape({points:d,stackedOnPoints:h}),l.stopAnimation(),ln(l,{shape:{stackedOnPoints:f}},u),s.shape.points!==l.shape.points&&(l.shape.points=s.shape.points));for(var m=[],v=c.status,y=0;y<v.length;y++){if("="===v[y].cmd){var _=t.getItemGraphicEl(v[y].idx1);_&&m.push({el:_,ptIdx:y})}}s.animators&&s.animators.length&&s.animators[0].during((function(){l&&l.dirtyShape();for(var t=s.shape.__points,e=0;e<m.length;e++){var n=m[e].el,i=2*m[e].ptIdx;n.x=t[i],n.y=t[i+1],n.markRedraw()}}))},e.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(t,i){t.__temp&&(e.remove(t),n.setItemGraphicEl(i,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(bi);function lh(t,e){return{seriesType:t,plan:Ii(),reset:function(t){var n=t.getData(),i=t.coordinateSystem,r=t.pipelineContext,a=e||r.large;if(i){var o=me(i.dimensions,(function(t){return n.mapDimension(t)})).slice(0,2),s=o.length,l=n.getCalculationInfo("stackResultDimension");di(n,o[0])&&(o[0]=l),di(n,o[1])&&(o[1]=l);var u=n.getStore(),c=n.getDimensionIndex(o[0]),d=n.getDimensionIndex(o[1]);return s&&{progress:function(t,e){for(var n=t.end-t.start,r=a&&hi(n*s),o=[],l=[],h=t.start,p=0;h<t.end;h++){var f=void 0;if(1===s){var g=u.get(c,h);f=i.dataToPoint(g,null,l)}else o[0]=u.get(c,h),o[1]=u.get(d,h),f=i.dataToPoint(o,null,l);a?(r[p++]=f[0],r[p++]=f[1]):e.setItemLayout(h,f.slice())}a&&e.setLayout("points",r)}}}}}}var uh={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},ch=function(t){return Math.round(t.length/2)};function dh(t){return{seriesType:t,reset:function(t,e,n){var i=t.getData(),r=t.get("sampling"),a=t.coordinateSystem,o=i.count();if(o>10&&"cartesian2d"===a.type&&r){var s=a.getBaseAxis(),l=a.getOtherAxis(s),u=s.getExtent(),c=n.getDevicePixelRatio(),d=Math.abs(u[1]-u[0])*(c||1),h=Math.round(o/d);if(isFinite(h)&&h>1){"lttb"===r?t.setData(i.lttbDownSample(i.mapDimension(l.dim),1/h)):"minmax"===r&&t.setData(i.minmaxDownSample(i.mapDimension(l.dim),1/h));var p=void 0;vn(r)?p=uh[r]:se(r)&&(p=r),p&&t.setData(i.downSample(i.mapDimension(l.dim),1/h,p,ch))}}}}}var hh=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.getInitialData=function(t,e){return hu(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,e,n){var i=this.coordinateSystem;if(i&&i.clampData){var r=i.clampData(t),a=i.dataToPoint(r);if(n)ie(i.getAxes(),(function(t,n){if("category"===t.type&&null!=e){var i=t.getTicksCoords(),o=t.getTickModel().get("alignWithLabel"),s=r[n],l="x1"===e[n]||"y1"===e[n];if(l&&!o&&(s+=1),i.length<2)return;if(2===i.length)return void(a[n]=t.toGlobalCoord(t.getExtent()[l?1:0]));for(var u=void 0,c=void 0,d=1,h=0;h<i.length;h++){var p=i[h].coord,f=h===i.length-1?i[h-1].tickValue+d:i[h].tickValue;if(f===s){c=p;break}if(f<s)u=p;else if(null!=u&&f>s){c=(p+u)/2;break}1===h&&(d=f-i[0].tickValue)}null==c&&(u?u&&(c=i[i.length-1].coord):c=i[0].coord),a[n]=t.toGlobalCoord(c)}}));else{var o=this.getData(),s=o.getLayout("offset"),l=o.getLayout("size"),u=i.getBaseAxis().isHorizontal()?0:1;a[u]+=s+l/2}return a}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Qn);Qn.registerClass(hh);var ph=hh,fh=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.getInitialData=function(){return hu(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},e.prototype.brushSelector=function(t,e,n){return n.rect(e.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Di(ph.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(ph);function gh(t,e,n){return e*Math.sin(t)*(n?-1:1)}function mh(t,e,n){return e*Math.cos(t)*(n?1:-1)}function vh(t,e,n){var i=t.get("borderRadius");if(null==i)return n?{cornerRadius:0}:null;pe(i)||(i=[i,i,i,i]);var r=Math.abs(e.r||0-e.r0||0);return{cornerRadius:me(i,(function(t){return Ai(t,r)}))}}var yh=Math.max,_h=Math.min;var xh=function(t){function e(){var n=t.call(this)||this;return n.type=e.type,n._isFirstFrame=!0,n}return _e(e,t),e.prototype.render=function(t,e,n,i){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var r=t.get("coordinateSystem");"cartesian2d"!==r&&"polar"!==r||(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n,i))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,e){this._progressiveEls=[],this._incrementalRenderLarge(t,e)},e.prototype.eachRendered=function(t){ci(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t,e,n,i){var r,a=this.group,o=t.getData(),s=this._data,l=t.coordinateSystem,u=l.getBaseAxis();"cartesian2d"===l.type?r=u.isHorizontal():"polar"===l.type&&(r="angle"===u.dim);var c=t.isAnimationEnabled()?t:null,d=function(t,e){var n=t.get("realtimeSort",!0),i=e.getBaseAxis();if(n&&"category"===i.type&&"cartesian2d"===e.type)return{baseAxis:i,otherAxis:e.getOtherAxis(i)}}(t,l);d&&this._enableRealtimeSort(d,o,n);var h=t.get("clip",!0)||d,p=function(t,e){var n=t.getArea&&t.getArea();if(Zd(t,"cartesian2d")){var i=t.getBaseAxis();if("category"!==i.type||!i.onBand){var r=e.getLayout("bandWidth");i.isHorizontal()?(n.x-=r,n.width+=2*r):(n.y-=r,n.height+=2*r)}}return n}(l,o);a.removeClipPath();var f=t.get("roundCap",!0),g=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),v=m.get("borderRadius")||0,y=[],_=this._backgroundEls,x=i&&i.isInitSort,b=i&&"changeAxisOrder"===i.type;function w(t){var e=Dh[l.type](o,t),n=function(t,e,n){return new("polar"===t.type?mi:gi)({shape:Oh(e,n,t),silent:!0,z2:0})}(l,r,e);return n.useStyle(m.getItemStyle()),"cartesian2d"===l.type?n.setShape("r",v):n.setShape("cornerRadius",v),y[t]=n,n}o.diff(s).add((function(e){var n=o.getItemModel(e),i=Dh[l.type](o,e,n);if(g&&w(e),o.hasValue(e)&&Ih[l.type](i)){var s=!1;h&&(s=bh[l.type](p,i));var m=wh[l.type](t,o,e,i,r,c,u.model,!1,f);d&&(m.forceLabelAnimation=!0),Ah(m,o,e,n,i,t,r,"polar"===l.type),x?m.attr({shape:i}):d?Mh(d,c,m,i,e,r,!1,!1):on(m,{shape:i},t,e),o.setItemGraphicEl(e,m),a.add(m),m.ignore=s}})).update((function(e,n){var i=o.getItemModel(e),M=Dh[l.type](o,e,i);if(g){var S=void 0;0===_.length?S=w(n):((S=_[n]).useStyle(m.getItemStyle()),"cartesian2d"===l.type?S.setShape("r",v):S.setShape("cornerRadius",v),y[e]=S);var C=Dh[l.type](o,e),k=Oh(r,C,l);ln(S,{shape:k},c,e)}var I=s.getItemGraphicEl(n);if(o.hasValue(e)&&Ih[l.type](M)){var D=!1;if(h&&(D=bh[l.type](p,M))&&a.remove(I),I?ii(I):I=wh[l.type](t,o,e,M,r,c,u.model,!!I,f),d&&(I.forceLabelAnimation=!0),b){var T=I.getTextContent();if(T){var A=an(T);null!=A.prevValue&&(A.prevValue=A.value)}}else Ah(I,o,e,i,M,t,r,"polar"===l.type);x?I.attr({shape:M}):d?Mh(d,c,I,M,e,r,!0,b):ln(I,{shape:M},t,e,null),o.setItemGraphicEl(e,I),I.ignore=D,a.add(I)}else a.remove(I)})).remove((function(e){var n=s.getItemGraphicEl(e);n&&Ei(n,t,e)})).execute();var M=this._backgroundGroup||(this._backgroundGroup=new Jn);M.removeAll();for(var S=0;S<y.length;++S)M.add(y[S]);a.add(M),this._backgroundEls=y,this._data=o},e.prototype._renderLarge=function(t,e,n){this._clear(),Ph(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,e){this._removeBackground(),Ph(e,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var e=t.get("clip",!0)&&Xd(t.coordinateSystem,!1,t),n=this.group;e?n.setClipPath(e):n.removeClipPath()},e.prototype._enableRealtimeSort=function(t,e,n){var i=this;if(e.count()){var r=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,t,n),this._isFirstFrame=!1;else{var a=function(t){var n=e.getItemGraphicEl(t),i=n&&n.shape;return i&&Math.abs(r.isHorizontal()?i.height:i.width)||0};this._onRendered=function(){i._updateSortWithinSameData(e,a,r,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,e,n){var i=[];return t.each(t.mapDimension(e.dim),(function(t,e){var r=n(e);r=null==r?NaN:r,i.push({dataIndex:e,mappedValue:r,ordinalNumber:t})})),i.sort((function(t,e){return e.mappedValue-t.mappedValue})),{ordinalNumbers:me(i,(function(t){return t.ordinalNumber}))}},e.prototype._isOrderChangedWithinSameData=function(t,e,n){for(var i=n.scale,r=t.mapDimension(n.dim),a=Number.MAX_VALUE,o=0,s=i.getOrdinalMeta().categories.length;o<s;++o){var l=t.rawIndexOf(r,i.getRawOrdinalNumber(o)),u=l<0?Number.MIN_VALUE:e(t.indexOfRawIndex(l));if(u>a)return!0;a=u}return!1},e.prototype._isOrderDifferentInView=function(t,e){for(var n=e.scale,i=n.getExtent(),r=Math.max(0,i[0]),a=Math.min(i[1],n.getOrdinalMeta().categories.length-1);r<=a;++r)if(t.ordinalNumbers[r]!==n.getRawOrdinalNumber(r))return!0},e.prototype._updateSortWithinSameData=function(t,e,n,i){if(this._isOrderChangedWithinSameData(t,e,n)){var r=this._dataSort(t,n,e);this._isOrderDifferentInView(r,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:r}))}},e.prototype._dispatchInitSort=function(t,e,n){var i=e.baseAxis,r=this._dataSort(t,i,(function(n){return t.get(t.mapDimension(e.otherAxis.dim),n)}));n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:r})},e.prototype.remove=function(t,e){this._clear(this._model),this._removeOnRenderedListener(e)},e.prototype.dispose=function(t,e){this._removeOnRenderedListener(e)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var e=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl((function(e){Ei(e,t,Je(e).dataIndex)}))):e.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(bi),bh={cartesian2d:function(t,e){var n=e.width<0?-1:1,i=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height);var r=t.x+t.width,a=t.y+t.height,o=yh(e.x,t.x),s=_h(e.x+e.width,r),l=yh(e.y,t.y),u=_h(e.y+e.height,a),c=s<o,d=u<l;return e.x=c&&o>r?s:o,e.y=d&&l>a?u:l,e.width=c?0:s-o,e.height=d?0:u-l,n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height),c||d},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var i=e.r;e.r=e.r0,e.r0=i}var r=_h(e.r,t.r),a=yh(e.r0,t.r0);e.r=r,e.r0=a;var o=r-a<0;if(n<0){i=e.r;e.r=e.r0,e.r0=i}return o}},wh={cartesian2d:function(t,e,n,i,r,a,o,s,l){var u=new gi({shape:xn({},i),z2:1});(u.__dataIndex=n,u.name="item",a)&&(u.shape[r?"height":"width"]=0);return u},polar:function(t,e,n,i,r,a,o,s,l){var u=!r&&l?Ni:mi,c=new u({shape:i,z2:1});c.name="item";var d,h,p=Th(r);if(c.calculateTextPosition=(d=p,h=({isRoundCap:u===Ni}||{}).isRoundCap,function(t,e,n){var i=e.position;if(!i||i instanceof Array)return Ti(t,e,n);var r=d(i),a=null!=e.distance?e.distance:5,o=this.shape,s=o.cx,l=o.cy,u=o.r,c=o.r0,p=(u+c)/2,f=o.startAngle,g=o.endAngle,m=(f+g)/2,v=h?Math.abs(u-c)/2:0,y=Math.cos,_=Math.sin,x=s+u*y(f),b=l+u*_(f),w="left",M="top";switch(r){case"startArc":x=s+(c-a)*y(m),b=l+(c-a)*_(m),w="center",M="top";break;case"insideStartArc":x=s+(c+a)*y(m),b=l+(c+a)*_(m),w="center",M="bottom";break;case"startAngle":x=s+p*y(f)+gh(f,a+v,!1),b=l+p*_(f)+mh(f,a+v,!1),w="right",M="middle";break;case"insideStartAngle":x=s+p*y(f)+gh(f,-a+v,!1),b=l+p*_(f)+mh(f,-a+v,!1),w="left",M="middle";break;case"middle":x=s+p*y(m),b=l+p*_(m),w="center",M="middle";break;case"endArc":x=s+(u+a)*y(m),b=l+(u+a)*_(m),w="center",M="bottom";break;case"insideEndArc":x=s+(u-a)*y(m),b=l+(u-a)*_(m),w="center",M="top";break;case"endAngle":x=s+p*y(g)+gh(g,a+v,!0),b=l+p*_(g)+mh(g,a+v,!0),w="left",M="middle";break;case"insideEndAngle":x=s+p*y(g)+gh(g,-a+v,!0),b=l+p*_(g)+mh(g,-a+v,!0),w="right",M="middle";break;default:return Ti(t,e,n)}return(t=t||{}).x=x,t.y=b,t.align=w,t.verticalAlign=M,t}),a){var f=r?"r":"endAngle",g={};c.shape[f]=r?i.r0:i.startAngle,g[f]=i[f],(s?ln:on)(c,{shape:g},a)}return c}};function Mh(t,e,n,i,r,a,o,s){var l,u;a?(u={x:i.x,width:i.width},l={y:i.y,height:i.height}):(u={y:i.y,height:i.height},l={x:i.x,width:i.width}),s||(o?ln:on)(n,{shape:l},e,r,null);var c=e?t.baseAxis.model:null;(o?ln:on)(n,{shape:u},c,r)}function Sh(t,e){for(var n=0;n<e.length;n++)if(!isFinite(t[e[n]]))return!0;return!1}var Ch=["x","y","width","height"],kh=["cx","cy","r","startAngle","endAngle"],Ih={cartesian2d:function(t){return!Sh(t,Ch)},polar:function(t){return!Sh(t,kh)}},Dh={cartesian2d:function(t,e,n){var i=t.getItemLayout(e),r=n?function(t,e){var n=t.get(["itemStyle","borderColor"]);if(!n||"none"===n)return 0;var i=t.get(["itemStyle","borderWidth"])||0,r=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(i,r,a)}(n,i):0,a=i.width>0?1:-1,o=i.height>0?1:-1;return{x:i.x+a*r/2,y:i.y+o*r/2,width:i.width-a*r,height:i.height-o*r}},polar:function(t,e,n){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function Th(t){return e=t?"Arc":"Angle",function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}};var e}function Ah(t,e,n,i,r,a,o,s){var l=e.getItemVisual(n,"style");if(s){if(!a.get("roundCap")){var u=t.shape,c=vh(i.getModel("itemStyle"),u,!0);xn(u,c),t.setShape(u)}}else{var d=i.get(["itemStyle","borderRadius"])||0;t.setShape("r",d)}t.useStyle(l);var h=i.getShallow("cursor");h&&t.attr("cursor",h);var p=s?o?r.r>=r.r0?"endArc":"startArc":r.endAngle>=r.startAngle?"endAngle":"startAngle":o?r.height>=0?"bottom":"top":r.width>=0?"right":"left",f=ri(i);oi(t,f,{labelFetcher:a,labelDataIndex:n,defaultText:Td(a.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:p});var g=t.getTextContent();if(s&&g){var m=i.get(["label","position"]);t.textConfig.inside="middle"===m||null,function(t,e,n,i){if(Mn(i))t.setTextConfig({rotation:i});else if(pe(e))t.setTextConfig({rotation:0});else{var r,a=t.shape,o=a.clockwise?a.startAngle:a.endAngle,s=a.clockwise?a.endAngle:a.startAngle,l=(o+s)/2,u=n(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":r=l;break;case"startAngle":case"insideStartAngle":r=o;break;case"endAngle":case"insideEndAngle":r=s;break;default:return void t.setTextConfig({rotation:0})}var c=1.5*Math.PI-r;"middle"===u&&c>Math.PI/2&&c<1.5*Math.PI&&(c-=Math.PI),t.setTextConfig({rotation:c})}}(t,"outside"===m?p:m,Th(o),i.get(["label","rotate"]))}Li(g,f,a.getRawValue(n),(function(t){return Ad(e,t)}));var v=i.getModel(["emphasis"]);si(t,v.get("focus"),v.get("blurScope"),v.get("disabled")),_i(t,i),function(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}(r)&&(t.style.fill="none",t.style.stroke="none",ie(t.states,(function(t){t.style&&(t.style.fill=t.style.stroke="none")})))}var Eh=function(){},Lh=function(t){function e(e){var n=t.call(this,e)||this;return n.type="largeBar",n}return _e(e,t),e.prototype.getDefaultShape=function(){return new Eh},e.prototype.buildPath=function(t,e){for(var n=e.points,i=this.baseDimIdx,r=1-this.baseDimIdx,a=[],o=[],s=this.barWidth,l=0;l<n.length;l+=3)o[i]=s,o[r]=n[l+2],a[i]=n[l+i],a[r]=n[l+r],t.rect(a[0],a[1],o[0],o[1])},e}(je);function Ph(t,e,n,i){var r=t.getData(),a=r.getLayout("valueAxisHorizontal")?1:0,o=r.getLayout("largeDataIndices"),s=r.getLayout("size"),l=t.getModel("backgroundStyle"),u=r.getLayout("largeBackgroundPoints");if(u){var c=new Lh({shape:{points:u},incremental:!!i,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),e.add(c),n&&n.push(c)}var d=new Lh({shape:{points:r.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=a,d.largeDataIndices=o,d.barWidth=s,e.add(d),d.useStyle(r.getVisual("style")),d.style.stroke=null,Je(d).seriesIndex=t.seriesIndex,t.get("silent")||(d.on("mousedown",Nh),d.on("mousemove",Nh)),n&&n.push(d)}var Nh=Pi((function(t){var e=function(t,e,n){for(var i=t.baseDimIdx,r=1-i,a=t.shape.points,o=t.largeDataIndices,s=[],l=[],u=t.barWidth,c=0,d=a.length/3;c<d;c++){var h=3*c;if(l[i]=u,l[r]=a[h+2],s[i]=a[h+i],s[r]=a[h+r],l[r]<0&&(s[r]+=l[r],l[r]=-l[r]),e>=s[0]&&e<=s[0]+l[0]&&n>=s[1]&&n<=s[1]+l[1])return o[c]}return-1}(this,t.offsetX,t.offsetY);Je(this).dataIndex=e>=0?e:null}),30,!1);function Oh(t,e,n){if(Zd(n,"cartesian2d")){var i=e,r=n.getArea();return{x:t?i.x:r.x,y:t?r.y:i.y,width:t?i.width:r.width,height:t?r.height:i.height}}var a=e;return{cx:(r=n.getArea()).cx,cy:r.cy,r0:t?r.r0:a.r0,r:t?r.r:a.r,startAngle:t?a.startAngle:0,endAngle:t?a.endAngle:2*Math.PI}}var zh=xh;var Rh=2*Math.PI,Vh=Math.PI/180;function Fh(t,e){return Vi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Bh(t,e){var n=Fh(t,e),i=t.get("center"),r=t.get("radius");pe(r)||(r=[0,r]);var a,o,s=Ke(n.width,e.getWidth()),l=Ke(n.height,e.getHeight()),u=Math.min(s,l),c=Ke(r[0],u/2),d=Ke(r[1],u/2),h=t.coordinateSystem;if(h){var p=h.dataToPoint(i);a=p[0]||0,o=p[1]||0}else pe(i)||(i=[i,i]),a=Ke(i[0],s)+n.x,o=Ke(i[1],l)+n.y;return{cx:a,cy:o,r0:c,r:d}}function Hh(t,e,n){e.eachSeriesByType(t,(function(t){var e=t.getData(),i=e.mapDimension("value"),r=Fh(t,n),a=Bh(t,n),o=a.cx,s=a.cy,l=a.r,u=a.r0,c=-t.get("startAngle")*Vh,d=t.get("endAngle"),h=t.get("padAngle")*Vh;d="auto"===d?c-Rh:-d*Vh;var p=t.get("minAngle")*Vh+h,f=0;e.each(i,(function(t){!isNaN(t)&&f++}));var g=e.getSum(i),m=Math.PI/(g||f)*2,v=t.get("clockwise"),y=t.get("roseType"),_=t.get("stillShowZeroSum"),x=e.getDataExtent(i);x[0]=0;var b=v?1:-1,w=[c,d],M=b*h/2;Ri(w,!v),c=w[0],d=w[1];var S=Gh(t);S.startAngle=c,S.endAngle=d,S.clockwise=v;var C=Math.abs(d-c),k=C,I=0,D=c;if(e.setLayout({viewRect:r,r:l}),e.each(i,(function(t,n){var i;if(isNaN(t))e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:v,cx:o,cy:s,r0:u,r:y?NaN:l});else{(i="area"!==y?0===g&&_?m:t*m:C/f)<p?(i=p,k-=p):I+=t;var r=D+b*i,a=0,c=0;h>i?c=a=D+b*i/2:(a=D+M,c=r-M),e.setItemLayout(n,{angle:i,startAngle:a,endAngle:c,clockwise:v,cx:o,cy:s,r0:u,r:y?Ne(t,x,[u,l]):l}),D=r}})),k<Rh&&f)if(k<=.001){var T=C/f;e.each(i,(function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n);i.angle=T;var r=0,a=0;T<h?a=r=c+b*(n+.5)*T:(r=c+b*n*T+M,a=c+b*(n+1)*T-M),i.startAngle=r,i.endAngle=a}}))}else m=k/I,D=c,e.each(i,(function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n),r=i.angle===p?p:t*m,a=0,o=0;r<h?o=a=D+b*r/2:(a=D+M,o=D+b*r-M),i.startAngle=a,i.endAngle=o,D+=b*r}}))}))}var Gh=De();function jh(t){return{seriesType:t,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var i=t.getData();i.filterSelf((function(t){for(var e=i.getName(t),r=0;r<n.length;r++)if(!n[r].isSelected(e))return!1;return!0}))}}}}var Wh=Math.PI/180;function Uh(t,e,n,i,r,a,o,s,l,u){if(!(t.length<2)){for(var c=t.length,d=0;d<c;d++)if("outer"===t[d].position&&"labelLine"===t[d].labelAlignTo){var h=t[d].label.x-u;t[d].linePoints[1][0]+=h,t[d].label.x=u}en(t,l,l+o)&&function(t){for(var a={list:[],maxY:0},o={list:[],maxY:0},s=0;s<t.length;s++)if("none"===t[s].labelAlignTo){var l=t[s],u=l.label.y>n?o:a,c=Math.abs(l.label.y-n);if(c>=u.maxY){var d=l.label.x-e-l.len2*r,h=i+l.len,f=Math.abs(d)<h?Math.sqrt(c*c/(1-d*d/h/h)):h;u.rB=f,u.maxY=c}u.list.push(l)}p(a),p(o)}(t)}function p(t){for(var a=t.rB,o=a*a,s=0;s<t.list.length;s++){var l=t.list[s],u=Math.abs(l.label.y-n),c=i+l.len,d=c*c,h=Math.sqrt(Math.abs((1-u*u/o)*d)),p=e+(h+l.len2)*r,f=p-l.label.x;Yh(l,l.targetTextWidth-f*r,!0),l.label.x=p}}}function Yh(t,e,n){if(void 0===n&&(n=!1),null==t.labelStyleWidth){var i=t.label,r=i.style,a=t.rect,o=r.backgroundColor,s=r.padding,l=s?s[1]+s[3]:0,u=r.overflow,c=a.width+(o?0:l);if(e<c||n){var d=a.height;if(u&&u.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",e-l);var h=i.getBoundingRect();i.setStyle("width",Math.ceil(h.width)),i.setStyle("backgroundColor",o)}else{var p=e-l,f=e<c?p:n?p>t.unconstrainedWidth?null:p:null;i.setStyle("width",f)}var g=i.getBoundingRect();a.width=g.width;var m=(i.style.margin||0)+2.1;a.height=g.height+m,a.y-=(a.height-d)/2}}}function $h(t){return"center"===t.position}function qh(t){var e,n,i=t.getData(),r=[],a=!1,o=(t.get("minShowLabelAngle")||0)*Wh,s=i.getLayout("viewRect"),l=i.getLayout("r"),u=s.width,c=s.x,d=s.y,h=s.height;function p(t){t.ignore=!0}i.each((function(t){var s=i.getItemGraphicEl(t),d=s.shape,h=s.getTextContent(),f=s.getTextGuideLine(),g=i.getItemModel(t),m=g.getModel("label"),v=m.get("position")||g.get(["emphasis","label","position"]),y=m.get("distanceToLabelLine"),_=m.get("alignTo"),x=Ke(m.get("edgeDistance"),u),b=m.get("bleedMargin"),w=g.getModel("labelLine"),M=w.get("length");M=Ke(M,u);var S=w.get("length2");if(S=Ke(S,u),Math.abs(d.endAngle-d.startAngle)<o)return ie(h.states,p),h.ignore=!0,void(f&&(ie(f.states,p),f.ignore=!0));if(function(t){if(!t.ignore)return!0;for(var e in t.states)if(!1===t.states[e].ignore)return!0;return!1}(h)){var C,k,I,D,T=(d.startAngle+d.endAngle)/2,A=Math.cos(T),E=Math.sin(T);e=d.cx,n=d.cy;var L="inside"===v||"inner"===v;if("center"===v)C=d.cx,k=d.cy,D="center";else{var P=(L?(d.r+d.r0)/2*A:d.r*A)+e,N=(L?(d.r+d.r0)/2*E:d.r*E)+n;if(C=P+3*A,k=N+3*E,!L){var O=P+A*(M+l-d.r),z=N+E*(M+l-d.r),R=O+(A<0?-1:1)*S;C="edge"===_?A<0?c+x:c+u-x:R+(A<0?-y:y),k=z,I=[[P,N],[O,z],[R,z]]}D=L?"center":"edge"===_?A>0?"right":"left":A>0?"left":"right"}var V=Math.PI,F=0,B=m.get("rotate");if(Mn(B))F=B*(V/180);else if("center"===v)F=0;else if("radial"===B||!0===B){F=A<0?-T+V:-T}else if("tangential"===B&&"outside"!==v&&"outer"!==v){var H=Math.atan2(A,E);H<0&&(H=2*V+H),E>0&&(H=V+H),F=H-V}if(a=!!F,h.x=C,h.y=k,h.rotation=F,h.setStyle({verticalAlign:"middle"}),L){h.setStyle({align:D});var G=h.states.select;G&&(G.x+=h.x,G.y+=h.y)}else{var j=h.getBoundingRect().clone();j.applyTransform(h.getComputedTransform());var W=(h.style.margin||0)+2.1;j.y-=W/2,j.height+=W,r.push({label:h,labelLine:f,position:v,len:M,len2:S,minTurnAngle:w.get("minTurnAngle"),maxSurfaceAngle:w.get("maxSurfaceAngle"),surfaceNormal:new Re(A,E),linePoints:I,textAlign:D,labelDistance:y,labelAlignTo:_,edgeDistance:x,bleedMargin:b,rect:j,unconstrainedWidth:j.width,labelStyleWidth:h.style.width})}s.setTextConfig({inside:L})}})),!a&&t.get("avoidLabelOverlap")&&function(t,e,n,i,r,a,o,s){for(var l=[],u=[],c=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<t.length;h++){var p=t[h].label;$h(t[h])||(p.x<e?(c=Math.min(c,p.x),l.push(t[h])):(d=Math.max(d,p.x),u.push(t[h])))}for(h=0;h<t.length;h++)if(!$h(m=t[h])&&m.linePoints){if(null!=m.labelStyleWidth)continue;p=m.label;var f=m.linePoints,g=void 0;g="edge"===m.labelAlignTo?p.x<e?f[2][0]-m.labelDistance-o-m.edgeDistance:o+r-m.edgeDistance-f[2][0]-m.labelDistance:"labelLine"===m.labelAlignTo?p.x<e?c-o-m.bleedMargin:o+r-d-m.bleedMargin:p.x<e?p.x-o-m.bleedMargin:o+r-p.x-m.bleedMargin,m.targetTextWidth=g,Yh(m,g)}for(Uh(u,e,n,i,1,0,a,0,s,d),Uh(l,e,n,i,-1,0,a,0,s,c),h=0;h<t.length;h++){var m;if(!$h(m=t[h])&&m.linePoints){p=m.label,f=m.linePoints;var v="edge"===m.labelAlignTo,y=p.style.padding,_=y?y[1]+y[3]:0,x=p.style.backgroundColor?0:_,b=m.rect.width+x,w=f[1][0]-f[2][0];v?p.x<e?f[2][0]=o+m.edgeDistance+b+m.labelDistance:f[2][0]=o+r-m.edgeDistance-b-m.labelDistance:(p.x<e?f[2][0]=p.x+m.labelDistance:f[2][0]=p.x-m.labelDistance,f[1][0]=f[2][0]+w),f[1][1]=f[2][1]=p.y}}}(r,e,n,l,u,h,c,d);for(var f=0;f<r.length;f++){var g=r[f],m=g.label,v=g.labelLine,y=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:g.textAlign}),y&&(ie(m.states,p),m.ignore=!0);var _=m.states.select;_&&(_.x+=m.x,_.y+=m.y)}if(v){var x=g.linePoints;y||!x?(ie(v.states,p),v.ignore=!0):(rc(x,g.minTurnAngle),ac(x,g.surfaceNormal,g.maxSurfaceAngle),v.setShape({points:x}),m.__hostTarget.textGuideLineConfig={anchor:new Re(x[0][0],x[0][1])})}}}var Xh=function(t){function e(e,n,i){var r=t.call(this)||this;r.z2=2;var a=new Mi;return r.setTextContent(a),r.updateData(e,n,i,!0),r}return _e(e,t),e.prototype.updateData=function(t,e,n,i){var r=this,a=t.hostModel,o=t.getItemModel(e),s=o.getModel("emphasis"),l=t.getItemLayout(e),u=xn(vh(o.getModel("itemStyle"),l,!0),l);if(isNaN(u.startAngle))r.setShape(u);else{if(i){r.setShape(u);var c=a.getShallow("animationType");a.ecModel.ssr?(on(r,{scaleX:0,scaleY:0},a,{dataIndex:e,isFrom:!0}),r.originX=u.cx,r.originY=u.cy):"scale"===c?(r.shape.r=l.r0,on(r,{shape:{r:l.r}},a,e)):null!=n?(r.setShape({startAngle:n,endAngle:n}),on(r,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},a,e)):(r.shape.endAngle=l.startAngle,ln(r,{shape:{endAngle:l.endAngle}},a,e))}else ii(r),ln(r,{shape:u},a,e);r.useStyle(t.getItemVisual(e,"style")),_i(r,o);var d=(l.startAngle+l.endAngle)/2,h=a.get("selectedOffset"),p=Math.cos(d)*h,f=Math.sin(d)*h,g=o.getShallow("cursor");g&&r.attr("cursor",g),this._updateLabel(a,t,e),r.ensureState("emphasis").shape=xn({r:l.r+(s.get("scale")&&s.get("scaleSize")||0)},vh(s.getModel("itemStyle"),l)),xn(r.ensureState("select"),{x:p,y:f,shape:vh(o.getModel(["select","itemStyle"]),l)}),xn(r.ensureState("blur"),{shape:vh(o.getModel(["blur","itemStyle"]),l)});var m=r.getTextGuideLine(),v=r.getTextContent();m&&xn(m.ensureState("select"),{x:p,y:f}),xn(v.ensureState("select"),{x:p,y:f}),si(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))}},e.prototype._updateLabel=function(t,e,n){var i=this,r=e.getItemModel(n),a=r.getModel("labelLine"),o=e.getItemVisual(n,"style"),s=o&&o.fill,l=o&&o.opacity;oi(i,ri(r),{labelFetcher:e.hostModel,labelDataIndex:n,inheritColor:s,defaultOpacity:l,defaultText:t.getFormattedLabel(n,"normal")||e.getName(n)});var u=i.getTextContent();i.setTextConfig({position:null,rotation:null}),u.attr({z2:10});var c=t.get(["label","position"]);if("outside"!==c&&"outer"!==c)i.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new Be,this.setTextGuideLine(d)),lc(this,uc(r),{stroke:s,opacity:Fi(a.get(["lineStyle","opacity"]),l,1)})}},e}(mi),Zh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return _e(e,t),e.prototype.render=function(t,e,n,i){var r,a=t.getData(),o=this._data,s=this.group;if(!o&&a.count()>0){for(var l=a.getItemLayout(0),u=1;isNaN(l&&l.startAngle)&&u<a.count();++u)l=a.getItemLayout(u);l&&(r=l.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===a.count()&&t.get("showEmptyCircle")){var c=Gh(t),d=new mi({shape:xn(Bh(t,n),c)});d.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=d,s.add(d)}a.diff(o).add((function(t){var e=new Xh(a,t,r);a.setItemGraphicEl(t,e),s.add(e)})).update((function(t,e){var n=o.getItemGraphicEl(e);n.updateData(a,t,r),n.off("click"),s.add(n),a.setItemGraphicEl(t,n)})).remove((function(e){var n=o.getItemGraphicEl(e);Ei(n,t,e)})).execute(),qh(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=a)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,r=t[1]-n.cy,a=Math.sqrt(i*i+r*r);return a<=n.r&&a>=n.r0}},e.type="pie",e}(bi),Jh=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),Kh=De(),Qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Jh(vi(this.getData,this),vi(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Bi(this,{coordDimensions:["value"],encodeDefaulter:le(Hi,this)})},e.prototype.getDataParams=function(e){var n=this.getData(),i=Kh(n),r=i.seats;if(!r){var a=[];n.each(n.mapDimension("value"),(function(t){a.push(t)})),r=i.seats=Gi(a,n.hostModel.get("percentPrecision"))}var o=t.prototype.getDataParams.call(this,e);return o.percent=r[e]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(t){ji(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Qn);var tp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return _e(e,t),e.prototype.getInitialData=function(t,e){return hu(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,e,n){return n.point(e.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(Qn),ep=function(){},np=function(t){function e(e){var n=t.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return _e(e,t),e.prototype.getDefaultShape=function(){return new ep},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,e){var n,i=e.points,r=e.size,a=this.symbolProxy,o=a.shape,s=t.getContext?t.getContext():t,l=s&&r[0]<4,u=this.softClipShape;if(l)this._ctx=s;else{for(this._ctx=null,n=this._off;n<i.length;){var c=i[n++],d=i[n++];isNaN(c)||isNaN(d)||(u&&!u.contain(c,d)||(o.x=c-r[0]/2,o.y=d-r[1]/2,o.width=r[0],o.height=r[1],a.buildPath(t,o,!0)))}this.incremental&&(this._off=n,this.notClear=!0)}},e.prototype.afterBrush=function(){var t,e=this.shape,n=e.points,i=e.size,r=this._ctx,a=this.softClipShape;if(r){for(t=this._off;t<n.length;){var o=n[t++],s=n[t++];isNaN(o)||isNaN(s)||(a&&!a.contain(o,s)||r.fillRect(o-i[0]/2,s-i[1]/2,i[0],i[1]))}this.incremental&&(this._off=t,this.notClear=!0)}},e.prototype.findDataIndex=function(t,e){for(var n=this.shape,i=n.points,r=n.size,a=Math.max(r[0],4),o=Math.max(r[1],4),s=i.length/2-1;s>=0;s--){var l=2*s,u=i[l]-a/2,c=i[l+1]-o/2;if(t>=u&&e>=c&&t<=u+a&&e<=c+o)return s}return-1},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect();return t=n[0],e=n[1],i.contain(t,e)?(this.hoverDataIdx=this.findDataIndex(t,e))>=0:(this.hoverDataIdx=-1,!1)},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var e=this.shape,n=e.points,i=e.size,r=i[0],a=i[1],o=1/0,s=1/0,l=-1/0,u=-1/0,c=0;c<n.length;){var d=n[c++],h=n[c++];o=Math.min(d,o),l=Math.max(d,l),s=Math.min(h,s),u=Math.max(h,u)}t=this._rect=new xe(o-r/2,s-a/2,l-o+r,u-s+a)}return t},e}(je),ip=function(){function t(){this.group=new Jn}return t.prototype.updateData=function(t,e){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,e)},t.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild((function(t){if(null!=t.startIndex){var n=2*(t.endIndex-t.startIndex),i=4*t.startIndex*2;e=new Float32Array(e.buffer,i,n)}t.setShape("points",e),t.reset()}))},t.prototype.incrementalPrepareUpdate=function(t){this._clear()},t.prototype.incrementalUpdate=function(t,e,n){var i=this._newAdded[0],r=e.getLayout("points"),a=i&&i.shape.points;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+r.length);s.set(a),s.set(r,o),i.endIndex=t.end,i.setShape({points:s})}else{this._newAdded=[];var l=this._create();l.startIndex=t.start,l.endIndex=t.end,l.incremental=!0,l.setShape({points:r}),this._setCommon(l,e,n)}},t.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},t.prototype._create=function(){var t=new np({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},t.prototype._setCommon=function(t,e,n){var i=e.hostModel;n=n||{};var r=e.getVisual("symbolSize");t.setShape("size",r instanceof Array?r:[r,r]),t.softClipShape=n.clipShape||null,t.symbolProxy=Kn(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<4;t.useStyle(i.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var o=e.getVisual("style"),s=o&&o.fill;s&&t.setColor(s);var l=Je(t);l.seriesIndex=i.seriesIndex,t.on("mousemove",(function(e){l.dataIndex=null;var n=t.hoverDataIdx;n>=0&&(l.dataIndex=n+(t.startIndex||0))}))},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),rp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},e.prototype.updateTransform=function(t,e,n){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var r=lh("").reset(t,e,n);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var e=t.coordinateSystem;return e&&e.getArea&&e.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,e){var n=this._symbolDraw,i=e.pipelineContext.large;return n&&i===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=i?new ip:new zd,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(bi),ap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(Ui),op=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",ne).models[0]},e.type="cartesian2dAxis",e}(Ui);Yi(op,pu);var sp={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},lp=$i({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},sp),up=$i({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},sp),cp={category:lp,value:up,time:$i({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},up),log:He({logBase:10},up)},dp={value:1,category:1,time:1,log:1};function hp(t,e,n,i){ie(dp,(function(r,a){var o=$i($i({},cp[a],!0),i,!0),s=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e+"Axis."+a,n}return _e(n,t),n.prototype.mergeDefaultAndTheme=function(t,e){var n=qi(this),i=n?Xi(t):{},r=e.getTheme();$i(t,r.get(a+"Axis")),$i(t,this.getDefaultOption()),t.type=pp(t),n&&Zi(t,i,n)},n.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=Ji.createByAxisModel(this))},n.prototype.getCategories=function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},n.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},n.type=e+"Axis."+a,n.defaultOption=o,n}(n);t.registerComponentModel(s)})),t.registerSubTypeDefaulter(e+"Axis",pp)}function pp(t){return t.type||(t.data?"category":"value")}var fp=function(){function t(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return t.prototype.getAxis=function(t){return this._axes[t]},t.prototype.getAxes=function(){return me(this._dimList,(function(t){return this._axes[t]}),this)},t.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Ie(this.getAxes(),(function(e){return e.scale.type===t}))},t.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},t}(),gp=["x","y"];function mp(t){return"interval"===t.type||"time"===t.type}var vp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=gp,e}return _e(e,t),e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,e=this.getAxis("y").scale;if(mp(t)&&mp(e)){var n=t.getExtent(),i=e.getExtent(),r=this.dataToPoint([n[0],i[0]]),a=this.dataToPoint([n[1],i[1]]),o=n[1]-n[0],s=i[1]-i[0];if(o&&s){var l=(a[0]-r[0])/o,u=(a[1]-r[1])/s,c=r[0]-n[0]*l,d=r[1]-i[0]*u,h=this._transform=[l,0,0,u,c,d];this._invTransform=Me([],h)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,e){var n=this.dataToPoint(t),i=this.dataToPoint(e),r=this.getArea(),a=new xe(n[0],n[1],i[0]-n[0],i[1]-n[1]);return r.intersect(a)},e.prototype.dataToPoint=function(t,e,n){n=n||[];var i=t[0],r=t[1];if(this._transform&&null!=i&&isFinite(i)&&null!=r&&isFinite(r))return Se(n,t,this._transform);var a=this.getAxis("x"),o=this.getAxis("y");return n[0]=a.toGlobalCoord(a.dataToCoord(i,e)),n[1]=o.toGlobalCoord(o.dataToCoord(r,e)),n},e.prototype.clampData=function(t,e){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,r=n.getExtent(),a=i.getExtent(),o=n.parse(t[0]),s=i.parse(t[1]);return(e=e||[])[0]=Math.min(Math.max(Math.min(r[0],r[1]),o),Math.max(r[0],r[1])),e[1]=Math.min(Math.max(Math.min(a[0],a[1]),s),Math.max(a[0],a[1])),e},e.prototype.pointToData=function(t,e){var n=[];if(this._invTransform)return Se(n,t,this._invTransform);var i=this.getAxis("x"),r=this.getAxis("y");return n[0]=i.coordToData(i.toLocalCoord(t[0]),e),n[1]=r.coordToData(r.toLocalCoord(t[1]),e),n},e.prototype.getOtherAxis=function(t){return this.getAxis("x"===t.dim?"y":"x")},e.prototype.getArea=function(t){t=t||0;var e=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(e[0],e[1])-t,r=Math.min(n[0],n[1])-t,a=Math.max(e[0],e[1])-i+t,o=Math.max(n[0],n[1])-r+t;return new xe(i,r,a,o)},e}(fp),yp=function(t){function e(e,n,i,r,a){var o=t.call(this,e,n,i)||this;return o.index=0,o.type=r||"value",o.position=a||"bottom",o}return _e(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.getGlobalExtent=function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},e.prototype.pointToData=function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},e.prototype.setCategorySortInfo=function(t){if("category"!==this.type)return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(Fu),_p=Math.log;function xp(t,e,n){var i=Ki.prototype,r=i.getTicks.call(n),a=i.getTicks.call(n,!0),o=r.length-1,s=i.getInterval.call(n),l=Qi(t,e),u=l.extent,c=l.fixMin,d=l.fixMax;if("log"===t.type){var h=_p(t.base);u=[_p(u[0])/h,_p(u[1])/h]}t.setExtent(u[0],u[1]),t.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:d});var p=i.getExtent.call(t);c&&(u[0]=p[0]),d&&(u[1]=p[1]);var f=i.getInterval.call(t),g=u[0],m=u[1];if(c&&d)f=(m-g)/o;else if(c)for(m=u[0]+f*o;m<u[1]&&isFinite(m)&&isFinite(u[1]);)f=tr(f),m=u[0]+f*o;else if(d)for(g=u[1]-f*o;g>u[0]&&isFinite(g)&&isFinite(u[0]);)f=tr(f),g=u[1]-f*o;else{t.getTicks().length-1>o&&(f=tr(f));var v=f*o;m=Math.ceil(u[1]/f)*f,(g=Oe(m-v))<0&&u[0]>=0?(g=0,m=Oe(v)):m>0&&u[1]<=0&&(m=0,g=-Oe(v))}var y=(r[0].value-a[0].value)/s,_=(r[o].value-a[o].value)/s;i.setExtent.call(t,g+f*y,m+f*_),i.setInterval.call(t,f),(y||_)&&i.setNiceExtent.call(t,g+f,m-f)}function bp(t,e){return t.getCoordSysModel()===e}function wp(t,e,n,i){n.getAxesOnZeroOf=function(){return r?[r]:[]};var r,a=t[e],o=n.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(s){if(null!=l)Mp(a[l])&&(r=a[l]);else for(var u in a)if(a.hasOwnProperty(u)&&Mp(a[u])&&!i[c(a[u])]){r=a[u];break}r&&(i[c(r)]=!0)}function c(t){return t.dim+"_"+t.index}}function Mp(t){return t&&"category"!==t.type&&"time"!==t.type&&or(t)}var Sp=function(){function t(t,e,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=gp,this._initCartesian(t,e,n),this.model=t}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(t,e){var n=this._axesMap;function i(t){var e,n=Ze(t),i=n.length;if(i){for(var r=[],a=i-1;a>=0;a--){var o=t[+n[a]],s=o.model,l=o.scale;sr(l)&&s.get("alignTicks")&&null==s.get("interval")?r.push(o):(lr(l,s),sr(l)&&(e=o))}r.length&&(e||(e=r.pop(),lr(e.scale,e.model)),ie(r,(function(t){xp(t.scale,t.model,e.scale)})))}}this._updateScale(t,this.model),i(n.x),i(n.y);var r={};ie(n.x,(function(t){wp(n,"y",t,r)})),ie(n.y,(function(t){wp(n,"x",t,r)})),this.resize(this.model,e)},t.prototype.resize=function(t,e,n){var i=t.getBoxLayoutParams(),r=!n&&t.get("containLabel"),a=Vi(i,{width:e.getWidth(),height:e.getHeight()});this._rect=a;var o=this._axesList;function s(){ie(o,(function(t){var e=t.isHorizontal(),n=e?[0,a.width]:[0,a.height],i=t.inverse?1:0;t.setExtent(n[i],n[1-i]),function(t,e){var n=t.getExtent(),i=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return i-t+e}}(t,e?a.x:a.y)}))}s(),r&&(ie(o,(function(t){if(!t.model.get(["axisLabel","inside"])){var e=er(t);if(e){var n=t.isHorizontal()?"height":"width",i=t.model.get(["axisLabel","margin"]);a[n]-=e[n]+i,"top"===t.position?a.y+=e.height+i:"left"===t.position&&(a.x+=e.width+i)}}})),s()),ie(this._coordsList,(function(t){t.calcAffineTransform()}))},t.prototype.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n)return n[e||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}$n(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,r=this._coordsList;i<r.length;i++)if(r[i].getAxis("x").index===t||r[i].getAxis("y").index===e)return r[i]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(t,e,n){var i=this._findConvertTarget(e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},t.prototype.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},t.prototype._findConvertTarget=function(t){var e,n,i=t.seriesModel,r=t.xAxisModel||i&&i.getReferringComponents("xAxis",ne).models[0],a=t.yAxisModel||i&&i.getReferringComponents("yAxis",ne).models[0],o=t.gridModel,s=this._coordsList;if(i)e=i.coordinateSystem,sn(s,e)<0&&(e=null);else if(r&&a)e=this.getCartesian(r.componentIndex,a.componentIndex);else if(r)n=this.getAxis("x",r.componentIndex);else if(a)n=this.getAxis("y",a.componentIndex);else if(o){o.coordinateSystem===this&&(e=this._coordsList[0])}return{cartesian:e,axis:n}},t.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},t.prototype._initCartesian=function(t,e,n){var i=this,r=this,a={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},s={x:0,y:0};if(e.eachComponent("xAxis",l("x"),this),e.eachComponent("yAxis",l("y"),this),!s.x||!s.y)return this._axesMap={},void(this._axesList=[]);function l(e){return function(n,i){if(bp(n,t)){var l=n.get("position");"x"===e?"top"!==l&&"bottom"!==l&&(l=a.bottom?"top":"bottom"):"left"!==l&&"right"!==l&&(l=a.left?"right":"left"),a[l]=!0;var u=new yp(e,nr(n),[0,0],n.get("type"),l),c="category"===u.type;u.onBand=c&&n.get("boundaryGap"),u.inverse=n.get("inverse"),n.axis=u,u.model=n,u.grid=r,u.index=i,r._axesList.push(u),o[e][i]=u,s[e]++}}}this._axesMap=o,ie(o.x,(function(e,n){ie(o.y,(function(r,a){var o="x"+n+"y"+a,s=new vp(o);s.master=i,s.model=t,i._coordsMap[o]=s,i._coordsList.push(s),s.addAxis(e),s.addAxis(r)}))}))},t.prototype._updateScale=function(t,e){function n(t,e){ie(ar(t,e.dim),(function(n){e.scale.unionExtentFromData(t,n)}))}ie(this._axesList,(function(t){if(t.scale.setExtent(1/0,-1/0),"category"===t.type){var e=t.model.get("categorySortInfo");t.scale.setSortInfo(e)}})),t.eachSeries((function(t){if(ir(t)){var i=rr(t),r=i.xAxisModel,a=i.yAxisModel;if(!bp(r,e)||!bp(a,e))return;var o=this.getCartesian(r.componentIndex,a.componentIndex),s=t.getData(),l=o.getAxis("x"),u=o.getAxis("y");n(s,l),n(s,u)}}),this)},t.prototype.getTooltipAxes=function(t){var e=[],n=[];return ie(this.getCartesians(),(function(i){var r=null!=t&&"auto"!==t?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(r);sn(e,r)<0&&e.push(r),sn(n,a)<0&&n.push(a)})),{baseAxes:e,otherAxes:n}},t.create=function(e,n){var i=[];return e.eachComponent("grid",(function(r,a){var o=new t(r,e,n);o.name="grid_"+a,o.resize(r,n,!0),r.coordinateSystem=o,i.push(o)})),e.eachSeries((function(t){if(ir(t)){var e=rr(t),n=e.xAxisModel,i=e.yAxisModel,r=n.getCoordSysModel().coordinateSystem;t.coordinateSystem=r.getCartesian(n.componentIndex,i.componentIndex)}})),i},t.dimensions=gp,t}(),Cp=De();function kp(t,e,n,i){var r=n.axis;if(!r.scale.isBlank()){var a=n.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=i.coordinateSystem.getRect(),u=r.getTicksCoords({tickModel:a,clamp:!0});if(u.length){var c=s.length,d=Cp(t).splitAreaColors,h=re(),p=0;if(d)for(var f=0;f<u.length;f++){var g=d.get(u[f].tickValue);if(null!=g){p=(g+(c-1)*f)%c;break}}var m=r.toGlobalCoord(u[0].coord),v=o.getAreaStyle();s=pe(s)?s:[s];for(f=1;f<u.length;f++){var y=r.toGlobalCoord(u[f].coord),_=void 0,x=void 0,b=void 0,w=void 0;r.isHorizontal()?(_=m,x=l.y,b=y-_,w=l.height,m=_+b):(_=l.x,x=m,b=l.width,m=x+(w=y-x));var M=u[f-1].tickValue;null!=M&&h.set(M,p),e.add(new gi({anid:null!=M?"area_"+M:null,shape:{x:_,y:x,width:b,height:w},style:He({fill:s[p]},v),autoBatch:!0,silent:!0})),p=(p+1)%c}Cp(t).splitAreaColors=h}}}function Ip(t){Cp(t).splitAreaColors=null}var Dp=["axisLine","axisTickLabel","axisName"],Tp=["splitArea","splitLine","minorSplitLine"],Ap=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="CartesianAxisPointer",n}return _e(e,t),e.prototype.render=function(e,n,i,r){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new Jn,this.group.add(this._axisGroup),e.get("show")){var o=e.getCoordSysModel(),s=ur(o,e),l=new cr(e,xn({handleAutoShown:function(t){for(var n=o.coordinateSystem.getCartesians(),i=0;i<n.length;i++)if(sr(n[i].getOtherAxis(e.axis).scale))return!0;return!1}},s));ie(Dp,l.add,l),this._axisGroup.add(l.getGroup()),ie(Tp,(function(t){e.get([t,"show"])&&Ep[t](this,this._axisGroup,e,o)}),this),r&&"changeAxisOrder"===r.type&&r.isInitSort||dr(a,this._axisGroup,e),t.prototype.render.call(this,e,n,i,r)}},e.prototype.remove=function(){Ip(this)},e.type="cartesianAxis",e}(hr),Ep={splitLine:function(t,e,n,i){var r=n.axis;if(!r.scale.isBlank()){var a=n.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color"),l=!1!==a.get("showMinLine"),u=!1!==a.get("showMaxLine");s=pe(s)?s:[s];for(var c=i.coordinateSystem.getRect(),d=r.isHorizontal(),h=0,p=r.getTicksCoords({tickModel:a}),f=[],g=[],m=o.getLineStyle(),v=0;v<p.length;v++){var y=r.toGlobalCoord(p[v].coord);if((0!==v||l)&&(v!==p.length-1||u)){var _=p[v].tickValue;d?(f[0]=y,f[1]=c.y,g[0]=y,g[1]=c.y+c.height):(f[0]=c.x,f[1]=y,g[0]=c.x+c.width,g[1]=y);var x=h++%s.length,b=new pr({anid:null!=_?"line_"+_:null,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:g[0],y2:g[1]},style:He({stroke:s[x]},m),silent:!0});fr(b.shape,m.lineWidth),e.add(b)}}}},minorSplitLine:function(t,e,n,i){var r=n.axis,a=n.getModel("minorSplitLine").getModel("lineStyle"),o=i.coordinateSystem.getRect(),s=r.isHorizontal(),l=r.getMinorTicksCoords();if(l.length)for(var u=[],c=[],d=a.getLineStyle(),h=0;h<l.length;h++)for(var p=0;p<l[h].length;p++){var f=r.toGlobalCoord(l[h][p].coord);s?(u[0]=f,u[1]=o.y,c[0]=f,c[1]=o.y+o.height):(u[0]=o.x,u[1]=f,c[0]=o.x+o.width,c[1]=f);var g=new pr({anid:"minor_line_"+l[h][p].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:c[0],y2:c[1]},style:d,silent:!0});fr(g.shape,d.lineWidth),e.add(g)}},splitArea:function(t,e,n,i){kp(t,e,n,i)}},Lp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="xAxis",e}(Ap),Pp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Lp.type,e}return _e(e,t),e.type="yAxis",e}(Ap),Np=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="grid",e}return _e(e,t),e.prototype.render=function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new gi({shape:t.coordinateSystem.getRect(),style:He({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(gr),Op={offset:0};function zp(t){t.registerComponentView(Np),t.registerComponentModel(ap),t.registerCoordinateSystem("cartesian2d",Sp),hp(t,"x",op,Op),hp(t,"y",op,Op),t.registerComponentView(Lp),t.registerComponentView(Pp),t.registerPreprocessor((function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}))}function Rp(t){t.eachSeriesByType("radar",(function(t){var e=t.getData(),n=[],i=t.coordinateSystem;if(i){var r=i.getIndicatorAxes();ie(r,(function(t,a){e.each(e.mapDimension(r[a].dim),(function(t,e){n[e]=n[e]||[];var r=i.dataToPoint(t,a);n[e][a]=Vp(r)?r:Fp(i)}))})),e.each((function(t){var r=vr(n[t],(function(t){return Vp(t)}))||Fp(i);n[t].push(r.slice()),e.setItemLayout(t,n[t])}))}}))}function Vp(t){return!isNaN(t[0])&&!isNaN(t[1])}function Fp(t){return[t.cx,t.cy]}function Bp(t){var e=t.polar;if(e){pe(e)||(e=[e]);var n=[];ie(e,(function(e,i){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],pe(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):n.push(e)})),t.polar=n}ie(t.series,(function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)}))}var Hp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n){var i=t.coordinateSystem,r=this.group,a=t.getData(),o=this._data;function s(t,e){var n=t.getItemVisual(e,"symbol")||"circle";if("none"!==n){var i=ui(t.getItemVisual(e,"symbolSize")),r=Kn(n,-1,-1,2,2),a=t.getItemVisual(e,"symbolRotate")||0;return r.attr({style:{strokeNoScale:!0},z2:100,scaleX:i[0]/2,scaleY:i[1]/2,rotation:a*Math.PI/180||0}),r}}function l(e,n,i,r,a,o){i.removeAll();for(var l=0;l<n.length-1;l++){var u=s(r,a);u&&(u.__dimIdx=l,e[l]?(u.setPosition(e[l]),_r[o?"initProps":"updateProps"](u,{x:n[l][0],y:n[l][1]},t,a)):u.setPosition(n[l]),i.add(u))}}function u(t){return me(t,(function(t){return[i.cx,i.cy]}))}a.diff(o).add((function(e){var n=a.getItemLayout(e);if(n){var i=new yr,r=new Be,o={shape:{points:n}};i.shape.points=u(n),r.shape.points=u(n),on(i,o,t,e),on(r,o,t,e);var s=new Jn,c=new Jn;s.add(r),s.add(i),s.add(c),l(r.shape.points,n,c,a,e,!0),a.setItemGraphicEl(e,s)}})).update((function(e,n){var i=o.getItemGraphicEl(n),r=i.childAt(0),s=i.childAt(1),u=i.childAt(2),c={shape:{points:a.getItemLayout(e)}};c.shape.points&&(l(r.shape.points,c.shape.points,u,a,e,!1),ii(s),ii(r),ln(r,c,t),ln(s,c,t),a.setItemGraphicEl(e,i))})).remove((function(t){r.remove(o.getItemGraphicEl(t))})).execute(),a.eachItemGraphicEl((function(t,e){var n=a.getItemModel(e),i=t.childAt(0),o=t.childAt(1),s=t.childAt(2),l=a.getItemVisual(e,"style"),u=l.fill;r.add(t),i.useStyle(He(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:u})),_i(i,n,"lineStyle"),_i(o,n,"areaStyle");var c=n.getModel("areaStyle"),d=c.isEmpty()&&c.parentModel.isEmpty();o.ignore=d,ie(["emphasis","select","blur"],(function(t){var e=n.getModel([t,"areaStyle"]),i=e.isEmpty()&&e.parentModel.isEmpty();o.ensureState(t).ignore=i&&d})),o.useStyle(He(c.getAreaStyle(),{fill:u,opacity:.7,decal:l.decal}));var h=n.getModel("emphasis"),p=h.getModel("itemStyle").getItemStyle();s.eachChild((function(t){if(t instanceof dn){var i=t.style;t.useStyle(xn({image:i.image,x:i.x,y:i.y,width:i.width,height:i.height},l))}else t.useStyle(l),t.setColor(u),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=Pn(p);var r=a.getStore().get(a.getDimensionIndex(t.__dimIdx),e);(null==r||isNaN(r))&&(r=""),oi(t,ri(n),{labelFetcher:a.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:r,inheritColor:u,defaultOpacity:l.opacity})})),si(t,h.get("focus"),h.get("blurScope"),h.get("disabled"))})),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(bi),Gp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return _e(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Jh(vi(this.getData,this),vi(this.getRawData,this))},e.prototype.getInitialData=function(t,e){return Bi(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=this.coordinateSystem.getIndicatorAxes(),a=this.getData().getName(t),o=""===a?this.name:a,s=xr(this,t);return br("section",{header:o,sortBlocks:!0,blocks:me(r,(function(e){var n=i.get(i.mapDimension(e.dim),t);return br("nameValue",{markerType:"subItem",markerColor:s,name:e.name,value:n,sortParam:n})}))})},e.prototype.getTooltipPosition=function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,i=e.getValues(me(n.dimensions,(function(t){return e.mapDimension(t)})),t),r=0,a=i.length;r<a;r++)if(!isNaN(i[r])){var o=n.getIndicatorAxes();return n.coordToPoint(o[r].dataToCoord(i[r]),r)}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(Qn),jp=cp.value;function Wp(t,e){return He({show:e},t)}var Up=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),r=this.get("axisTick"),a=this.get("axisLabel"),o=this.get("axisName"),s=this.get(["axisName","show"]),l=this.get(["axisName","formatter"]),u=this.get("axisNameGap"),c=this.get("triggerEvent"),d=me(this.get("indicator")||[],(function(d){null!=d.max&&d.max>0&&!d.min?d.min=0:null!=d.min&&d.min<0&&!d.max&&(d.max=0);var h=o;null!=d.color&&(h=He({color:d.color},o));var p=$i(Pn(d),{boundaryGap:t,splitNumber:e,scale:n,axisLine:i,axisTick:r,axisLabel:a,name:d.text,showName:s,nameLocation:"end",nameGap:u,nameTextStyle:h,triggerEvent:c},!1);if(vn(l)){var f=p.name;p.name=l.replace("{value}",null!=f?f:"")}else se(l)&&(p.name=l(p.name,p));var g=new wr(p,null,this.ecModel);return Yi(g,pu.prototype),g.mainType="radar",g.componentIndex=this.componentIndex,g}),this);this._indicatorModels=d},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:$i({lineStyle:{color:"#bbb"}},jp.axisLine),axisLabel:Wp(jp.axisLabel,!1),axisTick:Wp(jp.axisTick,!1),splitLine:Wp(jp.splitLine,!0),splitArea:Wp(jp.splitArea,!0),indicator:[]},e}(Ui),Yp=["axisLine","axisTickLabel","axisName"],$p=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),i=me(n,(function(t){var n=t.model.get("showName")?t.name:"";return new cr(t.model,{axisName:n,position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}));ie(i,(function(t){ie(Yp,t.add,t),this.group.add(t.getGroup())}),this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var i=t.get("shape"),r=t.getModel("splitLine"),a=t.getModel("splitArea"),o=r.getModel("lineStyle"),s=a.getModel("areaStyle"),l=r.get("show"),u=a.get("show"),c=o.get("color"),d=s.get("color"),h=pe(c)?c:[c],p=pe(d)?d:[d],f=[],g=[];if("circle"===i)for(var m=n[0].getTicksCoords(),v=e.cx,y=e.cy,_=0;_<m.length;_++){if(l)f[I(f,h,_)].push(new Mr({shape:{cx:v,cy:y,r:m[_].coord}}));if(u&&_<m.length-1)g[I(g,p,_)].push(new Sr({shape:{cx:v,cy:y,r0:m[_].coord,r:m[_+1].coord}}))}else{var x,b=me(n,(function(t,n){var i=t.getTicksCoords();return x=null==x?i.length-1:Math.min(i.length-1,x),me(i,(function(t){return e.coordToPoint(t.coord,n)}))})),w=[];for(_=0;_<=x;_++){for(var M=[],S=0;S<n.length;S++)M.push(b[S][_]);if(M[0]&&M.push(M[0].slice()),l)f[I(f,h,_)].push(new Be({shape:{points:M}}));if(u&&w)g[I(g,p,_-1)].push(new yr({shape:{points:M.concat(w)}}));w=M.slice().reverse()}}var C=o.getLineStyle(),k=s.getAreaStyle();ie(g,(function(t,e){this.group.add(Cr(t,{style:He({stroke:"none",fill:p[e%p.length]},k),silent:!0}))}),this),ie(f,(function(t,e){this.group.add(Cr(t,{style:He({fill:"none",stroke:h[e%h.length]},C),silent:!0}))}),this)}function I(t,e,n){var i=n%e.length;return t[i]=t[i]||[],i}},e.type="radar",e}(gr),qp=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.type="value",r.angle=0,r.name="",r}return _e(e,t),e}(Fu),Xp=function(){function t(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=me(t.getIndicatorModels(),(function(t,e){var n="indicator_"+e,i=new qp(n,new Ki);return i.name=t.get("name"),i.model=t,t.axis=i,this.dimensions.push(n),i}),this),this.resize(t,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=Math.sqrt(e*e+n*n);e/=i,n/=i;for(var r,a=Math.atan2(-n,e),o=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l],c=Math.abs(a-u.angle);c<o&&(r=u,s=l,o=c)}return[s,+(r&&r.coordToData(i))]},t.prototype.resize=function(t,e){var n=t.get("center"),i=e.getWidth(),r=e.getHeight(),a=Math.min(i,r)/2;this.cx=Ke(n[0],i),this.cy=Ke(n[1],r),this.startAngle=t.get("startAngle")*Math.PI/180;var o=t.get("radius");(vn(o)||Mn(o))&&(o=[0,o]),this.r0=Ke(o[0],a),this.r=Ke(o[1],a),ie(this._indicatorAxes,(function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n}),this)},t.prototype.update=function(t,e){var n=this._indicatorAxes,i=this._model;ie(n,(function(t){t.scale.setExtent(1/0,-1/0)})),t.eachSeriesByType("radar",(function(e,r){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===i){var a=e.getData();ie(n,(function(t){t.scale.unionExtentFromData(a,a.mapDimension(t.dim))}))}}),this);var r=i.get("splitNumber"),a=new Ki;a.setExtent(0,r),a.setInterval(1),ie(n,(function(t,e){xp(t.scale,t.model,a)}))},t.prototype.convertToPixel=function(t,e,n){return null},t.prototype.convertFromPixel=function(t,e,n){return null},t.prototype.containPoint=function(t){return!1},t.create=function(e,n){var i=[];return e.eachComponent("radar",(function(r){var a=new t(r,e,n);i.push(a),r.coordinateSystem=a})),e.eachSeriesByType("radar",(function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=i[t.get("radarIndex")||0])})),i},t.dimensions=[],t}();function Zp(t){t.registerCoordinateSystem("radar",Xp),t.registerComponentModel(Up),t.registerComponentView($p),t.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each((function(t){e.setItemVisual(t,"legendIcon","roundRect")})),e.setVisual("legendIcon","roundRect")}})}var Jp="\0_ec_interaction_mutex";function Kp(t,e){return!!Qp(t)[e]}function Qp(t){return t[Jp]||(t[Jp]={})}function tf(t,e,n,i,r){t.pointerChecker&&t.pointerChecker(i,r.originX,r.originY)&&(Dr(i.event),ef(t,e,n,i,r))}function ef(t,e,n,i,r){r.isAvailableBehavior=vi(nf,null,n,i),t.trigger(e,r)}function nf(t,e,n){var i=n[t];return!t||i&&(!vn(i)||e.event[i+"Key"])}kr({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Zn);var rf=function(t){function e(e){var n=t.call(this)||this;n._zr=e;var i=vi(n._mousedownHandler,n),r=vi(n._mousemoveHandler,n),a=vi(n._mouseupHandler,n),o=vi(n._mousewheelHandler,n),s=vi(n._pinchHandler,n);return n.enable=function(t,n){this.disable(),this._opt=He(Pn(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",i),e.on("mousemove",r),e.on("mouseup",a)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",o),e.on("pinch",s))},n.disable=function(){e.off("mousedown",i),e.off("mousemove",r),e.off("mouseup",a),e.off("mousewheel",o),e.off("pinch",s)},n}return _e(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!Ir(t)){for(var e=t.target;e;){if(e.draggable)return;e=e.__hostTarget||e.parent}var n=t.offsetX,i=t.offsetY;this.pointerChecker&&this.pointerChecker(t,n,i)&&(this._x=n,this._y=i,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(this._dragging&&nf("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!Kp(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,i=this._x,r=this._y,a=e-i,o=n-r;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&Dr(t.event),ef(this,"pan","moveOnMouseMove",t,{dx:a,dy:o,oldX:i,oldY:r,newX:e,newY:n,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){Ir(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=nf("zoomOnMouseWheel",t,this._opt),n=nf("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,r=Math.abs(i),a=t.offsetX,o=t.offsetY;if(0!==i&&(e||n)){if(e){var s=r>3?1.4:r>1?1.2:1.1;tf(this,"zoom","zoomOnMouseWheel",t,{scale:i>0?s:1/s,originX:a,originY:o,isAvailableBehavior:null})}if(n){var l=Math.abs(i);tf(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(i>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:a,originY:o,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){Kp(this._zr,"globalPan")||tf(this,"zoom",null,t,{scale:t.pinchScale>1?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})},e}(Tr);function af(t,e,n){var i=t.target;i.x+=e,i.y+=n,i.dirty()}function of(t,e,n,i){var r=t.target,a=t.zoomLimit,o=t.zoom=t.zoom||1;if(o*=e,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/t.zoom;t.zoom=o,r.x-=(n-r.x)*(u-1),r.y-=(i-r.y)*(u-1),r.scaleX*=u,r.scaleY*=u,r.dirty()}var sf,lf={axisPointer:1,tooltip:1,brush:1};function uf(t,e,n){var i=e.getComponentByElement(t.topTarget),r=i&&i.coordinateSystem;return i&&i!==n&&!lf.hasOwnProperty(i.mainType)&&r&&r.model!==n}function cf(t){vn(t)&&(t=(new DOMParser).parseFromString(t,"text/xml"));var e=t;for(9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}var df={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},hf=Ze(df),pf={"alignment-baseline":"textBaseline","stop-color":"stopColor"},ff=Ze(pf),gf=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(t,e){e=e||{};var n=cf(t);this._defsUsePending=[];var i=new Jn;this._root=i;var r=[],a=n.getAttribute("viewBox")||"",o=parseFloat(n.getAttribute("width")||e.width),s=parseFloat(n.getAttribute("height")||e.height);isNaN(o)&&(o=null),isNaN(s)&&(s=null),bf(n,i,null,!0,!1);for(var l,u,c=n.firstChild;c;)this._parseNode(c,i,r,null,!1,!1),c=c.nextSibling;if(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i[0].style[i[1]]=t[i[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],a){var d=Cf(a);d.length>=4&&(l={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(l&&null!=o&&null!=s&&(u=Af(l,{x:0,y:0,width:o,height:s}),!e.ignoreViewBox)){var h=i;(i=new Jn).add(h),h.scaleX=h.scaleY=u.scale,h.x=u.x,h.y=u.y}return e.ignoreRootClip||null==o||null==s||i.setClipPath(new gi({shape:{x:0,y:0,width:o,height:s}})),{root:i,width:o,height:s,viewBoxRect:l,viewBoxTransform:u,named:r}},t.prototype._parseNode=function(t,e,n,i,r,a){var o,s=t.nodeName.toLowerCase(),l=i;if("defs"===s&&(r=!0),"text"===s&&(a=!0),"defs"===s||"switch"===s)o=e;else{if(!r){var u=sf[s];if(u&&Ar(sf,s)){o=u.call(this,t,e);var c=t.getAttribute("name");if(c){var d={name:c,namedFrom:null,svgNodeTagLower:s,el:o};n.push(d),"g"===s&&(l=d)}else i&&n.push({name:i.name,namedFrom:i,svgNodeTagLower:s,el:o});e.add(o)}}var h=mf[s];if(h&&Ar(mf,s)){var p=h.call(this,t),f=t.getAttribute("id");f&&(this._defs[f]=p)}}if(o&&o.isGroup)for(var g=t.firstChild;g;)1===g.nodeType?this._parseNode(g,o,n,l,r,a):3===g.nodeType&&a&&this._parseText(g,o),g=g.nextSibling},t.prototype._parseText=function(t,e){var n=new Cn({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});_f(e,n),bf(t,n,this._defsUsePending,!1,!1),function(t,e){var n=e.__selfStyle;if(n){var i=n.textBaseline,r=i;i&&"auto"!==i?"baseline"===i?r="alphabetic":"before-edge"===i||"text-before-edge"===i?r="top":"after-edge"===i||"text-after-edge"===i?r="bottom":"central"!==i&&"mathematical"!==i||(r="middle"):r="alphabetic",t.style.textBaseline=r}var a=e.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&("middle"===o&&(s="center"),t.style.textAlign=s)}}(n,e);var i=n.style,r=i.fontSize;r&&r<9&&(i.fontSize=9,n.scaleX*=r/9,n.scaleY*=r/9);var a=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=a;var o=n.getBoundingRect();return this._textX+=o.width,e.add(n),n},t.internalField=void(sf={g:function(t,e){var n=new Jn;return _f(e,n),bf(t,n,this._defsUsePending,!1,!1),n},rect:function(t,e){var n=new gi;return _f(e,n),bf(t,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(t,e){var n=new Mr;return _f(e,n),bf(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),n.silent=!0,n},line:function(t,e){var n=new pr;return _f(e,n),bf(t,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(t,e){var n=new Er;return _f(e,n),bf(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(t,e){var n,i=t.getAttribute("points");i&&(n=xf(i));var r=new yr({shape:{points:n||[]},silent:!0});return _f(e,r),bf(t,r,this._defsUsePending,!1,!1),r},polyline:function(t,e){var n,i=t.getAttribute("points");i&&(n=xf(i));var r=new Be({shape:{points:n||[]},silent:!0});return _f(e,r),bf(t,r,this._defsUsePending,!1,!1),r},image:function(t,e){var n=new dn;return _f(e,n),bf(t,n,this._defsUsePending,!1,!1),n.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),n.silent=!0,n},text:function(t,e){var n=t.getAttribute("x")||"0",i=t.getAttribute("y")||"0",r=t.getAttribute("dx")||"0",a=t.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(r),this._textY=parseFloat(i)+parseFloat(a);var o=new Jn;return _f(e,o),bf(t,o,this._defsUsePending,!1,!0),o},tspan:function(t,e){var n=t.getAttribute("x"),i=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var r=t.getAttribute("dx")||"0",a=t.getAttribute("dy")||"0",o=new Jn;return _f(e,o),bf(t,o,this._defsUsePending,!1,!0),this._textX+=parseFloat(r),this._textY+=parseFloat(a),o},path:function(t,e){var n=t.getAttribute("d")||"",i=Lr(n);return _f(e,i),bf(t,i,this._defsUsePending,!1,!1),i.silent=!0,i}}),t}(),mf={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||"0",10),n=parseInt(t.getAttribute("y1")||"0",10),i=parseInt(t.getAttribute("x2")||"10",10),r=parseInt(t.getAttribute("y2")||"0",10),a=new Ci(e,n,i,r);return vf(t,a),yf(t,a),a},radialgradient:function(t){var e=parseInt(t.getAttribute("cx")||"0",10),n=parseInt(t.getAttribute("cy")||"0",10),i=parseInt(t.getAttribute("r")||"0",10),r=new Pr(e,n,i);return vf(t,r),yf(t,r),r}};function vf(t,e){"userSpaceOnUse"===t.getAttribute("gradientUnits")&&(e.global=!0)}function yf(t,e){for(var n=t.firstChild;n;){if(1===n.nodeType&&"stop"===n.nodeName.toLocaleLowerCase()){var i=n.getAttribute("offset"),r=void 0;r=i&&i.indexOf("%")>0?parseInt(i,10)/100:i?parseFloat(i):0;var a={};Tf(n,a,a);var o=a.stopColor||n.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:r,color:o})}n=n.nextSibling}}function _f(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),He(e.__inheritedStyle,t.__inheritedStyle))}function xf(t){for(var e=Cf(t),n=[],i=0;i<e.length;i+=2){var r=parseFloat(e[i]),a=parseFloat(e[i+1]);n.push([r,a])}return n}function bf(t,e,n,i,r){var a=e,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};1===t.nodeType&&(function(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var i=[],r=null;n.replace(kf,(function(t,e,n){return i.push(e,n),""}));for(var a=i.length-1;a>0;a-=2){var o=i[a],s=i[a-1],l=Cf(o);switch(r=r||Vr(),s){case"translate":Rr(r,r,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":zr(r,r,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Or(r,r,-parseFloat(l[0])*If,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(l[0])*If);we(r,[1,0,u,1,0,0],r);break;case"skewY":var c=Math.tan(parseFloat(l[0])*If);we(r,[1,c,0,1,0,0],r);break;case"matrix":r[0]=parseFloat(l[0]),r[1]=parseFloat(l[1]),r[2]=parseFloat(l[2]),r[3]=parseFloat(l[3]),r[4]=parseFloat(l[4]),r[5]=parseFloat(l[5])}}e.setLocalTransform(r)}}(t,e),Tf(t,o,s),i||function(t,e,n){for(var i=0;i<hf.length;i++){var r=hf[i];null!=(a=t.getAttribute(r))&&(e[df[r]]=a)}for(i=0;i<ff.length;i++){var a;r=ff[i];null!=(a=t.getAttribute(r))&&(n[pf[r]]=a)}}(t,o,s)),a.style=a.style||{},null!=o.fill&&(a.style.fill=Mf(a,"fill",o.fill,n)),null!=o.stroke&&(a.style.stroke=Mf(a,"stroke",o.stroke,n)),ie(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(t){null!=o[t]&&(a.style[t]=parseFloat(o[t]))})),ie(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],(function(t){null!=o[t]&&(a.style[t]=o[t])})),r&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=me(Cf(o.lineDash),(function(t){return parseFloat(t)}))),"hidden"!==o.visibility&&"collapse"!==o.visibility||(a.invisible=!0),"none"===o.display&&(a.ignore=!0)}var wf=/^url\(\s*#(.*?)\)/;function Mf(t,e,n,i){var r=n&&n.match(wf);if(!r)return"none"===n&&(n=null),n;var a=Nr(r[1]);i.push([t,e,a])}var Sf=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Cf(t){return t.match(Sf)||[]}var kf=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,If=Math.PI/180;var Df=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Tf(t,e,n){var i,r=t.getAttribute("style");if(r)for(Df.lastIndex=0;null!=(i=Df.exec(r));){var a=i[1],o=Ar(df,a)?df[a]:null;o&&(e[o]=i[2]);var s=Ar(pf,a)?pf[a]:null;s&&(n[s]=i[2])}}function Af(t,e){var n=e.width/t.width,i=e.height/t.height,r=Math.min(n,i);return{scale:r,x:-(t.x+t.width/2)*r+(e.x+e.width/2),y:-(t.y+t.height/2)*r+(e.y+e.height/2)}}var Ef=re(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Lf=function(){function t(t,e){this.type="geoSVG",this._usedGraphicMap=re(),this._freedGraphics=[],this._mapName=t,this._parsedXML=cf(e)}return t.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=function(t){var e=[],n=re();return ie(t,(function(t){if(null==t.namedFrom){var i=new Mu(t.name,t.el);e.push(i),n.set(t.name,i)}})),{regions:e,regionsMap:n}}(t.named),n=e.regions,i=e.regionsMap;this._regions=n,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(t){var e,n,i,r;try{n=(e=t&&(i=t,r={ignoreViewBox:!0,ignoreRootClip:!0},(new gf).parse(i,r))||{}).root,En(null!=n)}catch(v){throw new Error("Invalid svg format\n"+v.message)}var a=new Jn;a.add(n),a.isGeoSVGGraphicRoot=!0;var o=e.width,s=e.height,l=e.viewBoxRect,u=this._boundingRect;if(!u){var c=void 0,d=void 0,h=void 0,p=void 0;if(null!=o?(c=0,h=o):l&&(c=l.x,h=l.width),null!=s?(d=0,p=s):l&&(d=l.y,p=l.height),null==c||null==d){var f=n.getBoundingRect();null==c&&(c=f.x,h=f.width),null==d&&(d=f.y,p=f.height)}u=this._boundingRect=new xe(c,d,h,p)}if(l){var g=Af(l,u);n.scaleX=n.scaleY=g.scale,n.x=g.x,n.y=g.y}a.setClipPath(new gi({shape:u.plain()}));var m=[];return ie(e.named,(function(t){var e;null!=Ef.get(t.svgNodeTagLower)&&(m.push(t),(e=t.el).silent=!1,e.isGroup&&e.traverse((function(t){t.silent=!1})))})),{root:a,boundingRect:u,named:m}},t.prototype.useGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,n),n)},t.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);n&&(e.removeKey(t),this._freedGraphics.push(n))},t}();for(var Pf=[126,25],Nf=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],Of=0;Of<Nf.length;Of++)for(var zf=0;zf<Nf[Of].length;zf++)Nf[Of][zf][0]/=10.5,Nf[Of][zf][1]/=-14,Nf[Of][zf][0]+=Pf[0],Nf[Of][zf][1]+=Pf[1];var Rf={"":[32,80],"":[0,-10],"":[10,5],"":[-10,10],"":[5,5]};var Vf=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var Ff=function(){function t(t,e,n){var i;this.type="geoJSON",this._parsedMap=re(),this._mapName=t,this._specialAreas=n,this._geoJSON=vn(i=e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(i):new Function("return ("+i+");")():i}return t.prototype.load=function(t,e){e=e||"name";var n=this._parsedMap.get(e);if(!n){var i=this._parseToRegions(e);n=this._parsedMap.set(e,{regions:i,boundingRect:Bf(i)})}var r=re(),a=[];return ie(n.regions,(function(e){var n=e.name;t&&Ar(t,n)&&(e=e.cloneShallow(n=t[n])),a.push(e),r.set(n,e)})),{regions:a,boundingRect:n.boundingRect||new xe(0,0,0,0),regionsMap:r}},t.prototype._parseToRegions=function(t){var e,n=this._mapName,i=this._geoJSON;try{e=i?ku(i,t):[]}catch(r){throw new Error("Invalid geoJson format\n"+r.message)}return function(t,e){if("china"===t){for(var n=0;n<e.length;n++)if(""===e[n].name)return;e.push(new wu("",me(Nf,(function(t){return{type:"polygon",exterior:t}})),Pf))}}(n,e),ie(e,(function(t){var e=t.name;!function(t,e){if("china"===t){var n=Rf[e.name];if(n){var i=e.getCenter();i[0]+=n[0]/10.5,i[1]+=-n[1]/14,e.setCenter(i)}}}(n,t),function(t,e){"china"===t&&""===e.name&&e.geometries.push({type:"polygon",exterior:Vf[0]})}(n,t);var i=this._specialAreas&&this._specialAreas[e];i&&t.transformTo(i.left,i.top,i.width,i.height)}),this),e},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function Bf(t){for(var e,n=0;n<t.length;n++){var i=t[n].getBoundingRect();(e=e||i.clone()).union(i)}return e}var Hf=re(),Gf=function(t,e,n){if(e.svg){var i=new Lf(t,e.svg);Hf.set(t,i)}else{var r=e.geoJson||e.geoJSON;r&&!e.features?n=e.specialAreas:r=e;i=new Ff(t,r,n);Hf.set(t,i)}},jf=function(t){return Hf.get(t)},Wf=function(t){var e=Hf.get(t);return e&&"geoJSON"===e.type&&e.getMapForUser()},Uf=function(t,e,n){var i=Hf.get(t);if(i)return i.load(e,n)},Yf=["rect","circle","line","ellipse","polygon","polyline","path"],$f=re(Yf),qf=re(Yf.concat(["g"])),Xf=re(Yf.concat(["g"])),Zf=De();function Jf(t){var e=t.getItemStyle(),n=t.get("areaColor");return null!=n&&(e.fill=n),e}function Kf(t){var e=t.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}function Qf(t,e,n,i){var r=i.getModel("itemStyle"),a=i.getModel(["emphasis","itemStyle"]),o=i.getModel(["blur","itemStyle"]),s=i.getModel(["select","itemStyle"]),l=Jf(r),u=Jf(a),c=Jf(s),d=Jf(o),h=t.data;if(h){var p=h.getItemVisual(n,"style"),f=h.getItemVisual(n,"decal");t.isVisualEncodedByVisualMap&&p.fill&&(l.fill=p.fill),f&&(l.decal=Gr(f,t.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=u,e.ensureState("select").style=c,e.ensureState("blur").style=d,Hr(e)}function tg(t,e,n,i,r,a,o){var s=t.data,l=t.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),a)),c=s&&s.getItemLayout(a);if(l||u||c&&c.showLabel){var d=l?n:a,h=void 0;(!s||a>=0)&&(h=r);var p=o?{normal:{align:"center",verticalAlign:"middle"}}:null;oi(e,ri(i),{labelFetcher:h,labelDataIndex:d,defaultText:n},p);var f=e.getTextContent();if(f&&(Zf(f).ignore=f.ignore,e.textConfig&&o)){var g=e.getBoundingRect().clone();e.textConfig.layoutRect=g,e.textConfig.position=[(o[0]-g.x)/g.width*100+"%",(o[1]-g.y)/g.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function eg(t,e,n,i,r,a){t.data?t.data.setItemGraphicEl(a,e):Je(e).eventData={componentType:"geo",componentIndex:r.componentIndex,geoIndex:r.componentIndex,name:n,region:i&&i.option||{}}}function ng(t,e,n,i,r){t.data||jr({el:e,componentModel:r,itemName:n,itemTooltipOption:i.get("tooltip")})}function ig(t,e,n,i,r){e.highDownSilentOnTouch=!!r.get("selectedMode");var a=i.getModel("emphasis"),o=a.get("focus");return si(e,o,a.get("blurScope"),a.get("disabled")),t.isGeo&&Wr(e,r,n),o}function rg(t,e,n){var i,r=[];function a(){i=[]}function o(){i.length&&(r.push(i),i=[])}var s=e({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(t,e){isFinite(t)&&isFinite(e)&&i.push([t,e])},sphere:function(){}});return!n&&s.polygonStart(),ie(t,(function(t){s.lineStart();for(var e=0;e<t.length;e++)s.point(t[e][0],t[e][1]);s.lineEnd()})),!n&&s.polygonEnd(),r}var ag=function(){function t(t){var e=new Jn;this.uid=Fr("ec_map_draw"),this._controller=new rf(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new Jn),e.add(this._svgGroup=new Jn)}return t.prototype.draw=function(t,e,n,i,r){var a="geo"===t.mainType,o=t.getData&&t.getData();a&&e.eachComponent({mainType:"series",subType:"map"},(function(e){o||e.getHostGeoModel()!==t||(o=e.getData())}));var s=t.coordinateSystem,l=this._regionsGroup,u=this.group,c=s.getTransformInfo(),d=c.raw,h=c.roam;!l.childAt(0)||r?(u.x=h.x,u.y=h.y,u.scaleX=h.scaleX,u.scaleY=h.scaleY,u.dirty()):ln(u,h,t);var p=o&&o.getVisual("visualMeta")&&o.getVisual("visualMeta").length>0,f={api:n,geo:s,mapOrGeoModel:t,data:o,isVisualEncodedByVisualMap:p,isGeo:a,transformInfoRaw:d};"geoJSON"===s.resourceType?this._buildGeoJSON(f):"geoSVG"===s.resourceType&&this._buildSVG(f),this._updateController(t,e,n),this._updateMapSelectHandler(t,l,n,i)},t.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=re(),n=re(),i=this._regionsGroup,r=t.transformInfoRaw,a=t.mapOrGeoModel,o=t.data,s=t.geo.projection,l=s&&s.stream;function u(t,e){return e&&(t=e(t)),t&&[t[0]*r.scaleX+r.x,t[1]*r.scaleY+r.y]}function c(t){for(var e=[],n=!l&&s&&s.project,i=0;i<t.length;++i){var r=u(t[i],n);r&&e.push(r)}return e}function d(t){return{shape:{points:c(t)}}}i.removeAll(),ie(t.geo.regions,(function(r){var c=r.name,h=e.get(c),p=n.get(c)||{},f=p.dataIdx,g=p.regionModel;if(!h){h=e.set(c,new Jn),i.add(h),f=o?o.indexOfName(c):null;var m=(g=t.isGeo?a.getRegionModel(c):o?o.getItemModel(f):null).get("silent",!0);null!=m&&(h.silent=m),n.set(c,{dataIdx:f,regionModel:g})}var v=[],y=[];ie(r.geometries,(function(t){if("polygon"===t.type){var e=[t.exterior].concat(t.interiors||[]);l&&(e=rg(e,l)),ie(e,(function(t){v.push(new yr(d(t)))}))}else{var n=t.points;l&&(n=rg(n,l,!0)),ie(n,(function(t){y.push(new Be(d(t)))}))}}));var _=u(r.getCenter(),s&&s.project);function x(e,n){if(e.length){var i=new mn({culling:!0,segmentIgnoreThreshold:1,shape:{paths:e}});h.add(i),Qf(t,i,f,g),tg(t,i,c,g,a,f,_),n&&(Kf(i),ie(i.states,Kf))}}x(v),x(y,!0)})),e.each((function(e,i){var r=n.get(i),o=r.dataIdx,s=r.regionModel;eg(t,e,i,s,a,o),ng(t,e,i,s,a),ig(t,e,i,s,a)}),this)},t.prototype._buildSVG=function(t){var e=t.geo.map,n=t.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var i=this._svgDispatcherMap=re(),r=!1;ie(this._svgGraphicRecord.named,(function(e){var n=e.name,a=t.mapOrGeoModel,o=t.data,s=e.svgNodeTagLower,l=e.el,u=o?o.indexOfName(n):null,c=a.getRegionModel(n);null!=$f.get(s)&&l instanceof Br&&Qf(t,l,u,c),l instanceof Br&&(l.culling=!0);var d=c.get("silent",!0);(null!=d&&(l.silent=d),l.z2EmphasisLift=0,e.namedFrom)||(null!=Xf.get(s)&&tg(t,l,n,c,a,u,null),eg(t,l,n,c,a,u),ng(t,l,n,c,a),null!=qf.get(s)&&("self"===ig(t,l,n,c,a)&&(r=!0),(i.get(n)||i.set(n,[])).push(l)))}),this),this._enableBlurEntireSVG(r,t)},t.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var n=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse((function(t){if(!t.isGroup){Hr(t);var e=t.ensureState("blur").style||{};null==e.opacity&&null!=n&&(e.opacity=n),t.ensureState("emphasis")}}))}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(t,e){if(null==t)return[];var n=e.coordinateSystem;if("geoJSON"===n.resourceType){var i=this._regionsGroupByName;if(i){var r=i.get(t);return r?[r]:[]}}else if("geoSVG"===n.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},t.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},t.prototype._useSVG=function(t){var e=jf(t);if(e&&"geoSVG"===e.type){var n=e.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=t}},t.prototype._freeSVG=function(){var t=this._svgMapName;if(null!=t){var e=jf(t);e&&"geoSVG"===e.type&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(t,e,n){var i=t.coordinateSystem,r=this._controller,a=this._controllerHost;a.zoomLimit=t.get("scaleLimit"),a.zoom=i.getZoom(),r.enable(t.get("roam")||!1);var o=t.mainType;function s(){var e={type:"geoRoam",componentType:o};return e[o+"Id"]=t.id,e}r.off("pan").on("pan",(function(t){this._mouseDownFlag=!1,af(a,t.dx,t.dy),n.dispatchAction(xn(s(),{dx:t.dx,dy:t.dy,animation:{duration:0}}))}),this),r.off("zoom").on("zoom",(function(t){this._mouseDownFlag=!1,of(a,t.scale,t.originX,t.originY),n.dispatchAction(xn(s(),{totalZoom:a.zoom,zoom:t.scale,originX:t.originX,originY:t.originY,animation:{duration:0}}))}),this),r.setPointerChecker((function(e,r,a){return i.containPoint([r,a])&&!uf(e,n,t)}))},t.prototype.resetForLabelLayout=function(){this.group.traverse((function(t){var e=t.getTextContent();e&&(e.ignore=Zf(e).ignore)}))},t.prototype._updateMapSelectHandler=function(t,e,n,i){var r=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",(function(){r._mouseDownFlag=!0})),e.on("click",(function(t){r._mouseDownFlag&&(r._mouseDownFlag=!1)})))},t}(),og=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var r=this.group;if(r.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&i&&"geoRoam"===i.type&&this._mapDraw.resetForLabelLayout(),i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===t.id)(a=this._mapDraw)&&r.add(a.group);else if(t.needsDrawMap){var a=this._mapDraw||new ag(n);r.add(a.group),a.draw(t,e,n,this,i),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,e,n){var i=t.originalData,r=this.group;i.each(i.mapDimension("value"),(function(e,n){if(!isNaN(e)){var a=i.getItemLayout(n);if(a&&a.point){var o=a.point,s=a.offset,l=new Mr({style:{fill:t.getData().getVisual("style").fill},shape:{cx:o[0]+9*s,cy:o[1],r:3},silent:!0,z2:8+(s?0:Ur+1)});if(!s){var u=t.mainSeries.getData(),c=i.getName(n),d=u.indexOfName(c),h=i.getItemModel(n),p=h.getModel("label"),f=u.getItemGraphicEl(d);oi(l,ri(h),{labelFetcher:{getFormattedLabel:function(e,n){return t.getFormattedLabel(d,n)}},defaultText:c}),l.disableLabelAnimation=!0,p.get("position")||l.setTextConfig({position:"bottom"}),f.onHoverStateChange=function(t){wi(l,t)}}r.add(l)}}}))},e.type="map",e}(bi),sg=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,i=n.getRegion(e);return i&&n.dataToPoint(i.getCenter())}},n}return _e(e,t),e.prototype.getInitialData=function(t){for(var e=Bi(this,{coordDimensions:["value"],encodeDefaulter:le(Hi,this)}),n=re(),i=[],r=0,a=e.count();r<a;r++){var o=e.getName(r);n.set(o,r)}var s=Uf(this.getMapType(),this.option.nameMap,this.option.nameProperty);return ie(s.regions,(function(t){var r,a=t.name,o=n.get(a),s=t.properties&&t.properties.echartsStyle;null==o?(r={name:a},i.push(r)):r=e.getRawDataItem(o),s&&$i(r,s)})),e.appendData(i),e},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return null!=t?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},e.prototype.formatTooltip=function(t,e,n){for(var i=this.getData(),r=this.getRawValue(t),a=i.getName(t),o=this.seriesGroup,s=[],l=0;l<o.length;l++){var u=o[l].originalData.indexOfName(a),c=i.mapDimension("value");isNaN(o[l].originalData.get(c,u))||s.push(o[l].name)}return br("section",{header:s.join(", "),noHeader:!s.length,blocks:[br("nameValue",{name:a,value:r})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var e=t.icon||"roundRect",n=Kn(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return n.setStyle(t.itemStyle),n.style.stroke="none",e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(Qn);function lg(t){var e={};t.eachSeriesByType("map",(function(t){var n=t.getHostGeoModel(),i=n?"o"+n.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)})),ie(e,(function(t,e){for(var n,i,r,a=(n=me(t,(function(t){return t.getData()})),i=t[0].get("mapValueCalculation"),r={},ie(n,(function(t){t.each(t.mapDimension("value"),(function(e,n){var i="ec-"+t.getName(n);r[i]=r[i]||[],isNaN(e)||r[i].push(e)}))})),n[0].map(n[0].mapDimension("value"),(function(t,e){for(var a="ec-"+n[0].getName(e),o=0,s=1/0,l=-1/0,u=r[a].length,c=0;c<u;c++)s=Math.min(s,r[a][c]),l=Math.max(l,r[a][c]),o+=r[a][c];return 0===u?NaN:"min"===i?s:"max"===i?l:"average"===i?o/u:o}))),o=0;o<t.length;o++)t[o].originalData=t[o].getData();for(o=0;o<t.length;o++)t[o].seriesGroup=t,t[o].needsDrawMap=0===o&&!t[o].getHostGeoModel(),t[o].setData(a.cloneShallow()),t[o].mainSeries=t[0]}))}function ug(t){var e={};t.eachSeriesByType("map",(function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!e[i]){var r={};ie(n.seriesGroup,(function(e){var n=e.coordinateSystem,i=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&i.each(i.mapDimension("value"),(function(t,e){var a=i.getName(e),o=n.getRegion(a);if(o&&!isNaN(t)){var s=r[a]||0,l=n.dataToPoint(o.getCenter());r[a]=s+1,i.setItemLayout(e,{point:l,offset:s})}}))}));var a=n.getData();a.each((function(t){var e=a.getName(t),n=a.getItemLayout(t)||{};n.showLabel=!r[e],a.setItemLayout(t,n)})),e[i]=!0}}))}var cg=Se;function dg(t){var e=t.seriesModel;return e?e.coordinateSystem:null}var hg=function(t){function e(e){var n=t.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Xe,n._rawTransformable=new Xe,n.name=e,n}return _e(e,t),e.prototype.setBoundingRect=function(t,e,n,i){return this._rect=new xe(t,e,n,i),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,e,n,i){this._transformTo(t,e,n,i),this._viewRect=new xe(t,e,n,i)},e.prototype._transformTo=function(t,e,n,i){var r=this.getBoundingRect(),a=this._rawTransformable;a.transform=r.calculateTransform(new xe(t,e,n,i));var o=a.parent;a.parent=null,a.decomposeTransform(),a.parent=o,this._updateTransform()},e.prototype.setCenter=function(t,e){t&&(this._center=[Ke(t[0],e.getWidth()),Ke(t[1],e.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),r=this.getZoom();i=Se([],i,t),n=Se([],n,t),e.originX=i[0],e.originY=i[1],e.x=n[0]-i[0],e.y=n[1]-i[1],e.scaleX=e.scaleY=r,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,e=this._rawTransformable;e.parent=t,t.updateTransform(),e.updateTransform(),Yr(this.transform||(this.transform=[]),e.transform||Vr()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],Me(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,e=this._roamTransformable,n=new Xe;return n.transform=e.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,e,n){var i=e?this._rawTransform:this.transform;return n=n||[],i?cg(n,t,i):$r(n,t)},e.prototype.pointToData=function(t){var e=this.invTransform;return e?cg([],t,e):[t[0],t[1]]},e.prototype.convertToPixel=function(t,e,n){var i=dg(e);return i===this?i.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,e,n){var i=dg(e);return i===this?i.pointToData(n):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(Xe),pg={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},fg=["lng","lat"],gg=function(t){function e(e,n,i){var r=t.call(this,e)||this;r.dimensions=fg,r.type="geo",r._nameCoordMap=re(),r.map=n;var a=i.projection,o=Uf(n,i.nameMap,i.nameProperty),s=jf(n);r.resourceType=s?s.type:null;var l,u=r.regions=o.regions,c=pg[s.type];if(r._regionsMap=o.regionsMap,r.regions=o.regions,r.projection=a,a)for(var d=0;d<u.length;d++){var h=u[d].getBoundingRect(a);(l=l||h.clone()).union(h)}else l=o.boundingRect;return r.setBoundingRect(l.x,l.y,l.width,l.height),r.aspectScale=a?1:Fe(i.aspectScale,c.aspectScale),r._invertLongitute=!a&&c.invertLongitute,r}return _e(e,t),e.prototype._transformTo=function(t,e,n,i){var r=this.getBoundingRect(),a=this._invertLongitute;r=r.clone(),a&&(r.y=-r.y-r.height);var o=this._rawTransformable;o.transform=r.calculateTransform(new xe(t,e,n,i));var s=o.parent;o.parent=null,o.decomposeTransform(),o.parent=s,a&&(o.scaleY=-o.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var e=this.regions,n=0;n<e.length;n++){var i=e[n];if("geoJSON"===i.type&&i.contain(t))return e[n]}},e.prototype.addGeoCoord=function(t,e){this._nameCoordMap.set(t,e)},e.prototype.getGeoCoord=function(t){var e=this._regionsMap.get(t);return this._nameCoordMap.get(t)||e&&e.getCenter()},e.prototype.dataToPoint=function(t,e,n){if(vn(t)&&(t=this.getGeoCoord(t)),t){var i=this.projection;return i&&(t=i.project(t)),t&&this.projectedToPoint(t,e,n)}},e.prototype.pointToData=function(t){var e=this.projection;return e&&(t=e.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(e){return t.prototype.pointToData.call(this,e)},e.prototype.projectedToPoint=function(e,n,i){return t.prototype.dataToPoint.call(this,e,n,i)},e.prototype.convertToPixel=function(t,e,n){var i=mg(e);return i===this?i.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,e,n){var i=mg(e);return i===this?i.pointToData(n):null},e}(hg);function mg(t){var e=t.geoModel,n=t.seriesModel;return e?e.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",ne).models[0]||{}).coordinateSystem:null}Yi(gg,hg);var vg=gg;function yg(t,e){var n=t.get("boundingCoords");if(null!=n){var i=n[0],r=n[1];if(isFinite(i[0])&&isFinite(i[1])&&isFinite(r[0])&&isFinite(r[1])){var a=this.projection;if(a){var o=i[0],s=i[1],l=r[0],u=r[1];i=[1/0,1/0],r=[-1/0,-1/0];var c=function(t,e,n,o){for(var s=n-t,l=o-e,u=0;u<=100;u++){var c=u/100,d=a.project([t+s*c,e+l*c]);Ce(i,i,d),ke(r,r,d)}};c(o,s,l,s),c(l,s,l,u),c(l,u,o,u),c(o,u,l,s)}this.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1])}else;}var d,h,p,f=this.getBoundingRect(),g=t.get("layoutCenter"),m=t.get("layoutSize"),v=e.getWidth(),y=e.getHeight(),_=f.width/f.height*this.aspectScale,x=!1;if(g&&m&&(d=[Ke(g[0],v),Ke(g[1],y)],h=Ke(m,Math.min(v,y)),isNaN(d[0])||isNaN(d[1])||isNaN(h)||(x=!0)),x)p={},_>1?(p.width=h,p.height=h/_):(p.height=h,p.width=h*_),p.y=d[1]-p.height/2,p.x=d[0]-p.width/2;else{var b=t.getBoxLayoutParams();b.aspect=_,p=Vi(b,{width:v,height:y})}this.setViewRect(p.x,p.y,p.width,p.height),this.setCenter(t.get("center"),e),this.setZoom(t.get("zoom"))}var _g=new(function(){function t(){this.dimensions=fg}return t.prototype.create=function(t,e){var n=[];function i(t){return{nameProperty:t.get("nameProperty"),aspectScale:t.get("aspectScale"),projection:t.get("projection")}}t.eachComponent("geo",(function(t,r){var a=t.get("map"),o=new vg(a+r,a,xn({nameMap:t.get("nameMap")},i(t)));o.zoomLimit=t.get("scaleLimit"),n.push(o),t.coordinateSystem=o,o.model=t,o.resize=yg,o.resize(t,e)})),t.eachSeries((function(t){if("geo"===t.get("coordinateSystem")){var e=t.get("geoIndex")||0;t.coordinateSystem=n[e]}}));var r={};return t.eachSeriesByType("map",(function(t){if(!t.getHostGeoModel()){var e=t.getMapType();r[e]=r[e]||[],r[e].push(t)}})),ie(r,(function(t,r){var a=me(t,(function(t){return t.get("nameMap")})),o=new vg(r,r,xn({nameMap:qr(a)},i(t[0])));o.zoomLimit=Xr.apply(null,me(t,(function(t){return t.get("scaleLimit")}))),n.push(o),o.resize=yg,o.resize(t[0],e),ie(t,(function(t){t.coordinateSystem=o,function(t,e){ie(e.get("geoCoord"),(function(e,n){t.addGeoCoord(n,e)}))}(o,t)}))})),n},t.prototype.getFilledRegions=function(t,e,n,i){for(var r=(t||[]).slice(),a=re(),o=0;o<r.length;o++)a.set(r[o].name,r[o]);var s=Uf(e,n,i);return ie(s.regions,(function(t){var e=t.name,n=a.get(e),i=t.properties&&t.properties.echartsStyle;n||(n={name:e},r.push(n)),i&&$i(n,i)})),r},t}()),xg=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(t,e,n){var i=jf(t.map);if(i&&"geoJSON"===i.type){var r=t.itemStyle=t.itemStyle||{};"color"in r||(r.color="#eee")}this.mergeDefaultAndTheme(t,n),ji(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,e=this.option;e.regions=_g.getFilledRegions(e.regions,e.map,e.nameMap,e.nameProperty);var n={};this._optionModelMap=Zr(e.regions||[],(function(e,i){var r=i.name;return r&&(e.set(r,new wr(i,t,t.ecModel)),i.selected&&(n[r]=!0)),e}),re()),e.selectedMap||(e.selectedMap=n)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new wr(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,e){var n=this.getRegionModel(t),i="normal"===e?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),r={name:t};return se(i)?(r.status=e,i(r)):vn(i)?i.replace("{a}",null!=t?t:""):void 0},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var e=this.option,n=e.selectedMode;n&&("multiple"!==n&&(e.selectedMap=null),(e.selectedMap||(e.selectedMap={}))[t]=!0)},e.prototype.unSelect=function(t){var e=this.option.selectedMap;e&&(e[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var e=this.option.selectedMap;return!(!e||!e[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(Ui);function bg(t,e){return t.pointToProjected?t.pointToProjected(e):t.pointToData(e)}function wg(t,e,n,i){var r=t.getZoom(),a=t.getCenter(),o=e.zoom,s=t.projectedToPoint?t.projectedToPoint(a):t.dataToPoint(a);if(null!=e.dx&&null!=e.dy&&(s[0]-=e.dx,s[1]-=e.dy,t.setCenter(bg(t,s),i)),null!=o){if(n){var l=n.min||0,u=n.max||1/0;o=Math.max(Math.min(r*o,u),l)/r}t.scaleX*=o,t.scaleY*=o;var c=(e.originX-t.x)*(o-1),d=(e.originY-t.y)*(o-1);t.x-=c,t.y-=d,t.updateTransform(),t.setCenter(bg(t,s),i),t.setZoom(o*r)}return{center:t.getCenter(),zoom:t.getZoom()}}var Mg=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.focusBlurEnabled=!0,n}return _e(e,t),e.prototype.init=function(t,e){this._api=e},e.prototype.render=function(t,e,n,i){if(this._model=t,!t.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new ag(n));var r=this._mapDraw;r.draw(t,e,n,this,i),r.group.on("click",this._handleRegionClick,this),r.group.silent=t.get("silent"),this.group.add(r.group),this.updateSelectStatus(t,e,n)},e.prototype._handleRegionClick=function(t){var e;Jr(t.target,(function(t){return null!=(e=Je(t).eventData)}),!0),e&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:e.name})},e.prototype.updateSelectStatus=function(t,e,n){var i=this;this._mapDraw.group.traverse((function(t){var e=Je(t).eventData;if(e)return i._model.isSelected(e.name)?n.enterSelect(t):n.leaveSelect(t),!0}))},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(gr);function Sg(t,e,n){Gf(t,e,n)}function Cg(t){function e(e,n){n.update="geo:updateSelectStatus",t.registerAction(n,(function(t,n){var i={},r=[];return n.eachComponent({mainType:"geo",query:t},(function(n){n[e](t.name);var a=n.coordinateSystem;ie(a.regions,(function(t){i[t.name]=n.isSelected(t.name)||!1}));var o=[];ie(i,(function(t,e){i[e]&&o.push(e)})),r.push({geoIndex:n.componentIndex,name:o})})),{selected:i,allSelected:r,name:t.name}}))}t.registerCoordinateSystem("geo",_g),t.registerComponentModel(xg),t.registerComponentView(Mg),t.registerImpl("registerMap",Sg),t.registerImpl("getMap",(function(t){return Wf(t)})),e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},(function(t,e,n){var i=t.componentType||"series";e.eachComponent({mainType:i,query:t},(function(e){var r=e.coordinateSystem;if("geo"===r.type){var a=wg(r,t,e.get("scaleLimit"),n);e.setCenter&&e.setCenter(a.center),e.setZoom&&e.setZoom(a.zoom),"series"===i&&ie(e.seriesGroup,(function(t){t.setCenter(a.center),t.setZoom(a.zoom)}))}}))}))}function kg(t,e){var n=t.isExpand?t.children:[],i=t.parentNode.children,r=t.hierNode.i?i[t.hierNode.i-1]:null;if(n.length){!function(t){var e=t.children,n=e.length,i=0,r=0;for(;--n>=0;){var a=e[n];a.hierNode.prelim+=i,a.hierNode.modifier+=i,r+=a.hierNode.change,i+=a.hierNode.shift+r}}(t);var a=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;r?(t.hierNode.prelim=r.hierNode.prelim+e(t,r),t.hierNode.modifier=t.hierNode.prelim-a):t.hierNode.prelim=a}else r&&(t.hierNode.prelim=r.hierNode.prelim+e(t,r));t.parentNode.hierNode.defaultAncestor=function(t,e,n,i){if(e){for(var r=t,a=t,o=a.parentNode.children[0],s=e,l=r.hierNode.modifier,u=a.hierNode.modifier,c=o.hierNode.modifier,d=s.hierNode.modifier;s=Ag(s),a=Eg(a),s&&a;){r=Ag(r),o=Eg(o),r.hierNode.ancestor=t;var h=s.hierNode.prelim+d-a.hierNode.prelim-u+i(s,a);h>0&&(Pg(Lg(s,t,n),t,h),u+=h,l+=h),d+=s.hierNode.modifier,u+=a.hierNode.modifier,l+=r.hierNode.modifier,c+=o.hierNode.modifier}s&&!Ag(r)&&(r.hierNode.thread=s,r.hierNode.modifier+=d-l),a&&!Eg(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=u-c,n=t)}return n}(t,r,t.parentNode.hierNode.defaultAncestor||i[0],e)}function Ig(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function Dg(t){return arguments.length?t:Ng}function Tg(t,e){return t-=Math.PI/2,{x:e*Math.cos(t),y:e*Math.sin(t)}}function Ag(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function Eg(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function Lg(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}function Pg(t,e,n){var i=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=i,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=i}function Ng(t,e){return t.parentNode===e.parentNode?1:2}var Og=function(){this.parentPoint=[],this.childPoints=[]},zg=function(t){function e(e){return t.call(this,e)||this}return _e(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Og},e.prototype.buildPath=function(t,e){var n=e.childPoints,i=n.length,r=e.parentPoint,a=n[0],o=n[i-1];if(1===i)return t.moveTo(r[0],r[1]),void t.lineTo(a[0],a[1]);var s=e.orient,l="TB"===s||"BT"===s?0:1,u=1-l,c=Ke(e.forkPosition,1),d=[];d[l]=r[l],d[u]=r[u]+(o[u]-r[u])*c,t.moveTo(r[0],r[1]),t.lineTo(d[0],d[1]),t.moveTo(a[0],a[1]),d[l]=a[l],t.lineTo(d[0],d[1]),d[l]=o[l],t.lineTo(d[0],d[1]),t.lineTo(o[0],o[1]);for(var h=1;h<i-1;h++){var p=n[h];t.moveTo(p[0],p[1]),d[l]=p[l],t.lineTo(d[0],d[1])}},e}(je);function Rg(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)}function Vg(t,e,n,i,r){var a=!n,o=t.tree.getNodeByDataIndex(e),s=o.getModel(),l=o.getVisual("style").fill,u=!1===o.isExpand&&0!==o.children.length?l:"#fff",c=t.tree.root,d=o.parentNode===c?o:o.parentNode||o,h=t.getItemGraphicEl(d.dataIndex),p=d.getLayout(),f=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:p,g=o.getLayout();a?((n=new Ld(t,e,null,{symbolInnerColor:u,useNameLabel:!0})).x=f.x,n.y=f.y):n.updateData(t,e,null,{symbolInnerColor:u,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,i.add(n),t.setItemGraphicEl(e,n),n.__oldX=n.x,n.__oldY=n.y,ln(n,{x:g.x,y:g.y},r);var m=n.getSymbolPath();if("radial"===r.get("layout")){var v=c.children[0],y=v.getLayout(),_=v.children.length,x=void 0,b=void 0;if(g.x===y.x&&!0===o.isExpand&&v.children.length){var w={x:(v.children[0].getLayout().x+v.children[_-1].getLayout().x)/2,y:(v.children[0].getLayout().y+v.children[_-1].getLayout().y)/2};(x=Math.atan2(w.y-y.y,w.x-y.x))<0&&(x=2*Math.PI+x),(b=w.x<y.x)&&(x-=Math.PI)}else(x=Math.atan2(g.y-y.y,g.x-y.x))<0&&(x=2*Math.PI+x),0===o.children.length||0!==o.children.length&&!1===o.isExpand?(b=g.x<y.x)&&(x-=Math.PI):(b=g.x>y.x)||(x-=Math.PI);var M=b?"left":"right",S=s.getModel("label"),C=S.get("rotate"),k=C*(Math.PI/180),I=m.getTextContent();I&&(m.setTextConfig({position:S.get("position")||M,rotation:null==C?-x:k,origin:"center"}),I.setStyle("verticalAlign","middle"))}var D=s.get(["emphasis","focus"]),T="relative"===D?Qr(o.getAncestorsIndices(),o.getDescendantIndices()):"ancestor"===D?o.getAncestorsIndices():"descendant"===D?o.getDescendantIndices():null;T&&(Je(n).focus=T),function(t,e,n,i,r,a,o,s){var l=e.getModel(),u=t.get("edgeShape"),c=t.get("layout"),d=t.getOrient(),h=t.get(["lineStyle","curveness"]),p=t.get("edgeForkPosition"),f=l.getModel("lineStyle").getLineStyle(),g=i.__edge;if("curve"===u)e.parentNode&&e.parentNode!==n&&(g||(g=i.__edge=new ea({shape:Gg(c,d,h,r,r)})),ln(g,{shape:Gg(c,d,h,a,o)},t));else if("polyline"===u&&"orthogonal"===c&&e!==n&&e.children&&0!==e.children.length&&!0===e.isExpand){for(var m=e.children,v=[],y=0;y<m.length;y++){var _=m[y].getLayout();v.push([_.x,_.y])}g||(g=i.__edge=new zg({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:d,forkPosition:p}})),ln(g,{shape:{parentPoint:[o.x,o.y],childPoints:v}},t)}g&&("polyline"!==u||e.isExpand)&&(g.useStyle(He({strokeNoScale:!0,fill:null},f)),_i(g,l,"lineStyle"),Hr(g),s.add(g))}(r,o,c,n,f,p,g,i),n.__edge&&(n.onHoverStateChange=function(e){if("blur"!==e){var i=o.parentNode&&t.getItemGraphicEl(o.parentNode.dataIndex);i&&i.hoverState===ta||wi(n.__edge,e)}})}function Fg(t,e,n,i,r){var a=Bg(e.tree.root,t),o=a.source,s=a.sourceLayout,l=e.getItemGraphicEl(t.dataIndex);if(l){var u=e.getItemGraphicEl(o.dataIndex).__edge,c=l.__edge||(!1===o.isExpand||1===o.children.length?u:void 0),d=i.get("edgeShape"),h=i.get("layout"),p=i.get("orient"),f=i.get(["lineStyle","curveness"]);c&&("curve"===d?li(c,{shape:Gg(h,p,f,s,s),style:{opacity:0}},i,{cb:function(){n.remove(c)},removeOpt:r}):"polyline"===d&&"orthogonal"===i.get("layout")&&li(c,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},i,{cb:function(){n.remove(c)},removeOpt:r}))}}function Bg(t,e){for(var n,i=e.parentNode===t?e:e.parentNode||e;null==(n=i.getLayout());)i=i.parentNode===t?i:i.parentNode||i;return{source:i,sourceLayout:n}}function Hg(t,e,n,i,r){var a=t.tree.getNodeByDataIndex(e),o=Bg(t.tree.root,a).sourceLayout,s={duration:r.get("animationDurationUpdate"),easing:r.get("animationEasingUpdate")};li(n,{x:o.x+1,y:o.y+1},r,{cb:function(){i.remove(n),t.setItemGraphicEl(e,null)},removeOpt:s}),n.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:s}),a.children.forEach((function(e){Fg(e,t,i,r,s)})),Fg(a,t,i,r,s)}function Gg(t,e,n,i,r){var a,o,s,l,u,c,d,h;if("radial"===t){u=i.rawX,d=i.rawY,c=r.rawX,h=r.rawY;var p=Tg(u,d),f=Tg(u,d+(h-d)*n),g=Tg(c,h+(d-h)*n),m=Tg(c,h);return{x1:p.x||0,y1:p.y||0,x2:m.x||0,y2:m.y||0,cpx1:f.x||0,cpy1:f.y||0,cpx2:g.x||0,cpy2:g.y||0}}return u=i.x,d=i.y,c=r.x,h=r.y,"LR"!==e&&"RL"!==e||(a=u+(c-u)*n,o=d,s=c+(u-c)*n,l=h),"TB"!==e&&"BT"!==e||(a=u,o=d+(h-d)*n,s=c,l=h+(d-h)*n),{x1:u,y1:d,x2:c,y2:h,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var jg=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._mainGroup=new Jn,n}return _e(e,t),e.prototype.init=function(t,e){this._controller=new rf(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,e,n){var i=t.getData(),r=t.layoutInfo,a=this._mainGroup;"radial"===t.get("layout")?(a.x=r.x+r.width/2,a.y=r.y+r.height/2):(a.x=r.x,a.y=r.y),this._updateViewCoordSys(t,n),this._updateController(t,e,n);var o=this._data;i.diff(o).add((function(e){Rg(i,e)&&Vg(i,e,null,a,t)})).update((function(e,n){var r=o.getItemGraphicEl(n);Rg(i,e)?Vg(i,e,r,a,t):r&&Hg(o,n,r,a,t)})).remove((function(e){var n=o.getItemGraphicEl(e);n&&Hg(o,e,n,a,t)})).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===t.get("expandAndCollapse")&&i.eachItemGraphicEl((function(e,i){e.off("click").on("click",(function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:i})}))})),this._data=i},e.prototype._updateViewCoordSys=function(t,e){var n=t.getData(),i=[];n.each((function(t){var e=n.getItemLayout(t);!e||isNaN(e.x)||isNaN(e.y)||i.push([+e.x,+e.y])}));var r=[],a=[];Kr(i,r,a);var o=this._min,s=this._max;a[0]-r[0]==0&&(r[0]=o?o[0]:r[0]-1,a[0]=s?s[0]:a[0]+1),a[1]-r[1]==0&&(r[1]=o?o[1]:r[1]-1,a[1]=s?s[1]:a[1]+1);var l=t.coordinateSystem=new hg;l.zoomLimit=t.get("scaleLimit"),l.setBoundingRect(r[0],r[1],a[0]-r[0],a[1]-r[1]),l.setCenter(t.get("center"),e),l.setZoom(t.get("zoom")),this.group.attr({x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY}),this._min=r,this._max=a},e.prototype._updateController=function(t,e,n){var i=this,r=this._controller,a=this._controllerHost,o=this.group;r.setPointerChecker((function(e,i,r){var a=o.getBoundingRect();return a.applyTransform(o.transform),a.contain(i,r)&&!uf(e,n,t)})),r.enable(t.get("roam")),a.zoomLimit=t.get("scaleLimit"),a.zoom=t.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",(function(e){af(a,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:e.dx,dy:e.dy})})).on("zoom",(function(e){of(a,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),i._updateNodeAndLinkScale(t),n.updateLabelLayout()}))},e.prototype._updateNodeAndLinkScale=function(t){var e=t.getData(),n=this._getNodeGlobalScale(t);e.eachItemGraphicEl((function(t,e){t.setSymbolScale(n)}))},e.prototype._getNodeGlobalScale=function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,i=e.scaleX||1;return((e.getZoom()-1)*n+1)/i},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(bi),Wg=De();function Ug(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,Jg(e,n,t),ie(n,(function(n){ie(e.TRANSFERABLE_METHODS,(function(e){n.wrapMethod(e,le(Yg,t))}))})),e.wrapMethod("cloneShallow",le(qg,t)),ie(e.CHANGABLE_METHODS,(function(n){e.wrapMethod(n,le($g,t))})),En(n[e.dataType]===e)}function Yg(t,e){if(Wg(i=this).mainData===i){var n=xn({},Wg(this).datas);n[this.dataType]=e,Jg(e,n,t)}else Kg(e,this.dataType,Wg(this).mainData,t);var i;return e}function $g(t,e){return t.struct&&t.struct.update(),e}function qg(t,e){return ie(Wg(e).datas,(function(n,i){n!==e&&Kg(n.cloneShallow(),i,e,t)})),e}function Xg(t){var e=Wg(this).mainData;return null==t||null==e?e:Wg(e).datas[t]}function Zg(){var t=Wg(this).mainData;return null==t?[{data:t}]:me(Ze(Wg(t).datas),(function(e){return{type:e,data:Wg(t).datas[e]}}))}function Jg(t,e,n){Wg(t).datas={},ie(e,(function(e,i){Kg(e,i,t,n)}))}function Kg(t,e,n,i){Wg(n).datas[e]=t,Wg(t).mainData=n,t.dataType=e,i.struct&&(t[i.structAttr]=i.struct,i.struct[i.datasAttr[e]]=t),t.getLinkedData=Xg,t.getLinkedDataAll=Zg}var Qg=function(){function t(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(t,e,n){se(t)&&(n=e,e=t,t=null),vn(t=t||{})&&(t={order:t});var i,r=t.order||"preorder",a=this[t.attr||"children"];"preorder"===r&&(i=e.call(n,this));for(var o=0;!i&&o<a.length;o++)a[o].eachNode(t,e,n);"postorder"===r&&e.call(n,this)},t.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},t.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].getNodeById(t);if(r)return r}},t.prototype.contains=function(t){if(t===this)return!0;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].contains(t);if(r)return r}},t.prototype.getAncestors=function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},t.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},t.prototype.getDescendantIndices=function(){var t=[];return this.eachNode((function(e){t.push(e.dataIndex)})),t},t.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},t.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},t.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},t.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},t.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},t}();var tm=function(){function t(t){this.type="tree",this._nodes=[],this.hostModel=t}return t.prototype.eachNode=function(t,e,n){this.root.eachNode(t,e,n)},t.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},t.prototype.getNodeById=function(t){return this.root.getNodeById(t)},t.prototype.update=function(){for(var t=this.data,e=this._nodes,n=0,i=e.length;n<i;n++)e[n].dataIndex=-1;for(n=0,i=t.count();n<i;n++)e[t.getRawIndex(n)].dataIndex=n},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,i){var r=new t(n),a=[],o=1;!function t(e,n){var i=e.value;o=Math.max(o,pe(i)?i.length:1),a.push(e);var s=new Qg(na(e.name,""),r);n?function(t,e){var n=e.children;if(t.parentNode===e)return;n.push(t),t.parentNode=e}(s,n):r.root=s,r._nodes.push(s);var l=e.children;if(l)for(var u=0;u<l.length;u++)t(l[u],s)}(e),r.root.updateDepthAndHeight(0);var s=ce(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,l=new he(s,n);return l.initData(a),i&&i(l),Ug({mainData:l,struct:r,structAttr:"tree"}),r.update(),r},t}();function em(t,e,n){if(t&&sn(e,t.type)>=0){var i=n.getData().tree.root,r=t.targetNode;if(vn(r)&&(r=i.getNodeById(r)),r&&i.contains(r))return{node:r};var a=t.targetNodeId;if(null!=a&&(r=i.getNodeById(a)))return{node:r}}}function nm(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function im(t,e){var n=nm(t);return sn(n,e)>=0}function rm(t,e){for(var n=[];t;){var i=t.dataIndex;n.push({name:t.name,dataIndex:i,value:e.getRawValue(i)}),t=t.parentNode}return n.reverse(),n}var am=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return _e(e,t),e.prototype.getInitialData=function(t){var e={name:t.name,children:t.data},n=t.leaves||{},i=new wr(n,this,this.ecModel),r=tm.createTree(e,this,(function(t){t.wrapMethod("getItemModel",(function(t,e){var n=r.getNodeByDataIndex(e);return n&&n.children.length&&n.isExpand||(t.parentModel=i),t}))}));var a=0;r.eachNode("preorder",(function(t){t.depth>a&&(a=t.depth)}));var o=t.expandAndCollapse&&t.initialTreeDepth>=0?t.initialTreeDepth:a;return r.root.eachNode("preorder",(function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=o})),r.data},e.prototype.getOrient=function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,e,n){for(var i=this.getData().tree,r=i.root.children[0],a=i.getNodeByDataIndex(t),o=a.getValue(),s=a.name;a&&a!==r;)s=a.parentNode.name+"."+s,a=a.parentNode;return br("nameValue",{name:s,value:o,noValue:isNaN(o)||null==o})},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=rm(i,this),n.collapsed=!i.isExpand,n},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(Qn);function om(t,e){for(var n,i=[t];n=i.pop();)if(e(n),n.isExpand){var r=n.children;if(r.length)for(var a=r.length-1;a>=0;a--)i.push(r[a])}}function sm(t,e){t.eachSeriesByType("tree",(function(t){!function(t,e){var n=function(t,e){return Vi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=n;var i=t.get("layout"),r=0,a=0,o=null;"radial"===i?(r=2*Math.PI,a=Math.min(n.height,n.width)/2,o=Dg((function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth}))):(r=n.width,a=n.height,o=Dg());var s=t.getData().tree.root,l=s.children[0];if(l){!function(t){var e=t;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n,i,r=[e];n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var a=i.length-1;a>=0;a--){var o=i[a];o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(o)}}(s),function(t,e,n){for(var i,r=[t],a=[];i=r.pop();)if(a.push(i),i.isExpand){var o=i.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;i=a.pop();)e(i,n)}(l,kg,o),s.hierNode.modifier=-l.hierNode.prelim,om(l,Ig);var u=l,c=l,d=l;om(l,(function(t){var e=t.getLayout().x;e<u.getLayout().x&&(u=t),e>c.getLayout().x&&(c=t),t.depth>d.depth&&(d=t)}));var h=u===c?1:o(u,c)/2,p=h-u.getLayout().x,f=0,g=0,m=0,v=0;if("radial"===i)f=r/(c.getLayout().x+h+p),g=a/(d.depth-1||1),om(l,(function(t){m=(t.getLayout().x+p)*f,v=(t.depth-1)*g;var e=Tg(m,v);t.setLayout({x:e.x,y:e.y,rawX:m,rawY:v},!0)}));else{var y=t.getOrient();"RL"===y||"LR"===y?(g=a/(c.getLayout().x+h+p),f=r/(d.depth-1||1),om(l,(function(t){v=(t.getLayout().x+p)*g,m="LR"===y?(t.depth-1)*f:r-(t.depth-1)*f,t.setLayout({x:m,y:v},!0)}))):"TB"!==y&&"BT"!==y||(f=r/(c.getLayout().x+h+p),g=a/(d.depth-1||1),om(l,(function(t){m=(t.getLayout().x+p)*f,v="TB"===y?(t.depth-1)*g:a-(t.depth-1)*g,t.setLayout({x:m,y:v},!0)})))}}}(t,e)}))}function lm(t){t.eachSeriesByType("tree",(function(t){var e=t.getData();e.tree.eachNode((function(t){var n=t.getModel().getModel("itemStyle").getItemStyle(),i=e.ensureUniqueItemVisual(t.dataIndex,"style");xn(i,n)}))}))}var um=["treemapZoomToNode","treemapRender","treemapMove"];function cm(t){var e=t.getData().tree,n={};e.eachNode((function(e){for(var i=e;i&&i.depth>1;)i=i.parentNode;var r=ia(t.ecModel,i.name||i.dataIndex+"",n);e.setVisual("decal",r)}))}function dm(t){var e=0;ie(t.children,(function(t){dm(t);var n=t.value;pe(n)&&(n=n[0]),e+=n}));var n=t.value;pe(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),pe(t.value)?t.value[0]=n:t.value=n}var hm=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventUsingHoverLayer=!0,n}return _e(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};dm(n);var i=t.levels||[],r=this.designatedVisualItemStyle={},a=new wr({itemStyle:r},this,e);i=t.levels=function(t,e){var n,i,r=ra(e.get("color")),a=ra(e.get(["aria","decal","decals"]));if(!r)return;ie(t=t||[],(function(t){var e=new wr(t),r=e.get("color"),a=e.get("decal");(e.get(["itemStyle","color"])||r&&"none"!==r)&&(n=!0),(e.get(["itemStyle","decal"])||a&&"none"!==a)&&(i=!0)}));var o=t[0]||(t[0]={});n||(o.color=r.slice());!i&&a&&(o.decal=a.slice());return t}(i,e);var o=me(i||[],(function(t){return new wr(t,a,e)}),this),s=tm.createTree(n,this,(function(t){t.wrapMethod("getItemModel",(function(t,e){var n=s.getNodeByDataIndex(e),i=n?o[n.depth]:null;return t.parentModel=i||a,t}))}));return s.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=this.getRawValue(t),a=i.getName(t);return br("nameValue",{name:a,value:r})},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=rm(i,this),n.treePathInfo=n.treeAncestors,n},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},xn(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=re(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){cm(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.1024,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(Qn);function pm(t,e,n,i,r,a){var o=[[r?t:t-5,e],[t+n,e],[t+n,e+i],[r?t:t-5,e+i]];return!a&&o.splice(2,0,[t+n+5,e+i/2]),!r&&o.push([t,e+i/2]),o}function fm(t,e,n){Je(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&rm(n,e)}}var gm=function(){function t(t){this.group=new Jn,t.add(this.group)}return t.prototype.render=function(t,e,n,i){var r=t.getModel("breadcrumb"),a=this.group;if(a.removeAll(),r.get("show")&&n){var o=r.getModel("itemStyle"),s=r.getModel("emphasis"),l=o.getModel("textStyle"),u=s.getModel(["itemStyle","textStyle"]),c={pos:{left:r.get("left"),right:r.get("right"),top:r.get("top"),bottom:r.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:r.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,c,l),this._renderContent(t,c,o,s,l,u,i),aa(a,c.pos,c.box)}},t.prototype._prepare=function(t,e,n){for(var i=t;i;i=i.parentNode){var r=na(i.getModel().get("name"),""),a=n.getTextRect(r),o=Math.max(a.width+16,e.emptyItemWidth);e.totalWidth+=o+8,e.renderList.push({node:i,text:r,width:o})}},t.prototype._renderContent=function(t,e,n,i,r,a,o){for(var s=0,l=e.emptyItemWidth,u=t.get(["breadcrumb","height"]),c=oa(e.pos,e.box),d=e.totalWidth,h=e.renderList,p=i.getModel("itemStyle").getItemStyle(),f=h.length-1;f>=0;f--){var g=h[f],m=g.node,v=g.width,y=g.text;d>c.width&&(d-=v-l,v=l,y=null);var _=new yr({shape:{points:pm(s,0,v,u,f===h.length-1,0===f)},style:He(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new Mi({style:sa(r,{text:y})}),textConfig:{position:"inside"},z2:1e4*Ur,onclick:le(o,m)});_.disableLabelAnimation=!0,_.getTextContent().ensureState("emphasis").style=sa(a,{text:y}),_.ensureState("emphasis").style=p,si(_,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(_),fm(_,t,m),s+=v+8}},t.prototype.remove=function(){this.group.removeAll()},t}(),mm=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(t,e,n,i,r){return!this._elExistsMap[t.id]&&(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:n,delay:i,easing:r}),!0)},t.prototype.finished=function(t){return this._finishedCallback=t,this},t.prototype.start=function(){for(var t=this,e=this._storage.length,n=function(){--e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},i=0,r=this._storage.length;i<r;i++){var a=this._storage[i];a.el.animateTo(a.target,{duration:a.duration,delay:a.delay,easing:a.easing,setToFinal:!0,done:n,aborted:n})}return this},t}();var vm=Jn,ym=gi,_m=10*Ur,xm=2*Ur,bm=3*Ur,wm=la([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Mm=function(t){var e=wm(t);return e.stroke=e.fill=e.lineWidth=null,e},Sm=De();var Cm=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._state="ready",n._storage={nodeGroup:[],background:[],content:[]},n}return _e(e,t),e.prototype.render=function(t,e,n,i){var r=e.findComponents({mainType:"series",subType:"treemap",query:i});if(!(sn(r,t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var a=em(i,["treemapZoomToNode","treemapRootToNode"],t),o=i&&i.type,s=t.layoutInfo,l=!this._oldTree,u=this._storage,c="treemapRootToNode"===o&&a&&u?{rootNodeGroup:u.nodeGroup[a.node.getRawIndex()],direction:i.direction}:null,d=this._giveContainerGroup(s),h=t.get("animation"),p=this._doRender(d,t,c);!h||l||o&&"treemapZoomToNode"!==o&&"treemapRootToNode"!==o?p.renderFinally():this._doAnimation(d,p,t,c),this._resetController(n),this._renderBreadcrumb(t,n,a)}},e.prototype._giveContainerGroup=function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new vm,this._initEvents(e),this.group.add(e)),e.x=t.x,e.y=t.y,e},e.prototype._doRender=function(t,e,n){var i=e.getData().tree,r=this._oldTree,a={nodeGroup:[],background:[],content:[]},o={nodeGroup:[],background:[],content:[]},s=this._storage,l=[];function u(t,i,r,u){return function(t,e,n,i,r,a,o,s,l,u){if(!o)return;var c=o.getLayout(),d=t.getData(),h=o.getModel();if(d.setItemGraphicEl(o.dataIndex,null),!c||!c.isInView)return;var p=c.width,f=c.height,g=c.borderWidth,m=c.invisible,v=o.getRawIndex(),y=s&&s.getRawIndex(),_=o.viewChildren,x=c.upperHeight,b=_&&_.length,w=h.getModel("itemStyle"),M=h.getModel(["emphasis","itemStyle"]),S=h.getModel(["blur","itemStyle"]),C=h.getModel(["select","itemStyle"]),k=w.get("borderRadius")||0,I=H("nodeGroup",vm);if(!I)return;if(l.add(I),I.x=c.x||0,I.y=c.y||0,I.markRedraw(),Sm(I).nodeWidth=p,Sm(I).nodeHeight=f,c.isAboveViewRoot)return I;var D=H("background",ym,u,xm);D&&z(I,D,b&&c.upperLabelHeight);var T=h.getModel("emphasis"),A=T.get("focus"),E=T.get("blurScope"),L=T.get("disabled"),P="ancestor"===A?o.getAncestorsIndices():"descendant"===A?o.getDescendantIndices():A;if(b)da(I)&&ha(I,!1),D&&(ha(D,!L),d.setItemGraphicEl(o.dataIndex,D),pa(D,P,E));else{var N=H("content",ym,u,bm);N&&R(I,N),D.disableMorphing=!0,D&&da(D)&&ha(D,!1),ha(I,!L),d.setItemGraphicEl(o.dataIndex,I);var O=h.getShallow("cursor");O&&N.attr("cursor",O),pa(I,P,E)}return I;function z(e,n,i){var r=Je(n);if(r.dataIndex=o.dataIndex,r.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:p,height:f,r:k}),m)V(n);else{n.invisible=!1;var a=o.getVisual("style"),s=a.stroke,l=Mm(w);l.fill=s;var u=wm(M);u.fill=M.get("borderColor");var c=wm(S);c.fill=S.get("borderColor");var d=wm(C);if(d.fill=C.get("borderColor"),i){var h=p-2*g;F(n,s,a.opacity,{x:g,y:0,width:h,height:x})}else n.removeTextContent();n.setStyle(l),n.ensureState("emphasis").style=u,n.ensureState("blur").style=c,n.ensureState("select").style=d,Hr(n)}e.add(n)}function R(e,n){var i=Je(n);i.dataIndex=o.dataIndex,i.seriesIndex=t.seriesIndex;var r=Math.max(p-2*g,0),a=Math.max(f-2*g,0);if(n.culling=!0,n.setShape({x:g,y:g,width:r,height:a,r:k}),m)V(n);else{n.invisible=!1;var s=o.getVisual("style"),l=s.fill,u=Mm(w);u.fill=l,u.decal=s.decal;var c=wm(M),d=wm(S),h=wm(C);F(n,l,s.opacity,null),n.setStyle(u),n.ensureState("emphasis").style=c,n.ensureState("blur").style=d,n.ensureState("select").style=h,Hr(n)}e.add(n)}function V(t){!t.invisible&&a.push(t)}function F(e,n,i,r){var a=h.getModel(r?"upperLabel":"label"),s=na(h.get("name"),null),l=a.getShallow("show");oi(e,ri(h,r?"upperLabel":"label"),{defaultText:l?s:null,inheritColor:n,defaultOpacity:i,labelFetcher:t,labelDataIndex:o.dataIndex});var u=e.getTextContent();if(u){var d=u.style,p=fa(d.padding||0);r&&(e.setTextConfig({layoutRect:r}),u.disableLabelLayout=!0),u.beforeUpdate=function(){var t=Math.max((r?r.width:e.shape.width)-p[1]-p[3],0),n=Math.max((r?r.height:e.shape.height)-p[0]-p[2],0);d.width===t&&d.height===n||u.setStyle({width:t,height:n})},d.truncateMinChar=2,d.lineOverflow="truncate",B(d,r,c);var f=u.getState("emphasis");B(f?f.style:null,r,c)}}function B(e,n,i){var r=e?e.text:null;if(!n&&i.isLeafRoot&&null!=r){var a=t.get("drillDownIcon",!0);e.text=a?a+" "+r:r}}function H(t,i,a,o){var s=null!=y&&n[t][y],l=r[t];return s?(n[t][y]=null,G(l,s)):m||((s=new i)instanceof Br&&(s.z2=function(t,e){return t*_m+e}(a,o)),j(l,s)),e[t][v]=s}function G(t,e){var n=t[v]={};e instanceof vm?(n.oldX=e.x,n.oldY=e.y):n.oldShape=xn({},e.shape)}function j(t,e){var n=t[v]={},a=o.parentNode,s=e instanceof Jn;if(a&&(!i||"drillDown"===i.direction)){var l=0,u=0,c=r.background[a.getRawIndex()];!i&&c&&c.oldShape&&(l=c.oldShape.width,u=c.oldShape.height),s?(n.oldX=0,n.oldY=u):n.oldShape={x:l,y:u,width:0,height:0}}n.fadein=!s}}(e,o,s,n,a,l,t,i,r,u)}!function t(e,n,i,r,a){r?(n=e,ie(e,(function(t,e){!t.isRemoved()&&s(e,e)}))):new ua(n,e,o,o).add(s).update(s).remove(le(s,null)).execute();function o(t){return t.getId()}function s(o,s){var l=null!=o?e[o]:null,c=null!=s?n[s]:null,d=u(l,c,i,a);d&&t(l&&l.viewChildren||[],c&&c.viewChildren||[],d,r,a+1)}}(i.root?[i.root]:[],r&&r.root?[r.root]:[],t,i===r||!r,0);var c,d,h=(d={nodeGroup:[],background:[],content:[]},(c=s)&&ie(c,(function(t,e){var n=d[e];ie(t,(function(t){t&&(n.push(t),Sm(t).willDelete=!0)}))})),d);if(this._oldTree=i,this._storage=o,this._controllerHost){var p=this.seriesModel.layoutInfo,f=i.root.getLayout();f.width===p.width&&f.height===p.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:a,willDeleteEls:h,renderFinally:function(){ie(h,(function(t){ie(t,(function(t){t.parent&&t.parent.remove(t)}))})),ie(l,(function(t){t.invisible=!0,t.dirty()}))}}},e.prototype._doAnimation=function(t,e,n,i){var r=n.get("animationDurationUpdate"),a=n.get("animationEasing"),o=(se(r)?0:r)||0,s=(se(a)?null:a)||"cubicOut",l=new mm;ie(e.willDeleteEls,(function(t,e){ie(t,(function(t,n){if(!t.invisible){var r,a=t.parent,u=Sm(a);if(i&&"drillDown"===i.direction)r=a===i.rootNodeGroup?{shape:{x:0,y:0,width:u.nodeWidth,height:u.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var c=0,d=0;u.willDelete||(c=u.nodeWidth/2,d=u.nodeHeight/2),r="nodeGroup"===e?{x:c,y:d,style:{opacity:0}}:{shape:{x:c,y:d,width:0,height:0},style:{opacity:0}}}r&&l.add(t,r,o,0,s)}}))})),ie(this._storage,(function(t,n){ie(t,(function(t,i){var r=e.lastsForAnimation[n][i],a={};r&&(t instanceof Jn?null!=r.oldX&&(a.x=t.x,a.y=t.y,t.x=r.oldX,t.y=r.oldY):(r.oldShape&&(a.shape=xn({},t.shape),t.setShape(r.oldShape)),r.fadein?(t.setStyle("opacity",0),a.style={opacity:1}):1!==t.style.opacity&&(a.style={opacity:1})),l.add(t,a,o,0,s))}))}),this),this._state="animating",l.finished(vi((function(){this._state="ready",e.renderFinally()}),this)).start()},e.prototype._resetController=function(t){var e=this._controller,n=this._controllerHost;n||(this._controllerHost={target:this.group},n=this._controllerHost),e||((e=this._controller=new rf(t.getZr())).enable(this.seriesModel.get("roam")),n.zoomLimit=this.seriesModel.get("scaleLimit"),n.zoom=this.seriesModel.get("zoom"),e.on("pan",vi(this._onPan,this)),e.on("zoom",vi(this._onZoom,this)));var i=new xe(0,0,t.getWidth(),t.getHeight());e.setPointerChecker((function(t,e,n){return i.contain(e,n)}))},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if("animating"!==this._state&&(Math.abs(t.dx)>3||Math.abs(t.dy)>3)){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},e.prototype._onZoom=function(t){var e=t.originX,n=t.originY,i=t.scale;if("animating"!==this._state){var r=this.seriesModel.getData().tree.root;if(!r)return;var a=r.getLayout();if(!a)return;var o,s=new xe(a.x,a.y,a.width,a.height),l=this._controllerHost;o=l.zoomLimit;var u=l.zoom=l.zoom||1;if(u*=i,o){var c=o.min||0,d=o.max||1/0;u=Math.max(Math.min(d,u),c)}var h=u/l.zoom;l.zoom=u;var p=this.seriesModel.layoutInfo;e-=p.x,n-=p.y;var f=Vr();Rr(f,f,[-e,-n]),zr(f,f,[h,h]),Rr(f,f,[e,n]),s.applyTransform(f),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x,y:s.y,width:s.width,height:s.height}})}},e.prototype._initEvents=function(t){var e=this;t.on("click",(function(t){if("ready"===e._state){var n=e.seriesModel.get("nodeClick",!0);if(n){var i=e.findTarget(t.offsetX,t.offsetY);if(i){var r=i.node;if(r.getLayout().isLeafRoot)e._rootToNode(i);else if("zoomToNode"===n)e._zoomToNode(i);else if("link"===n){var a=r.hostTree.data.getItemModel(r.dataIndex),o=a.get("link",!0),s=a.get("target",!0)||"blank";o&&ca(o,s)}}}}}),this)},e.prototype._renderBreadcrumb=function(t,e,n){var i=this;n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||(n={node:t.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new gm(this.group))).render(t,e,n.node,(function(e){"animating"!==i._state&&(im(t.getViewRoot(),e)?i._rootToNode({node:e}):i._zoomToNode({node:e}))}))},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,e){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(i){var r=this._storage.background[i.getRawIndex()];if(r){var a=r.transformCoordToLocal(t,e),o=r.shape;if(!(o.x<=a[0]&&a[0]<=o.x+o.width&&o.y<=a[1]&&a[1]<=o.y+o.height))return!1;n={node:i,offsetX:a[0],offsetY:a[1]}}}),this),n},e.type="treemap",e}(bi),km=ie,Im=$n,Dm=function(){function t(e){var n=e.mappingMethod,i=e.type,r=this.option=Pn(e);this.type=i,this.mappingMethod=n,this._normalizeData=Vm[n];var a=t.visualHandlers[i];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[n],"piecewise"===n?(Tm(r),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,ie(e,(function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)}))}(r)):"category"===n?r.categories?function(t){var e=t.categories,n=t.categoryMap={},i=t.visual;if(km(e,(function(t,e){n[t]=e})),!pe(i)){var r=[];$n(i)?km(i,(function(t,e){var i=n[e];r[null!=i?i:-1]=t})):r[-1]=i,i=Rm(t,r)}for(var a=e.length-1;a>=0;a--)null==i[a]&&(delete n[e[a]],e.pop())}(r):Tm(r,!0):(En("linear"!==n||r.dataExtent),Tm(r))}return t.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},t.prototype.getNormalizer=function(){return vi(this._normalizeData,this)},t.listVisualTypes=function(){return Ze(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(t,e,n){$n(t)?ie(t,e,n):e.call(n,t)},t.mapVisual=function(e,n,i){var r,a=pe(e)?[]:$n(e)?{}:(r=!0,null);return t.eachVisual(e,(function(t,e){var o=n.call(i,t,e);r?a=o:a[e]=o})),a},t.retrieveVisuals=function(e){var n,i={};return e&&km(t.visualHandlers,(function(t,r){e.hasOwnProperty(r)&&(i[r]=e[r],n=!0)})),n?i:null},t.prepareVisualTypes=function(t){if(pe(t))t=t.slice();else{if(!Im(t))return[];var e=[];km(t,(function(t,n){e.push(n)})),t=e}return t.sort((function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1})),t},t.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},t.findPieceIndex=function(t,e,n){for(var i,r=1/0,a=0,o=e.length;a<o;a++){var s=e[a].value;if(null!=s){if(s===t||vn(s)&&s===t+"")return a;n&&d(s,a)}}for(a=0,o=e.length;a<o;a++){var l=e[a],u=l.interval,c=l.close;if(u){if(u[0]===-1/0){if(Fm(c[1],t,u[1]))return a}else if(u[1]===1/0){if(Fm(c[0],u[0],t))return a}else if(Fm(c[0],u[0],t)&&Fm(c[1],t,u[1]))return a;n&&d(u[0],a),n&&d(u[1],a)}}if(n)return t===1/0?e.length-1:t===-1/0?0:i;function d(e,n){var a=Math.abs(e-t);a<r&&(r=a,i=n)}},t.visualHandlers={color:{applyVisual:Lm("color"),getColorMapper:function(){var t=this.option;return vi("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),Pm.call(this,t)}:function(e,n,i){var r=!!i;return!n&&(e=this._normalizeData(e)),i=ga(e,t.parsedVisual,i),r?i:ma(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return ma(ga(t,this.option.parsedVisual),"rgba")},category:Pm,piecewise:function(t,e){var n=zm.call(this,e);return null==n&&(n=ma(ga(t,this.option.parsedVisual),"rgba")),n},fixed:Nm}},colorHue:Am((function(t,e){return _a(t,e)})),colorSaturation:Am((function(t,e){return _a(t,null,e)})),colorLightness:Am((function(t,e){return _a(t,null,null,e)})),colorAlpha:Am((function(t,e){return xa(t,e)})),decal:{applyVisual:Lm("decal"),_normalizedToVisual:{linear:null,category:Pm,piecewise:null,fixed:null}},opacity:{applyVisual:Lm("opacity"),_normalizedToVisual:Om([0,1])},liftZ:{applyVisual:Lm("liftZ"),_normalizedToVisual:{linear:Nm,category:Nm,piecewise:Nm,fixed:Nm}},symbol:{applyVisual:function(t,e,n){n("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:Em,category:Pm,piecewise:function(t,e){var n=zm.call(this,e);return null==n&&(n=Em.call(this,t)),n},fixed:Nm}},symbolSize:{applyVisual:Lm("symbolSize"),_normalizedToVisual:Om([0,1])}},t}();function Tm(t,e){var n=t.visual,i=[];$n(n)?km(n,(function(t){i.push(t)})):null!=n&&i.push(n);e||1!==i.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(i[1]=i[0]),Rm(t,i)}function Am(t){return{applyVisual:function(e,n,i){var r=this.mapValueToVisual(e);i("color",t(n("color"),r))},_normalizedToVisual:Om([0,1])}}function Em(t){var e=this.option.visual;return e[Math.round(Ne(t,[0,1],[0,e.length-1],!0))]||{}}function Lm(t){return function(e,n,i){i(t,this.mapValueToVisual(e))}}function Pm(t){var e=this.option.visual;return e[this.option.loop&&-1!==t?t%e.length:t]}function Nm(){return this.option.visual[0]}function Om(t){return{linear:function(e){return Ne(e,t,this.option.visual,!0)},category:Pm,piecewise:function(e,n){var i=zm.call(this,n);return null==i&&(i=Ne(e,t,this.option.visual,!0)),i},fixed:Nm}}function zm(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var i=n[Dm.findPieceIndex(t,n)];if(i&&i.visual)return i.visual[this.type]}}function Rm(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=me(e,(function(t){var e=va(t);return e||[0,0,0,1]}))),e}var Vm={linear:function(t){return Ne(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=Dm.findPieceIndex(t,e,!0);if(null!=n)return Ne(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?-1:e},fixed:Zn};function Fm(t,e,n){return t?e<=n:e<n}var Bm=Dm,Hm=De(),Gm={seriesType:"treemap",reset:function(t){var e=t.getData().tree.root;e.isRemoved()||jm(e,{},t.getViewRoot().getAncestors(),t)}};function jm(t,e,n,i){var r=t.getModel(),a=t.getLayout(),o=t.hostTree.data;if(a&&!a.invisible&&a.isInView){var s,l=r.getModel("itemStyle"),u=function(t,e,n){var i=xn({},e),r=n.designatedVisualItemStyle;return ie(["color","colorAlpha","colorSaturation"],(function(n){r[n]=e[n];var a=t.get(n);r[n]=null,null!=a&&(i[n]=a)})),i}(l,e,i),c=o.ensureUniqueItemVisual(t.dataIndex,"style"),d=l.get("borderColor"),h=l.get("borderColorSaturation");null!=h&&(d=function(t,e){return null!=e?_a(e,null,null,t):null}(h,s=Wm(u))),c.stroke=d;var p=t.viewChildren;if(p&&p.length){var f=function(t,e,n,i,r,a){if(!a||!a.length)return;var o=Ym(e,"color")||null!=r.color&&"none"!==r.color&&(Ym(e,"colorAlpha")||Ym(e,"colorSaturation"));if(!o)return;var s=e.get("visualMin"),l=e.get("visualMax"),u=n.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=l&&l>u[1]&&(u[1]=l);var c=e.get("colorMappingBy"),d={type:o.name,dataExtent:u,visual:o.range};"color"!==d.type||"index"!==c&&"id"!==c?d.mappingMethod="linear":(d.mappingMethod="category",d.loop=!0);var h=new Bm(d);return Hm(h).drColorMappingBy=c,h}(0,r,a,0,u,p);ie(p,(function(t,e){if(t.depth>=n.length||t===n[t.depth]){var a=function(t,e,n,i,r,a){var o=xn({},e);if(r){var s=r.type,l="color"===s&&Hm(r).drColorMappingBy,u="index"===l?i:"id"===l?a.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));o[s]=r.mapValueToVisual(u)}return o}(r,u,t,e,f,i);jm(t,a,n,i)}}))}else s=Wm(u),c.fill=s}}function Wm(t){var e=Um(t,"color");if(e){var n=Um(t,"colorAlpha"),i=Um(t,"colorSaturation");return i&&(e=_a(e,null,null,i)),n&&(e=xa(e,n)),e}}function Um(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function Ym(t,e){var n=t.get(e);return pe(n)&&n.length?{name:e,range:n}:null}var $m=Math.max,qm=Math.min,Xm=Xr,Zm=ie,Jm=["itemStyle","borderWidth"],Km=["itemStyle","gapWidth"],Qm=["upperLabel","show"],tv=["upperLabel","height"],ev={seriesType:"treemap",reset:function(t,e,n,i){var r=n.getWidth(),a=n.getHeight(),o=t.option,s=Vi(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=o.size||[],u=Ke(Xm(s.width,l[0]),r),c=Ke(Xm(s.height,l[1]),a),d=i&&i.type,h=em(i,["treemapZoomToNode","treemapRootToNode"],t),p="treemapRender"===d||"treemapMove"===d?i.rootRect:null,f=t.getViewRoot(),g=nm(f);if("treemapMove"!==d){var m="treemapZoomToNode"===d?function(t,e,n,i,r){var a,o=(e||{}).node,s=[i,r];if(!o||o===n)return s;var l=i*r,u=l*t.option.zoomToNodeRatio;for(;a=o.parentNode;){for(var c=0,d=a.children,h=0,p=d.length;h<p;h++)c+=d[h].getValue();var f=o.getValue();if(0===f)return s;u*=c/f;var g=a.getModel(),m=g.get(Jm);(u+=4*m*m+(3*m+Math.max(m,ov(g)))*Math.pow(u,.5))>ba&&(u=ba),o=a}u<l&&(u=l);var v=Math.pow(u/l,.5);return[i*v,r*v]}(t,h,f,u,c):p?[p.width,p.height]:[u,c],v=o.sort;v&&"asc"!==v&&"desc"!==v&&(v="desc");var y={squareRatio:o.squareRatio,sort:v,leafDepth:o.leafDepth};f.hostTree.clearLayouts();var _={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};f.setLayout(_),nv(f,y,!1,0),_=f.getLayout(),Zm(g,(function(t,e){var n=(g[e+1]||f).getValue();t.setLayout(xn({dataExtent:[n,n],borderWidth:0,upperHeight:0},_))}))}var x=t.getData().tree.root;x.setLayout(function(t,e,n){if(e)return{x:e.x,y:e.y};var i={x:0,y:0};if(!n)return i;var r=n.node,a=r.getLayout();if(!a)return i;var o=[a.width/2,a.height/2],s=r;for(;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:t.width/2-o[0],y:t.height/2-o[1]}}(s,p,h),!0),t.setLayoutInfo(s),av(x,new xe(-s.x,-s.y,r,a),g,f,0)}};function nv(t,e,n,i){var r,a;if(!t.isRemoved()){var o=t.getLayout();r=o.width,a=o.height;var s=t.getModel(),l=s.get(Jm),u=s.get(Km)/2,c=ov(s),d=Math.max(l,c),h=l-u,p=d-u;t.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:c},!0);var f=(r=$m(r-2*h,0))*(a=$m(a-h-p,0)),g=function(t,e,n,i,r,a){var o=t.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=i.leafDepth&&i.leafDepth<=a;if(r&&!l)return t.viewChildren=[];o=Ie(o,(function(t){return!t.isRemoved()})),function(t,e){e&&t.sort((function(t,n){var i="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0===i?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:i}))}(o,s);var u=function(t,e,n){for(var i=0,r=0,a=e.length;r<a;r++)i+=e[r].getValue();var o,s=t.get("visualDimension");e&&e.length?"value"===s&&n?(o=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&o.reverse()):(o=[1/0,-1/0],Zm(e,(function(t){var e=t.getValue(s);e<o[0]&&(o[0]=e),e>o[1]&&(o[1]=e)}))):o=[NaN,NaN];return{sum:i,dataExtent:o}}(e,o,s);if(0===u.sum)return t.viewChildren=[];if(u.sum=function(t,e,n,i,r){if(!i)return n;for(var a=t.get("visibleMin"),o=r.length,s=o,l=o-1;l>=0;l--){var u=r["asc"===i?o-l-1:l].getValue();u/n*e<a&&(s=l,n-=u)}return"asc"===i?r.splice(0,o-s):r.splice(s,o-s),n}(e,n,u.sum,s,o),0===u.sum)return t.viewChildren=[];for(var c=0,d=o.length;c<d;c++){var h=o[c].getValue()/u.sum*n;o[c].setLayout({area:h})}l&&(o.length&&t.setLayout({isLeafRoot:!0},!0),o.length=0);return t.viewChildren=o,t.setLayout({dataExtent:u.dataExtent},!0),o}(t,s,f,e,n,i);if(g.length){var m={x:h,y:p,width:r,height:a},v=qm(r,a),y=1/0,_=[];_.area=0;for(var x=0,b=g.length;x<b;){var w=g[x];_.push(w),_.area+=w.getLayout().area;var M=iv(_,v,e.squareRatio);M<=y?(x++,y=M):(_.area-=_.pop().getLayout().area,rv(_,v,m,u,!1),v=qm(m.width,m.height),_.length=_.area=0,y=1/0)}if(_.length&&rv(_,v,m,u,!0),!n){var S=s.get("childrenVisibleMin");null!=S&&f<S&&(n=!0)}for(x=0,b=g.length;x<b;x++)nv(g[x],e,n,i+1)}}}function iv(t,e,n){for(var i=0,r=1/0,a=0,o=void 0,s=t.length;a<s;a++)(o=t[a].getLayout().area)&&(o<r&&(r=o),o>i&&(i=o));var l=t.area*t.area,u=e*e*n;return l?$m(u*i/l,l/(u*r)):1/0}function rv(t,e,n,i,r){var a=e===n.width?0:1,o=1-a,s=["x","y"],l=["width","height"],u=n[s[a]],c=e?t.area/e:0;(r||c>n[l[o]])&&(c=n[l[o]]);for(var d=0,h=t.length;d<h;d++){var p=t[d],f={},g=c?p.getLayout().area/c:0,m=f[l[o]]=$m(c-2*i,0),v=n[s[a]]+n[l[a]]-u,y=d===h-1||v<g?v:g,_=f[l[a]]=$m(y-2*i,0);f[s[o]]=n[s[o]]+qm(i,m/2),f[s[a]]=u+qm(i,_/2),u+=y,p.setLayout(f,!0)}n[s[o]]+=c,n[l[o]]-=c}function av(t,e,n,i,r){var a=t.getLayout(),o=n[r],s=o&&o===t;if(!(o&&!s||r===n.length&&t!==i)){t.setLayout({isInView:!0,invisible:!s&&!e.intersect(a),isAboveViewRoot:s},!0);var l=new xe(e.x-a.x,e.y-a.y,e.width,e.height);Zm(t.viewChildren||[],(function(t){av(t,l,n,i,r+1)}))}}function ov(t){return t.get(Qm)?t.get(tv):0}function sv(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",(function(t){var n=t.getCategoriesData(),i=t.getGraph().data,r=n.mapArray(n.getName);i.filterSelf((function(t){var n=i.getItemModel(t).getShallow("category");if(null!=n){Mn(n)&&(n=r[n]);for(var a=0;a<e.length;a++)if(!e[a].isSelected(n))return!1}return!0}))}))}function lv(t){var e={};t.eachSeriesByType("graph",(function(t){var n=t.getCategoriesData(),i=t.getData(),r={};n.each((function(i){var a=n.getName(i);r["ec-"+a]=i;var o=n.getItemModel(i),s=o.getModel("itemStyle").getItemStyle();s.fill||(s.fill=t.getColorFromPalette(a,e)),n.setItemVisual(i,"style",s);for(var l=["symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++){var c=o.getShallow(l[u],!0);null!=c&&n.setItemVisual(i,l[u],c)}})),n.count()&&i.each((function(t){var e=i.getItemModel(t).getShallow("category");if(null!=e){vn(e)&&(e=r["ec-"+e]);var a=n.getItemVisual(e,"style"),o=i.ensureUniqueItemVisual(t,"style");xn(o,a);for(var s=["symbol","symbolSize","symbolKeepAspect"],l=0;l<s.length;l++)i.setItemVisual(t,s[l],n.getItemVisual(e,s[l]))}}))}))}function uv(t){return t instanceof Array||(t=[t,t]),t}function cv(t){t.eachSeriesByType("graph",(function(t){var e=t.getGraph(),n=t.getEdgeData(),i=uv(t.get("edgeSymbol")),r=uv(t.get("edgeSymbolSize"));n.setVisual("fromSymbol",i&&i[0]),n.setVisual("toSymbol",i&&i[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]),n.setVisual("style",t.getModel("lineStyle").getLineStyle()),n.each((function(t){var i=n.getItemModel(t),r=e.getEdgeByIndex(t),a=uv(i.getShallow("symbol",!0)),o=uv(i.getShallow("symbolSize",!0)),s=i.getModel("lineStyle").getLineStyle(),l=n.ensureUniqueItemVisual(t,"style");switch(xn(l,s),l.stroke){case"source":var u=r.node1.getVisual("style");l.stroke=u&&u.fill;break;case"target":u=r.node2.getVisual("style");l.stroke=u&&u.fill}a[0]&&r.setVisual("fromSymbol",a[0]),a[1]&&r.setVisual("toSymbol",a[1]),o[0]&&r.setVisual("fromSymbolSize",o[0]),o[1]&&r.setVisual("toSymbolSize",o[1])}))}))}var dv=function(t){return t.get("autoCurveness")||null},hv=function(t,e){var n=dv(t),i=20,r=[];if(Mn(n))i=n;else if(pe(n))return void(t.__curvenessList=n);e>i&&(i=e);var a=i%2?i+2:i+3;r=[];for(var o=0;o<a;o++)r.push((o%2?o+1:o)/10*(o%2?-1:1));t.__curvenessList=r},pv=function(t,e,n){var i=[t.id,t.dataIndex].join("."),r=[e.id,e.dataIndex].join(".");return[n.uid,i,r].join("--\x3e")},fv=function(t){var e=t.split("--\x3e");return[e[0],e[2],e[1]].join("--\x3e")},gv=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function mv(t,e,n,i){var r=dv(e),a=pe(r);if(!r)return null;var o=function(t,e){var n=pv(t.node1,t.node2,e);return e.__edgeMap[n]}(t,e);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===n){s=l;break}var u=function(t,e){return gv(pv(t.node1,t.node2,e),e)+gv(pv(t.node2,t.node1,e),e)}(t,e);hv(e,u),t.lineStyle=t.lineStyle||{};var c=pv(t.node1,t.node2,e),d=e.__curvenessList,h=a||u%2?0:1;if(o.isForward)return d[h+s];var p=fv(c),f=gv(p,e),g=d[s+f+h];return i?a?r&&0===r[0]?(f+h)%2?g:-g:((f%2?0:1)+h)%2?g:-g:(f+h)%2?g:-g:d[s+f+h]}function vv(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode((function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])})),yv(n,t)}}function yv(t,e){t.eachEdge((function(t,n){var i=Fi(t.getModel().get(["lineStyle","curveness"]),-mv(t,e,n,!0),0),r=wa(t.node1.getLayout()),a=wa(t.node2.getLayout()),o=[r,a];+i&&o.push([(r[0]+a[0])/2-(r[1]-a[1])*i,(r[1]+a[1])/2-(a[0]-r[0])*i]),t.setLayout(o)}))}function _v(t,e){t.eachSeriesByType("graph",(function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var i=t.getData(),r=[];ie(n.dimensions,(function(t){r=r.concat(i.mapDimensionsAll(t))}));for(var a=0;a<i.count();a++){for(var o=[],s=!1,l=0;l<r.length;l++){var u=i.get(r[l],a);isNaN(u)||(s=!0),o.push(u)}s?i.setItemLayout(a,n.dataToPoint(o)):i.setItemLayout(a,[NaN,NaN])}yv(i.graph,t)}else e&&"none"!==e||vv(t)}))}function xv(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=t.option.nodeScaleRatio,i=e.scaleX;return((e.getZoom()-1)*n+1)/i}function bv(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var wv=Math.PI,Mv=[];function Sv(t,e,n,i){var r=t.coordinateSystem;if(!r||"view"===r.type){var a=r.getBoundingRect(),o=t.getData(),s=o.graph,l=a.width/2+a.x,u=a.height/2+a.y,c=Math.min(a.width,a.height)/2,d=o.count();if(o.setLayout({cx:l,cy:u}),d){if(n){var h=r.pointToData(i),p=h[0],f=h[1],g=[p-l,f-u];Ma(g,g),Sa(g,g,c),n.setLayout([l+g[0],u+g[1]],!0),kv(n,t.get(["circular","rotateLabel"]),l,u)}Cv[e](t,s,o,c,l,u,d),s.eachEdge((function(e,n){var i,r=Fi(e.getModel().get(["lineStyle","curveness"]),mv(e,t,n),0),a=wa(e.node1.getLayout()),o=wa(e.node2.getLayout()),s=(a[0]+o[0])/2,c=(a[1]+o[1])/2;+r&&(i=[l*(r*=3)+s*(1-r),u*r+c*(1-r)]),e.setLayout([a,o,i])}))}}}var Cv={value:function(t,e,n,i,r,a,o){var s=0,l=n.getSum("value"),u=2*Math.PI/(l||o);e.eachNode((function(t){var e=t.getValue("value"),n=u*(l?e:1)/2;s+=n,t.setLayout([i*Math.cos(s)+r,i*Math.sin(s)+a]),s+=n}))},symbolSize:function(t,e,n,i,r,a,o){var s=0;Mv.length=o;var l=xv(t);e.eachNode((function(t){var e=bv(t);isNaN(e)&&(e=2),e<0&&(e=0),e*=l;var n=Math.asin(e/2/i);isNaN(n)&&(n=wv/2),Mv[t.dataIndex]=n,s+=2*n}));var u=(2*wv-s)/o/2,c=0;e.eachNode((function(t){var e=u+Mv[t.dataIndex];c+=e,(!t.getLayout()||!t.getLayout().fixed)&&t.setLayout([i*Math.cos(c)+r,i*Math.sin(c)+a]),c+=e}))}};function kv(t,e,n,i){var r=t.getGraphicEl();if(r){var a=t.getModel().get(["label","rotate"])||0,o=r.getSymbolPath();if(e){var s=t.getLayout(),l=Math.atan2(s[1]-i,s[0]-n);l<0&&(l=2*Math.PI+l);var u=s[0]<n;u&&(l-=Math.PI);var c=u?"left":"right";o.setTextConfig({rotation:-l,position:c,origin:"center"});var d=o.ensureState("emphasis");xn(d.textConfig||(d.textConfig={}),{position:c})}else o.setTextConfig({rotation:a*=Math.PI/180})}}function Iv(t){t.eachSeriesByType("graph",(function(t){"circular"===t.get("layout")&&Sv(t,"symbolSize")}))}var Dv=Ta;function Tv(t){t.eachSeriesByType("graph",(function(t){var e=t.coordinateSystem;if(!e||"view"===e.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},i=t.getGraph(),r=i.data,a=i.edgeData,o=t.getModel("force"),s=o.get("initLayout");t.preservedPoints?r.each((function(t){var e=r.getId(t);r.setItemLayout(t,n[e]||[NaN,NaN])})):s&&"none"!==s?"circular"===s&&Sv(t,"value"):vv(t);var l=r.getDataExtent("value"),u=a.getDataExtent("value"),c=o.get("repulsion"),d=o.get("edgeLength"),h=pe(c)?c:[c,c],p=pe(d)?d:[d,d];p=[p[1],p[0]];var f=r.mapArray("value",(function(t,e){var n=r.getItemLayout(e),i=Ne(t,l,h);return isNaN(i)&&(i=(h[0]+h[1])/2),{w:i,rep:i,fixed:r.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}})),g=a.mapArray("value",(function(e,n){var r=i.getEdgeByIndex(n),a=Ne(e,u,p);isNaN(a)&&(a=(p[0]+p[1])/2);var o=r.getModel(),s=Fi(r.getModel().get(["lineStyle","curveness"]),-mv(r,t,n,!0),0);return{n1:f[r.node1.dataIndex],n2:f[r.node2.dataIndex],d:a,curveness:s,ignoreForceLayout:o.get("ignoreForceLayout")}})),m=e.getBoundingRect(),v=function(t,e,n){for(var i=t,r=e,a=n.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],u=null==n.gravity?.1:n.gravity,c=0;c<i.length;c++){var d=i[c];d.p||(d.p=Ca(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),d.pp=wa(d.p),d.edges=null}var h,p,f=null==n.friction?.6:n.friction,g=f;return{warmUp:function(){g=.8*f},setFixed:function(t){i[t].fixed=!0},setUnfixed:function(t){i[t].fixed=!1},beforeStep:function(t){h=t},afterStep:function(t){p=t},step:function(t){h&&h(i,r);for(var e=[],n=i.length,a=0;a<r.length;a++){var o=r[a];if(!o.ignoreForceLayout){var s=o.n1,c=o.n2;ka(e,c.p,s.p);var d=Ia(e)-o.d,f=c.w/(s.w+c.w);isNaN(f)&&(f=0),Ma(e,e),!s.fixed&&Dv(s.p,s.p,e,f*d*g),!c.fixed&&Dv(c.p,c.p,e,-(1-f)*d*g)}}for(a=0;a<n;a++)(_=i[a]).fixed||(ka(e,l,_.p),Dv(_.p,_.p,e,u*g));for(a=0;a<n;a++){s=i[a];for(var m=a+1;m<n;m++){c=i[m],ka(e,c.p,s.p),0===(d=Ia(e))&&(Da(e,Math.random()-.5,Math.random()-.5),d=1);var v=(s.rep+c.rep)/d/d;!s.fixed&&Dv(s.pp,s.pp,e,v),!c.fixed&&Dv(c.pp,c.pp,e,-v)}}var y=[];for(a=0;a<n;a++){var _;(_=i[a]).fixed||(ka(y,_.p,_.pp),Dv(_.p,_.p,y,g),$r(_.pp,_.p))}var x=(g*=.992)<.01;p&&p(i,r,x),t&&t(x)}}}(f,g,{rect:m,gravity:o.get("gravity"),friction:o.get("friction")});v.beforeStep((function(t,e){for(var n=0,r=t.length;n<r;n++)t[n].fixed&&$r(t[n].p,i.getNodeByIndex(n).getLayout())})),v.afterStep((function(t,e,a){for(var o=0,s=t.length;o<s;o++)t[o].fixed||i.getNodeByIndex(o).setLayout(t[o].p),n[r.getId(o)]=t[o].p;for(o=0,s=e.length;o<s;o++){var l=e[o],u=i.getEdgeByIndex(o),c=l.n1.p,d=l.n2.p,h=u.getLayout();(h=h?h.slice():[])[0]=h[0]||[],h[1]=h[1]||[],$r(h[0],c),$r(h[1],d),+l.curveness&&(h[2]=[(c[0]+d[0])/2-(c[1]-d[1])*l.curveness,(c[1]+d[1])/2-(d[0]-c[0])*l.curveness]),u.setLayout(h)}})),t.forceLayout=v,t.preservedPoints=n,v.step()}else t.forceLayout=null}))}function Av(t,e){var n=[];return t.eachSeriesByType("graph",(function(t){var i=t.get("coordinateSystem");if(!i||"view"===i){var r=t.getData(),a=r.mapArray((function(t){var e=r.getItemModel(t);return[+e.get("x"),+e.get("y")]})),o=[],s=[];Kr(a,o,s),s[0]-o[0]==0&&(s[0]+=1,o[0]-=1),s[1]-o[1]==0&&(s[1]+=1,o[1]-=1);var l=(s[0]-o[0])/(s[1]-o[1]),u=function(t,e,n){var i=xn(t.getBoxLayoutParams(),{aspect:n});return Vi(i,{width:e.getWidth(),height:e.getHeight()})}(t,e,l);isNaN(l)&&(o=[u.x,u.y],s=[u.x+u.width,u.y+u.height]);var c=s[0]-o[0],d=s[1]-o[1],h=u.width,p=u.height,f=t.coordinateSystem=new hg;f.zoomLimit=t.get("scaleLimit"),f.setBoundingRect(o[0],o[1],c,d),f.setViewRect(u.x,u.y,h,p),f.setCenter(t.get("center"),e),f.setZoom(t.get("zoom")),n.push(f)}})),n}var Ev=pr.prototype,Lv=ea.prototype,Pv=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function Nv(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}_e(e,t)}(Pv);var Ov=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-line",n}return _e(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Pv},e.prototype.buildPath=function(t,e){Nv(e)?Ev.buildPath.call(this,t,e):Lv.buildPath.call(this,t,e)},e.prototype.pointAt=function(t){return Nv(this.shape)?Ev.pointAt.call(this,t):Lv.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var e=this.shape,n=Nv(e)?[e.x2-e.x1,e.y2-e.y1]:Lv.tangentAt.call(this,t);return Ma(n,n)},e}(je),zv=["fromSymbol","toSymbol"];function Rv(t){return"_"+t+"Type"}function Vv(t,e,n){var i=e.getItemVisual(n,t);if(!i||"none"===i)return i;var r=e.getItemVisual(n,t+"Size"),a=e.getItemVisual(n,t+"Rotate"),o=e.getItemVisual(n,t+"Offset"),s=e.getItemVisual(n,t+"KeepAspect"),l=ui(r);return i+l+ai(o||0,l)+(a||"")+(s||"")}function Fv(t,e,n){var i=e.getItemVisual(n,t);if(i&&"none"!==i){var r=e.getItemVisual(n,t+"Size"),a=e.getItemVisual(n,t+"Rotate"),o=e.getItemVisual(n,t+"Offset"),s=e.getItemVisual(n,t+"KeepAspect"),l=ui(r),u=ai(o||0,l),c=Kn(i,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=null==a||isNaN(a)?void 0:+a*Math.PI/180||0,c.name=t,c}}function Bv(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}var Hv=function(t){function e(e,n,i){var r=t.call(this)||this;return r._createLine(e,n,i),r}return _e(e,t),e.prototype._createLine=function(t,e,n){var i=t.hostModel,r=function(t){var e=new Ov({name:"line",subPixelOptimize:!0});return Bv(e.shape,t),e}(t.getItemLayout(e));r.shape.percent=0,on(r,{shape:{percent:1}},i,e),this.add(r),ie(zv,(function(n){var i=Fv(n,t,e);this.add(i),this[Rv(n)]=Vv(n,t,e)}),this),this._updateCommonStl(t,e,n)},e.prototype.updateData=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),a=t.getItemLayout(e),o={shape:{}};Bv(o.shape,a),ln(r,o,i,e),ie(zv,(function(n){var i=Vv(n,t,e),r=Rv(n);if(this[r]!==i){this.remove(this.childOfName(n));var a=Fv(n,t,e);this.add(a)}this[r]=i}),this),this._updateCommonStl(t,e,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),a=n&&n.emphasisLineStyle,o=n&&n.blurLineStyle,s=n&&n.selectLineStyle,l=n&&n.labelStatesModels,u=n&&n.emphasisDisabled,c=n&&n.focus,d=n&&n.blurScope;if(!n||t.hasItemOption){var h=t.getItemModel(e),p=h.getModel("emphasis");a=p.getModel("lineStyle").getLineStyle(),o=h.getModel(["blur","lineStyle"]).getLineStyle(),s=h.getModel(["select","lineStyle"]).getLineStyle(),u=p.get("disabled"),c=p.get("focus"),d=p.get("blurScope"),l=ri(h)}var f=t.getItemVisual(e,"style"),g=f.stroke;r.useStyle(f),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=a,r.ensureState("blur").style=o,r.ensureState("select").style=s,ie(zv,(function(t){var e=this.childOfName(t);if(e){e.setColor(g),e.style.opacity=f.opacity;for(var n=0;n<Ge.length;n++){var i=Ge[n],a=r.getState(i);if(a){var o=a.style||{},s=e.ensureState(i),l=s.style||(s.style={});null!=o.stroke&&(l[e.__isEmptyBrush?"stroke":"fill"]=o.stroke),null!=o.opacity&&(l.opacity=o.opacity)}}e.markRedraw()}}),this);var m=i.getRawValue(e);oi(this,l,{labelDataIndex:e,labelFetcher:{getFormattedLabel:function(e,n){return i.getFormattedLabel(e,n,t.dataType)}},inheritColor:g||"#000",defaultOpacity:f.opacity,defaultText:(null==m?t.getName(e):isFinite(m)?Oe(m):m)+""});var v=this.getTextContent();if(v){var y=l.normal;v.__align=v.style.align,v.__verticalAlign=v.style.verticalAlign,v.__position=y.get("position")||"middle";var _=y.get("distance");pe(_)||(_=[_,_]),v.__labelDistance=_}this.setTextConfig({position:null,local:!0,inside:!1}),si(this,c,d,u)},e.prototype.highlight=function(){ei(this)},e.prototype.downplay=function(){ni(this)},e.prototype.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},e.prototype.setLinePoints=function(t){var e=this.childOfName("line");Bv(e.shape,t),e.dirty()},e.prototype.beforeUpdate=function(){var t=this,e=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),i=t.getTextContent();if(e||n||i&&!i.ignore){for(var r=1,a=this.parent;a;)a.scaleX&&(r/=a.scaleX),a=a.parent;var o=t.childOfName("line");if(this.__dirty||o.__dirty){var s=o.shape.percent,l=o.pointAt(0),u=o.pointAt(s),c=ka([],u,l);if(Ma(c,c),e&&(e.setPosition(l),M(e,0),e.scaleX=e.scaleY=r*s,e.markRedraw()),n&&(n.setPosition(u),M(n,1),n.scaleX=n.scaleY=r*s,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var d=void 0,h=void 0,p=i.__labelDistance,f=p[0]*r,g=p[1]*r,m=s/2,v=o.tangentAt(m),y=[v[1],-v[0]],_=o.pointAt(m);y[1]>0&&(y[0]=-y[0],y[1]=-y[1]);var x=v[0]<0?-1:1;if("start"!==i.__position&&"end"!==i.__position){var b=-Math.atan2(v[1],v[0]);u[0]<l[0]&&(b=Math.PI+b),i.rotation=b}var w=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":w=-g,h="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":w=g,h="top";break;default:w=0,h="middle"}switch(i.__position){case"end":i.x=c[0]*f+u[0],i.y=c[1]*g+u[1],d=c[0]>.8?"left":c[0]<-.8?"right":"center",h=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";break;case"start":i.x=-c[0]*f+l[0],i.y=-c[1]*g+l[1],d=c[0]>.8?"right":c[0]<-.8?"left":"center",h=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=f*x+l[0],i.y=l[1]+w,d=v[0]<0?"right":"left",i.originX=-f*x,i.originY=-w;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=_[0],i.y=_[1]+w,d="center",i.originY=-w;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-f*x+u[0],i.y=u[1]+w,d=v[0]>=0?"right":"left",i.originX=f*x,i.originY=-w}i.scaleX=i.scaleY=r,i.setStyle({verticalAlign:i.__verticalAlign||h,align:i.__align||d})}}}function M(t,e){var n=t.__specifiedRotation;if(null==n){var i=o.tangentAt(e);t.attr("rotation",(1===e?-1:1)*Math.PI/2-Math.atan2(i[1],i[0]))}else t.attr("rotation",n)}},e}(Jn);function Gv(t){var e=t.hostModel,n=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:ri(e)}}function jv(t){return isNaN(t[0])||isNaN(t[1])}function Wv(t){return t&&!jv(t[0])&&!jv(t[1])}var Uv=function(){function t(t){this.group=new Jn,this._LineCtor=t||Hv}return t.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var n=this,i=n.group,r=n._lineData;n._lineData=t,r||i.removeAll();var a=Gv(t);t.diff(r).add((function(n){e._doAdd(t,n,a)})).update((function(n,i){e._doUpdate(r,t,i,n,a)})).remove((function(t){i.remove(r.getItemGraphicEl(t))})).execute()},t.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl((function(e,n){e.updateLayout(t,n)}),this)},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Gv(t),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e){function n(t){t.isGroup||function(t){return t.animators&&t.animators.length>0}(t)||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var i=t.start;i<t.end;i++){if(Wv(e.getItemLayout(i))){var r=new this._LineCtor(e,i,this._seriesScope);r.traverse(n),this.group.add(r),e.setItemGraphicEl(i,r),this._progressiveEls.push(r)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(t){ci(this._progressiveEls||this.group,t)},t.prototype._doAdd=function(t,e,n){if(Wv(t.getItemLayout(e))){var i=new this._LineCtor(t,e,n);t.setItemGraphicEl(e,i),this.group.add(i)}},t.prototype._doUpdate=function(t,e,n,i,r){var a=t.getItemGraphicEl(n);Wv(e.getItemLayout(i))?(a?a.updateData(e,i,r):a=new this._LineCtor(e,i,r),e.setItemGraphicEl(i,a),this.group.add(a)):this.group.remove(a)},t}(),Yv=[],$v=[],qv=[],Xv=Ea,Zv=La,Jv=Math.abs;function Kv(t,e,n){for(var i,r=t[0],a=t[1],o=t[2],s=1/0,l=n*n,u=.1,c=.1;c<=.9;c+=.1){Yv[0]=Xv(r[0],a[0],o[0],c),Yv[1]=Xv(r[1],a[1],o[1],c),(p=Jv(Zv(Yv,e)-l))<s&&(s=p,i=c)}for(var d=0;d<32;d++){var h=i+u;$v[0]=Xv(r[0],a[0],o[0],i),$v[1]=Xv(r[1],a[1],o[1],i),qv[0]=Xv(r[0],a[0],o[0],h),qv[1]=Xv(r[1],a[1],o[1],h);var p=Zv($v,e)-l;if(Jv(p)<.01)break;var f=Zv(qv,e)-l;u/=2,p<0?f>=0?i+=u:i-=u:f>=0?i-=u:i+=u}return i}function Qv(t,e){var n=[],i=Aa,r=[[],[],[]],a=[[],[]],o=[];e/=2,t.eachEdge((function(t,s){var l=t.getLayout(),u=t.getVisual("fromSymbol"),c=t.getVisual("toSymbol");l.__original||(l.__original=[wa(l[0]),wa(l[1])],l[2]&&l.__original.push(wa(l[2])));var d=l.__original;if(null!=l[2]){if($r(r[0],d[0]),$r(r[1],d[2]),$r(r[2],d[1]),u&&"none"!==u){var h=bv(t.node1),p=Kv(r,d[0],h*e);i(r[0][0],r[1][0],r[2][0],p,n),r[0][0]=n[3],r[1][0]=n[4],i(r[0][1],r[1][1],r[2][1],p,n),r[0][1]=n[3],r[1][1]=n[4]}if(c&&"none"!==c){h=bv(t.node2),p=Kv(r,d[1],h*e);i(r[0][0],r[1][0],r[2][0],p,n),r[1][0]=n[1],r[2][0]=n[2],i(r[0][1],r[1][1],r[2][1],p,n),r[1][1]=n[1],r[2][1]=n[2]}$r(l[0],r[0]),$r(l[1],r[2]),$r(l[2],r[1])}else{if($r(a[0],d[0]),$r(a[1],d[1]),ka(o,a[1],a[0]),Ma(o,o),u&&"none"!==u){h=bv(t.node1);Ta(a[0],a[0],o,h*e)}if(c&&"none"!==c){h=bv(t.node2);Ta(a[1],a[1],o,-h*e)}$r(l[0],a[0]),$r(l[1],a[1])}}))}function ty(t){return"view"===t.type}var ey=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(t,e){var n=new zd,i=new Uv,r=this.group;this._controller=new rf(e.getZr()),this._controllerHost={target:r},r.add(n.group),r.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},e.prototype.render=function(t,e,n){var i=this,r=t.coordinateSystem;this._model=t;var a=this._symbolDraw,o=this._lineDraw,s=this.group;if(ty(r)){var l={x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY};this._firstRender?s.attr(l):ln(s,l,t)}Qv(t.getGraph(),xv(t));var u=t.getData();a.updateData(u);var c=t.getEdgeData();o.updateData(c),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var d=t.forceLayout,h=t.get(["force","layoutAnimation"]);d&&this._startForceLayoutIteration(d,h);var p=t.get("layout");u.graph.eachNode((function(e){var n=e.dataIndex,r=e.getGraphicEl(),a=e.getModel();if(r){r.off("drag").off("dragend");var o=a.get("draggable");o&&r.on("drag",(function(a){switch(p){case"force":d.warmUp(),!i._layouting&&i._startForceLayoutIteration(d,h),d.setFixed(n),u.setItemLayout(n,[r.x,r.y]);break;case"circular":u.setItemLayout(n,[r.x,r.y]),e.setLayout({fixed:!0},!0),Sv(t,"symbolSize",e,[a.offsetX,a.offsetY]),i.updateLayout(t);break;default:u.setItemLayout(n,[r.x,r.y]),yv(t.getGraph(),t),i.updateLayout(t)}})).on("dragend",(function(){d&&d.setUnfixed(n)})),r.setDraggable(o,!!a.get("cursor")),"adjacency"===a.get(["emphasis","focus"])&&(Je(r).focus=e.getAdjacentDataIndices())}})),u.graph.eachEdge((function(t){var e=t.getGraphicEl(),n=t.getModel().get(["emphasis","focus"]);e&&"adjacency"===n&&(Je(e).focus={edge:[t.dataIndex],node:[t.node1.dataIndex,t.node2.dataIndex]})}));var f="circular"===t.get("layout")&&t.get(["circular","rotateLabel"]),g=u.getLayout("cx"),m=u.getLayout("cy");u.graph.eachNode((function(t){kv(t,f,g,m)})),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,e){var n=this;!function i(){t.step((function(t){n.updateLayout(n._model),(n._layouting=!t)&&(e?n._layoutTimeout=setTimeout(i,16):i())}))}()},e.prototype._updateController=function(t,e,n){var i=this,r=this._controller,a=this._controllerHost,o=this.group;r.setPointerChecker((function(e,i,r){var a=o.getBoundingRect();return a.applyTransform(o.transform),a.contain(i,r)&&!uf(e,n,t)})),ty(t.coordinateSystem)?(r.enable(t.get("roam")),a.zoomLimit=t.get("scaleLimit"),a.zoom=t.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",(function(e){af(a,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e.dx,dy:e.dy})})).on("zoom",(function(e){of(a,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),i._updateNodeAndLinkScale(),Qv(t.getGraph(),xv(t)),i._lineDraw.updateLayout(),n.updateLabelLayout()}))):r.disable()},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,e=t.getData(),n=xv(t);e.eachItemGraphicEl((function(t,e){t&&t.setSymbolScale(n)}))},e.prototype.updateLayout=function(t){Qv(t.getGraph(),xv(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(bi);function ny(t){return"_EC_"+t}var iy=function(){function t(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(t,e){t=null==t?""+e:""+t;var n=this._nodesMap;if(!n[ny(t)]){var i=new ry(t,e);return i.hostGraph=this,this.nodes.push(i),n[ny(t)]=i,i}},t.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},t.prototype.getNodeById=function(t){return this._nodesMap[ny(t)]},t.prototype.addEdge=function(t,e,n){var i=this._nodesMap,r=this._edgesMap;if(Mn(t)&&(t=this.nodes[t]),Mn(e)&&(e=this.nodes[e]),t instanceof ry||(t=i[ny(t)]),e instanceof ry||(e=i[ny(e)]),t&&e){var a=t.id+"-"+e.id,o=new ay(t,e,n);return o.hostGraph=this,this._directed&&(t.outEdges.push(o),e.inEdges.push(o)),t.edges.push(o),t!==e&&e.edges.push(o),this.edges.push(o),r[a]=o,o}},t.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},t.prototype.getEdge=function(t,e){t instanceof ry&&(t=t.id),e instanceof ry&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},t.prototype.eachNode=function(t,e){for(var n=this.nodes,i=n.length,r=0;r<i;r++)n[r].dataIndex>=0&&t.call(e,n[r],r)},t.prototype.eachEdge=function(t,e){for(var n=this.edges,i=n.length,r=0;r<i;r++)n[r].dataIndex>=0&&n[r].node1.dataIndex>=0&&n[r].node2.dataIndex>=0&&t.call(e,n[r],r)},t.prototype.breadthFirstTraverse=function(t,e,n,i){if(e instanceof ry||(e=this._nodesMap[ny(e)]),e){for(var r="out"===n?"outEdges":"in"===n?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(i,e,null))for(var o=[e];o.length;){var s=o.shift(),l=s[r];for(a=0;a<l.length;a++){var u=l[a],c=u.node1===s?u.node2:u.node1;if(!c.__visited){if(t.call(i,c,s))return;o.push(c),c.__visited=!0}}}}},t.prototype.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,i=this.edges,r=0,a=n.length;r<a;r++)n[r].dataIndex=-1;for(r=0,a=t.count();r<a;r++)n[t.getRawIndex(r)].dataIndex=r;e.filterSelf((function(t){var n=i[e.getRawIndex(t)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0}));for(r=0,a=i.length;r<a;r++)i[r].dataIndex=-1;for(r=0,a=e.count();r<a;r++)i[e.getRawIndex(r)].dataIndex=r},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,i=this.edges,r=0;r<n.length;r++)e.addNode(n[r].id,n[r].dataIndex);for(r=0;r<i.length;r++){var a=i[r];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},t}(),ry=function(){function t(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==t?"":t,this.dataIndex=null==e?-1:e}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var n=this.edges[e];n.dataIndex<0||(t.edge.push(n.dataIndex),t.node.push(n.node1.dataIndex,n.node2.dataIndex))}return t},t.prototype.getTrajectoryDataIndices=function(){for(var t=re(),e=re(),n=0;n<this.edges.length;n++){var i=this.edges[n];if(!(i.dataIndex<0)){t.set(i.dataIndex,!0);for(var r=[i.node1],a=[i.node2],o=0;o<r.length;){var s=r[o];o++,e.set(s.dataIndex,!0);for(var l=0;l<s.inEdges.length;l++)t.set(s.inEdges[l].dataIndex,!0),r.push(s.inEdges[l].node1)}for(o=0;o<a.length;){var u=a[o];o++,e.set(u.dataIndex,!0);for(l=0;l<u.outEdges.length;l++)t.set(u.outEdges[l].dataIndex,!0),a.push(u.outEdges[l].node2)}}}return{edge:t.keys(),node:e.keys()}},t}(),ay=function(){function t(t,e,n){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}return t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var t=re(),e=re();t.set(this.dataIndex,!0);for(var n=[this.node1],i=[this.node2],r=0;r<n.length;){var a=n[r];r++,e.set(a.dataIndex,!0);for(var o=0;o<a.inEdges.length;o++)t.set(a.inEdges[o].dataIndex,!0),n.push(a.inEdges[o].node1)}for(r=0;r<i.length;){var s=i[r];r++,e.set(s.dataIndex,!0);for(o=0;o<s.outEdges.length;o++)t.set(s.outEdges[o].dataIndex,!0),i.push(s.outEdges[o].node2)}return{edge:t.keys(),node:e.keys()}},t}();function oy(t,e){return{getValue:function(n){var i=this[t][e];return i.getStore().get(i.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,i){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,i)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,i){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}Yi(ry,oy("hostGraph","data")),Yi(ay,oy("hostGraph","edgeData"));var sy=iy;function ly(t,e,n,i,r){for(var a=new sy(i),o=0;o<t.length;o++)a.addNode(Xr(t[o].id,t[o].name,o),o);var s=[],l=[],u=0;for(o=0;o<e.length;o++){var c=e[o],d=c.source,h=c.target;a.addEdge(d,h,u)&&(l.push(c),s.push(Xr(na(c.id,null),d+" > "+h)),u++)}var p,f=n.get("coordinateSystem");if("cartesian2d"===f||"polar"===f)p=hu(t,n);else{var g=ge.get(f),m=g&&g.dimensions||[];sn(m,"value")<0&&m.concat(["value"]);var v=ce(t,{coordDimensions:m,encodeDefine:n.getEncode()}).dimensions;(p=new he(v,n)).initData(t)}var y=new he(["value"],n);return y.initData(l,s),r&&r(p,y),Ug({mainData:p,struct:a,structAttr:"graph",datas:{node:p,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var uy=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return _e(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments);var n=this;function i(){return n._categoriesData}this.legendVisualProvider=new Jh(i,i),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),ji(e,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,e){var n,i=t.edges||t.links||[],r=t.data||t.nodes||[],a=this;if(r&&i){dv(n=this)&&(n.__curvenessList=[],n.__edgeMap={},hv(n));var o=ly(r,i,this,!0,(function(t,e){t.wrapMethod("getItemModel",(function(t){var e=a._categoriesModels[t.getShallow("category")];return e&&(e.parentModel=t.parentModel,t.parentModel=e),t}));var n=wr.prototype.getModel;function i(t,e){var i=n.call(this,t,e);return i.resolveParentPath=r,i}function r(t){if(t&&("label"===t[0]||"label"===t[1])){var e=t.slice();return"label"===t[0]?e[0]="edgeLabel":"label"===t[1]&&(e[1]="edgeLabel"),e}return t}e.wrapMethod("getItemModel",(function(t){return t.resolveParentPath=r,t.getModel=i,t}))}));return ie(o.edges,(function(t){!function(t,e,n,i){if(dv(n)){var r=pv(t,e,n),a=n.__edgeMap,o=a[fv(r)];a[r]&&!o?a[r].isForward=!0:o&&a[r]&&(o.isForward=!0,a[r].isForward=!1),a[r]=a[r]||[],a[r].push(i)}}(t.node1,t.node2,this,t.dataIndex)}),this),o.data}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,e,n){if("edge"===n){var i=this.getData(),r=this.getDataParams(t,n),a=i.graph.getEdgeByIndex(t),o=i.getName(a.node1.dataIndex),s=i.getName(a.node2.dataIndex),l=[];return null!=o&&l.push(o),null!=s&&l.push(s),br("nameValue",{name:l.join(" > "),value:r.value,noValue:null==r.value})}return Pa({series:this,dataIndex:t,multipleSeries:e})},e.prototype._updateCategoriesData=function(){var t=me(this.option.categories||[],(function(t){return null!=t.value?t:xn({value:0},t)})),e=new he(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray((function(t){return e.getItemModel(t)}))},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Qn),cy={type:"graphRoam",event:"graphRoam",update:"none"};var dy=["itemStyle","opacity"],hy=function(t){function e(e,n){var i=t.call(this)||this,r=i,a=new Be,o=new Mi;return r.setTextContent(o),i.setTextGuideLine(a),i.updateData(e,n,!0),i}return _e(e,t),e.prototype.updateData=function(t,e,n){var i=this,r=t.hostModel,a=t.getItemModel(e),o=t.getItemLayout(e),s=a.getModel("emphasis"),l=a.get(dy);l=null==l?1:l,n||ii(i),i.useStyle(t.getItemVisual(e,"style")),i.style.lineJoin="round",n?(i.setShape({points:o.points}),i.style.opacity=0,on(i,{style:{opacity:l}},r,e)):ln(i,{style:{opacity:l},shape:{points:o.points}},r,e),_i(i,a),this._updateLabel(t,e),si(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))},e.prototype._updateLabel=function(t,e){var n=this,i=this.getTextGuideLine(),r=n.getTextContent(),a=t.hostModel,o=t.getItemModel(e),s=t.getItemLayout(e).label,l=t.getItemVisual(e,"style"),u=l.fill;oi(r,ri(o),{labelFetcher:t.hostModel,labelDataIndex:e,defaultOpacity:l.opacity,defaultText:t.getName(e)},{normal:{align:s.textAlign,verticalAlign:s.verticalAlign}}),n.setTextConfig({local:!0,inside:!!s.inside,insideStroke:u,outsideFill:u});var c=s.linePoints;i.setShape({points:c}),n.textGuideLineConfig={anchor:c?new Re(c[0][0],c[0][1]):null},ln(r,{style:{x:s.x,y:s.y}},a,e),r.attr({rotation:s.rotation,originX:s.x,originY:s.y,z2:10}),lc(n,uc(o),{stroke:u})},e}(yr),py=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreLabelLineUpdate=!0,n}return _e(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this._data,a=this.group;i.diff(r).add((function(t){var e=new hy(i,t);i.setItemGraphicEl(t,e),a.add(e)})).update((function(t,e){var n=r.getItemGraphicEl(e);n.updateData(i,t),a.add(n),i.setItemGraphicEl(t,n)})).remove((function(e){var n=r.getItemGraphicEl(e);Ei(n,t,e)})).execute(),this._data=i},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(bi),fy=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Jh(vi(this.getData,this),vi(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.getInitialData=function(t,e){return Bi(this,{coordDimensions:["value"],encodeDefaulter:le(Hi,this)})},e.prototype._defaultLabelLine=function(t){ji(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.prototype.getDataParams=function(e){var n=this.getData(),i=t.prototype.getDataParams.call(this,e),r=n.mapDimension("value"),a=n.getSum(r);return i.percent=a?+(n.get(r,e)/a*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Qn);function gy(t,e){t.eachSeriesByType("funnel",(function(t){var n=t.getData(),i=n.mapDimension("value"),r=t.get("sort"),a=function(t,e){return Vi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),o=t.get("orient"),s=a.width,l=a.height,u=function(t,e){for(var n=t.mapDimension("value"),i=t.mapArray(n,(function(t){return t})),r=[],a="ascending"===e,o=0,s=t.count();o<s;o++)r[o]=o;return se(e)?r.sort(e):"none"!==e&&r.sort((function(t,e){return a?i[t]-i[e]:i[e]-i[t]})),r}(n,r),c=a.x,d=a.y,h="horizontal"===o?[Ke(t.get("minSize"),l),Ke(t.get("maxSize"),l)]:[Ke(t.get("minSize"),s),Ke(t.get("maxSize"),s)],p=n.getDataExtent(i),f=t.get("min"),g=t.get("max");null==f&&(f=Math.min(p[0],0)),null==g&&(g=p[1]);var m=t.get("funnelAlign"),v=t.get("gap"),y=(("horizontal"===o?s:l)-v*(n.count()-1))/n.count(),_=function(t,e){if("horizontal"===o){var r=n.get(i,t)||0,a=Ne(r,[f,g],h,!0),u=void 0;switch(m){case"top":u=d;break;case"center":u=d+(l-a)/2;break;case"bottom":u=d+(l-a)}return[[e,u],[e,u+a]]}var p,v=n.get(i,t)||0,y=Ne(v,[f,g],h,!0);switch(m){case"left":p=c;break;case"center":p=c+(s-y)/2;break;case"right":p=c+s-y}return[[p,e],[p+y,e]]};"ascending"===r&&(y=-y,v=-v,"horizontal"===o?c+=s:d+=l,u=u.reverse());for(var x=0;x<u.length;x++){var b=u[x],w=u[x+1],M=n.getItemModel(b);if("horizontal"===o){var S=M.get(["itemStyle","width"]);null==S?S=y:(S=Ke(S,s),"ascending"===r&&(S=-S));var C=_(b,c),k=_(w,c+S);c+=S+v,n.setItemLayout(b,{points:C.concat(k.slice().reverse())})}else{var I=M.get(["itemStyle","height"]);null==I?I=y:(I=Ke(I,l),"ascending"===r&&(I=-I));C=_(b,d),k=_(w,d+I);d+=I+v,n.setItemLayout(b,{points:C.concat(k.slice().reverse())})}}!function(t){var e=t.hostModel.get("orient");t.each((function(n){var i,r,a,o,s=t.getItemModel(n),l=s.getModel("label").get("position"),u=s.getModel("labelLine"),c=t.getItemLayout(n),d=c.points,h="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(h)"insideLeft"===l?(r=(d[0][0]+d[3][0])/2+5,a=(d[0][1]+d[3][1])/2,i="left"):"insideRight"===l?(r=(d[1][0]+d[2][0])/2-5,a=(d[1][1]+d[2][1])/2,i="right"):(r=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,a=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,i="center"),o=[[r,a],[r,a]];else{var p=void 0,f=void 0,g=void 0,m=void 0,v=u.get("length");"left"===l?(p=(d[3][0]+d[0][0])/2,f=(d[3][1]+d[0][1])/2,r=(g=p-v)-5,i="right"):"right"===l?(p=(d[1][0]+d[2][0])/2,f=(d[1][1]+d[2][1])/2,r=(g=p+v)+5,i="left"):"top"===l?(p=(d[3][0]+d[0][0])/2,a=(m=(f=(d[3][1]+d[0][1])/2)-v)-5,i="center"):"bottom"===l?(p=(d[1][0]+d[2][0])/2,a=(m=(f=(d[1][1]+d[2][1])/2)+v)+5,i="center"):"rightTop"===l?(p="horizontal"===e?d[3][0]:d[1][0],f="horizontal"===e?d[3][1]:d[1][1],"horizontal"===e?(a=(m=f-v)-5,i="center"):(r=(g=p+v)+5,i="top")):"rightBottom"===l?(p=d[2][0],f=d[2][1],"horizontal"===e?(a=(m=f+v)+5,i="center"):(r=(g=p+v)+5,i="bottom")):"leftTop"===l?(p=d[0][0],f="horizontal"===e?d[0][1]:d[1][1],"horizontal"===e?(a=(m=f-v)-5,i="center"):(r=(g=p-v)-5,i="right")):"leftBottom"===l?(p="horizontal"===e?d[1][0]:d[3][0],f="horizontal"===e?d[1][1]:d[2][1],"horizontal"===e?(a=(m=f+v)+5,i="center"):(r=(g=p-v)-5,i="right")):(p=(d[1][0]+d[2][0])/2,f=(d[1][1]+d[2][1])/2,"horizontal"===e?(a=(m=f+v)+5,i="center"):(r=(g=p+v)+5,i="left")),"horizontal"===e?r=g=p:a=m=f,o=[[p,f],[g,m]]}c.label={linePoints:o,x:r,y:a,verticalAlign:"middle",textAlign:i,inside:h}}))}(n)}))}function my(t,e,n,i){for(var r,a=[],o=0;o<n.length;o++){var s=n[o],l=t.get(t.mapDimension(s),e);r=l,("category"===i.getAxis(s).type?null==r:null==r||isNaN(r))||a.push(i.dataToPoint(l,s))}return a}function vy(t,e,n,i,r){var a=my(t,n,i,r),o=new Be({shape:{points:a},z2:10});return e.add(o),t.setItemGraphicEl(n,o),o}function yy(t){var e=t.get("smooth",!0);return!0===e&&(e=.3),e=Na(e),Oa(e)&&(e=0),{smooth:e}}function _y(t,e,n,i){t.useStyle(e.getItemVisual(n,"style")),t.style.fill=null,t.setShape("smooth",i.smooth);var r=e.getItemModel(n),a=r.getModel("emphasis");_i(t,r,"lineStyle"),si(t,a.get("focus"),a.get("blurScope"),a.get("disabled"))}var xy=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._dataGroup=new Jn,n._initialized=!1,n}return _e(e,t),e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,e,n,i){this._progressiveEls=null;var r=this._dataGroup,a=t.getData(),o=this._data,s=t.coordinateSystem,l=s.dimensions,u=yy(t);if(a.diff(o).add((function(t){_y(vy(a,r,t,l,s),a,t,u)})).update((function(e,n){var i=o.getItemGraphicEl(n),r=my(a,e,l,s);a.setItemGraphicEl(e,i),ln(i,{shape:{points:r}},t,e),ii(i),_y(i,a,e,u)})).remove((function(t){var e=o.getItemGraphicEl(t);r.remove(e)})).execute(),!this._initialized){this._initialized=!0;var c=function(t,e,n){var i=t.model,r=t.getRect(),a=new gi({shape:{x:r.x,y:r.y,width:r.width,height:r.height}}),o="horizontal"===i.get("layout")?"width":"height";return a.setShape(o,0),on(a,{shape:{width:r.width,height:r.height}},e,n),a}(s,t,(function(){setTimeout((function(){r.removeClipPath()}))}));r.setClipPath(c)}this._data=a},e.prototype.incrementalPrepareRender=function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,e,n){for(var i=e.getData(),r=e.coordinateSystem,a=r.dimensions,o=yy(e),s=this._progressiveEls=[],l=t.start;l<t.end;l++){var u=vy(i,this._dataGroup,l,a,r);u.incremental=!0,_y(u,i,l,o),s.push(u)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(bi);function by(t){var e=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(e){var n={};return ie(e.dimensions,(function(t){var e=+t.replace("dim","");n[t]=e})),n}}var wy=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return _e(e,t),e.prototype.getInitialData=function(t,e){return hu(null,this,{useEncodeDefaulter:vi(by,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var e=this.coordinateSystem,n=this.getData(),i=[];return e.eachActiveState(n,(function(e,r){t===e&&i.push(n.getRawIndex(r))})),i},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(Qn),My=["lineStyle","opacity"],Sy={seriesType:"parallel",reset:function(t,e){var n=t.coordinateSystem,i={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(t,e){n.eachActiveState(e,(function(t,n){var r=i[t];if("normal"===t&&e.hasItemOption){var a=e.getItemModel(n).get(My,!0);null!=a&&(r=a)}e.ensureUniqueItemVisual(n,"style").opacity=r}),t.start,t.end)}}}};function Cy(t){!function(t){if(t.parallel)return;var e=!1;ie(t.series,(function(t){t&&"parallel"===t.type&&(e=!0)})),e&&(t.parallel=[{}])}(t),function(t){var e=ra(t.parallelAxis);ie(e,(function(e){if($n(e)){var n=e.parallelIndex||0,i=ra(t.parallel)[n];i&&i.parallelAxisDefault&&$i(e,i.parallelAxisDefault,!1)}}))}(t)}var ky=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},ie(Iy,(function(t,e){n.getZr().on(e,this._handlers[e]=vi(t,this))}),this)),za(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,e){Ra(this,"_throttledDispatchExpand"),ie(this._handlers,(function(t,n){e.getZr().off(n,t)})),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(xn({type:"parallelAxisExpand"},t))},e.type="parallel",e}(gr),Iy={mousedown:function(t){Dy(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(Dy(this,"click")&&e){var n=[t.offsetX,t.offsetY];if(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)>5)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&Dy(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i?null:{duration:0}})}}};function Dy(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}var Ty=ky,Ay=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var e=this.option;t&&$i(e,t,!0),this._initDimensions()},e.prototype.contains=function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},e.prototype.setAxisExpand=function(t){ie(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],(function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])}),this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[],n=Ie(this.ecModel.queryComponents({mainType:"parallelAxis"}),(function(t){return(t.get("parallelIndex")||0)===this.componentIndex}),this);ie(n,(function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)}))},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(Ui),Ey=function(t){function e(e,n,i,r,a){var o=t.call(this,e,n,i)||this;return o.type=r||"value",o.axisIndex=a,o}return _e(e,t),e.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},e}(Fu);function Ly(t,e,n,i,r,a){t=t||0;var o=n[1]-n[0];if(null!=r&&(r=Ny(r,[0,o])),null!=a&&(a=Math.max(a,null!=r?r:0)),"all"===i){var s=Math.abs(e[1]-e[0]);s=Ny(s,[0,o]),r=a=Ny(s,[r,a]),i=0}e[0]=Ny(e[0],n),e[1]=Ny(e[1],n);var l=Py(e,i);e[i]+=t;var u,c=r||0,d=n.slice();return l.sign<0?d[0]+=c:d[1]-=c,e[i]=Ny(e[i],d),u=Py(e,i),null!=r&&(u.sign!==l.sign||u.span<r)&&(e[1-i]=e[i]+l.sign*r),u=Py(e,i),null!=a&&u.span>a&&(e[1-i]=e[i]+u.sign*a),e}function Py(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function Ny(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var Oy=ie,zy=Math.min,Ry=Math.max,Vy=Math.floor,Fy=Math.ceil,By=Oe,Hy=Math.PI;function Gy(t,e){return zy(Ry(t,e[0]),e[1])}function jy(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}}function Wy(t,e){var n,i,r=e.layoutLength,a=e.axisExpandWidth,o=e.axisCount,s=e.axisCollapseWidth,l=e.winInnerIndices,u=s,c=!1;return t<l[0]?(n=t*s,i=s):t<=l[1]?(n=e.axisExpandWindow0Pos+t*a-e.axisExpandWindow[0],u=a,c=!0):(n=r-(o-1-t)*s,i=s),{position:n,axisNameAvailableWidth:u,axisLabelShow:c,nameTruncateMaxWidth:i}}var Uy=function(){function t(t,e,n){this.type="parallel",this._axesMap=re(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var i=t.dimensions,r=t.parallelAxisIndex;Oy(i,(function(t,n){var i=r[n],a=e.getComponent("parallelAxis",i),o=this._axesMap.set(t,new Ey(t,nr(a),[0,0],a.get("type"),i)),s="category"===o.type;o.onBand=s&&a.get("boundaryGap"),o.inverse=a.get("inverse"),a.axis=o,o.model=a,o.coordinateSystem=a.coordinateSystem=this}),this)},t.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},t.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),n=e.axisBase,i=e.layoutBase,r=e.pixelDimIndex,a=t[1-r],o=t[r];return a>=n&&a<=n+e.axisLength&&o>=i&&o<=i+e.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(t,e){e.eachSeries((function(n){if(t.contains(n,e)){var i=n.getData();Oy(this.dimensions,(function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(i,i.mapDimension(t)),lr(e.scale,e.model)}),this)}}),this)},t.prototype.resize=function(t,e){this._rect=Vi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var t,e=this._model,n=this._rect,i=["x","y"],r=["width","height"],a=e.get("layout"),o="horizontal"===a?0:1,s=n[r[o]],l=[0,s],u=this.dimensions.length,c=Gy(e.get("axisExpandWidth"),l),d=Gy(e.get("axisExpandCount")||0,[0,u]),h=e.get("axisExpandable")&&u>3&&u>d&&d>1&&c>0&&s>0,p=e.get("axisExpandWindow");p?(t=Gy(p[1]-p[0],l),p[1]=p[0]+t):(t=Gy(c*(d-1),l),(p=[c*(e.get("axisExpandCenter")||Vy(u/2))-t/2])[1]=p[0]+t);var f=(s-t)/(u-d);f<3&&(f=0);var g=[Vy(By(p[0]/c,1))+1,Fy(By(p[1]/c,1))-1],m=f/c*p[0];return{layout:a,pixelDimIndex:o,layoutBase:n[i[o]],layoutLength:s,axisBase:n[i[1-o]],axisLength:n[r[1-o]],axisExpandable:h,axisExpandWidth:c,axisCollapseWidth:f,axisExpandWindow:p,axisCount:u,winInnerIndices:g,axisExpandWindow0Pos:m}},t.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),r=i.layout;e.each((function(t){var e=[0,i.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])})),Oy(n,(function(e,n){var a=(i.axisExpandable?Wy:jy)(n,i),o={horizontal:{x:a.position,y:i.axisLength},vertical:{x:0,y:a.position}},s={horizontal:Hy/2,vertical:0},l=[o[r].x+t.x,o[r].y+t.y],u=s[r],c=Vr();Or(c,c,u),Rr(c,c,l),this._axesLayout[e]={position:l,rotation:u,transform:c,axisNameAvailableWidth:a.axisNameAvailableWidth,axisLabelShow:a.axisLabelShow,nameTruncateMaxWidth:a.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}}),this)},t.prototype.getAxis=function(t){return this._axesMap.get(t)},t.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},t.prototype.eachActiveState=function(t,e,n,i){null==n&&(n=0),null==i&&(i=t.count());var r=this._axesMap,a=this.dimensions,o=[],s=[];ie(a,(function(e){o.push(t.mapDimension(e)),s.push(r.get(e).model)}));for(var l=this.hasAxisBrushed(),u=n;u<i;u++){var c=void 0;if(l){c="active";for(var d=t.getValues(o,u),h=0,p=a.length;h<p;h++){if("inactive"===s[h].getActiveState(d[h])){c="inactive";break}}}else c="normal";e(c,u)}},t.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,n=!1,i=0,r=t.length;i<r;i++)"normal"!==e.get(t[i]).model.getActiveState()&&(n=!0);return n},t.prototype.axisCoordToPoint=function(t,e){var n=this._axesLayout[e];return Va([t,0],n.transform)},t.prototype.getAxisLayout=function(t){return Pn(this._axesLayout[t])},t.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,i=e.axisExpandWindow.slice(),r=i[1]-i[0],a=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:i};var o,s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,l="slide",u=e.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),d=null!=c[0];if(u)d&&u&&s<r*c[0]?(l="jump",o=s-r*c[2]):d&&u&&s>r*(1-c[0])?(l="jump",o=s-r*(1-c[2])):(o=s-r*c[1])>=0&&(o=s-r*(1-c[1]))<=0&&(o=0),(o*=e.axisExpandWidth/u)?Ly(o,i,a,"all"):l="none";else{var h=i[1]-i[0];(i=[Ry(0,a[1]*s/h-h/2)])[1]=zy(a[1],i[0]+h),i[0]=i[1]-h}return{axisExpandWindow:i,behavior:l}},t}();var Yy={create:function(t,e){var n=[];return t.eachComponent("parallel",(function(i,r){var a=new Uy(i,t,e);a.name="parallel_"+r,a.resize(i,e),i.coordinateSystem=a,a.model=i,n.push(a)})),t.eachSeries((function(t){if("parallel"===t.get("coordinateSystem")){var e=t.getReferringComponents("parallel",ne).models[0];t.coordinateSystem=e.coordinateSystem}})),n}},$y=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.activeIntervals=[],n}return _e(e,t),e.prototype.getAreaSelectStyle=function(){return la([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var e=this.activeIntervals=Pn(t);if(e)for(var n=e.length-1;n>=0;n--)Fa(e[n])},e.prototype.getActiveState=function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(+t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var i=0,r=e.length;i<r;i++)if(e[i][0]<=t&&t<=e[i][1])return"active";return"inactive"},e}(Ui);Yi($y,pu);var qy=$y,Xy=Math.min,Zy=Math.max,Jy=Math.pow,Ky={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Qy={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},t_={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},e_=0,n_=function(t){function e(e){var n=t.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new Jn,n._uid="brushController_"+e_++,ie(T_,(function(t,e){this._handlers[e]=vi(t,this)}),n),n}return _e(e,t),e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var e=this._zr;this._enableGlobalPan||function(t,e,n){Qp(t)[e]=n}(e,"globalPan",this._uid),ie(this._handlers,(function(t,n){e.on(n,t)})),this._brushType=t.brushType,this._brushOption=$i(Pn(t_),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;!function(t,e,n){var i=Qp(t);i[e]===n&&(i[e]=null)}(t,"globalPan",this._uid),ie(this._handlers,(function(e,n){t.off(n,e)})),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var e=this._panels={};ie(t,(function(t){e[t.panelId]=Pn(t)}))}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=e.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=me(t,(function(t){return $i(Pn(t_),t,!0)}));var e=this._covers,n=this._covers=[],i=this,r=this._creatingCover;return new ua(e,t,(function(t,e){return a(t.__brushOption,e)}),a).add(o).update(o).remove((function(t){e[t]!==r&&i.group.remove(e[t])})).execute(),this;function a(t,e){return(null!=t.id?t.id:"\0-brush-index-"+e)+"-"+t.brushType}function o(a,o){var s=t[a];if(null!=o&&e[o]===r)n[a]=e[o];else{var l=n[a]=null!=o?(e[o].__brushOption=s,e[o]):r_(i,i_(i,s));s_(i,l)}}},e.prototype.unmount=function(){return this.enableBrush(!1),d_(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Tr);function i_(t,e){var n=E_[e.brushType].createCover(t,e);return n.__brushOption=e,o_(n,e),t.group.add(n),n}function r_(t,e){var n=l_(e);return n.endCreating&&(n.endCreating(t,e),o_(e,e.__brushOption)),e}function a_(t,e){var n=e.__brushOption;l_(e).updateCoverShape(t,e,n.range,n)}function o_(t,e){var n=e.z;null==n&&(n=1e4),t.traverse((function(t){t.z=n,t.z2=n}))}function s_(t,e){l_(e).updateCommon(t,e),a_(t,e)}function l_(t){return E_[t.__brushOption.brushType]}function u_(t,e,n){var i,r=t._panels;if(!r)return true;var a=t._transform;return ie(r,(function(t){t.isTargetByCursor(e,n,a)&&(i=t)})),i}function c_(t,e){var n=t._panels;if(!n)return true;var i=e.__brushOption.panelId;return null==i||n[i]}function d_(t){var e=t._covers,n=e.length;return ie(e,(function(e){t.group.remove(e)}),t),e.length=0,!!n}function h_(t,e){var n=me(t._covers,(function(t){var e=t.__brushOption,n=Pn(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}}));t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function p_(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function f_(t,e,n,i){var r=new Jn;return r.add(new gi({name:"main",style:y_(n),silent:!0,draggable:!0,cursor:"move",drift:le(b_,t,e,r,["n","s","w","e"]),ondragend:le(h_,e,{isEnd:!0})})),ie(i,(function(n){r.add(new gi({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:le(b_,t,e,r,n),ondragend:le(h_,e,{isEnd:!0})}))})),r}function g_(t,e,n,i){var r=i.brushStyle.lineWidth||0,a=Zy(r,6),o=n[0][0],s=n[1][0],l=o-r/2,u=s-r/2,c=n[0][1],d=n[1][1],h=c-a+r/2,p=d-a+r/2,f=c-o,g=d-s,m=f+r,v=g+r;v_(t,e,"main",o,s,f,g),i.transformable&&(v_(t,e,"w",l,u,a,v),v_(t,e,"e",h,u,a,v),v_(t,e,"n",l,u,m,a),v_(t,e,"s",l,p,m,a),v_(t,e,"nw",l,u,a,a),v_(t,e,"ne",h,u,a,a),v_(t,e,"sw",l,p,a,a),v_(t,e,"se",h,p,a,a))}function m_(t,e){var n=e.__brushOption,i=n.transformable,r=e.childAt(0);r.useStyle(y_(n)),r.attr({silent:!i,cursor:i?"move":"default"}),ie([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var r=e.childOfName(n.join("")),a=1===n.length?x_(t,n[0]):function(t,e){var n=[x_(t,e[0]),x_(t,e[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(t,n);r&&r.attr({silent:!i,invisible:!i,cursor:i?Qy[a]+"-resize":null})}))}function v_(t,e,n,i,r,a,o){var s,l,u,c,d,h=e.childOfName(n);h&&h.setShape((s=S_(t,e,[[i,r],[i+a,r+o]]),l=Xy(s[0][0],s[1][0]),u=Xy(s[0][1],s[1][1]),c=Zy(s[0][0],s[1][0]),d=Zy(s[0][1],s[1][1]),{x:l,y:u,width:c-l,height:d-u}))}function y_(t){return He({strokeNoScale:!0},t.brushStyle)}function __(t,e,n,i){var r=[Xy(t,n),Xy(e,i)],a=[Zy(t,n),Zy(e,i)];return[[r[0],a[0]],[r[1],a[1]]]}function x_(t,e){var n=Ba({w:"left",e:"right",n:"top",s:"bottom"}[e],function(t){return Ha(t.group)}(t));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function b_(t,e,n,i,r,a){var o=n.__brushOption,s=t.toRectRange(o.range),l=M_(e,r,a);ie(i,(function(t){var e=Ky[t];s[e[0]][e[1]]+=l[e[0]]})),o.range=t.fromRectRange(__(s[0][0],s[1][0],s[0][1],s[1][1])),s_(e,n),h_(e,{isEnd:!1})}function w_(t,e,n,i){var r=e.__brushOption.range,a=M_(t,n,i);ie(r,(function(t){t[0]+=a[0],t[1]+=a[1]})),s_(t,e),h_(t,{isEnd:!1})}function M_(t,e,n){var i=t.group,r=i.transformCoordToLocal(e,n),a=i.transformCoordToLocal(0,0);return[r[0]-a[0],r[1]-a[1]]}function S_(t,e,n){var i=c_(t,e);return i&&true!==i?i.clipPath(n,t._transform):Pn(n)}function C_(t){var e=t.event;e.preventDefault&&e.preventDefault()}function k_(t,e,n){return t.childOfName("main").contain(e,n)}function I_(t,e,n,i){var r,a=t._creatingCover,o=t._creatingPanel,s=t._brushOption;if(t._track.push(n.slice()),function(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],i=e[0],r=n[0]-i[0],a=n[1]-i[1];return Jy(r*r+a*a,.5)>6}(t)||a){if(o&&!a){"single"===s.brushMode&&d_(t);var l=Pn(s);l.brushType=D_(l.brushType,o),l.panelId=true===o?null:o.panelId,a=t._creatingCover=i_(t,l),t._covers.push(a)}if(a){var u=E_[D_(t._brushType,o)];a.__brushOption.range=u.getCreatingRange(S_(t,a,t._track)),i&&(r_(t,a),u.updateCommon(t,a)),a_(t,a),r={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&u_(t,e,n)&&d_(t)&&(r={isEnd:i,removeOnClick:!0});return r}function D_(t,e){return"auto"===t?e.defaultBrushType:t}var T_={mousedown:function(t){if(this._dragging)A_(this,t);else if(!t.target||!t.target.draggable){C_(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=u_(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,i=this.group.transformCoordToLocal(e,n);if(function(t,e,n){if(t._brushType&&!function(t,e,n){var i=t._zr;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}(t,e.offsetX,e.offsetY)){var i=t._zr,r=t._covers,a=u_(t,e,n);if(!t._dragging)for(var o=0;o<r.length;o++){var s=r[o].__brushOption;if(a&&(!0===a||s.panelId===a.panelId)&&E_[s.brushType].contain(r[o],n[0],n[1]))return}a&&i.setCursorStyle("crosshair")}}(this,t,i),this._dragging){C_(t);var r=I_(this,t,i,!1);r&&h_(this,r)}},mouseup:function(t){A_(this,t)}};function A_(t,e){if(t._dragging){C_(e);var n=e.offsetX,i=e.offsetY,r=t.group.transformCoordToLocal(n,i),a=I_(t,e,r,!0);t._dragging=!1,t._track=[],t._creatingCover=null,a&&h_(t,a)}}var E_={lineX:L_(0),lineY:L_(1),rect:{createCover:function(t,e){function n(t){return t}return f_({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=p_(t);return __(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,i){g_(t,e,n,i)},updateCommon:m_,contain:k_},polygon:{createCover:function(t,e){var n=new Jn;return n.add(new Be({name:"main",style:y_(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new yr({name:"main",draggable:!0,drift:le(w_,t,e),ondragend:le(h_,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,i){e.childAt(0).setShape({points:S_(t,e,n)})},updateCommon:m_,contain:k_}};function L_(t){return{createCover:function(e,n){return f_({toRectRange:function(e){var n=[e,[0,100]];return t&&n.reverse(),n},fromRectRange:function(e){return e[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=p_(e);return[Xy(n[0][t],n[1][t]),Zy(n[0][t],n[1][t])]},updateCoverShape:function(e,n,i,r){var a,o=c_(e,n);if(true!==o&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(t);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[i,a];t&&l.reverse(),g_(e,n,l,r)},updateCommon:m_,contain:k_}}var P_=n_;function N_(t){return t=R_(t),function(e){return Ga(e,t)}}function O_(t,e){return t=R_(t),function(n){var i=null!=e?e:n,r=i?t.width:t.height,a=i?t.x:t.y;return[a,a+(r||0)]}}function z_(t,e,n){var i=R_(t);return function(t,r){return i.contain(r[0],r[1])&&!uf(t,e,n)}}function R_(t){return xe.create(t)}var V_=["axisLine","axisTickLabel","axisName"];var F_=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(e,n){t.prototype.init.apply(this,arguments),(this._brushController=new P_(n.getZr())).on("brush",vi(this._onBrush,this))},e.prototype.render=function(t,e,n,i){if(!function(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}(t,e,i)){this.axisModel=t,this.api=n,this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new Jn,this.group.add(this._axisGroup),t.get("show")){var a=function(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}(t,e),o=a.coordinateSystem,s=t.getAreaSelectStyle(),l=s.width,u=t.axis.dim,c=o.getAxisLayout(u),d=xn({strokeContainThreshold:l},c),h=new cr(t,d);ie(V_,h.add,h),this._axisGroup.add(h.getGroup()),this._refreshBrushController(d,s,t,a,l,n),dr(r,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,e,n,i,r,a){var o=n.axis.getExtent(),s=o[1]-o[0],l=Math.min(30,.1*Math.abs(s)),u=xe.create({x:o[0],y:-r/2,width:s,height:r});u.x-=l,u.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:N_(u),isTargetByCursor:z_(u,a,i),getLinearBrushOtherExtent:O_(u,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(function(t){var e=t.axis;return me(t.activeIntervals,(function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}}))}(n))},e.prototype._onBrush=function(t){var e=t.areas,n=this.axisModel,i=n.axis,r=me(e,(function(t){return[i.coordToData(t.range[0],!0),i.coordToData(t.range[1],!0)]}));(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:r})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(gr),B_={type:"axisAreaSelect",event:"axisAreaSelected"};var H_={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function G_(t){t.registerComponentView(Ty),t.registerComponentModel(Ay),t.registerCoordinateSystem("parallel",Yy),t.registerPreprocessor(Cy),t.registerComponentModel(qy),t.registerComponentView(F_),hp(t,"parallel",qy,H_),function(t){t.registerAction(B_,(function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},(function(e){e.axis.model.setActiveIntervals(t.intervals)}))})),t.registerAction("parallelAxisExpand",(function(t,e){e.eachComponent({mainType:"parallel",query:t},(function(e){e.setAxisExpand(t)}))}))}(t)}var j_=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},W_=function(t){function e(e){return t.call(this,e)||this}return _e(e,t),e.prototype.getDefaultShape=function(){return new j_},e.prototype.buildPath=function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},e.prototype.highlight=function(){ei(this)},e.prototype.downplay=function(){ni(this)},e}(je);function U_(t,e,n){switch(t.fill){case"source":t.fill=n.node1.getVisual("color"),t.decal=n.node1.getVisual("style").decal;break;case"target":t.fill=n.node2.getVisual("color"),t.decal=n.node2.getVisual("style").decal;break;case"gradient":var i=n.node1.getVisual("color"),r=n.node2.getVisual("color");vn(i)&&vn(r)&&(t.fill=new Ci(0,0,+("horizontal"===e),+("vertical"===e),[{color:i,offset:0},{color:r,offset:1}]))}}var Y_=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._focusAdjacencyDisabled=!1,n}return _e(e,t),e.prototype.render=function(t,e,n){var i=this,r=t.getGraph(),a=this.group,o=t.layoutInfo,s=o.width,l=o.height,u=t.getData(),c=t.getData("edge"),d=t.get("orient");this._model=t,a.removeAll(),a.x=o.x,a.y=o.y,r.eachEdge((function(e){var n=new W_,i=Je(n);i.dataIndex=e.dataIndex,i.seriesIndex=t.seriesIndex,i.dataType="edge";var r,o,u,h,p,f,g,m,v=e.getModel(),y=v.getModel("lineStyle"),_=y.get("curveness"),x=e.node1.getLayout(),b=e.node1.getModel(),w=b.get("localX"),M=b.get("localY"),S=e.node2.getLayout(),C=e.node2.getModel(),k=C.get("localX"),I=C.get("localY"),D=e.getLayout();n.shape.extent=Math.max(1,D.dy),n.shape.orient=d,"vertical"===d?(r=(null!=w?w*s:x.x)+D.sy,o=(null!=M?M*l:x.y)+x.dy,u=(null!=k?k*s:S.x)+D.ty,p=r,f=o*(1-_)+(h=null!=I?I*l:S.y)*_,g=u,m=o*_+h*(1-_)):(r=(null!=w?w*s:x.x)+x.dx,o=(null!=M?M*l:x.y)+D.sy,p=r*(1-_)+(u=null!=k?k*s:S.x)*_,f=o,g=r*_+u*(1-_),m=h=(null!=I?I*l:S.y)+D.ty),n.setShape({x1:r,y1:o,x2:u,y2:h,cpx1:p,cpy1:f,cpx2:g,cpy2:m}),n.useStyle(y.getItemStyle()),U_(n.style,d,e);var T=""+v.get("value"),A=ri(v,"edgeLabel");oi(n,A,{labelFetcher:{getFormattedLabel:function(e,n,i,r,a,o){return t.getFormattedLabel(e,n,"edge",r,Fi(a,A.normal&&A.normal.get("formatter"),T),o)}},labelDataIndex:e.dataIndex,defaultText:T}),n.setTextConfig({position:"inside"});var E=v.getModel("emphasis");_i(n,v,"lineStyle",(function(t){var n=t.getItemStyle();return U_(n,d,e),n})),a.add(n),c.setItemGraphicEl(e.dataIndex,n);var L=E.get("focus");si(n,"adjacency"===L?e.getAdjacentDataIndices():"trajectory"===L?e.getTrajectoryDataIndices():L,E.get("blurScope"),E.get("disabled"))})),r.eachNode((function(e){var n=e.getLayout(),i=e.getModel(),r=i.get("localX"),o=i.get("localY"),c=i.getModel("emphasis"),d=i.get(["itemStyle","borderRadius"])||0,h=new gi({shape:{x:null!=r?r*s:n.x,y:null!=o?o*l:n.y,width:n.dx,height:n.dy,r:d},style:i.getModel("itemStyle").getItemStyle(),z2:10});oi(h,ri(i),{labelFetcher:{getFormattedLabel:function(e,n){return t.getFormattedLabel(e,n,"node")}},labelDataIndex:e.dataIndex,defaultText:e.id}),h.disableLabelAnimation=!0,h.setStyle("fill",e.getVisual("color")),h.setStyle("decal",e.getVisual("style").decal),_i(h,i),a.add(h),u.setItemGraphicEl(e.dataIndex,h),Je(h).dataType="node";var p=c.get("focus");si(h,"adjacency"===p?e.getAdjacentDataIndices():"trajectory"===p?e.getTrajectoryDataIndices():p,c.get("blurScope"),c.get("disabled"))})),u.eachItemGraphicEl((function(e,r){u.getItemModel(r).get("draggable")&&(e.drift=function(e,a){i._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=a,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:u.getRawIndex(r),localX:this.shape.x/s,localY:this.shape.y/l})},e.ondragend=function(){i._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move")})),!this._data&&t.isAnimationEnabled()&&a.setClipPath(function(t,e,n){var i=new gi({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return on(i,{shape:{width:t.width+20}},e,n),i}(a.getBoundingRect(),t,(function(){a.removeClipPath()}))),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(bi),$_=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.getInitialData=function(t,e){var n=t.edges||t.links||[],i=t.data||t.nodes||[],r=t.levels||[];this.levelModels=[];for(var a=this.levelModels,o=0;o<r.length;o++)null!=r[o].depth&&r[o].depth>=0&&(a[r[o].depth]=new wr(r[o],this,e));return ly(i,n,this,!0,(function(t,e){t.wrapMethod("getItemModel",(function(t,e){var n=t.parentModel,i=n.getData().getItemLayout(e);if(i){var r=i.depth,a=n.levelModels[r];a&&(t.parentModel=a)}return t})),e.wrapMethod("getItemModel",(function(t,e){var n=t.parentModel,i=n.getGraph().getEdgeByIndex(e).node1.getLayout();if(i){var r=i.depth,a=n.levelModels[r];a&&(t.parentModel=a)}return t}))})).data},e.prototype.setNodePosition=function(t,e){var n=(this.option.data||this.option.nodes)[t];n.localX=e[0],n.localY=e[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,e,n){function i(t){return isNaN(t)||null==t}if("edge"===n){var r=this.getDataParams(t,n),a=r.data,o=r.value,s=a.source+" -- "+a.target;return br("nameValue",{name:s,value:o,noValue:i(o)})}var l=this.getGraph().getNodeByIndex(t).getLayout().value,u=this.getDataParams(t,n).data.name;return br("nameValue",{name:null!=u?u+"":null,value:l,noValue:i(l)})},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(e,n){var i=t.prototype.getDataParams.call(this,e,n);if(null==i.value&&"node"===n){var r=this.getGraph().getNodeByIndex(e).getLayout().value;i.value=r}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Qn);function q_(t,e){t.eachSeriesByType("sankey",(function(t){var n=t.get("nodeWidth"),i=t.get("nodeGap"),r=function(t,e){return Vi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=r;var a=r.width,o=r.height,s=t.getGraph(),l=s.nodes,u=s.edges;!function(t){ie(t,(function(t){var e=rx(t.outEdges,ix),n=rx(t.inEdges,ix),i=t.getValue()||0,r=Math.max(e,n,i);t.setLayout({value:r},!0)}))}(l),function(t,e,n,i,r,a,o,s,l){(function(t,e,n,i,r,a,o){for(var s=[],l=[],u=[],c=[],d=0,h=0;h<e.length;h++)s[h]=1;for(h=0;h<t.length;h++)l[h]=t[h].inEdges.length,0===l[h]&&u.push(t[h]);var p=-1;for(;u.length;){for(var f=0;f<u.length;f++){var g=u[f],m=g.hostGraph.data.getRawDataItem(g.dataIndex),v=null!=m.depth&&m.depth>=0;v&&m.depth>p&&(p=m.depth),g.setLayout({depth:v?m.depth:d},!0),"vertical"===a?g.setLayout({dy:n},!0):g.setLayout({dx:n},!0);for(var y=0;y<g.outEdges.length;y++){var _=g.outEdges[y];s[e.indexOf(_)]=0;var x=_.node2;0==--l[t.indexOf(x)]&&c.indexOf(x)<0&&c.push(x)}}++d,u=c,c=[]}for(h=0;h<s.length;h++)if(1===s[h])throw new Error("Sankey is a DAG, the original data has cycle!");var b=p>d-1?p:d-1;o&&"left"!==o&&function(t,e,n,i){if("right"===e){for(var r=[],a=t,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];r.indexOf(c.node1)<0&&r.push(c.node1)}}a=r,r=[],++o}ie(t,(function(t){X_(t)||t.setLayout({depth:Math.max(0,i-t.getLayout().skNodeHeight)},!0)}))}else"justify"===e&&function(t,e){ie(t,(function(t){X_(t)||t.outEdges.length||t.setLayout({depth:e},!0)}))}(t,i)}(t,o,0,b);!function(t,e,n){ie(t,(function(t){var i=t.getLayout().depth*e;"vertical"===n?t.setLayout({y:i},!0):t.setLayout({x:i},!0)}))}(t,"vertical"===a?(r-n)/b:(i-n)/b,a)})(t,e,n,r,a,s,l),function(t,e,n,i,r,a,o){var s=function(t,e){var n=[],i="vertical"===e?"y":"x",r=ja(t,(function(t){return t.getLayout()[i]}));return r.keys.sort((function(t,e){return t-e})),ie(r.keys,(function(t){n.push(r.buckets.get(t))})),n}(t,o);(function(t,e,n,i,r,a){var o=1/0;ie(t,(function(t){var e=t.length,s=0;ie(t,(function(t){s+=t.getLayout().value}));var l="vertical"===a?(i-(e-1)*r)/s:(n-(e-1)*r)/s;l<o&&(o=l)})),ie(t,(function(t){ie(t,(function(t,e){var n=t.getLayout().value*o;"vertical"===a?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))}))})),ie(e,(function(t){var e=+t.getValue()*o;t.setLayout({dy:e},!0)}))})(s,e,n,i,r,o),Z_(s,r,n,i,o);for(var l=1;a>0;a--)J_(s,l*=.99,o),Z_(s,r,n,i,o),ax(s,l,o),Z_(s,r,n,i,o)}(t,e,a,r,i,o,s),function(t,e){var n="vertical"===e?"x":"y";ie(t,(function(t){t.outEdges.sort((function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]})),t.inEdges.sort((function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]}))})),ie(t,(function(t){var e=0,n=0;ie(t.outEdges,(function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy})),ie(t.inEdges,(function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy}))}))}(t,s)}(l,u,n,i,a,o,0!==Ie(l,(function(t){return 0===t.getLayout().value})).length?0:t.get("layoutIterations"),t.get("orient"),t.get("nodeAlign"))}))}function X_(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&e.depth>=0}function Z_(t,e,n,i,r){var a="vertical"===r?"x":"y";ie(t,(function(t){var o,s,l;t.sort((function(t,e){return t.getLayout()[a]-e.getLayout()[a]}));for(var u=0,c=t.length,d="vertical"===r?"dx":"dy",h=0;h<c;h++)(l=u-(s=t[h]).getLayout()[a])>0&&(o=s.getLayout()[a]+l,"vertical"===r?s.setLayout({x:o},!0):s.setLayout({y:o},!0)),u=s.getLayout()[a]+s.getLayout()[d]+e;if((l=u-e-("vertical"===r?i:n))>0){o=s.getLayout()[a]-l,"vertical"===r?s.setLayout({x:o},!0):s.setLayout({y:o},!0),u=o;for(h=c-2;h>=0;--h)(l=(s=t[h]).getLayout()[a]+s.getLayout()[d]+e-u)>0&&(o=s.getLayout()[a]-l,"vertical"===r?s.setLayout({x:o},!0):s.setLayout({y:o},!0)),u=s.getLayout()[a]}}))}function J_(t,e,n){ie(t.slice().reverse(),(function(t){ie(t,(function(t){if(t.outEdges.length){var i=rx(t.outEdges,K_,n)/rx(t.outEdges,ix);if(isNaN(i)){var r=t.outEdges.length;i=r?rx(t.outEdges,Q_,n)/r:0}if("vertical"===n){var a=t.getLayout().x+(i-nx(t,n))*e;t.setLayout({x:a},!0)}else{var o=t.getLayout().y+(i-nx(t,n))*e;t.setLayout({y:o},!0)}}}))}))}function K_(t,e){return nx(t.node2,e)*t.getValue()}function Q_(t,e){return nx(t.node2,e)}function tx(t,e){return nx(t.node1,e)*t.getValue()}function ex(t,e){return nx(t.node1,e)}function nx(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function ix(t){return t.getValue()}function rx(t,e,n){for(var i=0,r=t.length,a=-1;++a<r;){var o=+e(t[a],n);isNaN(o)||(i+=o)}return i}function ax(t,e,n){ie(t,(function(t){ie(t,(function(t){if(t.inEdges.length){var i=rx(t.inEdges,tx,n)/rx(t.inEdges,ix);if(isNaN(i)){var r=t.inEdges.length;i=r?rx(t.inEdges,ex,n)/r:0}if("vertical"===n){var a=t.getLayout().x+(i-nx(t,n))*e;t.setLayout({x:a},!0)}else{var o=t.getLayout().y+(i-nx(t,n))*e;t.setLayout({y:o},!0)}}}))}))}function ox(t){t.eachSeriesByType("sankey",(function(t){var e=t.getGraph(),n=e.nodes,i=e.edges;if(n.length){var r=1/0,a=-1/0;ie(n,(function(t){var e=t.getLayout().value;e<r&&(r=e),e>a&&(a=e)})),ie(n,(function(e){var n=new Bm({type:"color",mappingMethod:"linear",dataExtent:[r,a],visual:t.get("color")}).mapValueToVisual(e.getLayout().value),i=e.getModel().get(["itemStyle","color"]);null!=i?(e.setVisual("color",i),e.setVisual("style",{fill:i})):(e.setVisual("color",n),e.setVisual("style",{fill:n}))}))}i.length&&ie(i,(function(t){var e=t.getModel().get("lineStyle");t.setVisual("style",e)}))}))}var sx=function(){function t(){}return t.prototype._hasEncodeRule=function(t){var e=this.getEncode();return e&&null!=e.get(t)},t.prototype.getInitialData=function(t,e){var n,i,r=e.getComponent("xAxis",this.get("xAxisIndex")),a=e.getComponent("yAxis",this.get("yAxisIndex")),o=r.get("type"),s=a.get("type");"category"===o?(t.layout="horizontal",n=r.getOrdinalMeta(),i=!this._hasEncodeRule("x")):"category"===s?(t.layout="vertical",n=a.getOrdinalMeta(),i=!this._hasEncodeRule("y")):t.layout=t.layout||"horizontal";var l=["x","y"],u="horizontal"===t.layout?0:1,c=this._baseAxisDim=l[u],d=l[1-u],h=[r,a],p=h[u].get("type"),f=h[1-u].get("type"),g=t.data;if(g&&i){var m=[];ie(g,(function(t,e){var n;pe(t)?(n=t.slice(),t.unshift(e)):pe(t.value)?((n=xn({},t)).value=n.value.slice(),t.value.unshift(e)):n=t,m.push(n)})),t.data=m}var v=this.defaultValueDimensions,y=[{name:c,type:ve(p),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:ve(f),dimsDef:v.slice()}];return Bi(this,{coordDimensions:y,dimensionsCount:v.length+1,encodeDefaulter:le(ue,y,this)})},t.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},t}(),lx=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return _e(e,t),e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(Qn);Yi(lx,sx,!0);var ux=lx,cx=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this.group,a=this._data;this._data||r.removeAll();var o="horizontal"===t.get("layout")?1:0;i.diff(a).add((function(t){if(i.hasValue(t)){var e=px(i.getItemLayout(t),i,t,o,!0);i.setItemGraphicEl(t,e),r.add(e)}})).update((function(t,e){var n=a.getItemGraphicEl(e);if(i.hasValue(t)){var s=i.getItemLayout(t);n?(ii(n),fx(s,n,i,t)):n=px(s,i,t,o),r.add(n),i.setItemGraphicEl(t,n)}else r.remove(n)})).remove((function(t){var e=a.getItemGraphicEl(t);e&&r.remove(e)})).execute(),this._data=i},e.prototype.remove=function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl((function(t){t&&e.remove(t)}))},e.type="boxplot",e}(bi),dx=function(){},hx=function(t){function e(e){var n=t.call(this,e)||this;return n.type="boxplotBoxPath",n}return _e(e,t),e.prototype.getDefaultShape=function(){return new dx},e.prototype.buildPath=function(t,e){var n=e.points,i=0;for(t.moveTo(n[i][0],n[i][1]),i++;i<4;i++)t.lineTo(n[i][0],n[i][1]);for(t.closePath();i<n.length;i++)t.moveTo(n[i][0],n[i][1]),i++,t.lineTo(n[i][0],n[i][1])},e}(je);function px(t,e,n,i,r){var a=t.ends,o=new hx({shape:{points:r?gx(a,i,t):a}});return fx(t,o,e,n,r),o}function fx(t,e,n,i,r){var a=n.hostModel;(0,_r[r?"initProps":"updateProps"])(e,{shape:{points:t.ends}},a,i),e.useStyle(n.getItemVisual(i,"style")),e.style.strokeNoScale=!0,e.z2=100;var o=n.getItemModel(i),s=o.getModel("emphasis");_i(e,o),si(e,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function gx(t,e,n){return me(t,(function(t){return(t=t.slice())[e]=n.initBaseline,t}))}var mx=cx,vx=ie;function yx(t){var e=function(t){var e=[],n=[];return t.eachSeriesByType("boxplot",(function(t){var i=t.getBaseAxis(),r=sn(n,i);r<0&&(r=n.length,n[r]=i,e[r]={axis:i,seriesModels:[]}),e[r].seriesModels.push(t)})),e}(t);vx(e,(function(t){var e=t.seriesModels;e.length&&(!function(t){var e,n=t.axis,i=t.seriesModels,r=i.length,a=t.boxWidthList=[],o=t.boxOffsetList=[],s=[];if("category"===n.type)e=n.getBandWidth();else{var l=0;vx(i,(function(t){l=Math.max(l,t.getData().count())}));var u=n.getExtent();e=Math.abs(u[1]-u[0])/l}vx(i,(function(t){var n=t.get("boxWidth");pe(n)||(n=[n,n]),s.push([Ke(n[0],e)||0,Ke(n[1],e)||0])}));var c=.8*e-2,d=c/r*.3,h=(c-d*(r-1))/r,p=h/2-c/2;vx(i,(function(t,e){o.push(p),p+=d+h,a.push(Math.min(Math.max(h,s[e][0]),s[e][1]))}))}(t),vx(e,(function(e,n){!function(t,e,n){var i=t.coordinateSystem,r=t.getData(),a=n/2,o="horizontal"===t.get("layout")?0:1,s=1-o,l=["x","y"],u=r.mapDimension(l[o]),c=r.mapDimensionsAll(l[s]);if(null==u||c.length<5)return;for(var d=0;d<r.count();d++){var h=r.get(u,d),p=_(h,c[2],d),f=_(h,c[0],d),g=_(h,c[1],d),m=_(h,c[3],d),v=_(h,c[4],d),y=[];x(y,g,!1),x(y,m,!0),y.push(f,g,v,m),b(y,f),b(y,v),b(y,p),r.setItemLayout(d,{initBaseline:p[s],ends:y})}function _(t,n,a){var l,u=r.get(n,a),c=[];return c[o]=t,c[s]=u,isNaN(t)||isNaN(u)?l=[NaN,NaN]:(l=i.dataToPoint(c))[o]+=e,l}function x(t,e,n){var i=e.slice(),r=e.slice();i[o]+=a,r[o]-=a,n?t.push(i,r):t.push(r,i)}function b(t,e){var n=e.slice(),i=e.slice();n[o]-=a,i[o]+=a,t.push(n,i)}}(e,t.boxOffsetList[n],t.boxWidthList[n])})))}))}var _x={type:"echarts:boxplot",transform:function(t){var e=t.upstream;if(e.sourceFormat!==Ua){Ya("")}var n=function(t,e){for(var n=[],i=[],r=(e=e||{}).boundIQR,a="none"===r||0===r,o=0;o<t.length;o++){var s=Fa(t[o].slice()),l=Wa(s,.25),u=Wa(s,.5),c=Wa(s,.75),d=s[0],h=s[s.length-1],p=(null==r?1.5:r)*(c-l),f=a?d:Math.max(d,l-p),g=a?h:Math.min(h,c+p),m=e.itemNameFormatter,v=se(m)?m({value:o}):vn(m)?m.replace("{value}",o+""):o+"";n.push([v,f,l,u,c,g]);for(var y=0;y<s.length;y++){var _=s[y];if(_<f||_>g){var x=[v,_];i.push(x)}}}return{boxData:n,outliers:i}}(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};var xx=["itemStyle","borderColor"],bx=["itemStyle","borderColor0"],wx=["itemStyle","borderColorDoji"],Mx=["itemStyle","color"],Sx=["itemStyle","color0"];function Cx(t,e){return e.get(t>0?Mx:Sx)}function kx(t,e){return e.get(0===t?wx:t>0?xx:bx)}var Ix={seriesType:"candlestick",plan:Ii(),performRawSeries:!0,reset:function(t,e){if(!e.isSeriesFiltered(t))return!t.pipelineContext.large&&{progress:function(t,e){for(var n;null!=(n=t.next());){var i=e.getItemModel(n),r=e.getItemLayout(n).sign,a=i.getItemStyle();a.fill=Cx(r,i),a.stroke=kx(r,i)||a.fill;var o=e.ensureUniqueItemVisual(n,"style");xn(o,a)}}}}},Dx=["color","borderColor"],Tx=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,e,n){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,e,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},e.prototype.eachRendered=function(t){ci(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t){var e=t.getData(),n=this._data,i=this.group,r=e.getLayout("isSimpleBox"),a=t.get("clip",!0),o=t.coordinateSystem,s=o.getArea&&o.getArea();this._data||i.removeAll(),e.diff(n).add((function(n){if(e.hasValue(n)){var o=e.getItemLayout(n);if(a&&Px(s,o))return;var l=Lx(o,n,!0);on(l,{shape:{points:o.ends}},t,n),Nx(l,e,n,r),i.add(l),e.setItemGraphicEl(n,l)}})).update((function(o,l){var u=n.getItemGraphicEl(l);if(e.hasValue(o)){var c=e.getItemLayout(o);a&&Px(s,c)?i.remove(u):(u?(ln(u,{shape:{points:c.ends}},t,o),ii(u)):u=Lx(c),Nx(u,e,o,r),i.add(u),e.setItemGraphicEl(o,u))}else i.remove(u)})).remove((function(t){var e=n.getItemGraphicEl(t);e&&i.remove(e)})).execute(),this._data=e},e.prototype._renderLarge=function(t){this._clear(),Vx(t,this.group);var e=t.get("clip",!0)?Xd(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,e){for(var n,i=e.getData(),r=i.getLayout("isSimpleBox");null!=(n=t.next());){var a=Lx(i.getItemLayout(n));Nx(a,i,n,r),a.incremental=!0,this.group.add(a),this._progressiveEls.push(a)}},e.prototype._incrementalRenderLarge=function(t,e){Vx(e,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(bi),Ax=function(){},Ex=function(t){function e(e){var n=t.call(this,e)||this;return n.type="normalCandlestickBox",n}return _e(e,t),e.prototype.getDefaultShape=function(){return new Ax},e.prototype.buildPath=function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))},e}(je);function Lx(t,e,n){var i=t.ends;return new Ex({shape:{points:n?Ox(i,t):i},z2:100})}function Px(t,e){for(var n=!0,i=0;i<e.ends.length;i++)if(t.contain(e.ends[i][0],e.ends[i][1])){n=!1;break}return n}function Nx(t,e,n,i){var r=e.getItemModel(n);t.useStyle(e.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.__simpleBox=i,_i(t,r);var a=e.getItemLayout(n).sign;ie(t.states,(function(t,e){var n=r.getModel(e),i=Cx(a,n),o=kx(a,n)||i,s=t.style||(t.style={});i&&(s.fill=i),o&&(s.stroke=o)}));var o=r.getModel("emphasis");si(t,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function Ox(t,e){return me(t,(function(t){return(t=t.slice())[1]=e.initBaseline,t}))}var zx=function(){},Rx=function(t){function e(e){var n=t.call(this,e)||this;return n.type="largeCandlestickBox",n}return _e(e,t),e.prototype.getDefaultShape=function(){return new zx},e.prototype.buildPath=function(t,e){for(var n=e.points,i=0;i<n.length;)if(this.__sign===n[i++]){var r=n[i++];t.moveTo(r,n[i++]),t.lineTo(r,n[i++])}else i+=3},e}(je);function Vx(t,e,n,i){var r=t.getData().getLayout("largePoints"),a=new Rx({shape:{points:r},__sign:1,ignoreCoarsePointer:!0});e.add(a);var o=new Rx({shape:{points:r},__sign:-1,ignoreCoarsePointer:!0});e.add(o);var s=new Rx({shape:{points:r},__sign:0,ignoreCoarsePointer:!0});e.add(s),Fx(1,a,t),Fx(-1,o,t),Fx(0,s,t),i&&(a.incremental=!0,o.incremental=!0),n&&n.push(a,o)}function Fx(t,e,n,i){var r=kx(t,n)||Cx(t,n),a=n.getModel("itemStyle").getItemStyle(Dx);e.useStyle(a),e.style.fill=null,e.style.stroke=r}var Bx=Tx,Hx=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return _e(e,t),e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,e,n){var i=e.getItemLayout(t);return i&&n.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Qn);Yi(Hx,sx,!0);var Gx=Hx;function jx(t){t&&pe(t.series)&&ie(t.series,(function(t){$n(t)&&"k"===t.type&&(t.type="candlestick")}))}function Wx(t,e,n,i,r,a){return n>i?-1:n<i?1:a?0:e>0?t.get(r,e-1)<=i?1:-1:1}var Ux={seriesType:"candlestick",plan:Ii(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),i=function(t,e){var n,i=t.getBaseAxis(),r="category"===i.type?i.getBandWidth():(n=i.getExtent(),Math.abs(n[1]-n[0])/e.count()),a=Ke(Fe(t.get("barMaxWidth"),r),r),o=Ke(Fe(t.get("barMinWidth"),1),r),s=t.get("barWidth");return null!=s?Ke(s,r):Math.max(Math.min(r/2,a),o)}(t,n),r=["x","y"],a=n.getDimensionIndex(n.mapDimension(r[0])),o=me(n.mapDimensionsAll(r[1]),n.getDimensionIndex,n),s=o[0],l=o[1],u=o[2],c=o[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(a<0||o.length<4))return{progress:t.pipelineContext.large?function(n,i){var r,o,d=hi(4*n.count),h=0,p=[],f=[],g=i.getStore(),m=!!t.get(["itemStyle","borderColorDoji"]);for(;null!=(o=n.next());){var v=g.get(a,o),y=g.get(s,o),_=g.get(l,o),x=g.get(u,o),b=g.get(c,o);isNaN(v)||isNaN(x)||isNaN(b)?(d[h++]=NaN,h+=3):(d[h++]=Wx(g,o,y,_,l,m),p[0]=v,p[1]=x,r=e.dataToPoint(p,null,f),d[h++]=r?r[0]:NaN,d[h++]=r?r[1]:NaN,p[1]=b,r=e.dataToPoint(p,null,f),d[h++]=r?r[1]:NaN)}i.setLayout("largePoints",d)}:function(t,n){var r,o=n.getStore();for(;null!=(r=t.next());){var d=o.get(a,r),h=o.get(s,r),p=o.get(l,r),f=o.get(u,r),g=o.get(c,r),m=Math.min(h,p),v=Math.max(h,p),y=S(m,d),_=S(v,d),x=S(f,d),b=S(g,d),w=[];C(w,_,0),C(w,y,1),w.push(I(b),I(_),I(x),I(y));var M=!!n.getItemModel(r).get(["itemStyle","borderColorDoji"]);n.setItemLayout(r,{sign:Wx(o,r,h,p,l,M),initBaseline:h>p?_[1]:y[1],ends:w,brushRect:k(f,g,d)})}function S(t,n){var i=[];return i[0]=n,i[1]=t,isNaN(n)||isNaN(t)?[NaN,NaN]:e.dataToPoint(i)}function C(t,e,n){var r=e.slice(),a=e.slice();r[0]=$a(r[0]+i/2,1,!1),a[0]=$a(a[0]-i/2,1,!0),n?t.push(r,a):t.push(a,r)}function k(t,e,n){var r=S(t,n),a=S(e,n);return r[0]-=i/2,a[0]-=i/2,{x:r[0],y:r[1],width:i,height:a[1]-r[1]}}function I(t){return t[0]=$a(t[0],1),t}}}}};function Yx(t,e){var n=e.rippleEffectColor||e.color;t.eachChild((function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?n:null,fill:"fill"===e.brushType?n:null}})}))}var $x=function(t){function e(e,n){var i=t.call(this)||this,r=new Ld(e,n),a=new Jn;return i.add(r),i.add(a),i.updateData(e,n),i}return _e(e,t),e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,i=t.rippleNumber,r=this.childAt(1),a=0;a<i;a++){var o=Kn(e,-1,-1,2,2,n);o.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-a/i*t.period+t.effectOffset;o.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(s).start(),o.animateStyle(!0).when(t.period,{opacity:0}).delay(s).start(),r.add(o)}Yx(r,t)},e.prototype.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],r=0;r<i.length;r++){var a=i[r];if(e[a]!==t[a])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}Yx(n,t)},e.prototype.highlight=function(){ei(this)},e.prototype.downplay=function(){ni(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,e){var n=this,i=t.hostModel;this.childAt(0).updateData(t,e);var r=this.childAt(1),a=t.getItemModel(e),o=t.getItemVisual(e,"symbol"),s=ui(t.getItemVisual(e,"symbolSize")),l=t.getItemVisual(e,"style"),u=l&&l.fill,c=a.getModel("emphasis");r.setScale(s),r.traverse((function(t){t.setStyle("fill",u)}));var d=ai(t.getItemVisual(e,"symbolOffset"),s);d&&(r.x=d[0],r.y=d[1]);var h=t.getItemVisual(e,"symbolRotate");r.rotation=(h||0)*Math.PI/180||0;var p={};p.showEffectOn=i.get("showEffectOn"),p.rippleScale=a.get(["rippleEffect","scale"]),p.brushType=a.get(["rippleEffect","brushType"]),p.period=1e3*a.get(["rippleEffect","period"]),p.effectOffset=e/t.count(),p.z=i.getShallow("z")||0,p.zlevel=i.getShallow("zlevel")||0,p.symbolType=o,p.color=u,p.rippleEffectColor=a.get(["rippleEffect","color"]),p.rippleNumber=a.get(["rippleEffect","number"]),"render"===p.showEffectOn?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(t){"emphasis"===t?"render"!==p.showEffectOn&&n.startEffectAnimation(p):"normal"===t&&"render"!==p.showEffectOn&&n.stopEffectAnimation()}),this._effectCfg=p,si(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(Jn),qx=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(){this._symbolDraw=new zd($x)},e.prototype.render=function(t,e,n){var i=t.getData(),r=this._symbolDraw;r.updateData(i,{clipShape:this._getClipShape(t)}),this.group.add(r.group)},e.prototype._getClipShape=function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},e.prototype.updateTransform=function(t,e,n){var i=t.getData();this.group.dirty();var r=lh("").reset(t,e,n);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=qa(e.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(bi),Xx=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return _e(e,t),e.prototype.getInitialData=function(t,e){return hu(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,e,n){return n.point(e.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(Qn);var Zx=function(t){function e(e,n,i){var r=t.call(this)||this;return r.add(r.createLine(e,n,i)),r._updateEffectSymbol(e,n),r}return _e(e,t),e.prototype.createLine=function(t,e,n){return new Hv(t,e,n)},e.prototype._updateEffectSymbol=function(t,e){var n=t.getItemModel(e).getModel("effect"),i=n.get("symbolSize"),r=n.get("symbol");pe(i)||(i=[i,i]);var a=t.getItemVisual(e,"style"),o=n.get("color")||a&&a.stroke,s=this.childAt(1);this._symbolType!==r&&(this.remove(s),(s=Kn(r,-.5,-.5,1,1,o)).z2=100,s.culling=!0,this.add(s)),s&&(s.setStyle("shadowColor",o),s.setStyle(n.getItemStyle(["color"])),s.scaleX=i[0],s.scaleY=i[1],s.setColor(o),this._symbolType=r,this._symbolScale=i,this._updateEffectAnimation(t,n,e))},e.prototype._updateEffectAnimation=function(t,e,n){var i=this.childAt(1);if(i){var r=t.getItemLayout(n),a=1e3*e.get("period"),o=e.get("loop"),s=e.get("roundTrip"),l=e.get("constantSpeed"),u=Xr(e.get("delay"),(function(e){return e/t.count()*a/3}));if(i.ignore=!0,this._updateAnimationPoints(i,r),l>0&&(a=this._getLineLength(i)/l*1e3),a!==this._period||o!==this._loop||s!==this._roundTrip){i.stopAnimation();var c=void 0;c=se(u)?u(n):u,i.__t>0&&(c=-a*i.__t),this._animateSymbol(i,a,c,o,s)}this._period=a,this._loop=o,this._roundTrip=s}},e.prototype._animateSymbol=function(t,e,n,i,r){if(e>0){t.__t=0;var a=this,o=t.animate("",i).when(r?2*e:e,{__t:r?2:1}).delay(n).during((function(){a._updateSymbolPosition(t)}));i||o.done((function(){a.remove(t)})),o.start()}},e.prototype._getLineLength=function(t){return We(t.__p1,t.__cp1)+We(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},e.prototype.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},e.prototype._updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,i=t.__cp1,r=t.__t<1?t.__t:2-t.__t,a=[t.x,t.y],o=a.slice(),s=Ea,l=Xa;a[0]=s(e[0],i[0],n[0],r),a[1]=s(e[1],i[1],n[1],r);var u=t.__t<1?l(e[0],i[0],n[0],r):l(n[0],i[0],e[0],1-r),c=t.__t<1?l(e[1],i[1],n[1],r):l(n[1],i[1],e[1],1-r);t.rotation=-Math.atan2(c,u)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==t.__lastT&&t.__lastT<t.__t?(t.scaleY=1.05*We(o,a),1===r&&(a[0]=o[0]+(a[0]-o[0])/2,a[1]=o[1]+(a[1]-o[1])/2)):1===t.__lastT?t.scaleY=2*We(e,a):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=a[0],t.y=a[1]},e.prototype.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},e}(Jn),Jx=function(t){function e(e,n,i){var r=t.call(this)||this;return r._createPolyline(e,n,i),r}return _e(e,t),e.prototype._createPolyline=function(t,e,n){var i=t.getItemLayout(e),r=new Be({shape:{points:i}});this.add(r),this._updateCommonStl(t,e,n)},e.prototype.updateData=function(t,e,n){var i=t.hostModel,r=this.childAt(0),a={shape:{points:t.getItemLayout(e)}};ln(r,a,i,e),this._updateCommonStl(t,e,n)},e.prototype._updateCommonStl=function(t,e,n){var i=this.childAt(0),r=t.getItemModel(e),a=n&&n.emphasisLineStyle,o=n&&n.focus,s=n&&n.blurScope,l=n&&n.emphasisDisabled;if(!n||t.hasItemOption){var u=r.getModel("emphasis");a=u.getModel("lineStyle").getLineStyle(),l=u.get("disabled"),o=u.get("focus"),s=u.get("blurScope")}i.useStyle(t.getItemVisual(e,"style")),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=a,si(this,o,s,l)},e.prototype.updateLayout=function(t,e){this.childAt(0).setShape("points",t.getItemLayout(e))},e}(Jn),Kx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return _e(e,t),e.prototype.createLine=function(t,e,n){return new Jx(t,e,n)},e.prototype._updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],i=0,r=1;r<e.length;r++){var a=e[r-1],o=e[r];i+=We(a,o),n.push(i)}if(0!==i){for(r=0;r<n.length;r++)n[r]/=i;this._offsets=n,this._length=i}else this._length=0},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var e=t.__t<1?t.__t:2-t.__t,n=this._points,i=this._offsets,r=n.length;if(i){var a,o=this._lastFrame;if(e<this._lastFramePercent){for(a=Math.min(o+1,r-1);a>=0&&!(i[a]<=e);a--);a=Math.min(a,r-2)}else{for(a=o;a<r&&!(i[a]>e);a++);a=Math.min(a-1,r-2)}var s=(e-i[a])/(i[a+1]-i[a]),l=n[a],u=n[a+1];t.x=l[0]*(1-s)+s*u[0],t.y=l[1]*(1-s)+s*u[1];var c=t.__t<1?u[0]-l[0]:l[0]-u[0],d=t.__t<1?u[1]-l[1]:l[1]-u[1];t.rotation=-Math.atan2(d,c)-Math.PI/2,this._lastFrame=a,this._lastFramePercent=e,t.ignore=!1}},e}(Zx),Qx=function(){this.polyline=!1,this.curveness=0,this.segs=[]},tb=function(t){function e(e){var n=t.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return _e(e,t),e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Qx},e.prototype.buildPath=function(t,e){var n,i=e.segs,r=e.curveness;if(e.polyline)for(n=this._off;n<i.length;){var a=i[n++];if(a>0){t.moveTo(i[n++],i[n++]);for(var o=1;o<a;o++)t.lineTo(i[n++],i[n++])}}else for(n=this._off;n<i.length;){var s=i[n++],l=i[n++],u=i[n++],c=i[n++];if(t.moveTo(s,l),r>0){var d=(s+u)/2-(l-c)*r,h=(l+c)/2-(u-s)*r;t.quadraticCurveTo(d,h,u,c)}else t.lineTo(u,c)}this.incremental&&(this._off=n,this.notClear=!0)},e.prototype.findDataIndex=function(t,e){var n=this.shape,i=n.segs,r=n.curveness,a=this.style.lineWidth;if(n.polyline)for(var o=0,s=0;s<i.length;){var l=i[s++];if(l>0)for(var u=i[s++],c=i[s++],d=1;d<l;d++){var h=i[s++],p=i[s++];if(Za(u,c,h,p,a,t,e))return o}o++}else for(o=0,s=0;s<i.length;){u=i[s++],c=i[s++],h=i[s++],p=i[s++];if(r>0){if(Ja(u,c,(u+h)/2-(c-p)*r,(c+p)/2-(h-u)*r,h,p,a,t,e))return o}else if(Za(u,c,h,p,a,t,e))return o;o++}return-1},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect();return t=n[0],e=n[1],i.contain(t,e)?(this.hoverDataIdx=this.findDataIndex(t,e))>=0:(this.hoverDataIdx=-1,!1)},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var e=this.shape.segs,n=1/0,i=1/0,r=-1/0,a=-1/0,o=0;o<e.length;){var s=e[o++],l=e[o++];n=Math.min(s,n),r=Math.max(s,r),i=Math.min(l,i),a=Math.max(l,a)}t=this._rect=new xe(n,i,r,a)}return t},e}(je),eb=function(){function t(){this.group=new Jn}return t.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},t.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(t,e){var n=this._newAdded[0],i=e.getLayout("linesPoints"),r=n&&n.shape.segs;if(r&&r.length<2e4){var a=r.length,o=new Float32Array(a+i.length);o.set(r),o.set(i,a),n.setShape({segs:o})}else{this._newAdded=[];var s=this._create();s.incremental=!0,s.setShape({segs:i}),this._setCommon(s,e),s.__startIndex=t.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},t.prototype._create=function(){var t=new tb({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},t.prototype._setCommon=function(t,e,n){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var r=e.getVisual("style");r&&r.stroke&&t.setStyle("stroke",r.stroke),t.setStyle("fill",null);var a=Je(t);a.seriesIndex=i.seriesIndex,t.on("mousemove",(function(e){a.dataIndex=null;var n=t.hoverDataIdx;n>0&&(a.dataIndex=n+t.__startIndex)}))},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),nb={seriesType:"lines",plan:Ii(),reset:function(t){var e=t.coordinateSystem;if(e){var n=t.get("polyline"),i=t.pipelineContext.large;return{progress:function(r,a){var o=[];if(i){var s=void 0,l=r.end-r.start;if(n){for(var u=0,c=r.start;c<r.end;c++)u+=t.getLineCoordsCount(c);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var d=0,h=[];for(c=r.start;c<r.end;c++){var p=t.getLineCoords(c,o);n&&(s[d++]=p);for(var f=0;f<p;f++)h=e.dataToPoint(o[f],!1,h),s[d++]=h[0],s[d++]=h[1]}a.setLayout("linesPoints",s)}else for(c=r.start;c<r.end;c++){var g=a.getItemModel(c),m=(p=t.getLineCoords(c,o),[]);if(n)for(var v=0;v<p;v++)m.push(e.dataToPoint(o[v]));else{m[0]=e.dataToPoint(o[0]),m[1]=e.dataToPoint(o[1]);var y=g.get(["lineStyle","curveness"]);+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}a.setItemLayout(c,m)}}}}}},ib=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this._updateLineDraw(i,t),a=t.get("zlevel"),o=t.get(["effect","trailLength"]),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(a).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&o>0&&(l||s.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(o/10+.9,1),0)})),r.updateData(i);var u=t.get("clip",!0)&&Xd(t.coordinateSystem,!1,t);u?this.group.setClipPath(u):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,n){var i=t.getData();this._updateLineDraw(i,t).incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},e.prototype.incrementalRender=function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,e,n){var i=t.getData(),r=t.pipelineContext;if(!this._finished||r.large||r.progressiveRender)return{update:!0};var a=nb.reset(t,e,n);a.progress&&a.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},e.prototype._updateLineDraw=function(t,e){var n=this._lineDraw,i=this._showEffect(e),r=!!e.get("polyline"),a=e.pipelineContext.large;return n&&i===this._hasEffet&&r===this._isPolyline&&a===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=a?new eb:new Uv(r?i?Kx:Jx:i?Zx:Hv),this._hasEffet=i,this._isPolyline=r,this._isLargeDraw=a),this.group.add(n.group),n},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var e=t.getZr();"svg"===e.painter.getType()||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.type="lines",e}(bi),rb="undefined"==typeof Uint32Array?Array:Uint32Array,ab="undefined"==typeof Float64Array?Array:Float64Array;function ob(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=me(e,(function(t){var e={coords:[t[0].coord,t[1].coord]};return t[0].name&&(e.fromName=t[0].name),t[1].name&&(e.toName=t[1].name),qr([e,t[0],t[1]])})))}var sb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return _e(e,t),e.prototype.init=function(e){e.data=e.data||[],ob(e);var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),t.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(e){if(ob(e),e.data){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count))}t.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=Qr(this._flatCoords,e.flatCoords),this._flatCoordsOffset=Qr(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var e=this.getData().getItemModel(t);return e.option instanceof Array?e.option:e.getShallow("coords")},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],i=this._flatCoordsOffset[2*t+1],r=0;r<i;r++)e[r]=e[r]||[],e[r][0]=this._flatCoords[n+2*r],e[r][1]=this._flatCoords[n+2*r+1];return i}var a=this._getCoordsFromItemModel(t);for(r=0;r<a.length;r++)e[r]=e[r]||[],e[r][0]=a[r][0],e[r][1]=a[r][1];return a.length},e.prototype._processFlatCoordsArray=function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),Mn(t[0])){for(var n=t.length,i=new rb(n),r=new ab(n),a=0,o=0,s=0,l=0;l<n;){s++;var u=t[l++];i[o++]=a+e,i[o++]=u;for(var c=0;c<u;c++){var d=t[l++],h=t[l++];r[a++]=d,r[a++]=h}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,o),flatCoords:r,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,e){var n=new he(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],(function(t,e,i,r){if(t instanceof Array)return NaN;n.hasItemOption=!0;var a=t.value;return null!=a?a instanceof Array?a[r]:a:void 0})),n},e.prototype.formatTooltip=function(t,e,n){var i=this.getData().getItemModel(t),r=i.get("name");if(r)return r;var a=i.get("fromName"),o=i.get("toName"),s=[];return null!=a&&s.push(a),null!=o&&s.push(o),br("nameValue",{name:s.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),e=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&e>0?e+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(Qn);function lb(t){return t instanceof Array||(t=[t,t]),t}var ub={seriesType:"lines",reset:function(t){var e=lb(t.get("symbol")),n=lb(t.get("symbolSize")),i=t.getData();return i.setVisual("fromSymbol",e&&e[0]),i.setVisual("toSymbol",e&&e[1]),i.setVisual("fromSymbolSize",n&&n[0]),i.setVisual("toSymbolSize",n&&n[1]),{dataEach:i.hasItemOption?function(t,e){var n=t.getItemModel(e),i=lb(n.getShallow("symbol",!0)),r=lb(n.getShallow("symbolSize",!0));i[0]&&t.setItemVisual(e,"fromSymbol",i[0]),i[1]&&t.setItemVisual(e,"toSymbol",i[1]),r[0]&&t.setItemVisual(e,"fromSymbolSize",r[0]),r[1]&&t.setItemVisual(e,"toSymbolSize",r[1])}:null}}};var cb=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Ka.createCanvas();this.canvas=t}return t.prototype.update=function(t,e,n,i,r,a){var o=this._getBrush(),s=this._getGradient(r,"inRange"),l=this._getGradient(r,"outOfRange"),u=this.pointSize+this.blurSize,c=this.canvas,d=c.getContext("2d"),h=t.length;c.width=e,c.height=n;for(var p=0;p<h;++p){var f=t[p],g=f[0],m=f[1],v=i(f[2]);d.globalAlpha=v,d.drawImage(o,g-u,m-u)}if(!c.width||!c.height)return c;for(var y=d.getImageData(0,0,c.width,c.height),_=y.data,x=0,b=_.length,w=this.minOpacity,M=this.maxOpacity-w;x<b;){v=_[x+3]/256;var S=4*Math.floor(255*v);if(v>0){var C=a(v)?s:l;v>0&&(v=v*M+w),_[x++]=C[S],_[x++]=C[S+1],_[x++]=C[S+2],_[x++]=C[S+3]*v*256}else x+=4}return d.putImageData(y,0,0),c},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Ka.createCanvas()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var i=t.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-e,e,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),t},t.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,i=n[e]||(n[e]=new Uint8ClampedArray(1024)),r=[0,0,0,0],a=0,o=0;o<256;o++)t[e](o/255,!0,r),i[a++]=r[0],i[a++]=r[1],i[a++]=r[2],i[a++]=r[3];return i},t}();function db(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var hb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n){var i;e.eachComponent("visualMap",(function(e){e.eachTargetSeries((function(n){n===t&&(i=e)}))})),this._progressiveEls=null,this.group.removeAll();var r=t.coordinateSystem;"cartesian2d"===r.type||"calendar"===r.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):db(r)&&this._renderOnGeo(r,t,i,n)},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,e,n,i){var r=e.coordinateSystem;r&&(db(r)?this.render(e,n,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(e,i,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){ci(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,e,n,i,r){var a,o,s,l,u=t.coordinateSystem,c=Zd(u,"cartesian2d");if(c){var d=u.getAxis("x"),h=u.getAxis("y");a=d.getBandWidth()+.5,o=h.getBandWidth()+.5,s=d.scale.getExtent(),l=h.scale.getExtent()}for(var p=this.group,f=t.getData(),g=t.getModel(["emphasis","itemStyle"]).getItemStyle(),m=t.getModel(["blur","itemStyle"]).getItemStyle(),v=t.getModel(["select","itemStyle"]).getItemStyle(),y=t.get(["itemStyle","borderRadius"]),_=ri(t),x=t.getModel("emphasis"),b=x.get("focus"),w=x.get("blurScope"),M=x.get("disabled"),S=c?[f.mapDimension("x"),f.mapDimension("y"),f.mapDimension("value")]:[f.mapDimension("time"),f.mapDimension("value")],C=n;C<i;C++){var k=void 0,I=f.getItemVisual(C,"style");if(c){var D=f.get(S[0],C),T=f.get(S[1],C);if(isNaN(f.get(S[2],C))||isNaN(D)||isNaN(T)||D<s[0]||D>s[1]||T<l[0]||T>l[1])continue;var A=u.dataToPoint([D,T]);k=new gi({shape:{x:A[0]-a/2,y:A[1]-o/2,width:a,height:o},style:I})}else{if(isNaN(f.get(S[1],C)))continue;k=new gi({z2:1,shape:u.dataToRect([f.get(S[0],C)]).contentShape,style:I})}if(f.hasItemOption){var E=f.getItemModel(C),L=E.getModel("emphasis");g=L.getModel("itemStyle").getItemStyle(),m=E.getModel(["blur","itemStyle"]).getItemStyle(),v=E.getModel(["select","itemStyle"]).getItemStyle(),y=E.get(["itemStyle","borderRadius"]),b=L.get("focus"),w=L.get("blurScope"),M=L.get("disabled"),_=ri(E)}k.shape.r=y;var P=t.getRawValue(C),N="-";P&&null!=P[2]&&(N=P[2]+""),oi(k,_,{labelFetcher:t,labelDataIndex:C,defaultOpacity:I.opacity,defaultText:N}),k.ensureState("emphasis").style=g,k.ensureState("blur").style=m,k.ensureState("select").style=v,si(k,b,w,M),k.incremental=r,r&&(k.states.emphasis.hoverLayer=!0),p.add(k),f.setItemGraphicEl(C,k),this._progressiveEls&&this._progressiveEls.push(k)}},e.prototype._renderOnGeo=function(t,e,n,i){var r=n.targetVisuals.inRange,a=n.targetVisuals.outOfRange,o=e.getData(),s=this._hmLayer||this._hmLayer||new cb;s.blurSize=e.get("blurSize"),s.pointSize=e.get("pointSize"),s.minOpacity=e.get("minOpacity"),s.maxOpacity=e.get("maxOpacity");var l=t.getViewRect().clone(),u=t.getRoamTransform();l.applyTransform(u);var c=Math.max(l.x,0),d=Math.max(l.y,0),h=Math.min(l.width+l.x,i.getWidth()),p=Math.min(l.height+l.y,i.getHeight()),f=h-c,g=p-d,m=[o.mapDimension("lng"),o.mapDimension("lat"),o.mapDimension("value")],v=o.mapArray(m,(function(e,n,i){var r=t.dataToPoint([e,n]);return r[0]-=c,r[1]-=d,r.push(i),r})),y=n.getExtent(),_="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(y,n.option.range):function(t,e,n){var i=t[1]-t[0],r=(e=me(e,(function(e){return{interval:[(e.interval[0]-t[0])/i,(e.interval[1]-t[0])/i]}}))).length,a=0;return function(t){var i;for(i=a;i<r;i++)if((o=e[i].interval)[0]<=t&&t<=o[1]){a=i;break}if(i===r)for(i=a-1;i>=0;i--){var o;if((o=e[i].interval)[0]<=t&&t<=o[1]){a=i;break}}return i>=0&&i<r&&n[i]}}(y,n.getPieceList(),n.option.selected);s.update(v,f,g,r.color.getNormalizer(),{inRange:r.color.getColorMapper(),outOfRange:a.color.getColorMapper()},_);var x=new dn({style:{width:f,height:g,x:c,y:d,image:s.canvas},silent:!0});this.group.add(x)},e.type="heatmap",e}(bi),pb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.getInitialData=function(t,e){return hu(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=ge.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(Qn);var fb=["itemStyle","borderWidth"],gb=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],mb=new Mr;function vb(t,e,n,i){var r=t.getItemLayout(e),a=n.get("symbolRepeat"),o=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,u=n.get("symbolPatternSize")||2,c=n.isAnimationEnabled(),d={dataIndex:e,layout:r,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:l,animationModel:c?n:null,hoverScale:c&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};!function(t,e,n,i,r){var a,o=i.valueDim,s=t.get("symbolBoundingData"),l=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),u=l.toGlobalCoord(l.dataToCoord(0)),c=1-+(n[o.wh]<=0);if(pe(s)){var d=[yb(l,s[0])-u,yb(l,s[1])-u];d[1]<d[0]&&d.reverse(),a=d[c]}else a=null!=s?yb(l,s)-u:e?i.coordSysExtent[o.index][c]-u:n[o.wh];r.boundingLength=a,e&&(r.repeatCutLength=n[o.wh]);var h="x"===o.xy,p=l.inverse;r.pxSign=h&&!p||!h&&p?a>=0?1:-1:a>0?1:-1}(n,a,r,i,d),function(t,e,n,i,r,a,o,s,l,u){var c,d=l.valueDim,h=l.categoryDim,p=Math.abs(n[h.wh]),f=t.getItemVisual(e,"symbolSize");c=pe(f)?f.slice():null==f?["100%","100%"]:[f,f];c[h.index]=Ke(c[h.index],p),c[d.index]=Ke(c[d.index],i?p:Math.abs(a)),u.symbolSize=c,(u.symbolScale=[c[0]/s,c[1]/s])[d.index]*=(l.isHorizontal?-1:1)*o}(t,e,r,a,0,d.boundingLength,d.pxSign,u,i,d),function(t,e,n,i,r){var a=t.get(fb)||0;a&&(mb.attr({scaleX:e[0],scaleY:e[1],rotation:n}),mb.updateTransform(),a/=mb.getLineScale(),a*=e[i.valueDim.index]);r.valueLineWidth=a||0}(n,d.symbolScale,l,i,d);var h=d.symbolSize,p=ai(n.get("symbolOffset"),h);return function(t,e,n,i,r,a,o,s,l,u,c,d){var h=c.categoryDim,p=c.valueDim,f=d.pxSign,g=Math.max(e[p.index]+s,0),m=g;if(i){var v=Math.abs(l),y=Xr(t.get("symbolMargin"),"15%")+"",_=!1;y.lastIndexOf("!")===y.length-1&&(_=!0,y=y.slice(0,y.length-1));var x=Ke(y,e[p.index]),b=Math.max(g+2*x,0),w=_?0:2*x,M=Qa(i),S=M?i:Pb((v+w)/b);b=g+2*(x=(v-S*g)/2/(_?S:Math.max(S-1,1))),w=_?0:2*x,M||"fixed"===i||(S=u?Pb((Math.abs(u)+w)/b):0),m=S*b-w,d.repeatTimes=S,d.symbolMargin=x}var C=f*(m/2),k=d.pathPosition=[];k[h.index]=n[h.wh]/2,k[p.index]="start"===o?C:"end"===o?l-C:l/2,a&&(k[0]+=a[0],k[1]+=a[1]);var I=d.bundlePosition=[];I[h.index]=n[h.xy],I[p.index]=n[p.xy];var D=d.barRectShape=xn({},n);D[p.wh]=f*Math.max(Math.abs(n[p.wh]),Math.abs(k[p.index]+C)),D[h.wh]=n[h.wh];var T=d.clipShape={};T[h.xy]=-n[h.xy],T[h.wh]=c.ecSize[h.wh],T[p.xy]=0,T[p.wh]=n[p.wh]}(n,h,r,a,0,p,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,i,d),d}function yb(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function _b(t){var e=t.symbolPatternSize,n=Kn(t.symbolType,-e/2,-e/2,e,e);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function xb(t,e,n,i){var r=t.__pictorialBundle,a=n.symbolSize,o=n.valueLineWidth,s=n.pathPosition,l=e.valueDim,u=n.repeatTimes||0,c=0,d=a[e.valueDim.index]+o+2*n.symbolMargin;for(Ab(t,(function(t){t.__pictorialAnimationIndex=c,t.__pictorialRepeatTimes=u,c<u?Eb(t,null,f(c),n,i):Eb(t,null,{scaleX:0,scaleY:0},n,i,(function(){r.remove(t)})),c++}));c<u;c++){var h=_b(n);h.__pictorialAnimationIndex=c,h.__pictorialRepeatTimes=u,r.add(h);var p=f(c);Eb(h,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},n,i)}function f(t){var e=s.slice(),i=n.pxSign,r=t;return("start"===n.symbolRepeatDirection?i>0:i<0)&&(r=u-1-t),e[l.index]=d*(r-u/2+.5)+s[l.index],{x:e[0],y:e[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function bb(t,e,n,i){var r=t.__pictorialBundle,a=t.__pictorialMainPath;a?Eb(a,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,i):(a=t.__pictorialMainPath=_b(n),r.add(a),Eb(a,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,i))}function wb(t,e,n){var i=xn({},e.barRectShape),r=t.__pictorialBarRect;r?Eb(r,null,{shape:i},e,n):((r=t.__pictorialBarRect=new gi({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,t.add(r))}function Mb(t,e,n,i){if(n.symbolClip){var r=t.__pictorialClipPath,a=xn({},n.clipShape),o=e.valueDim,s=n.animationModel,l=n.dataIndex;if(r)ln(r,{shape:a},s,l);else{a[o.wh]=0,r=new gi({shape:a}),t.__pictorialBundle.setClipPath(r),t.__pictorialClipPath=r;var u={};u[o.wh]=n.clipShape[o.wh],_r[i?"updateProps":"initProps"](r,{shape:u},s,l)}}}function Sb(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=Cb,n.isAnimationEnabled=kb,n}function Cb(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function kb(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Ib(t,e,n,i){var r=new Jn,a=new Jn;return r.add(a),r.__pictorialBundle=a,a.x=n.bundlePosition[0],a.y=n.bundlePosition[1],n.symbolRepeat?xb(r,e,n):bb(r,0,n),wb(r,n,i),Mb(r,e,n,i),r.__pictorialShapeStr=Tb(t,n),r.__pictorialSymbolMeta=n,r}function Db(t,e,n,i){var r=i.__pictorialBarRect;r&&r.removeTextContent();var a=[];Ab(i,(function(t){a.push(t)})),i.__pictorialMainPath&&a.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),ie(a,(function(t){li(t,{scaleX:0,scaleY:0},n,e,(function(){i.parent&&i.parent.remove(i)}))})),t.setItemGraphicEl(e,null)}function Tb(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function Ab(t,e,n){ie(t.__pictorialBundle.children(),(function(i){i!==t.__pictorialBarRect&&e.call(n,i)}))}function Eb(t,e,n,i,r,a){e&&t.attr(e),i.symbolClip&&!r?n&&t.attr(n):n&&_r[r?"updateProps":"initProps"](t,n,i.animationModel,i.dataIndex,a)}function Lb(t,e,n){var i=n.dataIndex,r=n.itemModel,a=r.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=r.getModel(["blur","itemStyle"]).getItemStyle(),l=r.getModel(["select","itemStyle"]).getItemStyle(),u=r.getShallow("cursor"),c=a.get("focus"),d=a.get("blurScope"),h=a.get("scale");Ab(t,(function(t){if(t instanceof dn){var e=t.style;t.useStyle(xn({image:e.image,x:e.x,y:e.y,width:e.width,height:e.height},n.style))}else t.useStyle(n.style);var i=t.ensureState("emphasis");i.style=o,h&&(i.scaleX=1.1*t.scaleX,i.scaleY=1.1*t.scaleY),t.ensureState("blur").style=s,t.ensureState("select").style=l,u&&(t.cursor=u),t.z2=n.z2}));var p=e.valueDim.posDesc[+(n.boundingLength>0)],f=t.__pictorialBarRect;f.ignoreClip=!0,oi(f,ri(r),{labelFetcher:e.seriesModel,labelDataIndex:i,defaultText:Td(e.seriesModel.getData(),i),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:p}),si(t,c,d,a.get("disabled"))}function Pb(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}var Nb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n){var i=this.group,r=t.getData(),a=this._data,o=t.coordinateSystem,s=o.getBaseAxis().isHorizontal(),l=o.master.getRect(),u={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:o,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:gb[+s],categoryDim:gb[1-+s]};r.diff(a).add((function(t){if(r.hasValue(t)){var e=Sb(r,t),n=vb(r,t,e,u),a=Ib(r,u,n);r.setItemGraphicEl(t,a),i.add(a),Lb(a,u,n)}})).update((function(t,e){var n=a.getItemGraphicEl(e);if(r.hasValue(t)){var o=Sb(r,t),s=vb(r,t,o,u),l=Tb(r,s);n&&l!==n.__pictorialShapeStr&&(i.remove(n),r.setItemGraphicEl(t,null),n=null),n?function(t,e,n){var i=n.animationModel,r=n.dataIndex,a=t.__pictorialBundle;ln(a,{x:n.bundlePosition[0],y:n.bundlePosition[1]},i,r),n.symbolRepeat?xb(t,e,n,!0):bb(t,e,n,!0);wb(t,n,!0),Mb(t,e,n,!0)}(n,u,s):n=Ib(r,u,s,!0),r.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=s,i.add(n),Lb(n,u,s)}else i.remove(n)})).remove((function(t){var e=a.getItemGraphicEl(t);e&&Db(a,t,e.__pictorialSymbolMeta.animationModel,e)})).execute();var c=t.get("clip",!0)?Xd(t.coordinateSystem,!1,t):null;return c?i.setClipPath(c):i.removeClipPath(),this._data=r,this.group},e.prototype.remove=function(t,e){var n=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl((function(e){Db(i,Je(e).dataIndex,t,e)})):n.removeAll()},e.type="pictorialBar",e}(bi),Ob=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return _e(e,t),e.prototype.getInitialData=function(e){return e.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Di(ph.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(ph);var zb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._layers=[],n}return _e(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this,a=this.group,o=t.getLayerSeries(),s=i.getLayout("layoutInfo"),l=s.rect,u=s.boundaryGap;function c(t){return t.name}a.x=0,a.y=l.y+u[0];var d=new ua(this._layersSeries||[],o,c,c),h=[];function p(e,n,s){var l=r._layers;if("remove"!==e){for(var u,c,d=[],p=[],f=o[n].indices,g=0;g<f.length;g++){var m=i.getItemLayout(f[g]),v=m.x,y=m.y0,_=m.y;d.push(v,y),p.push(v,y+_),u=i.getItemVisual(f[g],"style")}var x=i.getItemLayout(f[0]),b=t.getModel("label").get("margin"),w=t.getModel("emphasis");if("add"===e){var M=h[n]=new Jn;c=new Yd({shape:{points:d,stackedOnPoints:p,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),M.add(c),a.add(M),t.isAnimationEnabled()&&c.setClipPath(function(t,e,n){var i=new gi({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return on(i,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},e,n),i}(c.getBoundingRect(),t,(function(){c.removeClipPath()})))}else{M=l[s];c=M.childAt(0),a.add(M),h[n]=M,ln(c,{shape:{points:d,stackedOnPoints:p}},t),ii(c)}oi(c,ri(t),{labelDataIndex:f[g-1],defaultText:i.getName(f[g-1]),inheritColor:u.fill},{normal:{verticalAlign:"middle"}}),c.setTextConfig({position:null,local:!0});var S=c.getTextContent();S&&(S.x=x.x-b,S.y=x.y0+x.y/2),c.useStyle(u),i.setItemGraphicEl(n,c),_i(c,t),si(c,w.get("focus"),w.get("blurScope"),w.get("disabled"))}else a.remove(l[n])}d.add(vi(p,this,"add")).update(vi(p,this,"update")).remove(vi(p,this,"remove")).execute(),this._layersSeries=o,this._layers=h},e.type="themeRiver",e}(bi),Rb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new Jh(vi(this.getData,this),vi(this.getRawData,this))},e.prototype.fixData=function(t){var e=t.length,n={},i=ja(t,(function(t){return n.hasOwnProperty(t[0]+"")||(n[t[0]+""]=-1),t[2]})),r=[];i.buckets.each((function(t,e){r.push({name:e,dataList:t})}));for(var a=r.length,o=0;o<a;++o){for(var s=r[o].name,l=0;l<r[o].dataList.length;++l){var u=r[o].dataList[l][0]+"";n[u]=o}for(var u in n)n.hasOwnProperty(u)&&n[u]!==o&&(n[u]=o,t[e]=[u,0,s],e++)}return t},e.prototype.getInitialData=function(t,e){for(var n=this.getReferringComponents("singleAxis",ne).models[0].get("type"),i=Ie(t.data,(function(t){return void 0!==t[2]})),r=this.fixData(i||[]),a=[],o=this.nameMap=re(),s=0,l=0;l<r.length;++l)a.push(r[l][2]),o.get(r[l][2])||(o.set(r[l][2],s),s++);var u=ce(r,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:ve(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,c=new he(u,this);return c.initData(r),c},e.prototype.getLayerSeries=function(){for(var t=this.getData(),e=t.count(),n=[],i=0;i<e;++i)n[i]=i;var r=t.mapDimension("single"),a=ja(n,(function(e){return t.get("name",e)})),o=[];return a.buckets.each((function(e,n){e.sort((function(e,n){return t.get(r,e)-t.get(r,n)})),o.push({name:n,indices:e})})),o},e.prototype.getAxisTooltipData=function(t,e,n){pe(t)||(t=t?[t]:[]);for(var i,r=this.getData(),a=this.getLayerSeries(),o=[],s=a.length,l=0;l<s;++l){for(var u=Number.MAX_VALUE,c=-1,d=a[l].indices.length,h=0;h<d;++h){var p=r.get(t[0],a[l].indices[h]),f=Math.abs(p-e);f<=u&&(i=p,u=f,c=a[l].indices[h])}o.push(c)}return{dataIndices:o,nestestValue:i}},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=i.getName(t),a=i.get(i.mapDimension("value"),t);return br("nameValue",{name:r,value:a})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(Qn);function Vb(t,e){t.eachSeriesByType("themeRiver",(function(t){var e=t.getData(),n=t.coordinateSystem,i={},r=n.getRect();i.rect=r;var a=t.get("boundaryGap"),o=n.getAxis();(i.boundaryGap=a,"horizontal"===o.orient)?(a[0]=Ke(a[0],r.height),a[1]=Ke(a[1],r.height),Fb(e,t,r.height-a[0]-a[1])):(a[0]=Ke(a[0],r.width),a[1]=Ke(a[1],r.width),Fb(e,t,r.width-a[0]-a[1]));e.setLayout("layoutInfo",i)}))}function Fb(t,e,n){if(t.count())for(var i,r=e.coordinateSystem,a=e.getLayerSeries(),o=t.mapDimension("single"),s=t.mapDimension("value"),l=me(a,(function(e){return me(e.indices,(function(e){var n=r.dataToPoint(t.get(o,e));return n[1]=t.get(s,e),n}))})),u=function(t){for(var e=t.length,n=t[0].length,i=[],r=[],a=0,o=0;o<n;++o){for(var s=0,l=0;l<e;++l)s+=t[l][o][1];s>a&&(a=s),i.push(s)}for(var u=0;u<n;++u)r[u]=(a-i[u])/2;a=0;for(var c=0;c<n;++c){var d=i[c]+r[c];d>a&&(a=d)}return{y0:r,max:a}}(l),c=u.y0,d=n/u.max,h=a.length,p=a[0].indices.length,f=0;f<p;++f){i=c[f]*d,t.setItemLayout(a[0].indices[f],{layerIndex:0,x:l[0][f][0],y0:i,y:l[0][f][1]*d});for(var g=1;g<h;++g)i+=l[g-1][f][1]*d,t.setItemLayout(a[g].indices[f],{layerIndex:g,x:l[g][f][0],y0:i,y:l[g][f][1]*d})}}var Bb=function(t){function e(e,n,i,r){var a=t.call(this)||this;a.z2=2,a.textConfig={inside:!0},Je(a).seriesIndex=n.seriesIndex;var o=new Mi({z2:4,silent:e.getModel().get(["label","silent"])});return a.setTextContent(o),a.updateData(!0,e,n,i,r),a}return _e(e,t),e.prototype.updateData=function(t,e,n,i,r){this.node=e,e.piece=this,n=n||this._seriesModel,i=i||this._ecModel;var a=this;Je(a).dataIndex=e.dataIndex;var o=e.getModel(),s=o.getModel("emphasis"),l=e.getLayout(),u=xn({},l);u.label=null;var c=e.getVisual("style");c.lineJoin="bevel";var d=e.getVisual("decal");d&&(c.decal=Gr(d,r));var h=vh(o.getModel("itemStyle"),u,!0);xn(u,h),ie(Ge,(function(t){var e=a.ensureState(t),n=o.getModel([t,"itemStyle"]);e.style=n.getItemStyle();var i=vh(n,u);i&&(e.shape=i)})),t?(a.setShape(u),a.shape.r=l.r0,on(a,{shape:{r:l.r}},n,e.dataIndex)):(ln(a,{shape:u},n),ii(a)),a.useStyle(c),this._updateLabel(n);var p=o.getShallow("cursor");p&&a.attr("cursor",p),this._seriesModel=n||this._seriesModel,this._ecModel=i||this._ecModel;var f=s.get("focus"),g="relative"===f?Qr(e.getAncestorsIndices(),e.getDescendantIndices()):"ancestor"===f?e.getAncestorsIndices():"descendant"===f?e.getDescendantIndices():f;si(this,g,s.get("blurScope"),s.get("disabled"))},e.prototype._updateLabel=function(t){var e=this,n=this.node.getModel(),i=n.getModel("label"),r=this.node.getLayout(),a=r.endAngle-r.startAngle,o=(r.startAngle+r.endAngle)/2,s=Math.cos(o),l=Math.sin(o),u=this,c=u.getTextContent(),d=this.node.dataIndex,h=i.get("minAngle")/180*Math.PI,p=i.get("show")&&!(null!=h&&Math.abs(a)<h);function f(t,e){var n=t.get(e);return null==n?i.get(e):n}c.ignore=!p,ie(Ve,(function(i){var h="normal"===i?n.getModel("label"):n.getModel([i,"label"]),p="normal"===i,g=p?c:c.ensureState(i),m=t.getFormattedLabel(d,i);p&&(m=m||e.node.name),g.style=sa(h,{},null,"normal"!==i,!0),m&&(g.style.text=m);var v=h.get("show");null==v||p||(g.ignore=!v);var y,_=f(h,"position"),x=p?u:u.states[i],b=x.style.fill;x.textConfig={outsideFill:"inherit"===h.get("color")?b:null,inside:"outside"!==_};var w=f(h,"distance")||0,M=f(h,"align"),S=f(h,"rotate"),C=.5*Math.PI,k=1.5*Math.PI,I=qe("tangential"===S?Math.PI/2-o:o),D=I>C&&!to(I-C)&&I<k;"outside"===_?(y=r.r+w,M=D?"right":"left"):M&&"center"!==M?"left"===M?(y=r.r0+w,M=D?"right":"left"):"right"===M&&(y=r.r-w,M=D?"left":"right"):(y=a===2*Math.PI&&0===r.r0?0:(r.r+r.r0)/2,M="center"),g.style.align=M,g.style.verticalAlign=f(h,"verticalAlign")||"middle",g.x=y*s+r.cx,g.y=y*l+r.cy;var T=0;"radial"===S?T=qe(-o)+(D?Math.PI:0):"tangential"===S?T=qe(Math.PI/2-o)+(D?Math.PI:0):Mn(S)&&(T=S*Math.PI/180),g.rotation=qe(T)})),c.dirtyStyle()},e}(mi);var Hb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n,i){var r=this;this.seriesModel=t,this.api=n,this.ecModel=e;var a=t.getData(),o=a.tree.root,s=t.getViewRoot(),l=this.group,u=t.get("renderLabelForZeroData"),c=[];s.eachNode((function(t){c.push(t)}));var d,h,p=this._oldChildren||[];!function(i,r){if(0===i.length&&0===r.length)return;function s(t){return t.getId()}function c(s,c){!function(i,r){u||!i||i.getValue()||(i=null);if(i!==o&&r!==o)if(r&&r.piece)i?(r.piece.updateData(!1,i,t,e,n),a.setItemGraphicEl(i.dataIndex,r.piece)):function(t){if(!t)return;t.piece&&(l.remove(t.piece),t.piece=null)}(r);else if(i){var s=new Bb(i,t,e,n);l.add(s),a.setItemGraphicEl(i.dataIndex,s)}}(null==s?null:i[s],null==c?null:r[c])}new ua(r,i,s,s).add(c).update(c).remove(le(c,null)).execute()}(c,p),d=o,(h=s).depth>0?(r.virtualPiece?r.virtualPiece.updateData(!1,d,t,e,n):(r.virtualPiece=new Bb(d,t,e,n),l.add(r.virtualPiece)),h.piece.off("click"),r.virtualPiece.on("click",(function(t){r._rootToNode(h.parentNode)}))):r.virtualPiece&&(l.remove(r.virtualPiece),r.virtualPiece=null),this._initEvents(),this._oldChildren=c},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",(function(e){var n=!1;t.seriesModel.getViewRoot().eachNode((function(i){if(!n&&i.piece&&i.piece===e.target){var r=i.getModel().get("nodeClick");if("rootToNode"===r)t._rootToNode(i);else if("link"===r){var a=i.getModel(),o=a.get("link");if(o){var s=a.get("target",!0)||"_blank";ca(o,s)}}n=!0}}))}))},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,r=t[1]-n.cy,a=Math.sqrt(i*i+r*r);return a<=n.r&&a>=n.r0}},e.type="sunburst",e}(bi);function Gb(t){var e=0;ie(t.children,(function(t){Gb(t);var n=t.value;pe(n)&&(n=n[0]),e+=n}));var n=t.value;pe(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),pe(t.value)?t.value[0]=n:t.value=n}var jb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return _e(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};Gb(n);var i=this._levelModels=me(t.levels||[],(function(t){return new wr(t,this,e)}),this),r=tm.createTree(n,this,(function(t){t.wrapMethod("getItemModel",(function(t,e){var n=r.getNodeByDataIndex(e),a=i[n.depth];return a&&(t.parentModel=a),t}))}));return r.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=rm(i,this),n},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){cm(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Qn),Wb=Math.PI/180;function Ub(t,e,n){e.eachSeriesByType(t,(function(t){var e=t.get("center"),i=t.get("radius");pe(i)||(i=[0,i]),pe(e)||(e=[e,e]);var r=n.getWidth(),a=n.getHeight(),o=Math.min(r,a),s=Ke(e[0],r),l=Ke(e[1],a),u=Ke(i[0],o/2),c=Ke(i[1],o/2),d=-t.get("startAngle")*Wb,h=t.get("minAngle")*Wb,p=t.getData().tree.root,f=t.getViewRoot(),g=f.depth,m=t.get("sort");null!=m&&Yb(f,m);var v=0;ie(f.children,(function(t){!isNaN(t.getValue())&&v++}));var y=f.getValue(),_=Math.PI/(y||v)*2,x=f.depth>0,b=f.height-(x?-1:1),w=(c-u)/(b||1),M=t.get("clockwise"),S=t.get("stillShowZeroSum"),C=M?1:-1,k=function(e,n){if(e){var i=n;if(e!==p){var r=e.getValue(),a=0===y&&S?_:r*_;a<h&&(a=h),i=n+C*a;var c=e.depth-g-(x?-1:1),d=u+w*c,f=u+w*(c+1),m=t.getLevelModel(e);if(m){var v=m.get("r0",!0),b=m.get("r",!0),I=m.get("radius",!0);null!=I&&(v=I[0],b=I[1]),null!=v&&(d=Ke(v,o/2)),null!=b&&(f=Ke(b,o/2))}e.setLayout({angle:a,startAngle:n,endAngle:i,clockwise:M,cx:s,cy:l,r0:d,r:f})}if(e.children&&e.children.length){var D=0;ie(e.children,(function(t){D+=k(t,n+D)}))}return i-n}};if(x){var I=u,D=u+w,T=2*Math.PI;p.setLayout({angle:T,startAngle:d,endAngle:d+T,clockwise:M,cx:s,cy:l,r0:I,r:D})}k(f,d)}))}function Yb(t,e){var n=t.children||[];t.children=function(t,e){if(se(e)){var n=me(t,(function(t,e){var n=t.getValue();return{params:{depth:t.depth,height:t.height,dataIndex:t.dataIndex,getValue:function(){return n}},index:e}}));return n.sort((function(t,n){return e(t.params,n.params)})),me(n,(function(e){return t[e.index]}))}var i="asc"===e;return t.sort((function(t,e){var n=(t.getValue()-e.getValue())*(i?1:-1);return 0===n?(t.dataIndex-e.dataIndex)*(i?-1:1):n}))}(n,e),n.length&&ie(t.children,(function(t){Yb(t,e)}))}function $b(t){var e={};t.eachSeriesByType("sunburst",(function(t){var n=t.getData(),i=n.tree;i.eachNode((function(r){var a=r.getModel().getModel("itemStyle").getItemStyle();a.fill||(a.fill=function(t,n,i){for(var r=t;r&&r.depth>1;)r=r.parentNode;var a=n.getColorFromPalette(r.name||r.dataIndex+"",e);return t.depth>1&&vn(a)&&(a=eo(a,(t.depth-1)/(i-1)*.5)),a}(r,t,i.root.height));var o=n.ensureUniqueItemVisual(r.dataIndex,"style");xn(o,a)}))}))}var qb={color:"fill",borderColor:"stroke"},Xb={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Zb=De(),Jb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,e){return hu(null,this)},e.prototype.getDataParams=function(e,n,i){var r=t.prototype.getDataParams.call(this,e,n);return i&&(r.info=Zb(i).info),r},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(Qn);function Kb(t,e){return e=e||[0,0],me(["x","y"],(function(n,i){var r=this.getAxis(n),a=e[i],o=t[i]/2;return"category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(a-o)-r.dataToCoord(a+o))}),this)}function Qb(t,e){return e=e||[0,0],me([0,1],(function(n){var i=e[n],r=t[n]/2,a=[],o=[];return a[n]=i-r,o[n]=i+r,a[1-n]=o[1-n]=e[1-n],Math.abs(this.dataToPoint(a)[n]-this.dataToPoint(o)[n])}),this)}function tw(t,e){var n=this.getAxis(),i=e instanceof Array?e[0]:e,r=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-r)-n.dataToCoord(i+r))}function ew(t,e){return e=e||[0,0],me(["Radius","Angle"],(function(n,i){var r=this["get"+n+"Axis"](),a=e[i],o=t[i]/2,s="category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(a-o)-r.dataToCoord(a+o));return"Angle"===n&&(s=s*Math.PI/180),s}),this)}function nw(t,e,n,i){return t&&(t.legacy||!1!==t.legacy&&!n&&!i&&"tspan"!==e&&("text"===e||Ar(t,"text")))}function iw(t,e,n){var i,r,a,o=t;if("text"===e)a=o;else{a={},Ar(o,"text")&&(a.text=o.text),Ar(o,"rich")&&(a.rich=o.rich),Ar(o,"textFill")&&(a.fill=o.textFill),Ar(o,"textStroke")&&(a.stroke=o.textStroke),Ar(o,"fontFamily")&&(a.fontFamily=o.fontFamily),Ar(o,"fontSize")&&(a.fontSize=o.fontSize),Ar(o,"fontStyle")&&(a.fontStyle=o.fontStyle),Ar(o,"fontWeight")&&(a.fontWeight=o.fontWeight),r={type:"text",style:a,silent:!0},i={};var s=Ar(o,"textPosition");n?i.position=s?o.textPosition:"inside":s&&(i.position=o.textPosition),Ar(o,"textPosition")&&(i.position=o.textPosition),Ar(o,"textOffset")&&(i.offset=o.textOffset),Ar(o,"textRotation")&&(i.rotation=o.textRotation),Ar(o,"textDistance")&&(i.distance=o.textDistance)}return rw(a,t),ie(a.rich,(function(t){rw(t,t)})),{textConfig:i,textContent:r}}function rw(t,e){e&&(e.font=e.textFont||e.font,Ar(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),Ar(e,"textAlign")&&(t.align=e.textAlign),Ar(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),Ar(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),Ar(e,"textWidth")&&(t.width=e.textWidth),Ar(e,"textHeight")&&(t.height=e.textHeight),Ar(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),Ar(e,"textPadding")&&(t.padding=e.textPadding),Ar(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),Ar(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),Ar(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),Ar(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),Ar(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),Ar(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),Ar(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}function aw(t,e,n){var i=t;i.textPosition=i.textPosition||n.position||"inside",null!=n.offset&&(i.textOffset=n.offset),null!=n.rotation&&(i.textRotation=n.rotation),null!=n.distance&&(i.textDistance=n.distance);var r=i.textPosition.indexOf("inside")>=0,a=t.fill||"#000";ow(i,e);var o=null==i.textFill;return r?o&&(i.textFill=n.insideFill||"#fff",!i.textStroke&&n.insideStroke&&(i.textStroke=n.insideStroke),!i.textStroke&&(i.textStroke=a),null==i.textStrokeWidth&&(i.textStrokeWidth=2)):(o&&(i.textFill=t.fill||n.outsideFill||"#000"),!i.textStroke&&n.outsideStroke&&(i.textStroke=n.outsideStroke)),i.text=e.text,i.rich=e.rich,ie(e.rich,(function(t){ow(t,t)})),i}function ow(t,e){e&&(Ar(e,"fill")&&(t.textFill=e.fill),Ar(e,"stroke")&&(t.textStroke=e.fill),Ar(e,"lineWidth")&&(t.textStrokeWidth=e.lineWidth),Ar(e,"font")&&(t.font=e.font),Ar(e,"fontStyle")&&(t.fontStyle=e.fontStyle),Ar(e,"fontWeight")&&(t.fontWeight=e.fontWeight),Ar(e,"fontSize")&&(t.fontSize=e.fontSize),Ar(e,"fontFamily")&&(t.fontFamily=e.fontFamily),Ar(e,"align")&&(t.textAlign=e.align),Ar(e,"verticalAlign")&&(t.textVerticalAlign=e.verticalAlign),Ar(e,"lineHeight")&&(t.textLineHeight=e.lineHeight),Ar(e,"width")&&(t.textWidth=e.width),Ar(e,"height")&&(t.textHeight=e.height),Ar(e,"backgroundColor")&&(t.textBackgroundColor=e.backgroundColor),Ar(e,"padding")&&(t.textPadding=e.padding),Ar(e,"borderColor")&&(t.textBorderColor=e.borderColor),Ar(e,"borderWidth")&&(t.textBorderWidth=e.borderWidth),Ar(e,"borderRadius")&&(t.textBorderRadius=e.borderRadius),Ar(e,"shadowColor")&&(t.textBoxShadowColor=e.shadowColor),Ar(e,"shadowBlur")&&(t.textBoxShadowBlur=e.shadowBlur),Ar(e,"shadowOffsetX")&&(t.textBoxShadowOffsetX=e.shadowOffsetX),Ar(e,"shadowOffsetY")&&(t.textBoxShadowOffsetY=e.shadowOffsetY),Ar(e,"textShadowColor")&&(t.textShadowColor=e.textShadowColor),Ar(e,"textShadowBlur")&&(t.textShadowBlur=e.textShadowBlur),Ar(e,"textShadowOffsetX")&&(t.textShadowOffsetX=e.textShadowOffsetX),Ar(e,"textShadowOffsetY")&&(t.textShadowOffsetY=e.textShadowOffsetY))}var sw={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},lw=Ze(sw);Zr(no,(function(t,e){return t[e]=1,t}),{}),no.join(", ");var uw=["","style","shape","extra"],cw=De();function dw(t,e,n,i,r){var a=t+"Animation",o=ao(t,i,r)||{},s=cw(e).userDuring;return o.duration>0&&(o.during=s?vi(yw,{el:e,userDuring:s}):null,o.setToFinal=!0,o.scope=t),xn(o,n[a]),o}function hw(t,e,n,i){var r=(i=i||{}).dataIndex,a=i.isInit,o=i.clearStyle,s=n.isAnimationEnabled(),l=cw(t),u=e.style;l.userDuring=e.during;var c={},d={};if(function(t,e,n){for(var i=0;i<lw.length;i++){var r=lw[i],a=sw[r],o=e[r];o&&(n[a[0]]=o[0],n[a[1]]=o[1])}for(i=0;i<no.length;i++){var s=no[i];null!=e[s]&&(n[s]=e[s])}}(0,e,d),xw("shape",e,d),xw("extra",e,d),!a&&s&&(function(t,e,n){for(var i=e.transition,r=gw(i)?no:ra(i||[]),a=0;a<r.length;a++){var o=r[a];if("style"!==o&&"shape"!==o&&"extra"!==o){var s=t[o];n[o]=s}}}(t,e,c),_w("shape",t,e,c),_w("extra",t,e,c),function(t,e,n,i){if(!n)return;var r,a=t.style;if(a){var o=n.transition,s=e.transition;if(o&&!gw(o)){var l=ra(o);!r&&(r=i.style={});for(var u=0;u<l.length;u++){var c=a[f=l[u]];r[f]=c}}else if(t.getAnimationStyleProps&&(gw(s)||gw(o)||sn(s,"style")>=0)){var d=t.getAnimationStyleProps(),h=d?d.style:null;if(h){!r&&(r=i.style={});var p=Ze(n);for(u=0;u<p.length;u++){var f;if(h[f=p[u]]){c=a[f];r[f]=c}}}}}}(t,e,u,c)),d.style=u,function(t,e,n){var i=e.style;if(!t.isGroup&&i){if(n){t.useStyle({});for(var r=t.animators,a=0;a<r.length;a++){var o=r[a];"style"===o.targetName&&o.changeTarget(t.style)}}t.setStyle(i)}e&&(e.style=null,e&&t.attr(e),e.style=i)}(t,d,o),function(t,e){Ar(e,"silent")&&(t.silent=e.silent),Ar(e,"ignore")&&(t.ignore=e.ignore),t instanceof Br&&Ar(e,"invisible")&&(t.invisible=e.invisible);t instanceof je&&Ar(e,"autoBatch")&&(t.autoBatch=e.autoBatch)}(t,e),s)if(a){var h={};ie(uw,(function(t){var n=t?e[t]:e;n&&n.enterFrom&&(t&&(h[t]=h[t]||{}),xn(t?h[t]:h,n.enterFrom))}));var p=dw("enter",t,e,n,r);p.duration>0&&t.animateFrom(h,p)}else!function(t,e,n,i,r){if(r){var a=dw("update",t,e,i,n);a.duration>0&&t.animateFrom(r,a)}}(t,e,r||0,n,c);pw(t,e),u?t.dirty():t.markRedraw()}function pw(t,e){for(var n=cw(t).leaveToProps,i=0;i<uw.length;i++){var r=uw[i],a=r?e[r]:e;a&&a.leaveTo&&(n||(n=cw(t).leaveToProps={}),r&&(n[r]=n[r]||{}),xn(r?n[r]:n,a.leaveTo))}}function fw(t,e,n,i){if(t){var r=t.parent,a=cw(t).leaveToProps;if(a){var o=dw("update",t,e,n,0);o.done=function(){r.remove(t),i&&i()},t.animateTo(a,o)}else r.remove(t),i&&i()}}function gw(t){return"all"===t}var mw={},vw={setTransform:function(t,e){return mw.el[t]=e,this},getTransform:function(t){return mw.el[t]},setShape:function(t,e){var n=mw.el;return(n.shape||(n.shape={}))[t]=e,n.dirtyShape&&n.dirtyShape(),this},getShape:function(t){var e=mw.el.shape;if(e)return e[t]},setStyle:function(t,e){var n=mw.el,i=n.style;return i&&(i[t]=e,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(t){var e=mw.el.style;if(e)return e[t]},setExtra:function(t,e){return(mw.el.extra||(mw.el.extra={}))[t]=e,this},getExtra:function(t){var e=mw.el.extra;if(e)return e[t]}};function yw(){var t=this,e=t.el;if(e){var n=cw(e).userDuring,i=t.userDuring;n===i?(mw.el=e,i(vw)):t.el=t.userDuring=null}}function _w(t,e,n,i){var r=n[t];if(r){var a,o=e[t];if(o){var s=n.transition,l=r.transition;if(l)if(!a&&(a=i[t]={}),gw(l))xn(a,o);else for(var u=ra(l),c=0;c<u.length;c++){var d=o[p=u[c]];a[p]=d}else if(gw(s)||sn(s,t)>=0){!a&&(a=i[t]={});var h=Ze(o);for(c=0;c<h.length;c++){var p;d=o[p=h[c]];bw(r[p],d)&&(a[p]=d)}}}}}function xw(t,e,n){var i=e[t];if(i)for(var r=n[t]={},a=Ze(i),o=0;o<a.length;o++){var s=a[o];r[s]=io(i[s])}}function bw(t,e){return ro(t)?t!==e:null!=t&&isFinite(t)}var ww=De(),Mw=["percent","easing","shape","style","extra"];function Sw(t){t.stopAnimation("keyframe"),t.attr(ww(t))}function Cw(t,e,n){if(n.isAnimationEnabled()&&e)if(pe(e))ie(e,(function(e){Cw(t,e,n)}));else{var i=e.keyframes,r=e.duration;if(n&&null==r){var a=ao("enter",n,0);r=a&&a.duration}if(i&&r){var o=ww(t);ie(uw,(function(n){var a;n&&!t[n]||(i.sort((function(t,e){return t.percent-e.percent})),ie(i,(function(i){var s=t.animators,l=n?i[n]:i;if(l){var u=Ze(l);if(n||(u=Ie(u,(function(t){return sn(Mw,t)<0}))),u.length){a||((a=t.animate(n,e.loop,!0)).scope="keyframe");for(var c=0;c<s.length;c++)s[c]!==a&&s[c].targetName===a.targetName&&s[c].stopTracks(u);n&&(o[n]=o[n]||{});var d=n?o[n]:o;ie(u,(function(e){d[e]=((n?t[n]:t)||{})[e]})),a.whenWithKeys(r*i.percent,l,u,i.easing)}}})),a&&a.delay(e.delay||0).duration(r).start(e.easing))}))}}}var kw="normal",Iw=["normal","emphasis","blur","select"],Dw={normal:["itemStyle"],emphasis:["emphasis","itemStyle"],blur:["blur","itemStyle"],select:["select","itemStyle"]},Tw={normal:["label"],emphasis:["emphasis","label"],blur:["blur","label"],select:["select","label"]},Aw=["x","y"],Ew={normal:{},emphasis:{},blur:{},select:{}},Lw={cartesian2d:function(t){var e=t.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:vi(Kb,t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:vi(Qb,t)}}},single:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:vi(tw,t)}}},polar:function(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),i=e.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:i[1],r0:i[0]},api:{coord:function(i){var r=e.dataToRadius(i[0]),a=n.dataToAngle(i[1]),o=t.coordToPoint([r,a]);return o.push(r,a*Math.PI/180),o},size:vi(ew,t)}}},calendar:function(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)}}}}};function Pw(t){return t instanceof je}function Nw(t){return t instanceof Br}var Ow=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n,i){this._progressiveEls=null;var r=this._data,a=t.getData(),o=this.group,s=Bw(t,a,e,n);r||o.removeAll(),a.diff(r).add((function(e){Gw(n,null,e,s(e,i),t,o,a)})).remove((function(e){var n=r.getItemGraphicEl(e);n&&fw(n,Zb(n).option,t)})).update((function(e,l){var u=r.getItemGraphicEl(l);Gw(n,u,e,s(e,i),t,o,a)})).execute();var l=t.get("clip",!0)?Xd(t.coordinateSystem,!1,t):null;l?o.setClipPath(l):o.removeClipPath(),this._data=a},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,e,n,i,r){var a=e.getData(),o=Bw(e,a,n,i),s=this._progressiveEls=[];function l(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}for(var u=t.start;u<t.end;u++){var c=Gw(null,null,u,o(u,r),e,this.group,a);c&&(c.traverse(l),s.push(c))}},e.prototype.eachRendered=function(t){ci(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,e,n,i){var r=e.element;if(null==r||n.name===r)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===r)return!0;return!1},e.type="custom",e}(bi);function zw(t){var e,n=t.type;if("path"===n){var i=t.shape,r=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,a=Kw(i);e=uo(a,null,r,i.layout||"center"),Zb(e).customPathData=a}else if("image"===n)e=new dn({}),Zb(e).customImagePath=t.style.image;else if("text"===n)e=new Mi({});else if("group"===n)e=new Jn;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');var o=co(n);if(!o){Ya("")}e=new o}return Zb(e).customGraphicType=n,e.name=t.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function Rw(t,e,n,i,r,a,o){Sw(e);var s=r&&r.normal.cfg;s&&e.setTextConfig(s),i&&null==i.transition&&(i.transition=Aw);var l=i&&i.style;if(l){if("text"===e.type){var u=l;Ar(u,"textFill")&&(u.fill=u.textFill),Ar(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,d=Pw(e)?l.decal:null;t&&d&&(d.dirty=!0,c=Gr(d,t)),l.__decalPattern=c}Nw(e)&&(l&&(c=l.__decalPattern)&&(l.decal=c));hw(e,i,a,{dataIndex:n,isInit:o,clearStyle:!0}),Cw(e,i.keyframeAnimation,a)}function Vw(t,e,n,i,r){var a=e.isGroup?null:e,o=r&&r[t].cfg;if(a){var s=a.ensureState(t);if(!1===i){var l=a.getState(t);l&&(l.style=null)}else s.style=i||null;o&&(s.textConfig=o),Hr(a)}}function Fw(t,e,n){var i="normal"===n,r=i?e:Yw(e,n),a=r?r.z2:null;null!=a&&((i?t:t.ensureState(n)).z2=a||0)}function Bw(t,e,n,i){var r=t.get("renderItem"),a=t.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):Lw[a.type](a));for(var s,l,u=He({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(t,n){return null==n&&(n=s),e.getStore().get(e.getDimensionIndex(t||0),n)},style:function(n,i){null==i&&(i=s);var r=e.getItemVisual(i,"style"),a=r&&r.fill,o=r&&r.opacity,l=y(i,"normal").getItemStyle();null!=a&&(l.fill=a),null!=o&&(l.opacity=o);var u={inheritColor:vn(a)?a:"#000"},c=_(i,"normal"),d=sa(c,null,u,!1,!0);d.text=c.getShallow("show")?Fe(t.getFormattedLabel(i,"normal"),Td(e,i)):null;var h=oo(c,u,!1);return b(n,l),l=aw(l,d,h),n&&x(l,n),l.legacy=!0,l},ordinalRawValue:function(t,n){null==n&&(n=s),t=t||0;var i=e.getDimensionInfo(t);if(!i){var r=e.getDimensionIndex(t);return r>=0?e.getStore().get(r,n):void 0}var a=e.get(i.name,n),o=i&&i.ordinalMeta;return o?o.categories[a]:a},styleEmphasis:function(n,i){null==i&&(i=s);var r=y(i,"emphasis").getItemStyle(),a=_(i,"emphasis"),o=sa(a,null,null,!0,!0);o.text=a.getShallow("show")?Fi(t.getFormattedLabel(i,"emphasis"),t.getFormattedLabel(i,"normal"),Td(e,i)):null;var l=oo(a,null,!0);return b(n,r),r=aw(r,o,l),n&&x(r,n),r.legacy=!0,r},visual:function(t,n){if(null==n&&(n=s),Ar(qb,t)){var i=e.getItemVisual(n,"style");return i?i[qb[t]]:null}if(Ar(Xb,t))return e.getItemVisual(n,t)},barLayout:function(t){if("cartesian2d"===a.type){var e=a.getBaseAxis();return so(He({axis:e},t))}},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(t){return lo(t,n)}},o.api||{}),c={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:Hw(t.getData())},d={},h={},p={},f={},g=0;g<Iw.length;g++){var m=Iw[g];p[m]=t.getModel(Dw[m]),f[m]=t.getModel(Tw[m])}function v(t){return t===s?l||(l=e.getItemModel(t)):e.getItemModel(t)}function y(t,n){return e.hasItemOption?t===s?d[n]||(d[n]=v(t).getModel(Dw[n])):v(t).getModel(Dw[n]):p[n]}function _(t,n){return e.hasItemOption?t===s?h[n]||(h[n]=v(t).getModel(Tw[n])):v(t).getModel(Tw[n]):f[n]}return function(t,n){return s=t,l=null,d={},h={},r&&r(He({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:n?n.type:null},c),u)};function x(t,e){for(var n in e)Ar(e,n)&&(t[n]=e[n])}function b(t,e){t&&(t.textFill&&(e.textFill=t.textFill),t.textPosition&&(e.textPosition=t.textPosition))}}function Hw(t){var e={};return ie(t.dimensions,(function(n){var i=t.getDimensionInfo(n);if(!i.isExtraCoord){var r=i.coordDim;(e[r]=e[r]||[])[i.coordDimIndex]=t.getDimensionIndex(n)}})),e}function Gw(t,e,n,i,r,a,o){if(i){var s=jw(t,e,n,i,r,a);return s&&o.setItemGraphicEl(n,s),s&&si(s,i.focus,i.blurScope,i.emphasisDisabled),s}a.remove(e)}function jw(t,e,n,i,r,a){var o=-1,s=e;e&&Ww(e,i,r)&&(o=sn(a.childrenRef(),e),e=null);var l,u,c=!e,d=e;d?d.clearStates():(d=zw(i),s&&(l=s,(u=d).copyTransform(l),Nw(u)&&Nw(l)&&(u.setStyle(l.style),u.z=l.z,u.z2=l.z2,u.zlevel=l.zlevel,u.invisible=l.invisible,u.ignore=l.ignore,Pw(u)&&Pw(l)&&u.setShape(l.shape)))),!1===i.morph?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),Ew.normal.cfg=Ew.normal.conOpt=Ew.emphasis.cfg=Ew.emphasis.conOpt=Ew.blur.cfg=Ew.blur.conOpt=Ew.select.cfg=Ew.select.conOpt=null,Ew.isLegacy=!1,function(t,e,n,i,r,a){if(t.isGroup)return;Uw(n,null,a),Uw(n,"emphasis",a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,u=a.select.conOpt;if(null!=o||null!=s||null!=u||null!=l){var c=t.getTextContent();if(!1===o)c&&t.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},c?c.clearStates():(c=zw(o),t.setTextContent(c)),Rw(null,c,e,o,null,i,r);for(var d=o&&o.style,h=0;h<Iw.length;h++){var p=Iw[h];if(p!==kw){var f=a[p].conOpt;Vw(p,c,0,$w(o,f,p),null)}}d?c.dirty():c.markRedraw()}}}(d,n,i,r,c,Ew),function(t,e,n,i,r){var a=n.clipPath;if(!1===a)t&&t.getClipPath()&&t.removeClipPath();else if(a){var o=t.getClipPath();o&&Ww(o,a,i)&&(o=null),o||(o=zw(a),t.setClipPath(o)),Rw(null,o,e,a,null,i,r)}}(d,n,i,r,c),Rw(t,d,n,i,Ew,r,c),Ar(i,"info")&&(Zb(d).info=i.info);for(var h=0;h<Iw.length;h++){var p=Iw[h];if(p!==kw){var f=Yw(i,p);Vw(p,d,0,$w(i,f,p),Ew)}}return function(t,e,n){if(!t.isGroup){var i=t,r=n.currentZ,a=n.currentZLevel;i.z=r,i.zlevel=a;var o=e.z2;null!=o&&(i.z2=o||0);for(var s=0;s<Iw.length;s++)Fw(i,e,Iw[s])}}(d,i,r),"group"===i.type&&function(t,e,n,i,r){var a=i.children,o=a?a.length:0,s=i.$mergeChildren,l="byName"===s||i.diffChildrenByName,u=!1===s;if(!o&&!l&&!u)return;if(l)return c={api:t,oldChildren:e.children()||[],newChildren:a||[],dataIndex:n,seriesModel:r,group:e},void new ua(c.oldChildren,c.newChildren,Xw,Xw,c).add(Zw).update(Zw).remove(Jw).execute();var c;u&&e.removeAll();for(var d=0;d<o;d++){var h=a[d],p=e.childAt(d);h?(null==h.ignore&&(h.ignore=!1),jw(t,p,n,h,r,e)):p.ignore=!0}for(var f=e.childCount()-1;f>=d;f--){var g=e.childAt(f);qw(e,g,r)}}(t,d,n,i,r),o>=0?a.replaceAt(d,o):a.add(d),d}function Ww(t,e,n){var i,r=Zb(t),a=e.type,o=e.shape,s=e.style;return n.isUniversalTransitionEnabled()||null!=a&&a!==r.customGraphicType||"path"===a&&((i=o)&&(Ar(i,"pathData")||Ar(i,"d")))&&Kw(o)!==r.customPathData||"image"===a&&Ar(s,"image")&&s.image!==r.customImagePath}function Uw(t,e,n){var i=e?Yw(t,e):t,r=e?$w(t,i,"emphasis"):t.style,a=t.type,o=i?i.textConfig:null,s=t.textContent,l=s?e?Yw(s,e):s:null;if(r&&(n.isLegacy||nw(r,a,!!o,!!l))){n.isLegacy=!0;var u=iw(r,a,!e);!o&&u.textConfig&&(o=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!e&&l){var c=l;!c.type&&(c.type="text")}var d=e?n[e]:n.normal;d.cfg=o,d.conOpt=l}function Yw(t,e){return e?t?t[e]:null:t}function $w(t,e,n){var i=e&&e.style;return null==i&&"emphasis"===n&&t&&(i=t.styleEmphasis),i}function qw(t,e,n){e&&fw(e,Zb(t).option,n)}function Xw(t,e){var n=t&&t.name;return null!=n?n:"e\0\0"+e}function Zw(t,e){var n=this.context,i=null!=t?n.newChildren[t]:null,r=null!=e?n.oldChildren[e]:null;jw(n.api,r,n.dataIndex,i,n.seriesModel,n.group)}function Jw(t){var e=this.context,n=e.oldChildren[t];n&&fw(n,Zb(n).option,e.seriesModel)}function Kw(t){return t&&(t.pathData||t.d)}var Qw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.makeElOption=function(t,e,n,i,r){var a=n.axis;"angle"===a.dim&&(this.animationThreshold=Math.PI/18);var o=a.polar,s=o.getOtherAxis(a).getExtent(),l=a.dataToCoord(e),u=i.get("type");if(u&&"none"!==u){var c=po(i),d=tM[u](a,o,l,s);d.style=c,t.graphicKey=d.type,t.pointer=d}var h=function(t,e,n,i,r){var a=e.axis,o=a.dataToCoord(t),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,u,c,d=i.getRadiusAxis().getExtent();if("radius"===a.dim){var h=Vr();Or(h,h,s),Rr(h,h,[i.cx,i.cy]),l=Va([o,-r],h);var p=e.getModel("axisLabel").get("rotate")||0,f=cr.innerTextLayout(s,p*Math.PI/180,-1);u=f.textAlign,c=f.textVerticalAlign}else{var g=d[1];l=i.coordToPoint([g+r,o]);var m=i.cx,v=i.cy;u=Math.abs(l[0]-m)/g<.3?"center":l[0]>m?"left":"right",c=Math.abs(l[1]-v)/g<.3?"middle":l[1]>v?"top":"bottom"}return{position:l,align:u,verticalAlign:c}}(e,n,0,o,i.get(["label","margin"]));fo(t,n,i,r,h)},e}(go);var tM={line:function(t,e,n,i){return"angle"===t.dim?{type:"Line",shape:mo(e.coordToPoint([i[0],n]),e.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,i){var r=Math.max(1,t.getBandWidth()),a=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:vo(e.cx,e.cy,i[0],i[1],(-n-r/2)*a,(r/2-n)*a)}:{type:"Sector",shape:vo(e.cx,e.cy,n-r/2,n+r/2,0,2*Math.PI)}}},eM=Qw,nM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.findAxisModel=function(t){var e;return this.ecModel.eachComponent(t,(function(t){t.getCoordSysModel()===this&&(e=t)}),this),e},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(Ui),iM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",ne).models[0]},e.type="polarAxis",e}(Ui);Yi(iM,pu);var rM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="angleAxis",e}(iM),aM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="radiusAxis",e}(iM),oM=function(t){function e(e,n){return t.call(this,"radius",e,n)||this}return _e(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e}(Fu);oM.prototype.dataToRadius=Fu.prototype.dataToCoord,oM.prototype.radiusToData=Fu.prototype.coordToData;var sM=oM,lM=De(),uM=function(t){function e(e,n){return t.call(this,"angle",e,n||[0,360])||this}return _e(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,e=t.getLabelModel(),n=t.scale,i=n.getExtent(),r=n.count();if(i[1]-i[0]<1)return 0;var a=i[0],o=t.dataToCoord(a+1)-t.dataToCoord(a),s=Math.abs(o),l=Ee(null==a?"":a+"",e.getFont(),"center","top"),u=Math.max(l.height,7)/s;isNaN(u)&&(u=1/0);var c=Math.max(0,Math.floor(u)),d=lM(t.model),h=d.lastAutoInterval,p=d.lastTickCount;return null!=h&&null!=p&&Math.abs(h-c)<=1&&Math.abs(p-r)<=1&&h>c?c=h:(d.lastTickCount=r,d.lastAutoInterval=c),c},e}(Fu);uM.prototype.dataToAngle=Fu.prototype.dataToCoord,uM.prototype.angleToData=Fu.prototype.coordToData;var cM=uM,dM=["radius","angle"];function hM(t){var e=t.seriesModel,n=t.polarModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}var pM=function(){function t(t){this.dimensions=dM,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new sM,this._angleAxis=new cM,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},t.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},t.prototype.getAxis=function(t){return this["_"+t+"Axis"]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(t){var e=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===t&&e.push(n),i.scale.type===t&&e.push(i),e},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},t.prototype.dataToPoint=function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},t.prototype.pointToData=function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},t.prototype.pointToCoord=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=this.getAngleAxis(),r=i.getExtent(),a=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);i.inverse?a=o-360:o=a+360;var s=Math.sqrt(e*e+n*n);e/=s,n/=s;for(var l=Math.atan2(-n,e)/Math.PI*180,u=l<a?1:-1;l<a||l>o;)l+=360*u;return[s,l]},t.prototype.coordToPoint=function(t){var e=t[0],n=t[1]/180*Math.PI;return[Math.cos(n)*e+this.cx,-Math.sin(n)*e+this.cy]},t.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis().getExtent().slice();e[0]>e[1]&&e.reverse();var n=t.getExtent(),i=Math.PI/180,r=1e-4;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:t.inverse,contain:function(t,e){var n=t-this.cx,i=e-this.cy,a=n*n+i*i,o=this.r,s=this.r0;return o!==s&&a-r<=o*o&&a+r>=s*s}}},t.prototype.convertToPixel=function(t,e,n){return hM(e)===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){return hM(e)===this?this.pointToData(n):null},t}();function fM(t,e){var n=this,i=n.getAngleAxis(),r=n.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),r.scale.setExtent(1/0,-1/0),t.eachSeries((function(t){if(t.coordinateSystem===n){var e=t.getData();ie(ar(e,"radius"),(function(t){r.scale.unionExtentFromData(e,t)})),ie(ar(e,"angle"),(function(t){i.scale.unionExtentFromData(e,t)}))}})),lr(i.scale,i.model),lr(r.scale,r.model),"category"===i.type&&!i.onBand){var a=i.getExtent(),o=360/i.scale.count();i.inverse?a[1]+=o:a[1]-=o,i.setExtent(a[0],a[1])}}function gM(t,e){var n;if(t.type=e.get("type"),t.scale=nr(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),function(t){return"angleAxis"===t.mainType}(e)){t.inverse=t.inverse!==e.get("clockwise");var i=e.get("startAngle"),r=null!==(n=e.get("endAngle"))&&void 0!==n?n:i+(t.inverse?-360:360);t.setExtent(i,r)}e.axis=t,t.model=e}var mM={dimensions:dM,create:function(t,e){var n=[];return t.eachComponent("polar",(function(t,i){var r=new pM(i+"");r.update=fM;var a=r.getRadiusAxis(),o=r.getAngleAxis(),s=t.findAxisModel("radiusAxis"),l=t.findAxisModel("angleAxis");gM(a,s),gM(o,l),function(t,e,n){var i=e.get("center"),r=n.getWidth(),a=n.getHeight();t.cx=Ke(i[0],r),t.cy=Ke(i[1],a);var o=t.getRadiusAxis(),s=Math.min(r,a)/2,l=e.get("radius");null==l?l=[0,"100%"]:pe(l)||(l=[0,l]);var u=[Ke(l[0],s),Ke(l[1],s)];o.inverse?o.setExtent(u[1],u[0]):o.setExtent(u[0],u[1])}(r,t,e),n.push(r),t.coordinateSystem=r,r.model=t})),t.eachSeries((function(t){if("polar"===t.get("coordinateSystem")){var e=t.getReferringComponents("polar",ne).models[0];t.coordinateSystem=e.coordinateSystem}})),n}},vM=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function yM(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],n]),r=t.coordToPoint([e[1],n]);return{x1:i[0],y1:i[1],x2:r[0],y2:r[1]}}function _M(t){return t.getRadiusAxis().inverse?0:1}function xM(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}var bM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return _e(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,r=i.getRadiusAxis().getExtent(),a=n.getTicksCoords(),o=n.getMinorTicksCoords(),s=me(n.getViewLabels(),(function(t){t=Pn(t);var e=n.scale,i="ordinal"===e.type?e.getRawOrdinalNumber(t.tickValue):t.tickValue;return t.coord=n.dataToCoord(i),t}));xM(s),xM(a),ie(vM,(function(e){!t.get([e,"show"])||n.scale.isBlank()&&"axisLine"!==e||wM[e](this.group,t,i,a,o,r,s)}),this)}},e.type="angleAxis",e}(hr),wM={axisLine:function(t,e,n,i,r,a){var o,s=e.getModel(["axisLine","lineStyle"]),l=n.getAngleAxis(),u=Math.PI/180,c=l.getExtent(),d=_M(n),h=d?0:1,p=360===Math.abs(c[1]-c[0])?"Circle":"Arc";(o=0===a[h]?new _r[p]({shape:{cx:n.cx,cy:n.cy,r:a[d],startAngle:-c[0]*u,endAngle:-c[1]*u,clockwise:l.inverse},style:s.getLineStyle(),z2:1,silent:!0}):new Sr({shape:{cx:n.cx,cy:n.cy,r:a[d],r0:a[h]},style:s.getLineStyle(),z2:1,silent:!0})).style.fill=null,t.add(o)},axisTick:function(t,e,n,i,r,a){var o=e.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[_M(n)],u=me(i,(function(t){return new pr({shape:yM(n,[l,l+s],t.coord)})}));t.add(Cr(u,{style:He(o.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,e,n,i,r,a){if(r.length){for(var o=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),u=a[_M(n)],c=[],d=0;d<r.length;d++)for(var h=0;h<r[d].length;h++)c.push(new pr({shape:yM(n,[u,u+l],r[d][h].coord)}));t.add(Cr(c,{style:He(s.getModel("lineStyle").getLineStyle(),He(o.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,e,n,i,r,a,o){var s=e.getCategories(!0),l=e.getModel("axisLabel"),u=l.get("margin"),c=e.get("triggerEvent");ie(o,(function(i,r){var o=l,d=i.tickValue,h=a[_M(n)],p=n.coordToPoint([h+u,i.coord]),f=n.cx,g=n.cy,m=Math.abs(p[0]-f)/h<.3?"center":p[0]>f?"left":"right",v=Math.abs(p[1]-g)/h<.3?"middle":p[1]>g?"top":"bottom";if(s&&s[d]){var y=s[d];$n(y)&&y.textStyle&&(o=new wr(y.textStyle,l,l.ecModel))}var _=new Mi({silent:cr.isLabelSilent(e),style:sa(o,{x:p[0],y:p[1],fill:o.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:i.formattedLabel,align:m,verticalAlign:v})});if(t.add(_),c){var x=cr.makeAxisEventDataBase(e);x.targetType="axisLabel",x.value=i.rawLabel,Je(_).eventData=x}}),this)},splitLine:function(t,e,n,i,r,a){var o=e.getModel("splitLine").getModel("lineStyle"),s=o.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],c=0;c<i.length;c++){var d=l++%s.length;u[d]=u[d]||[],u[d].push(new pr({shape:yM(n,a,i[c].coord)}))}for(c=0;c<u.length;c++)t.add(Cr(u[c],{style:He({stroke:s[c%s.length]},o.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(t,e,n,i,r,a){if(r.length){for(var o=e.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<r.length;l++)for(var u=0;u<r[l].length;u++)s.push(new pr({shape:yM(n,a,r[l][u].coord)}));t.add(Cr(s,{style:o.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(t,e,n,i,r,a){if(i.length){var o=e.getModel("splitArea").getModel("areaStyle"),s=o.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],c=Math.PI/180,d=-i[0].coord*c,h=Math.min(a[0],a[1]),p=Math.max(a[0],a[1]),f=e.get("clockwise"),g=1,m=i.length;g<=m;g++){var v=g===m?i[0].coord:i[g].coord,y=l++%s.length;u[y]=u[y]||[],u[y].push(new mi({shape:{cx:n.cx,cy:n.cy,r0:h,r:p,startAngle:d,endAngle:-v*c,clockwise:f},silent:!0})),d=-v*c}for(g=0;g<u.length;g++)t.add(Cr(u[g],{style:He({fill:s[g%s.length]},o.getAreaStyle()),silent:!0}))}}},MM=bM,SM=["axisLine","axisTickLabel","axisName"],CM=["splitLine","splitArea","minorSplitLine"],kM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return _e(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=this._axisGroup,i=this._axisGroup=new Jn;this.group.add(i);var r=t.axis,a=r.polar,o=a.getAngleAxis(),s=r.getTicksCoords(),l=r.getMinorTicksCoords(),u=o.getExtent()[0],c=r.getExtent(),d=function(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}(a,t,u),h=new cr(t,d);ie(SM,h.add,h),i.add(h.getGroup()),dr(n,i,t),ie(CM,(function(e){t.get([e,"show"])&&!r.scale.isBlank()&&IM[e](this.group,t,a,u,c,s,l)}),this)}},e.type="radiusAxis",e}(hr),IM={splitLine:function(t,e,n,i,r,a){var o=e.getModel("splitLine").getModel("lineStyle"),s=o.get("color"),l=0,u=n.getAngleAxis(),c=Math.PI/180,d=u.getExtent(),h=360===Math.abs(d[1]-d[0])?"Circle":"Arc";s=s instanceof Array?s:[s];for(var p=[],f=0;f<a.length;f++){var g=l++%s.length;p[g]=p[g]||[],p[g].push(new _r[h]({shape:{cx:n.cx,cy:n.cy,r:Math.max(a[f].coord,0),startAngle:-d[0]*c,endAngle:-d[1]*c,clockwise:u.inverse}}))}for(f=0;f<p.length;f++)t.add(Cr(p[f],{style:He({stroke:s[f%s.length],fill:null},o.getLineStyle()),silent:!0}))},minorSplitLine:function(t,e,n,i,r,a,o){if(o.length){for(var s=e.getModel("minorSplitLine").getModel("lineStyle"),l=[],u=0;u<o.length;u++)for(var c=0;c<o[u].length;c++)l.push(new Mr({shape:{cx:n.cx,cy:n.cy,r:o[u][c].coord}}));t.add(Cr(l,{style:He({fill:null},s.getLineStyle()),silent:!0}))}},splitArea:function(t,e,n,i,r,a){if(a.length){var o=e.getModel("splitArea").getModel("areaStyle"),s=o.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],c=a[0].coord,d=1;d<a.length;d++){var h=l++%s.length;u[h]=u[h]||[],u[h].push(new mi({shape:{cx:n.cx,cy:n.cy,r0:c,r:a[d].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),c=a[d].coord}for(d=0;d<u.length;d++)t.add(Cr(u[d],{style:He({fill:s[d%s.length]},o.getAreaStyle()),silent:!0}))}}};var DM=kM;function TM(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function AM(t,e){return e.dim+t.model.componentIndex}function EM(t,e,n){var i={},r=function(t){var e={};ie(t,(function(t,n){var i=t.getData(),r=t.coordinateSystem,a=r.getBaseAxis(),o=AM(r,a),s=a.getExtent(),l="category"===a.type?a.getBandWidth():Math.abs(s[1]-s[0])/i.count(),u=e[o]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=u.stacks;e[o]=u;var d=TM(t);c[d]||u.autoWidthCount++,c[d]=c[d]||{width:0,maxWidth:0};var h=Ke(t.get("barWidth"),l),p=Ke(t.get("barMaxWidth"),l),f=t.get("barGap"),g=t.get("barCategoryGap");h&&!c[d].width&&(h=Math.min(u.remainedWidth,h),c[d].width=h,u.remainedWidth-=h),p&&(c[d].maxWidth=p),null!=f&&(u.gap=f),null!=g&&(u.categoryGap=g)}));var n={};return ie(e,(function(t,e){n[e]={};var i=t.stacks,r=t.bandWidth,a=Ke(t.categoryGap,r),o=Ke(t.gap,1),s=t.remainedWidth,l=t.autoWidthCount,u=(s-a)/(l+(l-1)*o);u=Math.max(u,0),ie(i,(function(t,e){var n=t.maxWidth;n&&n<u&&(n=Math.min(n,s),t.width&&(n=Math.min(n,t.width)),s-=n,t.width=n,l--)})),u=(s-a)/(l+(l-1)*o),u=Math.max(u,0);var c,d=0;ie(i,(function(t,e){t.width||(t.width=u),c=t,d+=t.width*(1+o)})),c&&(d-=c.width*o);var h=-d/2;ie(i,(function(t,i){n[e][i]=n[e][i]||{offset:h,width:t.width},h+=t.width*(1+o)}))})),n}(Ie(e.getSeriesByType(t),(function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type})));e.eachSeriesByType(t,(function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,a=n.getBaseAxis(),o=AM(n,a),s=TM(t),l=r[o][s],u=l.offset,c=l.width,d=n.getOtherAxis(a),h=t.coordinateSystem.cx,p=t.coordinateSystem.cy,f=t.get("barMinHeight")||0,g=t.get("barMinAngle")||0;i[s]=i[s]||[];for(var m=e.mapDimension(d.dim),v=e.mapDimension(a.dim),y=di(e,m),_="radius"!==a.dim||!t.get("roundCap",!0),x=d.model.get("startValue"),b=d.dataToCoord(x||0),w=0,M=e.count();w<M;w++){var S=e.get(m,w),C=e.get(v,w),k=S>=0?"p":"n",I=b;y&&(i[s][C]||(i[s][C]={p:b,n:b}),I=i[s][C][k]);var D=void 0,T=void 0,A=void 0,E=void 0;if("radius"===d.dim){var L=d.dataToCoord(S)-b,P=a.dataToCoord(C);Math.abs(L)<f&&(L=(L<0?-1:1)*f),D=I,T=I+L,E=(A=P-u)-c,y&&(i[s][C][k]=T)}else{var N=d.dataToCoord(S,_)-b,O=a.dataToCoord(C);Math.abs(N)<g&&(N=(N<0?-1:1)*g),T=(D=O+u)+c,A=I,E=I+N,y&&(i[s][C][k]=E)}e.setItemLayout(w,{cx:h,cy:p,r0:D,r:T,startAngle:-A*Math.PI/180,endAngle:-E*Math.PI/180,clockwise:A>=E})}}}))}var LM={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},PM={splitNumber:5},NM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="polar",e}(gr);function OM(t,e){e=e||{};var n=t.coordinateSystem,i=t.axis,r={},a=i.position,o=i.orient,s=n.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};r.position=["vertical"===o?u.vertical[a]:l[0],"horizontal"===o?u.horizontal[a]:l[3]];r.rotation=Math.PI/2*{horizontal:0,vertical:1}[o];r.labelDirection=r.tickDirection=r.nameDirection={top:-1,bottom:1,right:1,left:-1}[a],t.get(["axisTick","inside"])&&(r.tickDirection=-r.tickDirection),Xr(e.labelInside,t.get(["axisLabel","inside"]))&&(r.labelDirection=-r.labelDirection);var c=e.rotate;return null==c&&(c=t.get(["axisLabel","rotate"])),r.labelRotation="top"===a?-c:c,r.z2=1,r}var zM=["axisLine","axisTickLabel","axisName"],RM=["splitArea","splitLine"],VM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="SingleAxisPointer",n}return _e(e,t),e.prototype.render=function(e,n,i,r){var a=this.group;a.removeAll();var o=this._axisGroup;this._axisGroup=new Jn;var s=OM(e),l=new cr(e,s);ie(zM,l.add,l),a.add(this._axisGroup),a.add(l.getGroup()),ie(RM,(function(t){e.get([t,"show"])&&FM[t](this,this.group,this._axisGroup,e)}),this),dr(o,this._axisGroup,e),t.prototype.render.call(this,e,n,i,r)},e.prototype.remove=function(){Ip(this)},e.type="singleAxis",e}(hr),FM={splitLine:function(t,e,n,i){var r=i.axis;if(!r.scale.isBlank()){var a=i.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),u=i.coordinateSystem.getRect(),c=r.isHorizontal(),d=[],h=0,p=r.getTicksCoords({tickModel:a}),f=[],g=[],m=0;m<p.length;++m){var v=r.toGlobalCoord(p[m].coord);c?(f[0]=v,f[1]=u.y,g[0]=v,g[1]=u.y+u.height):(f[0]=u.x,f[1]=v,g[0]=u.x+u.width,g[1]=v);var y=new pr({shape:{x1:f[0],y1:f[1],x2:g[0],y2:g[1]},silent:!0});fr(y.shape,l);var _=h++%s.length;d[_]=d[_]||[],d[_].push(y)}var x=o.getLineStyle(["color"]);for(m=0;m<d.length;++m)e.add(Cr(d[m],{style:He({stroke:s[m%s.length]},x),silent:!0}))}},splitArea:function(t,e,n,i){kp(t,n,i,i)}},BM=VM,HM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(Ui);Yi(HM,pu.prototype);var GM=HM,jM=function(t){function e(e,n,i,r,a){var o=t.call(this,e,n,i)||this;return o.type=r||"value",o.position=a||"bottom",o}return _e(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.pointToData=function(t,e){return this.coordinateSystem.pointToData(t)[0]},e}(Fu),WM=["single"],UM=function(){function t(t,e,n){this.type="single",this.dimension="single",this.dimensions=WM,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var i=this.dimension,r=new jM(i,nr(t),[0,0],t.get("type"),t.get("position")),a="category"===r.type;r.onBand=a&&t.get("boundaryGap"),r.inverse=t.get("inverse"),r.orient=t.get("orient"),t.axis=r,r.model=t,r.coordinateSystem=this,this._axis=r},t.prototype.update=function(t,e){t.eachSeries((function(t){if(t.coordinateSystem===this){var e=t.getData();ie(e.mapDimensionsAll(this.dimension),(function(t){this._axis.scale.unionExtentFromData(e,t)}),this),lr(this._axis.scale,this._axis.model)}}),this)},t.prototype.resize=function(t,e){this._rect=Vi({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),i=n?[0,t.width]:[0,t.height],r=e.inverse?1:0;e.setExtent(i[r],i[1-r]),this._updateAxisTransform(e,n?t.x:t.y)},t.prototype._updateAxisTransform=function(t,e){var n=t.getExtent(),i=n[0]+n[1],r=t.isHorizontal();t.toGlobalCoord=r?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord=r?function(t){return t-e}:function(t){return i-t+e}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(t){var e=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},t.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},t.prototype.dataToPoint=function(t){var e=this.getAxis(),n=this.getRect(),i=[],r="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),i[r]=e.toGlobalCoord(e.dataToCoord(+t)),i[1-r]=0===r?n.y+n.height/2:n.x+n.width/2,i},t.prototype.convertToPixel=function(t,e,n){return YM(e)===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){return YM(e)===this?this.pointToData(n):null},t}();function YM(t){var e=t.seriesModel,n=t.singleAxisModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}var $M={create:function(t,e){var n=[];return t.eachComponent("singleAxis",(function(i,r){var a=new UM(i,t,e);a.name="single_"+r,a.resize(i,e),i.coordinateSystem=a,n.push(a)})),t.eachSeries((function(t){if("singleAxis"===t.get("coordinateSystem")){var e=t.getReferringComponents("singleAxis",ne).models[0];t.coordinateSystem=e&&e.coordinateSystem}})),n},dimensions:WM},qM=["x","y"],XM=["width","height"],ZM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.makeElOption=function(t,e,n,i,r){var a=n.axis,o=a.coordinateSystem,s=QM(o,1-KM(a)),l=o.dataToPoint(e)[0],u=i.get("type");if(u&&"none"!==u){var c=po(i),d=JM[u](a,l,s);d.style=c,t.graphicKey=d.type,t.pointer=d}var h=OM(n);yo(e,t,h,n,i,r)},e.prototype.getHandleTransform=function(t,e,n){var i=OM(e,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var r=_o(e.axis,t,i);return{x:r[0],y:r[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,i){var r=n.axis,a=r.coordinateSystem,o=KM(r),s=QM(a,o),l=[t.x,t.y];l[o]+=e[o],l[o]=Math.min(s[1],l[o]),l[o]=Math.max(s[0],l[o]);var u=QM(a,1-o),c=(u[1]+u[0])/2,d=[c,c];return d[o]=l[o],{x:l[0],y:l[1],rotation:t.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}},e}(go),JM={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:mo([e,n[0]],[e,n[1]],KM(t))}},shadow:function(t,e,n){var i=t.getBandWidth(),r=n[1]-n[0];return{type:"Rect",shape:xo([e-i/2,n[0]],[i,r],KM(t))}}};function KM(t){return t.isHorizontal()?0:1}function QM(t,e){var n=t.getRect();return[n[qM[e]],n[qM[e]]+n[XM[e]]]}var tS=ZM,eS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="single",e}(gr);function nS(t,e){var n,i=t.cellSize;1===(n=pe(i)?i:t.cellSize=[i,i]).length&&(n[1]=n[0]);var r=me([0,1],(function(t){return bo(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]}));Zi(t,e,{type:"box",ignoreSize:r})}var iS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(e,n,i){var r=Xi(e);t.prototype.init.apply(this,arguments),nS(e,r)},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),nS(this.option,e)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(Ui),rS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n){var i=this.group;i.removeAll();var r=t.coordinateSystem,a=r.getRangeInfo(),o=r.getOrient(),s=e.getLocaleModel();this._renderDayRect(t,a,i),this._renderLines(t,a,o,i),this._renderYearText(t,a,o,i),this._renderMonthText(t,s,o,i),this._renderWeekText(t,s,a,o,i)},e.prototype._renderDayRect=function(t,e,n){for(var i=t.coordinateSystem,r=t.getModel("itemStyle").getItemStyle(),a=i.getCellWidth(),o=i.getCellHeight(),s=e.start.time;s<=e.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],!1).tl,u=new gi({shape:{x:l[0],y:l[1],width:a,height:o},cursor:"default",style:r});n.add(u)}},e.prototype._renderLines=function(t,e,n,i){var r=this,a=t.coordinateSystem,o=t.getModel(["splitLine","lineStyle"]).getLineStyle(),s=t.get(["splitLine","show"]),l=o.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var u=e.start,c=0;u.time<=e.end.time;c++){h(u.formatedDate),0===c&&(u=a.getDateInfo(e.start.y+"-"+e.start.m));var d=u.date;d.setMonth(d.getMonth()+1),u=a.getDateInfo(d)}function h(e){r._firstDayOfMonth.push(a.getDateInfo(e)),r._firstDayPoints.push(a.dataToRect([e],!1).tl);var l=r._getLinePointsOfOneWeek(t,e,n);r._tlpoints.push(l[0]),r._blpoints.push(l[l.length-1]),s&&r._drawSplitline(l,o,i)}h(a.getNextNDay(e.end.time,1).formatedDate),s&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,l,n),o,i),s&&this._drawSplitline(r._getEdgesPoints(r._blpoints,l,n),o,i)},e.prototype._getEdgesPoints=function(t,e,n){var i=[t[0].slice(),t[t.length-1].slice()],r="horizontal"===n?0:1;return i[0][r]=i[0][r]-e/2,i[1][r]=i[1][r]+e/2,i},e.prototype._drawSplitline=function(t,e,n){var i=new Be({z2:20,shape:{points:t},style:e});n.add(i)},e.prototype._getLinePointsOfOneWeek=function(t,e,n){for(var i=t.coordinateSystem,r=i.getDateInfo(e),a=[],o=0;o<7;o++){var s=i.getNextNDay(r.time,o),l=i.dataToRect([s.time],!1);a[2*s.day]=l.tl,a[2*s.day+1]=l["horizontal"===n?"bl":"tr"]}return a},e.prototype._formatterLabel=function(t,e){return vn(t)&&t?wo(t,e):se(t)?t(e):e.nameMap},e.prototype._yearTextPositionControl=function(t,e,n,i,r){var a=e[0],o=e[1],s=["center","bottom"];"bottom"===i?(o+=r,s=["center","top"]):"left"===i?a-=r:"right"===i?(a+=r,s=["center","top"]):o-=r;var l=0;return"left"!==i&&"right"!==i||(l=Math.PI/2),{rotation:l,x:a,y:o,style:{align:s[0],verticalAlign:s[1]}}},e.prototype._renderYearText=function(t,e,n,i){var r=t.getModel("yearLabel");if(r.get("show")){var a=r.get("margin"),o=r.get("position");o||(o="horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,u=(s[0][1]+s[1][1])/2,c="horizontal"===n?0:1,d={top:[l,s[c][1]],bottom:[l,s[1-c][1]],left:[s[1-c][0],u],right:[s[c][0],u]},h=e.start.y;+e.end.y>+e.start.y&&(h=h+"-"+e.end.y);var p=r.get("formatter"),f={start:e.start.y,end:e.end.y,nameMap:h},g=this._formatterLabel(p,f),m=new Mi({z2:30,style:sa(r,{text:g}),silent:r.get("silent")});m.attr(this._yearTextPositionControl(m,d[o],n,o,a)),i.add(m)}},e.prototype._monthTextPositionControl=function(t,e,n,i,r){var a="left",o="top",s=t[0],l=t[1];return"horizontal"===n?(l+=r,e&&(a="center"),"start"===i&&(o="bottom")):(s+=r,e&&(o="middle"),"start"===i&&(a="right")),{x:s,y:l,align:a,verticalAlign:o}},e.prototype._renderMonthText=function(t,e,n,i){var r=t.getModel("monthLabel");if(r.get("show")){var a=r.get("nameMap"),o=r.get("margin"),s=r.get("position"),l=r.get("align"),u=[this._tlpoints,this._blpoints];a&&!vn(a)||(a&&(e=Mo(a)||e),a=e.get(["time","monthAbbr"])||[]);var c="start"===s?0:1,d="horizontal"===n?0:1;o="start"===s?-o:o;for(var h="center"===l,p=r.get("silent"),f=0;f<u[c].length-1;f++){var g=u[c][f].slice(),m=this._firstDayOfMonth[f];if(h){var v=this._firstDayPoints[f];g[d]=(v[d]+u[0][f+1][d])/2}var y=r.get("formatter"),_=a[+m.m-1],x={yyyy:m.y,yy:(m.y+"").slice(2),MM:m.m,M:+m.m,nameMap:_},b=this._formatterLabel(y,x),w=new Mi({z2:30,style:xn(sa(r,{text:b}),this._monthTextPositionControl(g,h,n,s,o)),silent:p});i.add(w)}}},e.prototype._weekTextPositionControl=function(t,e,n,i,r){var a="center",o="middle",s=t[0],l=t[1],u="start"===n;return"horizontal"===e?(s=s+i+(u?1:-1)*r[0]/2,a=u?"right":"left"):(l=l+i+(u?1:-1)*r[1]/2,o=u?"bottom":"top"),{x:s,y:l,align:a,verticalAlign:o}},e.prototype._renderWeekText=function(t,e,n,i,r){var a=t.getModel("dayLabel");if(a.get("show")){var o=t.coordinateSystem,s=a.get("position"),l=a.get("nameMap"),u=a.get("margin"),c=o.getFirstDayOfWeek();if(!l||vn(l))l&&(e=Mo(l)||e),l=e.get(["time","dayOfWeekShort"])||me(e.get(["time","dayOfWeekAbbr"]),(function(t){return t[0]}));var d=o.getNextNDay(n.end.time,7-n.lweek).time,h=[o.getCellWidth(),o.getCellHeight()];u=Ke(u,Math.min(h[1],h[0])),"start"===s&&(d=o.getNextNDay(n.start.time,-(7+n.fweek)).time,u=-u);for(var p=a.get("silent"),f=0;f<7;f++){var g,m=o.getNextNDay(d,f),v=o.dataToRect([m.time],!1).center;g=Math.abs((f+c)%7);var y=new Mi({z2:30,style:xn(sa(a,{text:l[g]}),this._weekTextPositionControl(v,i,s,u,h)),silent:p});r.add(y)}}},e.type="calendar",e}(gr);function aS(t){var e=t.calendarModel,n=t.seriesModel;return e?e.coordinateSystem:n?n.coordinateSystem:null}var oS=function(){function t(e,n,i){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(t){var e=(t=So(t)).getFullYear(),n=t.getMonth()+1,i=n<10?"0"+n:""+n,r=t.getDate(),a=r<10?"0"+r:""+r,o=t.getDay();return{y:e+"",m:i,d:a,day:o=Math.abs((o+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+i+"-"+a,date:t}},t.prototype.getNextNDay=function(t,e){return 0===(e=e||0)||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},t.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],r=this._model.getCellSize().slice(),a=this._model.getBoxLayoutParams(),o="horizontal"===this._orient?[n,7]:[7,n];ie([0,1],(function(t){u(r,t)&&(a[i[t]]=r[t]*o[t])}));var s={width:e.getWidth(),height:e.getHeight()},l=this._rect=Vi(a,s);function u(t,e){return null!=t[e]&&"auto"!==t[e]}ie([0,1],(function(t){u(r,t)||(r[t]=l[i[t]]/o[t])})),this._sw=r[0],this._sh=r[1]},t.prototype.dataToPoint=function(t,e){pe(t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),i=this._rangeInfo,r=n.formatedDate;if(e&&!(n.time>=i.start.time&&n.time<i.end.time+864e5))return[NaN,NaN];var a=n.day,o=this._getRangeInfo([i.start.time,r]).nthWeek;return"vertical"===this._orient?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]:[this._rect.x+o*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},t.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},t.prototype.dataToRect=function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},t.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,i):this._getDateByWeeksAndDay(e,n-1,i)},t.prototype.convertToPixel=function(t,e,n){var i=aS(e);return i===this?i.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){var i=aS(e);return i===this?i.pointToData(n):null},t.prototype.containPoint=function(t){return!1},t.prototype._initRangeOption=function(){var t,e=this._model.get("range");if(pe(e)&&1===e.length&&(e=e[0]),pe(e))t=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var i=this.getDateInfo(n),r=i.date;r.setMonth(r.getMonth()+1);var a=this.getNextNDay(r,-1);t=[i.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n])}if(!t)return e;var o=this._getRangeInfo(t);return o.start.time>o.end.time&&t.reverse(),t},t.prototype._getRangeInfo=function(t){var e,n=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];n[0].time>n[1].time&&(e=!0,n.reverse());var i=Math.floor(n[1].time/864e5)-Math.floor(n[0].time/864e5)+1,r=new Date(n[0].time),a=r.getDate(),o=n[1].date.getDate();r.setDate(a+i-1);var s=r.getDate();if(s!==o)for(var l=r.getTime()-n[1].time>0?1:-1;(s=r.getDate())!==o&&(r.getTime()-n[1].time)*l>0;)i-=l,r.setDate(s-l);var u=Math.floor((i+n[0].day+6)/7),c=e?1-u:u-1;return e&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:i,weeks:u,nthWeek:c,fweek:n[0].day,lweek:n[1].day}},t.prototype._getDateByWeeksAndDay=function(t,e,n){var i=this._getRangeInfo(n);if(t>i.weeks||0===t&&e<i.fweek||t===i.weeks&&e>i.lweek)return null;var r=7*(t-1)-i.fweek+e,a=new Date(i.start.time);return a.setDate(+i.start.d+r),this.getDateInfo(a)},t.create=function(e,n){var i=[];return e.eachComponent("calendar",(function(e){var n=new t(e);i.push(n),e.coordinateSystem=n})),e.eachSeries((function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=i[t.get("calendarIndex")||0])})),i},t.dimensions=["time","value"],t}();function sS(t,e){var n;return ie(e,(function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)})),n}var lS=["transition","enterFrom","leaveTo"],uS=lS.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function cS(t,e,n){if(n&&(!t[n]&&e[n]&&(t[n]={}),t=t[n],e=e[n]),t&&e)for(var i=n?lS:uS,r=0;r<i.length;r++){var a=i[r];null==t[a]&&null!=e[a]&&(t[a]=e[a])}}var dS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventAutoZ=!0,n}return _e(e,t),e.prototype.mergeOption=function(e,n){var i=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,e,n),this.option.elements=i},e.prototype.optionUpdated=function(t,e){var n=this.option,i=(e?n:t).elements,r=n.elements=e?[]:n.elements,a=[];this._flatten(i,a,null);var o=Co(r,a,"normalMerge"),s=this._elOptionsToUpdate=[];ie(o,(function(t,e){var n=t.newOption;n&&(s.push(n),function(t,e){var n=t.existing;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var i=e.parentOption;i?e.parentId=i.id:n&&(e.parentId=n.parentId)}e.parentOption=null}(t,n),function(t,e,n){var i=xn({},n),r=t[e],a=n.$action||"merge";"merge"===a?r?($i(r,i,!0),Zi(r,i,{ignoreSize:!0}),ko(n,r),cS(n,r),cS(n,r,"shape"),cS(n,r,"style"),cS(n,r,"extra"),n.clipPath=r.clipPath):t[e]=i:"replace"===a?t[e]=i:"remove"===a&&r&&(t[e]=null)}(r,e,n),function(t,e){if(t&&(t.hv=e.hv=[sS(e,["left","right"]),sS(e,["top","bottom"])],"group"===t.type)){var n=t,i=e;null==n.width&&(n.width=i.width=0),null==n.height&&(n.height=i.height=0)}}(r[e],n))}),this),n.elements=Ie(r,(function(t){return t&&delete t.$action,null!=t}))},e.prototype._flatten=function(t,e,n){ie(t,(function(t){if(t){n&&(t.parentOption=n),e.push(t);var i=t.children;i&&i.length&&this._flatten(i,e,t),delete t.children}}),this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(Ui),hS={path:null,compoundPath:null,group:Jn,image:dn,text:Mi},pS=De(),fS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(){this._elMap=re()},e.prototype.render=function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},e.prototype._updateElements=function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,i=this.group,r=t.get("z"),a=t.get("zlevel");ie(e,(function(e){var o=na(e.id,null),s=null!=o?n.get(o):null,l=na(e.parentId,null),u=null!=l?n.get(l):i,c=e.type,d=e.style;"text"===c&&d&&e.hv&&e.hv[1]&&(d.textVerticalAlign=d.textBaseline=d.verticalAlign=d.align=null);var h=e.textContent,p=e.textConfig;if(d&&nw(d,c,!!p,!!h)){var f=iw(d,c,!0);!p&&f.textConfig&&(p=e.textConfig=f.textConfig),!h&&f.textContent&&(h=f.textContent)}var g=function(t){return t=xn({},t),ie(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Io),(function(e){delete t[e]})),t}(e),m=e.$action||"merge",v="merge"===m,y="replace"===m;if(v){var _=s;(k=!s)?_=mS(o,u,e.type,n):(_&&(pS(_).isNew=!1),Sw(_)),_&&(hw(_,g,t,{isInit:k}),yS(_,e,r,a))}else if(y){vS(s,e,n,t);var x=mS(o,u,e.type,n);x&&(hw(x,g,t,{isInit:!0}),yS(x,e,r,a))}else"remove"===m&&(pw(s,e),vS(s,e,n,t));var b=n.get(o);if(b&&h)if(v){var w=b.getTextContent();w?w.attr(h):b.setTextContent(new Mi(h))}else y&&b.setTextContent(new Mi(h));if(b){var M=e.clipPath;if(M){var S=M.type,C=void 0,k=!1;if(v){var I=b.getClipPath();C=(k=!I||pS(I).type!==S)?gS(S):I}else y&&(k=!0,C=gS(S));b.setClipPath(C),hw(C,M,t,{isInit:k}),Cw(C,M.keyframeAnimation,t)}var D=pS(b);b.setTextConfig(p),D.option=e,function(t,e,n){var i=Je(t).eventData;t.silent||t.ignore||i||(i=Je(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name});i&&(i.info=n.info)}(b,t,e),jr({el:b,componentModel:t,itemName:b.name,itemTooltipOption:e.tooltip}),Cw(b,e.keyframeAnimation,t)}}))}},e.prototype._relocate=function(t,e){for(var n=t.option.elements,i=this.group,r=this._elMap,a=e.getWidth(),o=e.getHeight(),s=["x","y"],l=0;l<n.length;l++){var u=n[l];if((f=null!=(p=na(u.id,null))?r.get(p):null)&&f.isGroup){var c=(g=f.parent)===i,d=pS(f),h=pS(g);d.width=Ke(d.option.width,c?a:h.width)||0,d.height=Ke(d.option.height,c?o:h.height)||0}}for(l=n.length-1;l>=0;l--){var p,f;u=n[l];if(f=null!=(p=na(u.id,null))?r.get(p):null){var g=f.parent,m=(h=pS(g),g===i?{width:a,height:o}:{width:h.width,height:h.height}),v={},y=aa(f,u,m,null,{hv:u.hv,boundingMode:u.bounding},v);if(!pS(f).isNew&&y){for(var _=u.transition,x={},b=0;b<s.length;b++){var w=s[b],M=v[w];_&&(gw(_)||sn(_,w)>=0)?x[w]=M:f[w]=M}ln(f,x,t,0)}else f.attr(v)}}},e.prototype._clear=function(){var t=this,e=this._elMap;e.each((function(n){vS(n,pS(n).option,e,t._lastGraphicModel)})),this._elMap=re()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(gr);function gS(t){var e=new(Ar(hS,t)?hS[t]:co(t))({});return pS(e).type=t,e}function mS(t,e,n,i){var r=gS(n);return e.add(r),i.set(t,r),pS(r).id=t,pS(r).isNew=!0,r}function vS(t,e,n,i){t&&t.parent&&("group"===t.type&&t.traverse((function(t){vS(t,e,n,i)})),fw(t,e,i),n.removeKey(pS(t).id))}function yS(t,e,n,i){t.isGroup||ie([["cursor",Br.prototype.cursor],["zlevel",i||0],["z",n||0],["z2",0]],(function(n){var i=n[0];Ar(e,i)?t[i]=Fe(e[i],n[1]):null==t[i]&&(t[i]=n[1])})),ie(Ze(e),(function(n){if(0===n.indexOf("on")){var i=e[n];t[n]=se(i)?i:null}})),Ar(e,"draggable")&&(t.draggable=e.draggable),null!=e.name&&(t.name=e.name),null!=e.id&&(t.id=e.id)}var _S=["x","y","radius","angle","single"],xS=["cartesian2d","polar","singleAxis"];function bS(t){return t+"Axis"}function wS(t,e){var n,i=re(),r=[],a=re();t.eachComponent({mainType:"dataZoom",query:e},(function(t){a.get(t.uid)||s(t)}));do{n=!1,t.eachComponent("dataZoom",o)}while(n);function o(t){!a.get(t.uid)&&function(t){var e=!1;return t.eachTargetAxis((function(t,n){var r=i.get(t);r&&r[n]&&(e=!0)})),e}(t)&&(s(t),n=!0)}function s(t){a.set(t.uid,!0),r.push(t),t.eachTargetAxis((function(t,e){(i.get(t)||i.set(t,[]))[e]=!0}))}return r}function MS(t){var e=t.ecModel,n={infoList:[],infoMap:re()};return t.eachTargetAxis((function(t,i){var r=e.getComponent(bS(t),i);if(r){var a=r.getCoordSysModel();if(a){var o=a.uid,s=n.infoMap.get(o);s||(s={model:a,axisModels:[]},n.infoList.push(s),n.infoMap.set(o,s)),s.axisModels.push(r)}}})),n}var SS=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}();function CS(t){var e={};return ie(["start","end","startValue","endValue","throttle"],(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e}var kS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return _e(e,t),e.prototype.init=function(t,e,n){var i=CS(t);this.settledOption=i,this.mergeDefaultAndTheme(t,n),this._doInit(i)},e.prototype.mergeOption=function(t){var e=CS(t);$i(this.option,t,!0),$i(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;ie([["start","startValue"],["end","endValue"]],(function(t,i){"value"===this._rangePropMode[i]&&(e[t[0]]=n[t[0]]=null)}),this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=re();this._fillSpecifiedTargetAxis(e)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each((function(t){t.indexList.length&&(this._noTarget=!1)}),this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return ie(_S,(function(n){var i=this.getReferringComponents(bS(n),Do);if(i.specified){e=!0;var r=new SS;ie(i.models,(function(t){r.add(t.componentIndex)})),t.set(n,r)}}),this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var n=this.ecModel,i=!0;if(i){var r="vertical"===e?"y":"x";a(n.findComponents({mainType:r+"Axis"}),r)}i&&a(n.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}}),"single");function a(e,n){var r=e[0];if(r){var a=new SS;if(a.add(r.componentIndex),t.set(n,a),i=!1,"x"===n||"y"===n){var o=r.getReferringComponents("grid",ne).models[0];o&&ie(e,(function(t){r.componentIndex!==t.componentIndex&&o===t.getReferringComponents("grid",ne).models[0]&&a.add(t.componentIndex)}))}}}i&&ie(_S,(function(e){if(i){var r=n.findComponents({mainType:bS(e),filter:function(t){return"category"===t.get("type",!0)}});if(r[0]){var a=new SS;a.add(r[0].componentIndex),t.set(e,a),i=!1}}}),this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis((function(e){!t&&(t=e)}),this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,n=this.get("rangeMode");ie([["start","startValue"],["end","endValue"]],(function(i,r){var a=null!=t[i[0]],o=null!=t[i[1]];a&&!o?e[r]="percent":!a&&o?e[r]="value":n?e[r]=n[r]:a&&(e[r]="percent")}))},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis((function(e,n){null==t&&(t=this.ecModel.getComponent(bS(e),n))}),this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each((function(n,i){ie(n.indexList,(function(n){t.call(e,i,n)}))}))},e.prototype.getAxisProxy=function(t,e){var n=this.getAxisModel(t,e);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[e])return this.ecModel.getComponent(bS(t),e)},e.prototype.setRawRange=function(t){var e=this.option,n=this.settledOption;ie([["start","startValue"],["end","endValue"]],(function(i){null==t[i[0]]&&null==t[i[1]]||(e[i[0]]=n[i[0]]=t[i[0]],e[i[1]]=n[i[1]]=t[i[1]])}),this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var e=this.option;ie(["start","startValue","end","endValue"],(function(n){e[n]=t[n]}))},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var r=n[i],a=this._targetAxisInfoMap.get(r),o=0;o<a.indexList.length;o++){var s=this.getAxisProxy(r,a.indexList[o]);if(s.hostedBy(this))return s;e||(e=s)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(Ui),IS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="dataZoom.select",e}(kS),DS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.render=function(t,e,n,i){this.dataZoomModel=t,this.ecModel=e,this.api=n},e.type="dataZoom",e}(gr),TS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="dataZoom.select",e}(DS),AS=ie,ES=Fa;var LS=function(){function t(t,e,n,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=n}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries((function(e){if(function(t){var e=t.get("coordinateSystem");return sn(xS,e)>=0}(e)){var n=bS(this._dimName),i=e.getReferringComponents(n,ne).models[0];i&&this._axisIndex===i.componentIndex&&t.push(e)}}),this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return Pn(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,n=this._dataExtent,i=this.getAxisModel().axis.scale,r=this._dataZoomModel.getRangePropMode(),a=[0,100],o=[],s=[];AS(["start","end"],(function(l,u){var c=t[l],d=t[l+"Value"];"percent"===r[u]?(null==c&&(c=a[u]),d=i.parse(Ne(c,a,n))):(e=!0,d=null==d?n[u]:i.parse(d),c=Ne(d,n,a)),s[u]=null==d||isNaN(d)?n[u]:d,o[u]=null==c||isNaN(c)?a[u]:c})),ES(s),ES(o);var l=this._minMaxSpan;function u(t,e,n,r,a){var o=a?"Span":"ValueSpan";Ly(0,t,n,"all",l["min"+o],l["max"+o]);for(var s=0;s<2;s++)e[s]=Ne(t[s],n,r,!0),a&&(e[s]=i.parse(e[s]))}return e?u(s,o,n,a,!1):u(o,s,a,n,!0),{valueWindow:s,percentWindow:o}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var i=[1/0,-1/0];AS(n,(function(t){To(i,t.getData(),e)}));var r=t.getAxisModel(),a=Ao(r.axis.scale,r,i).calculate();return[a.min,a.max]}(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),r=t.get("filterMode"),a=this._valueWindow;"none"!==r&&AS(i,(function(t){var e=t.getData(),i=e.mapDimensionsAll(n);if(i.length){if("weakFilter"===r){var o=e.getStore(),s=me(i,(function(t){return e.getDimensionIndex(t)}),e);e.filterSelf((function(t){for(var e,n,r,l=0;l<i.length;l++){var u=o.get(s[l],t),c=!isNaN(u),d=u<a[0],h=u>a[1];if(c&&!d&&!h)return!0;c&&(r=!0),d&&(e=!0),h&&(n=!0)}return r&&e&&n}))}else AS(i,(function(n){if("empty"===r)t.setData(e=e.map(n,(function(t){return function(t){return t>=a[0]&&t<=a[1]}(t)?t:NaN})));else{var i={};i[n]=a,e.selectRange(i)}}));AS(i,(function(t){e.setApproximateExtent(a,t)}))}}))}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;AS(["min","max"],(function(i){var r=e.get(i+"Span"),a=e.get(i+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?r=Ne(n[0]+a,n,[0,100],!0):null!=r&&(a=Ne(r,[0,100],n,!0)-n[0]),t[i+"Span"]=r,t[i+"ValueSpan"]=a}),this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var i=Pe(n,[0,500]);i=Math.min(i,20);var r=t.axis.scale.rawExtentInfo;0!==e[0]&&r.setDeterminedMinMax("min",+n[0].toFixed(i)),100!==e[1]&&r.setDeterminedMinMax("max",+n[1].toFixed(i)),r.freeze()}},t}(),PS={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(i,r){var a=t.getComponent(bS(i),r);e(i,r,a,n)}))}))}e((function(t,e,n,i){n.__dzAxisProxy=null}));var n=[];e((function(e,i,r,a){r.__dzAxisProxy||(r.__dzAxisProxy=new LS(e,i,a,t),n.push(r.__dzAxisProxy))}));var i=re();return ie(n,(function(t){ie(t.getTargetSeriesModels(),(function(t){i.set(t.uid,t)}))})),i},overallReset:function(t,e){t.eachComponent("dataZoom",(function(t){t.eachTargetAxis((function(e,n){t.getAxisProxy(e,n).reset(t)})),t.eachTargetAxis((function(n,i){t.getAxisProxy(n,i).filterData(t,e)}))})),t.eachComponent("dataZoom",(function(t){var e=t.findRepresentativeAxisProxy();if(e){var n=e.getDataPercentWindow(),i=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}}))}};var NS=!1;function OS(t){NS||(NS=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,PS),function(t){t.registerAction("dataZoom",(function(t,e){var n=wS(e,t);ie(n,(function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})}))}))}(t),t.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function zS(t){t.registerComponentModel(IS),t.registerComponentView(TS),OS(t)}var RS=function(){},VS={};function FS(t,e){VS[t]=e}function BS(t){return VS[t]}var HS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;ie(this.option.feature,(function(t,n){var i=BS(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(e)),$i(t,i.defaultOption))}))},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Ui);var GS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.render=function(t,e,n,i){var r=this.group;if(r.removeAll(),t.get("show")){var a=+t.get("itemSize"),o="vertical"===t.get("orient"),s=t.get("feature")||{},l=this._features||(this._features={}),u=[];ie(s,(function(t,e){u.push(e)})),new ua(this._featureNames||[],u).add(c).update(c).remove(le(c,null)).execute(),this._featureNames=u,Lo(r,t,n),r.add(Po(r.getBoundingRect(),t)),o||r.eachChild((function(t){var e=t.__title,i=t.ensureState("emphasis"),o=i.textConfig||(i.textConfig={}),s=t.getTextContent(),l=s&&s.ensureState("emphasis");if(l&&!se(l)&&e){var u=l.style||(l.style={}),c=Ee(e,Mi.makeFont(u)),d=t.x+r.x,h=!1;t.y+r.y+a+c.height>n.getHeight()&&(o.position="top",h=!0);var p=h?-5-c.height:a+10;d+c.width/2>n.getWidth()?(o.position=["100%",p],u.align="right"):d-c.width/2<0&&(o.position=[0,p],u.align="left")}}))}function c(c,d){var h,p=u[c],f=u[d],g=s[p],m=new wr(g,t,t.ecModel);if(i&&null!=i.newTitle&&i.featureName===p&&(g.title=i.newTitle),p&&!f){if(function(t){return 0===t.indexOf("my")}(p))h={onclick:m.option.onclick,featureName:p};else{var v=BS(p);if(!v)return;h=new v}l[p]=h}else if(!(h=l[f]))return;h.uid=Fr("toolbox-feature"),h.model=m,h.ecModel=e,h.api=n;var y=h instanceof RS;p||!f?!m.get("show")||y&&h.unusable?y&&h.remove&&h.remove(e,n):(!function(i,s,l){var u,c,d=i.getModel("iconStyle"),h=i.getModel(["emphasis","iconStyle"]),p=s instanceof RS&&s.getIcons?s.getIcons():i.get("icon"),f=i.get("title")||{};vn(p)?(u={})[l]=p:u=p;vn(f)?(c={})[l]=f:c=f;var g=i.iconPaths={};ie(u,(function(l,u){var p=Eo(l,{},{x:-a/2,y:-a/2,width:a,height:a});p.setStyle(d.getItemStyle()),p.ensureState("emphasis").style=h.getItemStyle();var f=new Mi({style:{text:c[u],align:h.get("textAlign"),borderRadius:h.get("textBorderRadius"),padding:h.get("textPadding"),fill:null,font:lo({fontStyle:h.get("textFontStyle"),fontFamily:h.get("textFontFamily"),fontSize:h.get("textFontSize"),fontWeight:h.get("textFontWeight")},e)},ignore:!0});p.setTextContent(f),jr({el:p,componentModel:t,itemName:u,formatterParamsExtra:{title:c[u]}}),p.__title=c[u],p.on("mouseover",(function(){var e=h.getItemStyle(),i=o?null==t.get("right")&&"right"!==t.get("left")?"right":"left":null==t.get("bottom")&&"bottom"!==t.get("top")?"bottom":"top";f.setStyle({fill:h.get("textFill")||e.fill||e.stroke||"#000",backgroundColor:h.get("textBackgroundColor")}),p.setTextConfig({position:h.get("textPosition")||i}),f.ignore=!t.get("showTitle"),n.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==i.get(["iconStatus",u])&&n.leaveEmphasis(this),f.hide()})),("emphasis"===i.get(["iconStatus",u])?ei:ni)(p),r.add(p),p.on("click",vi(s.onclick,s,e,n,u)),g[u]=p}))}(m,h,p),m.setIconStatus=function(t,e){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,i[t]&&("emphasis"===e?ei:ni)(i[t])},h instanceof RS&&h.render&&h.render(m,e,n,i)):y&&h.dispose&&h.dispose(e,n)}},e.prototype.updateView=function(t,e,n,i){ie(this._features,(function(t){t instanceof RS&&t.updateView&&t.updateView(t.model,e,n,i)}))},e.prototype.remove=function(t,e){ie(this._features,(function(n){n instanceof RS&&n.remove&&n.remove(t,e)})),this.group.removeAll()},e.prototype.dispose=function(t,e){ie(this._features,(function(n){n instanceof RS&&n.dispose&&n.dispose(t,e)}))},e.type="toolbox",e}(gr),jS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.onclick=function(t,e){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",r="svg"===e.getZr().painter.getType(),a=r?"svg":n.get("type",!0)||"png",o=e.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=No.browser;if("function"!=typeof MouseEvent||!s.newEdge&&(s.ie||s.edge))if(window.navigator.msSaveOrOpenBlob||r){var l=o.split(","),u=l[0].indexOf("base64")>-1,c=r?decodeURIComponent(l[1]):l[1];u&&(c=window.atob(c));var d=i+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var h=c.length,p=new Uint8Array(h);h--;)p[h]=c.charCodeAt(h);var f=new Blob([p]);window.navigator.msSaveOrOpenBlob(f,d)}else{var g=document.createElement("iframe");document.body.appendChild(g);var m=g.contentWindow,v=m.document;v.open("image/svg+xml","replace"),v.write(c),v.close(),m.focus(),v.execCommand("SaveAs",!0,d),document.body.removeChild(g)}}else{var y=n.get("lang"),_='<body style="margin:0;"><img src="'+o+'" style="max-width:100%;" title="'+(y&&y[0]||"")+'" /></body>',x=window.open();x.document.write(_),x.document.title=i}else{var b=document.createElement("a");b.download=i+"."+a,b.target="_blank",b.href=o;var w=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});b.dispatchEvent(w)}},e.getDefaultOption=function(t){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},e}(RS),WS=[["line","bar"],["stack"]],US=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return ie(t.get("type"),(function(t){e[t]&&(n[t]=e[t])})),n},e.getDefaultOption=function(t){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},e.prototype.onclick=function(t,e,n){var i=this.model,r=i.get(["seriesIndex",n]);if(YS[n]){var a,o={series:[]};ie(WS,(function(t){sn(t,n)>=0&&ie(t,(function(t){i.setIconStatus(t,"normal")}))})),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},(function(t){var e=t.subType,r=t.id,a=YS[n](e,r,t,i);a&&(He(a,t.option),o.series.push(a));var s=t.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===n||"bar"===n)){var l=s.getAxesByScale("ordinal")[0];if(l){var u=l.dim+"Axis",c=t.getReferringComponents(u,ne).models[0].componentIndex;o[u]=o[u]||[];for(var d=0;d<=c;d++)o[u][c]=o[u][c]||{};o[u][c].boundaryGap="bar"===n}}}));var s=n;"stack"===n&&(a=$i({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",n])&&(s="tiled")),e.dispatchAction({type:"changeMagicType",currentType:s,newOption:o,newTitle:a,featureName:"magicType"})}},e}(RS),YS={line:function(t,e,n,i){if("bar"===t)return $i({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(t,e,n,i){if("line"===t)return $i({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(t,e,n,i){var r="__ec_magicType_stack__"===n.get("stack");if("line"===t||"bar"===t)return i.setIconStatus("stack",r?"normal":"emphasis"),$i({id:e,stack:r?"":"__ec_magicType_stack__"},i.get(["option","stack"])||{},!0)}};kr({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(t,e){e.mergeOption(t.newOption)}));var $S=US,qS=new Array(60).join("-");function XS(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var ZS=new RegExp("[\t]+","g");function JS(t,e){var n=t.split(new RegExp("\n*"+qS+"\n*","g")),i={series:[]};return ie(n,(function(t,n){if(function(t){if(t.slice(0,t.indexOf("\n")).indexOf("\t")>=0)return!0}(t)){var r=function(t){for(var e=t.split(/\n+/g),n=XS(e.shift()).split(ZS),i=[],r=me(n,(function(t){return{name:t,data:[]}})),a=0;a<e.length;a++){var o=XS(e[a]).split(ZS);i.push(o.shift());for(var s=0;s<o.length;s++)r[s]&&(r[s].data[a]=o[s])}return{series:r,categories:i}}(t),a=e[n],o=a.axisDim+"Axis";a&&(i[o]=i[o]||[],i[o][a.axisIndex]={data:r.categories},i.series=i.series.concat(r.series))}else{r=function(t){for(var e=t.split(/\n+/g),n=XS(e.shift()),i=[],r=0;r<e.length;r++){var a=XS(e[r]);if(a){var o=a.split(ZS),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),i[r]={name:s,value:[]},l=i[r].value):l=i[r]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);1===l.length&&(u?i[r].value=l[0]:i[r]=l[0])}}return{name:n,data:i}}(t);i.series.push(r)}})),i}var KS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.onclick=function(t,e){setTimeout((function(){e.dispatchAction({type:"hideTip"})}));var n=e.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=i.get("backgroundColor")||"#fff";var a=document.createElement("h4"),o=i.get("lang")||[];a.innerHTML=o[0]||i.get("title"),a.style.cssText="margin:10px 20px",a.style.color=i.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="overflow:auto";var u=i.get("optionToContent"),c=i.get("contentToOption"),d=function(t){var e,n,i,r=function(t){var e={},n=[],i=[];return t.eachRawSeries((function(t){var r=t.coordinateSystem;if(!r||"cartesian2d"!==r.type&&"polar"!==r.type)n.push(t);else{var a=r.getBaseAxis();if("category"===a.type){var o=a.dim+"_"+a.index;e[o]||(e[o]={categoryAxis:a,valueAxis:r.getOtherAxis(a),series:[]},i.push({axisDim:a.dim,axisIndex:a.index})),e[o].series.push(t)}else n.push(t)}})),{seriesGroupByCategoryAxis:e,other:n,meta:i}}(t);return{value:Ie([(n=r.seriesGroupByCategoryAxis,i=[],ie(n,(function(t,e){var n=t.categoryAxis,r=t.valueAxis.dim,a=[" "].concat(me(t.series,(function(t){return t.name}))),o=[n.model.getCategories()];ie(t.series,(function(t){var e=t.getRawData();o.push(t.getRawData().mapArray(e.mapDimension(r),(function(t){return t})))}));for(var s=[a.join("\t")],l=0;l<o[0].length;l++){for(var u=[],c=0;c<o.length;c++)u.push(o[c][l]);s.push(u.join("\t"))}i.push(s.join("\n"))})),i.join("\n\n"+qS+"\n\n")),(e=r.other,me(e,(function(t){var e=t.getRawData(),n=[t.name],i=[];return e.each(e.dimensions,(function(){for(var t=arguments.length,r=arguments[t-1],a=e.getName(r),o=0;o<t-1;o++)i[o]=arguments[o];n.push((a?a+"\t":"")+i.join("\t"))})),n.join("\n")})).join("\n\n"+qS+"\n\n"))],(function(t){return!!t.replace(/[\n\t\s]/g,"")})).join("\n\n"+qS+"\n\n"),meta:r.meta}}(t);if(se(u)){var h=u(e.getOption());vn(h)?s.innerHTML=h:Oo(h)&&s.appendChild(h)}else{l.readOnly=i.get("readOnly");var p=l.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=i.get("textColor"),p.borderColor=i.get("textareaBorderColor"),p.backgroundColor=i.get("textareaColor"),l.value=d.value,s.appendChild(l)}var f=d.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),y=document.createElement("div");m+=";background-color:"+i.get("buttonColor"),m+=";color:"+i.get("buttonTextColor");var _=this;function x(){n.removeChild(r),_._dom=null}zo(v,"click",x),zo(y,"click",(function(){if(null==c&&null!=u||null!=c&&null==u)x();else{var t;try{t=se(c)?c(s,e.getOption()):JS(l.value,f)}catch(n){throw x(),new Error("Data view format error "+n)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),x()}})),v.innerHTML=o[1],y.innerHTML=o[2],y.style.cssText=v.style.cssText=m,!i.get("readOnly")&&g.appendChild(y),g.appendChild(v),r.appendChild(a),r.appendChild(s),r.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},e.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.getDefaultOption=function(t){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},e}(RS);function QS(t,e){return me(t,(function(t,n){var i=e&&e[n];if($n(i)&&!pe(i)){$n(t)&&!pe(t)||(t={value:t});var r=null!=i.name&&null==t.name;return t=He(t,i),r&&delete t.name,t}return t}))}kr({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(t,e){var n=[];ie(t.newOption.series,(function(t){var i=e.getSeriesByName(t.name)[0];if(i){var r=i.get("data");n.push({name:t.name,data:QS(t.data,r)})}else n.push(xn({type:"scatter"},t))})),e.mergeOption(He({series:n},t.newOption))}));var tC=KS,eC=ie,nC=De();function iC(t){var e=nC(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var rC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.onclick=function(t,e){!function(t){nC(t).snapshots=null}(t),e.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])}},e}(RS);kr({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(t,e){e.resetOption("recreate")}));var aC=rC,oC=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],sC=function(){function t(t,e,n){var i=this;this._targetInfoList=[];var r=uC(e,t);ie(cC,(function(t,e){(!n||!n.include||sn(n.include,e)>=0)&&t(r,i._targetInfoList)}))}return t.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,(function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var i=pC[t.brushType](0,n,e);t.__rangeOffset={offset:gC[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}})),t},t.prototype.matchOutputRanges=function(t,e,n){ie(t,(function(t){var i=this.findTargetInfo(t,e);i&&!0!==i&&ie(i.coordSyses,(function(i){var r=pC[t.brushType](1,i,t.range,!0);n(t,r.values,i,e)}))}),this)},t.prototype.setInputRanges=function(t,e){ie(t,(function(t){var n,i,r,a,o,s=this.findTargetInfo(t,e);if(t.range=t.range||[],s&&!0!==s){t.panelId=s.panelId;var l=pC[t.brushType](0,s.coordSys,t.coordRange),u=t.__rangeOffset;t.range=u?gC[t.brushType](l.values,u.offset,(n=l.xyMinMax,i=u.xyMinMax,r=vC(n),a=vC(i),o=[r[0]/a[0],r[1]/a[1]],isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o)):l.values}}),this)},t.prototype.makePanelOpts=function(t,e){return me(this._targetInfoList,(function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:N_(i),isTargetByCursor:z_(i,t,n.coordSysModel),getLinearBrushOtherExtent:O_(i)}}))},t.prototype.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return!0===i||i&&sn(i.coordSyses,e.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=uC(e,t),r=0;r<n.length;r++){var a=n[r],o=t.panelId;if(o){if(a.panelId===o)return a}else for(var s=0;s<dC.length;s++)if(dC[s](i,a))return a}return!0},t}();function lC(t){return t[0]>t[1]&&t.reverse(),t}function uC(t,e){return Ro(t,e,{includeMainTypes:oC})}var cC={grid:function(t,e){var n=t.xAxisModels,i=t.yAxisModels,r=t.gridModels,a=re(),o={},s={};(n||i||r)&&(ie(n,(function(t){var e=t.axis.grid.model;a.set(e.id,e),o[e.id]=!0})),ie(i,(function(t){var e=t.axis.grid.model;a.set(e.id,e),s[e.id]=!0})),ie(r,(function(t){a.set(t.id,t),o[t.id]=!0,s[t.id]=!0})),a.each((function(t){var r=t.coordinateSystem,a=[];ie(r.getCartesians(),(function(t,e){(sn(n,t.getAxis("x").model)>=0||sn(i,t.getAxis("y").model)>=0)&&a.push(t)})),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:a[0],coordSyses:a,getPanelRect:hC.grid,xAxisDeclared:o[t.id],yAxisDeclared:s[t.id]})})))},geo:function(t,e){ie(t.geoModels,(function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:hC.geo})}))}},dC=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,r=t.gridModel;return!r&&n&&(r=n.axis.grid.model),!r&&i&&(r=i.axis.grid.model),r&&r===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],hC={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Ha(t)),e}},pC={lineX:le(fC,0),lineY:le(fC,1),rect:function(t,e,n,i){var r=t?e.pointToData([n[0][0],n[1][0]],i):e.dataToPoint([n[0][0],n[1][0]],i),a=t?e.pointToData([n[0][1],n[1][1]],i):e.dataToPoint([n[0][1],n[1][1]],i),o=[lC([r[0],a[0]]),lC([r[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(t,e,n,i){var r=[[1/0,-1/0],[1/0,-1/0]];return{values:me(n,(function(n){var a=t?e.pointToData(n,i):e.dataToPoint(n,i);return r[0][0]=Math.min(r[0][0],a[0]),r[1][0]=Math.min(r[1][0],a[1]),r[0][1]=Math.max(r[0][1],a[0]),r[1][1]=Math.max(r[1][1],a[1]),a})),xyMinMax:r}}};function fC(t,e,n,i){var r=n.getAxis(["x","y"][t]),a=lC(me([0,1],(function(t){return e?r.coordToData(r.toLocalCoord(i[t]),!0):r.toGlobalCoord(r.dataToCoord(i[t]))}))),o=[];return o[t]=a,o[1-t]=[NaN,NaN],{values:a,xyMinMax:o}}var gC={lineX:le(mC,0),lineY:le(mC,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return me(t,(function(t,i){return[t[0]-n[0]*e[i][0],t[1]-n[1]*e[i][1]]}))}};function mC(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function vC(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var yC=sC,_C=ie,xC=Fo("toolbox-dataZoom_"),bC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.render=function(t,e,n,i){this._brushController||(this._brushController=new P_(n.getZr()),this._brushController.on("brush",vi(this._onBrush,this)).mount()),function(t,e,n,i,r){var a=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(a="dataZoomSelect"===i.key&&i.dataZoomSelectActive);n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var o=new yC(MC(t),e,{include:["grid"]}).makePanelOpts(r,(function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(o).enableBrush(!(!a||!o.length)&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}(t,e,this,i,n),function(t,e){t.setIconStatus("back",function(t){return iC(t).length}(e)>1?"emphasis":"normal")}(t,e)},e.prototype.onclick=function(t,e,n){wC[n].call(this)},e.prototype.remove=function(t,e){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,e){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var e=t.areas;if(t.isEnd&&e.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new yC(MC(this.model),i,{include:["grid"]}).matchOutputRanges(e,i,(function(t,e,n){if("cartesian2d"===n.type){var i=t.brushType;"rect"===i?(r("x",n,e[0]),r("y",n,e[1])):r({lineX:"x",lineY:"y"}[i],n,e)}})),function(t,e){var n=iC(t);eC(e,(function(e,i){for(var r=n.length-1;r>=0&&!n[r][i];r--);if(r<0){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(a){var o=a.getPercentRange();n[0][i]={dataZoomId:i,start:o[0],end:o[1]}}}})),n.push(e)}(i,n),this._dispatchZoomAction(n)}function r(t,e,r){var a=e.getAxis(t),o=a.model,s=function(t,e,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(t,e.componentIndex)&&(i=n)})),i}(t,o,i),l=s.findRepresentativeAxisProxy(o).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(r=Ly(0,r.slice(),a.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:r[0],endValue:r[1]})}},e.prototype._dispatchZoomAction=function(t){var e=[];_C(t,(function(t,n){e.push(Pn(t))})),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},e.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},e}(RS),wC={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(function(t){var e=iC(t),n=e[e.length-1];e.length>1&&e.pop();var i={};return eC(n,(function(t,n){for(var r=e.length-1;r>=0;r--)if(t=e[r][n]){i[n]=t;break}})),i}(this.ecModel))}};function MC(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==e.xAxisIndex&&null==e.xAxisId&&(e.xAxisIndex="all"),null==e.yAxisIndex&&null==e.yAxisId&&(e.yAxisIndex="all"),e}Vo("dataZoom",(function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(e&&null!=e.get(n)){var i=e.getModel(n),r=[],a=MC(i),o=Ro(t,a);return _C(o.xAxisModels,(function(t){return s(t,"xAxis","xAxisIndex")})),_C(o.yAxisModels,(function(t){return s(t,"yAxis","yAxisIndex")})),r}function s(t,e,n){var a=t.componentIndex,o={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:xC+e+a};o[n]=a,r.push(o)}}));var SC=bC;var CC=["rect","polygon","keep","clear"];function kC(t,e){var n=ra(t?t.brush:[]);if(n.length){var i=[];ie(n,(function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(i=i.concat(e))}));var r=t&&t.toolbox;pe(r)&&(r=r[0]),r||(r={feature:{}},t.toolbox=[r]);var a,o,s=r.feature||(r.feature={}),l=s.brush||(s.brush={}),u=l.type||(l.type=[]);u.push.apply(u,i),o={},ie(a=u,(function(t){o[t]=1})),a.length=0,ie(o,(function(t,e){a.push(e)})),e&&!u.length&&u.push.apply(u,CC)}}var IC=ie;function DC(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function TC(t,e,n){var i={};return IC(e,(function(e){var r,a=i[e]=((r=function(){}).prototype.__hidden=r.prototype,new r);IC(t[e],(function(t,i){if(Bm.isValidType(i)){var r={type:i,visual:t};n&&n(r,e),a[i]=new Bm(r),"opacity"===i&&((r=Pn(r)).type="colorAlpha",a.__hidden.__alphaForOpacity=new Bm(r))}}))})),i}function AC(t,e,n){var i;ie(n,(function(t){e.hasOwnProperty(t)&&DC(e[t])&&(i=!0)})),i&&ie(n,(function(n){e.hasOwnProperty(n)&&DC(e[n])?t[n]=Pn(e[n]):delete t[n]}))}var EC={lineX:LC(0),lineY:LC(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&gu(n.range,t[0],t[1])},rect:function(t,e,n){var i=n.range;if(!t||i.length<=1)return!1;var r=t.x,a=t.y,o=t.width,s=t.height,l=i[0];return!!(gu(i,r,a)||gu(i,r+o,a)||gu(i,r,a+s)||gu(i,r+o,a+s)||xe.create(t).contain(l[0],l[1])||Go(r,a,r+o,a,i)||Go(r,a,r,a+s,i)||Go(r+o,a,r+o,a+s,i)||Go(r,a+s,r+o,a+s,i))||void 0}}};function LC(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,i){if(e){var r=i.range;return PC(e[t],r)}},rect:function(i,r,a){if(i){var o=a.range,s=[i[e[t]],i[e[t]]+i[n[t]]];return s[1]<s[0]&&s.reverse(),PC(s[0],o)||PC(s[1],o)||PC(o[0],s)||PC(o[1],s)}}}}function PC(t,e){return e[0]<=t&&t<=e[1]}var NC=["inBrush","outOfBrush"],OC="__ecInBrushSelectEvent";function zC(t){t.eachComponent({mainType:"brush"},(function(e){(e.brushTargetManager=new yC(e.option,t)).setInputRanges(e.areas,t)}))}function RC(t,e,n){var i,r,a=[];t.eachComponent({mainType:"brush"},(function(t){n&&"takeGlobalCursor"===n.type&&t.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})})),zC(t),t.eachComponent({mainType:"brush"},(function(e,n){var o={brushId:e.id,brushIndex:n,brushName:e.name,areas:Pn(e.areas),selected:[]};a.push(o);var s=e.option,l=s.brushLink,u=[],c=[],d=[],h=!1;n||(i=s.throttleType,r=s.throttleDelay);var p=me(e.areas,(function(t){var e=BC[t.brushType],n=He({boundingRect:e?e(t):void 0},t);return n.selectors=function(t){var e=t.brushType,n={point:function(i){return EC[e].point(i,n,t)},rect:function(i){return EC[e].rect(i,n,t)}};return n}(n),n})),f=TC(e.option,NC,(function(t){t.mappingMethod="fixed"}));function g(t){return"all"===l||!!u[t]}function m(t){return!!t.length}pe(l)&&ie(l,(function(t){u[t]=1})),t.eachSeries((function(n,i){var r=d[i]=[];"parallel"===n.subType?function(t,e){var n=t.coordinateSystem;h=h||n.hasAxisBrushed(),g(e)&&n.eachActiveState(t.getData(),(function(t,e){"active"===t&&(c[e]=1)}))}(n,i):function(n,i,r){if(!n.brushSelector||function(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(pe(n)?sn(n,e)<0:e!==n)}(e,i))return;if(ie(p,(function(i){e.brushTargetManager.controlSeries(i,n,t)&&r.push(i),h=h||m(r)})),g(i)&&m(r)){var a=n.getData();a.each((function(t){FC(n,r,a,t)&&(c[t]=1)}))}}(n,i,r)})),t.eachSeries((function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};o.selected.push(n);var i=d[e],r=t.getData(),a=g(e)?function(t){return c[t]?(n.dataIndex.push(r.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(e){return FC(t,i,r,e)?(n.dataIndex.push(r.getRawIndex(e)),"inBrush"):"outOfBrush"};(g(e)?h:m(i))&&function(t,e,n,i,r,a){var o,s={};function l(t){return Bo(n,o,t)}function u(t,e){Ho(n,o,t,e)}function c(t,c){o=null==a?t:c;var d=n.getRawDataItem(o);if(!d||!1!==d.visualMap)for(var h=i.call(r,t),p=e[h],f=s[h],g=0,m=f.length;g<m;g++){var v=f[g];p[v]&&p[v].applyVisual(t,l,u)}}ie(t,(function(t){var n=Bm.prepareVisualTypes(e[t]);s[t]=n})),null==a?n.each(c):n.each([a],c)}(NC,f,r,a)}))})),function(t,e,n,i,r){if(!r)return;var a=t.getZr();if(a[OC])return;a.__ecBrushSelect||(a.__ecBrushSelect=VC);za(a,"__ecBrushSelect",n,e)(t,i)}(e,i,r,a,n)}function VC(t,e){if(!t.isDisposed()){var n=t.getZr();n[OC]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[OC]=!1}}function FC(t,e,n,i){for(var r=0,a=e.length;r<a;r++){var o=e[r];if(t.brushSelector(i,n,o.selectors,o))return!0}}var BC={rect:function(t){return HC(t.range)},polygon:function(t){for(var e,n=t.range,i=0,r=n.length;i<r;i++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=n[i];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&HC(e)}};function HC(t){return new xe(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var GC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new P_(e.getZr())).on("brush",vi(this._onBrush,this)).mount()},e.prototype.render=function(t,e,n,i){this.model=t,this._updateController(t,e,n,i)},e.prototype.updateTransform=function(t,e,n,i){zC(e),this._updateController(t,e,n,i)},e.prototype.updateVisual=function(t,e,n,i){this.updateTransform(t,e,n,i)},e.prototype.updateView=function(t,e,n,i){this._updateController(t,e,n,i)},e.prototype._updateController=function(t,e,n,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var e=this.model.id,n=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:e,areas:Pn(n),$from:e}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:e,areas:Pn(n),$from:e})},e.type="brush",e}(gr);function jC(t,e){return $i({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new wr(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var WC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.areas=[],n.brushOption={},n}return _e(e,t),e.prototype.optionUpdated=function(t,e){var n=this.option;!e&&AC(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:"#ddd"},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=me(t,(function(t){return jC(this.option,t)}),this))},e.prototype.setBrushOption=function(t){this.brushOption=jC(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(Ui),UC=["rect","polygon","lineX","lineY","keep","clear"],YC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _e(e,t),e.prototype.render=function(t,e,n){var i,r,a;e.eachComponent({mainType:"brush"},(function(t){i=t.brushType,r=t.brushOption.brushMode||"single",a=a||!!t.areas.length})),this._brushType=i,this._brushMode=r,ie(t.get("type",!0),(function(e){t.setIconStatus(e,("keep"===e?"multiple"===r:"clear"===e?a:e===i)?"emphasis":"normal")}))},e.prototype.updateView=function(t,e,n){this.render(t,e,n)},e.prototype.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return ie(t.get("type",!0),(function(t){e[t]&&(n[t]=e[t])})),n},e.prototype.onclick=function(t,e,n){var i=this._brushType,r=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===r?"single":"multiple":r}})},e.getDefaultOption=function(t){return{show:!0,type:UC.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])}},e}(RS);var $C=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode="box",n}return _e(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t,e=this.option,n=e.data||[],i=e.axisType,r=this._names=[];"category"===i?(t=[],ie(n,(function(e,n){var i,a=na(fe(e),"");$n(e)?(i=Pn(e)).value=n:i=n,t.push(i),r.push(a)}))):t=n;var a={category:"ordinal",time:"time",value:"number"}[i]||"number";(this._data=new he([{name:"value",type:a}],this)).initData(t,r)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(Ui),qC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="timeline.slider",e.defaultOption=Di($C.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}($C);Yi(qC,jo.prototype);var XC=qC,ZC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="timeline",e}(gr),JC=function(t){function e(e,n,i,r){var a=t.call(this,e,n,i)||this;return a.type=r||"value",a}return _e(e,t),e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},e}(Fu),KC=Math.PI,QC=De();function tk(t,e,n,i,r,a){var o=e.get("color");if(r)r.setColor(o),n.add(r),a&&a.onUpdate(r);else{var s=t.get("symbol");(r=Kn(s,-1,-1,2,2,o)).setStyle("strokeNoScale",!0),n.add(r),a&&a.onCreate(r)}var l=e.getItemStyle(["color"]);r.setStyle(l),i=$i({rectHover:!0,z2:100},i,!0);var u=ui(t.get("symbolSize"));i.scaleX=u[0]/2,i.scaleY=u[1]/2;var c=ai(t.get("symbolOffset"),u);c&&(i.x=(i.x||0)+c[0],i.y=(i.y||0)+c[1]);var d=t.get("symbolRotate");return i.rotation=(d||0)*Math.PI/180||0,r.attr(i),r.updateTransform(),r}function ek(t,e,n,i,r,a){if(!t.dragging){var o=r.getModel("checkpointStyle"),s=i.dataToCoord(r.getData().get("value",n));if(a||!o.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}var nk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(t,e){this.api=e},e.prototype.render=function(t,e,n){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,n),r=this._createGroup("_mainGroup"),a=this._createGroup("_labelGroup"),o=this._axis=this._createAxis(i,t);t.formatTooltip=function(t){var e=o.scale.getLabel({value:t});return br("nameValue",{noName:!0,value:e})},ie(["AxisLine","AxisTick","Control","CurrentPointer"],(function(e){this["_render"+e](i,r,o,t)}),this),this._renderAxisLabel(i,a,o,t),this._position(i,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,e){var n,i,r,a,o=t.get(["label","position"]),s=t.get("orient"),l=function(t,e){return Vi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}(t,e),u={horizontal:"center",vertical:(n=null==o||"auto"===o?"horizontal"===s?l.y+l.height/2<e.getHeight()/2?"-":"+":l.x+l.width/2<e.getWidth()/2?"+":"-":vn(o)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][o]:o)>=0||"+"===n?"left":"right"},c={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:KC/2},h="vertical"===s?l.height:l.width,p=t.getModel("controlStyle"),f=p.get("show",!0),g=f?p.get("itemSize"):0,m=f?p.get("itemGap"):0,v=g+m,y=t.get(["label","rotate"])||0;y=y*KC/180;var _=p.get("position",!0),x=f&&p.get("showPlayBtn",!0),b=f&&p.get("showPrevBtn",!0),w=f&&p.get("showNextBtn",!0),M=0,S=h;"left"===_||"bottom"===_?(x&&(i=[0,0],M+=v),b&&(r=[M,0],M+=v),w&&(a=[S-g,0],S-=v)):(x&&(i=[S-g,0],S-=v),b&&(r=[0,0],M+=v),w&&(a=[S-g,0],S-=v));var C=[M,S];return t.get("inverse")&&C.reverse(),{viewRect:l,mainLength:h,orient:s,rotation:d[s],labelRotation:y,labelPosOpt:n,labelAlign:t.get(["label","align"])||u[s],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||c[s],playPosition:i,prevBtnPosition:r,nextBtnPosition:a,axisExtent:C,controlSize:g,controlGap:m}},e.prototype._position=function(t,e){var n=this._mainGroup,i=this._labelGroup,r=t.viewRect;if("vertical"===t.orient){var a=Vr(),o=r.x,s=r.y+r.height;Rr(a,a,[-o,-s]),Or(a,a,-KC/2),Rr(a,a,[o,s]),(r=r.clone()).applyTransform(a)}var l=m(r),u=m(n.getBoundingRect()),c=m(i.getBoundingRect()),d=[n.x,n.y],h=[i.x,i.y];h[0]=d[0]=l[0][0];var p,f=t.labelPosOpt;null==f||vn(f)?(v(d,u,l,1,p="+"===f?0:1),v(h,c,l,1,1-p)):(v(d,u,l,1,p=f>=0?0:1),h[1]=d[1]+f);function g(t){t.originX=l[0][0]-t.x,t.originY=l[1][0]-t.y}function m(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function v(t,e,n,i,r){t[i]+=n[i][r]-e[i][r]}n.setPosition(d),i.setPosition(h),n.rotation=i.rotation=t.rotation,g(n),g(i)},e.prototype._createAxis=function(t,e){var n=e.getData(),i=e.get("axisType"),r=function(t,e){if(e=e||t.get("type"))switch(e){case"category":return new Yo({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new Uo({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new Ki}}(e,i);r.getTicks=function(){return n.mapArray(["value"],(function(t){return{value:t}}))};var a=n.getDataExtent("value");r.setExtent(a[0],a[1]),r.calcNiceTicks();var o=new JC("value",r,t.axisExtent,i);return o.model=e,o},e.prototype._createGroup=function(t){var e=this[t]=new Jn;return this.group.add(e),e},e.prototype._renderAxisLine=function(t,e,n,i){var r=n.getExtent();if(i.get(["lineStyle","show"])){var a=new pr({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:xn({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});e.add(a);var o=this._progressLine=new pr({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:He({lineCap:"round",lineWidth:a.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});e.add(o)}},e.prototype._renderAxisTick=function(t,e,n,i){var r=this,a=i.getData(),o=n.scale.getTicks();this._tickSymbols=[],ie(o,(function(t){var o=n.dataToCoord(t.value),s=a.getItemModel(t.value),l=s.getModel("itemStyle"),u=s.getModel(["emphasis","itemStyle"]),c=s.getModel(["progress","itemStyle"]),d={x:o,y:0,onclick:vi(r._changeTimeline,r,t.value)},h=tk(s,l,e,d);h.ensureState("emphasis").style=u.getItemStyle(),h.ensureState("progress").style=c.getItemStyle(),Wo(h);var p=Je(h);s.get("tooltip")?(p.dataIndex=t.value,p.dataModel=i):p.dataIndex=p.dataModel=null,r._tickSymbols.push(h)}))},e.prototype._renderAxisLabel=function(t,e,n,i){var r=this;if(n.getLabelModel().get("show")){var a=i.getData(),o=n.getViewLabels();this._tickLabels=[],ie(o,(function(i){var o=i.tickValue,s=a.getItemModel(o),l=s.getModel("label"),u=s.getModel(["emphasis","label"]),c=s.getModel(["progress","label"]),d=n.dataToCoord(i.tickValue),h=new Mi({x:d,y:0,rotation:t.labelRotation-t.rotation,onclick:vi(r._changeTimeline,r,o),silent:!1,style:sa(l,{text:i.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});h.ensureState("emphasis").style=sa(u),h.ensureState("progress").style=sa(c),e.add(h),Wo(h),QC(h).dataIndex=o,r._tickLabels.push(h)}))}},e.prototype._renderControl=function(t,e,n,i){var r=t.controlSize,a=t.rotation,o=i.getModel("controlStyle").getItemStyle(),s=i.getModel(["emphasis","controlStyle"]).getItemStyle(),l=i.getPlayState(),u=i.get("inverse",!0);function c(t,n,l,u){if(t){var c=Ai(Fe(i.get(["controlStyle",n+"BtnSize"]),r),r),d=function(t,e,n,i){var r=i.style,a=Eo(t.get(["controlStyle",e]),i||{},new xe(n[0],n[1],n[2],n[3]));r&&a.setStyle(r);return a}(i,n+"Icon",[0,-c/2,c,c],{x:t[0],y:t[1],originX:r/2,originY:0,rotation:u?-a:0,rectHover:!0,style:o,onclick:l});d.ensureState("emphasis").style=s,e.add(d),Wo(d)}}c(t.nextBtnPosition,"next",vi(this._changeTimeline,this,u?"-":"+")),c(t.prevBtnPosition,"prev",vi(this._changeTimeline,this,u?"+":"-")),c(t.playPosition,l?"stop":"play",vi(this._handlePlayClick,this,!l),!0)},e.prototype._renderCurrentPointer=function(t,e,n,i){var r=i.getData(),a=i.getCurrentIndex(),o=r.getItemModel(a).getModel("checkpointStyle"),s=this,l={onCreate:function(t){t.draggable=!0,t.drift=vi(s._handlePointerDrag,s),t.ondragend=vi(s._handlePointerDragend,s),ek(t,s._progressLine,a,n,i,!0)},onUpdate:function(t){ek(t,s._progressLine,a,n,i)}};this._currentPointer=tk(o,o,this._mainGroup,{},this._currentPointer,l)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,e){var n=this._toAxisCoord(t)[0],i=this._axis,r=Fa(i.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var a=this._progressLine;a&&(a.shape.x2=n,a.dirty());var o=this._findNearestTick(n),s=this.model;(e||o!==s.getCurrentIndex()&&s.get("realtime"))&&this._changeTimeline(o)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout((function(){var e=t.model;t._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))}),this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var e=this._mainGroup.getLocalTransform();return Va(t,e,!0)},e.prototype._findNearestTick=function(t){var e,n=this.model.getData(),i=1/0,r=this._axis;return n.each(["value"],(function(n,a){var o=r.dataToCoord(n),s=Math.abs(o-t);s<i&&(i=s,e=a)})),e},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),e=this._tickSymbols,n=this._tickLabels;if(e)for(var i=0;i<e.length;i++)e&&e[i]&&e[i].toggleState("progress",i<t);if(n)for(i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",QC(n[i]).dataIndex<=t)},e.type="timeline.slider",e}(ZC);function ik(t){var e=t&&t.timeline;pe(e)||(e=e?[e]:[]),ie(e,(function(t){t&&function(t){var e=t.type,n={number:"value",time:"time"};n[e]&&(t.axisType=n[e],delete t.type);if(rk(t),ak(t,"controlPosition")){var i=t.controlStyle||(t.controlStyle={});ak(i,"position")||(i.position=t.controlPosition),"none"!==i.position||ak(i,"show")||(i.show=!1,delete i.position),delete t.controlPosition}ie(t.data||[],(function(t){$n(t)&&!pe(t)&&(!ak(t,"value")&&ak(t,"name")&&(t.value=t.name),rk(t))}))}(t)}))}function rk(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),i=t.label||t.label||{},r=i.normal||(i.normal={}),a={normal:1,emphasis:1};ie(i,(function(t,e){a[e]||ak(r,e)||(r[e]=t)})),n.label&&!ak(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function ak(t,e){return t.hasOwnProperty(e)}function ok(t,e){if(!t)return!1;for(var n=pe(t)?t:[t],i=0;i<n.length;i++)if(n[i]&&n[i][e])return!0;return!1}function sk(t){ji(t,"label",["show"])}var lk=De(),uk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.createdBySelf=!1,n}return _e(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(No.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,e){this._mergeOption(t,e,!1,!1)},e.prototype._mergeOption=function(t,e,n,i){var r=this.mainType;n||e.eachSeries((function(t){var n=t.get(this.mainType,!0),a=lk(t)[r];n&&n.data?(a?a._mergeOption(n,e,!0):(i&&sk(n),ie(n.data,(function(t){t instanceof Array?(sk(t[0]),sk(t[1])):sk(t)})),a=this.createMarkerModelFromSeries(n,this,e),xn(a,{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),a.__hostSeries=t),lk(t)[r]=a):lk(t)[r]=null}),this)},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=this.getRawValue(t),a=i.getName(t);return br("section",{header:this.name,blocks:[br("nameValue",{name:a,value:r,noName:!a,noValue:null==r})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,e){var n=jo.prototype.getDataParams.call(this,t,e),i=this.__hostSeries;return i&&(n.seriesId=i.id,n.seriesName=i.name,n.seriesType=i.subType),n},e.getMarkerModelFromSeries=function(t,e){return lk(t)[e]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(Ui);Yi(uk,jo.prototype);var ck=uk,dk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(ck);function hk(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function pk(t,e,n,i,r,a){var o=[],s=di(e,i)?e.getCalculationInfo("stackResultDimension"):i,l=_k(e,s,t),u=e.indicesOfNearest(s,l)[0];o[r]=e.get(n,u),o[a]=e.get(s,u);var c=e.get(i,u),d=$o(e.get(i,u));return(d=Math.min(d,20))>=0&&(o[a]=+o[a].toFixed(d)),[o,c]}var fk={min:le(pk,"min"),max:le(pk,"max"),average:le(pk,"average"),median:le(pk,"median")};function gk(t,e){if(e){var n=t.getData(),i=t.coordinateSystem,r=i&&i.dimensions;if(!function(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}(e)&&!pe(e.coord)&&pe(r)){var a=mk(e,n,i,t);if((e=Pn(e)).type&&fk[e.type]&&a.baseAxis&&a.valueAxis){var o=sn(r,a.baseAxis.dim),s=sn(r,a.valueAxis.dim),l=fk[e.type](n,a.baseDataDim,a.valueDataDim,o,s);e.coord=l[0],e.value=l[1]}else e.coord=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis]}if(null!=e.coord&&pe(r))for(var u=e.coord,c=0;c<2;c++)fk[u[c]]&&(u[c]=_k(n,n.mapDimension(r[c]),u[c]));else e.coord=[];return e}}function mk(t,e,n,i){var r={};return null!=t.valueIndex||null!=t.valueDim?(r.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,r.valueAxis=n.getAxis(function(t,e){var n=t.getData().getDimensionInfo(e);return n&&n.coordDim}(i,r.valueDataDim)),r.baseAxis=n.getOtherAxis(r.valueAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim)):(r.baseAxis=i.getBaseAxis(),r.valueAxis=n.getOtherAxis(r.baseAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim),r.valueDataDim=e.mapDimension(r.valueAxis.dim)),r}function vk(t,e){return!(t&&t.containData&&e.coord&&!hk(e))||t.containData(e.coord)}function yk(t,e){return t?function(t,n,i,r){var a=r<2?t.coord&&t.coord[r]:t.value;return qo(a,e[r])}:function(t,n,i,r){return qo(t.value,e[r])}}function _k(t,e,n){if("average"===n){var i=0,r=0;return t.each(e,(function(t,e){isNaN(t)||(i+=t,r++)})),i/r}return"median"===n?t.getMedian(e):t.getDataExtent(e)["max"===n?1:0]}var xk=De(),bk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.init=function(){this.markerGroupMap=re()},e.prototype.render=function(t,e,n){var i=this,r=this.markerGroupMap;r.each((function(t){xk(t).keep=!1})),e.eachSeries((function(t){var r=ck.getMarkerModelFromSeries(t,i.type);r&&i.renderSeries(t,r,e,n)})),r.each((function(t){!xk(t).keep&&i.group.remove(t.group)}))},e.prototype.markKeep=function(t){xk(t).keep=!0},e.prototype.toggleBlurSeries=function(t,e){var n=this;ie(t,(function(t){var i=ck.getMarkerModelFromSeries(t,n.type);i&&i.getData().eachItemGraphicEl((function(t){t&&(e?Xo(t):Zo(t))}))}))},e.type="marker",e}(gr);function wk(t,e,n){var i=e.coordinateSystem;t.each((function(r){var a,o=t.getItemModel(r),s=Ke(o.get("x"),n.getWidth()),l=Ke(o.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(e.getMarkerPosition)a=e.getMarkerPosition(t.getValues(t.dimensions,r));else if(i){var u=t.get(i.dimensions[0],r),c=t.get(i.dimensions[1],r);a=i.dataToPoint([u,c])}}else a=[s,l];isNaN(s)||(a[0]=s),isNaN(l)||(a[1]=l),t.setItemLayout(r,a)}))}var Mk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=ck.getMarkerModelFromSeries(t,"markPoint");e&&(wk(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout())}),this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,a=t.id,o=t.getData(),s=this.markerGroupMap,l=s.get(a)||s.set(a,new zd),u=function(t,e,n){var i;i=t?me(t&&t.dimensions,(function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return xn(xn({},n),{name:t,ordinalMeta:null})})):[{name:"value",type:"float"}];var r=new he(i,n),a=me(n.get("data"),le(gk,e));t&&(a=Ie(a,le(vk,t)));var o=yk(!!t,i);return r.initData(a,null,o),r}(r,t,e);e.setData(u),wk(e.getData(),t,i),u.each((function(t){var n=u.getItemModel(t),i=n.getShallow("symbol"),r=n.getShallow("symbolSize"),a=n.getShallow("symbolRotate"),s=n.getShallow("symbolOffset"),l=n.getShallow("symbolKeepAspect");if(se(i)||se(r)||se(a)||se(s)){var c=e.getRawValue(t),d=e.getDataParams(t);se(i)&&(i=i(c,d)),se(r)&&(r=r(c,d)),se(a)&&(a=a(c,d)),se(s)&&(s=s(c,d))}var h=n.getModel("itemStyle").getItemStyle(),p=Jo(o,"color");h.fill||(h.fill=p),u.setItemVisual(t,{symbol:i,symbolSize:r,symbolRotate:a,symbolOffset:s,symbolKeepAspect:l,style:h})})),l.updateData(u),this.group.add(l.group),u.eachItemGraphicEl((function(t){t.traverse((function(t){Je(t).dataModel=e}))})),this.markKeep(l),l.group.silent=e.get("silent")||t.get("silent")},e.type="markPoint",e}(bk);var Sk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(ck),Ck=De(),kk=function(t,e,n,i){var r,a=t.getData();if(pe(i))r=i;else{var o=i.type;if("min"===o||"max"===o||"average"===o||"median"===o||null!=i.xAxis||null!=i.yAxis){var s=void 0,l=void 0;if(null!=i.yAxis||null!=i.xAxis)s=e.getAxis(null!=i.yAxis?"y":"x"),l=Xr(i.yAxis,i.xAxis);else{var u=mk(i,a,e,t);s=u.valueAxis,l=_k(a,Ko(a,u.valueDataDim),o)}var c="x"===s.dim?0:1,d=1-c,h=Pn(i),p={coord:[]};h.type=null,h.coord=[],h.coord[d]=-1/0,p.coord[d]=1/0;var f=n.get("precision");f>=0&&Mn(l)&&(l=+l.toFixed(Math.min(f,20))),h.coord[c]=p.coord[c]=l,r=[h,p,{type:o,valueIndex:i.valueIndex,value:l}]}else r=[]}var g=[gk(t,r[0]),gk(t,r[1]),xn({},r[2])];return g[2].type=g[2].type||null,$i(g[2],g[0]),$i(g[2],g[1]),g};function Ik(t){return!isNaN(t)&&!isFinite(t)}function Dk(t,e,n,i){var r=1-t,a=i.dimensions[t];return Ik(e[r])&&Ik(n[r])&&e[t]===n[t]&&i.getAxis(a).containData(e[t])}function Tk(t,e){if("cartesian2d"===t.type){var n=e[0].coord,i=e[1].coord;if(n&&i&&(Dk(1,n,i,t)||Dk(0,n,i,t)))return!0}return vk(t,e[0])&&vk(t,e[1])}function Ak(t,e,n,i,r){var a,o=i.coordinateSystem,s=t.getItemModel(e),l=Ke(s.get("x"),r.getWidth()),u=Ke(s.get("y"),r.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)a=i.getMarkerPosition(t.getValues(t.dimensions,e));else{var c=o.dimensions,d=t.get(c[0],e),h=t.get(c[1],e);a=o.dataToPoint([d,h])}if(Zd(o,"cartesian2d")){var p=o.getAxis("x"),f=o.getAxis("y");c=o.dimensions;Ik(t.get(c[0],e))?a[0]=p.toGlobalCoord(p.getExtent()[n?0:1]):Ik(t.get(c[1],e))&&(a[1]=f.toGlobalCoord(f.getExtent()[n?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}else a=[l,u];t.setItemLayout(e,a)}var Ek=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=ck.getMarkerModelFromSeries(t,"markLine");if(e){var i=e.getData(),r=Ck(e).from,a=Ck(e).to;r.each((function(e){Ak(r,e,!0,t,n),Ak(a,e,!1,t,n)})),i.each((function(t){i.setItemLayout(t,[r.getItemLayout(t),a.getItemLayout(t)])})),this.markerGroupMap.get(t.id).updateLayout()}}),this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,a=t.id,o=t.getData(),s=this.markerGroupMap,l=s.get(a)||s.set(a,new Uv);this.group.add(l.group);var u=function(t,e,n){var i;i=t?me(t&&t.dimensions,(function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return xn(xn({},n),{name:t,ordinalMeta:null})})):[{name:"value",type:"float"}];var r=new he(i,n),a=new he(i,n),o=new he([],n),s=me(n.get("data"),le(kk,e,t,n));t&&(s=Ie(s,le(Tk,t)));var l=yk(!!t,i);return r.initData(me(s,(function(t){return t[0]})),null,l),a.initData(me(s,(function(t){return t[1]})),null,l),o.initData(me(s,(function(t){return t[2]}))),o.hasItemOption=!0,{from:r,to:a,line:o}}(r,t,e),c=u.from,d=u.to,h=u.line;Ck(e).from=c,Ck(e).to=d,e.setData(h);var p=e.get("symbol"),f=e.get("symbolSize"),g=e.get("symbolRotate"),m=e.get("symbolOffset");function v(e,n,r){var a=e.getItemModel(n);Ak(e,n,r,t,i);var s=a.getModel("itemStyle").getItemStyle();null==s.fill&&(s.fill=Jo(o,"color")),e.setItemVisual(n,{symbolKeepAspect:a.get("symbolKeepAspect"),symbolOffset:Fe(a.get("symbolOffset",!0),m[r?0:1]),symbolRotate:Fe(a.get("symbolRotate",!0),g[r?0:1]),symbolSize:Fe(a.get("symbolSize"),f[r?0:1]),symbol:Fe(a.get("symbol",!0),p[r?0:1]),style:s})}pe(p)||(p=[p,p]),pe(f)||(f=[f,f]),pe(g)||(g=[g,g]),pe(m)||(m=[m,m]),u.from.each((function(t){v(c,t,!0),v(d,t,!1)})),h.each((function(t){var e=h.getItemModel(t).getModel("lineStyle").getLineStyle();h.setItemLayout(t,[c.getItemLayout(t),d.getItemLayout(t)]),null==e.stroke&&(e.stroke=c.getItemVisual(t,"style").fill),h.setItemVisual(t,{fromSymbolKeepAspect:c.getItemVisual(t,"symbolKeepAspect"),fromSymbolOffset:c.getItemVisual(t,"symbolOffset"),fromSymbolRotate:c.getItemVisual(t,"symbolRotate"),fromSymbolSize:c.getItemVisual(t,"symbolSize"),fromSymbol:c.getItemVisual(t,"symbol"),toSymbolKeepAspect:d.getItemVisual(t,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(t,"symbolOffset"),toSymbolRotate:d.getItemVisual(t,"symbolRotate"),toSymbolSize:d.getItemVisual(t,"symbolSize"),toSymbol:d.getItemVisual(t,"symbol"),style:e})})),l.updateData(h),u.line.eachItemGraphicEl((function(t){Je(t).dataModel=e,t.traverse((function(t){Je(t).dataModel=e}))})),this.markKeep(l),l.group.silent=e.get("silent")||t.get("silent")},e.type="markLine",e}(bk);var Lk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(ck),Pk=De(),Nk=function(t,e,n,i){var r=i[0],a=i[1];if(r&&a){var o=gk(t,r),s=gk(t,a),l=o.coord,u=s.coord;l[0]=Xr(l[0],-1/0),l[1]=Xr(l[1],-1/0),u[0]=Xr(u[0],1/0),u[1]=Xr(u[1],1/0);var c=qr([{},o,s]);return c.coord=[o.coord,s.coord],c.x0=o.x,c.y0=o.y,c.x1=s.x,c.y1=s.y,c}};function Ok(t){return!isNaN(t)&&!isFinite(t)}function zk(t,e,n,i){var r=1-t;return Ok(e[r])&&Ok(n[r])}function Rk(t,e){var n=e.coord[0],i=e.coord[1],r={coord:n,x:e.x0,y:e.y0},a={coord:i,x:e.x1,y:e.y1};return Zd(t,"cartesian2d")?!(!n||!i||!zk(1,n,i)&&!zk(0,n,i))||function(t,e,n){return!(t&&t.containZone&&e.coord&&n.coord&&!hk(e)&&!hk(n))||t.containZone(e.coord,n.coord)}(t,r,a):vk(t,r)||vk(t,a)}function Vk(t,e,n,i,r){var a,o=i.coordinateSystem,s=t.getItemModel(e),l=Ke(s.get(n[0]),r.getWidth()),u=Ke(s.get(n[1]),r.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition){var c=t.getValues(["x0","y0"],e),d=t.getValues(["x1","y1"],e),h=o.clampData(c),p=o.clampData(d),f=[];"x0"===n[0]?f[0]=h[0]>p[0]?d[0]:c[0]:f[0]=h[0]>p[0]?c[0]:d[0],"y0"===n[1]?f[1]=h[1]>p[1]?d[1]:c[1]:f[1]=h[1]>p[1]?c[1]:d[1],a=i.getMarkerPosition(f,n,!0)}else{var g=[y=t.get(n[0],e),_=t.get(n[1],e)];o.clampData&&o.clampData(g,g),a=o.dataToPoint(g,!0)}if(Zd(o,"cartesian2d")){var m=o.getAxis("x"),v=o.getAxis("y"),y=t.get(n[0],e),_=t.get(n[1],e);Ok(y)?a[0]=m.toGlobalCoord(m.getExtent()["x0"===n[0]?0:1]):Ok(_)&&(a[1]=v.toGlobalCoord(v.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}else a=[l,u];return a}var Fk=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];var Bk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=ck.getMarkerModelFromSeries(t,"markArea");if(e){var i=e.getData();i.each((function(e){var r=me(Fk,(function(r){return Vk(i,e,r,t,n)}));i.setItemLayout(e,r),i.getItemGraphicEl(e).setShape("points",r)}))}}),this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,a=t.id,o=t.getData(),s=this.markerGroupMap,l=s.get(a)||s.set(a,{group:new Jn});this.group.add(l.group),this.markKeep(l);var u=function(t,e,n){var i,r,a=["x0","y0","x1","y1"];if(t){var o=me(t&&t.dimensions,(function(t){var n=e.getData(),i=n.getDimensionInfo(n.mapDimension(t))||{};return xn(xn({},i),{name:t,ordinalMeta:null})}));r=me(a,(function(t,e){return{name:t,type:o[e%2].type}})),i=new he(r,n)}else i=new he(r=[{name:"value",type:"float"}],n);var s=me(n.get("data"),le(Nk,e,t,n));t&&(s=Ie(s,le(Rk,t)));var l=t?function(t,e,n,i){var a=t.coord[Math.floor(i/2)][i%2];return qo(a,r[i])}:function(t,e,n,i){return qo(t.value,r[i])};return i.initData(s,null,l),i.hasItemOption=!0,i}(r,t,e);e.setData(u),u.each((function(e){var n=me(Fk,(function(n){return Vk(u,e,n,t,i)})),a=r.getAxis("x").scale,s=r.getAxis("y").scale,l=a.getExtent(),c=s.getExtent(),d=[a.parse(u.get("x0",e)),a.parse(u.get("x1",e))],h=[s.parse(u.get("y0",e)),s.parse(u.get("y1",e))];Fa(d),Fa(h);var p=!!(l[0]>d[1]||l[1]<d[0]||c[0]>h[1]||c[1]<h[0]);u.setItemLayout(e,{points:n,allClipped:p});var f=u.getItemModel(e).getModel("itemStyle").getItemStyle(),g=Jo(o,"color");f.fill||(f.fill=g,vn(f.fill)&&(f.fill=xa(f.fill,.4))),f.stroke||(f.stroke=g),u.setItemVisual(e,"style",f)})),u.diff(Pk(l).data).add((function(t){var e=u.getItemLayout(t);if(!e.allClipped){var n=new yr({shape:{points:e.points}});u.setItemGraphicEl(t,n),l.group.add(n)}})).update((function(t,n){var i=Pk(l).data.getItemGraphicEl(n),r=u.getItemLayout(t);r.allClipped?i&&l.group.remove(i):(i?ln(i,{shape:{points:r.points}},e,t):i=new yr({shape:{points:r.points}}),u.setItemGraphicEl(t,i),l.group.add(i))})).remove((function(t){var e=Pk(l).data.getItemGraphicEl(t);l.group.remove(e)})).execute(),u.eachItemGraphicEl((function(t,n){var i=u.getItemModel(n),r=u.getItemVisual(n,"style");t.useStyle(u.getItemVisual(n,"style")),oi(t,ri(i),{labelFetcher:e,labelDataIndex:n,defaultText:u.getName(n)||"",inheritColor:vn(r.fill)?xa(r.fill,1):"#000"}),_i(t,i),si(t,null,null,i.get(["emphasis","disabled"])),Je(t).dataModel=e})),Pk(l).data=u,l.group.silent=e.get("silent")||t.get("silent")},e.type="markArea",e}(bk);var Hk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="dataZoom.inside",e.defaultOption=Di(kS.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(kS),Gk=De();function jk(t,e,n){Gk(t).coordSysRecordMap.each((function(t){var i=t.dataZoomInfoMap.get(e.uid);i&&(i.getRange=n)}))}function Wk(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function Uk(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function Yk(t,e,n,i){return t.coordinateSystem.containPoint([n,i])}function $k(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,(function(t,e){var n=Gk(e),i=n.coordSysRecordMap||(n.coordSysRecordMap=re());i.each((function(t){t.dataZoomInfoMap=null})),t.eachComponent({mainType:"dataZoom",subType:"inside"},(function(t){var n=MS(t);ie(n.infoList,(function(n){var r=n.model.uid,a=i.get(r)||i.set(r,function(t,e){var n={model:e,containsPoint:le(Yk,e),dispatchAction:le(Uk,t),dataZoomInfoMap:null,controller:null},i=n.controller=new rf(t.getZr());return ie(["pan","zoom","scrollMove"],(function(t){i.on(t,(function(e){var i=[];n.dataZoomInfoMap.each((function(r){if(e.isAvailableBehavior(r.model.option)){var a=(r.getRange||{})[t],o=a&&a(r.dzReferCoordSysInfo,n.model.mainType,n.controller,e);!r.model.get("disabled",!0)&&o&&i.push({dataZoomId:r.model.id,start:o[0],end:o[1]})}})),i.length&&n.dispatchAction(i)}))})),n}(e,n.model));(a.dataZoomInfoMap||(a.dataZoomInfoMap=re())).set(t.uid,{dzReferCoordSysInfo:n,model:t,getRange:null})}))})),i.each((function(t){var e,n=t.controller,r=t.dataZoomInfoMap;if(r){var a=r.keys()[0];null!=a&&(e=r.get(a))}if(e){var o=function(t){var e,n="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return t.each((function(t){var a=t.model,o=!a.get("disabled",!0)&&(!a.get("zoomLock",!0)||"move");i[n+o]>i[n+e]&&(e=o),r=r&&a.get("preventDefaultMouseMove",!0)})),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}(r);n.enable(o.controlType,o.opt),n.setPointerChecker(t.containsPoint),za(t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else Wk(i,t)}))}))}var qk=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return _e(e,t),e.prototype.render=function(e,n,i){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),jk(i,e,{pan:vi(Xk.pan,this),zoom:vi(Xk.zoom,this),scrollMove:vi(Xk.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){!function(t,e){for(var n=Gk(t).coordSysRecordMap,i=n.keys(),r=0;r<i.length;r++){var a=i[r],o=n.get(a),s=o.dataZoomInfoMap;if(s){var l=e.uid;s.get(l)&&(s.removeKey(l),s.keys().length||Wk(n,o))}}}(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(DS),Xk={zoom:function(t,e,n,i){var r=this.range,a=r.slice(),o=t.axisModels[0];if(o){var s=Jk[e](null,[i.originX,i.originY],o,n,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/i.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Ly(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,r[0]!==a[0]||r[1]!==a[1]?a:void 0}},pan:Zk((function(t,e,n,i,r,a){var o=Jk[i]([a.oldX,a.oldY],[a.newX,a.newY],e,r,n);return o.signal*(t[1]-t[0])*o.pixel/o.pixelLength})),scrollMove:Zk((function(t,e,n,i,r,a){return Jk[i]([0,0],[a.scrollDelta,a.scrollDelta],e,r,n).signal*(t[1]-t[0])*a.scrollDelta}))};function Zk(t){return function(e,n,i,r){var a=this.range,o=a.slice(),s=e.axisModels[0];if(s)return Ly(t(o,s,e,n,i,r),o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1]?o:void 0}}var Jk={grid:function(t,e,n,i,r){var a=n.axis,o={},s=r.model.coordinateSystem.getRect();return t=t||[0,0],"x"===a.dim?(o.pixel=e[0]-t[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(t,e,n,i,r){var a=n.axis,o={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(o.pixel=e[0]-t[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(t,e,n,i,r){var a=n.axis,o=r.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===a.orient?(s.pixel=e[0]-t[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}},Kk=qk;function Qk(t){OS(t),t.registerComponentModel(Hk),t.registerComponentView(Kk),$k(t)}var tI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Di(kS.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(kS),eI=gi,nI=["line","bar","candlestick","scatter"],iI={easing:"cubicOut",duration:100,delay:0};function rI(t){return"vertical"===t?"ns-resize":"ew-resize"}var aI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return _e(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=vi(this._onBrush,this),this._onBrushEnd=vi(this._onBrushEnd,this)},e.prototype.render=function(e,n,i,r){if(t.prototype.render.apply(this,arguments),za(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();r&&"dataZoom"===r.type&&r.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){Ra(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new Jn;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,n=t.get("brushSelect")?7:0,i=this._findCoordRect(),r={width:e.getWidth(),height:e.getHeight()},a="horizontal"===this._orient?{right:r.width-i.x-i.width,top:r.height-30-7-n,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},o=Xi(t.option);ie(["right","top","width","height"],(function(t){"ph"===o[t]&&(o[t]=a[t])}));var s=Vi(o,r);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],"vertical"===this._orient&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),r=i&&i.get("inverse"),a=this._displayables.sliderGroup,o=(this._dataShadowInfo||{}).otherAxisInverse;a.attr("horizontal"!==n||r?"horizontal"===n&&r?{scaleY:o?1:-1,scaleX:-1}:"vertical"!==n||r?{scaleY:o?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:o?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:o?1:-1,scaleX:1});var s=t.getBoundingRect([a]);t.x=e.x-s.x,t.y=e.y-s.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.sliderGroup,i=t.get("brushSelect");n.add(new eI({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var r=new eI({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:vi(this._onClickPanel,this)}),a=this.api.getZr();i?(r.on("mousedown",this._onBrushStart,this),r.cursor="crosshair",a.on("mousemove",this._onBrush),a.on("mouseup",this._onBrushEnd)):(a.off("mousemove",this._onBrush),a.off("mouseup",this._onBrushEnd)),n.add(r)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,n=this._shadowSize||[],i=t.series,r=i.getRawData(),a=i.getShadowDim&&i.getShadowDim(),o=a&&r.getDimensionInfo(a)?i.getShadowDim():t.otherDim;if(null!=o){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(r!==this._shadowData||o!==this._shadowDim||e[0]!==n[0]||e[1]!==n[1]){var u=r.getDataExtent(o),c=.3*(u[1]-u[0]);u=[u[0]-c,u[1]+c];var d,h=[0,e[1]],p=[0,e[0]],f=[[e[0],0],[0,0]],g=[],m=p[1]/(r.count()-1),v=0,y=Math.round(r.count()/e[0]);r.each([o],(function(t,e){if(y>0&&e%y)v+=m;else{var n=null==t||isNaN(t)||""===t,i=n?0:Ne(t,u,h,!0);n&&!d&&e?(f.push([f[f.length-1][0],0]),g.push([g[g.length-1][0],0])):!n&&d&&(f.push([v,0]),g.push([v,0])),f.push([v,i]),g.push([v,i]),v+=m,d=n}})),s=this._shadowPolygonPts=f,l=this._shadowPolylinePts=g}this._shadowData=r,this._shadowDim=o,this._shadowSize=[e[0],e[1]];for(var _,x,b,w,M,S=this.dataZoomModel,C=0;C<3;C++){var k=(_=1===C,x=void 0,b=void 0,w=void 0,M=void 0,x=S.getModel(_?"selectedDataBackground":"dataBackground"),b=new Jn,w=new yr({shape:{points:s},segmentIgnoreThreshold:1,style:x.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),M=new Be({shape:{points:l},segmentIgnoreThreshold:1,style:x.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),b.add(w),b.add(M),b);this._displayables.sliderGroup.add(k),this._displayables.dataShadowSegs.push(k)}}}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,i=this.ecModel;return t.eachTargetAxis((function(r,a){var o=t.getAxisProxy(r,a).getTargetSeriesModels();ie(o,(function(t){if(!(n||!0!==e&&sn(nI,t.get("type"))<0)){var o,s=i.getComponent(bS(r),a).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[r],u=t.coordinateSystem;null!=l&&u.getOtherAxis&&(o=u.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:r,otherDim:l,otherAxisInverse:o}}}),this)}),this),n}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,n=e.handles=[null,null],i=e.handleLabels=[null,null],r=this._displayables.sliderGroup,a=this._size,o=this.dataZoomModel,s=this.api,l=o.get("borderRadius")||0,u=o.get("brushSelect"),c=e.filler=new eI({silent:u,style:{fill:o.get("fillerColor")},textConfig:{position:"inside"}});r.add(c),r.add(new eI({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1],r:l},style:{stroke:o.get("dataBackgroundColor")||o.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),ie([0,1],(function(e){var a=o.get("handleIcon");!Qo[a]&&a.indexOf("path://")<0&&a.indexOf("image://")<0&&(a="path://"+a);var s=Kn(a,-1,0,2,2,null,!0);s.attr({cursor:rI(this._orient),draggable:!0,drift:vi(this._onDragMove,this,e),ondragend:vi(this._onDragEnd,this),onmouseover:vi(this._showDataInfo,this,!0),onmouseout:vi(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),u=o.get("handleSize");this._handleHeight=Ke(u,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(o.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=o.getModel(["emphasis","handleStyle"]).getItemStyle(),Wo(s);var c=o.get("handleColor");null!=c&&(s.style.fill=c),r.add(n[e]=s);var d=o.getModel("textStyle"),h=(o.get("handleLabel")||{}).show||!1;t.add(i[e]=new Mi({silent:!0,invisible:!h,style:sa(d,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:d.getTextColor(),font:d.getFont()}),z2:10}))}),this);var d=c;if(u){var h=Ke(o.get("moveHandleSize"),a[1]),p=e.moveHandle=new gi({style:o.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:a[1]-.5,height:h}}),f=.8*h,g=e.moveHandleIcon=Kn(o.get("moveHandleIcon"),-f/2,-f/2,f,f,"#fff",!0);g.silent=!0,g.y=a[1]+h/2-.5,p.ensureState("emphasis").style=o.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var m=Math.min(a[1]/2,Math.max(h,10));(d=e.moveZone=new gi({invisible:!0,shape:{y:a[1]-m,height:h+m}})).on("mouseover",(function(){s.enterEmphasis(p)})).on("mouseout",(function(){s.leaveEmphasis(p)})),r.add(p),r.add(g),r.add(d)}d.attr({draggable:!0,cursor:rI(this._orient),drift:vi(this._onDragMove,this,"all"),ondragstart:vi(this._showDataInfo,this,!0),ondragend:vi(this._onDragEnd,this),onmouseover:vi(this._showDataInfo,this,!0),onmouseout:vi(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[Ne(t[0],[0,100],e,!0),Ne(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var n=this.dataZoomModel,i=this._handleEnds,r=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),o=[0,100];Ly(e,i,r,n.get("zoomLock")?"all":t,null!=a.minSpan?Ne(a.minSpan,o,r,!0):null,null!=a.maxSpan?Ne(a.maxSpan,o,r,!0):null);var s=this._range,l=this._range=Fa([Ne(i[0],r,o,!0),Ne(i[1],r,o,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},e.prototype._updateView=function(t){var e=this._displayables,n=this._handleEnds,i=Fa(n.slice()),r=this._size;ie([0,1],(function(t){var i=e.handles[t],a=this._handleHeight;i.attr({scaleX:a/2,scaleY:a/2,x:n[t]+(t?-1:1),y:r[1]/2-a/2})}),this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:r[1]});var a={x:i[0],width:i[1]-i[0]};e.moveHandle&&(e.moveHandle.setShape(a),e.moveZone.setShape(a),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",a.x+a.width/2));for(var o=e.dataShadowSegs,s=[0,i[0],i[1],r[0]],l=0;l<o.length;l++){var u=o[l],c=u.getClipPath();c||(c=new gi,u.setClipPath(c)),c.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:r[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,n=this._displayables,i=n.handleLabels,r=this._orient,a=["",""];if(e.get("showDetail")){var o=e.findRepresentativeAxisProxy();if(o){var s=o.getAxisModel().axis,l=this._range,u=t?o.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:o.getDataValueWindow();a=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var c=Fa(this._handleEnds.slice());function d(t){var e=Ha(n.handles[t].parent,this.group),o=Ba(0===t?"right":"left",e),s=this._handleWidth/2+5,l=Va([c[t]+(0===t?-s:s),this._size[1]/2],e);i[t].setStyle({x:l[0],y:l[1],verticalAlign:"horizontal"===r?"middle":o,align:"horizontal"===r?o:"center",text:a[t]})}d.call(this,0),d.call(this,1)},e.prototype._formatLabel=function(t,e){var n=this.dataZoomModel,i=n.get("labelFormatter"),r=n.get("labelPrecision");null!=r&&"auto"!==r||(r=e.getPixelPrecision());var a=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(r,20));return se(i)?i(t,a):vn(i)?i.replace("{value}",a):a},e.prototype._showDataInfo=function(t){var e=(this.dataZoomModel.get("handleLabel")||{}).show||!1,n=this.dataZoomModel.getModel(["emphasis","handleLabel"]).get("show")||!1,i=t||this._dragging?n:e,r=this._displayables,a=r.handleLabels;a[0].attr("invisible",!i),a[1].attr("invisible",!i),r.moveHandle&&this.api[i?"enterEmphasis":"leaveEmphasis"](r.moveHandle,1)},e.prototype._onDragMove=function(t,e,n,i){this._dragging=!0,Dr(i.event);var r=this._displayables.sliderGroup.getLocalTransform(),a=Va([e,n],r,!0),o=this._updateInterval(t,a[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),o&&s&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var i=this._handleEnds,r=(i[0]+i[1])/2,a=this._updateInterval("all",n[0]-r);this._updateView(),a&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,n=t.offsetY;this._brushStart=new Re(e,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var n=e.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var i=this._getViewExtent(),r=[0,100];this._range=Fa([Ne(n.x,i,r,!0),Ne(n.x+n.width,i,r,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(Dr(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var n=this._displayables,i=this.dataZoomModel,r=n.brushRect;r||(r=n.brushRect=new eI({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(r)),r.attr("ignore",!1);var a=this._brushStart,o=this._displayables.sliderGroup,s=o.transformCoordToLocal(t,e),l=o.transformCoordToLocal(a.x,a.y),u=this._size;s[0]=Math.max(Math.min(u[0],s[0]),0),r.setShape({x:l[0],y:0,width:s[0]-l[0],height:u[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?iI:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=MS(this.dataZoomModel).infoList;if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var i=this.api.getWidth(),r=this.api.getHeight();t={x:.2*i,y:.2*r,width:.6*i,height:.6*r}}return t},e.type="dataZoom.slider",e}(DS);function oI(t){t.registerComponentModel(tI),t.registerComponentView(aI),OS(t)}var sI={get:function(t,e,n){var i=Pn((lI[t]||{})[e]);return n&&pe(i)?i[i.length-1]:i}},lI={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},uI=sI,cI=Bm.mapVisual,dI=Bm.eachVisual,hI=pe,pI=ie,fI=Fa,gI=Ne,mI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return _e(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n)},e.prototype.optionUpdated=function(t,e){var n=this.option;!e&&AC(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var e=this.stateList;t=vi(t,this),this.controllerVisuals=TC(this.option.controller,e,t),this.targetVisuals=TC(this.option.target,e,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries((function(t,n){e.push(n)})):e=ra(t),e},e.prototype.eachTargetSeries=function(t,e){ie(this.getTargetSeriesIndices(),(function(n){var i=this.ecModel.getSeriesByIndex(n);i&&t.call(e,i)}),this)},e.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries((function(n){n===t&&(e=!0)})),e},e.prototype.formatValueText=function(t,e,n){var i,r=this.option,a=r.precision,o=this.dataBound,s=r.formatter;n=n||["<",">"],pe(t)&&(t=t.slice(),i=!0);var l=e?t:i?[u(t[0]),u(t[1])]:u(t);return vn(s)?s.replace("{value}",i?l[0]:l).replace("{value2}",i?l[1]:l):se(s)?i?s(t[0],t[1]):s(t):i?t[0]===o[0]?n[0]+" "+l[1]:t[1]===o[1]?n[1]+" "+l[0]:l[0]+" - "+l[1]:l;function u(t){return t===o[0]?"min":t===o[1]?"max":(+t).toFixed(Math.min(a,20))}},e.prototype.resetExtent=function(){var t=this.option,e=fI([t.min,t.max]);this._dataExtent=e},e.prototype.getDataDimensionIndex=function(t){var e=this.option.dimension;if(null!=e)return t.getDimensionIndex(e);for(var n=t.dimensions,i=n.length-1;i>=0;i--){var r=n[i],a=t.getDimensionInfo(r);if(!a.isCalculationCoord)return a.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,n={inRange:e.inRange,outOfRange:e.outOfRange},i=e.target||(e.target={}),r=e.controller||(e.controller={});$i(i,n),$i(r,n);var a=this.isCategory();function o(n){hI(e.color)&&!n.inRange&&(n.inRange={color:e.color.slice().reverse()}),n.inRange=n.inRange||{color:t.get("gradientColor")}}o.call(this,i),o.call(this,r),function(t,e,n){var i=t[e],r=t[n];i&&!r&&(r=t[n]={},pI(i,(function(t,e){if(Bm.isValidType(e)){var n=uI.get(e,"inactive",a);null!=n&&(r[e]=n,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}})))}.call(this,i,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,i=this.get("inactiveColor"),r=this.getItemSymbol()||"roundRect";pI(this.stateList,(function(o){var s=this.itemSize,l=t[o];l||(l=t[o]={color:a?i:[i]}),null==l.symbol&&(l.symbol=e&&Pn(e)||(a?r:[r])),null==l.symbolSize&&(l.symbolSize=n&&Pn(n)||(a?s[0]:[s[0],s[0]])),l.symbol=cI(l.symbol,(function(t){return"none"===t?r:t}));var u=l.symbolSize;if(null!=u){var c=-1/0;dI(u,(function(t){t>c&&(c=t)})),l.symbolSize=cI(u,(function(t){return gI(t,[0,c],[0,s[0]],!0)}))}}),this)}.call(this,r)},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(Ui),vI=[20,140];function yI(t,e,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,r=n[0],a=[],o=0;o<=200&&r<n[1];o++)a.push(r),r+=i;return a.push(n[1]),a}var _I=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()})),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=vI[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=vI[1])},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):pe(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),ie(this.stateList,(function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)}),this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=Fa((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries((function(n){var i=[],r=n.getData();r.each(this.getDataDimensionIndex(r),(function(e,n){t[0]<=e&&e<=t[1]&&i.push(n)}),this),e.push({seriesId:n.id,dataIndex:i})}),this),e},e.prototype.getVisualMeta=function(t){var e=yI(this,"outOfRange",this.getExtent()),n=yI(this,"inRange",this.option.range.slice()),i=[];function r(e,n){i.push({value:e,color:t(e,n)})}for(var a=0,o=0,s=n.length,l=e.length;o<l&&(!n.length||e[o]<=n[0]);o++)e[o]<n[a]&&r(e[o],"outOfRange");for(var u=1;a<s;a++,u=0)u&&i.length&&r(n[a],"outOfRange"),r(n[a],"inRange");for(u=1;o<l;o++)(!n.length||n[n.length-1]<e[o])&&(u&&(i.length&&r(i[i.length-1].value,"outOfRange"),u=0),r(e[o],"outOfRange"));var c=i.length;return{stops:i,outerColors:[c?i[0].color:"transparent",c?i[c-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Di(mI.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(mI),xI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return _e(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,n,i){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,e,n,i):this.group.removeAll()},e.prototype.renderBackground=function(t){var e=this.visualMapModel,n=ts(e.get("padding")||0),i=t.getBoundingRect();t.add(new gi({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,n){var i=(n=n||{}).forceState,r=this.visualMapModel,a={};if("color"===e){var o=r.get("contentColor");a.color=o}function s(t){return a[t]}function l(t,e){a[t]=e}var u=r.controllerVisuals[i||r.getValueState(t)],c=Bm.prepareVisualTypes(u);return ie(c,(function(i){var r=u[i];n.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",r=u.__alphaForOpacity),Bm.dependsOn(i,e)&&r&&r.applyVisual(t,s,l)})),a[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,n=this.api;aa(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,e,n,i){},e.type="visualMap",e}(gr),bI=[["left","right","width"],["top","bottom","height"]];function wI(t,e,n){var i=t.option,r=i.align;if(null!=r&&"auto"!==r)return r;for(var a={width:e.getWidth(),height:e.getHeight()},o="horizontal"===i.orient?1:0,s=bI[o],l=[0,null,10],u={},c=0;c<3;c++)u[bI[1-o][c]]=l[c],u[s[c]]=2===c?n[0]:i[s[c]];var d=[["x","width",3],["y","height",0]][o],h=Vi(u,a,i.padding);return s[(h.margin[d[2]]||0)+h[d[0]]+.5*h[d[1]]<.5*a[d[1]]?0:1]}function MI(t,e){return ie(t||[],(function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")})),t}var SI=Ne,CI=ie,kI=Math.min,II=Math.max;function DI(t,e,n,i){return new yr({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){Dr(t.event)},ondragend:i})}function TI(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function AI(t){return"vertical"===t?"ns-resize":"ew-resize"}var EI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return _e(e,t),e.prototype.init=function(e,n){t.prototype.init.call(this,e,n),this._hoverLinkFromSeriesMouseOver=vi(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=vi(this._hideIndicator,this)},e.prototype.doRender=function(t,e,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,n){if(e){var i=e[1-n];i=null!=i?i+"":"";var r=this.visualMapModel,a=r.get("textGap"),o=r.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([o[0]/2,0===n?-a:o[1]+a],s),u=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Mi({style:sa(d,{x:l[0],y:l[1],verticalAlign:"horizontal"===c?"middle":u,align:"horizontal"===c?u:"center",text:i})}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,n=this._shapes,i=e.itemSize,r=this._orient,a=this._useHandle,o=wI(e,this.api,i),s=n.mainGroup=this._createBarGroup(o),l=new Jn;s.add(l),l.add(n.outOfRange=DI()),l.add(n.inRange=DI(null,a?AI(this._orient):null,vi(this._dragHandle,this,"all",!1),vi(this._dragHandle,this,"all",!0))),l.setClipPath(new gi({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var u=e.textStyleModel.getTextRect(""),c=II(u.width,u.height);a&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(e,s,0,i,c,r),this._createHandle(e,s,1,i,c,r)),this._createIndicator(e,s,i,c,r),t.add(s)},e.prototype._createHandle=function(t,e,n,i,r,a){var o=vi(this._dragHandle,this,n,!1),s=vi(this._dragHandle,this,n,!0),l=Ai(t.get("handleSize"),i[0]),u=Kn(t.get("handleIcon"),-l/2,-l/2,l,l,null,!0),c=AI(this._orient);u.attr({cursor:c,draggable:!0,drift:o,ondragend:s,onmousemove:function(t){Dr(t.event)}}),u.x=i[0]/2,u.useStyle(t.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),ha(u,!0),e.add(u);var d=this.visualMapModel.textStyleModel,h=new Mi({cursor:c,draggable:!0,drift:o,onmousemove:function(t){Dr(t.event)},ondragend:s,style:sa(d,{x:0,y:0,text:""})});h.ensureState("blur").style={opacity:.1},h.stateTransition={duration:200},this.group.add(h);var p=[l,0],f=this._shapes;f.handleThumbs[n]=u,f.handleLabelPoints[n]=p,f.handleLabels[n]=h},e.prototype._createIndicator=function(t,e,n,i,r){var a=Ai(t.get("indicatorSize"),n[0]),o=Kn(t.get("indicatorIcon"),-a/2,-a/2,a,a,null,!0);o.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var s=t.getModel("indicatorStyle").getItemStyle();if(o instanceof dn){var l=o.style;o.useStyle(xn({image:l.image,x:l.x,y:l.y,width:l.width,height:l.height},s))}else o.useStyle(s);e.add(o);var u=this.visualMapModel.textStyleModel,c=new Mi({silent:!0,invisible:!0,style:sa(u,{x:0,y:0,text:""})});this.group.add(c);var d=[("horizontal"===r?i/2:6)+n[0]/2,0],h=this._shapes;h.indicator=o,h.indicatorLabel=c,h.indicatorLabelPoint=d,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,n,i){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([n,i],this._shapes.mainGroup,!0);this._updateInterval(t,r[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():TI(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[SI(e[0],n,i,!0),SI(e[1],n,i,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var n=this.visualMapModel,i=this._handleEnds,r=[0,n.itemSize[1]];Ly(e,i,r,t,0);var a=n.getExtent();this._dataInterval=[SI(i[0],r,a,!0),SI(i[1],r,a,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,n=e.getExtent(),i=this._shapes,r=[0,e.itemSize[1]],a=t?r:this._handleEnds,o=this._createBarVisual(this._dataInterval,n,a,"inRange"),s=this._createBarVisual(n,n,r,"outOfRange");i.inRange.setStyle({fill:o.barColor}).setShape("points",o.barPoints),i.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(a,o)},e.prototype._createBarVisual=function(t,e,n,i){var r={forceState:i,convertOpacityToAlpha:!0},a=this._makeColorGradient(t,r),o=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],s=this._createBarPoints(n,o);return{barColor:new Ci(0,0,0,1,a),barPoints:s,handlesColor:[a[0].color,a[a.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var n=[],i=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var r=1;r<100;r++){var a=t[0]+i*r;if(a>t[1])break;n.push({color:this.getControllerVisual(a,"color",e),offset:r/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},e.prototype._createBarPoints=function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new Jn("horizontal"!==e||n?"horizontal"===e&&n?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||n?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,r=n.handleThumbs,a=n.handleLabels,o=i.itemSize,s=i.getExtent(),l=this._applyTransform("left",n.mainGroup);CI([0,1],(function(u){var c=r[u];c.setStyle("fill",e.handlesColor[u]),c.y=t[u];var d=SI(t[u],[0,o[1]],s,!0),h=this.getControllerVisual(d,"symbolSize");c.scaleX=c.scaleY=h/o[0],c.x=o[0]-h/2;var p=Va(n.handleLabelPoints[u],Ha(c,this.group));if("horizontal"===this._orient){var f="left"===l||"top"===l?(o[0]-h)/2:(o[0]-h)/-2;p[1]+=f}a[u].setStyle({x:p[0],y:p[1],text:i.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})}),this)}},e.prototype._showIndicator=function(t,e,n,i){var r=this.visualMapModel,a=r.getExtent(),o=r.itemSize,s=[0,o[1]],l=this._shapes,u=l.indicator;if(u){u.attr("invisible",!1);var c=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),d=this.getControllerVisual(t,"symbolSize"),h=SI(t,a,s,!0),p=o[0]-d/2,f={x:u.x,y:u.y};u.y=h,u.x=p;var g=Va(l.indicatorLabelPoint,Ha(u,this.group)),m=l.indicatorLabel;m.attr("invisible",!1);var v=this._applyTransform("left",l.mainGroup),y="horizontal"===this._orient;m.setStyle({text:(n||"")+r.formatValueText(e),verticalAlign:y?v:"middle",align:y?"center":v});var _={x:p,y:h,style:{fill:c}},x={style:{x:g[0],y:g[1]}};if(r.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var b={duration:100,easing:"cubicInOut",additive:!0};u.x=f.x,u.y=f.y,u.animateTo(_,b),m.animateTo(x,b)}else u.attr(_),m.attr(x);this._firstShowIndicator=!1;var w=this._shapes.handleLabels;if(w)for(var M=0;M<w.length;M++)this.api.enterBlur(w[M])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",(function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);i[1]=kI(II(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}})).on("mouseout",(function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()}))},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var r=[0,i[1]],a=n.getExtent();t=kI(II(r[0],t),r[1]);var o=function(t,e,n){var i=6,r=t.get("hoverLinkDataSize");r&&(i=SI(r,e,n,!0)/2);return i}(n,a,r),s=[t-o,t+o],l=SI(t,r,a,!0),u=[SI(s[0],r,a,!0),SI(s[1],r,a,!0)];s[0]<r[0]&&(u[0]=-1/0),s[1]>r[1]&&(u[1]=1/0),e&&(u[0]===-1/0?this._showIndicator(l,u[1],"< ",o):u[1]===1/0?this._showIndicator(l,u[0],"> ",o):this._showIndicator(l,l," ",o));var c=this._hoverLinkDataIndices,d=[];(e||TI(n))&&(d=this._hoverLinkDataIndices=n.findTargetDataIndices(u));var h=es(c,d);this._dispatchHighDown("downplay",MI(h[0],n)),this._dispatchHighDown("highlight",MI(h[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var e;if(Jr(t.target,(function(t){var n=Je(t);if(null!=n.dataIndex)return e=n,!0}),!0),e){var n=this.ecModel.getSeriesByIndex(e.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(n)){var r=n.getData(e.dataType),a=r.getStore().get(i.getDataDimensionIndex(r),e.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var n=0;n<e.length;n++)this.api.leaveBlur(e[n])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",MI(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,e,n,i){var r=Ha(e,i?null:this.group);return pe(t)?Va(t,r,n):Ba(t,r,n)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(xI),LI={type:"selectDataRange",event:"dataRangeSelected",update:"update"},PI=function(t,e){e.eachComponent({mainType:"visualMap",query:t},(function(e){e.setSelected(t.selected)}))},NI=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",(function(e){var i,r,a,o,s,l=t.pipelineContext;!e.isTargetSeries(t)||l&&l.large||n.push((i=e.stateList,r=e.targetVisuals,a=vi(e.getValueState,e),o=e.getDataDimensionIndex(t.getData()),s={},ie(i,(function(t){var e=Bm.prepareVisualTypes(r[t]);s[t]=e})),{progress:function(t,e){var n,i;function l(t){return Bo(e,i,t)}function u(t,n){Ho(e,i,t,n)}null!=o&&(n=e.getDimensionIndex(o));for(var c=e.getStore();null!=(i=t.next());){var d=e.getRawDataItem(i);if(!d||!1!==d.visualMap)for(var h=null!=o?c.get(n,i):i,p=a(h),f=r[p],g=s[p],m=0,v=g.length;m<v;m++){var y=g[m];f[y]&&f[y].applyVisual(h,l,u)}}}}))})),n}},{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),i=[];e.eachComponent("visualMap",(function(e){if(e.isTargetSeries(t)){var r=e.getVisualMeta(vi(OI,null,t,e))||{stops:[],outerColors:[]},a=e.getDataDimensionIndex(n);a>=0&&(r.dimension=a,i.push(r))}})),t.getData().setVisual("visualMeta",i)}}];function OI(t,e,n,i){for(var r=e.targetVisuals[i],a=Bm.prepareVisualTypes(r),o={color:Jo(t.getData(),"color")},s=0,l=a.length;s<l;s++){var u=a[s],c=r["opacity"===u?"__alphaForOpacity":u];c&&c.applyVisual(n,d,h)}return o.color;function d(t){return o[t]}function h(t,e){o[t]=e}}var zI=ie;function RI(t){var e=t&&t.visualMap;pe(e)||(e=e?[e]:[]),zI(e,(function(t){if(t){VI(t,"splitList")&&!VI(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&pe(e)&&zI(e,(function(t){$n(t)&&(VI(t,"start")&&!VI(t,"min")&&(t.min=t.start),VI(t,"end")&&!VI(t,"max")&&(t.max=t.end))}))}}))}function VI(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var FI=!1;function BI(t){FI||(FI=!0,t.registerSubTypeDefaulter("visualMap",(function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"})),t.registerAction(LI,PI),ie(NI,(function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)})),t.registerPreprocessor(RI))}function HI(t){t.registerComponentModel(_I),t.registerComponentView(EI),BI(t)}var GI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return _e(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],jI[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var r=this.option.categories;this.resetVisual((function(t,e){"categories"===i?(t.mappingMethod="category",t.categories=Pn(r)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=me(this._pieceList,(function(t){return t=Pn(t),"inRange"!==e&&(t.visual=null),t})))}))},e.prototype.completeVisualOption=function(){var e=this.option,n={},i=Bm.listVisualTypes(),r=this.isCategory();function a(t,e,n){return t&&t[e]&&t[e].hasOwnProperty(n)}ie(e.pieces,(function(t){ie(i,(function(e){t.hasOwnProperty(e)&&(n[e]=1)}))})),ie(n,(function(t,n){var i=!1;ie(this.stateList,(function(t){i=i||a(e,t,n)||a(e.target,t,n)}),this),!i&&ie(this.stateList,(function(t){(e[t]||(e[t]={}))[n]=uI.get(n,"inRange"===t?"active":"inactive",r)}))}),this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var n=this.option,i=this._pieceList,r=(e?n:t).selected||{};if(n.selected=r,ie(i,(function(t,e){var n=this.getSelectedMapKey(t);r.hasOwnProperty(n)||(r[n]=!0)}),this),"single"===n.selectedMode){var a=!1;ie(i,(function(t,e){var n=this.getSelectedMapKey(t);r[n]&&(a?r[n]=!1:a=!0)}),this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Pn(t)},e.prototype.getValueState=function(t){var e=Bm.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],n=this._pieceList;return this.eachTargetSeries((function(i){var r=[],a=i.getData();a.each(this.getDataDimensionIndex(a),(function(e,i){Bm.findPieceIndex(e,n)===t&&r.push(i)}),this),e.push({seriesId:i.id,dataIndex:r})}),this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],n=["",""],i=this,r=this._pieceList.slice();if(r.length){var a=r[0].interval[0];a!==-1/0&&r.unshift({interval:[-1/0,a]}),(a=r[r.length-1].interval[1])!==1/0&&r.push({interval:[a,1/0]})}else r.push({interval:[-1/0,1/0]});var o=-1/0;return ie(r,(function(t){var e=t.interval;e&&(e[0]>o&&s([o,e[0]],"outOfRange"),s(e.slice()),o=e[1])}),this),{stops:e,outerColors:n}}function s(r,a){var o=i.getRepresentValue({interval:r});a||(a=i.getValueState(o));var s=t(o,a);r[0]===-1/0?n[0]=s:r[1]===1/0?n[1]=s:e.push({value:r[0],color:s},{value:r[1],color:s})}},e.type="visualMap.piecewise",e.defaultOption=Di(mI.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(mI),jI={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),i=this.getExtent(),r=e.splitNumber;r=Math.max(parseInt(r,10),1),e.splitNumber=r;for(var a=(i[1]-i[0])/r;+a.toFixed(n)!==a&&n<5;)n++;e.precision=n,a=+a.toFixed(n),e.minOpen&&t.push({interval:[-1/0,i[0]],close:[0,0]});for(var o=0,s=i[0];o<r;s+=a,o++){var l=o===r-1?i[1]:s+a;t.push({interval:[s,l],close:[1,1]})}e.maxOpen&&t.push({interval:[i[1],1/0],close:[0,0]}),ns(t),ie(t,(function(t,e){t.index=e,t.text=this.formatValueText(t.interval)}),this)},categories:function(t){var e=this.option;ie(e.categories,(function(e){t.push({text:this.formatValueText(e,!0),value:e})}),this),WI(e,t)},pieces:function(t){var e=this.option;ie(e.pieces,(function(e,n){$n(e)||(e={value:e});var i={text:"",index:n};if(null!=e.label&&(i.text=e.label),e.hasOwnProperty("value")){var r=i.value=e.value;i.interval=[r,r],i.close=[1,1]}else{for(var a=i.interval=[],o=i.close=[0,0],s=[1,0,1],l=[-1/0,1/0],u=[],c=0;c<2;c++){for(var d=[["gte","gt","min"],["lte","lt","max"]][c],h=0;h<3&&null==a[c];h++)a[c]=e[d[h]],o[c]=s[h],u[c]=2===h;null==a[c]&&(a[c]=l[c])}u[0]&&a[1]===1/0&&(o[0]=0),u[1]&&a[0]===-1/0&&(o[1]=0),a[0]===a[1]&&o[0]&&o[1]&&(i.value=a[0])}i.visual=Bm.retrieveVisuals(e),t.push(i)}),this),WI(e,t),ns(t),ie(t,(function(t){var e=t.close,n=[["<",""][e[1]],[">",""][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)}),this)}};function WI(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var UI=GI,YI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return _e(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),i=e.textStyleModel,r=i.getFont(),a=i.getTextColor(),o=this._getItemAlign(),s=e.itemSize,l=this._getViewData(),u=l.endsText,c=Xr(e.get("showLabel",!0),!u),d=!e.get("selectedMode");u&&this._renderEndsText(t,u[0],s,c,o),ie(l.viewPieceList,(function(i){var l=i.piece,u=new Jn;u.onclick=vi(this._onItemClick,this,l),this._enableHoverLink(u,i.indexInModelPieceList);var h=e.getRepresentValue(l);if(this._createItemSymbol(u,h,[0,0,s[0],s[1]],d),c){var p=this.visualMapModel.getValueState(h);u.add(new Mi({style:{x:"right"===o?-n:s[0]+n,y:s[1]/2,text:l.text,verticalAlign:"middle",align:o,font:r,fill:a,opacity:"outOfRange"===p?.5:1},silent:d}))}t.add(u)}),this),u&&this._renderEndsText(t,u[1],s,c,o),is(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var n=this;t.on("mouseover",(function(){return i("highlight")})).on("mouseout",(function(){return i("downplay")}));var i=function(t){var i=n.visualMapModel;i.option.hoverLink&&n.api.dispatchAction({type:t,batch:MI(i.findTargetDataIndices(e),i)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return wI(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},e.prototype._renderEndsText=function(t,e,n,i,r){if(e){var a=new Jn,o=this.visualMapModel.textStyleModel;a.add(new Mi({style:sa(o,{x:i?"right"===r?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:i?r:"center",text:e})})),t.add(a)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=me(t.getPieceList(),(function(t,e){return{piece:t,indexInModelPieceList:e}})),n=t.get("text"),i=t.get("orient"),r=t.get("inverse");return("horizontal"===i?r:!r)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},e.prototype._createItemSymbol=function(t,e,n,i){var r=Kn(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color"));r.silent=i,t.add(r)},e.prototype._onItemClick=function(t){var e=this.visualMapModel,n=e.option,i=n.selectedMode;if(i){var r=Pn(n.selected),a=e.getSelectedMapKey(t);"single"===i||!0===i?(r[a]=!0,ie(r,(function(t,e){r[e]=e===a}))):r[a]=!r[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:r})}},e.type="visualMap.piecewise",e}(xI);function $I(t){t.registerComponentModel(UI),t.registerComponentView(YI),BI(t)}var qI={label:{enabled:!0},decal:{show:!1}},XI=De(),ZI={};function JI(t,e){var n=t.getModel("aria");if(n.get("enabled")){var i=Pn(qI);$i(i.label,t.getLocaleModel().get("aria"),!1),$i(n.option,i,!1),function(){if(n.getModel("decal").get("show")){var e=re();t.eachSeries((function(t){if(!t.isColorBySeries()){var n=e.get(t.type);n||(n={},e.set(t.type,n)),XI(t).scope=n}})),t.eachRawSeries((function(e){if(!t.isSeriesFiltered(e))if(se(e.enableAriaDecal))e.enableAriaDecal();else{var n=e.getData();if(e.isColorBySeries()){var i=ia(e.ecModel,e.name,ZI,t.getSeriesCount()),r=n.getVisual("decal");n.setVisual("decal",u(r,i))}else{var a=e.getRawData(),o={},s=XI(e).scope;n.each((function(t){var e=n.getRawIndex(t);o[e]=t}));var l=a.count();a.each((function(t){var i=o[t],r=a.getName(t)||t+"",c=ia(e.ecModel,r,s,l),d=n.getItemVisual(i,"decal");n.setItemVisual(i,"decal",u(d,c))}))}}function u(t,e){var n=t?xn(xn({},e),t):e;return n.dirty=!0,n}}))}}(),function(){var i=e.getZr().dom;if(!i)return;var a=t.getLocaleModel().get("aria"),o=n.getModel("label");if(o.option=He(o.option,a),!o.get("enabled"))return;if(i.setAttribute("role","img"),o.get("description"))return void i.setAttribute("aria-label",o.get("description"));var s,l=t.getSeriesCount(),u=o.get(["data","maxCount"])||10,c=o.get(["series","maxCount"])||10,d=Math.min(l,c);if(l<1)return;var h=function(){var e=t.get("title");e&&e.length&&(e=e[0]);return e&&e.text}();if(h){var p=o.get(["general","withTitle"]);s=r(p,{title:h})}else s=o.get(["general","withoutTitle"]);var f=[],g=l>1?o.get(["series","multiple","prefix"]):o.get(["series","single","prefix"]);s+=r(g,{seriesCount:l}),t.eachSeries((function(e,n){if(n<d){var i=void 0,a=e.get("name")?"withName":"withoutName";i=r(i=l>1?o.get(["series","multiple",a]):o.get(["series","single",a]),{seriesId:e.seriesIndex,seriesName:e.get("name"),seriesType:(x=e.subType,b=t.getLocaleModel().get(["series","typeNames"]),b[x]||b.chart)});var s=e.getData();if(s.count()>u)i+=r(o.get(["data","partialData"]),{displayCnt:u});else i+=o.get(["data","allData"]);for(var c=o.get(["data","separator","middle"]),h=o.get(["data","separator","end"]),p=o.get(["data","excludeDimensionId"]),g=[],m=0;m<s.count();m++)if(m<u){var v=s.getName(m),y=p?Ie(s.getValues(m),(function(t,e){return-1===sn(p,e)})):s.getValues(m),_=o.get(["data",v?"withName":"withoutName"]);g.push(r(_,{name:v,value:y.join(c)}))}i+=g.join(c)+h,f.push(i)}var x,b}));var m=o.getModel(["series","multiple","separator"]),v=m.get("middle"),y=m.get("end");s+=f.join(v)+y,i.setAttribute("aria-label",s)}()}function r(t,e){if(!vn(t))return t;var n=t;return ie(e,(function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)})),n}}function KI(t){if(t&&t.aria){var e=t.aria;null!=e.show&&(e.enabled=e.show),e.label=e.label||{},ie(["description","general","series","data"],(function(t){null!=e[t]&&(e.label[t]=e[t])}))}}var QI={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},tD=function(){function t(t){if(null==(this._condVal=vn(t)?new RegExp(t):os(t)?t:null)){Ya("")}}return t.prototype.evaluate=function(t){var e=typeof t;return vn(e)?this._condVal.test(t):!!Mn(e)&&this._condVal.test(t+"")},t}(),eD=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),nD=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},t}(),iD=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},t}(),rD=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),aD=function(){function t(){}return t.prototype.evaluate=function(){for(var t=!!this.valueParser,e=(0,this.getValue)(this.valueGetterParam),n=t?this.valueParser(e):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(t?n:e))return!1;return!0},t}();function oD(t,e){if(!0===t||!1===t){var n=new eD;return n.value=t,n}return lD(t)||Ya(""),t.and?sD("and",t,e):t.or?sD("or",t,e):t.not?function(t,e){var n=t.not,i="";lD(n)||Ya(i);var r=new rD;r.child=oD(n,e),r.child||Ya(i);return r}(t,e):function(t,e){for(var n="",i=e.prepareGetValue(t),r=[],a=Ze(t),o=t.parser,s=o?rs(o):null,l=0;l<a.length;l++){var u=a[l];if("parser"!==u&&!e.valueGetterAttrMap.get(u)){var c=Ar(QI,u)?QI[u]:u,d=t[u],h=s?s(d):d,p=as(c,h)||"reg"===c&&new tD(h);p||Ya(n),r.push(p)}}r.length||Ya(n);var f=new aD;return f.valueGetterParam=i,f.valueParser=s,f.getValue=e.getValue,f.subCondList=r,f}(t,e)}function sD(t,e,n){var i=e[t];pe(i)||Ya(""),i.length||Ya("");var r="and"===t?new nD:new iD;return r.children=me(i,(function(t){return oD(t,n)})),r.children.length||Ya(""),r}function lD(t){return $n(t)&&!ro(t)}var uD=function(){function t(t,e){this._cond=oD(t,e)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();var cD={type:"echarts:filter",transform:function(t){for(var e,n,i,r=t.upstream,a=(n=t.config,i={valueGetterAttrMap:re({dimension:!0}),prepareGetValue:function(t){var e=t.dimension;Ar(t,"dimension")||Ya("");var n=r.getDimensionInfo(e);return n||Ya(""),{dimIdx:n.index}},getValue:function(t){return r.retrieveValueFromItem(e,t.dimIdx)}},new uD(n,i)),o=[],s=0,l=r.count();s<l;s++)e=r.getRawDataItem(s),a.evaluate()&&o.push(e);return{data:o}}},dD={type:"echarts:sort",transform:function(t){var e=t.upstream,n=t.config,i="",r=ra(n);r.length||Ya(i);var a=[];ie(r,(function(t){var n=t.dimension,r=t.order,o=t.parser,s=t.incomparable;if(null==n&&Ya(i),"asc"!==r&&"desc"!==r&&Ya(i),s&&"min"!==s&&"max"!==s){Ya("")}if("asc"!==r&&"desc"!==r){Ya("")}var l=e.getDimensionInfo(n);l||Ya(i);var u=o?rs(o):null;o&&!u&&Ya(i),a.push({dimIdx:l.index,parser:u,comparator:new ss(r,s)})}));var o=e.sourceFormat;o!==Ua&&o!==ls&&Ya(i);for(var s=[],l=0,u=e.count();l<u;l++)s.push(e.getRawDataItem(l));return s.sort((function(t,n){for(var i=0;i<a.length;i++){var r=a[i],o=e.retrieveValueFromItem(t,r.dimIdx),s=e.retrieveValueFromItem(n,r.dimIdx);r.parser&&(o=r.parser(o),s=r.parser(s));var l=r.comparator.evaluate(o,s);if(0!==l)return l}return 0})),{data:s}}};var hD=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return _e(e,t),e.prototype.init=function(e,n,i){t.prototype.init.call(this,e,n,i),this._sourceManager=new us(this),cs(this)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),cs(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:ds},e}(Ui),pD=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return _e(e,t),e.type="dataset",e}(gr);const fD=e({name:"TopToolbar",emits:["menuAction"],props:{object:{type:Object,required:!1},selectedCount:{type:Number,required:!0},disableUndo:{type:Boolean,required:!1},disableRedo:{type:Boolean,required:!1},disablePaste:{type:Boolean,required:!1},zoom:{type:Number,required:!0},rulersGridVisible:{type:Boolean,required:!1}},setup(t,{emit:e}){const n=xt();const i=r(t.rulersGridVisible?"Enable":"Disable");return a((()=>t.rulersGridVisible),(t=>{i.value=t?"Enable":"Disable"})),{menuActionEmit:function(t,n=null){e("menuAction",t,n)},logout:function(){n.cookies.remove("token"),Ts.value=null,localStorage.removeItem("user")},tools:Qs,user:Ts,showRulersGrid:i,devVersion:As}}}),gD={style:{"margin-left":"10px","font-size":"10px",color:"gray","z-index":"99",position:"absolute","margin-top":"10px"}},mD={class:"flex gap-1 sticky-top-tool-bar"},vD={class:"flex gap-1"},yD={class:"flex gap-1"},_D={class:"flex"},xD={class:"flex items-center px-1"},bD=["value"];var wD=il(fD,[["render",function(e,r,a,b,w,M){return n(),i(m,null,[o("span",gD,s(e.devVersion),1),l(Ks,{class:"toolbar text-white shadow-2"},{default:u((()=>[l(Js,{"no-caps":"",stretch:"",flat:"","content-class":"menu-dropdown",class:"file-menu",label:"File",style:{width:"80px"}},{default:u((()=>[l(et,null,{default:u((()=>[c((n(),d(Z,{clickable:"",class:"new-project-menu-item",onClick:r[0]||(r[0]=t=>e.menuActionEmit("newProject"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"assignment",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[45]||(r[45]=[p("New Project",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[46]||(r[46]=[p("Ctrl + R",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{clickable:"",onClick:r[1]||(r[1]=t=>e.menuActionEmit("importJsonAction"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"file_open",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[47]||(r[47]=[p("Import",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{clickable:"",onClick:r[2]||(r[2]=t=>e.menuActionEmit("exportToJsonAction"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"file_open",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[48]||(r[48]=[p("Export",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{clickable:"",onClick:r[3]||(r[3]=t=>e.menuActionEmit("save"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"save",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[49]||(r[49]=[p("Save",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[50]||(r[50]=[p("Ctrl + S",-1)])])),_:1})])),_:1})])),_:1})),[[_t]])])),_:1})])),_:1}),l(Js,{"no-caps":"",stretch:"",flat:"","content-class":"menu-dropdown",label:"Edit",style:{width:"80px"}},{default:u((()=>[l(et,null,{default:u((()=>[c((n(),d(Z,{dense:"",clickable:"",onClick:r[4]||(r[4]=t=>e.menuActionEmit("copy"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"content_copy",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[51]||(r[51]=[p("Copy",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[52]||(r[52]=[p("Ctrl + C",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[5]||(r[5]=t=>e.menuActionEmit("paste")),disable:e.disablePaste},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"content_paste",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[53]||(r[53]=[p("Paste",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[54]||(r[54]=[p("Ctrl + V",-1)])])),_:1})])),_:1})])),_:1},8,["disable"])),[[_t]]),l(f,{inset:"",spaced:""}),c((n(),d(Z,{dense:"",clickable:"",onClick:r[6]||(r[6]=t=>e.menuActionEmit("undoAction")),disable:e.disableUndo},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"undo",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[55]||(r[55]=[p("Undo",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[56]||(r[56]=[p("Ctrl + Z",-1)])])),_:1})])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[7]||(r[7]=t=>e.menuActionEmit("redoAction")),disable:e.disableRedo},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"redo",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[57]||(r[57]=[p("Redo",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[58]||(r[58]=[p("Ctrl + Y",-1)])])),_:1})])),_:1})])),_:1},8,["disable"])),[[_t]]),l(f,{inset:"",spaced:""}),c((n(),d(Z,{dense:"",clickable:"",onClick:r[8]||(r[8]=t=>e.menuActionEmit("duplicateSelected")),disable:e.selectedCount<1},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"content_copy",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[59]||(r[59]=[p("Duplicate selected",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[60]||(r[60]=[p("Ctrl + D",-1)])])),_:1})])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[9]||(r[9]=t=>e.menuActionEmit("groupSelected")),disable:e.selectedCount<2},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"join_full",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[61]||(r[61]=[p("Group selected",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[62]||(r[62]=[p("Ctrl + G",-1)])])),_:1})])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[10]||(r[10]=t=>e.menuActionEmit("ungroupSelected")),disable:e.selectedCount<2},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"join_inner",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[63]||(r[63]=[p("Ungroup selected",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[64]||(r[64]=[p("Ctrl + Shift + G",-1)])])),_:1})])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[11]||(r[11]=t=>e.menuActionEmit("addToLibrary")),disable:e.selectedCount<2},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"library_books",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[65]||(r[65]=[p("Add selected to library",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[66]||(r[66]=[p("Ctrl + L",-1)])])),_:1})])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[12]||(r[12]=t=>e.menuActionEmit("deleteSelected")),disable:e.selectedCount<1},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"delete",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[67]||(r[67]=[p("Delete selected",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[68]||(r[68]=[p("Delete",-1)])])),_:1})])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[13]||(r[13]=t=>e.menuActionEmit("weldSelected")),disable:!(e.selectedCount>=2)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"splitscreen",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[69]||(r[69]=[p("Weld selected",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[70]||(r[70]=[p("Ctrl + B",-1)])])),_:1})])),_:1})])),_:1},8,["disable"])),[[_t]])])),_:1})])),_:1}),l(Js,{"no-caps":"",stretch:"",flat:"","content-class":"menu-dropdown",label:"Object",style:{width:"80px"},disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(et,null,{default:u((()=>[c((n(),d(Z,{dense:"",clickable:"",onClick:r[14]||(r[14]=t=>e.menuActionEmit("link"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"link",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[71]||(r[71]=[p("Link",-1)])])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:r[15]||(r[15]=t=>e.menuActionEmit("duplicateObject"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"file_copy",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[72]||(r[72]=[p("Duplicate",-1)])])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[16]||(r[16]=t=>e.menuActionEmit("rotate90"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"autorenew",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[73]||(r[73]=[p("Rotate 90",-1)])])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[17]||(r[17]=t=>e.menuActionEmit("rotate-90"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"sync",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[74]||(r[74]=[p("Rotate -90",-1)])])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:r[18]||(r[18]=t=>e.menuActionEmit("flipH"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"flip",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[75]||(r[75]=[p("Flip horizontal",-1)])])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[19]||(r[19]=t=>e.menuActionEmit("flipV"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"flip",color:"grey-7","text-color":"white",style:{transform:"rotate(90deg)"}})])),_:1}),l(J,null,{default:u((()=>[...r[76]||(r[76]=[p("Flip vertical",-1)])])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:r[20]||(r[20]=t=>e.menuActionEmit("bringToFront"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"flip_to_front",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[77]||(r[77]=[p("Bring to front",-1)])])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[21]||(r[21]=t=>e.menuActionEmit("sendToBack"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"flip_to_back",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[78]||(r[78]=[p("Send to Back",-1)])])),_:1})])),_:1})),[[_t]]),l(f),l(Z,{dense:"",clickable:""},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"transform",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[79]||(r[79]=[p("Convert to",-1)])])),_:1}),l(J,{side:""},{default:u((()=>[l(g,{name:"keyboard_arrow_right"})])),_:1}),l(nt,{anchor:"top end",self:"top start","auto-close":""},{default:u((()=>[l(et,null,{default:u((()=>[(n(!0),i(m,null,v(e.tools.filter((t=>t.name!==e.object.type&&!["Duct","Pointer","Text"].includes(t.name))),(t=>c((n(),d(Z,{key:t.name,dense:"",clickable:"",onClick:n=>e.menuActionEmit("convertObjectType",t.name)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:t.icon,color:"grey-7","text-color":"white"},null,8,["icon"])])),_:2},1024),l(J,null,{default:u((()=>[p(s(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[_t]]))),128))])),_:1})])),_:1})])),_:1}),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:r[22]||(r[22]=t=>e.menuActionEmit("removeObject"))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"remove",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[80]||(r[80]=[p("Remove",-1)])])),_:1})])),_:1})),[[_t]])])),_:1})])),_:1},8,["disable"]),l(f,{dark:"",vertical:""}),o("div",mD,[o("div",vD,[c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"undo",onClick:r[23]||(r[23]=t=>e.menuActionEmit("undoAction")),disable:e.disableUndo},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[81]||(r[81]=[o("strong",null,"Undo",-1),o("em",null," (Ctrl + Z)",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"redo",onClick:r[24]||(r[24]=t=>e.menuActionEmit("redoAction")),disable:e.disableRedo},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[82]||(r[82]=[o("strong",null,"Redo",-1),o("em",null," (Ctrl + Y)",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"content_copy",onClick:r[25]||(r[25]=t=>e.menuActionEmit("duplicateSelected")),disable:e.selectedCount<1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[83]||(r[83]=[o("strong",null,"Duplicate selected",-1),o("em",null," (Ctrl + D)",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"join_full",onClick:r[26]||(r[26]=t=>e.menuActionEmit("groupSelected")),disable:e.selectedCount<2},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[84]||(r[84]=[o("strong",null,"Group selected",-1),o("em",null," (Ctrl + G)",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"join_inner",onClick:r[27]||(r[27]=t=>e.menuActionEmit("ungroupSelected")),disable:e.selectedCount<2},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[85]||(r[85]=[o("strong",null,"Ungroup selected",-1),o("em",null," (Ctrl + Shift + G)",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"library_books",onClick:r[28]||(r[28]=t=>e.menuActionEmit("addToLibrary")),disable:e.selectedCount<2},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[86]||(r[86]=[o("strong",null,"Add selected to library",-1),o("em",null," (Ctrl + L)",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"delete",onClick:r[29]||(r[29]=t=>e.menuActionEmit("deleteSelected")),disable:e.selectedCount<1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[87]||(r[87]=[o("strong",null,"Delete selected",-1),o("em",null," (Delete)",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"splitscreen",onClick:r[30]||(r[30]=t=>e.menuActionEmit("weldSelected")),disable:!(e.selectedCount>=2)},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[88]||(r[88]=[o("strong",null,"Weld selected",-1),o("em",null," (Ctrl + B)",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]])]),l(f,{dark:"",vertical:""}),o("div",yD,[c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"link",onClick:r[31]||(r[31]=t=>e.menuActionEmit("link")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[89]||(r[89]=[o("strong",null,"Link",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"file_copy",onClick:r[32]||(r[32]=t=>e.menuActionEmit("duplicateObject")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[90]||(r[90]=[o("strong",null,"Duplicate",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"autorenew",onClick:r[33]||(r[33]=t=>e.menuActionEmit("rotate90")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[91]||(r[91]=[o("strong",null,"Rotate 90",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"sync",onClick:r[34]||(r[34]=t=>e.menuActionEmit("rotate-90")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[92]||(r[92]=[o("strong",null,"Rotate -90",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"flip",onClick:r[35]||(r[35]=t=>e.menuActionEmit("flipH")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[93]||(r[93]=[o("strong",null,"Flip horizontal",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"flip",onClick:r[36]||(r[36]=t=>e.menuActionEmit("flipV")),style:{transform:"rotate(90deg)"},disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[94]||(r[94]=[o("strong",null,"Flip vertical",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"flip_to_front",onClick:r[37]||(r[37]=t=>e.menuActionEmit("bringToFront")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[95]||(r[95]=[o("strong",null,"Bring to front",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"flip_to_back",onClick:r[38]||(r[38]=t=>e.menuActionEmit("sendToBack")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[96]||(r[96]=[o("strong",null,"Send to Back",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"transform",disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(nt,{anchor:"top end",self:"top start","auto-close":""},{default:u((()=>[l(et,null,{default:u((()=>[(n(!0),i(m,null,v(e.tools.filter((t=>t.name!==e.object.type&&!["Duct","Pointer","Text"].includes(t.name))),(t=>c((n(),d(Z,{key:t.name,dense:"",clickable:"",onClick:n=>e.menuActionEmit("convertObjectType",t.name)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:t.icon,color:"grey-7","text-color":"white"},null,8,["icon"])])),_:2},1024),l(J,null,{default:u((()=>[p(s(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[_t]]))),128))])),_:1})])),_:1}),l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[97]||(r[97]=[o("strong",null,"Convert to",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]]),c((n(),d(y,{dense:"",flat:"",round:"",outline:"",stack:"","no-caps":"",icon:"remove",onClick:r[39]||(r[39]=t=>e.menuActionEmit("removeObject")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[98]||(r[98]=[o("strong",null,"Remove",-1)])])),_:1})])),_:1},8,["disable"])),[[_t]])])]),l(rt),o("div",_D,[l(_,{color:"blue","false-value":"Disable","true-value":"Enable",modelValue:e.showRulersGrid,"onUpdate:modelValue":[r[40]||(r[40]=t=>e.showRulersGrid=t),r[41]||(r[41]=t=>e.menuActionEmit("toggleRulersGrid",e.showRulersGrid))],size:"xs"},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[p(" Show rulers and grid ("+s(e.showRulersGrid)+") ",1)])),_:1})])),_:1},8,["modelValue"]),l(y,{onClick:r[42]||(r[42]=t=>e.menuActionEmit("zoomOut")),disable:e.zoom<=10,dense:"",flat:"",size:"sm",icon:"zoom_out"},null,8,["disable"]),o("div",xD,[o("input",{class:"zoom-input",onKeydown:r[43]||(r[43]=x((t=>e.menuActionEmit("zoomSet",t.target.value)),["enter"])),value:e.zoom,type:"number"},null,40,bD),r[99]||(r[99]=p("% ",-1))]),l(y,{onClick:r[44]||(r[44]=t=>e.menuActionEmit("zoomIn")),disable:e.zoom>=400,dense:"",flat:"",size:"sm",icon:"zoom_in"},null,8,["disable"]),o("div",null,[e.user?(n(),d(Js,{key:1,"no-caps":"",flat:"",dense:"","content-class":"menu-dropdown",label:e.user.name,class:"px-2 ml-4"},{default:u((()=>[l(et,null,{default:u((()=>[l(Z,{dense:""},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"person",color:"grey-7","text-color":"white"})])),_:1}),l(J,{class:"text-zinc-500"},{default:u((()=>[p(s(e.user.name),1)])),_:1})])),_:1}),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:e.logout},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"logout",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[100]||(r[100]=[p("Logout",-1)])])),_:1})])),_:1},8,["onClick"])),[[_t]])])),_:1})])),_:1},8,["label"])):(n(),d(y,{key:0,flat:"",color:"primary",label:"Login",to:"/login"}))])])])),_:1})],64)}],["__scopeId","data-v-5f16847d"]]);const MD={class:"tools flex column"},SD={key:0,class:"grid gap-4 grid-cols-4 grid-flow-row auto-rows-max p-4"},CD={class:"tool-wrapper"},kD=["onClick"],ID={class:"flex flex-col flex-nowrap items-center justify-center h-full"},DD={class:"grow leading-4 text-black text-center text-ellipsis overflow-hidden flex items-center"},TD={key:1,class:"flex p-4 items-center justify-center"},AD={key:0,class:"grid gap-4 grid-cols-4 grid-flow-row auto-rows-max p-4"},ED={class:"tool-wrapper"},LD=["onClick"],PD={class:"flex flex-col items-center justify-center h-full"},ND=["src"],OD={key:1,class:"flex p-4 items-center justify-center"};var zD=il({__name:"ToolsSidebar",props:{selectedTool:{type:Object,required:!0},images:{type:Array,default:()=>[]},objectLib:{type:Array,default:()=>[]},isBuiltInEdge:{type:Boolean}},emits:["selectTool","saveLibImage","deleteLibItem","renameLibItem","deleteLibImage","toolDropped"],setup(e,{emit:h}){b((t=>({"5d7952f4":w(z)})));const _=e,x=h,I=xt(),D=r(null),T=r("lib");function A(t,e="default"){x("selectTool",t,e)}const E=r("list"),L=r({uploadBtnDisabled:!0,uploadBtnLoading:!1,file:null});function P(t){L.value.uploadBtnDisabled=!1,L.value.file=t}function N(t){O(t.body)}function O(t){x("saveLibImage",t),E.value="list",L.value.file=null}let z=r("37px");return z.value=_.isBuiltInEdge?"37px":"93px",a((()=>_.isBuiltInEdge),(t=>{z.value=t?"37px":"93px"})),(r,a)=>(n(),i("div",MD,[(n(!0),i(m,null,v(w(tl),(r=>(n(),d(Q,{key:r,class:"mb-2 border border-solid border-gray-700",dark:"","default-opened":"",label:r,"header-class":"p-2 min-h-0","expand-icon-class":"!pl-2"},{default:u((()=>[l(et,{class:"rounded-borders text-primary grid grid-cols-2 gap-1 p-1"},{default:u((()=>[(n(!0),i(m,null,v(w(Qs).filter((t=>t.cat.includes(r))),(i=>c((n(),d(Z,{key:i.name,onClick:t=>A(i),onDragend:t=>function(t,e){x("toolDropped",t,e)}(t,i),clickable:"",active:e.selectedTool.name===i.name,"active-class":"active-tool",draggable:"true",class:"p-2 min-h-0"},{default:u((()=>[l(t,{anchor:"center right",self:"center left"},{default:u((()=>[p(s(i.label),1)])),_:2},1024),l(J,null,{default:u((()=>[l(g,{name:i.icon,size:"sm"},null,8,["name"])])),_:2},1024)])),_:2},1032,["onClick","onDragend","active"])),[[M]]))),128))])),_:2},1024)])),_:2},1032,["label"])))),128)),l(Q,{class:"mb-2 border border-solid border-gray-700",dark:"","default-opened":"",label:"User","header-class":"p-2 min-h-0","expand-icon-class":"!pl-2"},{default:u((()=>[l(et,{class:"rounded-borders text-primary grid grid-cols-2 gap-1 p-1"},{default:u((()=>[c((n(),d(Z,{clickable:"","active-class":"active-tool",active:"default"!==e.selectedTool.type,class:"p-2 min-h-0"},{default:u((()=>[l(t,{anchor:"center right",self:"center left"},{default:u((()=>[...a[8]||(a[8]=[p(" User objects library ",-1)])])),_:1}),l(nt,{"separate-close-popup":"",anchor:"bottom right",self:"bottom left","max-height":"650px",onHide:a[7]||(a[7]=t=>E.value="list")},{default:u((()=>[l(S,{dark:"",style:{"min-width":"500px",height:"400px"}},{default:u((()=>[l(ut,{modelValue:T.value,"onUpdate:modelValue":a[0]||(a[0]=t=>T.value=t),"inline-label":"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:u((()=>[l(ct,{name:"lib",icon:"library_books",label:"Library"}),l(ct,{name:"imgs",icon:"collections",label:"Images"})])),_:1},8,["modelValue"]),l(f),l(dt,{modelValue:T.value,"onUpdate:modelValue":a[6]||(a[6]=t=>T.value=t),animated:"",dark:"",style:{"max-height":"350px"},class:"scroll"},{default:u((()=>[l(ht,{name:"lib"},{default:u((()=>{var t;return[(null==(t=e.objectLib)?void 0:t.length)>0?(n(),i("div",SD,[(n(!0),i(m,null,v(e.objectLib,(t=>(n(),i("div",{key:t.id,class:"relative"},[o("div",CD,[l(y,{round:"",dense:"",color:"grey-7",icon:"more_vert",size:"sm"},{default:u((()=>[l(nt,{"separate-close-popup":""},{default:u((()=>[l(et,{style:{"min-width":"100px"}},{default:u((()=>[c((n(),d(Z,{clickable:"",onClick:e=>function(t){I.dialog({title:"Rename",message:"Type the new name",prompt:{model:t.label,type:"text"},cancel:!0,persistent:!0}).onOk((e=>{e&&x("renameLibItem",t,e)})).onCancel((()=>{})).onDismiss((()=>{}))}(t)},{default:u((()=>[l(J,null,{default:u((()=>[...a[9]||(a[9]=[p("Rename",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]]),c((n(),d(Z,{clickable:"",onClick:e=>function(t){I.dialog({title:"Confirm",message:"Are you sure you want to delete this library item?",cancel:!0}).onOk((()=>{x("deleteLibItem",t)})).onCancel((()=>{})).onDismiss((()=>{}))}(t)},{default:u((()=>[l(J,null,{default:u((()=>[...a[10]||(a[10]=[p("Delete",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]])])),_:2},1024)])),_:2},1024)])),_:2},1024),c((n(),i("div",{class:"w-24 h-24 bg-slate-200 hover:bg-slate-500 p-2 rounded-lg cursor-pointer",onClick:e=>A(t,"libItem")},[o("div",ID,[o("div",null,[l(g,{color:"blue-10",name:"library_books",size:"xl"})]),o("div",DD,s(t.label),1)])],8,kD)),[[_t]])])])))),128))])):(n(),i("div",TD,[...a[11]||(a[11]=[o("p",{class:"text-center"},[p(" The library is empty. "),o("br"),o("br"),p(" You can select some objects and save them"),o("br"),p(" to the library to easily reuse them. ")],-1)])]))]})),_:1}),l(ht,{name:"imgs",class:"py-1"},{default:u((()=>[l(dt,{modelValue:E.value,"onUpdate:modelValue":a[5]||(a[5]=t=>E.value=t),animated:"",dark:""},{default:u((()=>[l(ht,{name:"list",class:"p-0"},{default:u((()=>{var t;return[l(y,{dense:"",onClick:a[1]||(a[1]=t=>E.value="upload"),icon:"library_add",color:"white","text-color":"black",label:"Add Image"}),(null==(t=e.images)?void 0:t.length)>0?(n(),i("div",AD,[(n(!0),i(m,null,v(e.images,(t=>(n(),i("div",{key:t.id,class:"relative"},[o("div",ED,[l(y,{round:"",dense:"",color:"grey-7",icon:"more_vert",size:"sm"},{default:u((()=>[l(nt,null,{default:u((()=>[l(et,{style:{"min-width":"100px"}},{default:u((()=>[c((n(),d(Z,{clickable:"",onClick:e=>{return n=t,void I.dialog({title:"Confirm",message:"Are you sure you want to delete this image?",cancel:!0}).onOk((()=>{x("deleteLibImage",n)})).onCancel((()=>{})).onDismiss((()=>{}));var n}},{default:u((()=>[l(J,null,{default:u((()=>[...a[12]||(a[12]=[p("Delete",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]])])),_:2},1024)])),_:2},1024)])),_:2},1024),c((n(),i("div",{class:"w-24 h-24 bg-slate-200 hover:bg-slate-500 p-2 rounded-lg cursor-pointer",onClick:e=>A(t,"Image")},[o("div",PD,[o("img",{src:t.path+"?w=95&h=95"},null,8,ND)])],8,LD)),[[_t]])])])))),128))])):(n(),i("div",OD," No images yet. "))]})),_:1}),l(ht,{name:"upload",class:"p-0"},{default:u((()=>[l(S,{dark:"",style:{"max-width":"468px"}},{default:u((()=>[l(C,{class:"py-1"},{default:u((()=>[...a[13]||(a[13]=[o("div",{class:"text-h6"},"Upload image",-1)])])),_:1}),l(C,{class:"q-pt-none"},{default:u((()=>[l(rl,{ref_key:"fileUploaderRef",ref:D,path:"lib-images",types:["image/*"],height:240,onFileAdded:P,onFileRemoved:a[2]||(a[2]=t=>L.value.uploadBtnDisabled=!0),onUploaded:N},null,512)])),_:1}),l(k,{align:"right",class:"text-primary pb-0"},{default:u((()=>[l(y,{flat:"",label:"Cancel",onClick:a[3]||(a[3]=t=>E.value="list")}),l(y,{disabled:L.value.uploadBtnDisabled,loading:L.value.uploadBtnLoading,flat:"",label:"Save",onClick:a[4]||(a[4]=t=>{Ts.value?D.value.upload():O(L.value.file)})},null,8,["disabled","loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),l(J,null,{default:u((()=>[l(g,{name:"add_circle_outline",size:"sm"})])),_:1})])),_:1},8,["active"])),[[M]])])),_:1})])),_:1})]))}},[["__scopeId","data-v-83c0e1ac"]]);const RD=e({name:"ToolConfig",props:{object:{type:Object,required:!0}},emits:["refreshMoveable","T3UpdateEntryField","linkT3Entry","gaugeSettings","mounted","noChange"],setup(t,{emit:e}){let n={};I((()=>{n=Es.exports.cloneDeep(t.object),e("mounted")}));const i=D({get:()=>t.object,set(t,n){t!==n&&e("update:object",t)}}),r=D((()=>{var e;return(null==(e=Qs.find((e=>e.name===t.object.type)))?void 0:e.settings)||{}})),a=D((()=>{var e,n;const i=null==(n=null==(e=hs.getEntryRange(t.object.t3Entry))?void 0:e.options)?void 0:n.filter((t=>1===t.status)),r=Es.exports.cloneDeep(i);return null==r?void 0:r.map((t=>(t.value=t.value,t)))})),o=D((()=>{var t,e,n,r;const a=[{label:"None",value:"none"},{label:"ID",value:"id"}];return void 0!==(null==(t=i.value.t3Entry)?void 0:t.label)&&a.push({label:"Label",value:"label"}),void 0!==(null==(e=i.value.t3Entry)?void 0:e.description)&&a.push({label:"Description",value:"description"}),void 0!==(null==(n=i.value.t3Entry)?void 0:n.value)&&a.push({label:"Value",value:1===(null==(r=i.value.t3Entry)?void 0:r.digital_analog)?"value":"control"}),a}));T((()=>{Es.exports.isEqual(t.object,n)&&e("noChange")}));const s=D((()=>"   "+hs.getUnitText(i.value.t3Entry)));return{item:i,refreshMoveable:function(){"Int_Ext_Wall"===i.value.type&&(i.value.settings.strokeWidth=pt.Hvac.PageMain.GetExteriorWallStrokeWidth(i.value.height)),e("refreshMoveable")},T3UpdateEntryField:function(t,n){e("T3UpdateEntryField",t,n)},linkT3Entry:function(){e("linkT3Entry")},t3EntryDisplayFieldOptions:o,gaugeSettings:function(t){e("gaugeSettings",t)},icons:el,switchIcons:nl,settings:r,getEntryRange:t=>hs.getEntryRange(t),getSwitchIcon:function(t){var e;const n=nl.find((e=>e.value===t));return(null==(e=null==n?void 0:n.icon)?void 0:e.off)?n.icon.off:"block"},rangeOptions:a,updatePropsValue:function(t){"Int_Ext_Wall"===i.value.type&&(i.value.height=pt.Hvac.PageMain.GetExteriorWallHeight(i.value.settings.strokeWidth),e("refreshMoveable"))},DisplayFieldValueChanged:function(t){e("DisplayFieldValueChanged",t)},unitText:s}}}),VD={key:0,class:"item-config flex flex-nowrap column"},FD={class:"leading-8 font-bold text-white"},BD={class:"item-config-inner"},HD={key:0},GD={key:1,style:{"text-align":"left",width:"100%"}},jD={style:{"font-size":"13px"}},WD={key:1,class:"p-1"},UD={class:"p-1"},YD={class:"grid gap-4 grid-cols-2 mb-4"},$D={class:"w-full relative mb-2"},qD={class:"flex flex-nowrap items-center mb-2"},XD={class:"ml-2",for:"bg-color-input"},ZD={key:0,class:"flex flex-nowrap justify-center items-center mb-2"},JD={key:1,class:"flex flex-nowrap justify-center items-center mb-2"},KD={key:2,class:"flex flex-nowrap items-center mb-2"},QD=["onUpdate:modelValue"],tT={class:"ml-2",for:"text-color-input"},eT={key:3,class:"w-full relative mb-2"},nT={key:4,class:"w-full relative mb-2"},iT={key:5,class:"w-full mb-2"},rT={key:6,class:"w-full mb-2"};var aT,oT=il(RD,[["render",function(e,r,a,h,f,_){var x,b,w,M,S,C,k,I;return e.item?(n(),i("div",VD,[o("h3",FD,s(e.item.type),1),o("div",BD,[o("div",null,[["Gauge","Dial"].includes(e.item.type)?(n(),d(y,{key:0,dark:"",outline:"","no-caps":"",stretch:"",icon:"settings",class:"text-white w-full mb-2",label:"Settings",onClick:r[0]||(r[0]=t=>e.gaugeSettings(e.item))})):A("",!0),l(y,{dark:"",outline:"","no-caps":"",stretch:"",class:"text-white w-full link-t3-entry",onClick:e.linkT3Entry},{default:u((()=>[e.item.t3Entry?A("",!0):(n(),i("div",HD,[...r[26]||(r[26]=[o("p",null,"Link with an entry",-1)])])),e.item.t3Entry?(n(),i("div",GD,[o("p",jD,[r[27]||(r[27]=p("Linked with ",-1)),l(g,{name:"dataset_linked",style:{"font-size":"18px"}})]),o("p",null,s(e.item.t3Entry.description),1)])):A("",!0)])),_:1},8,["onClick"]),e.item.t3Entry?(n(),i("div",WD,[void 0!==e.item.t3Entry.auto_manual?(n(),d(at,{key:0,class:"mb-1",filled:"",dark:"",modelValue:e.item.t3Entry.auto_manual,"onUpdate:modelValue":[r[1]||(r[1]=t=>e.item.t3Entry.auto_manual=t),r[2]||(r[2]=t=>e.T3UpdateEntryField("auto_manual",e.item))],options:[{label:"Auto",value:0},{label:"Manual",value:1}],label:"Auto/Manual","emit-value":"","map-options":""},null,8,["modelValue"])):A("",!0),e.item.t3Entry.range<101&&0===e.item.t3Entry.digital_analog&&e.item.t3Entry.range?(n(),d(at,{key:1,class:"mb-1",disable:0===(null==(x=e.item.t3Entry)?void 0:x.auto_manual),filled:"",dark:"",modelValue:e.item.t3Entry.control,"onUpdate:modelValue":[r[3]||(r[3]=t=>e.item.t3Entry.control=t),r[4]||(r[4]=t=>e.T3UpdateEntryField("control",e.item))],options:[{label:null==(b=e.getEntryRange(e.item.t3Entry))?void 0:b.off,value:0},{label:null==(w=e.getEntryRange(e.item.t3Entry))?void 0:w.on,value:1}],label:"Value","emit-value":"","map-options":""},null,8,["disable","modelValue","options"])):A("",!0),e.item.t3Entry.range>100?(n(),d(at,{key:2,class:"mb-1",disable:0===(null==(M=e.item.t3Entry)?void 0:M.auto_manual),filled:"",dark:"",modelValue:e.item.t3Entry.value,"onUpdate:modelValue":[r[5]||(r[5]=t=>e.item.t3Entry.value=t),r[6]||(r[6]=t=>e.T3UpdateEntryField("value",e.item))],options:e.rangeOptions,label:"Value","emit-value":"","map-options":"","option-label":"name"},null,8,["disable","modelValue","options"])):"PROGRAM"===e.item.t3Entry.type?(n(),d(at,{key:3,class:"mb-1",disable:0===(null==(S=e.item.t3Entry)?void 0:S.auto_manual),filled:"",dark:"",modelValue:e.item.t3Entry.status,"onUpdate:modelValue":[r[7]||(r[7]=t=>e.item.t3Entry.status=t),r[8]||(r[8]=t=>e.T3UpdateEntryField("status",e.item))],options:[{label:"OFF",value:0},{label:"ON",value:1}],label:"Status","emit-value":"","map-options":""},null,8,["disable","modelValue"])):"SCHEDULE"===e.item.t3Entry.type?(n(),d(at,{key:4,class:"mb-1",disable:0===(null==(C=e.item.t3Entry)?void 0:C.auto_manual),filled:"",dark:"",modelValue:e.item.t3Entry.output,"onUpdate:modelValue":[r[9]||(r[9]=t=>e.item.t3Entry.output=t),r[10]||(r[10]=t=>e.T3UpdateEntryField("output",e.item))],options:[{label:"OFF",value:0},{label:"ON",value:1}],label:"Output","emit-value":"","map-options":""},null,8,["disable","modelValue"])):"HOLIDAY"===e.item.t3Entry.type?(n(),d(at,{key:5,class:"mb-1",disable:0===(null==(k=e.item.t3Entry)?void 0:k.auto_manual),filled:"",dark:"",modelValue:e.item.t3Entry.value,"onUpdate:modelValue":[r[11]||(r[11]=t=>e.item.t3Entry.value=t),r[12]||(r[12]=t=>e.T3UpdateEntryField("value",e.item))],options:[{label:"OFF",value:0},{label:"ON",value:1}],label:"Value","emit-value":"","map-options":""},null,8,["disable","modelValue"])):A("",!0),e.item.t3Entry.range<101&&1===e.item.t3Entry.digital_analog?(n(),d(E,{key:6,class:"mb-1",disable:0===(null==(I=e.item.t3Entry)?void 0:I.auto_manual),filled:"",dark:"",type:"number",modelValue:e.item.t3Entry.value,"onUpdate:modelValue":[r[13]||(r[13]=t=>e.item.t3Entry.value=t),r[14]||(r[14]=t=>e.T3UpdateEntryField("value",e.item))],modelModifiers:{number:!0},label:"Value",suffix:e.unitText},null,8,["disable","modelValue","suffix"])):A("",!0),l(at,{filled:"",dark:"",modelValue:e.item.settings.t3EntryDisplayField,"onUpdate:modelValue":[r[15]||(r[15]=t=>e.item.settings.t3EntryDisplayField=t),r[16]||(r[16]=t=>e.DisplayFieldValueChanged(e.item.settings.t3EntryDisplayField))],options:e.t3EntryDisplayFieldOptions,label:"Display field","emit-value":"","map-options":""},null,8,["modelValue","options"])])):A("",!0)]),l(Q,{class:"mb-2 border border-solid border-gray-700",dark:"","default-opened":"",label:"General"},{default:u((()=>{var a;return[o("div",UD,[o("div",YD,[l(E,{"input-style":"width: 100%","onUpdate:modelValue":[e.refreshMoveable,r[17]||(r[17]=t=>e.item.translate[0]=t)],label:"X",modelValue:e.item.translate[0],modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["onUpdate:modelValue","modelValue"]),l(E,{"input-style":"width: 100%","onUpdate:modelValue":[e.refreshMoveable,r[18]||(r[18]=t=>e.item.translate[1]=t)],label:"Y",modelValue:e.item.translate[1],modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["onUpdate:modelValue","modelValue"]),l(E,{"input-style":"width: 100%","onUpdate:modelValue":[e.refreshMoveable,r[19]||(r[19]=t=>e.item.width=t)],label:"Width",modelValue:e.item.width,modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["onUpdate:modelValue","modelValue"]),l(E,{"input-style":"width: 100%","onUpdate:modelValue":[e.refreshMoveable,r[20]||(r[20]=t=>e.item.height=t)],label:"Height",modelValue:e.item.height,modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["onUpdate:modelValue","modelValue"]),l(E,{"input-style":"width: 100%","onUpdate:modelValue":[e.refreshMoveable,r[21]||(r[21]=t=>e.item.rotate=t)],label:"Rotate",modelValue:e.item.rotate,modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["onUpdate:modelValue","modelValue"]),l(E,{"input-style":"width: 100%",label:"Font size",modelValue:e.item.settings.fontSize,"onUpdate:modelValue":r[22]||(r[22]=t=>e.item.settings.fontSize=t),modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["modelValue"])]),o("div",$D,[l(E,{dark:"",filled:"",modelValue:e.item.settings.title,"onUpdate:modelValue":r[23]||(r[23]=t=>e.item.settings.title=t),label:"Title"},null,8,["modelValue"]),c(o("input",{type:"color",class:"absolute top-2 right-2","onUpdate:modelValue":r[24]||(r[24]=t=>e.item.settings.titleColor=t)},null,512),[[L,e.item.settings.titleColor]])]),o("div",qD,[c(o("input",{type:"color",id:"bg-color-input","onUpdate:modelValue":r[25]||(r[25]=t=>e.item.settings.bgColor=t)},null,512),[[L,e.item.settings.bgColor]]),o("label",XD,s((null==(a=e.settings.bgColor)?void 0:a.label)||"Background color"),1)]),(n(!0),i(m,null,v(e.settings,((a,h)=>(n(),i(m,{key:h},[["bgColor","title","titleColor"].includes(h)?A("",!0):(n(),i(m,{key:0},["justifyContent"===a.type?(n(),i("div",ZD,[r[28]||(r[28]=o("div",{class:"mx-1"},"Align",-1)),l(ot,{push:""},{default:u((()=>[l(y,{push:"",icon:"format_align_left",color:"flex-start"===e.item.settings[h]?"grey-9":null,"text-color":"grey-5",onClick:t=>e.item.settings[h]="flex-start"},null,8,["color","onClick"]),l(y,{push:"",icon:"format_align_center",color:"center"===e.item.settings[h]?"grey-9":null,"text-color":"grey-5",onClick:t=>e.item.settings[h]="center"},null,8,["color","onClick"]),l(y,{push:"",icon:"format_align_right",color:"flex-end"===e.item.settings[h]?"grey-9":null,"text-color":"grey-5",onClick:t=>e.item.settings[h]="flex-end"},null,8,["color","onClick"])])),_:2},1024)])):"textAlign"===a.type?(n(),i("div",JD,[r[29]||(r[29]=o("div",{class:"mx-1"},"Align",-1)),l(ot,{push:""},{default:u((()=>[l(y,{push:"",icon:"format_align_left",color:"left"===e.item.settings[h]?"grey-9":null,"text-color":"grey-5",onClick:t=>e.item.settings[h]="left"},null,8,["color","onClick"]),l(y,{push:"",icon:"format_align_center",color:"center"===e.item.settings[h]?"grey-9":null,"text-color":"grey-5",onClick:t=>e.item.settings[h]="center"},null,8,["color","onClick"]),l(y,{push:"",icon:"format_align_right",color:"right"===e.item.settings[h]?"grey-9":null,"text-color":"grey-5",onClick:t=>e.item.settings[h]="right"},null,8,["color","onClick"])])),_:2},1024)])):"color"===a.type?(n(),i("div",KD,[c(o("input",{type:"color",id:"text-color-input","onUpdate:modelValue":t=>e.item.settings[h]=t},null,8,QD),[[L,e.item.settings[h]]]),o("label",tT,s(a.label),1)])):"text"===a.type?(n(),i("div",eT,[l(E,{autogrow:"",autofocus:"",dark:"",filled:"",modelValue:e.item.settings[h],"onUpdate:modelValue":t=>e.item.settings[h]=t,label:a.label},null,8,["modelValue","onUpdate:modelValue","label"])])):"number"===a.type?(n(),i("div",nT,[l(E,{class:"mb-1",filled:"",dark:"",type:"number",modelValue:e.item.settings[h],"onUpdate:modelValue":[t=>e.item.settings[h]=t,t=>e.updatePropsValue(h)],modelModifiers:{number:!0},label:a.label},null,8,["modelValue","onUpdate:modelValue","label"])])):"icon"===a.type?(n(),i("div",iT,[l(at,{filled:"",dark:"",modelValue:e.item.settings[h],"onUpdate:modelValue":t=>e.item.settings[h]=t,options:e.icons,label:a.label,"emit-value":"","map-options":""},{prepend:u((()=>[l(g,{name:e.item.settings[h]||"block"},null,8,["name"])])),option:u((t=>[l(Z,P({ref_for:!0},t.itemProps),{default:u((()=>[l(J,{avatar:"",class:"pr-1 min-w-0"},{default:u((()=>[l(g,{name:t.opt.value||"block"},null,8,["name"])])),_:2},1024),l(J,{class:"grow"},{default:u((()=>[l(K,null,{default:u((()=>[p(s(t.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["modelValue","onUpdate:modelValue","options","label"])])):"iconSwitch"===a.type?(n(),i("div",rT,[l(at,{filled:"",dark:"",modelValue:e.item.settings[h],"onUpdate:modelValue":t=>e.item.settings[h]=t,options:e.switchIcons,label:a.label,"emit-value":"","map-options":""},{prepend:u((()=>[l(g,{name:e.getSwitchIcon(e.item.settings[h])},null,8,["name"])])),option:u((t=>[l(Z,P({ref_for:!0},t.itemProps),{default:u((()=>[l(J,{avatar:"",class:"pr-1 min-w-0"},{default:u((()=>[l(g,{name:t.opt.icon.off||"block"},null,8,["name"])])),_:2},1024),l(J,{class:"grow"},{default:u((()=>[l(K,null,{default:u((()=>[p(s(t.opt.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["modelValue","onUpdate:modelValue","options","label"])])):"boolean"===a.type?(n(),d(N,{key:7,dark:"",filled:"",modelValue:e.item.settings[h],"onUpdate:modelValue":t=>e.item.settings[h]=t,class:"text-white w-full",label:a.label,disable:"active"===h&&(e.item.t3Entry&&0===e.item.t3Entry.auto_manual||e.item.t3Entry&&1===e.item.t3Entry.digital_analog)||e.item.t3Entry&&void 0!==e.item.t3Entry.decom},{default:u((()=>{var i;return["active"===h&&0===(null==(i=e.item.t3Entry)?void 0:i.auto_manual)?(n(),d(t,{key:0,anchor:"center left",self:"center end"},{default:u((()=>[...r[30]||(r[30]=[p(" Manual changes are not possible as the linked entry is set to auto mode. ",-1)])])),_:1})):A("",!0)]})),_:2},1032,["modelValue","onUpdate:modelValue","label","disable"])):A("",!0)],64))],64)))),128))])]})),_:1})])])):A("",!0)}],["__scopeId","data-v-f9cf6f2a"]]),sT={exports:{}},lT=ol(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));
/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */
aT=sT,function(t,e){var n=(t=t||lT).window,i=t.document,r=new function(){var t=/^(statics|enumerable|beans|preserve)$/,n=[],i=n.slice,r=Object.create,a=Object.getOwnPropertyDescriptor,o=Object.defineProperty,s=n.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},l=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},u=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},c=function(t,e,n){if(t){var i=a(t,"length");(i&&"number"==typeof i.value?s:l).call(t,e,n=n||t)}return n};function d(e,n,i,r,s){var l={};function u(t,u){"string"==typeof(u=u||(u=a(n,t))&&(u.get?u:u.value))&&"#"===u[0]&&(u=e[u.substring(1)]||u);var c,d="function"==typeof u,p=u,f=s||d&&!u.base?u&&u.get?t in e:e[t]:null;s&&f||(d&&f&&(u.base=f),d&&!1!==r&&(c=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),p&&!d&&p.get&&"function"==typeof p.get&&h.isPlainObject(p)||(p={value:p,writable:!0}),(a(e,t)||{configurable:!0}).configurable&&(p.configurable=!0,p.enumerable=null!=i?i:!c),o(e,t,p))}if(n){for(var c in n)n.hasOwnProperty(c)&&!t.test(c)&&u(c);for(var c in l){var d=l[c],p=e["set"+d],f=e["get"+d]||p&&e["is"+d];!f||!0!==r&&0!==f.length||u(c,{get:f,set:p})}}return e}function h(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&u(this,n)}return this}return d(h,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,i=t.preserve;e!==t&&d(this.prototype,t,t.enumerable,n,i),d(this,e,null,n,i)}for(var r=1,a=arguments.length;r<a;r++)this.inject(arguments[r]);return this},extend:function(){for(var t,e,n,i=this,a=0,s=arguments.length;a<s&&(!t||!e);a++)n=arguments[a],t=t||n.initialize,e=e||n.prototype;return t=t||function(){i.apply(this,arguments)},e=t.prototype=e||r(this.prototype),o(e,"constructor",{value:t,writable:!0,configurable:!0}),d(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=i,t}}).inject({enumerable:!1,initialize:h,set:h,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&d(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=r(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:u,each:c,create:r,define:o,describe:a,clone:function(t){return u(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===h||"Object"===e.name)},pick:function(t,n){return t!==e?t:n},slice:function(t,e,n){return i.call(t,e,n)}}})};aT.exports=r,r.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+r.each(this,(function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?u.instance.number(t):"string"===n?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return r.importJSON(t,this)},exportJSON:function(t){return r.exportJSON(this,t)},toJSON:function(){return r.serialize(this)},set:function(t,e){return t&&r.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!r.exports[n]&&(r.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!r.equals(t[n],e[n]))return!1}else{var n,i=Object.keys(t);if((n=i.length)!==Object.keys(e).length)return!1;for(;n--;){var a=i[n];if(!e.hasOwnProperty(a)||!r.equals(t[a],e[a]))return!1}}return!0}return!1},read:function(t,n,i,a){if(this===r){var o=this.peek(t,n);return t.__index++,o}var s=this.prototype,l=s._readIndex,u=n||l&&t.__index||0,c=t.length,d=t[u];if(a=a||c-u,d instanceof this||i&&i.readNull&&null==d&&a<=1)return l&&(t.__index=u+1),d&&i&&i.clone?d.clone():d;if(d=r.create(s),l&&(d.__read=!0),d=d.initialize.apply(d,u>0||u+a<c?r.slice(t,u,u+a):t)||d,l){t.__index=u+d.__read;var h=d.__filtered;h&&(t.__filtered=h,d.__filtered=e),d.__read=e}return d},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,a=[],o=e||0,s=i?o+i:t.length,l=o;l<s;l++)a.push(Array.isArray(r=t[l])?this.read(r,0,n):this.read(t,l,n,1));return a},readNamed:function(t,n,i,a,o){var s=this.getNamed(t,n),l=s!==e;if(l){var u=t.__filtered;if(!u){var c=this.getSource(t);(u=t.__filtered=r.create(c)).__unfiltered=c}u[n]=e}return this.read(l?[s]:t,i,a,o)},readSupported:function(t,n){var i=this.getSource(t),r=this,a=!1;return i&&Object.keys(i).forEach((function(i){if(i in n){var o=r.readNamed(t,i);o!==e&&(n[i]=o),a=!0}})),a},getSource:function(t){var n=t.__source;if(n===e){var i=1===t.length&&t[0];n=t.__source=i&&r.isPlainObject(i)?i:null}return n},getNamed:function(t,e){var n=this.getSource(t);if(n)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,n,i,r){var a;function o(r){if(!(i&&r in i||a&&r in a)){var o=n[r];o!==e&&(t[r]=o)}}if(r){for(var s,l={},u=0,c=r.length;u<c;u++)(s=r[u])in n&&(o(s),l[s]=!0);a=l}return Object.keys(n.__unfiltered||n).forEach(o),t},isPlainValue:function(t,e){return r.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var a,o=!i;if(o&&(e.formatter=new u(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),a=t._class;a&&r[0]!==a&&r.unshift(a),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){a=t._serialize(e,i);var s=t._class;!s||t._compactSerialize||!o&&n||a[0]===s||a.unshift(s)}else if(Array.isArray(t)){a=[];for(var l=0,c=t.length;l<c;l++)a[l]=r.serialize(t[l],e,n,i)}else if(r.isPlainObject(t)){a={};var d=Object.keys(t);for(l=0,c=d.length;l<c;l++){var h=d[l];a[h]=r.serialize(t[h],e,n,i)}}else a="number"==typeof t?e.formatter.number(t,e.precision):t;return o&&i.length>0?[["dictionary",i.definitions],a]:a},deserialize:function(t,e,n,i,a){var o=t,s=!n,l=s&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],c="dictionary"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];o=[];for(var d=(u=r.exports[u])?1:0,h=t.length;d<h;d++)o.push(r.deserialize(t[d],e,n,c,l));if(u){var p=o;o=e?e(u,p,s||a):new u(p)}}else if(r.isPlainObject(t))for(var f in o={},i&&(n.dictionary=o),t)o[f]=r.deserialize(t[f],e,n);return l?o[1]:o},exportJSON:function(t,e){var n=r.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return r.deserialize("string"==typeof t?JSON.parse(t):t,(function(t,n,i){var a=i&&e&&e.constructor===t,o=a?e:r.create(t.prototype);if(1===n.length&&o instanceof b&&(a||!(o instanceof M))){var s=n[0];r.isPlainObject(s)&&(s.insert=!1,a&&(n=n.concat([b.INSERT])))}return(a?o.set:t).apply(o,n),a&&(e=null),o}))},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}return t},splice:function(t,n,i,a){var o=n&&n.length,s=i===e;(i=s?t.length:i)>t.length&&(i=t.length);for(var l=0;l<o;l++)n[l]._index=i+l;if(s)return r.push(t,n),[];var u=[i,a];n&&r.push(u,n);for(var c=t.splice.apply(t,u),d=(l=0,c.length);l<d;l++)c[l]._index=e;for(l=i+o,d=t.length;l<d;l++)t[l]._index=l;return c},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var a={on:function(t,e){if("string"!=typeof t)r.each(t,(function(t,e){this.on(e,t)}),this);else{var n=this._eventTypes,i=n&&n[t],a=this._callbacks=this._callbacks||{};-1===(a=a[t]=a[t]||[]).indexOf(e)&&(a.push(e),i&&i.install&&1===a.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var n,i=this._eventTypes,a=i&&i[t],o=this._callbacks&&this._callbacks[t];return o&&(!e||-1!==(n=o.indexOf(e))&&1===o.length?(a&&a.uninstall&&a.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&o.splice(n,1)),this}r.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function n(){e.apply(this,arguments),this.off(t,n)}))},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=r.slice(arguments,1),a=e&&e.target&&!e.currentTarget;n=n.slice(),a&&(e.currentTarget=this);for(var o=0,s=n.length;o<s;o++)if(0==n[o].apply(this,i)){e&&e.stop&&e.stop();break}return a&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(n[r].length>0){var a=e[r],o=a&&a[i];o&&o.call(this,r)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};r.each(n,(function(t,n){var a="string"==typeof t,o=a?t:n,s=r.capitalize(o),l=o.substring(2).toLowerCase();i[l]=a?{}:t,o="_"+o,e["get"+s]=function(){return this[o]},e["set"+s]=function(t){var e=this[o];e&&this.off(l,e),t&&this.on(l,t),this[o]=t}})),e._eventTypes=i}return t.base.apply(this,arguments)}}},o=r.extend({_class:"PaperScope",initialize:function e(){ot=this,this.settings=new r({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var n=e.prototype;if(!this.support){var i=nt.getContext(1,1)||{};n.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:it.nativeModes},nt.release(i)}if(!this.agent){var a=t.navigator.userAgent.toLowerCase(),o=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(a)||[])[0],s="darwin"===o?"mac":o,l=n.agent=n.browser={platform:s};s&&(l[s]=!0),a.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,(function(t,e,n,i,r){if(!l.chrome){var a="opera"===e?i:/^(node|trident)$/.test(e)?r:n;l.version=a,l.versionNumber=parseFloat(a),e={trident:"msie",jsdom:"node"}[e]||e,l.name=e,l[e]=!0}})),l.chrome&&delete l.webkit,l.atom&&delete l.chrome}},version:"0.12.18",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var n=ot.PaperScript.execute(t,this,e);return Y.updateFocus(),n},install:function(t){var e=this;for(var n in r.each(["project","view","tool"],(function(n){r.define(t,n,{configurable:!0,get:function(){return e[n]}})})),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return ot=this,this.project=new x(t),this},createCanvas:function(t,e){return nt.getCanvas(t,e)},activate:function(){ot=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete o._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),s=r.extend(a,{initialize:function(t){this._scope=ot,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(r.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),l={findItemBoundsCollisions:function(t,e,n){function i(t){for(var e=new Array(t.length),n=0;n<t.length;n++){var i=t[n].getBounds();e[n]=[i.left,i.top,i.right,i.bottom]}return e}var r=i(t),a=e&&e!==t?i(e):r;return this.findBoundsCollisions(r,a,n||0)},findCurveBoundsCollisions:function(t,e,n,i){function r(t){for(var e=Math.min,n=Math.max,i=new Array(t.length),r=0;r<t.length;r++){var a=t[r];i[r]=[e(a[0],a[2],a[4],a[6]),e(a[1],a[3],a[5],a[7]),n(a[0],a[2],a[4],a[6]),n(a[1],a[3],a[5],a[7])]}return i}var a=r(t),o=e&&e!==t?r(e):a;if(i){for(var s=this.findBoundsCollisions(a,o,n||0,!1,!0),l=this.findBoundsCollisions(a,o,n||0,!0,!0),u=[],c=0,d=s.length;c<d;c++)u[c]={hor:s[c],ver:l[c]};return u}return this.findBoundsCollisions(a,o,n||0)},findBoundsCollisions:function(t,e,n,i,r){var a=!e||t===e,o=a?t:t.concat(e),s=t.length,l=o.length;function u(t,e,n){for(var i=0,r=t.length;i<r;){var a=r+i>>>1;o[t[a]][e]<n?i=a+1:r=a}return i-1}for(var c=i?1:0,d=c+2,h=i?0:1,p=h+2,f=new Array(l),g=0;g<l;g++)f[g]=g;f.sort((function(t,e){return o[t][c]-o[e][c]}));var m=[],v=new Array(s);for(g=0;g<l;g++){var y=f[g],_=o[y],x=a?y:y-s,b=y<s,w=a||!b,M=b?[]:null;if(m.length){var S=u(m,d,_[c]-n)+1;if(m.splice(0,S),a&&r){M=M.concat(m);for(var C=0;C<m.length;C++)v[D=m[C]].push(x)}else{var k=_[p],I=_[h];for(C=0;C<m.length;C++){var D=m[C],T=o[D],A=D<s,E=a||D>=s;(r||(b&&E||w&&A)&&k>=T[h]-n&&I<=T[p]+n)&&(b&&E&&M.push(a?D:D-s),w&&A&&v[D].push(x))}}}if(b&&(t===e&&M.push(y),v[y]=M),m.length){var L=u(m,d,_[d]);m.splice(L+1,0,y)}else m.push(y)}for(g=0;g<v.length;g++){var P=v[g];P&&P.sort((function(t,e){return t-e}))}return v}},u=r.extend({initialize:function(t){this.precision=r.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});u.instance=new u;var c=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,a=Math.log2||function(t){return Math.log(t)*Math.LOG2E},o=1e-12,s=112e-18;function l(t,e,n){return t<e?e:t>n?n:t}function u(t,e,i){function r(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var a=e*e-t*i,o=e*e+t*i;if(3*n(a)<o){var s=r(t),l=r(e),u=r(i),c=e*e,d=t*i;a=c-d+(l[0]*l[0]-c+2*l[0]*l[1]+l[1]*l[1]-(s[0]*u[0]-d+s[0]*u[1]+s[1]*u[0]+s[1]*u[1]))}return a}function d(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?r(2,-Math.round(a(t))):0}return{EPSILON:o,MACHINE_EPSILON:s,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(i(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=o},isMachineZero:function(t){return t>=-112e-18&&t<=s},clamp:l,integrate:function(n,i,r,a){for(var o=t[a-2],s=e[a-2],l=.5*(r-i),u=l+i,c=0,d=a+1>>1,h=1&a?s[c++]*n(u):0;c<d;){var p=l*o[c];h+=s[c++]*(n(u+p)+n(u-p))}return l*h},findRoot:function(t,e,i,r,a,o,s){for(var u=0;u<o;u++){var c=t(i),d=c/e(i),h=i-d;if(n(d)<s){i=h;break}c>0?(a=i,i=h<=r?.5*(r+a):h):(r=i,i=h>=a?.5*(r+a):h)}return l(i,r,a)},solveQuadratic:function(t,e,r,a,c,h){var p,f=1/0;if(n(t)<o){if(n(e)<o)return n(r)<o?-1:0;p=-r/e}else{var g=u(t,e*=-.5,r);if(g&&n(g)<s){var m=d(n(t),n(e),n(r));m&&(g=u(t*=m,e*=m,r*=m))}if(g>=-112e-18){var v=g<0?0:i(g),y=e+(e<0?-v:v);0===y?f=-(p=r/t):(p=y/t,f=r/y)}}var _=0,x=null==c,b=c-o,w=h+o;return isFinite(p)&&(x||p>b&&p<w)&&(a[_++]=x?p:l(p,c,h)),f!==p&&isFinite(f)&&(x||f>b&&f<w)&&(a[_++]=x?f:l(f,c,h)),_},solveCubic:function(t,e,a,u,h,p,f){var g,m,v,y,_,x=d(n(t),n(e),n(a),n(u));function b(n){var i=t*(g=n);y=(i+(m=i+e))*g+(v=m*g+a),_=v*g+u}if(x&&(t*=x,e*=x,a*=x,u*=x),n(t)<o)t=e,m=a,v=u,g=1/0;else if(n(u)<o)m=e,v=a,g=0;else{b(-e/t/3);var w=_/t,M=r(n(w),1/3),S=w<0?-1:1,C=-y/t,k=C>0?1.324717957244746*Math.max(M,i(C)):M,I=g-S*k;if(I!==g){do{b(I),I=0===y?g:g-_/y/(1+s)}while(S*I>S*g);n(t)*g*g>n(u/g)&&(m=((v=-u/g)-a)/g)}}var D=c.solveQuadratic(t,m,v,h,p,f),T=null==p;return isFinite(g)&&(0===D||D>0&&g!==h[0]&&g!==h[1])&&(T||g>p-o&&g<f+o)&&(h[D++]=T?g:l(g,p,f)),D}}},d={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},h=r.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),i&&(r=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new h(this.x,this.y)},toString:function(){var t=u.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();c.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=h.read(arguments),e=this.getLength()*t.getLength();if(c.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=h.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=arguments,e=h.read(t),n=e.x-this.x,i=e.y-this.y,a=n*n+i*i,o=r.read(t);return o?a:Math.sqrt(a)},normalize:function(t){t===e&&(t=1);var n=this.getLength(),i=0!==n?t/n:0,r=new h(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new h(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=h.read(arguments);return new h(this.x+t.x,this.y+t.y)},subtract:function(){var t=h.read(arguments);return new h(this.x-t.x,this.y-t.y)},multiply:function(){var t=h.read(arguments);return new h(this.x*t.x,this.y*t.y)},divide:function(){var t=h.read(arguments);return new h(this.x/t.x,this.y/t.y)},modulo:function(){var t=h.read(arguments);return new h(this.x%t.x,this.y%t.y)},negate:function(){return new h(-this.x,-this.y)},isInside:function(){return m.read(arguments).contains(this)},isClose:function(){var t=arguments,e=h.read(t),n=r.read(t);return this.getDistance(e)<=n},isCollinear:function(){var t=h.read(arguments);return h.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=h.read(arguments);return h.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=c.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=h.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=h.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=h.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new h(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=h.read(t),n=h.read(t);return new h(Math.min(e.x,n.x),Math.min(e.y,n.y))},max:function(){var t=arguments,e=h.read(t),n=h.read(t);return new h(Math.max(e.x,n.x),Math.max(e.y,n.y))},random:function(){return new h(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},r.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new h(e(this.x),e(this.y))}}),{})),p=h.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),f=r.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),i&&(r=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new f(this.width,this.height)},toString:function(){var t=u.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=f.read(arguments);return new f(this.width+t.width,this.height+t.height)},subtract:function(){var t=f.read(arguments);return new f(this.width-t.width,this.height-t.height)},multiply:function(){var t=f.read(arguments);return new f(this.width*t.width,this.height*t.height)},divide:function(){var t=f.read(arguments);return new f(this.width/t.width,this.height/t.height)},modulo:function(){var t=f.read(arguments);return new f(this.width%t.width,this.height%t.height)},negate:function(){return new f(-this.width,-this.height)},isZero:function(){var t=c.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new f(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new f(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new f(Math.random(),Math.random())}}},r.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new f(e(this.width),e(this.height))}}),{})),g=f.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),m=r.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,n,i,a){var o,s=arguments,l=typeof t;if("number"===l?(this._set(t,n,i,a),o=4):"undefined"===l||null===t?(this._set(0,0,0,0),o=null===t?1:0):1===s.length&&(Array.isArray(t)?(this._set.apply(this,t),o=1):t.x!==e||t.width!==e?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),o=1):t.from===e&&t.to===e&&(this._set(0,0,0,0),r.readSupported(s,this)&&(o=1))),o===e){var u,c,d=h.readNamed(s,"from"),p=r.peek(s),g=d.x,m=d.y;if(p&&p.x!==e||r.hasNamed(s,"to")){var v=h.readNamed(s,"to");u=v.x-g,c=v.y-m,u<0&&(g=v.x,u=-u),c<0&&(m=v.y,c=-c)}else{var y=f.read(s);u=y.width,c=y.height}this._set(g,m,u,c),o=s.__index}var _=s.__filtered;return _&&(this.__filtered=_),this.__read&&(this.__read=o),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new m(this.x,this.y,this.width,this.height)},equals:function(t){var e=r.isPlainValue(t)?m.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=u.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?h:p)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=h.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?f:g)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=f.read(arguments),e=this._sx,n=this._sy,i=t.width,r=t.height;e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?h:p)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=h.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==e||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(m.read(arguments)):this._containsPoint(h.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=m.read(arguments),e=r.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=m.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new m(e,n,i-e,r-n)},unite:function(){var t=m.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new m(e,n,i-e,r-n)},include:function(){var t=h.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new m(e,n,i-e,r-n)},expand:function(){var t=f.read(arguments),e=t.width,n=t.height;return new m(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,n){return this.expand(this.width*t-this.width,this.height*(n===e?t:n)-this.height)}},r.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],a=t[i?1:0],o="get"+r,s="get"+a,l="set"+r,u="set"+a,c="set"+n;this["get"+n]=function(t){return new(t?h:p)(this[o](),this[s](),this,c)},this[c]=function(){var t=h.read(arguments);this[l](t.x),this[u](t.y)}}),{beans:!0})),v=m.extend({initialize:function(t,e,n,i,r,a){this._set(t,e,n,i,!0),this._owner=r,this._setter=a},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=m.prototype;return r.each(["x","y","width","height"],(function(t){var e=r.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),r.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),y=r.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments,r=i.length,a=!0;if(r>=6?this._set.apply(this,i):1===r||2===r?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):a=!1:r?a=!1:this.reset(),!a)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,a,o){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=a,o||this._changed(),this},_serialize:function(t,e){return r.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new y(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=u.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,r.pick(t,!0),e),this.isIdentity())},translate:function(){var t=h.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=arguments,e=h.read(t),n=h.read(t,0,{readNull:!0});return n&&this.translate(n),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=h.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),a=Math.sin(t),o=n-n*r+i*a,s=i-n*a-i*r,l=this._a,u=this._b,c=this._c,d=this._d;return this._a=r*l+a*c,this._b=r*u+a*d,this._c=-a*l+r*c,this._d=-a*u+r*d,this._tx+=o*l+s*c,this._ty+=o*u+s*d,this._changed(),this},shear:function(){var t=arguments,e=h.read(t),n=h.read(t,0,{readNull:!0});n&&this.translate(n);var i=this._a,r=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*i,this._d+=e.x*r,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var t=arguments,e=h.read(t),n=h.read(t,0,{readNull:!0}),i=Math.PI/180,r=new h(Math.tan(e.x*i),Math.tan(e.y*i));return this.shear(r,n)},append:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,a=this._d,o=t._a,s=t._c,l=t._b,u=t._d,c=t._tx,d=t._ty;this._a=o*n+l*r,this._c=s*n+u*r,this._b=o*i+l*a,this._d=s*i+u*a,this._tx+=c*n+d*r,this._ty+=c*i+d*a,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,a=this._d,o=this._tx,s=this._ty,l=t._a,u=t._c,c=t._b,d=t._d,h=t._tx,p=t._ty;this._a=l*n+u*i,this._c=l*r+u*a,this._b=c*n+d*i,this._d=c*r+d*a,this._tx=l*o+u*s+h,this._ty=c*o+d*s+p,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,a=this._ty,o=t*i-e*n,s=null;return o&&!isNaN(o)&&isFinite(r)&&isFinite(a)&&(this._a=i/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*a-i*r)/o,this._ty=(e*r-t*a)/o,s=this),s},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new y(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(h.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new h),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var a=t[i],o=t[i+1];e[i]=a*this._a+o*this._c+this._tx,e[i+1]=a*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,a=[e,n,i,n,i,r,e,r];return this._transformCoordinates(a,a,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),a=r.slice(),o=2;o<8;o++){var s=i[o],l=1&o;s<r[l]?r[l]=s:s>a[l]&&(a[l]=s)}return e||(e=new m),e._set(r[0],r[1],a[0]-r[0],a[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(h.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,a=this._c,o=this._d,s=this._tx,l=this._ty,u=i*o-r*a,c=null;if(u&&!isNaN(u)&&isFinite(s)&&isFinite(l)){var d=t.x-this._tx,p=t.y-this._ty;e||(e=new h),c=e._set((d*o-p*a)/u,(p*i-d*r)/u,n)}return c},decompose:function(){var t,e,n,i=this._a,r=this._b,a=this._c,o=this._d,s=i*o-r*a,l=Math.sqrt,u=Math.atan2,c=180/Math.PI;if(0!==i||0!==r){var d=l(i*i+r*r);t=Math.acos(i/d)*(r>0?1:-1),e=[d,s/d],n=[u(i*a+r*o,d*d),0]}else if(0!==a||0!==o){var p=l(a*a+o*o);t=Math.asin(a/p)*(o>0?1:-1),e=[s/p,p],n=[0,u(i*a+r*o,p*p)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*c,scaling:new h(e),skewing:new h(n[0]*c,n[1]*c)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new h(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},r.each(["a","b","c","d","tx","ty"],(function(t){var e=r.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}}),{})),_=r.extend({_class:"Line",initialize:function(t,e,n,i,r){var a=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,a=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,a=n),a||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new h(this._px,this._py)},getVector:function(){return new h(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return _.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return _.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return _.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return h.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return h.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,a,o,s,l,u){l||(n-=t,i-=e,o-=r,s-=a);var d=n*s-i*o;if(!c.isMachineZero(d)){var p=t-r,f=e-a,g=(o*f-s*p)/d,m=(n*f-i*p)/d,v=-1e-12,y=1+1e-12;if(u||v<g&&g<y&&v<m&&m<y)return u||(g=g<=0?0:g>=1?1:g),new h(t+g*n,e+g*i)}},getSide:function(t,e,n,i,r,a,o,s){o||(n-=t,i-=e);var l=r-t,u=l*i-(a-e)*n;return!s&&c.isMachineZero(u)&&(u=(l*n+l*n)/(n*n+i*i))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(t,e,n,i,r,a,o){return o||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?a-e:e-a:((r-t)*i-(a-e)*n)/(i>n?i*Math.sqrt(1+n*n/(i*i)):n*Math.sqrt(1+i*i/(n*n)))},getDistance:function(t,e,n,i,r,a,o){return Math.abs(_.getSignedDistance(t,e,n,i,r,a,o))}}}),x=s.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){s.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new j(null,null,this),this._view=Y.create(this,t||nt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return r.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,a=e._id,o=r[a];o?o.flags|=t:i.push(r[a]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new M({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:k,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(e,t)},insertLayer:function(t,e){if(e instanceof M){e._remove(!1,!0),r.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,n,i){return n=this.insertLayer(t,n)||(this._activeLayer||this._insertItem(e,new M(b.NO_INSERT),!0)).insertChild(t,n),i&&n.activate&&n.activate(),n},getItems:function(t){return b._getItems(this,t)},getItem:function(t){return b._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return r.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var a in e){var o=e[a];o&&o!=n&&delete o[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,a=new r({offset:new h(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new y],updateMatrix:!0}),o=0,s=i.length;o<s;o++)i[o].draw(t,a);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var l=this._selectionItems,u=this._scope.settings.handleSize,c=this._updateVersion;for(var d in l)l[d]._drawSelection(t,e,u,l,c);t.restore()}}}),b=r.extend(a,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=r.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new y,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return r.each(t,(function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}}),{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,n){var i=t&&r.isPlainObject(t),a=i&&!0===t.internal,o=this._matrix=new y,s=i&&t.project||ot.project,l=ot.settings;return this._id=a?null:d.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,n&&o.translate(n),o._owner=this,this._style=new j(s._currentStyle,this,s),a||i&&0==t.insert||!l.insertItems&&(!i||1!=t.insert)?this._setProject(s):(i&&t.parent||s)._insertItem(e,this,!0),i&&t!==b.NO_INSERT&&t!==b.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(t,e){var n={},i=this;function a(a){for(var o in a){var s=i[o];r.equals(s,"leading"===o?1.2*a.fontSize:a[o])||(n[o]=r.serialize(s,t,"data"!==o,e))}}return a(this._serializeFields),this instanceof w||a(this._style._defaults),[this._class,n]},_changed:function(t){var n=this._symbol,i=this._parent||n,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=e),16&t&&(this._globalMatrix=e),i&&72&t&&b._clearBoundsCache(i),2&t&&b._clearBoundsCache(this),r&&r._changed(t,this),n&&n._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var n=this._getOwner();if(t&&n){var i=n._children,r=n._namedChildren;(r[t]=r[t]||[]).push(this),t in i||(i[t]=this)}this._name=t||e,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},r.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=r.capitalize(t),n="_"+t,i={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(i[t]||257))}}),{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?h:p,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(h.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new p(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=h.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},r.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},(function(t,e){this[e]=function(e){return this.getBounds(e,t)}}),{beans:!0,getBounds:function(t,e){var n=e||t instanceof y,i=r.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var a=this._getCachedBounds(n&&t,i).rect;return arguments.length?a:new v(a.x,a.y,a.width,a.height,this,"setBounds")},setBounds:function(){var t=m.read(arguments),e=this.getBounds(),n=this._matrix,i=new y,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new y).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(b._updateBoundsCache(this,e.cacheItem),b._getBounds(n,t,e)):new m},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var i=e.internal&&!n,r=e.cacheItem,a=i?null:this._matrix._orNullIfIdentity(),o=r&&(!t||t.equals(a))&&this._getBoundsCacheKey(e,i),s=this._bounds;if(b._updateBoundsCache(this._parent||this._symbol,r),o&&s&&o in s)return{rect:(h=s[o]).rect.clone(),nonscaling:h.nonscaling};var l=this._getBounds(t||a,e),u=l.rect||l,c=this._style,d=l.nonscaling||c.hasStroke()&&!c.getStrokeScaling();if(o){s||(this._bounds=s={});var h=s[o]={rect:u.clone(),nonscaling:d,internal:i}}return{rect:u,nonscaling:d}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var n=t._boundsCache;if(n){t._bounds=t._position=t._boundsCache=e;for(var i=0,r=n.list,a=r.length;i<a;i++){var o=r[i];o!==t&&(o._bounds=o._position=e,o._boundsCache&&b._clearBoundsCache(o))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,a=i,o=r,s=!1;n=n||{};for(var l=0,u=t.length;l<u;l++){var c=t[l];if(c._visible&&!c.isEmpty(!0)){var d=c._getCachedBounds(e&&e.appended(c._matrix),n,!0),h=d.rect;i=Math.min(h.x,i),a=Math.min(h.y,a),r=Math.max(h.x+h.width,r),o=Math.max(h.y+h.height,o),d.nonscaling&&(s=!0)}}return{rect:isFinite(i)?new m(i,a,r-i,o-a):new m,nonscaling:s}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new p(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=h.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),i=this._decomposed,r=new y,a=c.isZero;if(a(t.x)||a(t.y))r.translate(i.translation),n&&r.rotate(n),r.scale(e.x,e.y),this._matrix.set(r);else{var o=this.getPosition(!0);r.translate(o),n&&r.rotate(n),r.scale(e.x/t.x,e.y/t.y),n&&r.rotate(-n),r.translate(o.negate()),this.transform(r)}i&&(i.scaling=e,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){e=null;for(var r=0,a=i.length;r<a;r++)i[r]._globalMatrix=null;break}i.push(n),n=n._parent}return e||(e=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&e.prepend(n.getGlobalMatrix(!0))),t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof M)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(t){var n=this._parent,i=n&&n._children;i&&n.insertChildren(t in i?t:e,[this])},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return r.equals(this._children,t._children)},clone:function(t){var n=new this.constructor(b.NO_INSERT),i=this._children,a=r.pick(t?t.insert:e,t===e||!0===t),o=r.pick(t?t.deep:e,!0);i&&n.copyAttributes(this),i&&!o||n.copyContent(this),i||n.copyAttributes(this),a&&n.insertAbove(this);var s=this._name,l=this._parent;if(s&&l){i=l._children;for(var u=s,c=1;i[s];)s=u+" "+c++;s!==u&&n.setName(s)}return n},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,a=n.length;i<a;i++){var o=n[i];t.hasOwnProperty(o)&&(this[o]=t[o])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var s=t._data,l=t._name;this._data=s?r.clone(s):null,l&&this.setName(l)},rasterize:function(t,n){var i,a,o;r.isPlainObject(t)?(i=t.resolution,a=t.insert,o=t.raster):(i=t,a=n),o||(o=new C(b.NO_INSERT));var s=this.getStrokeBounds(),l=(i||this.getView().getResolution())/72,u=s.getTopLeft().floor(),c=s.getBottomRight().ceil(),d=new f(c.subtract(u)),h=d.multiply(l);if(o.setSize(h,!0),!h.isZero()){var p=o.getContext(!0),g=(new y).scale(l).translate(u.negate());p.save(),g.applyToContext(p),this.draw(p,new r({matrices:[g]})),p.restore()}return o._matrix.set((new y).translate(u.add(d.divide(2))).scale(1/l)),(a===e||a)&&o.insertAbove(this),o},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(h.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return m.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new N.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof b&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){var t=arguments;return this._hitTest(h.read(t),D.getOptions(t))}function e(){var t=arguments,e=h.read(t),n=D.getOptions(t),i=[];return this._hitTest(e,new r({all:i},n)),i}function n(t,e,n,i){var r=this._children;if(r)for(var a=r.length-1;a>=0;a--){var o=r[a],s=o!==i&&o._hitTest(t,e,n);if(s&&!e.all)return s}return null}return x.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var i=this._matrix,a=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(e.tolerance,1e-12),s=e._tolerancePadding=new f(N._getStrokePadding(o,i._shiftless().invert()));if(!(t=i._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(s.multiply(2))._containsPoint(t))return null;var l,u,c=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==r.hyphenate(this._class)||e.class&&!(this instanceof e.class)),d=e.match,h=this;function p(t){return t&&d&&!d(t)&&(t=null),t&&e.all&&e.all.push(t),t}function g(e,n){var i=n?l["get"+n]():h.getPosition();if(t.subtract(i).divide(s).length<=1)return new D(e,h,{name:n?r.hyphenate(n):e,point:i})}var m=e.position,v=e.center,y=e.bounds;if(c&&this._parent&&(m||v||y)){if((v||y)&&(l=this.getInternalBounds()),!(u=m&&g("position")||v&&g("center","Center"))&&y)for(var _=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],x=0;x<8&&!u;x++)u=g("bounds",_[x]);u=p(u)}return u||(u=this._hitTestChildren(t,e,a)||c&&p(this._hitTestSelf(t,e,a,this.getStrokeScaling()?null:a._shiftless().invert()))||null),u&&u.point&&(u.point=i.transform(u.point)),u},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new D("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var a=/^(empty|editable)$/.test(t)?this["is"+r.capitalize(t)]():"type"===t?r.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;a=this._class}if("function"==typeof e)return!!e(a);if(e){if(e.test)return e.test(a);if(r.isPlainObject(e))return function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var a=e[i],o=n[i];if(r.isPlainObject(a)&&r.isPlainObject(o)){if(!t(a,o))return!1}else if(!r.equals(a,o))return!1}return!0}(e,a)}return r.equals(a,e)},getItems:function(t){return b._getItems(this,t,this._matrix)},getItem:function(t){return b._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,a,o){if(!a){var s="object"==typeof n&&n,l=s&&s.overlapping,u=s&&s.inside,c=(x=l||u)&&m.read([x]);a={items:[],recursive:s&&!1!==s.recursive,inside:!!u,overlapping:!!l,rect:c,path:l&&new N.Rectangle({rectangle:c,insert:!1})},s&&(n=r.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var d=e._children,h=a.items;i=(c=a.rect)&&(i||new y);for(var p=0,f=d&&d.length;p<f;p++){var g=d[p],v=i&&i.appended(g._matrix),_=!0;if(c){var x=g.getBounds(v);if(!c.intersects(x))continue;c.contains(x)||a.overlapping&&(x.contains(c)||a.path.intersects(g,v))||(_=!1)}if(_&&g.matches(n)&&(h.push(g),o))break;if(!1!==a.recursive&&t(g,n,v,a,o),o&&h.length>0)break}return h}}},{importJSON:function(t){var e=r.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(e,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){for(var i={},a=(e=r.slice(e)).length-1;a>=0;a--){var o=(c=e[a])&&c._id;!c||i[o]?e.splice(a,1):(c._remove(!1,!0),i[o]=!0)}r.splice(n,e,t,0);for(var s=this._project,l=s._changes,u=(a=0,e.length);a<u;a++){var c,d=(c=e[a])._name;c._parent=this,c._setProject(s,!0),d&&c.setName(d),l&&c._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(e,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(e,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],a=r?r.indexOf(this):-1;-1!==a&&(e[i]==this&&delete e[i],r.splice(a,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,a=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=a&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),r.splice(n._children,null,a,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=r.pick(e,this._children.length);for(var n=r.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var i=0;i<n;i++)if(!e[i].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,a=Math.min(n.length,i.length);r<a;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},r.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=arguments,i=(e?r:h).read(n),a=h.read(n,0,{readNull:!0});return this.transform((new y)[t](i,a||this.getPosition(!0)))}}),{translate:function(){var t=new y;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n){var i=this._matrix,r=t&&!t.isIdentity(),a=n&&this._canApplyMatrix||this._applyMatrix&&(r||!i.isIdentity()||e&&this._children);if(!r&&!a)return this;if(r){!t.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(t,!0);var o=this._style,s=o.getFillColor(!0),l=o.getStrokeColor(!0);s&&s.transform(t),l&&l.transform(t)}if(a&&(a=this._transformContent(i,e,n))){var u=this._pivot;u&&i._transformPoint(u,u,!0),i.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,d=this._position;(r||a)&&this._changed(25);var h=r&&c&&t.decompose();if(h&&h.skewing.isZero()&&h.rotation%90==0){for(var p in c){var f=c[p];if(f.nonscaling)delete c[p];else if(a||!f.internal){var g=f.rect;t._transformBounds(g,g)}}this._bounds=c;var m=c[this._getBoundsCacheKey(this._boundsOptions||{})];m&&(this._position=this._getPositionFromBounds(m.rect))}else r&&d&&this._pivot&&(this._position=t._transformPoint(d,d));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,a=i.length;r<a;r++)i[r].transform(t,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(h.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(h.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(h.read(arguments))},localToParent:function(){return this._matrix._transformPoint(h.read(arguments))},fitBounds:function(t,e){t=m.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,a=(e?i>r:i<r)?t.width/n.width:t.height/n.height,o=new m(new h,new f(n.width*a,n.height*a));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t,r)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=i.getStrokeWidth();var a=i.getStrokeJoin(),o=i.getStrokeCap(),s=i.getMiterLimit();if(a&&(t.lineJoin=a),o&&(t.lineCap=o),s&&(t.miterLimit=s),ot.support.nativeDash){var l=i.getDashArray(),u=i.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=u):(t.mozDash=l,t.mozDashOffset=u))}}if(i.hasShadow()){var c=e.pixelRatio||1,d=n._shiftless().prepend((new y).scale(c,c)),p=d.transform(new h(i.getShadowBlur(),0)),f=d.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=p.getLength(),t.shadowOffsetX=f.x,t.shadowOffsetY=f.y}},draw:function(t,e,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var i=e.matrices,r=e.viewMatrix,a=this._matrix,o=i[i.length-1].appended(a);if(o.isInvertible()){r=r?r.appended(o):o,i.push(o),e.updateMatrix&&(this._globalMatrix=o);var s,l,u,d=this._blendMode,h=c.clamp(this._opacity,0,1),p="normal"===d,f=it.nativeModes[d],g=p&&1===h||e.dontStart||e.clip||(f||p&&h<1)&&this._canComposite(),m=e.pixelRatio||1;if(!g){var v=this.getStrokeBounds(r);if(!v.width||!v.height)return void i.pop();u=e.offset,l=e.offset=v.getTopLeft().floor(),s=t,t=nt.getContext(v.getSize().ceil().add(1).multiply(m)),1!==m&&t.scale(m,m)}t.save();var y=n?n.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,_=!g&&e.clipItem,x=!y||_;if(g?(t.globalAlpha=h,f&&(t.globalCompositeOperation=d)):x&&t.translate(-l.x,-l.y),x&&(g?a:r).applyToContext(t),_&&e.clipItem.draw(t,e.extend({clip:!0})),y){t.setTransform(m,0,0,m,0,0);var b=e.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,e,r,y),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),g||(it.process(d,t,s,h,l.subtract(u).multiply(m)),nt.release(t),e.offset=u)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof O)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var a=this._selection,o=1&a,s=2&a||o&&this._selectBounds,l=4&a;if(this._drawSelected||(o=!1),(o||s||l)&&this._isUpdated(r)){var u,c=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),d=e.appended(this.getGlobalMatrix(!0)),h=n/2;if(t.strokeStyle=t.fillStyle=c?c.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,d,i),l){var p=this.getPosition(!0),f=this._parent,g=f?f.localToGlobal(p):p,m=g.x,v=g.y;t.beginPath(),t.arc(m,v,h,0,2*Math.PI,!0),t.stroke();for(var y=[[0,-1],[1,0],[0,1],[-1,0]],_=h,x=n+1,b=0;b<4;b++){var w=y[b],M=w[0],S=w[1];t.moveTo(m+M*_,v+S*_),t.lineTo(m+M*x,v+S*x),t.stroke()}}if(s){var C=d._transformCorners(this.getInternalBounds());for(t.beginPath(),b=0;b<8;b++)t[b?"lineTo":"moveTo"](C[b],C[++b]);for(t.closePath(),t.stroke(),b=0;b<8;b++)t.fillRect(C[b]-h,C[++b]-h,n,n)}}},_canComposite:function(){return!1}},r.each(["down","drag","up","move"],(function(t){this["removeOn"+r.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var i=n&&n.easing,r=n&&n.start,a=null!=n&&("number"==typeof n?n:n.duration),o=new tt(this,t,e,a,i,r);return a&&this.on("frame",(function t(e){o._handleFrame(1e3*e.time),o.running||this.off("frame",t)})),o},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),w=b.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(n){t.base.call(this,n),2050&n&&(this._clipItem=e)},_getClipItem:function(){var t=this._clipItem;if(t===e){t=null;for(var n=this._children,i=0,r=n.length;i<r;i++)if(n[i]._clipMask){t=n[i];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(e),r.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,a=0,o=r.length;a<o;a++){var s=r[a];s!==i&&s.draw(t,e)}}}),M=w.extend({_class:"Layer",initialize:function(){w.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),S=b.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&r.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new g(t.width,t.height,this,"setSize")},setSize:function(){var t=f.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(f.min(this._radius,t.divide(2).abs())):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new g(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=f.read(arguments),this._radius){if(this._radius.equals(t))return;this._radius.set(t),"rectangle"===e?(n=f.max(this._size,t.multiply(2)),this._size.set(n)):"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var n=new(N[r.capitalize(this._type)])({center:new h,size:this._size,radius:this._radius,insert:!1});return n.copyAttributes(this),ot.settings.applyMatrix&&n.setApplyMatrix(!0),(t===e||t)&&n.insertAbove(this),n},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var r=this._style,a=r.hasFill(),o=r.hasStroke(),s=e.dontFinish||e.clip,l=!i;if(a||o||s){var u=this._type,c=this._radius,d="circle"===u;if(e.dontStart||t.beginPath(),l&&d)t.arc(0,0,c,0,2*Math.PI,!0);else{var h=d?c:c.width,p=d?c:c.height,f=this._size,g=f.width,m=f.height;if(l&&"rectangle"===u&&0===h&&0===p)t.rect(-g/2,-m/2,g,m);else{var v=g/2,y=m/2,_=.44771525016920644,x=h*_,b=p*_,w=[-v,-y+p,-v,-y+b,-v+x,-y,-v+h,-y,v-h,-y,v-x,-y,v,-y+b,v,-y+p,v,y-p,v,y-b,v-x,y,v-h,y,-v+h,y,-v+x,y,-v,y-b,-v,y-p];i&&i.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),v!==h&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==p&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),v!==h&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}s||!a&&!o||(this._setStyles(t,e,n),a&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new m(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(N._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),a=1;a<=4;a++){var o=new h(a>1&&a<4?-1:1,a>2?-1:1),s=o.multiply(r),l=s.subtract(o.multiply(i));if(new m(n?s.add(o.multiply(n)):s,l).contains(e))return{point:l,quadrant:a}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var i=t(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,a,o){var s=!1,l=this._style,u=r.stroke&&l.hasStroke(),c=r.fill&&l.hasFill();if(u||c){var d=this._type,h=this._radius,p=u?l.getStrokeWidth()/2:0,f=r._tolerancePadding.add(N._getStrokePadding(p,!l.getStrokeScaling()&&o));if("rectangle"===d){var g=f.multiply(2),v=t(this,i,g);if(v)s=e(i.subtract(v.point),h,f,v.quadrant);else{var y=new m(this._size).setCenter(0,0),_=y.expand(g),x=y.expand(g.negate());s=_._containsPoint(i)&&!x._containsPoint(i)}}else s=e(i,h,f)}return s?new D(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,a){var o=r.create(S.prototype);return o._type=t,o._size=n,o._radius=i,o._initialize(r.getNamed(a),e),o}return{Circle:function(){var e=arguments,n=h.readNamed(e,"center"),i=r.readNamed(e,"radius");return t("circle",n,new f(2*i),i,e)},Rectangle:function(){var e=arguments,n=m.readNamed(e,"rectangle"),i=f.min(f.readNamed(e,"radius"),n.getSize(!0).divide(2));return t("rectangle",n.getCenter(!0),n.getSize(!0),i,e)},Ellipse:function(){var e=arguments,n=S._readEllipse(e),i=n.radius;return t("ellipse",n.center,i.multiply(2),i,e)},_readEllipse:function(t){var e,n;if(r.hasNamed(t,"radius"))e=h.readNamed(t,"center"),n=f.readNamed(t,"radius");else{var i=m.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),C=b.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,n){if(!this._initialize(t,n!==e&&h.read(arguments))){var r,a=typeof t,o="string"===a?i.getElementById(t):"object"===a?t:null;if(o&&o!==b.NO_INSERT)if(o.getContext||null!=o.naturalHeight)r=o;else if(o){var s=f.read(arguments);s.isZero()||(r=nt.getCanvas(s))}r?this.setImage(r):this.setSource(t)}this._size||(this._size=new f,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=nt.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new g(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,e){var n=f.read(arguments);if(n.equals(this._size))e&&this.clear();else if(n.width>0&&n.height>0){var i=!e&&this.getElement();this._setImage(nt.getCanvas(n)),i&&this.getContext(!0).drawImage(i,0,0,n.width,n.height)}else this._canvas&&nt.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new h(0,0).transform(t),n=new h(1,0).transform(t).subtract(e),i=new h(0,1).transform(t).subtract(e);return new f(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),i=t&&t.type||"load";n&&e.responds(i)&&(ot=n._scope,e.emit(i,new q(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&U.add(t,{load:function(i){e._setImage(t),n(i)},error:n})},_setImage:function(t){this._canvas&&nt.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new f(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=nt.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){nt.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(e){var n=new t.Image,i=this._crossOrigin;i&&(n.crossOrigin=i),e&&(n.src=e),this.setImage(n)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing="string"==typeof t?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=m.read(arguments),e=nt.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=m.read(arguments),e=new C(b.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=h.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof P?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new m(t):"x"in t&&(e=new m(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var i=Math.min(e.width,32),a=Math.min(e.height,32),o=C._sampleContext;o?o.clearRect(0,0,33,33):o=C._sampleContext=nt.getContext(new f(32)),o.save();var s=(new y).scale(i/e.width,a/e.height).translate(-e.x,-e.y);s.applyToContext(o),n&&n.draw(o,new r({clip:!0,matrices:[s]})),this._matrix.applyToContext(o);var l=this.getElement(),u=this._size;l&&o.drawImage(l,-u.width/2,-u.height/2),o.restore();for(var c=o.getImageData(.5,.5,Math.ceil(i),Math.ceil(a)).data,d=[0,0,0],h=0,p=0,g=c.length;p<g;p+=4){var v=c[p+3];h+=v,v/=255,d[0]+=c[p]*v,d[1]+=c[p+1]*v,d[2]+=c[p+2]*v}for(p=0;p<3;p++)d[p]/=h;return h?B.read(d):null},getPixel:function(){var t=h.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new B("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=arguments,e=h.read(t),n=B.read(t),i=n._convert("rgb"),r=n._alpha,a=this.getContext(!0),o=a.createImageData(1,1),s=o.data;s[0]=255*i[0],s[1]=255*i[1],s[2]=255*i[2],s[3]=null!=r?255*r:255,a.putImageData(o,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=f.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=m.read(arguments);return t.isEmpty()&&(t=new m(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var e=h.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,e){var n=new m(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new D("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var i=this.getElement();if(i&&i.width>0&&i.height>0){t.globalAlpha=c.clamp(this._opacity,0,1),this._setStyles(t,e,n);var r=this._smoothing,a="off"===r;W.setPrefixed(t,a?"imageSmoothingEnabled":"imageSmoothingQuality",!a&&r),t.drawImage(i,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),k=b.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,n){this._initialize(t,n!==e&&h.read(arguments,1))||this.setDefinition(t instanceof I?t:new I(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var i=e.extend({all:!1}),r=this._definition._item._hitTest(t,i,n);return r&&(r.item=this),r},_draw:function(t,e){this._definition._item.draw(t,e)}}),I=r.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=d.get(),this.project=ot.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,(function(){return r.serialize([this._class,this._item],t,!1,e)}))},_changed:function(t){8&t&&b._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new h),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new k(this,t)},clone:function(){return new I(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),D=r.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&r.read(t);return new r({type:null,tolerance:ot.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),T=r.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,n,i,r,a,o){var s,l,u,c,d=arguments.length;d>0&&(null==t||"object"==typeof t?1===d&&t&&"point"in t?(s=t.point,l=t.handleIn,u=t.handleOut,c=t.selection):(s=t,l=n,u=i,c=r):(s=[t,n],l=i!==e?[i,r]:null,u=a!==e?[a,o]:null)),new A(s,this,"_point"),new A(l,this,"_handleIn"),new A(u,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,i=this._selection,a=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&a.push(i),r.serialize(a,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(h.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(h.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(h.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new L(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,n,i){var r=t||{},a=r.type,o=r.factor,s=this.getPrevious(),l=this.getNext(),u=(s||this)._point,c=this._point,d=(l||this)._point,p=u.getDistance(c),f=c.getDistance(d);if(a&&"catmull-rom"!==a){if("geometric"!==a)throw new Error("Smoothing method '"+a+"' not supported.");if(s&&l){var g=u.subtract(d),m=o===e?.4:o,v=m*p/(p+f);n||this.setHandleIn(g.multiply(v)),i||this.setHandleOut(g.multiply(v-m))}}else{var y=o===e?.5:o,_=Math.pow(p,y),x=_*_,b=Math.pow(f,y),w=b*b;if(!n&&s){var M=2*w+3*b*_+x,S=3*b*(b+_);this.setHandleIn(0!==S?new h((w*u._x+M*c._x-x*d._x)/S-c._x,(w*u._y+M*c._y-x*d._y)/S-c._y):new h)}!i&&l&&(M=2*x+3*_*b+w,S=3*_*(_+b),this.setHandleOut(0!==S?new h((x*d._x+M*c._x-w*u._x)/S-c._x,(x*d._y+M*c._y-w*u._y)/S-c._y):new h))}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new T(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new T(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,a=t._point,o=e._point,s=t._handleIn,l=e._handleIn,u=e._handleOut,c=t._handleOut;this._point._set(i*a._x+r*o._x,i*a._y+r*o._y,!0),this._handleIn._set(i*s._x+r*l._x,i*s._y+r*l._y,!0),this._handleOut._set(i*c._x+r*u._x,i*c._y+r*u._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,a=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,s=i._y,l=2;return e[0]=o,e[1]=s,r&&(e[l++]=r._x+o,e[l++]=r._y+s),a&&(e[l++]=a._x+o,e[l++]=a._y+s),t&&(t._transformCoordinates(e,e,l/2),o=e[0],s=e[1],n?(i._x=o,i._y=s,l=2,r&&(r._x=e[l++]-o,r._y=e[l++]-s),a&&(a._x=e[l++]-o,a._y=e[l++]-s)):(r||(e[l++]=o,e[l++]=s),a||(e[l++]=o,e[l++]=s))),e}}),A=h.extend({initialize:function(t,n,i){var r,a,o;if(t)if((r=t[0])!==e)a=t[1];else{var s=t;(r=s.x)===e&&(r=(s=h.read(arguments)).x),a=s.y,o=s.selected}else r=a=0;this._x=r,this._y=a,this._owner=n,n[i]=this,o&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=c.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),E=r.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,a,o,s){var l,u,c,d,h,p,f=arguments.length;3===f?(this._path=t,l=e,u=n):f?1===f?"segment1"in t?(l=new T(t.segment1),u=new T(t.segment2)):"point1"in t?(c=t.point1,h=t.handle1,p=t.handle2,d=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],d=[t[6],t[7]],h=[t[2]-t[0],t[3]-t[1]],p=[t[4]-t[6],t[5]-t[7]]):2===f?(l=new T(t),u=new T(e)):4===f?(c=t,h=e,p=n,d=i):8===f&&(c=[t,e],d=[o,s],h=[n-t,i-e],p=[r-o,a-s]):(l=new T,u=new T),this._segment1=l||new T(c,null,h),this._segment2=u||new T(d,p,null)},_serialize:function(t,e){return r.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=e},clone:function(){return new E(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return E.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(h.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(h.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(h.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(h.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return E.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new h(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=E.getLength(this.getValues(),0,1)),this._length},getArea:function(){return E.getArea(this.getValues())},getLine:function(){return new _(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new E(E.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return E.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=.99999999){var i=E.subdivide(this.getValues(),t),r=i[0],a=i[1],o=e||this.hasHandles(),s=this._segment1,l=this._segment2,u=this._path;o&&(s._handleOut._set(r[2]-r[0],r[3]-r[1]),l._handleIn._set(a[4]-a[6],a[5]-a[7]));var c=r[6],d=r[7],p=new T(new h(c,d),o&&new h(r[4]-c,r[5]-d),o&&new h(a[2]-c,a[3]-d));u?(u.insert(s._index+1,p),n=this.getNext()):(this._segment2=p,this._changed(),n=new E(p,l))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,n){return this.divideAtTime(t===e?.5:n?t:this.getTimeAt(t))},split:function(t,n){return this.splitAtTime(t===e?.5:n?t:this.getTimeAt(t))},reversed:function(){return new E(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,a=t._handleOut,o=e._handleIn,s=e._point,l=r.x,u=r.y,c=s.x,d=s.y,h=i?[l,u,l,u,c,d,c,d]:[l,u,l+a._x,u+a._y,c+o._x,d+o._y,c,d];return n&&n._transformCoordinates(h,h,4),h},subdivide:function(t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7];n===e&&(n=.5);var d=1-n,h=d*i+n*a,p=d*r+n*o,f=d*a+n*s,g=d*o+n*l,m=d*s+n*u,v=d*l+n*c,y=d*h+n*f,_=d*p+n*g,x=d*f+n*m,b=d*g+n*v,w=d*y+n*x,M=d*_+n*b;return[[i,r,h,p,y,_,w,M],[w,M,x,b,m,v,u,c]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],a=t[i+2],o=t[i+4],s=t[i+6];if(r>=a==a>=o&&a>=o==o>=s||E.isStraight(t))n.push(t);else{var l=3*(a-o)-r+s,u=2*(r+o)-4*a,d=a-r,h=[],p=c.solveQuadratic(l,u,d,h,1e-8,.99999999);if(p){h.sort();var f=h[0],g=E.subdivide(t,f);n.push(g[0]),p>1&&(f=(h[1]-f)/(1-f),g=E.subdivide(g[1],f),n.push(g[0])),n.push(g[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,a){var o=t[e],s=t[e+2],l=t[e+4],u=t[e+6],d=0;if(!(o<n&&u<n&&s<n&&l<n||o>n&&u>n&&s>n&&l>n)){var h=3*(s-o),p=3*(l-s)-h,f=u-o-h-p;d=c.solveCubic(f,p,h,o-n,i,r,a)}return d},getTimeOf:function(t,e){var n=new h(t[0],t[1]),i=new h(t[6],t[7]),r=1e-7;if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var a=[e.x,e.y],o=[],s=0;s<2;s++)for(var l=E.solveCubic(t,s,a[s],o,0,1),u=0;u<l;u++){var c=o[u];if(e.isClose(E.getPoint(t,c),r))return c}return e.isClose(n,r)?0:e.isClose(i,r)?1:null},getNearestTime:function(t,e){if(E.isStraight(t)){var n=t[0],i=t[1],r=t[6]-n,a=t[7]-i,o=r*r+a*a;if(0===o)return 0;var s=((e.x-n)*r+(e.y-i)*a)/o;return s<1e-12?0:s>.999999999999?1:E.getTimeOf(t,new h(n+s*r,i+s*a))}var l=1/0,u=0;function c(n){if(n>=0&&n<=1){var i=e.getDistance(E.getPoint(t,n),!0);if(i<l)return l=i,u=n,!0}}for(var d=0;d<=100;d++)c(d/100);for(var p=.005;p>1e-8;)c(u-p)||c(u+p)||(p/=2);return u},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=E.subdivide(t,e)[1]),n<1&&(t=E.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=3*r-2*n-l,d=3*a-2*i-u,h=3*o-2*l-n,p=3*s-2*u-i;return Math.max(c*c,h*h)+Math.max(d*d,p*p)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7];return 3*((l-n)*(i+a)-(s-e)*(r+o)+r*(e-a)-i*(n-o)+l*(a+e/3)-s*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)E._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new m(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,a,o,s,l){function u(t,e){var n=t-e,i=t+e;n<o[r]&&(o[r]=n),i>s[r]&&(s[r]=i)}a/=2;var d=o[r]+a,h=s[r]-a;if(t<d||e<d||n<d||i<d||t>h||e>h||n>h||i>h)if(e<t!=e<i&&n<t!=n<i)u(t,0),u(i,0);else{var p=3*(e-n)-t+i,f=2*(t+n)-4*e,g=e-t,m=c.solveQuadratic(p,f,g,l);u(i,0);for(var v=0;v<m;v++){var y=l[v],_=1-y;1e-8<=y&&y<=.99999999&&u(_*_*_*t+3*_*_*y*e+3*_*y*y*n+y*y*y*i,a)}}}}},r.each(["getBounds","getStrokeBounds","getHandleBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=N[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}}),{}),r.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var a=new _(t,i);if(a.getDistance(t.add(e))<1e-7&&a.getDistance(i.add(n))<1e-7){var o=r.dot(r),s=r.dot(e)/o,l=r.dot(n)/o;return s>=0&&s<=1&&l<=0&&l>=-1}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},(function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],a=e[6],o=e[7];return t(new h(i,r),new h(e[2]-i,e[3]-r),new h(e[4]-a,e[5]-o),new h(a,o),n)}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new L(this,t):null},getTimeAt:function(t,e){return E.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=h.read(arguments);return t.isZero()?[]:E.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(h.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return E.getTimeOf(this.getValues(),h.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=h.read(arguments),e=this.getValues(),n=E.getNearestTime(e,t),i=E.getPoint(e,n);return new L(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return r.each(t,(function(t){this[t+"At"]=function(e,n){var i=this.getValues();return E[t](i,n?e:E.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return E[t](this.getValues(),e)}}),{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=9*(i-a)+3*(s-e),c=6*(e+a)-12*i,d=3*(i-e),h=9*(r-o)+3*(l-n),p=6*(n+o)-12*r,f=3*(r-n);return function(t){var e=(u*t+c)*t+d,n=(h*t+p)*t+f;return Math.sqrt(e*e+n*n)}}function n(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function i(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],a=t[1],o=t[2],s=t[3],l=t[4],u=t[5],d=t[6],p=t[7],f=c.isZero;f(o-r)&&f(s-a)&&(o=r,s=a),f(l-d)&&f(u-p)&&(l=d,u=p);var g,m,v=3*(o-r),y=3*(l-o)-v,_=d-r-v-y,x=3*(s-a),b=3*(u-s)-x,w=p-a-x-b;if(0===n)g=0===e?r:1===e?d:((_*e+y)*e+v)*e+r,m=0===e?a:1===e?p:((w*e+b)*e+x)*e+a;else{var M=1e-8,S=1-M;if(e<M?(g=v,m=x):e>S?(g=3*(d-l),m=3*(p-u)):(g=(3*_*e+2*y)*e+v,m=(3*w*e+2*b)*e+x),i){0===g&&0===m&&(e<M||e>S)&&(g=l-o,m=u-s);var C=Math.sqrt(g*g+m*m);C&&(g/=C,m/=C)}if(3===n){l=6*_*e+2*y,u=6*w*e+2*b;var k=Math.pow(g*g+m*m,1.5);g=0!==k?(g*u-m*l)/k:0,m=0}}return 2===n?new h(m,-g):new h(g,m)}return{statics:{classify:function(t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],d=r*(i-u)+a*(l-n)+n*u-i*l,h=3*(o*(a-i)+s*(n-r)+r*i-a*n),p=h-d,f=p-d+(n*(u-s)+i*(o-l)+l*s-u*o),g=Math.sqrt(f*f+p*p+h*h),m=0!==g?1/g:0,v=c.isZero,y="serpentine";function _(t,n,i){var r=n!==e,a=r&&n>0&&n<1,o=r&&i>0&&i<1;return!r||(a||o)&&("loop"!==t||a&&o)||(t="arch",a=o=!1),{type:t,roots:a||o?a&&o?n<i?[n,i]:[i,n]:[a?n:i]:null}}if(p*=m,h*=m,v(f*=m))return v(p)?_(v(h)?"line":"quadratic"):_(y,h/(3*p));var x=3*p*p-4*f*h;if(v(x))return _("cusp",p/(2*f));var b=x>0?Math.sqrt(x/3):Math.sqrt(-x),w=2*f;return _(x>0?y:"loop",(p+b)/w,(p-b)/w)},getLength:function(i,r,a,o){if(r===e&&(r=0),a===e&&(a=1),E.isStraight(i)){var s=i;a<1&&(s=E.subdivide(s,a)[0],r/=a),r>0&&(s=E.subdivide(s,r)[1]);var l=s[6]-s[0],u=s[7]-s[1];return Math.sqrt(l*l+u*u)}return c.integrate(o||t(i),r,a,n(r,a))},getTimeAt:function(i,r,a){if(a===e&&(a=r<0?1:0),0===r)return a;var o=Math.abs,s=r>0,l=s?a:0,u=s?1:a,d=t(i),h=E.getLength(i,l,u,d),p=o(r)-h;if(o(p)<1e-12)return s?u:l;if(p>1e-12)return null;var f=r/h,g=0;return c.findRoot((function(t){return g+=c.integrate(d,a,t,n(a,t)),a=t,g-r}),d,a+f,l,u,32,1e-12)},getPoint:function(t,e){return i(t,e,0,!1)},getTangent:function(t,e){return i(t,e,1,!0)},getWeightedTangent:function(t,e){return i(t,e,1,!1)},getNormal:function(t,e){return i(t,e,2,!0)},getWeightedNormal:function(t,e){return i(t,e,2,!1)},getCurvature:function(t,e){return i(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=3*i-e-3*a+t[6],l=3*e-6*i+3*a,u=-3*e+3*i,d=3*r-n-3*o+t[7],h=3*n-6*r+3*o,p=-3*n+3*r,f=[];return c.solveCubic(9*(s*s+d*d),9*(s*l+h*d),2*(l*l+h*h)+3*(u*s+p*d),u*l+h*p,f,1e-8,.99999999),f.sort()}}}},new function(){function t(t,e,n,i,r,a,o){var s=!o&&n.getPrevious()===r,l=!o&&n!==r&&n.getNext()===r,u=1e-8,c=1-u;if(null!==i&&i>=(s?u:0)&&i<=(l?c:1)&&null!==a&&a>=(l?u:0)&&a<=(s?c:1)){var d=new L(n,i,null,o),h=new L(r,a,null,o);d._intersection=h,h._intersection=d,e&&!e(d)||L.insert(t,d,!0)}}function e(i,r,a,o,s,l,u,c,d,h,p,f,g){if(++d>=4096||++c>=40)return d;var m,v,y=r[0],x=r[1],b=r[6],w=r[7],M=_.getSignedDistance,S=M(y,x,b,w,r[2],r[3]),C=M(y,x,b,w,r[4],r[5]),k=S*C>0?3/4:4/9,I=k*Math.min(0,S,C),D=k*Math.max(0,S,C),T=M(y,x,b,w,i[0],i[1]),A=M(y,x,b,w,i[2],i[3]),L=M(y,x,b,w,i[4],i[5]),P=M(y,x,b,w,i[6],i[7]),N=function(t,e,n,i){var r,a=[0,t],o=[1/3,e],s=[2/3,n],l=[1,i],u=e-(2*t+i)/3,c=n-(t+2*i)/3;if(u*c<0)r=[[a,o,l],[a,s,l]];else{var d=u/c;r=[d>=2?[a,o,l]:d<=.5?[a,s,l]:[a,o,s,l],[a,l]]}return(u||c)<0?r.reverse():r}(T,A,L,P),O=N[0],z=N[1];if(0===S&&0===C&&0===T&&0===A&&0===L&&0===P||null==(m=n(O,z,I,D))||null==(v=n(O.reverse(),z.reverse(),I,D)))return d;var R=h+(p-h)*m,V=h+(p-h)*v;if(Math.max(g-f,V-R)<1e-9){var F=(R+V)/2,B=(f+g)/2;t(s,l,u?o:a,u?B:F,u?a:o,u?F:B)}else{i=E.getPart(i,m,v);var H=g-f;if(v-m>.8)if(V-R>H)F=(R+V)/2,d=e(r,(G=E.subdivide(i,.5))[0],o,a,s,l,!u,c,d,f,g,R,F),d=e(r,G[1],o,a,s,l,!u,c,d,f,g,F,V);else{var G;B=(f+g)/2,d=e((G=E.subdivide(r,.5))[0],i,o,a,s,l,!u,c,d,f,B,R,V),d=e(G[1],i,o,a,s,l,!u,c,d,B,g,R,V)}else d=0===H||H>=1e-9?e(r,i,o,a,s,l,!u,c,d,f,g,R,V):e(i,r,a,o,s,l,u,c,d,R,V,f,g)}return d}function n(t,e,n,r){return t[0][1]<n?i(t,!0,n):e[0][1]>r?i(e,!1,r):t[0][0]}function i(t,e,n){for(var i=t[0][0],r=t[0][1],a=1,o=t.length;a<o;a++){var s=t[a][0],l=t[a][1];if(e?l>=n:l<=n)return l===n?s:i+(n-r)*(s-i)/(l-r);i=s,r=l}return null}function r(t,e,n,i,r){var a=c.isZero;if(a(i)&&a(r)){var o=E.getTimeOf(t,new h(e,n));return null===o?[]:[o]}for(var s=Math.atan2(-r,i),l=Math.sin(s),u=Math.cos(s),d=[],p=[],f=0;f<8;f+=2){var g=t[f]-e,m=t[f+1]-n;d.push(g*u-m*l,g*l+m*u)}return E.solveCubic(d,1,0,p,0,1),p}function a(e,n,i,a,o,s,l){for(var u=n[0],c=n[1],d=r(e,u,c,n[6]-u,n[7]-c),h=0,p=d.length;h<p;h++){var f=d[h],g=E.getPoint(e,f),m=E.getTimeOf(n,g);null!==m&&t(o,s,l?a:i,l?m:f,l?i:a,l?f:m)}}function o(e,n,i,r,a,o){var s=_.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);s&&t(a,o,i,E.getTimeOf(e,s),r,E.getTimeOf(n,s))}function s(n,i,r,s,l,u){var c=1e-12,p=Math.min,f=Math.max;if(f(n[0],n[2],n[4],n[6])+c>p(i[0],i[2],i[4],i[6])&&p(n[0],n[2],n[4],n[6])-c<f(i[0],i[2],i[4],i[6])&&f(n[1],n[3],n[5],n[7])+c>p(i[1],i[3],i[5],i[7])&&p(n[1],n[3],n[5],n[7])-c<f(i[1],i[3],i[5],i[7])){var g=d(n,i);if(g)for(var m=0;m<2;m++){var v=g[m];t(l,u,r,v[0],s,v[1],!0)}else{var y=E.isStraight(n),_=E.isStraight(i),x=y&&_,b=y&&!_,w=l.length;if((x?o:y||_?a:e)(b?i:n,b?n:i,b?s:r,b?r:s,l,u,b,0,0,0,1,0,1),!x||l.length===w)for(m=0;m<4;m++){var M=m>>1,S=1&m,C=6*M,k=6*S,I=new h(n[C],n[C+1]),D=new h(i[k],i[k+1]);I.isClose(D,c)&&t(l,u,r,M,s,S)}}}return l}function u(e,n,i,r){var a=E.classify(e);if("loop"===a.type){var o=a.roots;t(i,r,n,o[0],n,o[1])}return i}function d(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=_.getDistance,a=1e-7,o=E.isStraight(t),s=E.isStraight(e),l=o&&s,u=n(t)<n(e),c=u?e:t,d=u?t:e,p=c[0],f=c[1],g=c[6]-p,m=c[7]-f;if(r(p,f,g,m,d[0],d[1],!0)<a&&r(p,f,g,m,d[6],d[7],!0)<a)!l&&r(p,f,g,m,c[2],c[3],!0)<a&&r(p,f,g,m,c[4],c[5],!0)<a&&r(p,f,g,m,d[2],d[3],!0)<a&&r(p,f,g,m,d[4],d[5],!0)<a&&(o=s=l=!0);else if(l)return null;if(o^s)return null;for(var v=[t,e],y=[],x=0;x<4&&y.length<2;x++){var b=1&x,w=1^b,M=x>>1,S=E.getTimeOf(v[b],new h(v[w][M?6:0],v[w][M?7:1]));if(null!=S){var C=b?[M,S]:[S,M];(!y.length||i(C[0]-y[0][0])>1e-8&&i(C[1]-y[0][1])>1e-8)&&y.push(C)}if(x>2&&!y.length)break}if(2!==y.length)y=null;else if(!l){var k=E.getPart(t,y[0][0],y[1][0]),I=E.getPart(e,y[0][1],y[1][1]);(i(I[2]-k[2])>a||i(I[3]-k[3])>a||i(I[4]-k[4])>a||i(I[5]-k[5])>a)&&(y=null)}return y}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?s(e,n,this,t,[]):u(e,this,[])},statics:{getOverlaps:d,getIntersections:function(t,e,n,i,r,a){var o=!e;o&&(e=t);for(var c=t.length,d=e.length,h=new Array(c),p=o?h:new Array(d),f=[],g=0;g<c;g++)h[g]=t[g].getValues(i);if(!o)for(g=0;g<d;g++)p[g]=e[g].getValues(r);for(var m=l.findCurveBoundsCollisions(h,p,1e-7),v=0;v<c;v++){var y=t[v],_=h[v];o&&u(_,y,f,n);var x=m[v];if(x)for(var b=0;b<x.length;b++){if(a&&f.length)return f;var w=x[b];if(!o||w>v){var M=e[w];s(_,p[w],y,M,f,n)}}}return f},getCurveLineIntersections:r,getTimesWithTangent:function(t,e){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],d=e.normalize(),h=d.x,p=d.y,f=3*l-9*o+9*r-3*n,g=3*u-9*s+9*a-3*i,m=6*o-12*r+6*n,v=6*s-12*a+6*i,y=3*r-3*n,_=3*a-3*i,x=2*f*p-2*g*h,b=[];if(Math.abs(x)<c.CURVETIME_EPSILON){if(0!=(x=f*v-g*m)){var w=-(f*_-g*y)/x;w>=0&&w<=1&&b.push(w)}}else{var M=(m*m-4*f*y)*p*p+(-2*m*v+4*g*y+4*f*_)*h*p+(v*v-4*g*_)*h*h,S=m*p-v*h;if(M>=0&&0!=x){var C=Math.sqrt(M),k=-(S+C)/x,I=(-S+C)/x;k>=0&&k<=1&&b.push(k),I>=0&&I<=1&&b.push(I)}}return b}}}}),L=r.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(e>=.99999999){var a=t.getNext();a&&(e=0,t=a)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof L){var i=this.getCurve(),r=t.getCurve(),a=i._path;if(a===r._path){var o=Math.abs,s=o(this.getOffset()-t.getOffset()),l=!e&&this._intersection,u=!e&&t._intersection;n=(s<1e-7||a&&o(a.getLength()-s)<1e-7)&&(!l&&!u||l&&u&&l.equals(u,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=u.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),i=1e-8,r=1-i,a=e>=i&&e<=r,o=n>=i&&n<=r;if(a&&o)return!this.isTouching();var s=this.getCurve(),l=s&&e<i?s.getPrevious():s,u=t.getCurve(),c=u&&n<i?u.getPrevious():u;if(e>r&&(s=s.getNext()),n>r&&(u=u.getNext()),!(l&&s&&c&&u))return!1;var d=[];function h(t,e){var n=t.getValues(),i=E.classify(n).roots||E.getPeaks(n),r=i.length,a=E.getLength(n,e&&r?i[r-1]:0,!e&&r?i[0]:1);d.push(r?a:a/32)}function p(t,e,n){return e<n?t>e&&t<n:t>e||t<n}a||(h(l,!0),h(s,!1)),o||(h(c,!0),h(u,!1));var f=this.getPoint(),g=Math.min.apply(Math,d),m=a?s.getTangentAtTime(e):s.getPointAt(g).subtract(f),v=a?m.negate():l.getPointAt(-g).subtract(f),y=o?u.getTangentAtTime(n):u.getPointAt(g).subtract(f),_=o?y.negate():c.getPointAt(-g).subtract(f),x=v.getAngle(),b=m.getAngle(),w=_.getAngle(),M=y.getAngle();return!!(a?p(x,w,M)^p(b,w,M)&&p(x,M,w)^p(b,M,w):p(w,x,b)^p(M,x,b)&&p(w,b,x)^p(M,b,x))},hasOverlap:function(){return!!this._overlap}},r.each(E._evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}}),{preserve:!0}),new function(){function t(t,e,n){var i=t.length,r=0,a=i-1;function o(n,r){for(var a=n+r;a>=-1&&a<=i;a+=r){var o=t[(a%i+i)%i];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(;r<=a;){var s,l=r+a>>>1,u=t[l];if(n&&(s=e.equals(u)?u:o(l,-1)||o(l,1)))return e._overlap&&(s._overlap=s._intersection._overlap=!0),s;var c=e.getPath(),d=u.getPath();(c!==d?c._id-d._id:e.getIndex()+e.getTime()-(u.getIndex()+u.getTime()))<0?a=l-1:r=l+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),P=b.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;if(r.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var a=n[0];i=a&&Array.isArray(a[0])}else e&&(i=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(i?O:N)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,i,r=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,o=new h,s=new h;function l(t,n){var i=+e[t];return a&&(i+=o[n]),i}function u(t){return new h(l(t,"x"),l(t+1,"y"))}this.clear();for(var c=0,d=r&&r.length;c<d;c++){var p=r[c],g=p[0],m=g.toLowerCase(),v=(e=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(a=g===m,"z"!==n||/[mz]/.test(m)||this.moveTo(o),m){case"m":case"l":for(var y="m"===m,_=0;_<v;_+=2)this[y?"moveTo":"lineTo"](o=u(_)),y&&(s=o,y=!1);i=o;break;case"h":case"v":var x="h"===m?"x":"y";for(o=o.clone(),_=0;_<v;_++)o[x]=l(_,x),this.lineTo(o);i=o;break;case"c":for(_=0;_<v;_+=6)this.cubicCurveTo(u(_),i=u(_+2),o=u(_+4));break;case"s":for(_=0;_<v;_+=4)this.cubicCurveTo(/[cs]/.test(n)?o.multiply(2).subtract(i):o,i=u(_),o=u(_+2)),n=m;break;case"q":for(_=0;_<v;_+=4)this.quadraticCurveTo(i=u(_),o=u(_+2));break;case"t":for(_=0;_<v;_+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?o.multiply(2).subtract(i):o,o=u(_)),n=m;break;case"a":for(_=0;_<v;_+=7)this.arcTo(o=u(_+5),new f(+e[_],+e[_+1]),+e[_+2],+e[_+4],+e[_+3]);break;case"z":this.closePath(1e-12),o=s}n=m}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,a=this._matrix._orNullIfIdentity(),o=r?a:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(a).intersects(t.getBounds(o),1e-12)?E.getIntersections(this.getCurves(),!r&&t.getCurves(),e,a,o,i):[]},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.isCrossing()}))},getNearestLocation:function(){for(var t=h.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,a=e.length;r<a;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",a=t[r],o=e[r],s=this[r];if(!a||!o||a.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=s.length,u=o.length;if(l<u)for(var c=i?T:N,d=l;d<u;d++)this.add(new c);else l>u&&this[i?"removeSegments":"removeChildren"](u,l);for(d=0;d<u;d++)s[d].interpolate(a[d],o[d],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=n.length,a=i.length,o=[],s=0;e=!0;for(var u=l.findItemBoundsCollisions(n,i,c.GEOMETRIC_EPSILON),d=r-1;d>=0&&e;d--){var h=n[d];e=!1;var p=u[d];if(p)for(var f=p.length-1;f>=0&&!e;f--)h.compare(i[p[f]])&&(o[p[f]]||(o[p[f]]=!0,s++),e=!0)}e=e&&s===a}return e}}),N=P.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var n=arguments,i=Array.isArray(t)?"object"==typeof t[0]?t:n:!t||t.size!==e||t.x===e&&t.point===e?null:n;i&&i.length>0?this.setSegments(i):(this._curves=e,this._segmentSelection=0,i||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!i&&t)},_equals:function(t){return this._closed===t._closed&&r.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(n){if(t.base.call(this,n),8&n){if(this._length=this._area=e,32&n)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else 64&n&&(this._bounds=e)},getStyle:function(){var t=this._parent;return(t instanceof O?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var n=this.isFullySelected(),i=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=e,i){var r=t[i-1];"boolean"==typeof r&&(this.setClosed(r),i--),this._add(T.readList(t,0,{},i))}n&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new E(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new E(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var n,i,r,a,o,s,l,c,d=this._segments,h=d.length,p=new u(e),f=new Array(6),g=!0,m=[];function v(e,u){if(e._transformCoordinates(t,f),n=f[0],i=f[1],g)m.push("M"+p.pair(n,i)),g=!1;else if(o=f[2],s=f[3],o===n&&s===i&&l===r&&c===a){if(!u){var d=n-r,h=i-a;m.push(0===d?"v"+p.number(h):0===h?"h"+p.number(d):"l"+p.pair(d,h))}}else m.push("c"+p.pair(l-r,c-a)+" "+p.pair(o-r,s-a)+" "+p.pair(n-r,i-a));r=n,a=i,l=f[4],c=f[5]}if(!h)return"";for(var y=0;y<h;y++)v(d[y]);return this._closed&&h>0&&(v(d[0],!0),m.push("z")),m.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,a=t.length,o=null==e,s=(e=o?n.length:e,0);s<a;s++){var l=t[s];l._path&&(l=t[s]=l.clone()),l._path=this,l._index=e+s,l._selection&&this._updateSelection(l,0,l._selection)}if(o)r.push(n,t);else{n.splice.apply(n,[e,0].concat(t)),s=e+a;for(var u=n.length;s<u;s++)n[s]._index=s}if(i){var c=this._countCurves(),d=e>0&&e+a-1===c?e-1:e,h=d,p=Math.min(d+a,c);for(t._curves&&(i.splice.apply(i,[d,0].concat(t._curves)),h+=t._curves.length),s=h;s<p;s++)i.splice(s,0,new E(this,null,null));this._adjustCurves(d,p)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,a=t;a<e;a++)(n=r[a])._path=this,n._segment1=i[a],n._segment2=i[a+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var e=arguments;return e.length>1&&"number"!=typeof t?this._add(T.readList(e)):this._add([T.read(e)])[0]},insert:function(t,e){var n=arguments;return n.length>2&&"number"!=typeof e?this._add(T.readList(n,1),t):this._add([T.read(n,1)],t)[0]},addSegment:function(){return this._add([T.read(arguments)])[0]},insertSegment:function(t){return this._add([T.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(T.readList(t))},insertSegments:function(t,e){return this._add(T.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=r.pick(e,this._segments.length);var i=this._segments,a=this._curves,o=i.length,s=i.splice(t,e-t),l=s.length;if(!l)return s;for(var u=0;u<l;u++){var c=s[u];c._selection&&this._updateSelection(c,c._selection,0),c._index=c._path=null}u=t;for(var d=i.length;u<d;u++)i[u]._index=u;if(a){var h=t>0&&e===o+(this._closed?1:0)?t-1:t;for(u=(a=a.splice(h,l)).length-1;u>=0;u--)a[u]._path=null;n&&(s._curves=a.slice(1)),this._adjustCurves(h,h)}return this._changed(41),s},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var i=0,r=e.length;i<r;i++){var a=i+1===r;t+=E.getArea(E.getValues(e[i],e[a?0:i+1],null,a&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time;i>.99999999&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=1e-8&&r[n++].divideAtTime(i);var a,o=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new N(b.NO_INSERT)).insertAbove(this),a.copyAttributes(this)),a._add(o,0),this.addSegment(o[0]),a}return null},split:function(t,n){var i,r=n===e?t:(i=this.getCurves()[t])&&i.getLocationAtTime(n);return null!=r?this.splitAt(r):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),a=t.getLastSegment();if(!a)return this;r&&r._point.isClose(a._point,n)&&t.reverse();var o=t.getFirstSegment();if(r&&r._point.isClose(o._point,n))r.setHandleOut(o._handleOut),this._add(i.slice(1));else{var s=this.getFirstSegment();s&&s._point.isClose(o._point,n)&&t.reverse(),a=t.getLastSegment(),s&&s._point.isClose(a._point,n)?(s.setHandleIn(a._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var l=this.getFirstSegment(),u=this.getLastSegment();return l!==u&&l._point.isClose(u._point,n)&&(l.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;r>=0;r--){var a=e[r];!a.hasHandles()&&(!a.hasLength(i)||n&&a.isCollinear(a.getNext()))&&a.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new z(this,t||.25,256,!0).parts,n=e.length,i=[],r=0;r<n;r++)i.push(new T(e[r].curve.slice(0,2)));!this._closed&&n>0&&i.push(new T(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){var e=new R(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var n=this,i=t||{},r=i.type||"asymmetric",a=this._segments,o=a.length,s=this._closed;function l(t,e){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==n)throw new Error(t._class+" "+i+" of "+r+" is not part of "+n);e&&t instanceof E&&i++}else i="number"==typeof t?t:e;return Math.min(i<0&&s?i%o:i<0?i+o:i,o-1)}var u=s&&i.from===e&&i.to===e,c=l(i.from,0),d=l(i.to,o-1);if(c>d)if(s)c-=o;else{var h=c;c=d,d=h}if(/^(?:asymmetric|continuous)$/.test(r)){var p="asymmetric"===r,f=Math.min,g=d-c+1,m=g-1,v=u?f(g,4):1,y=v,_=v,x=[];if(s||(y=f(1,c),_=f(1,o-d-1)),(m+=y+_)<=1)return;for(var b=0,w=c-y;b<=m;b++,w++)x[b]=a[(w<0?w+o:w)%o]._point;var M=x[0]._x+2*x[1]._x,S=x[0]._y+2*x[1]._y,C=2,k=m-1,I=[M],D=[S],T=[C],A=[],L=[];for(b=1;b<m;b++){var P=b<k,N=P?4:p?2:7,O=P?4:p?3:8,z=P?2:p?0:1,R=(P||p?1:2)/C;C=T[b]=N-R,M=I[b]=O*x[b]._x+z*x[b+1]._x-R*M,S=D[b]=O*x[b]._y+z*x[b+1]._y-R*S}for(A[k]=I[k]/T[k],L[k]=D[k]/T[k],b=m-2;b>=0;b--)A[b]=(I[b]-A[b+1])/T[b],L[b]=(D[b]-L[b+1])/T[b];A[m]=(3*x[m]._x-A[k])/2,L[m]=(3*x[m]._y-L[k])/2,b=y;var V=m-_;for(w=c;b<=V;b++,w++){var F=a[w<0?w+o:w],B=F._point,H=A[b]-B._x,G=L[b]-B._y;(u||b<V)&&F.setHandleOut(H,G),(u||b>y)&&F.setHandleIn(-H,-G)}}else for(b=c;b<=d;b++)a[b<0?b+o:b].smooth(i,!u&&b===c,!u&&b===d)},toShape:function(t){if(!this._closed)return null;var n,i,r,a,o,s,l,u=this._segments;function d(t,e){var n=u[t],i=n.getNext(),r=u[e],a=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&a._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(a._point.subtract(r._point))}function h(t){var e=u[t],n=e.getNext(),i=e._handleOut,r=n._handleIn,a=.5522847498307936;if(i.isOrthogonal(r)){var o=e._point,s=n._point,l=new _(o,i,!0).intersect(new _(s,r,!0),!0);return l&&c.isZero(i.getLength()/l.subtract(o).getLength()-a)&&c.isZero(r.getLength()/l.subtract(s).getLength()-a)}return!1}function p(t,e){return u[t]._point.getDistance(u[e]._point)}if(!this.hasHandles()&&4===u.length&&d(0,2)&&d(1,3)&&(o=u[1],s=o.getPrevious(),l=o.getNext(),s._handleOut.isZero()&&o._handleIn.isZero()&&o._handleOut.isZero()&&l._handleIn.isZero()&&o._point.subtract(s._point).isOrthogonal(l._point.subtract(o._point)))?(n=S.Rectangle,i=new f(p(0,3),p(0,1)),a=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&h(0)&&h(2)&&h(4)&&h(6)&&d(1,5)&&d(3,7)?(n=S.Rectangle,r=(i=new f(p(1,6),p(0,3))).subtract(new f(p(0,7),p(1,2))).divide(2),a=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&h(0)&&h(1)&&h(2)&&h(3)&&(c.isZero(p(0,2)-p(1,3))?(n=S.Circle,r=p(0,2)/2):(n=S.Ellipse,r=new f(p(2,0)/2,p(3,1)/2)),a=u[1]._point),n){var g=this.getPosition(!0),m=new n({center:g,size:i,radius:r,insert:!1});return m.copyAttributes(this,!0),m._matrix.prepend(this._matrix),m.rotate(a.subtract(g).getAngle()+90),(t===e||t)&&m.insertAbove(this),m}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof O)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,a=i.length;if(!r||!a)return r==a;for(var o,s,l=n[0].getValues(),u=[],c=0,d=0,h=0;h<a;h++){var p=i[h].getValues();if(u.push(p),m=E.getOverlaps(l,p)){o=!h&&m[0][0]>0?a-1:h,s=m[0][1];break}}var f,g=Math.abs;for(p=u[o];l&&p;){var m;if((m=E.getOverlaps(l,p))&&g(m[0][0]-d)<1e-8){1===(d=m[1][0])&&(l=++c<r?n[c].getValues():null,d=0);var v=m[0][1];if(g(v-s)<1e-8){if(f||(f=[o,v]),1===(s=m[1][1])&&(++o>=a&&(o=0),p=u[o]||i[o].getValues(),s=0),!l)return f[0]===o&&f[1]===s;continue}}break}return!1},_hitTestSelf:function(t,e,n,i){var r,a,o,s,l,u,c=this,d=this.getStyle(),h=this._segments,p=h.length,f=this._closed,g=e._tolerancePadding,m=g,v=e.stroke&&d.hasStroke(),y=e.fill&&d.hasFill(),_=e.curves,x=v?d.getStrokeWidth()/2:y&&e.tolerance>0||_?0:null;function b(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,i){if(!e.selected||n.isSelected()){var r=t._point;if(n!==r&&(n=n.add(r)),b(n,m))return new D(i,c,{segment:t,point:n})}}function M(t,n){return(n||e.segments)&&w(t,t._point,"segment")||!n&&e.handles&&(w(t,t._handleIn,"handle-in")||w(t,t._handleOut,"handle-out"))}function S(t){s.add(t)}function C(e){var n,l=f||e._index>0&&e._index<p-1;return"round"===(l?r:a)?b(e._point,m):(s=new N({internal:!0,closed:!0}),l?e.isSmooth()||N._addBevelJoin(e,r,x,o,null,i,S,!0):"square"===a&&N._addSquareCap(e,a,x,null,i,S,!0),s.isEmpty()?void 0:s.contains(t)||(n=s.getNearestLocation(t))&&b(n.getPoint(),g))}if(null!==x&&(x>0?(r=d.getStrokeJoin(),a=d.getStrokeCap(),o=d.getMiterLimit(),m=m.add(N._getStrokePadding(x,i))):r=a="round"),!e.ends||e.segments||f){if(e.segments||e.handles)for(var k=0;k<p;k++)if(u=M(h[k]))return u}else if(u=M(h[0],!0)||M(h[p-1],!0))return u;if(null!==x){if(l=this.getNearestLocation(t)){var I=l.getTime();0===I||1===I&&p>1?C(l.getSegment())||(l=null):b(l.getPoint(),m)||(l=null)}if(!l&&"miter"===r&&p>1)for(k=0;k<p;k++){var T=h[k];if(t.getDistance(T._point)<=o*x&&C(T)){l=T.getLocation();break}}}return!l&&y&&this._contains(t)||l&&!v&&!_?new D("fill",this):l?new D(v?"stroke":"curve",this,{location:l,point:l.getPoint()}):null}},r.each(E._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}}),{beans:!1,getLocationOf:function(){for(var t=h.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var a=n,o=e[i];if((n+=o.getLength())>t)return o.getLocationAt(t-a)}if(e.length>0&&t<=this.getLength())return new L(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=h.read(arguments);if(t.isZero())return[];for(var e=[],n=0,i=this.getCurves(),r=0,a=i.length;r<a;r++){for(var o=i[r],s=o.getTimesWithTangent(t),l=0,u=s.length;l<u;l++){var c=n+o.getOffsetAtTime(s[l]);e.indexOf(c)<0&&e.push(c)}n+=o.length}return e}}),new function(){function t(t,e,n){var i,r,a,o,s,l,u,c,d=e._segments,h=d.length,p=new Array(6),f=!0;function g(e){if(n)e._transformCoordinates(n,p),i=p[0],r=p[1];else{var d=e._point;i=d._x,r=d._y}if(f)t.moveTo(i,r),f=!1;else{if(n)s=p[2],l=p[3];else{var h=e._handleIn;s=i+h._x,l=r+h._y}s===i&&l===r&&u===a&&c===o?t.lineTo(i,r):t.bezierCurveTo(u,c,s,l,i,r)}a=i,o=r,n?(u=p[4],c=p[5]):(h=e._handleOut,u=a+h._x,c=o+h._y)}for(var m=0;m<h;m++)g(d[m]);e._closed&&h>0&&g(d[0])}return{_draw:function(e,n,i,r){var a=n.dontStart,o=n.dontFinish||n.clip,s=this.getStyle(),l=s.hasFill(),u=s.hasStroke(),c=s.getDashArray(),d=!ot.support.nativeDash&&u&&c&&c.length;function h(t){return c[(t%d+d)%d]}if(a||e.beginPath(),(l||u&&!d||o)&&(t(e,this,r),this._closed&&e.closePath()),!o&&(l||u)&&(this._setStyles(e,n,i),l&&(e.fill(s.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),u)){if(d){a||e.beginPath();for(var p,f=new z(this,.25,32,!1,r),g=f.length,m=-s.getDashOffset(),v=0;m>0;)m-=h(v--)+h(v--);for(;m<g;)p=m+h(v++),(m>0||p>0)&&f.drawPart(e,Math.max(m,0),Math.max(p,0)),m=p+h(v++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){if(!(i<=0))for(var r,a,o=i/2,s=i-2,l=o-1,u=new Array(6),c=0,d=e.length;c<d;c++){var h=e[c],p=h._selection;if(h._transformCoordinates(n,u),r=u[0],a=u[1],2&p&&g(2),4&p&&g(4),t.fillRect(r-o,a-o,i,i),s>0&&!(1&p)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(r-l,a-l,s,s),t.fillStyle=f}}function g(e){var n=u[e],i=u[e+1];r==n&&a==i||(t.beginPath(),t.moveTo(r,a),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,o,0,2*Math.PI,!0),t.fill())}}(e,this._segments,n,ot.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new T(h.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new T(h.read(arguments))])},cubicCurveTo:function(){var e=arguments,n=h.read(e),i=h.read(e),r=h.read(e),a=t(this);a.setHandleOut(n.subtract(a._point)),this._add([new T(r,i.subtract(r))])},quadraticCurveTo:function(){var e=arguments,n=h.read(e),i=h.read(e),r=t(this)._point;this.cubicCurveTo(n.add(r.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(){var e=arguments,n=h.read(e),i=h.read(e),a=r.pick(r.read(e),.5),o=1-a,s=t(this)._point,l=n.subtract(s.multiply(o*o)).subtract(i.multiply(a*a)).divide(2*a*o);if(l.isNaN())throw new Error("Cannot put a curve through points with parameter = "+a);this.quadraticCurveTo(l,i)},arcTo:function(){var e,n,i,a,o=arguments,s=Math.abs,l=Math.sqrt,u=t(this),d=u._point,p=h.read(o),g=r.peek(o);if("boolean"==typeof(w=r.pick(g,!0)))var m=(S=d.add(p).divide(2)).add(S.subtract(d).rotate(w?-90:90));else if(r.remain(o)<=2)m=p,p=h.read(o);else if(!d.equals(p)){var v=f.read(o),x=c.isZero;if(x(v.width)||x(v.height))return this.lineTo(p);var b=r.read(o),w=!!r.read(o),M=!!r.read(o),S=d.add(p).divide(2),C=(q=d.subtract(S).rotate(-b)).x,k=q.y,I=s(v.width),D=s(v.height),A=I*I,E=D*D,L=C*C,P=k*k,N=l(L/A+P/E);if(N>1&&(A=(I*=N)*I,E=(D*=N)*D),s(N=(A*E-A*P-E*L)/(A*P+E*L))<1e-12&&(N=0),N<0)throw new Error("Cannot create an arc with the given arguments");e=new h(I*k/D,-D*C/I).multiply((M===w?-1:1)*l(N)).rotate(b).add(S),n=(i=(a=(new y).translate(e).rotate(b).scale(I,D))._inverseTransform(d)).getDirectedAngle(a._inverseTransform(p)),!w&&n>0?n-=360:w&&n<0&&(n+=360)}if(m){var O=new _(d.add(m).divide(2),m.subtract(d).rotate(90),!0),z=new _(m.add(p).divide(2),p.subtract(m).rotate(90),!0),R=new _(d,p),V=R.getSide(m);if(!(e=O.intersect(z,!0))){if(!V)return this.lineTo(p);throw new Error("Cannot create an arc with the given arguments")}n=(i=d.subtract(e)).getDirectedAngle(p.subtract(e));var F=R.getSide(e,!0);0===F?n=V*s(n):V===F&&(n+=n<0?360:-360)}if(n){for(var B=1e-5,H=s(n),G=H>=360?4:Math.ceil((H-B)/90),j=n/G,W=j*Math.PI/360,U=4/3*Math.sin(W)/(1+Math.cos(W)),Y=[],$=0;$<=G;$++){var q=p,X=null;if($<G&&(X=i.rotate(90).multiply(U),a?(q=a._transformPoint(i),X=a._transformPoint(i.add(X)).subtract(q)):q=e.add(i)),$){var Z=i.rotate(-90).multiply(U);a&&(Z=a._transformPoint(i.add(Z)).subtract(q)),Y.push(new T(q,Z,X))}else u.setHandleOut(X);i=i.rotate(j)}this._add(Y)}},lineBy:function(){var e=h.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=arguments,n=h.read(e),i=h.read(e),a=r.read(e),o=t(this)._point;this.curveTo(o.add(n),o.add(i),a)},cubicCurveBy:function(){var e=arguments,n=h.read(e),i=h.read(e),r=h.read(e),a=t(this)._point;this.cubicCurveTo(a.add(n),a.add(i),a.add(r))},quadraticCurveBy:function(){var e=arguments,n=h.read(e),i=h.read(e),r=t(this)._point;this.quadraticCurveTo(r.add(n),r.add(i))},arcBy:function(){var e=arguments,n=t(this)._point,i=n.add(h.read(e)),a=r.pick(r.peek(e),!0);"boolean"==typeof a?this.arcTo(i,a):this.arcTo(i,n.add(h.read(e)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return N[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,a){var o=t[0];if(!o)return new m;var s=new Array(6),l=o._transformCoordinates(i,new Array(6)),u=l.slice(0,2),c=u.slice(),d=new Array(2);function h(t){t._transformCoordinates(i,s);for(var e=0;e<2;e++)E._addBounds(l[e],l[e+4],s[e+2],s[e],e,a?a[e]:0,u,c,d);var n=l;l=s,s=n}for(var p=1,f=t.length;p<f;p++)h(t[p]);return e&&h(o),new m(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(t,e,n,i,r){var a=n.getStyle(),o=a.hasStroke(),s=a.getStrokeWidth(),l=o&&n._getStrokeMatrix(i,r),u=o&&N._getStrokePadding(s,l),c=N.getBounds(t,e,n,i,r,u);if(!o)return c;var d=s/2,h=a.getStrokeJoin(),p=a.getStrokeCap(),g=a.getMiterLimit(),v=new m(new f(u));function y(t){c=c.include(t)}function _(t){c=c.unite(v.setCenter(t._point.transform(i)))}function x(t,e){"round"===e||t.isSmooth()?_(t):N._addBevelJoin(t,e,d,g,i,l,y)}function b(t,e){"round"===e?_(t):N._addSquareCap(t,e,d,i,l,y)}var w=t.length-(e?0:1);if(w>0){for(var M=1;M<w;M++)x(t[M],h);e?x(t[0],h):(b(t[0],p),b(t[t.length-1],p))}return c},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new h(t,0).transform(e),i=new h(0,t).transform(e),r=n.getAngleInRadians(),a=n.getLength(),o=i.getLength(),s=Math.sin(r),l=Math.cos(r),u=Math.tan(r),c=Math.atan2(o*u,a),d=Math.atan2(o,u*a);return[Math.abs(a*Math.cos(c)*l+o*Math.sin(c)*s),Math.abs(o*Math.sin(d)*l+a*Math.cos(d)*s)]},_addBevelJoin:function(t,e,n,i,r,a,o,s){var l=t.getCurve(),u=l.getPrevious(),c=l.getPoint1().transform(r),d=u.getNormalAtTime(1).multiply(n).transform(a),p=l.getNormalAtTime(0).multiply(n).transform(a),f=d.getDirectedAngle(p);if((f<0||f>=180)&&(d=d.negate(),p=p.negate()),s&&o(c),o(c.add(d)),"miter"===e){var g=new _(c.add(d),new h(-d.y,d.x),!0).intersect(new _(c.add(p),new h(-p.y,p.x),!0),!0);g&&c.getDistance(g)<=i*n&&o(g)}o(c.add(p))},_addSquareCap:function(t,e,n,i,r,a,o){var s=t._point.transform(i),l=t.getLocation(),u=l.getNormal().multiply(0===l.getTime()?n:-n).transform(r);"square"===e&&(o&&(a(s.subtract(u)),a(s.add(u))),s=s.add(u.rotate(-90))),a(s.add(u)),a(s.subtract(u))},getHandleBounds:function(t,e,n,i,r){var a,o,s=n.getStyle();if(r.stroke&&s.hasStroke()){var l=n._getStrokeMatrix(i,r),u=s.getStrokeWidth()/2,c=u;"miter"===s.getStrokeJoin()&&(c=u*s.getMiterLimit()),"square"===s.getStrokeCap()&&(c=Math.max(c,u*Math.SQRT2)),a=N._getStrokePadding(u,l),o=N._getStrokePadding(c,l)}for(var d=new Array(6),h=1/0,p=-h,f=h,g=p,v=0,y=t.length;v<y;v++){t[v]._transformCoordinates(i,d);for(var _=0;_<6;_+=2){var x=_?a:o,b=x?x[0]:0,w=x?x[1]:0,M=d[_],S=d[_+1],C=M-b,k=M+b,I=S-w,D=S+w;C<h&&(h=C),k>p&&(p=k),I<f&&(f=I),D>g&&(g=D)}}return new m(h,f,p-h,g-f)}}});N.inject({statics:new function(){var t=.5522847498307936,e=[new T([-1,0],[0,t],[0,-t]),new T([0,-1],[-t,0],[t,0]),new T([1,0],[0,-t],[0,t]),new T([0,1],[t,0],[-t,0])];function n(t,e,n){var i=r.getNamed(n),a=new N(i&&(1==i.insert?b.INSERT:0==i.insert?b.NO_INSERT:null));return a._add(t),a._closed=e,a.set(i,b.INSERT)}function i(t,i,r){for(var a=new Array(4),o=0;o<4;o++){var s=e[o];a[o]=new T(s._point.multiply(i).add(t),s._handleIn.multiply(i),s._handleOut.multiply(i))}return n(a,!0,r)}return{Line:function(){var t=arguments;return n([new T(h.readNamed(t,"from")),new T(h.readNamed(t,"to"))],!1,t)},Circle:function(){var t=arguments,e=h.readNamed(t,"center"),n=r.readNamed(t,"radius");return i(e,new f(n),t)},Rectangle:function(){var e,i=arguments,r=m.readNamed(i,"rectangle"),a=f.readNamed(i,"radius",0,{readNull:!0}),o=r.getBottomLeft(!0),s=r.getTopLeft(!0),l=r.getTopRight(!0),u=r.getBottomRight(!0);if(!a||a.isZero())e=[new T(o),new T(s),new T(l),new T(u)];else{var c=(a=f.min(a,r.getSize(!0).divide(2))).width,d=a.height,h=c*t,p=d*t;e=[new T(o.add(c,0),null,[-h,0]),new T(o.subtract(0,d),[0,p]),new T(s.add(0,d),null,[0,-p]),new T(s.add(c,0),[-h,0],null),new T(l.subtract(c,0),null,[h,0]),new T(l.add(0,d),[0,-p],null),new T(u.subtract(0,d),null,[0,p]),new T(u.subtract(c,0),[h,0])]}return n(e,!0,i)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=arguments,e=S._readEllipse(t);return i(e.center,e.radius,t)},Oval:"#Ellipse",Arc:function(){var t=arguments,e=h.readNamed(t,"from"),n=h.readNamed(t,"through"),i=h.readNamed(t,"to"),a=r.getNamed(t),o=new N(a&&0==a.insert&&b.NO_INSERT);return o.moveTo(e),o.arcTo(n,i),o.set(a)},RegularPolygon:function(){for(var t=arguments,e=h.readNamed(t,"center"),i=r.readNamed(t,"sides"),a=r.readNamed(t,"radius"),o=360/i,s=i%3==0,l=new h(0,s?-a:a),u=s?-1:.5,c=new Array(i),d=0;d<i;d++)c[d]=new T(e.add(l.rotate((d+u)*o)));return n(c,!0,t)},Star:function(){for(var t=arguments,e=h.readNamed(t,"center"),i=2*r.readNamed(t,"points"),a=r.readNamed(t,"radius1"),o=r.readNamed(t,"radius2"),s=360/i,l=new h(0,-1),u=new Array(i),c=0;c<i;c++)u[c]=new T(e.add(l.rotate(s*c).multiply(c%2?o:a)));return n(u,!0,t)}}}});var O=P.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,a=i[0];a&&"number"==typeof a[0]&&(i=[i]);for(var o=n.length-1;o>=0;o--){var s=i[o];i!==n||s instanceof N||(i=r.slice(i)),Array.isArray(s)?i[o]=new N({segments:s,insert:!1}):s instanceof O&&(i.splice.apply(i,[o,1].concat(s.removeChildren())),s.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n=this._children,i=n.length-1;i>=0;i--){var r;(r=n[i].reduce(e)).isEmpty()&&r.remove()}return n.length?t.base.call(this):((r=new N(b.NO_INSERT)).copyAttributes(this),r.insertAbove(this),this.remove(),r)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)r.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,a=n.length;r<a;r++){var o=n[r],s=o._matrix;i.push(o.getPathData(t&&!s.isIdentity()?t.appended(s):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===N||"path"===n.type?n:r.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var a=0,o=r.length;a<o;a++)r[a].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var s=this._style;s.hasFill()&&(t.fill(s.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),s.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,a=i.length;r<a;r++){var o=i[r],s=o._matrix;n[o._id]||o._drawSelected(t,s.isIdentity()?e:e.appended(s))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return r.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}}),{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new N(b.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=h.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},r.each(["reverse","flatten","simplify","smooth"],(function(t){this[t]=function(e){for(var n,i=this._children,r=0,a=i.length;r<a;r++)n=i[r][t](e)||n;return n}}),{}));P.inject(new function(){var t=Math.min,n=Math.max,i=Math.abs,a={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function o(t){return t._children||[t]}function s(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(e){for(var i=o(n),r=0,a=i.length;r<a;r++)(t=i[r])._closed||t.isEmpty()||(t.closePath(1e-12),t.getFirstSegment().setHandleIn(0,0),t.getLastSegment().setHandleOut(0,0));n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function u(t,e,n,i,r){var a=new O(b.NO_INSERT);return a.addChildren(t,!0),a=a.reduce({simplify:e}),r&&0==r.insert||a.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),a.copyAttributes(n,!0),a}function d(t){return t.hasOverlap()||t.isCrossing()}function h(t,e,n,i){if(i&&(0==i.trace||i.stroke)&&/^(subtract|intersect)$/.test(n))return p(t,e,n);var c=s(t,!0),h=e&&t!==e&&s(e,!0),f=a[n];f[n]=!0,h&&(f.subtract||f.exclude)^h.isClockwise()^c.isClockwise()&&h.reverse();var g,y=v(L.expand(c.getIntersections(h,d))),b=o(c),w=h&&o(h),M=[],S=[];function C(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];r.push(M,i._segments),r.push(S,i.getCurves()),i._overlapsOnly=!0}}function k(t){for(var e=[],n=0,i=t&&t.length;n<i;n++)e.push(S[t[n]]);return e}if(y.length){C(b),w&&C(w);for(var I=new Array(S.length),D=0,T=S.length;D<T;D++)I[D]=S[D].getValues();var A=l.findCurveBoundsCollisions(I,I,0,!0),E={};for(D=0;D<S.length;D++){var P=S[D],N=P._path._id;(E[N]=E[N]||{})[P.getIndex()]={hor:k(A[D].hor),ver:k(A[D].ver)}}for(D=0,T=y.length;D<T;D++)_(y[D]._segment,c,h,E,f);for(D=0,T=M.length;D<T;D++){var O=M[D],z=O._intersection;O._winding||_(O,c,h,E,f),z&&z._overlap||(O._path._overlapsOnly=!1)}g=x(M,f)}else g=m(w?b.concat(w):b.slice(),(function(t){return!!f[t]}));return u(g,!0,t,e,i)}function p(t,e,n){var i=s(t),r=s(e),a=i.getIntersections(r,d),o="subtract"===n,l="divide"===n,c={},h=[];function p(t){if(!c[t._id]&&(l||r.contains(t.getPointAt(t.getLength()/2))^o))return h.unshift(t),c[t._id]=!0}for(var f=a.length-1;f>=0;f--){var g=a[f].split();g&&(p(g)&&g.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return p(i),u(h,!1,t,e)}function f(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function g(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function m(t,e,n){var a=t&&t.length;if(a){var o=r.each(t,(function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}}),{}),s=t.slice().sort((function(t,e){return i(e.getArea())-i(t.getArea())})),u=s[0],d=l.findItemBoundsCollisions(s,null,c.GEOMETRIC_EPSILON);null==n&&(n=u.isClockwise());for(var h=0;h<a;h++){var p=s[h],f=o[p._id],g=0,m=d[h];if(m)for(var v=null,y=m.length-1;y>=0;y--)if(m[y]<h){v=v||p.getInteriorPoint();var _=s[m[y]];if(_.contains(v)){var x=o[_._id];g=x.winding,f.winding+=g,f.container=x.exclude?x.container:_;break}}if(e(f.winding)===e(g))f.exclude=!0,t[f.index]=null;else{var b=f.container;p.setClockwise(b?!b.isClockwise():n)}}}return t}function v(t,e,n){var i,r,a,o=e&&[],s=1e-8,l=!1,u=n||[],c=n&&{};function d(t){return t._path._id+"."+t._segment1._index}for(var h=(n&&n.length)-1;h>=0;h--)(p=n[h])._path&&(c[d(p)]=!0);for(h=t.length-1;h>=0;h--){var p,m,v=t[h],y=v._time,_=y,x=e&&!e(v);if((p=v._curve)&&(p!==r?(l=!p.hasHandles()||c&&c[d(p)],i=[],a=null,r=p):a>=s&&(y/=a)),x)i&&i.push(v);else{if(e&&o.unshift(v),a=_,y<s)m=p._segment1;else if(y>.99999999)m=p._segment2;else{var b=p.divideAtTime(y,!0);l&&u.push(p,b),m=b._segment1;for(var w=i.length-1;w>=0;w--){var M=i[w];M._time=(M._time-y)/(1-y)}}v._setSegment(m);var S=m._intersection,C=v._intersection;if(S){f(S,C);for(var k=S;k;)f(k._intersection,S),k=k._next}else m._intersection=C}}return n||g(u),o||t}function y(e,r,a,o,s){var l,u,c=Array.isArray(r)?r:r[a?"hor":"ver"],d=a?1:0,h=1^d,p=[e.x,e.y],f=p[d],g=p[h],m=1e-6,v=f-1e-9,_=f+1e-9,x=0,b=0,w=0,M=0,S=!1,C=!1,k=1,I=[];function D(i){var u=i[h+0],c=i[h+6];if(!(g<t(u,c)||g>n(u,c))){var p=i[d+0],x=i[d+2],b=i[d+4],C=i[d+6];if(u!==c){var D=g===u?0:g===c||v>n(p,x,b,C)||_<t(p,x,b,C)?1:E.solveCubic(i,h,g,I,0,1)>0?I[0]:1,T=0===D?p:1===D?C:E.getPoint(i,D)[a?"y":"x"],A=u>c?1:-1,L=l[h]>l[h+6]?1:-1,P=l[d+6];return g!==u?(T<v?w+=A:T>_?M+=A:S=!0,T>f-m&&T<f+m&&(k/=2)):(A!==L?p<v?w+=A:p>_&&(M+=A):p!=P&&(P<_&&T>_?(M+=A,S=!0):P>v&&T<v&&(w+=A,S=!0)),k/=4),l=i,!s&&T>v&&T<_&&0===E.getTangent(i,D)[a?"x":"y"]&&y(e,r,!a,o,!0)}(p<_&&C>v||C<_&&p>v)&&(S=!0)}}function T(e){var i=e[h+0],r=e[h+2],o=e[h+4],s=e[h+6];if(g<=n(i,r,o,s)&&g>=t(i,r,o,s))for(var l,u=e[d+0],c=e[d+2],p=e[d+4],f=e[d+6],m=v>n(u,c,p,f)||_<t(u,c,p,f)?[e]:E.getMonoCurves(e,a),y=0,x=m.length;y<x;y++)if(l=D(m[y]))return l}for(var A=0,L=c.length;A<L;A++){var P,N=c[A],O=N._path,z=N.getValues();if(!(A&&c[A-1]._path===O||(l=null,O._closed||(u=E.getValues(O.getLastCurve().getSegment2(),N.getSegment1(),null,!o))[h]!==u[h+6]&&(l=u),l))){l=z;for(var R=O.getLastCurve();R&&R!==N;){var V=R.getValues();if(V[h]!==V[h+6]){l=V;break}R=R.getPrevious()}}if(P=T(z))return P;if(A+1===L||c[A+1]._path!==O){if(u&&(P=T(u)))return P;!S||w||M||(w=M=O.isClockwise(o)^a?1:-1),x+=w,b+=M,w=M=0,S&&(C=!0,S=!1),u=null}}return x=i(x),b=i(b),{winding:n(x,b),windingL:x,windingR:b,quality:k,onPath:C}}function _(t,e,n,r,a){var o=[],s=t,l=0;do{if(_=t.getCurve()){var u=_.getLength();o.push({segment:t,curve:_,length:u}),l+=u}t=t.getNext()}while(t&&!t._intersection&&t!==s);for(var d=[.5,.25,.75],h={winding:0,quality:-1},p=0;p<d.length&&h.quality<.5;p++){u=l*d[p];for(var f=0,g=o.length;f<g;f++){var m=o[f],v=m.length;if(u<=v){var _,x=(_=m.curve)._path,b=x._parent,w=b instanceof O?b:x,M=c.clamp(_.getTimeAt(u),.001,.999),S=_.getPointAtTime(M),C=i(_.getTangentAtTime(M).y)<Math.SQRT1_2,k=null;if(a.subtract&&n){var I=(w===e?n:e)._getWinding(S,C,!0);if(w===e&&I.winding||w===n&&!I.winding){if(I.quality<1)continue;k={winding:0,quality:1}}}(k=k||y(S,r[x._id][_.getIndex()],C,!0)).quality>h.quality&&(h=k);break}u-=v}}for(f=o.length-1;f>=0;f--)o[f].segment._winding=h}function x(t,e){var n,i=[];function r(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function a(t){if(t)for(var e=0,i=n.length;e<i;e++)if(t===n[e])return!0;return!1}function o(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}function s(t,e){var i=t._intersection,o=i,s=[];function l(i,o){for(;i&&i!==o;){var l=i._segment,u=l&&l._path;if(u){var c=l.getNext()||u.getFirstSegment(),d=c._intersection;l!==t&&(a(l)||a(c)||c&&r(l)&&(r(c)||d&&r(d._segment)))&&s.push(l),e&&n.push(l)}i=i._next}}if(e&&(n=[t]),i){for(l(i);i&&i._previous;)i=i._previous;l(i,o)}return s}t.sort((function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),a=!(!i||!i._overlap),o=t._path,s=e._path;return r^a?r?1:-1:!n^!i?n?1:-1:o!==s?o._id-s._id:t._index-e._index}));for(var l=0,u=t.length;l<u;l++){var c,d,h,p=t[l],f=r(p),g=null,m=!1,v=!0,y=[];if(f&&p._path._overlapsOnly){var _=p._path,x=p._intersection._segment._path;_.compare(x)&&(_.getArea()&&i.push(_.clone(!1)),o(_),o(x),f=!1)}for(;f;){var w=!g,M=s(p,w),S=M.shift(),C=!(m=!w&&(a(p)||a(S)))&&S;if(w&&(g=new N(b.NO_INSERT),c=null),m){(p.isFirst()||p.isLast())&&(v=p._path._closed),p._visited=!0;break}if(C&&c&&(y.push(c),c=null),c||(C&&M.push(p),c={start:g._segments.length,crossings:M,visited:d=[],handleIn:h}),C&&(p=S),!r(p)){g.removeSegments(c.start);for(var k=0,I=d.length;k<I;k++)d[k]._visited=!1;d.length=0;do{(p=c&&c.crossings.shift())&&p._path||(p=null,(c=y.pop())&&(d=c.visited,h=c.handleIn))}while(c&&!r(p));if(!p)break}var D=p.getNext();g.add(new T(p._point,h,D&&p._handleOut)),p._visited=!0,d.push(p),p=D||p._path.getFirstSegment(),h=D&&D._handleIn}m&&(v&&(g.getFirstSegment().setHandleIn(h),g.setClosed(v)),0!==g.getArea()&&i.push(g))}return i}return{_getWinding:function(t,e,n){return y(t,this.getCurves(),e,n)},unite:function(t,e){return h(this,t,"unite",e)},intersect:function(t,e){return h(this,t,"intersect",e)},subtract:function(t,e){return h(this,t,"subtract",e)},exclude:function(t,e){return h(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?p(this,t,"divide"):u([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var i=!1,a=!1,o=this.getIntersections(null,(function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(a=!0)})),s=i&&a&&[];if(o=L.expand(o),i)for(var l=v(o,(function(t){return t.hasOverlap()}),s),u=l.length-1;u>=0;u--){var c=l[u],d=c._path,h=c._segment,p=h.getPrevious(),f=h.getNext();n(p,d)&&n(f,d)&&(h.remove(),p._handleOut._set(0,0),f._handleIn._set(0,0),p===h||p.getCurve().hasLength()||(f._handleIn.set(p._handleIn),p.remove()))}a&&(v(o,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,a=i._segment;if(e&&r&&e._path&&r._path)return!0;n&&(n._intersection=null),a&&(a._intersection=null)},s),s&&g(s),e=x(r.each(e,(function(t){r.push(this,t._segments)}),[])));var m,y=e.length;return y>1&&t?(e!==t&&this.setChildren(e),m=this):1!==y||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),m=this),m||((m=new O(b.NO_INSERT)).addChildren(e),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(t,n){var i=this._children;return i&&i.length?this.setChildren(m(this.removeChildren(),(function(e){return!!(t?e:1&e)}),n)):n!==e&&this.setClockwise(n),this},getInteriorPoint:function(){var e=this.getBounds().getCenter(!0);if(!this.contains(e)){for(var i=this.getCurves(),r=e.y,a=[],o=[],s=0,l=i.length;s<l;s++){var u=i[s].getValues(),c=u[1],d=u[3],h=u[5],p=u[7];if(r>=t(c,d,h,p)&&r<=n(c,d,h,p))for(var f=E.getMonoCurves(u),g=0,m=f.length;g<m;g++){var v=f[g],y=v[1],_=v[7];if(y!==_&&(r>=y&&r<=_||r>=_&&r<=y)){var x=r===y?v[0]:r===_?v[6]:1===E.solveCubic(v,1,r,o,0,1)?E.getPoint(v,o[0]).x:(v[0]+v[6])/2;a.push(x)}}}a.length>1&&(a.sort((function(t,e){return t-e})),e.x=(a[0]+a[1])/2)}return e}}});var z=r.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){var a,o=[],s=[],l=0,u=1/(n||32),c=t._segments,d=c[0];function h(t,e){var n=E.getValues(t,e,r);o.push(n),p(n,t._index,0,1)}function p(t,n,r,a){if(!(a-r>u)||i&&E.isStraight(t)||E.isFlatEnough(t,e||.25)){var o=t[6]-t[0],c=t[7]-t[1],d=Math.sqrt(o*o+c*c);d>0&&(l+=d,s.push({offset:l,curve:t,index:n,time:a}))}else{var h=E.subdivide(t,.5),f=(r+a)/2;p(h[0],n,r,f),p(h[1],n,f,a)}}for(var f=1,g=c.length;f<g;f++)h(d,a=c[f]),d=a;t._closed&&h(a||d,c[0]),this.curves=o,this.parts=s,this.length=l,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;e=r,r&&!(n[--r].offset<t););for(;e<i;e++){var a=n[e];if(a.offset>=t){this.index=e;var o=n[e-1],s=o&&o.index===a.index?o.time:0,l=o?o.offset:0;return{index:a.index,time:s+(a.time-s)*(t-l)/(a.offset-l)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),a=i.index,o=r.index;a<=o;a++){var s=E.getPart(this.curves[a],a===i.index?i.time:0,a===r.index?r.time:1);a===i.index&&t.moveTo(s[0],s[1]),t.bezierCurveTo.apply(t,s.slice(2))}}},r.each(E._evaluateMethods,(function(t){this[t+"At"]=function(e){var n=this._get(e);return E[t](this.curves[n.index],n.time)}}),{})),R=r.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,a=0,o=i.length;a<o;a++){var s=i[a].point;e&&e.equals(s)||n.push(e=s.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new T(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,a){var o=this.points;if(i-n!=1){for(var s,l=this.chordLengthParameterize(n,i),u=Math.max(e,e*e),c=!0,d=0;d<=4;d++){var h=this.generateBezier(n,i,l,r,a),p=this.findMaxError(n,i,h,l);if(p.error<e&&c)return void this.addCurve(t,h);if(s=p.index,p.error>=u)break;c=this.reparameterize(n,i,l,h),u=p.error}var f=o[s-1].subtract(o[s+1]);this.fitCubic(t,e,n,s,r,f),this.fitCubic(t,e,s,i,f.negate(),a)}else{var g=o[n],m=o[i],v=g.getDistance(m)/3;this.addCurve(t,[g,g.add(r.normalize(v)),m.add(a.normalize(v)),m])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new T(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var a=1e-12,o=Math.abs,s=this.points,l=s[t],u=s[e],c=[[0,0],[0,0]],d=[0,0],h=0,p=e-t+1;h<p;h++){var f=n[h],g=1-f,m=3*f*g,v=g*g*g,y=m*g,_=m*f,x=f*f*f,b=i.normalize(y),w=r.normalize(_),M=s[t+h].subtract(l.multiply(v+y)).subtract(u.multiply(_+x));c[0][0]+=b.dot(b),c[0][1]+=b.dot(w),c[1][0]=c[0][1],c[1][1]+=w.dot(w),d[0]+=b.dot(M),d[1]+=w.dot(M)}var S,C,k=c[0][0]*c[1][1]-c[1][0]*c[0][1];if(o(k)>a){var I=c[0][0]*d[1]-c[1][0]*d[0];S=(d[0]*c[1][1]-d[1]*c[0][1])/k,C=I/k}else{var D=c[0][0]+c[0][1],T=c[1][0]+c[1][1];S=C=o(D)>a?d[0]/D:o(T)>a?d[1]/T:0}var A,E,L=u.getDistance(l),P=a*L;if(S<P||C<P)S=C=L/3;else{var N=u.subtract(l);A=i.normalize(S),E=r.normalize(C),A.dot(N)-E.dot(N)>L*L&&(S=C=L/3,A=E=null)}return[l,l.add(A||i.normalize(S)),u.add(E||r.normalize(C)),u]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);r=1;for(var a=n.length;r<a;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],a=0;a<=2;a++)i[a]=t[a+1].subtract(t[a]).multiply(3);for(a=0;a<=1;a++)r[a]=i[a+1].subtract(i[a]).multiply(2);var o=this.evaluate(3,t,n),s=this.evaluate(2,i,n),l=this.evaluate(1,r,n),u=o.subtract(e),d=s.dot(s)+u.dot(l);return c.isMachineZero(d)?n:n-u.dot(s)/d},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var a=0;a<=t-r;a++)i[a]=i[a].multiply(1-n).add(i[a+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),a=0,o=t+1;o<e;o++){var s=this.evaluate(3,n,i[o-t]).subtract(this.points[o]),l=s.x*s.x+s.y*s.y;l>=a&&(a=l,r=o)}return{error:a,index:r}}}),V=b.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var n=t&&r.isPlainObject(t)&&t.x===e&&t.y===e;this._initialize(n&&t,!n&&h.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),F=V.extend({_class:"PointText",initialize:function(){V.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new p(t.x,t.y,this,"setPoint")},setPoint:function(){var t=h.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,a=r.hasFill(),o=r.hasStroke(),s=r.getLeading(),l=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var u=0,c=i.length;u<c;u++){t.shadowColor=l;var d=i[u];a&&(t.fillText(d,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(d,0,0),t.translate(0,s)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,a=n.getJustification(),o=n.getLeading(),s=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==a&&(l-=s/("center"===a?2:1));var u=new m(l,r?-.75*o:0,s,r*o);return t?t._transformBounds(u,u):u}}),B=r.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},i={},a={transparent:[0,0,0,0]};function o(e){var i,r=e.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||e.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),o="rgb";if(r){var s=r[4]?4:3;i=new Array(s);for(var l=0;l<s;l++){var u=r[l+1];i[l]=parseInt(1==u.length?u+u:u,16)/255}}else if(r=e.match(/^(rgb|hsl)a?\((.*)\)$/)){o=r[1],i=r[2].trim().split(/[,\s]+/g);for(var c="hsl"===o,d=(l=0,Math.min(i.length,4));l<d;l++){var h=i[l];if(u=parseFloat(h),c)if(0===l){var p=h.match(/([a-z]*)$/)[1];u*={turn:360,rad:180/Math.PI,grad:.9}[p]||1}else l<3&&(u/=100);else l<3&&(u/=/%$/.test(h)?100:255);i[l]=u}}else{var f=a[e];if(!f)if(n){t||((t=nt.getContext(1,1,{willReadFrequently:!0})).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var g=t.getImageData(0,0,1,1).data;f=a[e]=[g[0]/255,g[1]/255,g[2]/255]}else f=[0,0,0];i=f.slice()}return[o,i]}var s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],l={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0===r?0:60*(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(t,e,n){var i,r=(t=(t/60%6+6)%6)-(i=Math.floor(t)),a=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[a[(i=s[i])[0]],a[i[1]],a[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),a=i-r,o=0===a,s=(i+r)/2;return[o?0:60*(i==t?(e-n)/a+(e<n?6:0):i==e?(n-t)/a+2:(t-e)/a+4),o?0:s<.5?a/(i+r):a/(2-i-r),s]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var i=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,a=2*n-r,o=[],s=0;s<3;s++){var l=i[s];l<0&&(l+=1),l>1&&(l-=1),o[s]=6*l<1?a+6*(r-a)*l:2*l<1?r:3*l<2?a+(r-a)*(2/3-l)*6:a}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return r.each(e,(function(t,n){i[n]=[],r.each(t,(function(t,a){var o=r.capitalize(t),s=/^(hue|saturation)$/.test(t),l=i[n][a]="gradient"===n?"gradient"===t?function(t){var e=this._components[0];return e!==(t=H.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return h.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+o]=function(){return this._type===n||s&&/^hs[bl]$/.test(this._type)?this._components[a]:this._convert(n)[a]},this["set"+o]=function(t){this._type===n||s&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(n),this._properties=e[n],this._type=n),this._components[a]=l.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function t(n){var a,s,l,u,c=arguments,d=this.__read,h=0;Array.isArray(n)&&(n=(c=n)[0]);var p=null!=n&&typeof n;if("string"===p&&n in e&&(a=n,n=c[1],Array.isArray(n)?(s=n,l=c[2]):(d&&(h=1),c=r.slice(c,1),p=typeof n)),!s){if(u="number"===p?c:"object"===p&&null!=n.length?n:null){a||(a=u.length>=3?"rgb":"gray");var f=e[a].length;l=u[f],d&&(h+=u===arguments?f+(null!=l?1:0):1),u.length>f&&(u=r.slice(u,0,f))}else if("string"===p){var g=o(n);a=g[0],4===(s=g[1]).length&&(l=s[3],s.length--)}else if("object"===p)if(n.constructor===t){if(a=n._type,s=n._components.slice(),l=n._alpha,"gradient"===a)for(var m=1,v=s.length;m<v;m++){var y=s[m];y&&(s[m]=y.clone())}}else if(n.constructor===H)a="gradient",u=c;else{var _=e[a="hue"in n?"lightness"in n?"hsl":"hsb":"gradient"in n||"stops"in n||"radial"in n?"gradient":"gray"in n?"gray":"rgb"],x=i[a];for(this._components=s=[],m=0,v=_.length;m<v;m++)null==(b=n[_[m]])&&!m&&"gradient"===a&&"stops"in n&&(b={stops:n.stops,radial:n.radial}),null!=(b=x[m].call(this,b))&&(s[m]=b);l=n.alpha}d&&a&&(h=1)}if(this._type=a||"rgb",!s)for(this._components=s=[],m=0,v=(x=i[this._type]).length;m<v;m++){var b;null!=(b=x[m].call(this,u&&u[m]))&&(s[m]=b)}return this._components=s,this._properties=e[this._type],this._alpha=l,d&&(this.__read=h),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return r.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=l[this._type+"-"+t])?e.apply(this,this._components):l["rgb-"+t].apply(this,l[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new B(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=r.isPlainValue(t,!0)?B.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&r.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=u.instance,r=0,a=t.length;r<a;r++){var o=this._components[r];null!=o&&e.push(t[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function i(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[i(e[0]),i(e[1]),i(e[2])],n<1&&e.push(n<0?0:n),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],a=r._stops,o=i[1],s=i[2],l=i[3],u=e&&e.inverted();if(u&&(o=u._transformPoint(o),s=u._transformPoint(s),l&&(l=u._transformPoint(l))),r._radial){var c=s.getDistance(o);if(l){var d=l.subtract(o);d.getLength()>c&&(l=o.add(d.normalize(c-.1)))}var h=l||o;n=t.createRadialGradient(h.x,h.y,0,o.x,o.y,c)}else n=t.createLinearGradient(o.x,o.y,s.x,s.y);for(var p=0,f=a.length;p<f;p++){var g=a[p],m=g._offset;n.addColorStop(null==m?p/(f-1):m,g._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new B(t(),t(),t())},_setOwner:function(t,e,n){return t&&(t._owner&&e&&t._owner!==e&&(t=t.clone()),!t._owner^!e&&(t._owner=e||null,t._setter=n||null)),t}}})},new function(){return r.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=B.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),a=0,o=i.length;a<o;a++)r[a]=t(i[a],r[a]);return new B(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),H=r.extend({_class:"Gradient",initialize:function(t,e){this._id=d.get(),t&&r.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return r.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var n=this._owners?this._owners.indexOf(t):-1;-1!=n&&(this._owners.splice(n,1),this._owners.length||(this._owners=e))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new H(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var n=this._stops;if(n)for(var i=0,r=n.length;i<r;i++)n[i]._owner=e;for(i=0,r=(n=this._stops=G.readList(t,0,{clone:!0})).length;i<r;i++)n[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),G=r.extend({_class:"GradientStop",initialize:function(t,n){var i=t,r=n;"object"==typeof t&&n===e&&(Array.isArray(t)&&"number"!=typeof t[0]?(i=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(i=t.color,r=t.offset||t.rampPoint||0)),this.setColor(i),this.setOffset(r)},clone:function(){return new G(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return r.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){B._setOwner(this._color,null),this._color=B._setOwner(B.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),j=r.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new h,selectedColor:null},n=r.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=r.set({},n,{fillColor:new B}),a={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},o={beans:!0},s={_class:"Style",beans:!0,initialize:function(e,r,a){this._values={},this._owner=r,this._project=r&&r._project||a||ot.project,this._defaults=!r||r instanceof w?n:r instanceof V?i:t,e&&this.set(e)}};return r.each(n,(function(t,n){var i=/Color$/.test(n),l="shadowOffset"===n,u=r.capitalize(n),c=a[n],d="set"+u,p="get"+u;s[d]=function(t){var e=this._owner,r=e&&e._children,a=r&&r.length>0&&!(e instanceof O);if(a)for(var o=0,s=r.length;o<s;o++)r[o]._style[d](t);if(("selectedColor"===n||!a)&&n in this._defaults){var l=this._values[n];l!==t&&(i&&(l&&(B._setOwner(l,null),l._canvasStyle=null),t&&t.constructor===B&&(t=B._setOwner(t,e,a&&d))),this._values[n]=t,e&&e._changed(c||129))}},s[p]=function(t){var a=this._owner,o=a&&a._children,s=o&&o.length>0&&!(a instanceof O);if(s&&!t)for(var u=0,c=o.length;u<c;u++){var f=o[u]._style[p]();if(u){if(!r.equals(g,f))return e}else g=f}else if(n in this._defaults){var g;if((g=this._values[n])===e)(g=this._defaults[n])&&g.clone&&(g=g.clone());else{var m=i?B:l?h:null;!m||g&&g.constructor===m||(this._values[n]=g=m.read([g],0,{readNull:!0,clone:!0}))}}return g&&i&&(g=B._setOwner(g,a,s&&d)),g},o[p]=function(t){return this._style[p](t)},o[d]=function(t){this._style[d](t)}})),r.each({Font:"FontFamily",WindingRule:"FillRule"},(function(t,e){var n="get"+e,i="set"+e;s[n]=o[n]="#get"+t,s[i]=o[i]="#set"+t})),b.inject(o),s},{set:function(t){var e=t instanceof j,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){function n(t,n,i){var a=t._values,o=n._values,s=n._defaults;for(var l in a){var u=a[l],c=o[l];if(!(i&&l in o||r.equals(u,c===e?s[l]:c)))return!1}return!0}return t===this||t&&this._class===t._class&&n(this,t)&&n(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),W=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],a=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var s=r[o],l=s?s+a:e;if(l in t){if(!n)return t[l];t[l]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,a=i.documentElement;try{n=t.getBoundingClientRect()}catch(u){n={left:0,top:0,width:0,height:0}}var o=n.left-(a.clientLeft||r.clientLeft||0),s=n.top-(a.clientTop||r.clientTop||0);if(!e){var l=i.defaultView;o+=l.pageXOffset||a.scrollLeft||r.scrollLeft,s+=l.pageYOffset||a.scrollTop||r.scrollTop}return new m(o,s,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new m(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return W.getBounds(t,e).getPoint()},getSize:function(t){return W.getBounds(t,!0).getSize()},isInvisible:function(t){return W.getSize(t).equals(new f(0,0))},isInView:function(t){return!W.isInvisible(t)&&W.getViewportBounds(t).intersects(W.getBounds(t,!0))},isInserted:function(t){return i.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},U={add:function(t,e){if(t)for(var n in e)for(var r=e[n],a=n.split(/[\s,]+/g),o=0,s=a.length;o<s;o++){var l=a[o],u=t===i&&("touchstart"===l||"touchmove"===l)&&{passive:!1};t.addEventListener(l,r,u)}},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,o=r.length;a<o;a++)t.removeEventListener(r[a],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new h(e.pageX||e.clientX+i.documentElement.scrollLeft,e.pageY||e.clientY+i.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return U.getPoint(t).subtract(W.getOffset(e||U.getTarget(t)))}};U.requestAnimationFrame=new function(){var t,e=W.getPrefixed(n,"requestAnimationFrame"),i=!1,r=[];function a(){var t=r;r=[];for(var n=0,o=t.length;n<o;n++)t[n]();(i=e&&r.length)&&e(a)}return function(n){r.push(n),e?i||(e(a),i=!0):t||(t=setInterval(a,1e3/60))}};var Y=r.extend(a,{_class:"View",initialize:function t(e,r){function a(t){return r[t]||parseInt(r.getAttribute(t),10)}function s(){var t=W.getSize(r);return t.isNaN()||t.isZero()?new f(a("width"),a("height")):t}var l;if(n&&r){this._id=r.getAttribute("id"),null==this._id&&r.setAttribute("id",this._id="paper-view-"+t._id++),U.add(r,this._viewEvents);var u="none";if(W.setPrefixed(r.style,{userDrag:u,userSelect:u,touchCallout:u,contentZooming:u,tapHighlightColor:"rgba(0,0,0,0)"}),o.hasAttribute(r,"resize")){var c=this;U.add(n,this._windowEvents={resize:function(){c.setViewSize(s())}})}if(l=s(),o.hasAttribute(r,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var d=this._stats.domElement,h=d.style,p=W.getOffset(r);h.position="absolute",h.left=p.x+"px",h.top=p.y+"px",i.body.appendChild(d)}}else l=new f(r),r=null;this._project=e,this._scope=e._scope,this._element=r,this._pixelRatio||(this._pixelRatio=n&&n.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new y)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ot.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Y._focused===this&&(Y._focused=null),Y._views.splice(Y._views.indexOf(this),1),delete Y._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),U.remove(this._element,this._viewEvents),U.remove(n,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:r.each(b._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),(function(t){this[t]={}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;U.requestAnimationFrame((function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;W.getPrefixed(i,"hidden")&&"true"!==o.getAttribute(e,"keepalive")||!W.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()})),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ot=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new r({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new r(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=e},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new g(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=f.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new m(new h,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return W.isInView(this._element)},isInserted:function(){return W.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var r=n.parentNode,a=i.createElement("div");a.style.fontSize=t,r.appendChild(a),e=parseFloat(W.getStyles(a).fontSize),r.removeChild(a)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},r.each(["rotate","scale","shear","skew"],(function(t){var e="rotate"===t;this[t]=function(){var n=arguments,i=(e?r:h).read(n),a=h.read(n,0,{readNull:!0});return this.transform((new y)[t](i,a||this.getCenter(!0)))}}),{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new y;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=h.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new y).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new p(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=h.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(h.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(h.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(h.read(arguments))},getEventPoint:function(t){return this.viewToProject(U.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return i&&"string"==typeof e&&(e=i.getElementById(e)),new(n?$:Y)(t,e)}}},new function(){if(n){var t,e,r,a,o,s=!1,l=!1,u=n.navigator;u.pointerEnabled||u.msPointerEnabled?(r="pointerdown MSPointerDown",a="pointermove MSPointerMove",o="pointerup pointercancel MSPointerUp MSPointerCancel"):(r="touchstart",a="touchmove",o="touchend touchcancel","ontouchstart"in n&&u.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(r+=" mousedown",a+=" mousemove",o+=" mouseup"));var c={},d={mouseout:function(t){var e=Y._focused,n=U.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var i=U.getOffset(t,e._element),r=i.x,a=Math.abs,o=a(r),s=o-(1<<25);i.x=a(s)<o?s*(r<0?-1:1):r,I(e,t,e.viewToProject(i))}},scroll:k};c[r]=function(t){var e=Y._focused=C(t);s||(s=!0,e._handleMouseEvent("mousedown",t))},d[a]=function(n){var i=Y._focused;if(!l){var r=C(n);r?i!==r&&(i&&I(i,n),t||(t=i),i=Y._focused=e=r):e&&e===i&&(t&&!t.isInserted()&&(t=null),i=Y._focused=t,t=null,k())}i&&I(i,n)},d[r]=function(){l=!0},d[o]=function(t){var e=Y._focused;e&&s&&e._handleMouseEvent("mouseup",t),l=s=!1},U.add(i,d),U.add(n,{load:k});var h,p,f,g,m,v,y,_,x=!1,b=!1,w={doubleclick:"click",mousedrag:"mousemove"},M=!1,S={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(t,e,n){var i=this._itemEvents,r=i.native[t],a="mousemove"===t,o=this._scope.tool,l=this;function u(t){return i.virtual[t]||l.responds(t)||o&&o.responds(t)}a&&s&&u("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var c=this.getBounds().contains(n),d=r&&c&&l._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),w=d&&d.item||null,S=!1,C={};if(C[t.substr(5)]=!0,r&&w!==g&&(g&&D(g,null,"mouseleave",e,n),w&&D(w,null,"mouseenter",e,n),g=w),M^c&&(D(this,null,c?"mouseenter":"mouseleave",e,n),S=!0),!c&&!C.drag||n.equals(p)||(T(this,w,a?t:"mousemove",e,n,p),S=!0),M=c,C.down&&c||C.up&&h){if(T(this,w,t,e,n,h),C.down){if(_=w===v&&Date.now()-y<300,f=v=w,!b&&w){for(var k=w;k&&!k.responds("mousedrag");)k=k._parent;k&&(m=w)}h=n}else C.up&&(b||w!==f||(y=Date.now(),T(this,w,_?"doubleclick":"click",e,n,h),_=!1),f=m=null);M=!1,S=!0}p=n,S&&o&&(x=o._handleMouseEvent(t,e,n,C)||x),!1!==e.cancelable&&(x&&!C.move||C.down&&u("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){var r,a=this._scope,o=a.tool;function s(o){o.responds(t)&&(ot=a,o.emit(t,r=r||new X(t,e,n,i)))}this.isVisible()&&(s(this),o&&o.responds(t)&&s(o))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var a in S)i[a]=(i[a]||0)+(S[a][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:k,_resetState:function(){s=l=x=M=!1,t=e=h=p=f=g=m=v=y=_=null}}}}function C(t){var e=U.getTarget(t);return e.getAttribute&&Y._viewsById[e.getAttribute("id")]}function k(){var t=Y._focused;if(!t||!t.isVisible())for(var n=0,i=Y._views.length;n<i;n++)if((t=Y._views[n]).isVisible()){Y._focused=e=t;break}}function I(t,e,n){t._handleMouseEvent("mousemove",e,n)}function D(t,e,n,i,r,a,o){var s,l=!1;function u(t,n){if(t.responds(n)){if(s||(s=new J(n,i,r,e||t,a?r.subtract(a):null)),t.emit(n,s)&&(x=!0,s.prevented&&(b=!0),s.stopped))return l=!0}else{var o=w[n];if(o)return u(t,o)}}for(;t&&t!==o&&!u(t,n);)t=t._parent;return l}function T(t,e,n,i,r,a){return t._project.removeOn(n),b=x=!1,m&&D(m,null,n,i,r,a)||e&&e!==m&&!e.isDescendant(m)&&D(e,null,"mousedrag"===n?"mousemove":n,i,r,a,m)||D(t,m||e||t,n,i,r,a)}}),$=Y.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof n.HTMLCanvasElement)){var i=f.read(arguments,1);if(i.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+r.slice(arguments,1));e=nt.getCanvas(i)}var a=this._context=e.getContext("2d");if(a.save(),this._pixelRatio=1,!/^off|false$/.test(o.getAttribute(e,"hidpi"))){var s=n.devicePixelRatio||1,l=W.getPrefixed(a,"backingStorePixelRatio")||1;this._pixelRatio=s/l}Y.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,a=this._context;if(!o.hasAttribute(r,"resize")){var s=r.style;s.width=e+"px",s.height=n+"px"}a.restore(),a.save(),a.scale(i,i)}},getContext:function(){return this._context},getPixelSize:function t(e){var n,i=ot.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,a=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=a}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var a=0,o=e.length;a<o;a++)r=Math.max(r,n.measureText(e[a]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),q=r.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Z.modifiers}}),X=q.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Z=new function(){var t,a,o={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},s={tab:"\t",space:" ",enter:"\r"},l={},u={},c=new r({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=ot&&ot.agent;return t&&t.mac?this.meta:this.control}}});function d(t){var n=t.key||t.keyIdentifier;return n=/^U\+/.test(n)?String.fromCharCode(parseInt(n.substr(2),16)):/^Arrow[A-Z]/.test(n)?n.substr(5):"Unidentified"===n||n===e?String.fromCharCode(t.keyCode):n,o[n]||(n.length>1?r.hyphenate(n):n.toLowerCase())}function h(e,n,i,a){var o,s=Y._focused;if(l[n]=e,e?u[n]=i:delete u[n],n.length>1&&(o=r.camelize(n))in c){c[o]=e;var d=ot&&ot.agent;if("meta"===o&&d&&d.mac)if(e)t={};else{for(var p in t)p in u&&h(!1,p,t[p],a);t=null}}else e&&t&&(t[n]=i);s&&s._handleKeyEvent(e?"keydown":"keyup",a,n,i)}return U.add(i,{keydown:function(t){var e=d(t),n=ot&&ot.agent;e.length>1||n&&n.chrome&&(t.altKey||n.mac&&t.metaKey||!n.mac&&t.ctrlKey)?h(!0,e,s[e]||(e.length>1?"":e),t):a=e},keypress:function(t){if(a){var e=d(t),n=t.charCode,i=n>=32?String.fromCharCode(n):e.length>1?"":e;e!==a&&(e=i.toLowerCase()),h(!0,e,i,t),a=null}},keyup:function(t){var e=d(t);e in u&&h(!1,e,u[e],t)}}),U.add(n,{blur:function(t){for(var e in u)h(!1,e,u[e],t)}}),{modifiers:c,isDown:function(t){return!!l[t]}}},J=q.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),K=q.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Q=s.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){s.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){ot=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var r=i.move||i.drag,a=this.responds(t),o=!1,s=this;function l(t,e){var a=n,o=r?s._point:s._downPoint||a;if(r){if(s._moveCount>=0&&a.equals(o))return!1;if(o&&(null!=t||null!=e)){var l=a.subtract(o),u=l.getLength();if(u<(t||0))return!1;e&&(a=o.add(l.normalize(Math.min(u,e))))}s._moveCount++}return s._point=a,s._lastPoint=o||a,i.down&&(s._moveCount=-1,s._downPoint=a,s._downCount++),!0}function u(){a&&(o=s.emit(t,new K(s,t,e))||o)}if(i.down)l(),u();else if(i.up)l(null,this._maxDistance),u();else if(a)for(;l(this._minDistance,this._maxDistance);)u();return o}}),tt=r.extend(a,{_class:"Tween",statics:{easings:new r({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,n,i,r,a,o){this.object=e;var s=typeof a,l="function"===s;this.type=l?s:"string"===s?a:"linear",this.easing=l?a:t.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null;var u=n||i;this._keys=u?Object.keys(u):[],this._parsedKeys=this._parseKeys(this._keys),this._from=u&&this._getState(n),this._to=u&&this._getState(i),!1!==o&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,i=function(n){return"function"==typeof n?n(e,t):n},a=0,o=n&&n.length;a<o;a++){var s=n[a],l=i(this._from[s]),u=i(this._to[s]),c=l&&u&&l.__add&&u.__add?u.__subtract(l).__multiply(e).__add(l):(u-l)*e+l;this._setProperty(this._parsedKeys[s],c)}this.responds("update")&&this.emit("update",new r({progress:t,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},i=0,r=e.length;i<r;i++){var a,o=e[i],s=this._parsedKeys[o],l=this._getProperty(s);if(t){var u=this._resolveValue(l,t[o]);this._setProperty(s,u),a=(a=this._getProperty(s))&&a.clone?a.clone():a,this._setProperty(s,l)}else a=l&&l.clone?l.clone():l;n[o]=a}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],e[1]):e}if("string"==typeof e){var i=e.match(/^[+\-*/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],r)}}}return e},_calculate:function(t,e,n){return ot.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n],a=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[r]=a.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,i=0,r=t.length-(e||0);i<r&&n;i++)n=n[t[i]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),et=function(e){var n=new t.XMLHttpRequest;return n.open((e.method||"get").toUpperCase(),e.url,r.pick(e.async,!0)),e.mimeType&&n.overrideMimeType(e.mimeType),n.onload=function(){var t=n.status;0===t||200===t?e.onLoad&&e.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var t=n.status,i='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(i);e.onError(i,t)},n.send(null)},nt=r.exports.CanvasProvider={canvases:[],getCanvas:function(t,e,r){if(!n)return null;var a,o=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?a=this.canvases.pop():(a=i.createElement("canvas"),o=!1);var s=a.getContext("2d",r||{});if(!s)throw new Error("Canvas "+a+" is unable to provide a 2D context.");return a.width===t&&a.height===e?o&&s.clearRect(0,0,t+1,e+1):(a.width=t,a.height=e),s.save(),a},getContext:function(t,e,n){var i=this.getCanvas(t,e,n);return i?i.getContext("2d",n||{}):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},it=new function(){var t,e,n,i,a,o,s,l,u,c,d,h=Math.min,p=Math.max,f=Math.abs;function g(t,e,n){return.2989*t+.587*e+.114*n}function m(t,e,n,i){var r=i-g(t,e,n),a=(i=g(u=t+r,c=e+r,d=n+r),h(u,c,d)),o=p(u,c,d);if(a<0){var s=i-a;u=i+(u-i)*i/s,c=i+(c-i)*i/s,d=i+(d-i)*i/s}if(o>255){var l=255-i,f=o-i;u=i+(u-i)*l/f,c=i+(c-i)*l/f,d=i+(d-i)*l/f}}function v(t,e,n){return p(t,e,n)-h(t,e,n)}function y(t,e,n,i){var r,a=[t,e,n],o=p(t,e,n),s=h(t,e,n);r=0===h(s=s===t?0:s===e?1:2,o=o===t?0:o===e?1:2)?1===p(s,o)?2:1:0,a[o]>a[s]?(a[r]=(a[r]-a[s])*i/(a[o]-a[s]),a[o]=i):a[r]=a[o]=0,a[s]=0,u=a[0],c=a[1],d=a[2]}var _={multiply:function(){u=a*t/255,c=o*e/255,d=s*n/255},screen:function(){u=a+t-a*t/255,c=o+e-o*e/255,d=s+n-s*n/255},overlay:function(){u=a<128?2*a*t/255:255-2*(255-a)*(255-t)/255,c=o<128?2*o*e/255:255-2*(255-o)*(255-e)/255,d=s<128?2*s*n/255:255-2*(255-s)*(255-n)/255},"soft-light":function(){var i=t*a/255;u=i+a*(255-(255-a)*(255-t)/255-i)/255,c=(i=e*o/255)+o*(255-(255-o)*(255-e)/255-i)/255,d=(i=n*s/255)+s*(255-(255-s)*(255-n)/255-i)/255},"hard-light":function(){u=t<128?2*t*a/255:255-2*(255-t)*(255-a)/255,c=e<128?2*e*o/255:255-2*(255-e)*(255-o)/255,d=n<128?2*n*s/255:255-2*(255-n)*(255-s)/255},"color-dodge":function(){u=0===a?0:255===t?255:h(255,255*a/(255-t)),c=0===o?0:255===e?255:h(255,255*o/(255-e)),d=0===s?0:255===n?255:h(255,255*s/(255-n))},"color-burn":function(){u=255===a?255:0===t?0:p(0,255-255*(255-a)/t),c=255===o?255:0===e?0:p(0,255-255*(255-o)/e),d=255===s?255:0===n?0:p(0,255-255*(255-s)/n)},darken:function(){u=a<t?a:t,c=o<e?o:e,d=s<n?s:n},lighten:function(){u=a>t?a:t,c=o>e?o:e,d=s>n?s:n},difference:function(){(u=a-t)<0&&(u=-u),(c=o-e)<0&&(c=-c),(d=s-n)<0&&(d=-d)},exclusion:function(){u=a+t*(255-a-a)/255,c=o+e*(255-o-o)/255,d=s+n*(255-s-s)/255},hue:function(){y(t,e,n,v(a,o,s)),m(u,c,d,g(a,o,s))},saturation:function(){y(a,o,s,v(t,e,n)),m(u,c,d,g(a,o,s))},luminosity:function(){m(a,o,s,g(t,e,n))},color:function(){m(t,e,n,g(a,o,s))},add:function(){u=h(a+t,255),c=h(o+e,255),d=h(s+n,255)},subtract:function(){u=p(a-t,0),c=p(o-e,0),d=p(s-n,0)},average:function(){u=(a+t)/2,c=(o+e)/2,d=(s+n)/2},negation:function(){u=255-f(255-t-a),c=255-f(255-e-o),d=255-f(255-n-s)}},x=this.nativeModes=r.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),b=nt.getContext(1,1,{willReadFrequently:!0});b&&(r.each(_,(function(t,e){var n="darken"===e,i=!1;b.save();try{b.fillStyle=n?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=e,b.globalCompositeOperation===e&&(b.fillStyle=n?"#a00":"#300",b.fillRect(0,0,1,1),i=b.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(r){}b.restore(),x[e]=i})),nt.release(b)),this.process=function(r,h,p,f,g){var m=h.canvas,v="normal"===r;if(v||x[r])p.save(),p.setTransform(1,0,0,1,0,0),p.globalAlpha=f,v||(p.globalCompositeOperation=r),p.drawImage(m,g.x,g.y),p.restore();else{var y=_[r];if(!y)return;for(var b=p.getImageData(g.x,g.y,m.width,m.height),w=b.data,M=h.getImageData(0,0,m.width,m.height).data,S=0,C=w.length;S<C;S+=4){t=M[S],a=w[S],e=M[S+1],o=w[S+1],n=M[S+2],s=w[S+2],i=M[S+3],l=w[S+3],y();var k=i*f/255,I=1-k;w[S]=k*u+I*a,w[S+1]=k*c+I*o,w[S+2]=k*d+I*s,w[S+3]=i*f+I*l}p.putImageData(b,g.x,g.y)}}},rt=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function a(t,e,n){for(var i in e){var a=e[i],o=r[i];"number"==typeof a&&n&&(a=n.number(a)),o?t.setAttributeNS(o,i,a):t.setAttribute(i,a)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,r){return a(i.createElementNS(t,e),n,r)},get:function(t,e){var n=r[e],i=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===i?null:i},set:a}},at=r.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof P||t instanceof S||t instanceof V)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},(function(t,e){var n=r.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&r.each(i,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+n,set:"set"+n}}),{});new function(){var e;function n(t,n,i){var a,o=new r,s=t.getTranslation();if(n&&(t.isInvertible()?(a=(t=t._shiftless())._inverseTransform(s),s=null):a=new h,o[i?"cx":"x"]=a.x,o[i?"cy":"y"]=a.y),!t.isIdentity()){var l=t.decompose();if(l){var u=[],d=l.rotation,p=l.scaling,f=l.skewing;s&&!s.isZero()&&u.push("translate("+e.point(s)+")"),d&&u.push("rotate("+e.number(d)+")"),c.isZero(p.x-1)&&c.isZero(p.y-1)||u.push("scale("+e.point(p)+")"),f.x&&u.push("skewX("+e.number(f.x)+")"),f.y&&u.push("skewY("+e.number(f.y)+")"),o.transform=u.join(" ")}else o.transform="matrix("+t.getValues().join(",")+")"}return o}function i(t,i){for(var r=n(t._matrix),a=t._children,o=rt.create("g",r,e),s=0,l=a.length;s<l;s++){var u=a[s],c=v(u,i);if(c)if(u.isClipMask()){var d=rt.create("clipPath");d.appendChild(c),f(u,d,"clip"),rt.set(o,{"clip-path":"url(#"+d.id+")"})}else o.appendChild(c)}return o}function a(t){var i=t._type,r=t._radius,a=n(t._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var o=t._size,s=o.width,l=o.height;a.x-=s/2,a.y-=l/2,a.width=s,a.height=l,r.isZero()&&(r=null)}return r&&("circle"===i?a.r=r:(a.rx=r.width,a.ry=r.height)),rt.create(i,a,e)}var o,s={Group:i,Layer:i,Raster:function(t,i){var r=n(t._matrix,!0),a=t.getSize(),o=t.getImage();return r.x-=a.width/2,r.y-=a.height/2,r.width=a.width,r.height=a.height,r.href=0==i.embedImages&&o&&o.src||t.toDataURL(),rt.create("image",r,e)},Path:function(t,i){var r=i.matchShapes;if(r){var o=t.toShape(!1);if(o)return a(o)}var s,l=t._segments,u=l.length,c=n(t._matrix);if(r&&u>=2&&!t.hasHandles())if(u>2){s=t._closed?"polygon":"polyline";for(var d=[],h=0;h<u;h++)d.push(e.point(l[h]._point));c.points=d.join(" ")}else{s="line";var p=l[0]._point,f=l[1]._point;c.set({x1:p.x,y1:p.y,x2:f.x,y2:f.y})}else s="path",c.d=t.getPathData(null,i.precision);return rt.create(s,c,e)},Shape:a,CompoundPath:function(t,i){var r=n(t._matrix),a=t.getPathData(null,i.precision);return a&&(r.d=a),rt.create("path",r,e)},SymbolItem:function(t,i){var r=n(t._matrix,!0),a=t._definition,o=p(a,"symbol"),s=a._item,l=s.getStrokeBounds();return o||((o=rt.create("symbol",{viewBox:e.rectangle(l)})).appendChild(v(s,i)),f(a,o,"symbol")),r.href="#"+o.id,r.x+=l.x,r.y+=l.y,r.width=l.width,r.height=l.height,r.overflow="visible",rt.create("use",r,e)},PointText:function(t){var i=rt.create("text",n(t._matrix,!0),e);return i.textContent=t._content,i}};function l(t,n,i,a){var o={},s=!a&&t.getParent(),l=[];return null!=t._name&&(o.id=t._name),r.each(at,(function(n){var a=n.get,u=n.type,c=t[a]();if(n.exportFilter?n.exportFilter(t,c):0==i.reduceAttributes||!s||!r.equals(s[a](),c)){if("color"===u&&null!=c){var d=c.getAlpha();d<1&&(o[n.attribute+"-opacity"]=d)}"style"===u?l.push(n.attribute+": "+c):o[n.attribute]=null==c?"none":"color"===u?c.gradient?function(t){var n=p(t,"color");if(!n){var i,r=t.getGradient(),a=r._radial,o=t.getOrigin(),s=t.getDestination();if(a){i={cx:o.x,cy:o.y,r:o.getDistance(s)};var l=t.getHighlight();l&&(i.fx=l.x,i.fy=l.y)}else i={x1:o.x,y1:o.y,x2:s.x,y2:s.y};i.gradientUnits="userSpaceOnUse",n=rt.create((a?"radial":"linear")+"Gradient",i,e);for(var u=r._stops,c=0,d=u.length;c<d;c++){var h=u[c],g=h._color,m=g.getAlpha(),v=h._offset;i={offset:null==v?c/(d-1):v},g&&(i["stop-color"]=g.toCSS(!0)),m<1&&(i["stop-opacity"]=m),n.appendChild(rt.create("stop",i,e))}f(t,n,"color")}return"url(#"+n.id+")"}(c):c.toCSS(!0):"array"===u?c.join(","):"lookup"===u?n.toSVG[c]:c}})),l.length&&(o.style=l.join(";")),1===o.opacity&&delete o.opacity,t._visible||(o.visibility="hidden"),rt.set(n,o,e)}function p(t,e){return o||(o={ids:{},svgs:{}}),t&&o.svgs[e+"-"+(t._id||t.__id||(t.__id=d.get("svg")))]}function f(t,e,n){o||p();var i=o.ids[n]=(o.ids[n]||0)+1;e.id=n+"-"+i,o.svgs[n+"-"+(t._id||t.__id)]=e}function g(e,n){var i=e,r=null;if(o){for(var a in i="svg"===e.nodeName.toLowerCase()&&e,o.svgs)r||(i||(i=rt.create("svg")).appendChild(e),r=i.insertBefore(rt.create("defs"),i.firstChild)),r.appendChild(o.svgs[a]);o=null}return n.asString?(new t.XMLSerializer).serializeToString(i):i}function v(t,e,n){var i=s[t._class],r=i&&i(t,e);if(r){var a=e.onExport;a&&(r=a(t,r,e)||r);var o=JSON.stringify(t._data);o&&"{}"!==o&&"null"!==o&&r.setAttribute("data-paper-data",o)}return r&&l(t,r,e,n)}function _(t){return t||(t={}),e=new u(t.precision),t}b.inject({exportSVG:function(t){return g(v(this,t=_(t),!0),t)}}),x.inject({exportSVG:function(t){t=_(t);var i=this._children,a=this.getView(),o=r.pick(t.bounds,"view"),s=t.matrix||"view"===o&&a._matrix,l=s&&y.read([s]),u="view"===o?new m([0,0],a.getViewSize()):"content"===o?b._getBounds(i,l,{stroke:!0}).rect:m.read([o],0,{readNull:!0}),c={version:"1.1",xmlns:rt.svg,"xmlns:xlink":rt.xlink};u&&(c.width=u.width,c.height=u.height,(u.x||0===u.x||u.y||0===u.y)&&(c.viewBox=e.rectangle(u)));var d=rt.create("svg",c,e),h=d;l&&!l.isIdentity()&&(h=d.appendChild(rt.create("g",n(l),e)));for(var p=0,f=i.length;p<f;p++)h.appendChild(v(i[p],t,!0));return g(d,t)}})},new function(){var a,o={};function s(t,e,n,i,r,o){var s=rt.get(t,e)||o,l=null==s?i?null:n?"":0:n?s:parseFloat(s);return/%\s*$/.test(s)?l/100*(r?1:a[/x|^width/.test(e)?"width":"height"]):l}function l(t,e,n,i,r,a,o){return e=s(t,e||"x",!1,i,r,a),n=s(t,n||"y",!1,i,r,o),!i||null!=e&&null!=n?new h(e,n):null}function u(t,e,n,i,r){return e=s(t,e||"width",!1,i,r),n=s(t,n||"height",!1,i,r),!i||null!=e&&null!=n?new f(e,n):null}function c(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?A(t)||t:"lookup"===e?n[t]:t}function d(t,e,n,i){var r=t.childNodes,a="clippath"===e,o="defs"===e,s=new w,l=s._project,u=l._currentStyle,c=[];if(a||o||(s=T(s,t,i),l._currentStyle=s._style.clone()),i)for(var d=t.querySelectorAll("defs"),h=0,p=d.length;h<p;h++)E(d[h],n,!1);for(h=0,p=r.length;h<p;h++){var f,g=r[h];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(f=E(g,n,!1))||f instanceof I||c.push(f)}return s.addChildren(c),a&&(s=T(s.reduce(),t,i)),l._currentStyle=u,(a||o)&&(s.remove(),s=null),s}function p(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,a=n.length;r<a;r+=2)i.push(new h(parseFloat(n[r]),parseFloat(n[r+1])));var o=new N(i);return"polygon"===e&&o.closePath(),o}function g(t,e){var n,i=(s(t,"href",!0)||"").substring(1),r="radialgradient"===e;if(i)(n=o[i].getGradient())._radial^r&&((n=n.clone())._radial=r);else{for(var a=t.childNodes,u=[],c=0,d=a.length;c<d;c++){var h=a[c];1===h.nodeType&&u.push(T(new G,h))}n=new H(u,r)}var p,f,g,m="userSpaceOnUse"!==s(t,"gradientUnits",!0);return r?(f=(p=l(t,"cx","cy",!1,m,"50%","50%")).add(s(t,"r",!1,!1,m,"50%"),0),g=l(t,"fx","fy",!0,m)):(p=l(t,"x1","y1",!1,m,"0%","0%"),f=l(t,"x2","y2",!1,m,"100%","0%")),T(new B(n,p,f,g),t)._scaleToBounds=m,null}var v={"#document":function(t,e,n,i){for(var r=t.childNodes,a=0,o=r.length;a<o;a++){var s=r[a];if(1===s.nodeType)return E(s,n,i)}},g:d,svg:d,clippath:d,polygon:p,polyline:p,path:function(t){return P.create(t.getAttribute("d"))},lineargradient:g,radialgradient:g,image:function(t){var e=new C(s(t,"href",!0));return e.on("load",(function(){var e=u(t);this.setSize(e);var n=l(t).add(e.divide(2));this._matrix.append((new y).translate(n))})),e},symbol:function(t,e,n,i){return new I(d(t,e,n,i),!0)},defs:d,use:function(t){var e=(s(t,"href",!0)||"").substring(1),n=o[e],i=l(t);return n?n instanceof I?n.place(i):n.clone().translate(i):null},circle:function(t){return new S.Circle(l(t,"cx","cy"),s(t,"r"))},ellipse:function(t){return new S.Ellipse({center:l(t,"cx","cy"),radius:u(t,"rx","ry")})},rect:function(t){return new S.Rectangle(new m(l(t),u(t)),u(t,"rx","ry"))},line:function(t){return new N.Line(l(t,"x1","y1"),l(t,"x2","y2"))},text:function(t){var e=new F(l(t).add(l(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e},switch:d};function _(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),a=new y,o=0,s=r.length;o<s;o++){var l=r[o];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0].trim(),d=u[1].split(/[\s,]+/g),h=0,p=d.length;h<p;h++)d[h]=parseFloat(d[h]);switch(c){case"matrix":a.append(new y(d[0],d[1],d[2],d[3],d[4],d[5]));break;case"rotate":a.rotate(d[0],d[1]||0,d[2]||0);break;case"translate":a.translate(d[0],d[1]||0);break;case"scale":a.scale(d);break;case"skewX":a.skew(d[0],0);break;case"skewY":a.skew(0,d[0])}}t.transform(a)}}function M(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}var k=r.set(r.each(at,(function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](c(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i&&i._scaleToBounds){var r=e.getBounds();i.transform((new y).translate(r.getPoint()).scale(r.getSize()))}}}}),{}),{id:function(t,e){o[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=A(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof w))return new w(n,t);t.insertChild(0,n)}},gradientTransform:_,transform:_,"fill-opacity":M,"stroke-opacity":M,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,i,r){var a,o=new m(c(e,"array")),s=u(i,null,null,!0);if(t instanceof w){var l=s?s.divide(o.getSize()):1,d=(new y).scale(l).translate(o.getPoint().negate());a=t}else t instanceof I&&(s&&o.setSize(s),a=t._item);if(a){if("visible"!==D(i,"overflow",r)){var h=new S.Rectangle(o);h.setClipMask(!0),a.addChild(h)}d&&a.transform(d)}}});function D(t,n,i){var a=t.attributes[n],o=a&&a.value;if(!o&&t.style){var s=r.camelize(n);(o=t.style[s])||i.node[s]===i.parent[s]||(o=i.node[s])}return o?"none"===o?null:o:e}function T(t,n,i){var a=n.parentNode,o={node:W.getStyles(n)||{},parent:!i&&!/^defs$/i.test(a.tagName)&&W.getStyles(a)||{}};return r.each(k,(function(i,r){var a=D(n,r,o);t=a!==e&&i(t,a,r,n,o)||t})),t}function A(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),i=e&&e[1],r=i&&o[n?i.replace(n.location.href.split("#")[0]+"#",""):i];return r&&r._scaleToBounds&&((r=r.clone())._scaleToBounds=!0),r}function E(t,e,n){var s,l,c,d=t.nodeName.toLowerCase(),h="#document"!==d,p=i.body;n&&h&&(a=ot.getView().getSize(),a=u(t,null,null,!0)||a,s=rt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),l=t.parentNode,c=t.nextSibling,s.appendChild(t),p.appendChild(s));var f=ot.settings,g=f.applyMatrix,m=f.insertItems;f.applyMatrix=!1,f.insertItems=!1;var y=v[d],_=y&&y(t,d,e,n)||null;if(f.insertItems=m,f.applyMatrix=g,_){!h||_ instanceof w||(_=T(_,t,n));var x=e.onImport,b=h&&t.getAttribute("data-paper-data");x&&(_=x(t,_,e)||_),e.expandShapes&&_ instanceof S&&(_.remove(),_=_.toPath()),b&&(_._data=JSON.parse(b))}return s&&(p.removeChild(s),l&&(c?l.insertBefore(t,c):l.appendChild(t))),n&&(o={},_&&r.pick(e.applyMatrix,g)&&_.matrix.apply(!0,!0)),_}function L(n,r,a){if(!n)return null;r="function"==typeof r?{onLoad:r}:r||{};var o=ot,s=null;function l(i){try{var l="object"==typeof i?i:(new t.DOMParser).parseFromString(i.trim(),"image/svg+xml");if(!l.nodeName)throw l=null,new Error("Unsupported SVG source: "+n);ot=o,s=E(l,r,!0),r&&!1===r.insert||a._insertItem(e,s);var c=r.onLoad;c&&c(s,i)}catch(d){u(d)}}function u(t,e){var n=r.onError;if(!n)throw new Error(t);n(t,e)}if("string"!=typeof n||/^[\s\S]*</.test(n)){if("undefined"!=typeof File&&n instanceof File){var c=new FileReader;return c.onload=function(){l(c.result)},c.onerror=function(){u(c.error)},c.readAsText(n)}l(n)}else{var d=i.getElementById(n);d?l(d):et({url:n,async:!0,onLoad:l,onError:u})}return s}b.inject({importSVG:function(t,e){return L(t,e,this)}}),x.inject({importSVG:function(t,e){return this.activate(),L(t,e,this)}})},r.exports.PaperScript=function(){var a,s,l,u,c=this,d=c.acorn;if(!d&&void 0!==sl)try{d=require("acorn")}catch(S){}function p(t,e){return(c.acorn||d).parse(t,e)}d||(d=a=s={},l=this,u=function(t){var e,n,i,r;t.version="0.5.0",t.parse=function(t,r){return n=String(t),i=n.length,o(r),$t(),function(t){v=y=s,e.locations&&(_=new Yt),x=w=null,b=[],Qt();var n=t||de(),i=!0;for(t||(n.body=[]);h!==E;){var r=Me();n.body.push(r),i&&fe(r)&&le(!0),i=!1}return pe(n,"Program")}(e.program)};var a=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function o(t){for(var n in e=t||{},a)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=a[n]);r=e.sourceFile||null}var s,l,u,c,d,h,p,f,g,m,v,y,_,x,b,w,M=t.getLineInfo=function(t,e){for(var n=1,i=0;;){jt.lastIndex=i;var r=jt.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};function C(t,e){var i=M(n,t);e+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=i,r.raisedAt=s,r}t.tokenize=function(t,r){n=String(t),i=n.length,o(r),$t();var a={};function v(t){return y=u,Qt(t),a.start=l,a.end=u,a.startLoc=c,a.endLoc=d,a.type=h,a.value=p,a}return v.jumpTo=function(t,i){var r;if(s=t,e.locations)for(g=1,m=jt.lastIndex=0;(r=jt.exec(n))&&r.index<t;)++g,m=r.index+r[0].length;f=i,Jt()},v};var k=[],I={type:"num"},D={type:"regexp"},T={type:"string"},A={type:"name"},E={type:"eof"},L={keyword:"break"},P={keyword:"case",beforeExpr:!0},N={keyword:"catch"},O={keyword:"continue"},z={keyword:"debugger"},R={keyword:"default"},V={keyword:"do",isLoop:!0},F={keyword:"else",beforeExpr:!0},B={keyword:"finally"},H={keyword:"for",isLoop:!0},G={keyword:"function"},j={keyword:"if"},W={keyword:"return",beforeExpr:!0},U={keyword:"switch"},Y={keyword:"throw",beforeExpr:!0},$={keyword:"try"},q={keyword:"var"},X={keyword:"while",isLoop:!0},Z={keyword:"with"},J={keyword:"new",beforeExpr:!0},K={keyword:"this"},Q={keyword:"null",atomValue:null},tt={keyword:"true",atomValue:!0},et={keyword:"false",atomValue:!1},nt={keyword:"in",binop:7,beforeExpr:!0},it={break:L,case:P,catch:N,continue:O,debugger:z,default:R,do:V,else:F,finally:B,for:H,function:G,if:j,return:W,switch:U,throw:Y,try:$,var:q,while:X,with:Z,null:Q,true:tt,false:et,new:J,in:nt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:K,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},rt={type:"[",beforeExpr:!0},at={type:"]"},ot={type:"{",beforeExpr:!0},st={type:"}"},lt={type:"(",beforeExpr:!0},ut={type:")"},ct={type:",",beforeExpr:!0},dt={type:";",beforeExpr:!0},ht={type:":",beforeExpr:!0},pt={type:"."},ft={type:"?",beforeExpr:!0},gt={binop:10,beforeExpr:!0},mt={isAssign:!0,beforeExpr:!0},vt={isAssign:!0,beforeExpr:!0},yt={postfix:!0,prefix:!0,isUpdate:!0},_t={prefix:!0,beforeExpr:!0},xt={binop:1,beforeExpr:!0},bt={binop:2,beforeExpr:!0},wt={binop:3,beforeExpr:!0},Mt={binop:4,beforeExpr:!0},St={binop:5,beforeExpr:!0},Ct={binop:6,beforeExpr:!0},kt={binop:7,beforeExpr:!0},It={binop:8,beforeExpr:!0},Dt={binop:9,prefix:!0,beforeExpr:!0},Tt={binop:10,beforeExpr:!0};for(var At in t.tokTypes={bracketL:rt,bracketR:at,braceL:ot,braceR:st,parenL:lt,parenR:ut,comma:ct,semi:dt,colon:ht,dot:pt,question:ft,slash:gt,eq:mt,name:A,eof:E,num:I,regexp:D,string:T},it)t.tokTypes["_"+At]=it[At];function Et(t){t=t.split(" ");var e="",n=[];t:for(var i=0;i<t.length;++i){for(var r=0;r<n.length;++r)if(n[r][0].length==t[i].length){n[r].push(t[i]);continue t}n.push([t[i]])}function a(t){if(1==t.length)return e+="return str === "+JSON.stringify(t[0])+";";e+="switch(str){";for(var n=0;n<t.length;++n)e+="case "+JSON.stringify(t[n])+":";e+="return true}return false;"}if(n.length>3){for(n.sort((function(t,e){return e.length-t.length})),e+="switch(str.length){",i=0;i<n.length;++i){var o=n[i];e+="case "+o[0].length+":",a(o)}e+="}"}else a(t);return new Function("str",e)}var Lt,Pt=Et("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Nt=Et("class enum extends super const export import"),Ot=Et("implements interface let package private protected public static yield"),zt=Et("eval arguments"),Rt=Et("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Vt=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ft="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Bt=new RegExp("["+Ft+"]"),Ht=new RegExp("["+Ft+"------------------------------------------------------------------------------------------------------------------------------------------]"),Gt=/[\n\r\u2028\u2029]/,jt=/\r\n|[\n\r\u2028\u2029]/g,Wt=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Bt.test(String.fromCharCode(t)))},Ut=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&Ht.test(String.fromCharCode(t))))};function Yt(){this.line=g,this.column=s-m}function $t(){g=1,s=m=0,f=!0,Jt()}function qt(t,n){u=s,e.locations&&(d=new Yt),h=t,Jt(),p=n,f=t.beforeExpr}function Xt(){var t,i=e.onComment&&e.locations&&new Yt,r=s,a=n.indexOf("*/",s+=2);if(-1===a&&C(s-2,"Unterminated comment"),s=a+2,e.locations)for(jt.lastIndex=r;(t=jt.exec(n))&&t.index<s;)++g,m=t.index+t[0].length;e.onComment&&e.onComment(!0,n.slice(r+2,a),r,s,i,e.locations&&new Yt)}function Zt(){for(var t=s,r=e.onComment&&e.locations&&new Yt,a=n.charCodeAt(s+=2);s<i&&10!==a&&13!==a&&8232!==a&&8233!==a;)++s,a=n.charCodeAt(s);e.onComment&&e.onComment(!1,n.slice(t+2,s),t,s,r,e.locations&&new Yt)}function Jt(){for(;s<i;){var t=n.charCodeAt(s);if(32===t)++s;else if(13===t)++s,10===(r=n.charCodeAt(s))&&++s,e.locations&&(++g,m=s);else if(10===t||8232===t||8233===t)++s,e.locations&&(++g,m=s);else if(t>8&&t<14)++s;else if(47===t){var r;if(42===(r=n.charCodeAt(s+1)))Xt();else{if(47!==r)break;Zt()}}else if(160===t)++s;else{if(!(t>=5760&&Vt.test(String.fromCharCode(t))))break;++s}}}function Kt(t){switch(t){case 46:return function(){var t=n.charCodeAt(s+1);return t>=48&&t<=57?ie(!0):(++s,qt(pt))}();case 40:return++s,qt(lt);case 41:return++s,qt(ut);case 59:return++s,qt(dt);case 44:return++s,qt(ct);case 91:return++s,qt(rt);case 93:return++s,qt(at);case 123:return++s,qt(ot);case 125:return++s,qt(st);case 58:return++s,qt(ht);case 63:return++s,qt(ft);case 48:var r=n.charCodeAt(s+1);if(120===r||88===r)return function(){s+=2;var t=ne(16);return null==t&&C(l+2,"Expected hexadecimal number"),Wt(n.charCodeAt(s))&&C(s,"Identifier directly after number"),qt(I,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ie(!1);case 34:case 39:return function(t){s++;for(var r="";;){s>=i&&C(l,"Unterminated string constant");var a=n.charCodeAt(s);if(a===t)return++s,qt(T,r);if(92===a){a=n.charCodeAt(++s);var o=/^[0-7]+/.exec(n.slice(s,s+3));for(o&&(o=o[0]);o&&parseInt(o,8)>255;)o=o.slice(0,-1);if("0"===o&&(o=null),++s,o)w&&C(s-2,"Octal literal in strict mode"),r+=String.fromCharCode(parseInt(o,8)),s+=o.length-1;else switch(a){case 110:r+="\n";break;case 114:r+="\r";break;case 120:r+=String.fromCharCode(re(2));break;case 117:r+=String.fromCharCode(re(4));break;case 85:r+=String.fromCharCode(re(8));break;case 116:r+="\t";break;case 98:r+="\b";break;case 118:r+="\v";break;case 102:r+="\f";break;case 48:r+="\0";break;case 13:10===n.charCodeAt(s)&&++s;case 10:e.locations&&(m=s,++g);break;default:r+=String.fromCharCode(a)}}else 13!==a&&10!==a&&8232!==a&&8233!==a||C(l,"Unterminated string constant"),r+=String.fromCharCode(a),++s}}(t);case 47:return function(){var t=n.charCodeAt(s+1);return f?(++s,ee()):61===t?te(vt,2):te(gt,1)}();case 37:case 42:return 61===n.charCodeAt(s+1)?te(vt,2):te(Tt,1);case 124:case 38:return function(t){var e=n.charCodeAt(s+1);return e===t?te(124===t?xt:bt,2):61===e?te(vt,2):te(124===t?wt:St,1)}(t);case 94:return 61===n.charCodeAt(s+1)?te(vt,2):te(Mt,1);case 43:case 45:return function(t){var e=n.charCodeAt(s+1);return e===t?45==e&&62==n.charCodeAt(s+2)&&Gt.test(n.slice(y,s))?(s+=3,Zt(),Jt(),Qt()):te(yt,2):61===e?te(vt,2):te(Dt,1)}(t);case 60:case 62:return function(t){var e=n.charCodeAt(s+1),i=1;return e===t?(i=62===t&&62===n.charCodeAt(s+2)?3:2,61===n.charCodeAt(s+i)?te(vt,i+1):te(It,i)):33==e&&60==t&&45==n.charCodeAt(s+2)&&45==n.charCodeAt(s+3)?(s+=4,Zt(),Jt(),Qt()):(61===e&&(i=61===n.charCodeAt(s+2)?3:2),te(kt,i))}(t);case 61:case 33:return function(t){return 61===n.charCodeAt(s+1)?te(Ct,61===n.charCodeAt(s+2)?3:2):te(61===t?mt:_t,1)}(t);case 126:return te(_t,1)}return!1}function Qt(t){if(t?s=l+1:l=s,e.locations&&(c=new Yt),t)return ee();if(s>=i)return qt(E);var r=n.charCodeAt(s);if(Wt(r)||92===r)return oe();var a=Kt(r);if(!1===a){var o=String.fromCharCode(r);if("\\"===o||Bt.test(o))return oe();C(s,"Unexpected character '"+o+"'")}return a}function te(t,e){var i=n.slice(s,s+e);s+=e,qt(t,i)}function ee(){for(var t,e,r=s;;){s>=i&&C(r,"Unterminated regular expression");var a=n.charAt(s);if(Gt.test(a)&&C(r,"Unterminated regular expression"),t)t=!1;else{if("["===a)e=!0;else if("]"===a&&e)e=!1;else if("/"===a&&!e)break;t="\\"===a}++s}var o=n.slice(r,s);++s;var l=ae();l&&!/^[gmsiy]*$/.test(l)&&C(r,"Invalid regexp flag");try{var u=new RegExp(o,l)}catch(S){S instanceof SyntaxError&&C(r,S.message),C(S)}return qt(D,u)}function ne(t,e){for(var i=s,r=0,a=0,o=null==e?1/0:e;a<o;++a){var l,u=n.charCodeAt(s);if((l=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=t)break;++s,r=r*t+l}return s===i||null!=e&&s-i!==e?null:r}function ie(t){var e=s,i=!1,r=48===n.charCodeAt(s);t||null!==ne(10)||C(e,"Invalid number"),46===n.charCodeAt(s)&&(++s,ne(10),i=!0);var a=n.charCodeAt(s);69!==a&&101!==a||(43!==(a=n.charCodeAt(++s))&&45!==a||++s,null===ne(10)&&C(e,"Invalid number"),i=!0),Wt(n.charCodeAt(s))&&C(s,"Identifier directly after number");var o,l=n.slice(e,s);return i?o=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||w?C(e,"Invalid number"):o=parseInt(l,8):o=parseInt(l,10),qt(I,o)}function re(t){var e=ne(16,t);return null===e&&C(l,"Bad character escape sequence"),e}function ae(){Lt=!1;for(var t,e=!0,i=s;;){var r=n.charCodeAt(s);if(Ut(r))Lt&&(t+=n.charAt(s)),++s;else{if(92!==r)break;Lt||(t=n.slice(i,s)),Lt=!0,117!=n.charCodeAt(++s)&&C(s,"Expecting Unicode escape sequence \\uXXXX"),++s;var a=re(4),o=String.fromCharCode(a);o||C(s-1,"Invalid Unicode escape"),(e?Wt(a):Ut(a))||C(s-4,"Invalid Unicode escape"),t+=o}e=!1}return Lt?t:n.slice(i,s)}function oe(){var t=ae(),e=A;return!Lt&&Rt(t)&&(e=it[t]),qt(e,t)}function se(){v=l,y=u,_=d,Qt()}function le(t){if(w=t,s=l,e.locations)for(;s<m;)m=n.lastIndexOf("\n",m-2)+1,--g;Jt(),Qt()}function ue(){this.type=null,this.start=l,this.end=null}function ce(){this.start=c,this.end=null,null!==r&&(this.source=r)}function de(){var t=new ue;return e.locations&&(t.loc=new ce),e.directSourceFile&&(t.sourceFile=e.directSourceFile),e.ranges&&(t.range=[l,0]),t}function he(t){var n=new ue;return n.start=t.start,e.locations&&(n.loc=new ce,n.loc.start=t.loc.start),e.ranges&&(n.range=[t.range[0],0]),n}function pe(t,n){return t.type=n,t.end=y,e.locations&&(t.loc.end=_),e.ranges&&(t.range[1]=y),t}function fe(t){return e.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function ge(t){if(h===t)return se(),!0}function me(){return!e.strictSemicolons&&(h===E||h===st||Gt.test(n.slice(y,l)))}function ve(){ge(dt)||me()||_e()}function ye(t){h===t?se():_e()}function _e(){C(l,"Unexpected token")}function xe(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&C(t.start,"Assigning to rvalue"),w&&"Identifier"===t.type&&zt(t.name)&&C(t.start,"Assigning to "+t.name+" in strict mode")}var be={kind:"loop"},we={kind:"switch"};function Me(){(h===gt||h===vt&&"/="==p)&&Qt(!0);var t=h,i=de();switch(t){case L:case O:se();var r=t===L;ge(dt)||me()?i.label=null:h!==A?_e():(i.label=Ve(),ve());for(var a=0;a<b.length;++a){var o=b[a];if(null==i.label||o.name===i.label.name){if(null!=o.kind&&(r||"loop"===o.kind))break;if(i.label&&r)break}}return a===b.length&&C(i.start,"Unsyntactic "+t.keyword),pe(i,r?"BreakStatement":"ContinueStatement");case z:return se(),ve(),pe(i,"DebuggerStatement");case V:return se(),b.push(be),i.body=Me(),b.pop(),ye(X),i.test=Se(),ve(),pe(i,"DoWhileStatement");case H:if(se(),b.push(be),ye(lt),h===dt)return ke(i,null);if(h===q){var s=de();return se(),De(s,!0),pe(s,"VariableDeclaration"),1===s.declarations.length&&ge(nt)?Ie(i,s):ke(i,s)}return s=Te(!1,!0),ge(nt)?(xe(s),Ie(i,s)):ke(i,s);case G:return se(),ze(i,!0);case j:return se(),i.test=Se(),i.consequent=Me(),i.alternate=ge(F)?Me():null,pe(i,"IfStatement");case W:return x||e.allowReturnOutsideFunction||C(l,"'return' outside of function"),se(),ge(dt)||me()?i.argument=null:(i.argument=Te(),ve()),pe(i,"ReturnStatement");case U:se(),i.discriminant=Se(),i.cases=[],ye(ot),b.push(we);for(var u,c;h!=st;)if(h===P||h===R){var d=h===P;u&&pe(u,"SwitchCase"),i.cases.push(u=de()),u.consequent=[],se(),d?u.test=Te():(c&&C(v,"Multiple default clauses"),c=!0,u.test=null),ye(ht)}else u||_e(),u.consequent.push(Me());return u&&pe(u,"SwitchCase"),se(),b.pop(),pe(i,"SwitchStatement");case Y:return se(),Gt.test(n.slice(y,l))&&C(y,"Illegal newline after throw"),i.argument=Te(),ve(),pe(i,"ThrowStatement");case $:if(se(),i.block=Ce(),i.handler=null,h===N){var f=de();se(),ye(lt),f.param=Ve(),w&&zt(f.param.name)&&C(f.param.start,"Binding "+f.param.name+" in strict mode"),ye(ut),f.guard=null,f.body=Ce(),i.handler=pe(f,"CatchClause")}return i.guardedHandlers=k,i.finalizer=ge(B)?Ce():null,i.handler||i.finalizer||C(i.start,"Missing catch or finally clause"),pe(i,"TryStatement");case q:return se(),De(i),ve(),pe(i,"VariableDeclaration");case X:return se(),i.test=Se(),b.push(be),i.body=Me(),b.pop(),pe(i,"WhileStatement");case Z:return w&&C(l,"'with' in strict mode"),se(),i.object=Se(),i.body=Me(),pe(i,"WithStatement");case ot:return Ce();case dt:return se(),pe(i,"EmptyStatement");default:var g=p,m=Te();if(t===A&&"Identifier"===m.type&&ge(ht)){for(a=0;a<b.length;++a)b[a].name===g&&C(m.start,"Label '"+g+"' is already declared");var _=h.isLoop?"loop":h===U?"switch":null;return b.push({name:g,kind:_}),i.body=Me(),b.pop(),i.label=m,pe(i,"LabeledStatement")}return i.expression=m,ve(),pe(i,"ExpressionStatement")}}function Se(){ye(lt);var t=Te();return ye(ut),t}function Ce(t){var e,n=de(),i=!0,r=!1;for(n.body=[],ye(ot);!ge(st);){var a=Me();n.body.push(a),i&&t&&fe(a)&&(e=r,le(r=!0)),i=!1}return r&&!e&&le(!1),pe(n,"BlockStatement")}function ke(t,e){return t.init=e,ye(dt),t.test=h===dt?null:Te(),ye(dt),t.update=h===ut?null:Te(),ye(ut),t.body=Me(),b.pop(),pe(t,"ForStatement")}function Ie(t,e){return t.left=e,t.right=Te(),ye(ut),t.body=Me(),b.pop(),pe(t,"ForInStatement")}function De(t,e){for(t.declarations=[],t.kind="var";;){var n=de();if(n.id=Ve(),w&&zt(n.id.name)&&C(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=ge(mt)?Te(!0,e):null,t.declarations.push(pe(n,"VariableDeclarator")),!ge(ct))break}return t}function Te(t,e){var n=Ae(e);if(!t&&h===ct){var i=he(n);for(i.expressions=[n];ge(ct);)i.expressions.push(Ae(e));return pe(i,"SequenceExpression")}return n}function Ae(t){var e=function(t){var e=function(t){return Ee(Le(),-1,t)}(t);if(ge(ft)){var n=he(e);return n.test=e,n.consequent=Te(!0),ye(ht),n.alternate=Te(!0,t),pe(n,"ConditionalExpression")}return e}(t);if(h.isAssign){var n=he(e);return n.operator=p,n.left=e,se(),n.right=Ae(t),xe(e),pe(n,"AssignmentExpression")}return e}function Ee(t,e,n){var i=h.binop;if(null!=i&&(!n||h!==nt)&&i>e){var r=he(t);r.left=t,r.operator=p;var a=h;return se(),r.right=Ee(Le(),i,n),Ee(pe(r,a===xt||a===bt?"LogicalExpression":"BinaryExpression"),e,n)}return t}function Le(){if(h.prefix){var t=de(),e=h.isUpdate;return t.operator=p,t.prefix=!0,f=!0,se(),t.argument=Le(),e?xe(t.argument):w&&"delete"===t.operator&&"Identifier"===t.argument.type&&C(t.start,"Deleting local variable in strict mode"),pe(t,e?"UpdateExpression":"UnaryExpression")}for(var n=Pe(Ne());h.postfix&&!me();)(t=he(n)).operator=p,t.prefix=!1,t.argument=n,xe(n),se(),n=pe(t,"UpdateExpression");return n}function Pe(t,e){var n;return ge(pt)?((n=he(t)).object=t,n.property=Ve(!0),n.computed=!1,Pe(pe(n,"MemberExpression"),e)):ge(rt)?((n=he(t)).object=t,n.property=Te(),n.computed=!0,ye(at),Pe(pe(n,"MemberExpression"),e)):!e&&ge(lt)?((n=he(t)).callee=t,n.arguments=Re(ut,!1),Pe(pe(n,"CallExpression"),e)):t}function Ne(){switch(h){case K:var t=de();return se(),pe(t,"ThisExpression");case A:return Ve();case I:case T:case D:return(t=de()).value=p,t.raw=n.slice(l,u),se(),pe(t,"Literal");case Q:case tt:case et:return(t=de()).value=h.atomValue,t.raw=h.keyword,se(),pe(t,"Literal");case lt:var i=c,r=l;se();var a=Te();return a.start=r,a.end=u,e.locations&&(a.loc.start=i,a.loc.end=d),e.ranges&&(a.range=[r,u]),ye(ut),a;case rt:return t=de(),se(),t.elements=Re(at,!0,!0),pe(t,"ArrayExpression");case ot:return function(){var t=de(),n=!0,i=!1;for(t.properties=[],se();!ge(st);){if(n)n=!1;else if(ye(ct),e.allowTrailingCommas&&ge(st))break;var r,a={key:Oe()},o=!1;if(ge(ht)?(a.value=Te(!0),r=a.kind="init"):e.ecmaVersion>=5&&"Identifier"===a.key.type&&("get"===a.key.name||"set"===a.key.name)?(o=i=!0,r=a.kind=a.key.name,a.key=Oe(),h!==lt&&_e(),a.value=ze(de(),!1)):_e(),"Identifier"===a.key.type&&(w||i))for(var s=0;s<t.properties.length;++s){var l=t.properties[s];if(l.key.name===a.key.name){var u=r==l.kind||o&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);u&&!w&&"init"===r&&"init"===l.kind&&(u=!1),u&&C(a.key.start,"Redefinition of property")}}t.properties.push(a)}return pe(t,"ObjectExpression")}();case G:return t=de(),se(),ze(t,!1);case J:return function(){var t=de();return se(),t.callee=Pe(Ne(),!0),ge(lt)?t.arguments=Re(ut,!1):t.arguments=k,pe(t,"NewExpression")}();default:_e()}}function Oe(){return h===I||h===T?Ne():Ve(!0)}function ze(t,e){h===A?t.id=Ve():e?_e():t.id=null,t.params=[];var n=!0;for(ye(lt);!ge(ut);)n?n=!1:ye(ct),t.params.push(Ve());var i=x,r=b;if(x=!0,b=[],t.body=Ce(!0),x=i,b=r,w||t.body.body.length&&fe(t.body.body[0]))for(var a=t.id?-1:0;a<t.params.length;++a){var o=a<0?t.id:t.params[a];if((Ot(o.name)||zt(o.name))&&C(o.start,"Defining '"+o.name+"' in strict mode"),a>=0)for(var s=0;s<a;++s)o.name===t.params[s].name&&C(o.start,"Argument name clash in strict mode")}return pe(t,e?"FunctionDeclaration":"FunctionExpression")}function Re(t,n,i){for(var r=[],a=!0;!ge(t);){if(a)a=!1;else if(ye(ct),n&&e.allowTrailingCommas&&ge(t))break;i&&h===ct?r.push(null):r.push(Te(!0))}return r}function Ve(t){var i=de();return t&&"everywhere"==e.forbidReserved&&(t=!1),h===A?(!t&&(e.forbidReserved&&(3===e.ecmaVersion?Pt:Nt)(p)||w&&Ot(p))&&-1==n.slice(l,u).indexOf("\\")&&C(l,"The keyword '"+p+"' is reserved"),i.name=p):t&&h.keyword?i.name=h.keyword:_e(),f=!1,se(),pe(i,"Identifier")}},"object"==typeof a&&"object"==typeof s?u(a):"function"==typeof e&&e.amd?e(["exports"],u):u(l.acorn||(l.acorn={})),d.version||(d=null));var g={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},m={"-":"__negate","+":"__self"},v=r.each(["add","subtract","multiply","divide","modulo","equals","negate"],(function(t){this["__"+t]="#"+t}),{__self:function(){return this}});function y(t,e,n){var i=g[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function _(t,e){var n=m[t];if(e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function x(e,r){if(!e)return"";var a=[];function o(t){for(var e=0,n=a.length;e<n;e++){var i=a[e];if(i[0]>=t)break;t+=i[1]}return t}function s(t){return e.substring(o(t.range[0]),o(t.range[1]))}function l(t,n){for(var i=o(t.range[0]),r=o(t.range[1]),s=0,l=a.length-1;l>=0;l--)if(i>a[l][0]){s=l+1;break}a.splice(s,0,[i,n.length-r+i]),e=e.substring(0,i)+n+e.substring(r)}function u(t,n){switch(t.type){case"UnaryExpression":if(t.operator in m&&"Literal"!==t.argument.type){var i=s(t.argument);l(t,'$__("'+t.operator+'", '+i+")")}break;case"BinaryExpression":if(t.operator in g&&"Literal"!==t.left.type){var r=s(t.left),a=s(t.right),u=function(t,n){return e.substring(o(t.range[1]),o(n.range[0]))}(t.left,t.right),c=t.operator;l(t,"__$__("+r+","+u.replace(new RegExp("\\"+c),'"'+c+'"')+", "+a+")")}break;case"UpdateExpression":case"AssignmentExpression":var d=n&&n.type;if(!("ForStatement"===d||"BinaryExpression"===d&&/^[=!<>]/.test(n.operator)||"MemberExpression"===d&&n.computed))if("UpdateExpression"===t.type){var h=(i=s(t.argument))+" = "+(p="__$__("+i+', "'+t.operator[0]+'", 1)');t.prefix?h="("+h+")":"AssignmentExpression"!==d&&"VariableDeclarator"!==d&&"BinaryExpression"!==d||(s(n.left||n.id)===i&&(h=p),h=i+"; "+h),l(t,h)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){r=s(t.left),a=s(t.right);var p=r+" = __$__("+r+', "'+t.operator[0]+'", '+a+")";l(t,/^\(.*\)$/.test(s(t))?"("+p+")":p)}}}var c,d=(r=r||{}).url||"",h=r.sourceMaps,f=r.paperFeatures||{},v=r.source||e,y=r.offset||0,_=ot.agent,x=_.versionNumber,b=!1,w=/\r\n|\n|\r/gm;if(h&&(_.chrome&&x>=30||_.webkit&&x>=537.76||_.firefox&&x>=23||_.node)){if(_.node)y-=2;else if(n&&d&&!n.location.href.indexOf(d)){var M=i.getElementsByTagName("html")[0].innerHTML;y=M.substr(0,M.indexOf(e)+1).match(w).length+1}var S=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;(t>>=5)&&(n|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return e}((b=y>0&&!(_.chrome&&x>=36||_.safari&&x>=600||_.firefox&&x>=40||_.node))?0:y)+"A"];S.length=(e.match(w)||[]).length+1+(b?y:0),c={version:3,file:d,names:[],mappings:S.join(";AACA"),sourceRoot:"",sources:[d],sourcesContent:[v]}}return!1===f.operatorOverloading&&!1===f.moduleExports||function t(e,n,i){if(e){for(var r in e)if("range"!==r&&"loc"!==r){var a=e[r];if(Array.isArray(a))for(var o=0,c=a.length;o<c;o++)t(a[o],e,i);else a&&"object"==typeof a&&t(a,e,i)}!1!==i.operatorOverloading&&u(e,n),!1!==i.moduleExports&&function(t){switch(t.type){case"ExportDefaultDeclaration":l({range:[t.start,t.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var e=t.declaration,n=t.specifiers;if(e){var i=e.declarations;i&&(i.forEach((function(t){l(t,"module.exports."+s(t))})),l({range:[t.start,e.start+e.kind.length]},""))}else if(n){var r=n.map((function(t){var e=s(t);return"module.exports."+e+" = "+e+"; "})).join("");r&&l(t,r)}}}(e)}}(p(e,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,f),c&&(b&&(e=new Array(y+1).join("\n")+e),/^(inline|both)$/.test(h)&&(e+="\n//# sourceMappingURL=data:application/json;base64,"+t.btoa(unescape(encodeURIComponent(JSON.stringify(c))))),e+="\n//# sourceURL="+(d||"paperscript")),{url:d,source:v,code:e,map:c}}function b(t,e,n){ot=e;var a,o=e.getView(),s=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new Q:null,l=s?s._events:[],u=["onFrame","onResize"].concat(l),c=[],d=[],p="object"==typeof t?t:x(t,n);function f(e,n){for(var i in e)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(t)||(c.push(i),d.push(e[i]))}t=p.code,f({__$__:y,$__:_,paper:e,tool:s},!0),f(e),t="var module = { exports: {} }; "+t,(b=r.each(u,(function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(c.push(e),this.push("module.exports."+e+" = "+e+";"))}),[]).join("\n"))&&(t+="\n"+b),t+="\nreturn module.exports;";var g=ot.agent;if(i&&(g.chrome||g.firefox&&g.versionNumber<40)){var m=i.createElement("script"),v=i.head||i.getElementsByTagName("head")[0];g.firefox&&(t="\n"+t),m.appendChild(i.createTextNode("document.__paperscript__ = function("+c+") {"+t+"\n}")),v.appendChild(m),a=i.__paperscript__,delete i.__paperscript__,v.removeChild(m)}else a=Function(c,t);var b,w=(b=a&&a.apply(e,d))||{};return r.each(l,(function(t){var e=w[t];e&&(s[t]=e)})),o&&(w.onResize&&o.setOnResize(w.onResize),o.emit("resize",{size:o.size,delta:new h}),w.onFrame&&o.setOnFrame(w.onFrame),o.requestUpdate()),b}function w(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==o.getAttribute(t,"ignore")){var e=o.getAttribute(t,"canvas"),n=i.getElementById(e),r=t.src||t.getAttribute("data-src"),a=o.hasAttribute(t,"async"),s="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var l=o.get(n.getAttribute(s))||(new o).setup(n);return n.setAttribute(s,l._id),r?et({url:r,async:a,mimeType:"text/plain",onLoad:function(t){b(t,l,r)}}):b(t.innerHTML,l,t.baseURI),t.setAttribute("data-paper-ignore","true"),l}}function M(){r.each(i&&i.getElementsByTagName("script"),w)}return h.inject(v),f.inject(v),B.inject(v),n&&("complete"===i.readyState?setTimeout(M):U.add(n,{load:M})),{compile:x,execute:b,load:function(t){return t?w(t):M()},parse:p,calculateBinary:y,calculateUnary:_}}.call(this);var ot=new(o.inject(r.exports,{Base:r,Numerical:c,Key:Z,DomEvent:U,DomElement:W,document:i,window:n,Symbol:I,PlacedSymbol:k}));return ot.agent.node&&lT(ot),"function"==typeof e&&e.amd?e("paper",ot):aT&&(aT.exports=ot),ot}.call(ll,"object"==typeof self?self:null);var uT=sT.exports;const cT=e({name:"CanvasType",components:{},props:{item:{type:Object,required:!0},showArrows:{type:Boolean,default:!1}},emits:["autoManualToggle","objectClicked","changeValue","updateWeldModel"],setup(t,{emit:e}){const n=D((()=>{var e;return hs.getEntryRange(null==(e=t.item)?void 0:e.t3Entry)})),i=D((()=>{var e;if(!t.item.t3Entry)return"";const n=hs.getEntryRange(t.item.t3Entry);if("value"===t.item.settings.t3EntryDisplayField||"control"===t.item.settings.t3EntryDisplayField){if(void 0!==t.item.t3Entry.value&&t.item.t3Entry.range>100){const i=null==(e=n.options)?void 0:e.find((e=>1e3*e.value===t.item.t3Entry.value));return null==i?void 0:i.name}if(void 0!==t.item.t3Entry.value&&1===t.item.t3Entry.digital_analog)return t.item.t3Entry.value/1e3+" "+n.unit;if(void 0!==t.item.t3Entry.control&&0===t.item.t3Entry.digital_analog)return t.item.t3Entry.control?n.on:n.off}return t.item.t3Entry[t.item.settings.t3EntryDisplayField]||""})),a=D((()=>{const e=t.item;return["Gauge","Dial"].includes(e.type)?"Gauge"===e.type?e.settings.colors.map((t=>[t.offset/100,t.color])):e.settings.colors.map(((t,n)=>({from:n?e.settings.colors[n-1].offset:0,to:t.offset,color:[t.color]}))):null}));const o=r(null);const s=r(null);uT.settings.insertItems=!1;return I((()=>{uT.setup(s.value),uT.view.onResize=function(t){},new uT.Path.Circle({center:[80,50],radius:30,fillColor:"red"}),uT.view.draw()})),{range:n,dispalyText:i,processedColors:a,changeValue:function(n){var i,r;if(0===t.item.t3Entry.auto_manual)return;let a=!1,o=t.item.t3Entry.value;const s=hs.getEntryRange(null==(i=t.item)?void 0:i.t3Entry);if(void 0!==t.item.t3Entry.value&&t.item.t3Entry.range>100){const e=null==(r=s.options)?void 0:r.filter((t=>1===t.status)),i=e.findIndex((e=>1e3*e.value===t.item.t3Entry.value));if("decrease"===n&&i<e.length-1)o=1e3*e[i+1].value;else{if(!("increase"===n&&i>0))return;o=1e3*e[i-1].value}}else if(void 0!==t.item.t3Entry.value&&1===t.item.t3Entry.digital_analog)o="increase"===n?t.item.t3Entry.value+1e3:t.item.t3Entry.value-1e3;else if(void 0!==t.item.t3Entry.control&&0===t.item.t3Entry.digital_analog)if(a=!0,"decrease"===n&&0===t.item.t3Entry.control)o=1;else{if("increase"!==n||1!==t.item.t3Entry.control)return;o=0}e("changeValue",t.item,o,a)},refresh:function(){var e;o.value&&"Duct"===(null==(e=t.item)?void 0:e.type)&&o.value.refresh()},objectRef:o,updateWeldModel:(t,n)=>{e("updateWeldModel",t,n)},canvas:s}}}),dT=()=>{b((t=>({18505854:t.item.width+"px","5ca9f8d2":t.item.height+"px",df311032:t.item.settings.titleColor,cc8d58bc:t.item.settings.bgColor,b09dca8c:t.item.settings.textColor,"7a75d9be":t.item.settings.fontSize+"px","45e4a5c5":t.item.settings.justifyContent})))},hT=cT.setup;cT.setup=hT?(t,e)=>(dT(),hT(t,e)):dT;const pT={ref:"canvasContainer",class:"canvas-container"},fT=["id"];var gT=il({name:"CanvasShape",props:{item:{type:Object,required:!0}},emits:["updateWeldModel"],setup(t,{emit:e}){const n=r(null),i=r(null),o=r(null),s=()=>{var e;const n=document.getElementById(`canvas${t.item.id}`);o.value=new uT.Project(n),null==(e=null==o?void 0:o.value)||e.clear(),uT.settings.insertItems=!1,l()},l=()=>{const e=i.value;if(e){const{width:n,height:i}=t.item;e.width=n,e.height=i,e.style.width=`${n}px`,e.style.height=`${i}px`,o.value.view.viewSize=new uT.Size(e.width,e.height),A()}},u=(t,e,n,i,r)=>{const{settings:a,rotate:o}=e,s="weld"==t?8:4,l=new uT.Path.Rectangle({point:r,size:[n-s,i-s],strokeColor:a.bgColor||"#000",strokeWidth:2,fillColor:a.fillColor});return"weld"==t&&o&&l.rotate(o),l},c=(t,e,n,i,r)=>{const{settings:a,rotate:o}=e,s="weld"==t?8:4,l=n/2+r[0],u=i/2+r[1];return new uT.Path.Circle({center:[l,u],radius:Math.min(n-s,i-s)/2,strokeColor:a.bgColor||"#000",strokeWidth:2,fillColor:a.fillColor})},d=(t,e,n,i,r)=>{const{settings:a,rotate:o}=e,s=`<svg\n            xmlns="http://www.w3.org/2000/svg"\n            viewBox="0 0 32 32"\n            height="${i}"\n            width="${n}"\n            version="1.1">\n            <path d="M 1.6 5.4 L 25.6 5.4 L 30.4 15 L 25.6 24.6 L 1.6 24.6 L 6.4 15 Z" fill="${a.fillColor}" stroke="${a.bgColor||"#000"}"\n              stroke-width="1" stroke-miterlimit="10"></path>\n          </svg>\n          `;return p(s)},h=(t,e,n,i,r)=>{const{settings:a,rotate:o}=e,s=`<svg\n            xmlns="http://www.w3.org/2000/svg"\n            viewBox="0 0 32 32"\n            height="${i}"\n            width="${n}"\n            version="1.1">\n            <path d="M 6.4 5.4 L 25.6 5.4 L 30.4 15 L 25.6 24.6 L 6.4 24.6 L 1.6 15 Z" fill="${a.fillColor}" stroke="${a.bgColor||"#000"}"\n              stroke-width="1" stroke-miterlimit="10">\n            </path>\n         </svg>\n        `;return p(s)},p=t=>uT.project.importSVG(t,{applyMatrix:!1}),f=r(t.item.width),g=r(t.item.height);r(t.item.settings.fillColor);const m=()=>({widthScale:t.item.width/f.value,heightScale:t.item.height/g.value,trsXScale:t.item.translate[0]/f.value,trsYScale:t.item.translate[1]/g.value}),v=r(0),y=r(0),_=(t,e)=>{let{width:n,height:i,cat:r,type:a,translate:o,rotate:s,overlap:l}=e,[u,c]=o;const{isStartOverlap:d,isEndOverlap:h}=l,p=Math.min(...t.map((t=>t.translate[0]))),f=Math.min(...t.map((t=>t.translate[1]))),g=m();let v=u-p+4,y=c-f+4;n*=g.widthScale,i*=g.heightScale,u*=g.widthScale,c*=g.heightScale,u-=p*g.widthScale,c-=f*g.heightScale,v=u+4,y=c+4;return{pathPoints:((t,e)=>{const r=[],a=(()=>{let t=25,e=25,i=0;return n>50&&(n<80?t=e=n/2:(t=40,e=40,i=n-80)),{startW:t,middle:i,endW:e}})(),o=[t,e];r.push(o);const s=[t+a.startW,e+i/2],l=[t,e+i];d||r.push(s),r.push(l);const u=[t+a.startW+a.middle,e+i],c=[t+n,e+i];h?r.push(c):r.push(u);const p=[t+n,e+i/2];h||r.push(p);const f=[t+n,e],g=[t+a.startW+a.middle,e];return h?r.push(f):r.push(g),r.push(o),r})(v,y),width:n,height:i,trsx:v,trsy:y}},x=t=>{const e=null==t?void 0:t.map(((e,n)=>{let i=null;const r=((t,e)=>{v.value=Math.min(...t.map((t=>t.translate[0]))),y.value=Math.min(...t.map((t=>t.translate[1])));const n=m();let{width:i,height:r,cat:a,type:o,translate:s}=e,[l,u]=s,c=l-v.value+4,d=u-y.value+4;return i*=n.widthScale,r*=n.heightScale,l*=n.widthScale,u*=n.heightScale,l-=v.value*n.widthScale,u-=y.value*n.heightScale,c=l+4,d=u+4,{width:i,height:r,trsx:c,trsy:d}})(t,e);switch(e.type){case"G_Rectangle":i=u("weld",e,r.width,r.height,[r.trsx,r.trsy]);break;case"G_Circle":i=c("weld",e,r.width,r.height,[r.trsx,r.trsy]);break;case"G_Step":i=d(0,e,r.width,r.height);break;case"G_Hexagon":i=h(0,e,r.width,r.height);break;case"Duct":i=((t,e,n,i,r,a)=>{const{settings:o,rotate:s}=e,l=new uT.Path({segments:n,closed:!0,strokeColor:"#000",strokeWidth:2,fillColor:"#659dc5"});return s&&l.rotate(s),l})(0,e,_(t,e).pathPoints)}return{type:e.type,pathItem:i,item:e,newPos:{width:r.width,height:r.height,trsx:r.trsx-4,trsy:r.trsy-4}}}));return e},b=t=>{let e=[];return t instanceof uT.Path||t instanceof uT.CompoundPath||t instanceof uT.Path.Circle?e.push(t):t instanceof uT.Group?t.children.forEach((t=>{e=e.concat(b(t))})):(null==t?void 0:t.children)&&(null==t||t.children.forEach((t=>{e=e.concat(b(t))}))),e},w=(t,e,n,i,r)=>{const a=t.startPoint,o=t.endPoint,s=t.path;function l(t){null!==i&&(i.segments[n].point=a.position,i.segments[n+1].point=o.position,n+2==i.segments.length&&(i.segments[0].point=o.position),0==n&&(i.segments[i.segments.length-1].point=a.position))}function u(){s.segments[0].point=a.position,s.segments[1].point=o.position}function c(e){if(null===r)return;const{crossStartIndex:n,crossEndIndex:i}=t.crossPathIndex,{crossedStartIndex:s,crossedEndIndex:l}=t.crossedPathIndex;r.forEach(((t,e)=>{const{crossPath:r,crossLinePoints:u}=t;null!==r.segments[n]&&void 0!==r.segments[n]&&(r.segments[n].point=a.position),null!==r.segments[i]&&void 0!==r.segments[i]&&(r.segments[i].point=o.position),r.segments[r.segments.length-1].point=r.segments[0].point,null!==u[s]&&void 0!==u[s]&&(u[s].startPoint.position=a.position,u[s].path.segments[0].point=a.position),null!==u[l]&&void 0!==u[l]&&(u[l].endPoint.position=o.position,u[l].path.segments[1].point=o.position),null!=u[s-1]&&null!=u[s-1]&&(u[s-1].endPoint.position=a.position,u[s-1].path.segments[1].point=a.position),-1!==i&&null!=u[l+1]&&null!=u[l+1]&&(u[l+1].startPoint.position=o.position),null!==u[u.length-1]&&void 0!==u[u.length-1]&&(u[u.length-1].endPoint.position=u[0].startPoint.position)}))}a.onMouseDrag=function(t){this.position=this.position.add(t.delta),u(),l((this.position.x,this.position.y)),function(){if(n>0){const t=e[n-1];t.endPoint.position=a.position,t.path.segments[1].point=a.position}else{const t=e[e.length-1];t.endPoint.position=a.position,t.path.segments[1].point=a.position}}(),c()},o.onMouseDrag=function(t){this.position=this.position.add(t.delta),u(),l((this.position.x,this.position.y)),function(){if(n===e.length-1){const t=e[0];t.startPoint.position=o.position,t.path.segments[0].point=o.position}else{const t=e[n+1];t.startPoint.position=o.position,t.path.segments[0].point=o.position}}(),c()},s.onMouseDrag=function(t){const i=t.delta;a.position=a.position.add(i),o.position=o.position.add(i),u(),l((a.position.x,a.position.y,o.position.x,o.position.y)),function(t){if(n>0){const i=e[n-1];i.endPoint.position=t,i.path.segments[1].point=t}else{const n=e[e.length-1];n.endPoint.position=t,n.path.segments[1].point=t}}(a.position),function(t){if(n===e.length-1){const n=e[0];n.startPoint.position=t,n.path.segments[0].point=t}else{const i=e[n+1];i.startPoint.position=t,i.path.segments[0].point=t}}(o.position),c()}},M=(t,e,n,i,r,a)=>{function o(t){null!==r&&(r.segments[n].point=l.position,r.segments[n+1].point=u.position,n+2==r.segments.length&&(r.segments[0].point=u.position),0==n&&(r.segments[r.segments.length-1].point=l.position))}function s(){c.segments[0].point=l.position,c.segments[1].point=u.position}const l=t.startPoint,u=t.endPoint,c=t.path;l.onMouseDrag=function(t){this.position=this.position.add(t.delta),s(),o((this.position.x,this.position.y)),function(){if(n>0){const t=e[n-1];t.endPoint.position=l.position,t.path.segments[1].point=l.position}else{const t=e[e.length-1];t.endPoint.position=l.position,t.path.segments[1].point=l.position}}()},u.onMouseDrag=function(t){this.position=this.position.add(t.delta),s(),o((this.position.x,this.position.y)),function(){if(n===e.length-1){const t=e[0];t.startPoint.position=u.position,t.path.segments[0].point=u.position}else{const t=e[n+1];t.startPoint.position=u.position,t.path.segments[0].point=u.position}}()},c.onMouseDrag=function(t){const i=t.delta;l.position=l.position.add(i),u.position=u.position.add(i),s(),o((l.position.x,l.position.y,u.position.x,u.position.y)),function(t){if(n>0){const i=e[n-1];i.endPoint.position=t,i.path.segments[1].point=t}else{const n=e[e.length-1];n.endPoint.position=t,n.path.segments[1].point=t}}(l.position),function(t){if(n===e.length-1){const n=e[0];n.startPoint.position=t,n.path.segments[0].point=t}else{const i=e[n+1];i.startPoint.position=t,i.path.segments[0].point=t}}(u.position)},r.onMouseDrag=function(t){const n=t.delta;r.position.x+=n.x,e.map(((t,e)=>{t.startPoint.position.x+=n.x,t.endPoint.position.x+=n.x,t.path.segments[0].point.x=t.startPoint.position.x,t.path.segments[1].point.x=t.endPoint.position.x;const{weldStartIndex:r,weldEndIndex:o}=t.weldPathIndex,{weldedStartIndex:s,weldedEndIndex:l}=t.weldedPathIndex;null!==i.segments[r]&&void 0!==i.segments[r]&&(i.segments[r].point=t.startPoint.position),null!==i.segments[o]&&void 0!==i.segments[o]&&(i.segments[o].point=t.endPoint.position),null!==a[s]&&void 0!==a[s]&&(a[s].startPoint.position=t.startPoint.position,a[s].path.segments[0].point=t.startPoint.position),null!==a[l]&&void 0!==a[l]&&(a[l].endPoint.position=t.endPoint.position,a[l].path.segments[1].point=t.endPoint.position)}))}},S=(t,e)=>{if(!(null!==t&&null!=t&&t.length>0))return;const n=new uT.Path({segments:t,closed:!0,fillColor:"#659dc5"}),i=(t=>{let e=[];return t.slice(0,-1).map(((n,i)=>{const r=n,a=t[i+1],o=new uT.Path.Circle({center:r,radius:4,fillColor:"#4af"}),s=new uT.Path.Circle({center:a,radius:4,fillColor:"#4af"}),l=new uT.Path.Line({from:r,to:a,strokeColor:"#000",strokeWidth:2,fillColor:"#f36dc5"});e.push({name:`Path Line ${i+1}`,path:l,startPoint:o,endPoint:s})})),e})(t),r=e.map(((t,e)=>{const r=new uT.Path({segments:t.pts,closed:!0,fillColor:"#659dc5"}),a=(t=>{let e=[];return t.slice(0,-1).map(((n,i)=>{const r=n,a=t[i+1],o=new uT.Path.Circle({center:r,radius:4,fillColor:"#4af"}),s=new uT.Path.Circle({center:a,radius:4,fillColor:"#4af"}),l=new uT.Path.Line({from:r,to:a,strokeColor:"#000",strokeWidth:2,fillColor:"green"});e.push({name:`Cross Path Line ${i+1}`,path:l,startPoint:o,endPoint:s})})),e})(t.pts);return((t,e,n,i)=>{t.map(((t,i)=>{const r=t.startPoint,a=t.endPoint,o=n.segments.findIndex((t=>t.point.x.toFixed(4)===r.position.x.toFixed(4)&&t.point.y.toFixed(4)===r.position.y.toFixed(4))),s=n.segments.findIndex((t=>t.point.x.toFixed(4)===a.position.x.toFixed(4)&&t.point.y.toFixed(4)===a.position.y.toFixed(4))),l=e.findIndex((t=>t.startPoint.position.x.toFixed(4)===r.position.x.toFixed(4)&&t.startPoint.position.y.toFixed(4)===r.position.y.toFixed(4))),u=e.findIndex((t=>t.endPoint.position.x.toFixed(4)===a.position.x.toFixed(4)&&t.endPoint.position.y.toFixed(4)===a.position.y.toFixed(4)));t.weldPathIndex={weldStartIndex:o,weldEndIndex:s},t.weldedPathIndex={weldedStartIndex:l,weldedEndIndex:u}})),e.map(((e,n)=>{const r=e.startPoint,a=e.endPoint,o=i.segments.findIndex((t=>t.point.x.toFixed(4)===r.position.x.toFixed(4)&&t.point.y.toFixed(4)===r.position.y.toFixed(4))),s=i.segments.findIndex((t=>t.point.x.toFixed(4)===a.position.x.toFixed(4)&&t.point.y.toFixed(4)===a.position.y.toFixed(4))),l=t.findIndex((t=>t.startPoint.position.x.toFixed(4)===r.position.x.toFixed(4)&&t.startPoint.position.y.toFixed(4)===r.position.y.toFixed(4))),u=t.findIndex((t=>t.endPoint.position.x.toFixed(4)===a.position.x.toFixed(4)&&t.endPoint.position.y.toFixed(4)===a.position.y.toFixed(4)));e.crossPathIndex={crossStartIndex:o,crossEndIndex:s},e.crossedPathIndex={crossedStartIndex:l,crossedEndIndex:u}}))})(a,i,n,r),a.map(((t,e)=>{M(t,a,e,n,r,i)})),{crossPath:r,crossLinePoints:a}}));i.map(((t,e)=>{w(t,i,e,n,r)})),o.value.activeLayer.addChild(n),r.map(((t,e)=>{var n,i;null==(i=null==(n=null==o?void 0:o.value)?void 0:n.activeLayer)||i.addChild(t.crossPath)})),i.map(((t,e)=>{var n,i,r,a,s,l;null==(i=null==(n=null==o?void 0:o.value)?void 0:n.activeLayer)||i.addChild(t.path),null==(a=null==(r=null==o?void 0:o.value)?void 0:r.activeLayer)||a.addChild(t.startPoint),null==(l=null==(s=null==o?void 0:o.value)?void 0:s.activeLayer)||l.addChild(t.endPoint)}))},C=()=>{var n;const{weldItems:i}=t.item,r=x(i);e("updateWeldModel",t.item,r),f.value=t.item.width,g.value=t.item.height,v.value=Math.min(...t.item.weldItems.map((t=>t.translate[0]))),y.value=Math.min(...t.item.weldItems.map((t=>t.translate[1])));const a=(t=>t.flatMap((t=>{const e=b(t.pathItem).flatMap((t=>t.segments.map((t=>t.point)))).map((t=>new uT.Point(t)));return e.push(e[0]),{type:t.type,points:e}})))(r),s=(t=>{let e=-1/0,n=-1/0;for(const i of t){const t=Math.min(...i.points.map((t=>null==t?void 0:t.x))),r=Math.min(...i.points.map((t=>null==t?void 0:t.y)));if(!(t>e||r>n))return!0;e=Math.max(...i.points.map((t=>null==t?void 0:t.x))),n=Math.max(...i.points.map((t=>null==t?void 0:t.y)))}return!1})(a);if(!s)return void r.map(((t,e)=>{o.value.activeLayer.addChild(t.pathItem)}));const l=(t=>t.map(((t,e)=>new uT.Path({segments:t.points,closed:!0,strokeColor:"#000",fillColor:"#f36dc5"}))))(a),u=D("union",l),c=null==(n=null==u?void 0:u.segments)?void 0:n.map((t=>t.point));null==c||c.push(c[0]);const d=k(l,c);S(c,d)},k=(t,e)=>{const n=(t=>{const e=[];for(let n=0;n<t.length;n++)for(let i=n+1;i<t.length;i++){t[n].getIntersections(t[i]).forEach((t=>{e.push(t.point)}))}return e})(t),i=(r=e,n.map((t=>{const e=r.findIndex((e=>(null==e?void 0:e.x.toFixed(4))===(null==t?void 0:t.x.toFixed(4))&&(null==e?void 0:e.y.toFixed(4))===(null==t?void 0:t.y.toFixed(4))));return{crossPoint:t,index:e}})).sort(((t,e)=>e.index-t.index)));var r;const a=[];for(let o=i.length-1;o>0;o-=2){const t=i[o].index,n=i[o-1].index,r=[];for(let i=t;i<=n;i++)r.push(e[i]);r.push(r[0]),a.push({idx:`${t}-${n}`,pts:r})}return a},D=(t,e)=>{if(0===e.length)return[];if(e.length<2)return e[0];let n=e[0];for(let i=1;i<e.length;i++)switch(t){case"union":n=n.unite(e[i]);break;case"difference":n=n.subtract(e[i]);break;case"xor":n=n.exclude(e[i]);break;case"intersection":n=n.intersect(e[i]);break;default:throw new Error("Invalid boolean operation")}return n},A=()=>{var e;const{width:n,height:i,weldModel:r,cat:a,type:s,settings:l}=t.item;var p;null==(e=null==o?void 0:o.value)||e.clear(),"Weld_General"===s||"Weld_Duct"===s?C():null==(p=[t.item])||p.map(((t,e)=>{const{width:n,height:i,weldModel:r,cat:a,type:s,settings:l}=t,p=[];switch(s){case"G_Rectangle":p.push(u("",t,n,i,[2,2]));break;case"G_Circle":p.push(c("",t,n,i,[2,2]));break;case"G_Step":p.push(d(0,t,n,i));break;case"G_Hexagon":p.push(h(0,t,n,i))}null==p||p.map(((t,e)=>{o.value.activeLayer.addChild(t)}))}))};return I((()=>{s(),a((()=>[t.item.width,t.item.height,t.item.settings]),l,{deep:!0}),window.addEventListener("resize",l)})),T((()=>{var t;null==(t=o.value)||t.clear(),window.removeEventListener("resize",l)})),{canvasContainer:n,canvas:i,initCanvas:s,resizeCanvas:l,draw:A,loadSvgString:p,booleanOperation:D}}},[["render",function(t,e,r,a,s,l){return n(),i("div",pT,[o("canvas",{id:`canvas${r.item.id}`,ref:"canvas",resize:"",stats:"",class:"canvas-normal"},null,8,fT)],512)}],["__scopeId","data-v-3de6ec55"]]);const mT=e({name:"HRuler",props:{bgColor:{type:String,default:"black"},documentArea:{type:Object,default:()=>{}}},setup:t=>(I((()=>{})),{})}),vT=["width","height"];var yT=il(mT,[["render",function(t,e,r,a,s,l){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/1999/xlink",style:{position:"relative",overflow:"hidden"},width:t.documentArea.hRuler.width,height:t.documentArea.hRuler.height},[...e[0]||(e[0]=[o("defs",null,null,-1),o("g",{transform:"scale(1,1) translate(0,0)","no-export":"1",opacity:"0"},null,-1),o("g",{transform:"scale(1,1) translate(0,0)",fill:"#000",stroke:"#000"},[o("path",{d:"M0,20v-15M8,20v-5M16,20v-5M24,20v-5M32,20v-5M40,20v-5M48,20v-10M56,20v-5M64,20v-5M72,20v-5M80,20v-5M88,20v-5M96,20v-15M104,20v-5M112,20v-5M120,20v-5M128,20v-5M136,20v-5M144,20v-10M152,20v-5M160,20v-5M168,20v-5M176,20v-5M184,20v-5M192,20v-15M200,20v-5M208,20v-5M216,20v-5M224,20v-5M232,20v-5M240,20v-10M248,20v-5M256,20v-5M264,20v-5M272,20v-5M280,20v-5M288,20v-15M296,20v-5M304,20v-5M312,20v-5M320,20v-5M328,20v-5M336,20v-10M344,20v-5M352,20v-5M360,20v-5M368,20v-5M376,20v-5M384,20v-15M392,20v-5M400,20v-5M408,20v-5M416,20v-5M424,20v-5M432,20v-10M440,20v-5M448,20v-5M456,20v-5M464,20v-5M472,20v-5M480,20v-15M488,20v-5M496,20v-5M504,20v-5M512,20v-5M520,20v-5M528,20v-10M536,20v-5M544,20v-5M552,20v-5M560,20v-5M568,20v-5M576,20v-15M584,20v-5M592,20v-5M600,20v-5M608,20v-5M616,20v-5M624,20v-10M632,20v-5M640,20v-5M648,20v-5M656,20v-5M664,20v-5M672,20v-15M680,20v-5M688,20v-5M696,20v-5M704,20v-5M712,20v-5M720,20v-10M728,20v-5M736,20v-5M744,20v-5M752,20v-5M760,20v-5M768,20v-15M776,20v-5M784,20v-5M792,20v-5M800,20v-5M808,20v-5M816,20v-10M824,20v-5M832,20v-5M840,20v-5M848,20v-5M856,20v-5M864,20v-15M872,20v-5M880,20v-5M888,20v-5M896,20v-5M904,20v-5M912,20v-10M920,20v-5M928,20v-5M936,20v-5M944,20v-5M952,20v-5M960,20v-15M968,20v-5M976,20v-5M984,20v-5M992,20v-5M1000,20v-5M1008,20v-10M1016,20v-5M1024,20v-5M1032,20v-5M1040,20v-5M1048,20v-5M1056,20v-15M1064,20v-5M1072,20v-5M1080,20v-5M1088,20v-5M1096,20v-5M1104,20v-10M1112,20v-5M1120,20v-5M1128,20v-5M1136,20v-5M1144,20v-5M1152,20v-15M1160,20v-5M1168,20v-5M1176,20v-5M1184,20v-5M1192,20v-5M1200,20v-10M1208,20v-5M1216,20v-5M1224,20v-5M1232,20v-5M1240,20v-5M1248,20v-15M1256,20v-5M1264,20v-5M1272,20v-5M1280,20v-5M1288,20v-5M1296,20v-10M1304,20v-5M1312,20v-5M1320,20v-5M1328,20v-5M1336,20v-5M1344,20v-15M1352,20v-5M1360,20v-5M1368,20v-5M1376,20v-5M1384,20v-5M1392,20v-10M1400,20v-5M1408,20v-5M1416,20v-5M1424,20v-5M1432,20v-5M1440,20v-15M1448,20v-5M1456,20v-5M1464,20v-5M1472,20v-5M1480,20v-5M1488,20v-10M1496,20v-5M1504,20v-5M1512,20v-5M1520,20v-5M1528,20v-5M1536,20v-15M1544,20v-5M1552,20v-5M1560,20v-5M1568,20v-5M1576,20v-5M1584,20v-10M1592,20v-5M1600,20v-5M1608,20v-5M1616,20v-5M1624,20v-5M1632,20v-15M1640,20v-5M1648,20v-5M1656,20v-5M1664,20v-5M1672,20v-5M1680,20v-10M1688,20v-5M1696,20v-5M1704,20v-5M1712,20v-5M1720,20v-5M1728,20v-15M1736,20v-5M1744,20v-5M1752,20v-5M1760,20v-5M1768,20v-5M1776,20v-10M1784,20v-5M1792,20v-5M1800,20v-5M1808,20v-5M1816,20v-5M1824,20v-15M1832,20v-5M1840,20v-5M1848,20v-5M1856,20v-5M1864,20v-5M1872,20v-10M1880,20v-5M1888,20v-5M1896,20v-5M1904,20v-5M1912,20v-5M1920,20v-15M1928,20v-5M1936,20v-5M1944,20v-5M1952,20v-5M1960,20v-5M1968,20v-10M1976,20v-5M1984,20v-5M1992,20v-5M2000,20v-5M2008,20v-5M2016,20v-15M2024,20v-5M2032,20v-5M2040,20v-5M2048,20v-5M2056,20v-5M2064,20v-10M2072,20v-5M2080,20v-5M2088,20v-5M2096,20v-5M2104,20v-5M2112,20v-15M2120,20v-5M2128,20v-5M2136,20v-5M2144,20v-5M2152,20v-5M2160,20v-10M2168,20v-5M2176,20v-5M2184,20v-5M2192,20v-5M2200,20v-5M2208,20v-15M2216,20v-5M2224,20v-5M2232,20v-5M2240,20v-5M2248,20v-5M2256,20v-10M2264,20v-5M2272,20v-5M2280,20v-5M2288,20v-5M2296,20v-5M2304,20v-15M2312,20v-5M2320,20v-5M2328,20v-5M2336,20v-5M2344,20v-5M2352,20v-10M2360,20v-5M2368,20v-5M2376,20v-5M2384,20v-5M2392,20v-5M2400,20v-15M2408,20v-5M2416,20v-5M2424,20v-5M2432,20v-5M2440,20v-5M2448,20v-10M2456,20v-5M2464,20v-5M2472,20v-5M2480,20v-5M2488,20v-5M2496,20v-15M2504,20v-5M2512,20v-5M2520,20v-5M2528,20v-5M2536,20v-5M2544,20v-10M2552,20v-5M2560,20v-5M2568,20v-5M2576,20v-5M2584,20v-5M2592,20v-15M2600,20v-5M2608,20v-5M2616,20v-5M2624,20v-5M2632,20v-5M2640,20v-10M2648,20v-5M2656,20v-5M2664,20v-5M2672,20v-5M2680,20v-5M2688,20v-15M2696,20v-5M2704,20v-5M2712,20v-5M2720,20v-5M2728,20v-5M2736,20v-10M2744,20v-5M2752,20v-5M2760,20v-5M2768,20v-5M2776,20v-5M2784,20v-15M2792,20v-5M2800,20v-5M2808,20v-5M2816,20v-5M2824,20v-5M2832,20v-10M2840,20v-5M2848,20v-5M2856,20v-5M2864,20v-5M2872,20v-5M2880,20v-15M2888,20v-5M2896,20v-5M2904,20v-5M2912,20v-5M2920,20v-5M2928,20v-10M2936,20v-5M2944,20v-5M2952,20v-5M2960,20v-5M2968,20v-5M2976,20v-15M2984,20v-5M2992,20v-5M3000,20v-5M3008,20v-5M3016,20v-5M3024,20v-10M3032,20v-5M3040,20v-5M3048,20v-5M3056,20v-5M3064,20v-5M3072,20v-15M3080,20v-5M3088,20v-5M3096,20v-5M3104,20v-5M3112,20v-5M3120,20v-10M3128,20v-5M3136,20v-5M3144,20v-5M3152,20v-5M3160,20v-5M3168,20v-15M3176,20v-5M3184,20v-5M3192,20v-5M3200,20v-5M3208,20v-5M3216,20v-10M3224,20v-5M3232,20v-5M3240,20v-5M3248,20v-5M3256,20v-5M3264,20v-15M3272,20v-5M3280,20v-5M3288,20v-5M3296,20v-5M3304,20v-5M3312,20v-10M3320,20v-5M3328,20v-5M3336,20v-5M3344,20v-5M3352,20v-5M3360,20v-15M3368,20v-5M3376,20v-5M3384,20v-5M3392,20v-5M3400,20v-5M3408,20v-10M3416,20v-5M3424,20v-5M3432,20v-5M3440,20v-5M3448,20v-5M3456,20v-15M3464,20v-5M3472,20v-5M3480,20v-5M3488,20v-5M3496,20v-5M3504,20v-10M3512,20v-5M3520,20v-5M3528,20v-5M3536,20v-5M3544,20v-5M3552,20v-15M3560,20v-5M3568,20v-5M3576,20v-5M3584,20v-5M3592,20v-5M3600,20v-10M3608,20v-5M3616,20v-5M3624,20v-5M3632,20v-5M3640,20v-5M3648,20v-15M3656,20v-5M3664,20v-5M3672,20v-5M3680,20v-5M3688,20v-5M3696,20v-10M3704,20v-5M3712,20v-5M3720,20v-5M3728,20v-5M3736,20v-5M3744,20v-15M3752,20v-5M3760,20v-5M3768,20v-5M3776,20v-5M3784,20v-5M3792,20v-10M3800,20v-5M3808,20v-5M3816,20v-5M3824,20v-5M3832,20v-5M3840,20v-15M3848,20v-5M3856,20v-5M3864,20v-5M3872,20v-5M3880,20v-5M3888,20v-10M3896,20v-5M3904,20v-5M3912,20v-5M3920,20v-5M3928,20v-5",fill:"none","stroke-width":"0.5","stroke-dasharray":"none"}),o("g",null,[o("g",{"stroke-dasharray":"none"},[o("path",{d:"M-0.5,19.5L0.5,19.5L0.5,20.5L-0.5,20.5z","stroke-width":"0",fill:"none"})])])],-1),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(2,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"5",height:"11.199999809265137"}),o("text",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"5"},"0")]),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(98,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"5",height:"11.199999809265137"}),o("text",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"5"},"4")]),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(194,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"5",height:"11.199999809265137"}),o("text",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"5"},"8")]),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(290,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"12")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(386,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"16")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(482,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"20")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(578,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"24")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(674,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"28")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(770,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"32")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(866,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"36")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(962,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"40")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(1058,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"44")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(1154,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"48")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(1250,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"52")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(1346,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"56")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(1442,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"60")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(1538,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"64")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(1634,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"68")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(1730,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"72")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(1826,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"76")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(1922,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"80")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(2018,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"84")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(2114,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"88")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(2210,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"92")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(2306,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"96")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(2402,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"100")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(2498,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"104")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(2594,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"108")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"14.633333206176758",height:"11.199999809265137",transform:"scale(1,1) translate(2690,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"14.633333206176758",height:"11.199999809265137"}),o("text",{width:"14.633333206176758",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"14.633333206176758"},"112")]),o("g",{width:"14.633333206176758",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"14.633333206176758",height:"11.199999809265137",transform:"scale(1,1) translate(2786,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"14.633333206176758",height:"11.199999809265137"}),o("text",{width:"14.633333206176758",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"14.633333206176758"},"116")]),o("g",{width:"14.633333206176758",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(2882,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"120")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(2978,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"124")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(3074,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"128")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(3170,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"132")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(3266,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"136")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(3362,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"140")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(3458,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"144")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(3554,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"148")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(3650,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"152")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(3746,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"156")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(3842,1)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"15",height:"11.199999809265137"}),o("text",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"15"},"160")]),o("g",{width:"15",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1)])],8,vT)}]]);const _T=e({name:"VRuler",props:{bgColor:{type:String,default:"black"},documentArea:{type:Object,default:()=>{}}},setup:t=>(I((()=>{})),{})}),xT=["width","height"];var bT=il(_T,[["render",function(t,e,r,a,s,l){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/1999/xlink",style:{position:"relative",overflow:"hidden"},width:t.documentArea.vRuler.width,height:t.documentArea.vRuler.height},[...e[0]||(e[0]=[o("defs",null,null,-1),o("g",{transform:"scale(1,1) translate(0,0)","no-export":"1",opacity:"0"},null,-1),o("g",{transform:"scale(1,1) translate(0,0)",fill:"#000",stroke:"#000"},[o("path",{d:"M20,0h-15M20,8h-5M20,16h-5M20,24h-5M20,32h-5M20,40h-5M20,48h-10M20,56h-5M20,64h-5M20,72h-5M20,80h-5M20,88h-5M20,96h-15M20,104h-5M20,112h-5M20,120h-5M20,128h-5M20,136h-5M20,144h-10M20,152h-5M20,160h-5M20,168h-5M20,176h-5M20,184h-5M20,192h-15M20,200h-5M20,208h-5M20,216h-5M20,224h-5M20,232h-5M20,240h-10M20,248h-5M20,256h-5M20,264h-5M20,272h-5M20,280h-5M20,288h-15M20,296h-5M20,304h-5M20,312h-5M20,320h-5M20,328h-5M20,336h-10M20,344h-5M20,352h-5M20,360h-5M20,368h-5M20,376h-5M20,384h-15M20,392h-5M20,400h-5M20,408h-5M20,416h-5M20,424h-5M20,432h-10M20,440h-5M20,448h-5M20,456h-5M20,464h-5M20,472h-5M20,480h-15M20,488h-5M20,496h-5M20,504h-5M20,512h-5M20,520h-5M20,528h-10M20,536h-5M20,544h-5M20,552h-5M20,560h-5M20,568h-5M20,576h-15M20,584h-5M20,592h-5M20,600h-5M20,608h-5M20,616h-5M20,624h-10M20,632h-5M20,640h-5M20,648h-5M20,656h-5M20,664h-5M20,672h-15M20,680h-5M20,688h-5M20,696h-5M20,704h-5M20,712h-5M20,720h-10M20,728h-5M20,736h-5M20,744h-5M20,752h-5M20,760h-5M20,768h-15M20,776h-5M20,784h-5M20,792h-5M20,800h-5M20,808h-5M20,816h-10M20,824h-5M20,832h-5M20,840h-5M20,848h-5M20,856h-5M20,864h-15M20,872h-5M20,880h-5M20,888h-5M20,896h-5M20,904h-5M20,912h-10M20,920h-5M20,928h-5M20,936h-5M20,944h-5M20,952h-5M20,960h-15M20,968h-5M20,976h-5M20,984h-5M20,992h-5M20,1000h-5M20,1008h-10M20,1016h-5M20,1024h-5M20,1032h-5M20,1040h-5M20,1048h-5M20,1056h-15M20,1064h-5M20,1072h-5M20,1080h-5M20,1088h-5M20,1096h-5M20,1104h-10M20,1112h-5M20,1120h-5M20,1128h-5M20,1136h-5M20,1144h-5M20,1152h-15M20,1160h-5M20,1168h-5M20,1176h-5M20,1184h-5M20,1192h-5M20,1200h-10M20,1208h-5M20,1216h-5M20,1224h-5M20,1232h-5M20,1240h-5M20,1248h-15M20,1256h-5M20,1264h-5M20,1272h-5M20,1280h-5M20,1288h-5M20,1296h-10M20,1304h-5M20,1312h-5M20,1320h-5M20,1328h-5M20,1336h-5M20,1344h-15M20,1352h-5M20,1360h-5M20,1368h-5M20,1376h-5M20,1384h-5M20,1392h-10M20,1400h-5M20,1408h-5M20,1416h-5M20,1424h-5M20,1432h-5M20,1440h-15M20,1448h-5M20,1456h-5M20,1464h-5M20,1472h-5M20,1480h-5M20,1488h-10M20,1496h-5M20,1504h-5M20,1512h-5M20,1520h-5M20,1528h-5",fill:"none","stroke-width":"0.5","stroke-dasharray":"none"}),o("g",null,[o("g",{"stroke-dasharray":"none"},[o("path",{d:"M19.5,-0.5L20.5,-0.5L20.5,0.5L19.5,0.5z","stroke-width":"0",fill:"none"})])])],-1),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(3,2)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"5",height:"11.199999809265137"}),o("text",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"5"},"0")]),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(3,98)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"5",height:"11.199999809265137"}),o("text",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"5"},"2")]),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(3,194)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"5",height:"11.199999809265137"}),o("text",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"5"},"4")]),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(3,290)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"5",height:"11.199999809265137"}),o("text",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"5"},"6")]),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(3,386)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"5",height:"11.199999809265137"}),o("text",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"5"},"8")]),o("g",{width:"5",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,482)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"10")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,578)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"12")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,674)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"14")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,770)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"16")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,866)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"18")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,962)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"20")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,1058)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"22")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,1154)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"24")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,1250)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"26")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,1346)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"28")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(3,1442)"},[o("rect",{"stroke-width":"0",fill:"none",visibility:"hidden","no-export":"1",transform:"scale(1,1) translate(0,0)",width:"10",height:"11.199999809265137"}),o("text",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)","xml:space":"preserve"},[o("tspan",{"xml:space":"preserve","text-rendering":"optimizeSpeed",style:{"font-family":'"Arial", "Helvetica Neue", Helvetica, sans-serif'},"font-size":"10","font-weight":"normal","font-style":"normal","text-decoration":"none",fill:"#000",opacity:"1",x:"0","text-anchor":"start",y:"8.8",textLength:"10"},"30")]),o("g",{width:"10",height:"11.199999809265137",transform:"scale(1,1) translate(0,0)"})],-1)])],8,xT)}]]);const wT=e({name:"HVGrid",props:{bgColor:{type:String,default:"black"},documentArea:{type:Object,default:()=>{}}},setup:t=>(I((()=>{})),{})}),MT=["width","height"];var ST=il(wT,[["render",function(t,e,r,a,s,l){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1","xmlns:xlink":"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/1999/xlink",style:{position:"relative",overflow:"hidden"},width:t.documentArea.hvGrid.width,height:t.documentArea.hvGrid.height},[...e[0]||(e[0]=[o("defs",null,null,-1),o("g",{transform:"scale(0.96,0.96) translate(0,0)","no-export":"1",opacity:"0"},null,-1),o("g",{transform:"scale(0.96,0.96) translate(0,0)","hvac-background":"1"},[o("g",{transform:"scale(1,1) translate(0,0)","stroke-width":"0","stroke-dasharray":"none",stroke:"none",fill:"none","no-export":"1",width:"1000",height:"750"},[o("rect",{width:"1000",height:"750"})])],-1),o("g",{transform:"scale(1,1) translate(0,0)","no-export":"1","hvac-grid":"1",style:{},"pointer-events":"none"},[o("g",{transform:"scale(1,1) translate(0,0)",fill:"#000",stroke:"#000","stroke-opacity":".2"},[o("path",{d:"M-1048,-768v2256M-1040,-768v2256M-1032,-768v2256M-1024,-768v2256M-1016,-768v2256M-1008,-768v2256M-1000,-768v2256M-992,-768v2256M-984,-768v2256M-976,-768v2256M-968,-768v2256M-952,-768v2256M-944,-768v2256M-936,-768v2256M-928,-768v2256M-920,-768v2256M-912,-768v2256M-904,-768v2256M-896,-768v2256M-888,-768v2256M-880,-768v2256M-872,-768v2256M-856,-768v2256M-848,-768v2256M-840,-768v2256M-832,-768v2256M-824,-768v2256M-816,-768v2256M-808,-768v2256M-800,-768v2256M-792,-768v2256M-784,-768v2256M-776,-768v2256M-760,-768v2256M-752,-768v2256M-744,-768v2256M-736,-768v2256M-728,-768v2256M-720,-768v2256M-712,-768v2256M-704,-768v2256M-696,-768v2256M-688,-768v2256M-680,-768v2256M-664,-768v2256M-656,-768v2256M-648,-768v2256M-640,-768v2256M-632,-768v2256M-624,-768v2256M-616,-768v2256M-608,-768v2256M-600,-768v2256M-592,-768v2256M-584,-768v2256M-568,-768v2256M-560,-768v2256M-552,-768v2256M-544,-768v2256M-536,-768v2256M-528,-768v2256M-520,-768v2256M-512,-768v2256M-504,-768v2256M-496,-768v2256M-488,-768v2256M-472,-768v2256M-464,-768v2256M-456,-768v2256M-448,-768v2256M-440,-768v2256M-432,-768v2256M-424,-768v2256M-416,-768v2256M-408,-768v2256M-400,-768v2256M-392,-768v2256M-376,-768v2256M-368,-768v2256M-360,-768v2256M-352,-768v2256M-344,-768v2256M-336,-768v2256M-328,-768v2256M-320,-768v2256M-312,-768v2256M-304,-768v2256M-296,-768v2256M-280,-768v2256M-272,-768v2256M-264,-768v2256M-256,-768v2256M-248,-768v2256M-240,-768v2256M-232,-768v2256M-224,-768v2256M-216,-768v2256M-208,-768v2256M-200,-768v2256M-184,-768v2256M-176,-768v2256M-168,-768v2256M-160,-768v2256M-152,-768v2256M-144,-768v2256M-136,-768v2256M-128,-768v2256M-120,-768v2256M-112,-768v2256M-104,-768v2256M-88,-768v2256M-80,-768v2256M-72,-768v2256M-64,-768v2256M-56,-768v2256M-48,-768v2256M-40,-768v2256M-32,-768v2256M-24,-768v2256M-16,-768v2256M-8,-768v2256M8,-768v2256M16,-768v2256M24,-768v2256M32,-768v2256M40,-768v2256M48,-768v2256M56,-768v2256M64,-768v2256M72,-768v2256M80,-768v2256M88,-768v2256M104,-768v2256M112,-768v2256M120,-768v2256M128,-768v2256M136,-768v2256M144,-768v2256M152,-768v2256M160,-768v2256M168,-768v2256M176,-768v2256M184,-768v2256M200,-768v2256M208,-768v2256M216,-768v2256M224,-768v2256M232,-768v2256M240,-768v2256M248,-768v2256M256,-768v2256M264,-768v2256M272,-768v2256M280,-768v2256M296,-768v2256M304,-768v2256M312,-768v2256M320,-768v2256M328,-768v2256M336,-768v2256M344,-768v2256M352,-768v2256M360,-768v2256M368,-768v2256M376,-768v2256M392,-768v2256M400,-768v2256M408,-768v2256M416,-768v2256M424,-768v2256M432,-768v2256M440,-768v2256M448,-768v2256M456,-768v2256M464,-768v2256M472,-768v2256M488,-768v2256M496,-768v2256M504,-768v2256M512,-768v2256M520,-768v2256M528,-768v2256M536,-768v2256M544,-768v2256M552,-768v2256M560,-768v2256M568,-768v2256M584,-768v2256M592,-768v2256M600,-768v2256M608,-768v2256M616,-768v2256M624,-768v2256M632,-768v2256M640,-768v2256M648,-768v2256M656,-768v2256M664,-768v2256M680,-768v2256M688,-768v2256M696,-768v2256M704,-768v2256M712,-768v2256M720,-768v2256M728,-768v2256M736,-768v2256M744,-768v2256M752,-768v2256M760,-768v2256M776,-768v2256M784,-768v2256M792,-768v2256M800,-768v2256M808,-768v2256M816,-768v2256M824,-768v2256M832,-768v2256M840,-768v2256M848,-768v2256M856,-768v2256M872,-768v2256M880,-768v2256M888,-768v2256M896,-768v2256M904,-768v2256M912,-768v2256M920,-768v2256M928,-768v2256M936,-768v2256M944,-768v2256M952,-768v2256M968,-768v2256M976,-768v2256M984,-768v2256M992,-768v2256M1000,-768v2256M1008,-768v2256M1016,-768v2256M1024,-768v2256M1032,-768v2256M1040,-768v2256M1048,-768v2256M1064,-768v2256M1072,-768v2256M1080,-768v2256M1088,-768v2256M1096,-768v2256M1104,-768v2256M1112,-768v2256M1120,-768v2256M1128,-768v2256M1136,-768v2256M1144,-768v2256M1160,-768v2256M1168,-768v2256M1176,-768v2256M1184,-768v2256M1192,-768v2256M1200,-768v2256M1208,-768v2256M1216,-768v2256M1224,-768v2256M1232,-768v2256M1240,-768v2256M1256,-768v2256M1264,-768v2256M1272,-768v2256M1280,-768v2256M1288,-768v2256M1296,-768v2256M1304,-768v2256M1312,-768v2256M1320,-768v2256M1328,-768v2256M1336,-768v2256M1352,-768v2256M1360,-768v2256M1368,-768v2256M1376,-768v2256M1384,-768v2256M1392,-768v2256M1400,-768v2256M1408,-768v2256M1416,-768v2256M1424,-768v2256M1432,-768v2256M1448,-768v2256M1456,-768v2256M1464,-768v2256M1472,-768v2256M1480,-768v2256M1488,-768v2256M1496,-768v2256M1504,-768v2256M1512,-768v2256M1520,-768v2256M1528,-768v2256M1544,-768v2256M1552,-768v2256M1560,-768v2256M1568,-768v2256M1576,-768v2256M1584,-768v2256M1592,-768v2256M1600,-768v2256M1608,-768v2256M1616,-768v2256M1624,-768v2256M1640,-768v2256M1648,-768v2256M1656,-768v2256M1664,-768v2256M1672,-768v2256M1680,-768v2256M1688,-768v2256M1696,-768v2256M1704,-768v2256M1712,-768v2256M1720,-768v2256M1736,-768v2256M1744,-768v2256M1752,-768v2256M1760,-768v2256M1768,-768v2256M1776,-768v2256M1784,-768v2256M1792,-768v2256M1800,-768v2256M1808,-768v2256M1816,-768v2256M1832,-768v2256M1840,-768v2256M1848,-768v2256M1856,-768v2256M1864,-768v2256M1872,-768v2256M1880,-768v2256M1888,-768v2256M1896,-768v2256M1904,-768v2256M1912,-768v2256M1928,-768v2256M1936,-768v2256M1944,-768v2256M1952,-768v2256M1960,-768v2256M1968,-768v2256M-1008,-760h2976M-1008,-752h2976M-1008,-744h2976M-1008,-736h2976M-1008,-728h2976M-1008,-720h2976M-1008,-712h2976M-1008,-704h2976M-1008,-696h2976M-1008,-688h2976M-1008,-680h2976M-1008,-664h2976M-1008,-656h2976M-1008,-648h2976M-1008,-640h2976M-1008,-632h2976M-1008,-624h2976M-1008,-616h2976M-1008,-608h2976M-1008,-600h2976M-1008,-592h2976M-1008,-584h2976M-1008,-568h2976M-1008,-560h2976M-1008,-552h2976M-1008,-544h2976M-1008,-536h2976M-1008,-528h2976M-1008,-520h2976M-1008,-512h2976M-1008,-504h2976M-1008,-496h2976M-1008,-488h2976M-1008,-472h2976M-1008,-464h2976M-1008,-456h2976M-1008,-448h2976M-1008,-440h2976M-1008,-432h2976M-1008,-424h2976M-1008,-416h2976M-1008,-408h2976M-1008,-400h2976M-1008,-392h2976M-1008,-376h2976M-1008,-368h2976M-1008,-360h2976M-1008,-352h2976M-1008,-344h2976M-1008,-336h2976M-1008,-328h2976M-1008,-320h2976M-1008,-312h2976M-1008,-304h2976M-1008,-296h2976M-1008,-280h2976M-1008,-272h2976M-1008,-264h2976M-1008,-256h2976M-1008,-248h2976M-1008,-240h2976M-1008,-232h2976M-1008,-224h2976M-1008,-216h2976M-1008,-208h2976M-1008,-200h2976M-1008,-184h2976M-1008,-176h2976M-1008,-168h2976M-1008,-160h2976M-1008,-152h2976M-1008,-144h2976M-1008,-136h2976M-1008,-128h2976M-1008,-120h2976M-1008,-112h2976M-1008,-104h2976M-1008,-88h2976M-1008,-80h2976M-1008,-72h2976M-1008,-64h2976M-1008,-56h2976M-1008,-48h2976M-1008,-40h2976M-1008,-32h2976M-1008,-24h2976M-1008,-16h2976M-1008,-8h2976M-1008,8h2976M-1008,16h2976M-1008,24h2976M-1008,32h2976M-1008,40h2976M-1008,48h2976M-1008,56h2976M-1008,64h2976M-1008,72h2976M-1008,80h2976M-1008,88h2976M-1008,104h2976M-1008,112h2976M-1008,120h2976M-1008,128h2976M-1008,136h2976M-1008,144h2976M-1008,152h2976M-1008,160h2976M-1008,168h2976M-1008,176h2976M-1008,184h2976M-1008,200h2976M-1008,208h2976M-1008,216h2976M-1008,224h2976M-1008,232h2976M-1008,240h2976M-1008,248h2976M-1008,256h2976M-1008,264h2976M-1008,272h2976M-1008,280h2976M-1008,296h2976M-1008,304h2976M-1008,312h2976M-1008,320h2976M-1008,328h2976M-1008,336h2976M-1008,344h2976M-1008,352h2976M-1008,360h2976M-1008,368h2976M-1008,376h2976M-1008,392h2976M-1008,400h2976M-1008,408h2976M-1008,416h2976M-1008,424h2976M-1008,432h2976M-1008,440h2976M-1008,448h2976M-1008,456h2976M-1008,464h2976M-1008,472h2976M-1008,488h2976M-1008,496h2976M-1008,504h2976M-1008,512h2976M-1008,520h2976M-1008,528h2976M-1008,536h2976M-1008,544h2976M-1008,552h2976M-1008,560h2976M-1008,568h2976M-1008,584h2976M-1008,592h2976M-1008,600h2976M-1008,608h2976M-1008,616h2976M-1008,624h2976M-1008,632h2976M-1008,640h2976M-1008,648h2976M-1008,656h2976M-1008,664h2976M-1008,680h2976M-1008,688h2976M-1008,696h2976M-1008,704h2976M-1008,712h2976M-1008,720h2976M-1008,728h2976M-1008,736h2976M-1008,744h2976M-1008,752h2976M-1008,760h2976M-1008,776h2976M-1008,784h2976M-1008,792h2976M-1008,800h2976M-1008,808h2976M-1008,816h2976M-1008,824h2976M-1008,832h2976M-1008,840h2976M-1008,848h2976M-1008,856h2976M-1008,872h2976M-1008,880h2976M-1008,888h2976M-1008,896h2976M-1008,904h2976M-1008,912h2976M-1008,920h2976M-1008,928h2976M-1008,936h2976M-1008,944h2976M-1008,952h2976M-1008,968h2976M-1008,976h2976M-1008,984h2976M-1008,992h2976M-1008,1000h2976M-1008,1008h2976M-1008,1016h2976M-1008,1024h2976M-1008,1032h2976M-1008,1040h2976M-1008,1048h2976M-1008,1064h2976M-1008,1072h2976M-1008,1080h2976M-1008,1088h2976M-1008,1096h2976M-1008,1104h2976M-1008,1112h2976M-1008,1120h2976M-1008,1128h2976M-1008,1136h2976M-1008,1144h2976M-1008,1160h2976M-1008,1168h2976M-1008,1176h2976M-1008,1184h2976M-1008,1192h2976M-1008,1200h2976M-1008,1208h2976M-1008,1216h2976M-1008,1224h2976M-1008,1232h2976M-1008,1240h2976M-1008,1256h2976M-1008,1264h2976M-1008,1272h2976M-1008,1280h2976M-1008,1288h2976M-1008,1296h2976M-1008,1304h2976M-1008,1312h2976M-1008,1320h2976M-1008,1328h2976M-1008,1336h2976M-1008,1352h2976M-1008,1360h2976M-1008,1368h2976M-1008,1376h2976M-1008,1384h2976M-1008,1392h2976M-1008,1400h2976M-1008,1408h2976M-1008,1416h2976M-1008,1424h2976M-1008,1432h2976M-1008,1448h2976M-1008,1456h2976M-1008,1464h2976M-1008,1472h2976M-1008,1480h2976M-1008,1488h2976",fill:"none","stroke-width":"0.5","stroke-dasharray":"none"}),o("g",null,[o("g",{"stroke-dasharray":"none"},[o("path",{d:"M-1048.5,-768.5L-1047.5,-768.5L-1047.5,-767.5L-1048.5,-767.5z","stroke-width":"0",fill:"none"})])])]),o("g",{transform:"scale(1,1) translate(0,0)",fill:"#000",stroke:"#000","stroke-opacity":".4"},[o("path",{d:"M-1056,-768v2256M-960,-768v2256M-864,-768v2256M-768,-768v2256M-672,-768v2256M-576,-768v2256M-480,-768v2256M-384,-768v2256M-288,-768v2256M-192,-768v2256M-96,-768v2256M0,-768v2256M96,-768v2256M192,-768v2256M288,-768v2256M384,-768v2256M480,-768v2256M576,-768v2256M672,-768v2256M768,-768v2256M864,-768v2256M960,-768v2256M1056,-768v2256M1152,-768v2256M1248,-768v2256M1344,-768v2256M1440,-768v2256M1536,-768v2256M1632,-768v2256M1728,-768v2256M1824,-768v2256M1920,-768v2256M-1008,-768h2976M-1008,-672h2976M-1008,-576h2976M-1008,-480h2976M-1008,-384h2976M-1008,-288h2976M-1008,-192h2976M-1008,-96h2976M-1008,0h2976M-1008,96h2976M-1008,192h2976M-1008,288h2976M-1008,384h2976M-1008,480h2976M-1008,576h2976M-1008,672h2976M-1008,768h2976M-1008,864h2976M-1008,960h2976M-1008,1056h2976M-1008,1152h2976M-1008,1248h2976M-1008,1344h2976M-1008,1440h2976",fill:"none","stroke-width":"0.5","stroke-dasharray":"none"}),o("g",null,[o("g",{"stroke-dasharray":"none"},[o("path",{d:"M-1056.5,-768.5L-1055.5,-768.5L-1055.5,-767.5L-1056.5,-767.5z","stroke-width":"0",fill:"none"})])])])],-1),o("g",{transform:"scale(1,1) translate(0,0)","no-export":"1",style:{display:"none"}},[o("g",{transform:"scale(1,1) translate(0,0)",fill:"#000088",stroke:"#000088","stroke-opacity":".6"},[o("path",{d:"M0,0",fill:"none","stroke-dasharray":"5,2","stroke-width":"0.5"}),o("g")])],-1),o("g",{transform:"scale(0.96,0.96) translate(0,0)"},null,-1),o("g",{transform:"scale(0.96,0.96) translate(0,0)","no-export":"1"},null,-1),o("g",{transform:"scale(0.96,0.96) translate(0,0)","no-export":"1"},null,-1),o("g",{transform:"scale(0.96,0.96) translate(0,0)","no-export":"1"},null,-1)])],8,MT)}]]),CT=ze.CMD;function kT(t,e){return Math.abs(t-e)<1e-5}function IT(t){var e,n,i,r,a,o,s,l,u,c,d,h,p,f,g,m,v,y,_,x,b,w,M,S,C=t.data,k=t.len(),I=[],D=0,T=0,A=0,E=0;function L(t,n){e&&e.length>2&&I.push(e),e=[t,n]}function P(t,n,i,r){kT(t,i)&&kT(n,r)||e.push(t,n,i,r,i,r)}for(var N=0;N<k;){var O=C[N++],z=1===N;switch(z&&(A=D=C[N],E=T=C[N+1],O!==CT.L&&O!==CT.C&&O!==CT.Q||(e=[A,E])),O){case CT.M:D=A=C[N++],T=E=C[N++],L(A,E);break;case CT.L:P(D,T,n=C[N++],i=C[N++]),D=n,T=i;break;case CT.C:e.push(C[N++],C[N++],C[N++],C[N++],D=C[N++],T=C[N++]);break;case CT.Q:n=C[N++],i=C[N++],r=C[N++],a=C[N++],e.push(D+2/3*(n-D),T+2/3*(i-T),r+2/3*(n-r),a+2/3*(i-a),r,a),D=r,T=a;break;case CT.A:var R=C[N++],V=C[N++],F=C[N++],B=C[N++],H=C[N++],G=C[N++]+H;N+=1;var j=!C[N++];n=Math.cos(H)*F+R,i=Math.sin(H)*B+V,z?L(A=n,E=i):P(D,T,n,i),D=Math.cos(G)*F+R,T=Math.sin(G)*B+V;for(var W=(j?-1:1)*Math.PI/2,U=H;j?U>G:U<G;U+=W){var Y=j?Math.max(U+W,G):Math.min(U+W,G);o=U,s=Y,l=R,u=V,c=F,d=B,h=void 0,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,x=void 0,b=void 0,w=void 0,M=void 0,S=void 0,h=Math.abs(s-o),p=4*Math.tan(h/4)/3,f=s<o?-1:1,g=Math.cos(o),m=Math.sin(o),v=Math.cos(s),y=Math.sin(s),_=g*c+l,x=m*d+u,b=v*c+l,w=y*d+u,M=c*p*f,S=d*p*f,e.push(_-M*m,x+S*g,b+M*y,w-S*v,b,w)}break;case CT.R:A=D=C[N++],E=T=C[N++],n=A+C[N++],i=E+C[N++],L(n,E),P(n,E,n,i),P(n,i,A,i),P(A,i,A,E),P(A,E,n,E);break;case CT.Z:e&&P(D,T,A,E),D=A,T=E}}return e&&e.length>2&&I.push(e),I}function DT(t,e,n,i,r,a,o,s,l,u){if(kT(t,n)&&kT(e,i)&&kT(r,o)&&kT(a,s))l.push(o,s);else{var c=2/u,d=c*c,h=o-t,p=s-e,f=Math.sqrt(h*h+p*p);h/=f,p/=f;var g=n-t,m=i-e,v=r-o,y=a-s,_=g*g+m*m,x=v*v+y*y;if(_<d&&x<d)l.push(o,s);else{var b=h*g+p*m,w=-h*v-p*y;if(_-b*b<d&&b>=0&&x-w*w<d&&w>=0)l.push(o,s);else{var M=[],S=[];ps(t,n,r,o,.5,M),ps(e,i,a,s,.5,S),DT(M[0],S[0],M[1],S[1],M[2],S[2],M[3],S[3],l,u),DT(M[4],S[4],M[5],S[5],M[6],S[6],M[7],S[7],l,u)}}}}function TT(t,e,n){var i=t[e],r=t[1-e],a=Math.abs(i/r),o=Math.ceil(Math.sqrt(a*n)),s=Math.floor(n/o);0===s&&(s=1,o=n);for(var l=[],u=0;u<o;u++)l.push(s);var c=n-o*s;if(c>0)for(u=0;u<c;u++)l[u%o]+=1;return l}function AT(t,e,n){for(var i=t.r0,r=t.r,a=t.startAngle,o=t.endAngle,s=Math.abs(o-a),l=s*r,u=r-i,c=l>Math.abs(u),d=TT([l,u],c?0:1,e),h=(c?s:u)/d.length,p=0;p<d.length;p++)for(var f=(c?u:s)/d[p],g=0;g<d[p];g++){var m={};c?(m.startAngle=a+h*p,m.endAngle=a+h*(p+1),m.r0=i+f*g,m.r=i+f*(g+1)):(m.startAngle=a+f*g,m.endAngle=a+f*(g+1),m.r0=i+h*p,m.r=i+h*(p+1)),m.clockwise=t.clockwise,m.cx=t.cx,m.cy=t.cy,n.push(m)}}function ET(t,e,n,i){return t*i-n*e}function LT(t,e,n,i,r,a,o,s){var l=n-t,u=i-e,c=o-r,d=s-a,h=ET(c,d,l,u);if(Math.abs(h)<1e-6)return null;var p=ET(t-r,e-a,c,d)/h;return p<0||p>1?null:new Re(p*l+t,p*u+e)}function PT(t,e,n){var i=new Re;Re.sub(i,n,e),i.normalize();var r=new Re;return Re.sub(r,t,e),r.dot(i)}function NT(t,e){var n=t[t.length-1];n&&n[0]===e[0]&&n[1]===e[1]||t.push(e)}function OT(t){var e=t.points,n=[],i=[];Kr(e,n,i);var r=new xe(n[0],n[1],i[0]-n[0],i[1]-n[1]),a=r.width,o=r.height,s=r.x,l=r.y,u=new Re,c=new Re;return a>o?(u.x=c.x=s+a/2,u.y=l,c.y=l+o):(u.y=c.y=l+o/2,u.x=s,c.x=s+a),function(t,e,n){for(var i=t.length,r=[],a=0;a<i;a++){var o=t[a],s=t[(a+1)%i],l=LT(o[0],o[1],s[0],s[1],e.x,e.y,n.x,n.y);l&&r.push({projPt:PT(l,e,n),pt:l,idx:a})}if(r.length<2)return[{points:t},{points:t}];r.sort((function(t,e){return t.projPt-e.projPt}));var u=r[0],c=r[r.length-1];if(c.idx<u.idx){var d=u;u=c,c=d}var h=[u.pt.x,u.pt.y],p=[c.pt.x,c.pt.y],f=[h],g=[p];for(a=u.idx+1;a<=c.idx;a++)NT(f,t[a].slice());for(NT(f,p),NT(f,h),a=c.idx+1;a<=u.idx+i;a++)NT(g,t[a%i].slice());return NT(g,h),NT(g,p),[{points:f},{points:g}]}(e,u,c)}function zT(t,e,n,i){if(1===n)i.push(e);else{var r=Math.floor(n/2),a=t(e);zT(t,a[0],r,i),zT(t,a[1],n-r,i)}return i}function RT(t,e){var n,i=[],r=t.shape;switch(t.type){case"rect":!function(t,e,n){for(var i=t.width,r=t.height,a=i>r,o=TT([i,r],a?0:1,e),s=a?"width":"height",l=a?"height":"width",u=a?"x":"y",c=a?"y":"x",d=t[s]/o.length,h=0;h<o.length;h++)for(var p=t[l]/o[h],f=0;f<o[h];f++){var g={};g[u]=h*d,g[c]=f*p,g[s]=d,g[l]=p,g.x+=t.x,g.y+=t.y,n.push(g)}}(r,e,i),n=gi;break;case"sector":AT(r,e,i),n=mi;break;case"circle":AT({r0:0,r:r.r,startAngle:0,endAngle:2*Math.PI,cx:r.cx,cy:r.cy},e,i),n=mi;break;default:var a=t.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=me(function(t,e){var n=IT(t),i=[];e=e||1;for(var r=0;r<n.length;r++){var a=n[r],o=[],s=a[0],l=a[1];o.push(s,l);for(var u=2;u<a.length;){var c=a[u++],d=a[u++],h=a[u++],p=a[u++],f=a[u++],g=a[u++];DT(s,l,c,d,h,p,f,g,o,e),s=f,l=g}i.push(o)}return i}(t.getUpdatedPathProxy(),o),(function(t){return function(t){for(var e=[],n=0;n<t.length;)e.push([t[n++],t[n++]]);return e}(t)})),l=s.length;if(0===l)zT(OT,{points:s[0]},e,i);else if(l===e)for(var u=0;u<l;u++)i.push({points:s[u]});else{var c=0,d=me(s,(function(t){var e=[],n=[];Kr(t,e,n);var i=(n[1]-e[1])*(n[0]-e[0]);return c+=i,{poly:t,area:i}}));d.sort((function(t,e){return e.area-t.area}));var h=e;for(u=0;u<l;u++){var p=d[u];if(h<=0)break;var f=u===l-1?h:Math.ceil(p.area/c*e);f<0||(zT(OT,{points:p.poly},f,i),h-=f)}}n=yr}if(!n)return function(t,e){for(var n=[],i=0;i<e;i++)n.push(fs(t));return n}(t,e);var g,m,v=[];for(u=0;u<i.length;u++){var y=new n;y.setShape(i[u]),g=t,(m=y).setStyle(g.style),m.z=g.z,m.z2=g.z2,m.zlevel=g.zlevel,v.push(y)}return v}function VT(t,e){var n=t.length,i=e.length;if(n===i)return[t,e];for(var r=[],a=[],o=n<i?t:e,s=Math.min(n,i),l=Math.abs(i-n)/6,u=(s-2)/6,c=Math.ceil(l/u)+1,d=[o[0],o[1]],h=l,p=2;p<s;){var f=o[p-2],g=o[p-1],m=o[p++],v=o[p++],y=o[p++],_=o[p++],x=o[p++],b=o[p++];if(h<=0)d.push(m,v,y,_,x,b);else{for(var w=Math.min(h,c-1)+1,M=1;M<=w;M++){var S=M/w;ps(f,m,y,x,S,r),ps(g,v,_,b,S,a),f=r[3],g=a[3],d.push(r[1],a[1],r[2],a[2],f,g),m=r[5],v=a[5],y=r[6],_=a[6]}h-=w-1}}return o===t?[d,e]:[t,d]}function FT(t,e){for(var n=t.length,i=t[n-2],r=t[n-1],a=[],o=0;o<e.length;)a[o++]=i,a[o++]=r;return a}function BT(t){for(var e=0,n=0,i=0,r=t.length,a=0,o=r-2;a<r;o=a,a+=2){var s=t[o],l=t[o+1],u=t[a],c=t[a+1],d=s*c-u*l;e+=d,n+=(s+u)*d,i+=(l+c)*d}return 0===e?[t[0]||0,t[1]||0]:[n/e/3,i/e/3,e]}function HT(t,e,n,i){for(var r=(t.length-2)/6,a=1/0,o=0,s=t.length,l=s-2,u=0;u<r;u++){for(var c=6*u,d=0,h=0;h<s;h+=2){var p=0===h?c:(c+h-2)%l+2,f=t[p]-n[0],g=t[p+1]-n[1],m=e[h]-i[0]-f,v=e[h+1]-i[1]-g;d+=m*m+v*v}d<a&&(a=d,o=u)}return o}function GT(t){for(var e=[],n=t.length,i=0;i<n;i+=2)e[i]=t[n-i-2],e[i+1]=t[n-i-1];return e}function jT(t){return t.__isCombineMorphing}function WT(t,e,n){var i="__mOriginal_"+e,r=t[i]||t[e];t[i]||(t[i]=t[e]);var a=n.replace,o=n.after,s=n.before;t[e]=function(){var t,e=arguments;return s&&s.apply(this,e),t=a?a.apply(this,e):r.apply(this,e),o&&o.apply(this,e),t}}function UT(t,e){var n="__mOriginal_"+e;t[n]&&(t[e]=t[n],t[n]=null)}function YT(t,e){for(var n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.length;){var a=i[r],o=i[r+1];i[r++]=e[0]*a+e[2]*o+e[4],i[r++]=e[1]*a+e[3]*o+e[5]}}function $T(t,e){var n=t.getUpdatedPathProxy(),i=e.getUpdatedPathProxy(),r=function(t,e){for(var n,i,r,a=[],o=[],s=0;s<Math.max(t.length,e.length);s++){var l=t[s],u=e[s],c=void 0,d=void 0;l?u?(i=c=(n=VT(l,u))[0],r=d=n[1]):(d=FT(r||l,l),c=l):(c=FT(i||u,u),d=u),a.push(c),o.push(d)}return[a,o]}(IT(n),IT(i)),a=r[0],o=r[1],s=t.getComputedTransform(),l=e.getComputedTransform();s&&YT(a,s),l&&YT(o,l),WT(e,"updateTransform",{replace:function(){this.transform=null}}),e.transform=null;var u=function(t,e,n,i){for(var r,a=[],o=0;o<t.length;o++){var s=t[o],l=e[o],u=BT(s),c=BT(l);null==r&&(r=u[2]<0!=c[2]<0);var d=[],h=[],p=0,f=1/0,g=[],m=s.length;r&&(s=GT(s));for(var v=6*HT(s,l,u,c),y=m-2,_=0;_<y;_+=2){var x=(v+_)%y+2;d[_+2]=s[x]-u[0],d[_+3]=s[x+1]-u[1]}if(d[0]=s[v]-u[0],d[1]=s[v+1]-u[1],n>0)for(var b=i/n,w=-i/2;w<=i/2;w+=b){var M=Math.sin(w),S=Math.cos(w),C=0;for(_=0;_<s.length;_+=2){var k=d[_],I=d[_+1],D=l[_]-c[0],T=l[_+1]-c[1],A=D*S-T*M,E=D*M+T*S;g[_]=A,g[_+1]=E;var L=A-k,P=E-I;C+=L*L+P*P}if(C<f){f=C,p=w;for(var N=0;N<g.length;N++)h[N]=g[N]}}else for(var O=0;O<m;O+=2)h[O]=l[O]-c[0],h[O+1]=l[O+1]-c[1];a.push({from:d,to:h,fromCp:u,toCp:c,rotation:-p})}return a}(a,o,10,Math.PI),c=[];WT(e,"buildPath",{replace:function(t){for(var n=e.__morphT,i=1-n,r=[],a=0;a<u.length;a++){var o=u[a],s=o.from,l=o.to,d=o.rotation*n,h=o.fromCp,p=o.toCp,f=Math.sin(d),g=Math.cos(d);Ue(r,h,p,n);for(var m=0;m<s.length;m+=2){var v=s[m],y=s[m+1],_=v*i+(M=l[m])*n,x=y*i+(S=l[m+1])*n;c[m]=_*g-x*f+r[0],c[m+1]=_*f+x*g+r[1]}var b=c[0],w=c[1];t.moveTo(b,w);for(m=2;m<s.length;){var M=c[m++],S=c[m++],C=c[m++],k=c[m++],I=c[m++],D=c[m++];b===M&&w===S&&C===I&&k===D?t.lineTo(I,D):t.bezierCurveTo(M,S,C,k,I,D),b=I,w=D}}}})}function qT(t,e,n){if(!t||!e)return e;var i=n.done,r=n.during;return $T(t,e),e.__morphT=0,e.animateTo({__morphT:1},He({during:function(t){e.dirtyShape(),r&&r(t)},done:function(){UT(e,"buildPath"),UT(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape(),i&&i()}},n)),e}function XT(t,e,n,i,r,a){t=r===n?0:Math.round(32767*(t-n)/(r-n)),e=a===i?0:Math.round(32767*(e-i)/(a-i));for(var o,s=0,l=32768;l>0;l/=2){var u=0,c=0;(t&l)>0&&(u=1),(e&l)>0&&(c=1),s+=l*l*(3*u^c),0===c&&(1===u&&(t=l-1-t,e=l-1-e),o=t,t=e,e=o)}return s}function ZT(t){var e=1/0,n=1/0,i=-1/0,r=-1/0,a=me(t,(function(t){var a=t.getBoundingRect(),o=t.getComputedTransform(),s=a.x+a.width/2+(o?o[4]:0),l=a.y+a.height/2+(o?o[5]:0);return e=Math.min(s,e),n=Math.min(l,n),i=Math.max(s,i),r=Math.max(l,r),[s,l]}));return me(a,(function(a,o){return{cp:a,z:XT(a[0],a[1],e,n,i,r),path:t[o]}})).sort((function(t,e){return t.z-e.z})).map((function(t){return t.path}))}function JT(t){return RT(t.path,t.count)}function KT(t){return pe(t[0])}function QT(t,e){for(var n=[],i=t.length,r=0;r<i;r++)n.push({one:t[r],many:[]});for(r=0;r<e.length;r++){var a=e[r].length,o=void 0;for(o=0;o<a;o++)n[o%i].many.push(e[r][o])}var s=0;for(r=i-1;r>=0;r--)if(!n[r].many.length){var l=n[s].many;if(l.length<=1){if(!s)return n;s=0}a=l.length;var u=Math.ceil(a/2);n[r].many=l.slice(u,a),n[s].many=l.slice(0,u),s++}return n}var tA={clone:function(t){for(var e=[],n=1-Math.pow(1-t.path.style.opacity,1/t.count),i=0;i<t.count;i++){var r=fs(t.path);r.setStyle("opacity",n),e.push(r)}return e},split:null};function eA(t,e,n,i,r,a){if(t.length&&e.length){var o=ao("update",i,r);if(o&&o.duration>0){var s,l,u=i.getModel("universalTransition").get("delay"),c=Object.assign({setToFinal:!0},o);KT(t)&&(s=t,l=e),KT(e)&&(s=e,l=t);for(var d=s?s===t:t.length>e.length,h=s?QT(l,s):QT(d?e:t,[d?t:e]),p=0,f=0;f<h.length;f++)p+=h[f].many.length;var g=0;for(f=0;f<h.length;f++)m(h[f],d,g,p),g+=h[f].many.length}}function m(t,e,i,r,o){var s=t.many,l=t.one;if(1!==s.length||o)for(var d=He({dividePath:tA[n],individualDelay:u&&function(t,e,n,a){return u(t+i,r)}},c),h=e?function(t,e,n){var i=[];!function t(e){for(var n=0;n<e.length;n++){var r=e[n];jT(r)?t(r.childrenRef()):r instanceof je&&i.push(r)}}(t);var r=i.length;if(!r)return{fromIndividuals:[],toIndividuals:[],count:0};var a=(n.dividePath||JT)({path:e,count:r});if(a.length!==r)return{fromIndividuals:[],toIndividuals:[],count:0};i=ZT(i),a=ZT(a);for(var o=n.done,s=n.during,l=n.individualDelay,u=new Xe,c=0;c<r;c++){var d=i[c],h=a[c];h.parent=e,h.copyTransform(u),l||$T(d,h)}function p(t){for(var e=0;e<a.length;e++)a[e].addSelfToZr(t)}function f(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,UT(e,"addSelfToZr"),UT(e,"removeSelfFromZr")}e.__isCombineMorphing=!0,e.childrenRef=function(){return a},WT(e,"addSelfToZr",{after:function(t){p(t)}}),WT(e,"removeSelfFromZr",{after:function(t){for(var e=0;e<a.length;e++)a[e].removeSelfFromZr(t)}});var g=a.length;if(l){var m=g,v=function(){0==--m&&(f(),o&&o())};for(c=0;c<g;c++){var y=l?He({delay:(n.delay||0)+l(c,g,i[c],a[c]),done:v},n):n;qT(i[c],a[c],y)}}else e.__morphT=0,e.animateTo({__morphT:1},He({during:function(t){for(var n=0;n<g;n++){var i=a[n];i.__morphT=e.__morphT,i.dirtyShape()}s&&s(t)},done:function(){f();for(var e=0;e<t.length;e++)UT(t[e],"updateTransform");o&&o()}},n));return e.__zr&&p(e.__zr),{fromIndividuals:i,toIndividuals:a,count:g}}(s,l,d):function(t,e,n){var i=e.length,r=[],a=n.dividePath||JT;if(jT(t)){!function t(e){for(var n=0;n<e.length;n++){var i=e[n];jT(i)?t(i.childrenRef()):i instanceof je&&r.push(i)}}(t.childrenRef());var o=r.length;if(o<i)for(var s=0,l=o;l<i;l++)r.push(fs(r[s++%o]));r.length=i}else{r=a({path:t,count:i});var u=t.getComputedTransform();for(l=0;l<r.length;l++)r[l].setLocalTransform(u);if(r.length!==i)return{fromIndividuals:[],toIndividuals:[],count:0}}r=ZT(r),e=ZT(e);var c=n.individualDelay;for(l=0;l<i;l++){var d=c?He({delay:(n.delay||0)+c(l,i,r[l],e[l])},n):n;qT(r[l],e[l],d)}return{fromIndividuals:r,toIndividuals:e,count:e.length}}(l,s,d),p=h.fromIndividuals,f=h.toIndividuals,g=p.length,v=0;v<g;v++){y=u?He({delay:u(v,g)},c):c;a(p[v],f[v],e?s[v]:t.one,e?t.one:s[v],y)}else{var y,_=e?s[0]:l,x=e?l:s[0];if(jT(_))m({many:[_],one:x},!0,i,r,!0);else qT(_,x,y=u?He({delay:u(i,r)},c):c),a(_,x,_,x,y)}}}function nA(t){if(!t)return[];if(pe(t)){for(var e=[],n=0;n<t.length;n++)e.push(nA(t[n]));return e}var i=[];return t.traverse((function(t){t instanceof je&&!t.disableMorphing&&!t.invisible&&!t.ignore&&i.push(t)})),i}var iA=De();function rA(t,e,n,i){var r=function(t,e){for(var n=t.dimensions,i=0;i<n.length;i++){var r=t.getDimensionInfo(n[i]);if(r&&0===r.otherDims[e])return n[i]}}(t,i?"itemChildGroupId":"itemGroupId");if(r){var a=function(t,e,n){var i=t.getDimensionInfo(n),r=i&&i.ordinalMeta;if(i){var a=t.get(i.name,e);return r&&r.categories[a]||a+""}}(t,e,r);return a}var o=t.getRawDataItem(e),s=i?"childGroupId":"groupId";return o&&o[s]?o[s]+"":i?void 0:n||t.getId(e)}function aA(t){var e=[];return ie(t,(function(t){var n=t.data,i=t.dataGroupId;if(!(n.count()>1e4))for(var r=n.getIndices(),a=0;a<r.length;a++)e.push({data:n,groupId:rA(n,a,i,!1),childGroupId:rA(n,a,i,!0),divide:t.divide,dataIndex:a})})),e}function oA(t,e,n){t.traverse((function(t){t instanceof je&&on(t,{style:{opacity:0}},e,{dataIndex:n,isFrom:!0})}))}function sA(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function lA(t){t.stopAnimation(),t.isGroup&&t.traverse((function(t){t.stopAnimation()}))}function uA(t,e,n){var i=aA(t),r=aA(e);function a(t,e,n,i,r){(n||t)&&e.animateFrom({style:n&&n!==t?xn(xn({},n.style),t.style):t.style},r)}var o=!1,s=0,l=re(),u=re();i.forEach((function(t){t.groupId&&l.set(t.groupId,!0),t.childGroupId&&u.set(t.childGroupId,!0)}));for(var c=0;c<r.length;c++){var d=r[c].groupId;if(u.get(d)){s=1;break}var h=r[c].childGroupId;if(h&&l.get(h)){s=2;break}}function p(t,e){return function(n){var i=n.data,r=n.dataIndex;return e?i.getId(r):t?1===s?n.childGroupId:n.groupId:2===s?n.childGroupId:n.groupId}}var f=function(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++){var r=t[i],a=e[i];if(r.data.getId(r.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}(i,r),g={};if(!f)for(c=0;c<r.length;c++){var m=r[c],v=m.data.getItemGraphicEl(m.dataIndex);v&&(g[v.id]=!0)}function y(t,e){var n=i[e],s=r[t],l=s.data.hostModel,u=n.data.getItemGraphicEl(n.dataIndex),c=s.data.getItemGraphicEl(s.dataIndex);u!==c?u&&g[u.id]||c&&(lA(c),u?(lA(u),sA(u),o=!0,eA(nA(u),nA(c),s.divide,l,t,a)):oA(c,l,t)):c&&function(t,e,n){var i=ao("update",n,e);i&&t.traverse((function(t){if(t instanceof Br){var e=ms(t);e&&t.animateFrom({style:e},i)}}))}(c,s.dataIndex,l)}new ua(i,r,p(!0,f),p(!1,f),null,"multiple").update(y).updateManyToOne((function(t,e){var n=r[t],s=n.data,l=s.hostModel,u=s.getItemGraphicEl(n.dataIndex),c=Ie(me(e,(function(t){return i[t].data.getItemGraphicEl(i[t].dataIndex)})),(function(t){return t&&t!==u&&!g[t.id]}));u&&(lA(u),c.length?(ie(c,(function(t){lA(t),sA(t)})),o=!0,eA(nA(c),nA(u),n.divide,l,t,a)):oA(u,l,n.dataIndex))})).updateOneToMany((function(t,e){var n=i[e],s=n.data.getItemGraphicEl(n.dataIndex);if(!s||!g[s.id]){var l=Ie(me(t,(function(t){return r[t].data.getItemGraphicEl(r[t].dataIndex)})),(function(t){return t&&t!==s})),u=r[t[0]].data.hostModel;l.length&&(ie(l,(function(t){return lA(t)})),s?(lA(s),sA(s),o=!0,eA(nA(s),nA(l),n.divide,u,t[0],a)):ie(l,(function(e){return oA(e,u,t[0])})))}})).updateManyToMany((function(t,e){new ua(e,t,(function(t){return i[t].data.getId(i[t].dataIndex)}),(function(t){return r[t].data.getId(r[t].dataIndex)})).update((function(n,i){y(t[n],e[i])})).execute()})).execute(),o&&ie(e,(function(t){var e=t.data.hostModel,i=e&&n.getViewOfSeriesModel(e),r=ao("update",e,0);i&&e.isAnimationEnabled()&&r&&r.duration>0&&i.group.traverse((function(t){t instanceof je&&!t.animators.length&&t.animateFrom({style:{opacity:0}},r)}))}))}function cA(t){var e=t.getModel("universalTransition").get("seriesKey");return e||t.id}function dA(t){return pe(t)?t.sort().join(","):t}function hA(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function pA(t,e){for(var n=0;n<t.length;n++){if(null!=e.seriesIndex&&e.seriesIndex===t[n].seriesIndex||null!=e.seriesId&&e.seriesId===t[n].id)return n}}mr([vs]),mr([function(t){t.registerPainter("svg",Id)}]),mr([function(t){t.registerChartView(sh),t.registerSeriesModel(Dd),t.registerLayout(lh("line",!0)),t.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",n)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,dh("line"))},function(t){t.registerChartView(zh),t.registerSeriesModel(fh),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,le(zi,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Oi("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,dh("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},(function(e){t.sortInfo&&e.axis.setCategorySortInfo(t.sortInfo)}))}))},function(t){t.registerChartView(Zh),t.registerSeriesModel(Qh),Wi("pie",t.registerAction),t.registerLayout(le(Hh,"pie")),t.registerProcessor(jh("pie")),t.registerProcessor({seriesType:"pie",reset:function(t,e){var n=t.getData();n.filterSelf((function(t){var e=n.mapDimension("value"),i=n.get(e,t);return!(Mn(i)&&!isNaN(i)&&i<0)}))}})},function(t){mr(zp),t.registerSeriesModel(tp),t.registerChartView(rp),t.registerLayout(lh("scatter"))},function(t){mr(Zp),t.registerChartView(Hp),t.registerSeriesModel(Gp),t.registerLayout(Rp),t.registerProcessor(jh("radar")),t.registerPreprocessor(Bp)},function(t){mr(Cg),t.registerChartView(og),t.registerSeriesModel(sg),t.registerLayout(ug),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,lg),Wi("map",t.registerAction)},function(t){t.registerChartView(jg),t.registerSeriesModel(am),t.registerLayout(sm),t.registerVisual(lm),function(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},(function(e){var n=t.dataIndex,i=e.getData().tree.getNodeByDataIndex(n);i.isExpand=!i.isExpand}))})),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(t,e,n){e.eachComponent({mainType:"series",subType:"tree",query:t},(function(e){var i=wg(e.coordinateSystem,t,void 0,n);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)}))}))}(t)},function(t){t.registerSeriesModel(hm),t.registerChartView(Cm),t.registerVisual(Gm),t.registerLayout(ev),function(t){for(var e=0;e<um.length;e++)t.registerAction({type:um[e],update:"updateView"},Zn);t.registerAction({type:"treemapRootToNode",update:"updateView"},(function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},(function(e,n){var i=em(t,["treemapZoomToNode","treemapRootToNode"],e);if(i){var r=e.getViewRoot();r&&(t.direction=im(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}}))}))}(t)},function(t){t.registerChartView(ey),t.registerSeriesModel(uy),t.registerProcessor(sv),t.registerVisual(lv),t.registerVisual(cv),t.registerLayout(_v),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,Iv),t.registerLayout(Tv),t.registerCoordinateSystem("graphView",{dimensions:hg.dimensions,create:Av}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Zn),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Zn),t.registerAction(cy,(function(t,e,n){e.eachComponent({mainType:"series",query:t},(function(e){var i=wg(e.coordinateSystem,t,void 0,n);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)}))}))},ys,function(t){t.registerChartView(py),t.registerSeriesModel(fy),t.registerLayout(gy),t.registerProcessor(jh("funnel"))},function(t){mr(G_),t.registerChartView(xy),t.registerSeriesModel(wy),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,Sy)},function(t){t.registerChartView(Y_),t.registerSeriesModel($_),t.registerLayout(q_),t.registerVisual(ox),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},(function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])}))}))},function(t){t.registerSeriesModel(ux),t.registerChartView(mx),t.registerLayout(yx),t.registerTransform(_x)},function(t){t.registerChartView(Bx),t.registerSeriesModel(Gx),t.registerPreprocessor(jx),t.registerVisual(Ix),t.registerLayout(Ux)},function(t){t.registerChartView(qx),t.registerSeriesModel(Xx),t.registerLayout(lh("effectScatter"))},function(t){t.registerChartView(ib),t.registerSeriesModel(sb),t.registerLayout(nb),t.registerVisual(ub)},function(t){t.registerChartView(hb),t.registerSeriesModel(pb)},function(t){t.registerChartView(Nb),t.registerSeriesModel(Ob),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,le(zi,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Oi("pictorialBar"))},function(t){t.registerChartView(zb),t.registerSeriesModel(Rb),t.registerLayout(Vb),t.registerProcessor(jh("themeRiver"))},function(t){t.registerChartView(Hb),t.registerSeriesModel(jb),t.registerLayout(le(Ub,"sunburst")),t.registerProcessor(le(jh,"sunburst")),t.registerVisual($b),function(t){t.registerAction({type:"sunburstRootToNode",update:"updateView"},(function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},(function(e,n){var i=em(t,["sunburstRootToNode"],e);if(i){var r=e.getViewRoot();r&&(t.direction=im(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}}))})),t.registerAction({type:"sunburstHighlight",update:"none"},(function(t,e,n){t=xn({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},(function(e){var n=em(t,["sunburstHighlight"],e);n&&(t.dataIndex=n.node.dataIndex)})),n.dispatchAction(xn(t,{type:"highlight"}))})),t.registerAction({type:"sunburstUnhighlight",update:"updateView"},(function(t,e,n){t=xn({},t),n.dispatchAction(xn(t,{type:"downplay"}))}))}(t)},function(t){t.registerChartView(Ow),t.registerSeriesModel(Jb)}]),mr((function(t){mr(zp),mr(ho)})),mr((function(t){mr(ho),hr.registerAxisPointerClass("PolarAxisPointer",eM),t.registerCoordinateSystem("polar",mM),t.registerComponentModel(nM),t.registerComponentView(NM),hp(t,"angle",rM,LM),hp(t,"radius",aM,PM),t.registerComponentView(MM),t.registerComponentView(DM),t.registerLayout(le(EM,"bar"))})),mr(Cg),mr((function(t){mr(ho),hr.registerAxisPointerClass("SingleAxisPointer",tS),t.registerComponentView(eS),t.registerComponentView(BM),t.registerComponentModel(GM),hp(t,"single",GM,GM.defaultOption),t.registerCoordinateSystem("single",$M)})),mr(G_),mr((function(t){t.registerComponentModel(iS),t.registerComponentView(rS),t.registerCoordinateSystem("calendar",oS)})),mr((function(t){t.registerComponentModel(dS),t.registerComponentView(fS),t.registerPreprocessor((function(t){var e=t.graphic;pe(e)?e[0]&&e[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])}))})),mr((function(t){t.registerComponentModel(HS),t.registerComponentView(GS),FS("saveAsImage",jS),FS("magicType",$S),FS("dataView",tC),FS("dataZoom",SC),FS("restore",aC),mr(zS)})),mr(_s),mr(ho),mr((function(t){t.registerComponentView(GC),t.registerComponentModel(WC),t.registerPreprocessor(kC),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,RC),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},(function(t,e){e.eachComponent({mainType:"brush",query:t},(function(e){e.setAreas(t.areas)}))})),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Zn),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Zn),FS("brush",YC)})),mr(xs),mr((function(t){t.registerComponentModel(XC),t.registerComponentView(nk),t.registerSubTypeDefaulter("timeline",(function(){return"slider"})),function(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},(function(t,e,n){var i=e.getComponent("timeline");return i&&null!=t.currentIndex&&(i.setCurrentIndex(t.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),He({currentIndex:i.option.currentIndex},t)})),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},(function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)}))}(t),t.registerPreprocessor(ik)})),mr((function(t){t.registerComponentModel(dk),t.registerComponentView(Mk),t.registerPreprocessor((function(t){ok(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})}))})),mr((function(t){t.registerComponentModel(Sk),t.registerComponentView(Ek),t.registerPreprocessor((function(t){ok(t.series,"markLine")&&(t.markLine=t.markLine||{})}))})),mr((function(t){t.registerComponentModel(Lk),t.registerComponentView(Bk),t.registerPreprocessor((function(t){ok(t.series,"markArea")&&(t.markArea=t.markArea||{})}))})),mr(bs),mr((function(t){mr(Qk),mr(oI)})),mr(Qk),mr(oI),mr((function(t){mr(HI),mr($I)})),mr(HI),mr($I),mr((function(t){t.registerPreprocessor(KI),t.registerVisual(t.PRIORITY.VISUAL.ARIA,JI)})),mr((function(t){t.registerTransform(cD),t.registerTransform(dD)})),mr((function(t){t.registerComponentModel(hD),t.registerComponentView(pD)})),mr((function(t){t.registerUpdateLifecycle("series:beforeupdate",(function(t,e,n){ie(ra(n.seriesTransition),(function(t){ie(ra(t.to),(function(t){for(var e=n.updatedSeries,i=0;i<e.length;i++)(null!=t.seriesIndex&&t.seriesIndex===e[i].seriesIndex||null!=t.seriesId&&t.seriesId===e[i].id)&&(e[i][gs]=!0)}))}))})),t.registerUpdateLifecycle("series:transition",(function(t,e,n){var i=iA(e);if(i.oldSeries&&n.updatedSeries&&n.optionChanged){var r=n.seriesTransition;if(r)ie(ra(r),(function(t){!function(t,e,n,i){var r=[],a=[];ie(ra(t.from),(function(t){var n=pA(e.oldSeries,t);n>=0&&r.push({dataGroupId:e.oldDataGroupIds[n],data:e.oldData[n],divide:hA(e.oldData[n]),groupIdDim:t.dimension})})),ie(ra(t.to),(function(t){var i=pA(n.updatedSeries,t);if(i>=0){var r=n.updatedSeries[i].getData();a.push({dataGroupId:e.oldDataGroupIds[i],data:r,divide:hA(r),groupIdDim:t.dimension})}})),r.length>0&&a.length>0&&uA(r,a,i)}(t,i,n,e)}));else{var a=function(t,e){var n=re(),i=re(),r=re();return ie(t.oldSeries,(function(e,n){var a=t.oldDataGroupIds[n],o=t.oldData[n],s=cA(e),l=dA(s);i.set(l,{dataGroupId:a,data:o}),pe(s)&&ie(s,(function(t){r.set(t,{key:l,dataGroupId:a,data:o})}))})),ie(e.updatedSeries,(function(t){if(t.isUniversalTransitionEnabled()&&t.isAnimationEnabled()){var e=t.get("dataGroupId"),a=t.getData(),o=cA(t),s=dA(o),l=i.get(s);if(l)n.set(s,{oldSeries:[{dataGroupId:l.dataGroupId,divide:hA(l.data),data:l.data}],newSeries:[{dataGroupId:e,divide:hA(a),data:a}]});else if(pe(o)){var u=[];ie(o,(function(t){var e=i.get(t);e.data&&u.push({dataGroupId:e.dataGroupId,divide:hA(e.data),data:e.data})})),u.length&&n.set(s,{oldSeries:u,newSeries:[{dataGroupId:e,data:a,divide:hA(a)}]})}else{var c=r.get(o);if(c){var d=n.get(c.key);d||(d={oldSeries:[{dataGroupId:c.dataGroupId,data:c.data,divide:hA(c.data)}],newSeries:[]},n.set(c.key,d)),d.newSeries.push({dataGroupId:e,data:a,divide:hA(a)})}}}})),n}(i,n);ie(a.keys(),(function(t){var n=a.get(t);uA(n.oldSeries,n.newSeries,e)}))}ie(n.updatedSeries,(function(t){t[gs]&&(t[gs]=!1)}))}for(var o=t.getSeries(),s=i.oldSeries=[],l=i.oldDataGroupIds=[],u=i.oldData=[],c=0;c<o.length;c++){var d=o[c].getData();d.count()<1e4&&(s.push(o[c]),l.push(o[c].get("dataGroupId")),u.push(d))}}))})),mr((function(t){t.registerUpdateLifecycle("series:beforeupdate",(function(t,e,n){var i=_c(e).labelManager;i||(i=_c(e).labelManager=new yc),i.clearLabels()})),t.registerUpdateLifecycle("series:layoutlabels",(function(t,e,n){var i=_c(e).labelManager;n.updatedSeries.forEach((function(t){i.addLabelsOfSeries(e.getViewOfSeriesModel(t))})),i.updateLayoutConfig(e),i.layout(e),i.processLabelsOverall()}))}));const fA={},gA=[];function mA(t,e){if(Array.isArray(t))for(const n of t)mA(n,e);else if("object"!=typeof t)yA(Object.getOwnPropertyNames(e)),fA[t]=Object.assign(fA[t]||{},e);else for(const n in t)mA(n,t[n])}function vA(t){return fA[t]||{}}function yA(t){gA.push(...t)}function _A(t,e){let n;const i=t.length,r=[];for(n=0;n<i;n++)r.push(e(t[n]));return r}function xA(t,e){let n;const i=t.length,r=[];for(n=0;n<i;n++)e(t[n])&&r.push(t[n]);return r}function bA(t){return t%360*Math.PI/180}function wA(t){return t.charAt(0).toUpperCase()+t.slice(1)}function MA(t,e,n,i){return null!=e&&null!=n||(i=i||t.bbox(),null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)),{width:e,height:n}}function SA(t,e){const n=t.origin;let i=null!=t.ox?t.ox:null!=t.originX?t.originX:"center",r=null!=t.oy?t.oy:null!=t.originY?t.originY:"center";null!=n&&([i,r]=Array.isArray(n)?n:"object"==typeof n?[n.x,n.y]:[n,n]);const a="string"==typeof i,o="string"==typeof r;if(a||o){const{height:t,width:n,x:s,y:l}=e.bbox();a&&(i=i.includes("left")?s:i.includes("right")?s+n:s+n/2),o&&(r=r.includes("top")?l:r.includes("bottom")?l+t:l+t/2)}return[i,r]}const CA=new Set(["desc","metadata","title"]),kA=t=>CA.has(t.nodeName),IA=(t,e,n={})=>{const i={...e};for(const r in i)i[r].valueOf()===n[r]&&delete i[r];Object.keys(i).length?t.node.setAttribute("data-svgjs",JSON.stringify(i)):(t.node.removeAttribute("data-svgjs"),t.node.removeAttribute("svgjs:data"))},DA="http://www.w3.org/2000/svg",TA="http://www.w3.org/2000/xmlns/",AA="http://www.w3.org/1999/xlink",EA={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};class LA{}const PA={},NA="___SYMBOL___ROOT___";function OA(t,e=DA){return EA.document.createElementNS(e,t)}function zA(t,e=!1){if(t instanceof LA)return t;if("object"==typeof t)return FA(t);if(null==t)return new PA[NA];if("string"==typeof t&&"<"!==t.charAt(0))return FA(EA.document.querySelector(t));const n=e?EA.document.createElement("div"):OA("svg");return n.innerHTML=t,t=FA(n.firstChild),n.removeChild(n.firstChild),t}function RA(t,e){return e&&(e instanceof EA.window.Node||e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node)?e:OA(t)}function VA(t){if(!t)return null;if(t.instance instanceof LA)return t.instance;if("#document-fragment"===t.nodeName)return new PA.Fragment(t);let e=wA(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":PA[e]||(e="Dom"),new PA[e](t)}let FA=VA;function BA(t,e=t.name,n=!1){return PA[e]=t,n&&(PA[NA]=t),yA(Object.getOwnPropertyNames(t.prototype)),t}let HA=1e3;function GA(t){return"Svgjs"+wA(t)+HA++}function jA(t){for(let e=t.children.length-1;e>=0;e--)jA(t.children[e]);return t.id?(t.id=GA(t.nodeName),t):t}function WA(t,e){let n,i;for(i=(t=Array.isArray(t)?t:[t]).length-1;i>=0;i--)for(n in e)t[i].prototype[n]=e[n]}function UA(t){return function(...e){const n=e[e.length-1];return!n||n.constructor!==Object||n instanceof Array?t.apply(this,e):t.apply(this,e.slice(0,-1)).attr(n)}}mA("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const t=this.position();return this.parent().add(this.remove(),t+1),this},backward:function(){const t=this.position();return this.parent().add(this.remove(),t?t-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(t){(t=zA(t)).remove();const e=this.position();return this.parent().add(t,e),this},after:function(t){(t=zA(t)).remove();const e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=zA(t)).before(this),this},insertAfter:function(t){return(t=zA(t)).after(this),this}});const YA=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,$A=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,qA=/rgb\((\d+),(\d+),(\d+)\)/,XA=/(#[a-z_][a-z0-9\-_]*)/i,ZA=/\)\s*,?\s*/,JA=/\s/g,KA=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,QA=/^rgb\(/,tE=/^(\s+)?$/,eE=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,nE=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,iE=/[\s,]+/,rE=/[MLHVCSQTAZ]/i;function aE(t){const e=Math.round(t),n=Math.max(0,Math.min(255,e)).toString(16);return 1===n.length?"0"+n:n}function oE(t,e){for(let n=e.length;n--;)if(null==t[e[n]])return!1;return!0}function sE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}mA("Dom",{classes:function(){const t=this.attr("class");return null==t?[]:t.trim().split(iE)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){const e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!==t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}}),mA("Dom",{css:function(t,e){const n={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter((function(t){return!!t.length})).forEach((function(t){const e=t.split(/\s*:\s*/);n[e[0]]=e[1]})),n;if(arguments.length<2){if(Array.isArray(t)){for(const e of t){const t=e;n[e]=this.node.style.getPropertyValue(t)}return n}if("string"==typeof t)return this.node.style.getPropertyValue(t);if("object"==typeof t)for(const e in t)this.node.style.setProperty(e,null==t[e]||tE.test(t[e])?"":t[e])}return 2===arguments.length&&this.node.style.setProperty(t,null==e||tE.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),mA("Dom",{data:function(t,e,n){if(null==t)return this.data(_A(xA(this.node.attributes,(t=>0===t.nodeName.indexOf("data-"))),(t=>t.nodeName.slice(5))));if(t instanceof Array){const e={};for(const n of t)e[n]=this.data(n);return e}if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(i){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),mA("Dom",{remember:function(t,e){if("object"==typeof arguments[0])for(const n in t)this.remember(n,t[n]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(let t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});class lE{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof lE||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}static random(t="vibrant",e){const{random:n,round:i,sin:r,PI:a}=Math;if("vibrant"===t){const t=24*n()+57,e=38*n()+45,i=360*n();return new lE(t,e,i,"lch")}if("sine"===t){const t=i(80*r(2*a*(e=null==e?n():e)/.5+.01)+150),o=i(50*r(2*a*e/.5+4.6)+200),s=i(100*r(2*a*e/.5+2.3)+150);return new lE(t,o,s)}if("pastel"===t){const t=8*n()+86,e=17*n()+9,i=360*n();return new lE(t,e,i,"lch")}if("dark"===t){const t=10+10*n(),e=50*n()+86,i=360*n();return new lE(t,e,i,"lch")}if("rgb"===t){const t=255*n(),e=255*n(),i=255*n();return new lE(t,e,i)}if("lab"===t){const t=100*n(),e=256*n()-128,i=256*n()-128;return new lE(t,e,i,"lab")}if("grey"===t){const t=255*n();return new lE(t,t,t)}throw new Error("Unsupported random color mode")}static test(t){return"string"==typeof t&&(KA.test(t)||QA.test(t))}cmyk(){const{_a:t,_b:e,_c:n}=this.rgb(),[i,r,a]=[t,e,n].map((t=>t/255)),o=Math.min(1-i,1-r,1-a);if(1===o)return new lE(0,0,0,1,"cmyk");return new lE((1-i-o)/(1-o),(1-r-o)/(1-o),(1-a-o)/(1-o),o,"cmyk")}hsl(){const{_a:t,_b:e,_c:n}=this.rgb(),[i,r,a]=[t,e,n].map((t=>t/255)),o=Math.max(i,r,a),s=Math.min(i,r,a),l=(o+s)/2,u=o===s,c=o-s;return new lE(360*(u?0:o===i?((r-a)/c+(r<a?6:0))/6:o===r?((a-i)/c+2)/6:o===a?((i-r)/c+4)/6:0),100*(u?0:l>.5?c/(2-o-s):c/(o+s)),100*l,"hsl")}init(t=0,e=0,n=0,i=0,r="rgb"){if(t=t||0,this.space)for(const d in this.space)delete this[this.space[d]];if("number"==typeof t)r="string"==typeof i?i:r,i="string"==typeof i?0:i,Object.assign(this,{_a:t,_b:e,_c:n,_d:i,space:r});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const n=function(t,e){const n=oE(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,_d:0,space:"rgb"}:oE(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:oE(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:oE(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:oE(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:oE(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return n.space=e||n.space,n}(t,e);Object.assign(this,n)}else if("string"==typeof t)if(QA.test(t)){const e=t.replace(JA,""),[n,i,r]=qA.exec(e).slice(1,4).map((t=>parseInt(t)));Object.assign(this,{_a:n,_b:i,_c:r,_d:0,space:"rgb"})}else{if(!KA.test(t))throw Error("Unsupported string format, can't construct Color");{const e=t=>parseInt(t,16),[,n,i,r]=$A.exec((a=t,4===a.length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a)).map(e);Object.assign(this,{_a:n,_b:i,_c:r,_d:0,space:"rgb"})}}var a;const{_a:o,_b:s,_c:l,_d:u}=this,c="rgb"===this.space?{r:o,g:s,b:l}:"xyz"===this.space?{x:o,y:s,z:l}:"hsl"===this.space?{h:o,s:s,l:l}:"lab"===this.space?{l:o,a:s,b:l}:"lch"===this.space?{l:o,c:s,h:l}:"cmyk"===this.space?{c:o,m:s,y:l,k:u}:{};Object.assign(this,c)}lab(){const{x:t,y:e,z:n}=this.xyz();return new lE(116*e-16,500*(t-e),200*(e-n),"lab")}lch(){const{l:t,a:e,b:n}=this.lab(),i=Math.sqrt(e**2+n**2);let r=180*Math.atan2(n,e)/Math.PI;r<0&&(r*=-1,r=360-r);return new lE(t,i,r,"lch")}rgb(){if("rgb"===this.space)return this;if("lab"===(t=this.space)||"xyz"===t||"lch"===t){let{x:t,y:e,z:n}=this;if("lab"===this.space||"lch"===this.space){let{l:i,a:r,b:a}=this;if("lch"===this.space){const{c:t,h:e}=this,n=Math.PI/180;r=t*Math.cos(n*e),a=t*Math.sin(n*e)}const o=(i+16)/116,s=r/500+o,l=o-a/200,u=16/116,c=.008856,d=7.787;t=.95047*(s**3>c?s**3:(s-u)/d),e=1*(o**3>c?o**3:(o-u)/d),n=1.08883*(l**3>c?l**3:(l-u)/d)}const i=3.2406*t+-1.5372*e+-.4986*n,r=-.9689*t+1.8758*e+.0415*n,a=.0557*t+-.204*e+1.057*n,o=Math.pow,s=.0031308,l=i>s?1.055*o(i,1/2.4)-.055:12.92*i,u=r>s?1.055*o(r,1/2.4)-.055:12.92*r,c=a>s?1.055*o(a,1/2.4)-.055:12.92*a;return new lE(255*l,255*u,255*c)}if("hsl"===this.space){let{h:t,s:e,l:n}=this;if(t/=360,e/=100,n/=100,0===e){n*=255;return new lE(n,n,n)}const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,a=255*sE(r,i,t+1/3),o=255*sE(r,i,t),s=255*sE(r,i,t-1/3);return new lE(a,o,s)}if("cmyk"===this.space){const{c:t,m:e,y:n,k:i}=this,r=255*(1-Math.min(1,t*(1-i)+i)),a=255*(1-Math.min(1,e*(1-i)+i)),o=255*(1-Math.min(1,n*(1-i)+i));return new lE(r,a,o)}return this;var t}toArray(){const{_a:t,_b:e,_c:n,_d:i,space:r}=this;return[t,e,n,i,r]}toHex(){const[t,e,n]=this._clamped().map(aE);return`#${t}${e}${n}`}toRgb(){const[t,e,n]=this._clamped();return`rgb(${t},${e},${n})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:e,_c:n}=this.rgb(),[i,r,a]=[t,e,n].map((t=>t/255)),o=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,s=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,u=(.4124*o+.3576*s+.1805*l)/.95047,c=(.2126*o+.7152*s+.0722*l)/1,d=(.0193*o+.1192*s+.9505*l)/1.08883,h=u>.008856?Math.pow(u,1/3):7.787*u+16/116,p=c>.008856?Math.pow(c,1/3):7.787*c+16/116,f=d>.008856?Math.pow(d,1/3):7.787*d+16/116;return new lE(h,p,f,"xyz")}_clamped(){const{_a:t,_b:e,_c:n}=this.rgb(),{max:i,min:r,round:a}=Math;return[t,e,n].map((t=>i(0,r(a(t),255))))}}class uE{constructor(...t){this.init(...t)}clone(){return new uE(this)}init(t,e){const n=0,i=0,r=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==r.x?n:r.x,this.y=null==r.y?i:r.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){dE.isMatrixLike(t)||(t=new dE(t));const{x:e,y:n}=this;return this.x=t.a*e+t.c*n+t.e,this.y=t.b*e+t.d*n+t.f,this}}function cE(t,e,n){return Math.abs(e-t)<(n||1e-6)}class dE{constructor(...t){this.init(...t)}static formatTransforms(t){const e="both"===t.flip||!0===t.flip,n=t.flip&&(e||"x"===t.flip)?-1:1,i=t.flip&&(e||"y"===t.flip)?-1:1,r=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,a=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,o=t.scale&&t.scale.length?t.scale[0]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleX)?t.scaleX*n:n,s=t.scale&&t.scale.length?t.scale[1]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleY)?t.scaleY*i:i,l=t.shear||0,u=t.rotate||t.theta||0,c=new uE(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),d=c.x,h=c.y,p=new uE(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),f=p.x,g=p.y,m=new uE(t.translate||t.tx||t.translateX,t.ty||t.translateY),v=m.x,y=m.y,_=new uE(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:o,scaleY:s,skewX:r,skewY:a,shear:l,theta:u,rx:_.x,ry:_.y,tx:v,ty:y,ox:d,oy:h,px:f,py:g}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}static matrixMultiply(t,e,n){const i=t.a*e.a+t.c*e.b,r=t.b*e.a+t.d*e.b,a=t.a*e.c+t.c*e.d,o=t.b*e.c+t.d*e.d,s=t.e+t.a*e.e+t.c*e.f,l=t.f+t.b*e.e+t.d*e.f;return n.a=i,n.b=r,n.c=a,n.d=o,n.e=s,n.f=l,n}around(t,e,n){return this.clone().aroundO(t,e,n)}aroundO(t,e,n){const i=t||0,r=e||0;return this.translateO(-i,-r).lmultiplyO(n).translateO(i,r)}clone(){return new dE(this)}decompose(t=0,e=0){const n=this.a,i=this.b,r=this.c,a=this.d,o=this.e,s=this.f,l=n*a-i*r,u=l>0?1:-1,c=u*Math.sqrt(n*n+i*i),d=Math.atan2(u*i,u*n),h=180/Math.PI*d,p=Math.cos(d),f=Math.sin(d),g=(n*r+i*a)/l,m=r*c/(g*n-i)||a*c/(g*i+n);return{scaleX:c,scaleY:m,shear:g,rotate:h,translateX:o-t+t*p*c+e*(g*p*c-f*m),translateY:s-e+t*f*c+e*(g*f*c+p*m),originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const e=new dE(t);return cE(this.a,e.a)&&cE(this.b,e.b)&&cE(this.c,e.c)&&cE(this.d,e.d)&&cE(this.e,e.e)&&cE(this.f,e.f)}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}init(t){const e=dE.fromArray([1,0,0,1,0,0]);return t=t instanceof zE?t.matrixify():"string"==typeof t?dE.fromArray(t.split(iE).map(parseFloat)):Array.isArray(t)?dE.fromArray(t):"object"==typeof t&&dE.isMatrixLike(t)?t:"object"==typeof t?(new dE).transform(t):6===arguments.length?dE.fromArray([].slice.call(arguments)):e,this.a=null!=t.a?t.a:e.a,this.b=null!=t.b?t.b:e.b,this.c=null!=t.c?t.c:e.c,this.d=null!=t.d?t.d:e.d,this.e=null!=t.e?t.e:e.e,this.f=null!=t.f?t.f:e.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,e=this.b,n=this.c,i=this.d,r=this.e,a=this.f,o=t*i-e*n;if(!o)throw new Error("Cannot invert "+this);const s=i/o,l=-e/o,u=-n/o,c=t/o,d=-(s*r+u*a),h=-(l*r+c*a);return this.a=s,this.b=l,this.c=u,this.d=c,this.e=d,this.f=h,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const e=t instanceof dE?t:new dE(t);return dE.matrixMultiply(e,this,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const e=t instanceof dE?t:new dE(t);return dE.matrixMultiply(this,e,this)}rotate(t,e,n){return this.clone().rotateO(t,e,n)}rotateO(t,e=0,n=0){t=bA(t);const i=Math.cos(t),r=Math.sin(t),{a:a,b:o,c:s,d:l,e:u,f:c}=this;return this.a=a*i-o*r,this.b=o*i+a*r,this.c=s*i-l*r,this.d=l*i+s*r,this.e=u*i-c*r+n*r-e*i+e,this.f=c*i+u*r-e*r-n*i+n,this}scale(){return this.clone().scaleO(...arguments)}scaleO(t,e=t,n=0,i=0){3===arguments.length&&(i=n,n=e,e=t);const{a:r,b:a,c:o,d:s,e:l,f:u}=this;return this.a=r*t,this.b=a*e,this.c=o*t,this.d=s*e,this.e=l*t-n*t+n,this.f=u*e-i*e+i,this}shear(t,e,n){return this.clone().shearO(t,e,n)}shearO(t,e=0,n=0){const{a:i,b:r,c:a,d:o,e:s,f:l}=this;return this.a=i+r*t,this.c=a+o*t,this.e=s+l*t-n*t,this}skew(){return this.clone().skewO(...arguments)}skewO(t,e=t,n=0,i=0){3===arguments.length&&(i=n,n=e,e=t),t=bA(t),e=bA(e);const r=Math.tan(t),a=Math.tan(e),{a:o,b:s,c:l,d:u,e:c,f:d}=this;return this.a=o+s*r,this.b=s+o*a,this.c=l+u*r,this.d=u+l*a,this.e=c+d*r-i*r,this.f=d+c*a-n*a,this}skewX(t,e,n){return this.skew(t,0,e,n)}skewY(t,e,n){return this.skew(0,t,e,n)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(dE.isMatrixLike(t)){return new dE(t).multiplyO(this)}const e=dE.formatTransforms(t),{x:n,y:i}=new uE(e.ox,e.oy).transform(this),r=(new dE).translateO(e.rx,e.ry).lmultiplyO(this).translateO(-n,-i).scaleO(e.scaleX,e.scaleY).skewO(e.skewX,e.skewY).shearO(e.shear).rotateO(e.theta).translateO(n,i);if(isFinite(e.px)||isFinite(e.py)){const t=new uE(n,i).transform(r),a=isFinite(e.px)?e.px-t.x:0,o=isFinite(e.py)?e.py-t.y:0;r.translateO(a,o)}return r.translateO(e.tx,e.ty),r}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function hE(){if(!hE.nodes){const t=zA().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");const e=t.path().node;hE.nodes={svg:t,path:e}}if(!hE.nodes.svg.node.parentNode){const t=EA.document.body||EA.document.documentElement;hE.nodes.svg.addTo(t)}return hE.nodes}function pE(t){return!(t.width||t.height||t.x||t.y)}BA(dE,"Matrix");class fE{constructor(...t){this.init(...t)}addOffset(){return this.x+=EA.window.pageXOffset,this.y+=EA.window.pageYOffset,new fE(this)}init(t){return t="string"==typeof t?t.split(iE).map(parseFloat):Array.isArray(t)?t:"object"==typeof t?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return pE(this)}merge(t){const e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width)-e,r=Math.max(this.y+this.height,t.y+t.height)-n;return new fE(e,n,i,r)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof dE||(t=new dE(t));let e=1/0,n=-1/0,i=1/0,r=-1/0;return[new uE(this.x,this.y),new uE(this.x2,this.y),new uE(this.x,this.y2),new uE(this.x2,this.y2)].forEach((function(a){a=a.transform(t),e=Math.min(e,a.x),n=Math.max(n,a.x),i=Math.min(i,a.y),r=Math.max(r,a.y)})),new fE(e,i,n-e,r-i)}}function gE(t,e,n){let i;try{if(i=e(t.node),pE(i)&&((r=t.node)!==EA.document&&!(EA.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===EA.document}).call(EA.document.documentElement,r)))throw new Error("Element not in the dom")}catch(a){i=n(t)}var r;return i}mA({viewbox:{viewbox(t,e,n,i){return null==t?new fE(this.attr("viewBox")):this.attr("viewBox",new fE(t,e,n,i))},zoom(t,e){let{width:n,height:i}=this.attr(["width","height"]);if((n||i)&&"string"!=typeof n&&"string"!=typeof i||(n=this.node.clientWidth,i=this.node.clientHeight),!n||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const r=this.viewbox(),a=n/r.width,o=i/r.height,s=Math.min(a,o);if(null==t)return s;let l=s/t;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),e=e||new uE(n/2/a+r.x,i/2/o+r.y);const u=new fE(r).transform(new dE({scale:l,origin:e}));return this.viewbox(u)}}}),BA(fE,"Box");class mE extends Array{constructor(t=[],...e){if(super(t,...e),"number"==typeof t)return this;this.length=0,this.push(...t)}}WA([mE],{each(t,...e){return"function"==typeof t?this.map(((e,n,i)=>t.call(e,e,n,i))):this.map((n=>n[t](...e)))},toArray(){return Array.prototype.concat.apply([],this)}});const vE=["toArray","constructor","each"];function yE(t,e){return new mE(_A((e||EA.document).querySelectorAll(t),(function(t){return VA(t)})))}mE.extend=function(t){t=t.reduce(((t,e)=>(vE.includes(e)||"_"===e[0]||(e in Array.prototype&&(t["$"+e]=Array.prototype[e]),t[e]=function(...t){return this.each(e,...t)}),t)),{}),WA([mE],t)};let _E=0;const xE={};function bE(t){let e=t.getEventHolder();return e===EA.window&&(e=xE),e.events||(e.events={}),e.events}function wE(t){return t.getEventTarget()}function ME(t,e,n,i,r){const a=n.bind(i||t),o=zA(t),s=bE(o),l=wE(o);e=Array.isArray(e)?e:e.split(iE),n._svgjsListenerId||(n._svgjsListenerId=++_E),e.forEach((function(t){const e=t.split(".")[0],i=t.split(".")[1]||"*";s[e]=s[e]||{},s[e][i]=s[e][i]||{},s[e][i][n._svgjsListenerId]=a,l.addEventListener(e,a,r||!1)}))}function SE(t,e,n,i){const r=zA(t),a=bE(r),o=wE(r);("function"!=typeof n||(n=n._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(iE)).forEach((function(t){const e=t&&t.split(".")[0],s=t&&t.split(".")[1];let l,u;if(n)a[e]&&a[e][s||"*"]&&(o.removeEventListener(e,a[e][s||"*"][n],i||!1),delete a[e][s||"*"][n]);else if(e&&s){if(a[e]&&a[e][s]){for(u in a[e][s])SE(o,[e,s].join("."),u);delete a[e][s]}}else if(s)for(t in a)for(l in a[t])s===l&&SE(o,[t,s].join("."));else if(e){if(a[e]){for(l in a[e])SE(o,[e,l].join("."));delete a[e]}}else{for(t in a)SE(o,t);!function(t){let e=t.getEventHolder();e===EA.window&&(e=xE),e.events&&(e.events={})}(r)}}))}class CE extends LA{addEventListener(){}dispatch(t,e,n){return function(t,e,n,i){const r=wE(t);return e instanceof EA.window.Event||(e=new EA.window.CustomEvent(e,{detail:n,cancelable:!0,...i})),r.dispatchEvent(e),e}(this,t,e,n)}dispatchEvent(t){const e=this.getEventHolder().events;if(!e)return!0;const n=e[t.type];for(const i in n)for(const e in n[i])n[i][e](t);return!t.defaultPrevented}fire(t,e,n){return this.dispatch(t,e,n),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e,n){return SE(this,t,e,n),this}on(t,e,n,i){return ME(this,t,e,n,i),this}removeEventListener(){}}function kE(){}BA(CE,"EventTarget");const IE=400,DE=">",TE=0,AE={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class EE extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return"number"==typeof t||(this.length=0,this.push(...this.parse(t))),this}parse(t=[]){return t instanceof Array?t:t.trim().split(iE).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class LE{constructor(...t){this.init(...t)}convert(t){return new LE(this.value,t)}divide(t){return t=new LE(t),new LE(this/t,this.unit||t.unit)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(YA))&&(this.value=parseFloat(e[1]),"%"===e[5]?this.value/=100:"s"===e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof LE&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new LE(t),new LE(this-t,this.unit||t.unit)}plus(t){return t=new LE(t),new LE(this+t,this.unit||t.unit)}times(t){return t=new LE(t),new LE(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const PE=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),NE=[];class OE extends CE{constructor(t,e){super(),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return(t=zA(t)).removeNamespace&&this.node instanceof EA.window.SVGElement&&t.removeNamespace(),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t,e){return zA(t).put(this,e)}children(){return new mE(_A(this.node.children,(function(t){return VA(t)})))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0,e=!0){this.writeDataToDom();let n=this.node.cloneNode(t);return e&&(n=jA(n)),new this.constructor(n)}each(t,e){const n=this.children();let i,r;for(i=0,r=n.length;i<r;i++)t.apply(n[i],[i,n]),e&&n[i].each(t,e);return this}element(t,e){return this.put(new OE(OA(t),e))}first(){return VA(this.node.firstChild)}get(t){return VA(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,e){return this.xml(t,e,"http://www.w3.org/1999/xhtml")}id(t){return void 0!==t||this.node.id||(this.node.id=GA(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return VA(this.node.lastChild)}matches(t){const e=this.node,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return n&&n.call(e,t)}parent(t){let e=this;if(!e.node.parentNode)return null;if(e=VA(e.node.parentNode),!t)return e;do{if("string"==typeof t?e.matches(t):e instanceof t)return e}while(e=VA(e.node.parentNode));return e}put(t,e){return t=zA(t),this.add(t,e),t}putIn(t,e){return zA(t).add(this,e)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=zA(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e=null){const n=10**t,i=this.attr(e);for(const r in i)"number"==typeof i[r]&&(i[r]=Math.round(i[r]*n)/n);return this.attr(i),this}svg(t,e){return this.xml(t,e,DA)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const e=this.parent();if(!e)return this.addTo(t);const n=e.index(this);return e.put(t,n).put(this)}writeDataToDom(){return this.each((function(){this.writeDataToDom()})),this}xml(t,e,n){if("boolean"==typeof t&&(n=e,e=t,t=null),null==t||"function"==typeof t){e=null==e||e,this.writeDataToDom();let n=this;if(null!=t){if(n=VA(n.node.cloneNode(!0)),e){const e=t(n);if(n=e||n,!1===e)return""}n.each((function(){const e=t(this),n=e||this;!1===e?this.remove():e&&this!==n&&this.replace(n)}),!0)}return e?n.node.outerHTML:n.node.innerHTML}e=null!=e&&e;const i=OA("wrapper",n),r=EA.document.createDocumentFragment();i.innerHTML=t;for(let o=i.children.length;o--;)r.appendChild(i.firstElementChild);const a=this.parent();return e?this.replace(r)&&a:this.add(r)}}WA(OE,{attr:function(t,e,n){if(null==t){t={},e=this.node.attributes;for(const n of e)t[n.nodeName]=eE.test(n.nodeValue)?parseFloat(n.nodeValue):n.nodeValue;return t}if(t instanceof Array)return t.reduce(((t,e)=>(t[e]=this.attr(e),t)),{});if("object"==typeof t&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?AE[t]:eE.test(e)?parseFloat(e):e;"number"==typeof(e=NE.reduce(((e,n)=>n(t,e,this)),e))?e=new LE(e):PE.has(t)&&lE.isColor(e)?e=new lE(e):e.constructor===Array&&(e=new EE(e)),"leading"===t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!==t&&"x"!==t||this.rebuild()}return this},find:function(t){return yE(t,this.node)},findOne:function(t){return VA(this.node.querySelector(t))}}),BA(OE,"Dom");class zE extends OE{constructor(t,e){var n,i;super(t,e),this.dom={},this.node.instance=this,(t.hasAttribute("data-svgjs")||t.hasAttribute("svgjs:data"))&&this.setData(null!=(i=null!=(n=JSON.parse(t.getAttribute("data-svgjs")))?n:JSON.parse(t.getAttribute("svgjs:data")))?i:{})}center(t,e){return this.cx(t).cy(e)}cx(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,e){return this.dx(t).dy(e)}dx(t=0){return this.x(new LE(t).plus(this.x()))}dy(t=0){return this.y(new LE(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,e){return this.x(t).y(e)}parents(t=this.root()){const e="string"==typeof t;e||(t=zA(t));const n=new mE;let i=this;for(;(i=i.parent())&&i.node!==EA.document&&"#document-fragment"!==i.nodeName&&(n.push(i),e||i.node!==t.node)&&(!e||!i.matches(t));)if(i.node===this.root().node)return null;return n}reference(t){if(!(t=this.attr(t)))return null;const e=(t+"").match(XA);return e?zA(e[1]):null}root(){const t=this.parent(PA[NA]);return t&&t.root()}setData(t){return this.dom=t,this}size(t,e){const n=MA(this,t,e);return this.width(new LE(n.width)).height(new LE(n.height))}width(t){return this.attr("width",t)}writeDataToDom(){return IA(this,this.dom),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}WA(zE,{bbox:function(){const t=gE(this,(t=>t.getBBox()),(t=>{try{const e=t.clone().addTo(hE().svg).show(),n=e.node.getBBox();return e.remove(),n}catch(e){throw new Error(`Getting bbox of element "${t.node.nodeName}" is not possible: ${e.toString()}`)}}));return new fE(t)},rbox:function(t){const e=gE(this,(t=>t.getBoundingClientRect()),(t=>{throw new Error(`Getting rbox of element "${t.node.nodeName}" is not possible`)})),n=new fE(e);return t?n.transform(t.screenCTM().inverseO()):n.addOffset()},inside:function(t,e){const n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},point:function(t,e){return new uE(t,e).transformO(this.screenCTM().inverseO())},ctm:function(){return new dE(this.node.getCTM())},screenCTM:function(){try{if("function"==typeof this.isRoot&&!this.isRoot()){const t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new dE(e)}return new dE(this.node.getScreenCTM())}catch(t){return new dE}}}),BA(zE,"Element");const RE={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};["fill","stroke"].forEach((function(t){const e={};let n;e[t]=function(e){if(void 0===e)return this.attr(t);if("string"==typeof e||e instanceof lE||lE.isRgb(e)||e instanceof zE)this.attr(t,e);else for(n=RE[t].length-1;n>=0;n--)null!=e[RE[t][n]]&&this.attr(RE.prefix(t,RE[t][n]),e[RE[t][n]]);return this},mA(["Element","Runner"],e)})),mA(["Element","Runner"],{matrix:function(t,e,n,i,r,a){return null==t?new dE(this):this.attr("transform",new dE(t,e,n,i,r,a))},rotate:function(t,e,n){return this.transform({rotate:t,ox:e,oy:n},!0)},skew:function(t,e,n,i){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:n},!0):this.transform({skew:[t,e],ox:n,oy:i},!0)},shear:function(t,e,n){return this.transform({shear:t,ox:e,oy:n},!0)},scale:function(t,e,n,i){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:n},!0):this.transform({scale:[t,e],ox:n,oy:i},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t="both",e="center"){return-1==="xybothtrue".indexOf(t)&&(e=t,t="both"),this.transform({flip:t,origin:e},!0)},opacity:function(t){return this.attr("opacity",t)}}),mA("radius",{radius:function(t,e=t){return"radialGradient"===(this._element||this).type?this.attr("r",new LE(t)):this.rx(t).ry(e)}}),mA("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new uE(this.node.getPointAtLength(t))}}),mA(["Element","Runner"],{font:function(t,e){if("object"==typeof t){for(e in t)this.font(e,t[e]);return this}return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e)}});mA("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce((function(t,e){return t[e]=function(t){return null===t?this.off(e):this.on(e,t),this},t}),{})),mA("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(ZA).slice(0,-1).map((function(t){const e=t.trim().split("(");return[e[0],e[1].split(iE).map((function(t){return parseFloat(t)}))]})).reverse().reduce((function(t,e){return"matrix"===e[0]?t.lmultiply(dE.fromArray(e[1])):t[e[0]].apply(t,e[1])}),new dE)},toParent:function(t,e){if(this===t)return this;if(kA(this.node))return this.addTo(t,e);const n=this.screenCTM(),i=t.screenCTM().inverse();return this.addTo(t,e).untransform().transform(i.multiply(n)),this},toRoot:function(t){return this.toParent(this.root(),t)},transform:function(t,e){if(null==t||"string"==typeof t){const e=new dE(this).decompose();return null==t?e:e[t]}dE.isMatrixLike(t)||(t={...t,origin:SA(t,this)});const n=new dE(!0===e?this:e||!1).transform(t);return this.attr("transform",n)}});class VE extends zE{flatten(){return this.each((function(){if(this instanceof VE)return this.flatten().ungroup()})),this}ungroup(t=this.parent(),e=t.index(this)){return e=-1===e?t.children().length:e,this.each((function(n,i){return i[i.length-n-1].toParent(t,e)})),this.remove()}}BA(VE,"Container");class FE extends VE{constructor(t,e=t){super(RA("defs",t),e)}flatten(){return this}ungroup(){return this}}BA(FE,"Defs");class BE extends zE{}function HE(t){return this.attr("rx",t)}function GE(t){return this.attr("ry",t)}function jE(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function WE(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function UE(t){return this.attr("cx",t)}function YE(t){return this.attr("cy",t)}function $E(t){return null==t?2*this.rx():this.rx(new LE(t).divide(2))}function qE(t){return null==t?2*this.ry():this.ry(new LE(t).divide(2))}BA(BE,"Shape");var XE=Object.freeze(Object.defineProperty({__proto__:null,rx:HE,ry:GE,x:jE,y:WE,cx:UE,cy:YE,width:$E,height:qE},Symbol.toStringTag,{value:"Module"}));class ZE extends BE{constructor(t,e=t){super(RA("ellipse",t),e)}size(t,e){const n=MA(this,t,e);return this.rx(new LE(n.width).divide(2)).ry(new LE(n.height).divide(2))}}WA(ZE,XE),mA("Container",{ellipse:UA((function(t=0,e=t){return this.put(new ZE).size(t,e).move(0,0)}))}),BA(ZE,"Ellipse");class JE extends OE{constructor(t=EA.document.createDocumentFragment()){super(t)}xml(t,e,n){if("boolean"==typeof t&&(n=e,e=t,t=null),null==t||"function"==typeof t){const t=new OE(OA("wrapper",n));return t.add(this.node.cloneNode(!0)),t.xml(!1,n)}return super.xml(t,!1,n)}}function KE(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new LE(t),fy:new LE(e)}):this.attr({x1:new LE(t),y1:new LE(e)})}function QE(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new LE(t),cy:new LE(e)}):this.attr({x2:new LE(t),y2:new LE(e)})}BA(JE,"Fragment");var tL,eL=Object.freeze(Object.defineProperty({__proto__:null,from:KE,to:QE},Symbol.toStringTag,{value:"Module"}));class nL extends VE{constructor(t,e){super(RA(t+"Gradient","string"==typeof t?null:t),e)}attr(t,e,n){return"transform"===t&&(t="gradientTransform"),super.attr(t,e,n)}bbox(){return new fE}targets(){return yE("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}WA(nL,eL),mA({Container:{gradient(...t){return this.defs().gradient(...t)}},Defs:{gradient:UA((function(t,e){return this.put(new nL(t)).update(e)}))}}),BA(nL,"Gradient");class iL extends VE{constructor(t,e=t){super(RA("pattern",t),e)}attr(t,e,n){return"transform"===t&&(t="patternTransform"),super.attr(t,e,n)}bbox(){return new fE}targets(){return yE("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}mA({Container:{pattern(...t){return this.defs().pattern(...t)}},Defs:{pattern:UA((function(t,e,n){return this.put(new iL).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}))}}),BA(iL,"Pattern");class rL extends BE{constructor(t,e=t){super(RA("image",t),e)}load(t,e){if(!t)return this;const n=new EA.window.Image;return ME(n,"load",(function(t){const i=this.parent(iL);0===this.width()&&0===this.height()&&this.size(n.width,n.height),i instanceof iL&&0===i.width()&&0===i.height()&&i.size(this.width(),this.height()),"function"==typeof e&&e.call(this,t)}),this),ME(n,"load error",(function(){SE(n)})),this.attr("href",n.src=t,AA)}}tL=function(t,e,n){return"fill"!==t&&"stroke"!==t||nE.test(e)&&(e=n.root().defs().image(e)),e instanceof rL&&(e=n.root().defs().pattern(0,0,(t=>{t.add(e)}))),e},NE.push(tL),mA({Container:{image:UA((function(t,e){return this.put(new rL).size(0,0).load(t,e)}))}}),BA(rL,"Image");class aL extends EE{bbox(){let t=-1/0,e=-1/0,n=1/0,i=1/0;return this.forEach((function(r){t=Math.max(r[0],t),e=Math.max(r[1],e),n=Math.min(r[0],n),i=Math.min(r[1],i)})),new fE(n,i,t-n,e-i)}move(t,e){const n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(let i=this.length-1;i>=0;i--)this[i]=[this[i][0]+t,this[i][1]+e];return this}parse(t=[0,0]){const e=[];(t=t instanceof Array?Array.prototype.concat.apply([],t):t.trim().split(iE).map(parseFloat)).length%2!=0&&t.pop();for(let n=0,i=t.length;n<i;n+=2)e.push([t[n],t[n+1]]);return e}size(t,e){let n;const i=this.bbox();for(n=this.length-1;n>=0;n--)i.width&&(this[n][0]=(this[n][0]-i.x)*t/i.width+i.x),i.height&&(this[n][1]=(this[n][1]-i.y)*e/i.height+i.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let e=0,n=this.length;e<n;e++)t.push(this[e].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){dE.isMatrixLike(t)||(t=new dE(t));for(let e=this.length;e--;){const[n,i]=this[e];this[e][0]=t.a*n+t.c*i+t.e,this[e][1]=t.b*n+t.d*i+t.f}return this}}const oL=aL;var sL=Object.freeze(Object.defineProperty({__proto__:null,MorphArray:oL,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){const e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){const e=this.bbox();return null==t?e.height:this.size(e.width,t)}},Symbol.toStringTag,{value:"Module"}));class lL extends BE{constructor(t,e=t){super(RA("line",t),e)}array(){return new aL([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,e){return this.attr(this.array().move(t,e).toLine())}plot(t,e,n,i){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:i}:new aL(t).toLine(),this.attr(t))}size(t,e){const n=MA(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}}WA(lL,sL),mA({Container:{line:UA((function(...t){return lL.prototype.plot.apply(this.put(new lL),null!=t[0]?t:[0,0,0,0])}))}}),BA(lL,"Line");class uL extends VE{constructor(t,e=t){super(RA("marker",t),e)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,e){return this.attr("refX",t).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}function cL(t,e){return function(n){return null==n?this[t]:(this[t]=n,e&&e.call(this),this)}}mA({Container:{marker(...t){return this.defs().marker(...t)}},Defs:{marker:UA((function(t,e,n){return this.put(new uL).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}))},marker:{marker(t,e,n,i){let r=["marker"];return"all"!==t&&r.push(t),r=r.join("-"),t=arguments[1]instanceof uL?arguments[1]:this.defs().marker(e,n,i),this.attr(r,t)}}}),BA(uL,"Marker");const dL={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(t,e,n,i){return function(r){return r<0?t>0?e/t*r:n>0?i/n*r:0:r>1?n<1?(1-i)/(1-n)*r+(i-n)/(1-n):t<1?(1-e)/(1-t)*r+(e-t)/(1-t):1:3*r*(1-r)**2*e+3*r**2*(1-r)*i+r**3}},steps:function(t,e="end"){e=e.split("-").reverse()[0];let n=t;return"none"===e?--n:"both"===e&&++n,(i,r=!1)=>{let a=Math.floor(i*t);const o=i*a%1==0;return"start"!==e&&"both"!==e||++a,r&&o&&--a,i>=0&&a<0&&(a=0),i<=1&&a>n&&(a=n),a/n}}};class hL{done(){return!1}}class pL extends hL{constructor(t=DE){super(),this.ease=dL[t]||t}step(t,e,n){return"number"!=typeof t?n<1?t:e:t+(e-t)*this.ease(n)}}class fL extends hL{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,e,n,i){return this.stepper(t,e,n,i)}}function gL(){const t=(this._duration||500)/1e3,e=this._overshoot||0,n=Math.PI,i=Math.log(e/100+1e-10),r=-i/Math.sqrt(n*n+i*i),a=3.9/(r*t);this.d=2*r*a,this.k=a*a}WA(class extends fL{constructor(t=500,e=0){super(),this.duration(t).overshoot(e)}step(t,e,n,i){if("string"==typeof t)return t;if(i.done=n===1/0,n===1/0)return e;if(0===n)return t;n>100&&(n=16),n/=1e3;const r=i.velocity||0,a=-this.d*r-this.k*(t-e),o=t+r*n+a*n*n/2;return i.velocity=r+a*n,i.done=Math.abs(e-o)+Math.abs(r)<.002,i.done?e:o}},{duration:cL("_duration",gL),overshoot:cL("_overshoot",gL)});WA(class extends fL{constructor(t=.1,e=.01,n=0,i=1e3){super(),this.p(t).i(e).d(n).windup(i)}step(t,e,n,i){if("string"==typeof t)return t;if(i.done=n===1/0,n===1/0)return e;if(0===n)return t;const r=e-t;let a=(i.integral||0)+r*n;const o=(r-(i.error||0))/n,s=this._windup;return!1!==s&&(a=Math.max(-s,Math.min(a,s))),i.error=r,i.integral=a,i.done=Math.abs(r)<.001,i.done?e:t+(this.P*r+this.I*a+this.D*o)}},{windup:cL("_windup"),p:cL("P"),i:cL("I"),d:cL("D")});const mL={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},vL={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},yL="mlhvqtcsaz".split("");for(let GU=0,jU=yL.length;GU<jU;++GU)vL[yL[GU]]=function(t){return function(e,n,i){if("H"===t)e[0]=e[0]+n.x;else if("V"===t)e[0]=e[0]+n.y;else if("A"===t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(let t=0,r=e.length;t<r;++t)e[t]=e[t]+(t%2?n.y:n.x);return vL[t](e,n,i)}}(yL[GU].toUpperCase());function _L(t){return t.segment.length&&t.segment.length-1===mL[t.segment[0].toUpperCase()]}function xL(t,e){t.inNumber&&bL(t,!1);const n=rE.test(e);if(n)t.segment=[e];else{const e=t.lastCommand,n=e.toLowerCase(),i=e===n;t.segment=["m"===n?i?"l":"L":e]}return t.inSegment=!0,t.lastCommand=t.segment[0],n}function bL(t,e){if(!t.inNumber)throw new Error("Parser Error");t.number&&t.segment.push(parseFloat(t.number)),t.inNumber=e,t.number="",t.pointSeen=!1,t.hasExponent=!1,_L(t)&&wL(t)}function wL(t){t.inSegment=!1,t.absolute&&(t.segment=function(t){const e=t.segment[0];return vL[e](t.segment.slice(1),t.p,t.p0)}(t)),t.segments.push(t.segment)}function ML(t){if(!t.segment.length)return!1;const e="A"===t.segment[0].toUpperCase(),n=t.segment.length;return e&&(4===n||5===n)}function SL(t){return"E"===t.lastToken.toUpperCase()}const CL=new Set([" ",",","\t","\n","\r","\f"]);class kL extends EE{bbox(){return hE().path.setAttribute("d",this.toString()),new fE(hE.nodes.path.getBBox())}move(t,e){const n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(let i,r=this.length-1;r>=0;r--)i=this[r][0],"M"===i||"L"===i||"T"===i?(this[r][1]+=t,this[r][2]+=e):"H"===i?this[r][1]+=t:"V"===i?this[r][1]+=e:"C"===i||"S"===i||"Q"===i?(this[r][1]+=t,this[r][2]+=e,this[r][3]+=t,this[r][4]+=e,"C"===i&&(this[r][5]+=t,this[r][6]+=e)):"A"===i&&(this[r][6]+=t,this[r][7]+=e);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),function(t,e=!0){let n=0,i="";const r={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:e,p0:new uE,p:new uE};for(;r.lastToken=i,i=t.charAt(n++);)if(r.inSegment||!xL(r,i))if("."!==i)if(isNaN(parseInt(i)))if(CL.has(i))r.inNumber&&bL(r,!1);else if("-"!==i&&"+"!==i)if("E"!==i.toUpperCase()){if(rE.test(i)){if(r.inNumber)bL(r,!1);else{if(!_L(r))throw new Error("parser Error");wL(r)}--n}}else r.number+=i,r.hasExponent=!0;else{if(r.inNumber&&!SL(r)){bL(r,!1),--n;continue}r.number+=i,r.inNumber=!0}else{if("0"===r.number||ML(r)){r.inNumber=!0,r.number=i,bL(r,!0);continue}r.inNumber=!0,r.number+=i}else{if(r.pointSeen||r.hasExponent){bL(r,!1),--n;continue}r.inNumber=!0,r.pointSeen=!0,r.number+=i}return r.inNumber&&bL(r,!1),r.inSegment&&_L(r)&&wL(r),r.segments}(t)}size(t,e){const n=this.bbox();let i,r;for(n.width=0===n.width?1:n.width,n.height=0===n.height?1:n.height,i=this.length-1;i>=0;i--)r=this[i][0],"M"===r||"L"===r||"T"===r?(this[i][1]=(this[i][1]-n.x)*t/n.width+n.x,this[i][2]=(this[i][2]-n.y)*e/n.height+n.y):"H"===r?this[i][1]=(this[i][1]-n.x)*t/n.width+n.x:"V"===r?this[i][1]=(this[i][1]-n.y)*e/n.height+n.y:"C"===r||"S"===r||"Q"===r?(this[i][1]=(this[i][1]-n.x)*t/n.width+n.x,this[i][2]=(this[i][2]-n.y)*e/n.height+n.y,this[i][3]=(this[i][3]-n.x)*t/n.width+n.x,this[i][4]=(this[i][4]-n.y)*e/n.height+n.y,"C"===r&&(this[i][5]=(this[i][5]-n.x)*t/n.width+n.x,this[i][6]=(this[i][6]-n.y)*e/n.height+n.y)):"A"===r&&(this[i][1]=this[i][1]*t/n.width,this[i][2]=this[i][2]*e/n.height,this[i][6]=(this[i][6]-n.x)*t/n.width+n.x,this[i][7]=(this[i][7]-n.y)*e/n.height+n.y);return this}toString(){return function(t){let e="";for(let n=0,i=t.length;n<i;n++)e+=t[n][0],null!=t[n][1]&&(e+=t[n][1],null!=t[n][2]&&(e+=" ",e+=t[n][2],null!=t[n][3]&&(e+=" ",e+=t[n][3],e+=" ",e+=t[n][4],null!=t[n][5]&&(e+=" ",e+=t[n][5],e+=" ",e+=t[n][6],null!=t[n][7]&&(e+=" ",e+=t[n][7])))));return e+" "}(this)}}const IL=t=>{const e=typeof t;return"number"===e?LE:"string"===e?lE.isColor(t)?lE:iE.test(t)?rE.test(t)?kL:EE:YA.test(t)?LE:TL:PL.indexOf(t.constructor)>-1?t.constructor:Array.isArray(t)?EE:"object"===e?LL:TL};class DL{constructor(t){this._stepper=t||new pL("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce((function(t,e){return t&&e}),!0)}from(t){return null==t?this._from:(this._from=this._set(t),this)}stepper(t){return null==t?this._stepper:(this._stepper=t,this)}to(t){return null==t?this._to:(this._to=this._set(t),this)}type(t){return null==t?this._type:(this._type=t,this)}_set(t){this._type||this.type(IL(t));let e=new this._type(t);return this._type===lE&&(e=this._to?e[this._to[4]]():this._from?e[this._from[4]]():e),this._type===LL&&(e=this._to?e.align(this._to):this._from?e.align(this._from):e),e=e.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(e.length)).map(Object).map((function(t){return t.done=!0,t})),e}}class TL{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class AL{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,AL.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}AL.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const EL=(t,e)=>t[0]<e[0]?-1:t[0]>e[0]?1:0;class LL{constructor(...t){this.init(...t)}align(t){const e=this.values;for(let n=0,i=e.length;n<i;++n){if(e[n+1]===t[n+1]){if(e[n+1]===lE&&t[n+7]!==e[n+7]){const e=t[n+7],i=new lE(this.values.splice(n+3,5))[e]().toArray();this.values.splice(n+3,0,...i)}n+=e[n+2]+2;continue}if(!t[n+1])return this;const i=(new t[n+1]).toArray(),r=e[n+2]+3;e.splice(n,r,t[n],t[n+1],t[n+2],...i),n+=e[n+2]+2}return this}init(t){if(this.values=[],Array.isArray(t))return void(this.values=t.slice());t=t||{};const e=[];for(const n in t){const i=IL(t[n]),r=new i(t[n]).toArray();e.push([n,i,r.length,...r])}return e.sort(EL),this.values=e.reduce(((t,e)=>t.concat(e)),[]),this}toArray(){return this.values}valueOf(){const t={},e=this.values;for(;e.length;){const n=e.shift(),i=e.shift(),r=e.shift(),a=e.splice(0,r);t[n]=new i(a)}return t}}const PL=[TL,AL,LL];class NL extends BE{constructor(t,e=t){super(RA("path",t),e)}array(){return this._array||(this._array=new kL(this.attr("d")))}clear(){return delete this._array,this}height(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}move(t,e){return this.attr("d",this.array().move(t,e))}plot(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new kL(t))}size(t,e){const n=MA(this,t,e);return this.attr("d",this.array().size(n.width,n.height))}width(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}x(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}y(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}}NL.prototype.MorphArray=kL,mA({Container:{path:UA((function(t){return this.put(new NL).plot(t||new kL)}))}}),BA(NL,"Path");var OL=Object.freeze(Object.defineProperty({__proto__:null,array:function(){return this._array||(this._array=new aL(this.attr("points")))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new aL(t))},size:function(t,e){const n=MA(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}},Symbol.toStringTag,{value:"Module"}));class zL extends BE{constructor(t,e=t){super(RA("polygon",t),e)}}mA({Container:{polygon:UA((function(t){return this.put(new zL).plot(t||new aL)}))}}),WA(zL,sL),WA(zL,OL),BA(zL,"Polygon");class RL extends BE{constructor(t,e=t){super(RA("polyline",t),e)}}mA({Container:{polyline:UA((function(t){return this.put(new RL).plot(t||new aL)}))}}),WA(RL,sL),WA(RL,OL),BA(RL,"Polyline");class VL extends BE{constructor(t,e=t){super(RA("rect",t),e)}}WA(VL,{rx:HE,ry:GE}),mA({Container:{rect:UA((function(t,e){return this.put(new VL).size(t,e)}))}}),BA(VL,"Rect");class FL{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const e=void 0!==t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const BL={nextDraw:null,frames:new FL,timeouts:new FL,immediates:new FL,timer:()=>EA.window.performance||EA.window.Date,transforms:[],frame(t){const e=BL.frames.push({run:t});return null===BL.nextDraw&&(BL.nextDraw=EA.window.requestAnimationFrame(BL._draw)),e},timeout(t,e){e=e||0;const n=BL.timer().now()+e,i=BL.timeouts.push({run:t,time:n});return null===BL.nextDraw&&(BL.nextDraw=EA.window.requestAnimationFrame(BL._draw)),i},immediate(t){const e=BL.immediates.push(t);return null===BL.nextDraw&&(BL.nextDraw=EA.window.requestAnimationFrame(BL._draw)),e},cancelFrame(t){null!=t&&BL.frames.remove(t)},clearTimeout(t){null!=t&&BL.timeouts.remove(t)},cancelImmediate(t){null!=t&&BL.immediates.remove(t)},_draw(t){let e=null;const n=BL.timeouts.last();for(;(e=BL.timeouts.shift())&&(t>=e.time?e.run():BL.timeouts.push(e),e!==n););let i=null;const r=BL.frames.last();for(;i!==r&&(i=BL.frames.shift());)i.run(t);let a=null;for(;a=BL.immediates.shift();)a();BL.nextDraw=BL.timeouts.first()||BL.frames.first()?EA.window.requestAnimationFrame(BL._draw):null}},HL=function(t){const e=t.start,n=t.runner.duration();return{start:e,duration:n,end:e+n,runner:t.runner}},GL=function(){const t=EA.window;return(t.performance||t.Date).now()};class jL extends CE{constructor(t=GL){super(),this._timeSource=t,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),e=t?t.runner.duration():0;return(t?t.start:this._time)+e}getEndTimeOfTimeline(){const t=this._runners.map((t=>t.start+t.runner.duration()));return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return null==t?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const e=this.speed();if(null==t)return this.speed(-e);const n=Math.abs(e);return this.speed(t?-n:n)}schedule(t,e,n){if(null==t)return this._runners.map(HL);let i=0;const r=this.getEndTime();if(e=e||0,null==n||"last"===n||"after"===n)i=r;else if("absolute"===n||"start"===n)i=e,e=0;else if("now"===n)i=this._time;else if("relative"===n){const n=this.getRunnerInfoById(t.id);n&&(i=n.start+e,e=0)}else{if("with-last"!==n)throw new Error('Invalid value for the "when" parameter');{const t=this.getLastRunnerInfo();i=t?t.start:this._time}}t.unschedule(),t.timeline(this);const a=t.persist(),o={persist:null===a?this._persist:a,start:i+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(o),this._runners.sort(((t,e)=>t.start-e.start)),this._runnerIds=this._runners.map((t=>t.runner.id)),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return null==t?this._timeSource:(this._timeSource=t,this)}speed(t){return null==t?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return null==t?this._time:(this._time=t,this._continue(!0))}unschedule(t){const e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return BL.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=BL.frame(this._step)),this)}_stepFn(t=!1){const e=this._timeSource();let n=e-this._lastSourceTime;t&&(n=0);const i=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=i,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let a=this._runners.length;a--;){const t=this._runners[a],e=t.runner;this._time-t.start<=0&&e.reset()}let r=!1;for(let a=0,o=this._runners.length;a<o;a++){const t=this._runners[a],e=t.runner;let n=i;const s=this._time-t.start;if(s<=0){r=!0;continue}if(s<n&&(n=s),!e.active())continue;if(e.step(n).done){if(!0!==t.persist){e.duration()-e.time()+this._time+t.persist<this._time&&(e.unschedule(),--a,--o)}}else r=!0}return r&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}mA({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new jL,this._timeline):(this._timeline=t,this)}}});class WL extends CE{constructor(t){super(),this.id=WL.id++,t="function"==typeof(t=null==t?IE:t)?new fL(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof t&&t,this._isDeclarative=t instanceof fL,this._stepper=this._isDeclarative?t:new pL,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new dE,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(t,e,n){var i,r,a,o,s;let l=1,u=!1,c=0;return e=null!=e?e:TE,n=n||"last","object"!=typeof(t=null!=t?t:IE)||t instanceof hL||(e=null!=(i=t.delay)?i:e,n=null!=(r=t.when)?r:n,u=t.swing||u,l=null!=(a=t.times)?a:l,c=null!=(o=t.wait)?o:c,t=null!=(s=t.duration)?s:IE),{duration:t,delay:e,swing:u,times:l,wait:c,when:n}}active(t){return null==t?this.enabled:(this.enabled=t,this)}addTransform(t){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,e,n){const i=WL.sanitise(t,e,n),r=new WL(i.duration);return this._timeline&&r.timeline(this._timeline),this._element&&r.element(this._element),r.loop(i).schedule(i.delay,i.when)}clearTransform(){return this.transforms=new dE,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter((t=>!t.isTransform)))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new pL(t),this}element(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,e,n){return"object"==typeof t&&(e=t.swing,n=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=n||0,!0===this._times&&(this._times=1/0),this}loops(t){const e=this._duration+this._wait;if(null==t){const t=Math.floor(this._time/e),n=(this._time-t*e)/this._duration;return Math.min(t+n,this._times)}const n=t%1,i=e*Math.floor(t)+this._duration*n;return this.time(i)}persist(t){return null==t?this._persist:(this._persist=t,this)}position(t){const e=this._time,n=this._duration,i=this._wait,r=this._times,a=this._swing,o=this._reverse;let s;if(null==t){const t=function(t){const e=a*Math.floor(t%(2*(i+n))/(i+n)),r=e&&!o||!e&&o,s=Math.pow(-1,r)*(t%(i+n))/n+r;return Math.max(Math.min(s,1),0)},l=r*(i+n)-i;return s=e<=0?Math.round(t(1e-5)):e<l?t(e):Math.round(t(l-1e-5)),s}const l=Math.floor(this.loops()),u=a&&l%2==0;return s=l+(u&&!o||o&&u?t:1-t),this.loops(s)}progress(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,e,n,i){this._queue.push({initialiser:t||kE,runner:e||kE,retarget:n,isTransform:i,initialised:!1,finished:!1});return this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(t){return this._reverse=null==t?!this._reverse:t,this}schedule(t,e,n){if(t instanceof jL||(n=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,n),this}step(t){if(!this.enabled)return this;t=null==t?16:t,this._time+=t;const e=this.position(),n=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;const i=this.duration(),r=this._lastTime<=0&&this._time>0,a=this._lastTime<i&&this._time>=i;this._lastTime=this._time,r&&this.fire("start",this);const o=this._isDeclarative;this.done=!o&&!a&&this._time>=i,this._reseted=!1;let s=!1;return(n||o)&&(this._initialise(n),this.transforms=new dE,s=this._run(o?t:e),this.fire("step",this)),this.done=this.done||s&&o,a&&this.fire("finished",this),this}time(t){if(null==t)return this._time;const e=t-this._time;return this.step(e),this}timeline(t){return void 0===t?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(t||this._isDeclarative)for(let e=0,n=this._queue.length;e<n;++e){const n=this._queue[e],i=this._isDeclarative||!n.initialised&&t;t=!n.finished,i&&t&&(n.initialiser.call(this),n.initialised=!0)}}_rememberMorpher(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){const t=this.timeline();t&&t.play()}}_run(t){let e=!0;for(let n=0,i=this._queue.length;n<i;++n){const i=this._queue[n],r=i.runner.call(this,t);i.finished=i.finished||!0===r,e=e&&i.finished}return e}_tryRetarget(t,e,n){if(this._history[t]){if(!this._history[t].caller.initialised){const e=this._queue.indexOf(this._history[t].caller);return this._queue.splice(e,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,e,n):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;const i=this.timeline();return i&&i.play(),!0}return!1}}WL.id=0;class UL{constructor(t=new dE,e=-1,n=!0){this.transforms=t,this.id=e,this.done=n}clearTransformsFromQueue(){}}WA([WL,UL],{mergeWith(t){return new UL(t.transforms.lmultiply(this.transforms),t.id)}});const YL=(t,e)=>t.lmultiplyO(e),$L=t=>t.transforms;function qL(){const t=this._transformationRunners.runners.map($L).reduce(YL,new dE);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}class XL{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const e=t.id+1;return this.runners.push(t),this.ids.push(e),this}clearBefore(t){const e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new UL).forEach((t=>t.clearTransformsFromQueue())),this}edit(t,e){const n=this.ids.indexOf(t+1);return this.ids.splice(n,1,t+1),this.runners.splice(n,1,e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let e=0;e<this.runners.length;++e){const n=this.runners[e];if(t&&n.done&&t.done&&(!n._timeline||!n._timeline._runnerIds.includes(n.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))){this.remove(n.id);const i=n.mergeWith(t);this.edit(t.id,i),t=i,--e}else t=n}return this}remove(t){const e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}}mA({Element:{animate(t,e,n){const i=WL.sanitise(t,e,n),r=this.timeline();return new WL(i.duration).loop(i).element(this).timeline(r.play()).schedule(i.delay,i.when)},delay(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore(t){this._transformationRunners.clearBefore(t.id)},_currentTransform(t){return this._transformationRunners.runners.filter((e=>e.id<=t.id)).map($L).reduce(YL,new dE)},_addRunner(t){this._transformationRunners.add(t),BL.cancelImmediate(this._frameId),this._frameId=BL.immediate(qL.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=(new XL).add(new UL(new dE(this))))}}});WA(WL,{attr(t,e){return this.styleAttr("attr",t,e)},css(t,e){return this.styleAttr("css",t,e)},styleAttr(t,e,n){if("string"==typeof e)return this.styleAttr(t,{[e]:n});let i=e;if(this._tryRetarget(t,i))return this;let r=new DL(this._stepper).to(i),a=Object.keys(i);return this.queue((function(){r=r.from(this.element()[t](a))}),(function(e){return this.element()[t](r.at(e).valueOf()),r.done()}),(function(e){const n=Object.keys(e),o=(s=a,n.filter((t=>!s.includes(t))));var s;if(o.length){const e=this.element()[t](o),n=new LL(r.from()).valueOf();Object.assign(n,e),r.from(n)}const l=new LL(r.to()).valueOf();Object.assign(l,e),r.to(l),a=n,i=e})),this._rememberMorpher(t,r),this},zoom(t,e){if(this._tryRetarget("zoom",t,e))return this;let n=new DL(this._stepper).to(new LE(t));return this.queue((function(){n=n.from(this.element().zoom())}),(function(t){return this.element().zoom(n.at(t),e),n.done()}),(function(t,i){e=i,n.to(t)})),this._rememberMorpher("zoom",n),this},transform(t,e,n){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;const i=dE.isMatrixLike(t);n=null!=t.affine?t.affine:null!=n?n:!i;const r=new DL(this._stepper).type(n?AL:dE);let a,o,s,l,u;return this.queue((function(){o=o||this.element(),a=a||SA(t,o),u=new dE(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}),(function(c){e||this.clearTransform();const{x:d,y:h}=new uE(a).transform(o._currentTransform(this));let p=new dE({...t,origin:[d,h]}),f=this._isDeclarative&&s?s:u;if(n){p=p.decompose(d,h),f=f.decompose(d,h);const t=p.rotate,e=f.rotate,n=[t-360,t,t+360],i=n.map((t=>Math.abs(t-e))),r=Math.min(...i),a=i.indexOf(r);p.rotate=n[a]}e&&(i||(p.rotate=t.rotate||0),this._isDeclarative&&l&&(f.rotate=l)),r.from(f),r.to(p);const g=r.at(c);return l=g.rotate,s=new dE(g),this.addTransform(s),o._addRunner(this),r.done()}),(function(e){(e.origin||"center").toString()!==(t.origin||"center").toString()&&(a=SA(e,o)),t={...e,origin:a}}),!0),this._isDeclarative&&this._rememberMorpher("transform",r),this},x(t){return this._queueNumber("x",t)},y(t){return this._queueNumber("y",t)},ax(t){return this._queueNumber("ax",t)},ay(t){return this._queueNumber("ay",t)},dx(t=0){return this._queueNumberDelta("x",t)},dy(t=0){return this._queueNumberDelta("y",t)},dmove(t,e){return this.dx(t).dy(e)},_queueNumberDelta(t,e){if(e=new LE(e),this._tryRetarget(t,e))return this;const n=new DL(this._stepper).to(e);let i=null;return this.queue((function(){i=this.element()[t](),n.from(i),n.to(i+e)}),(function(e){return this.element()[t](n.at(e)),n.done()}),(function(t){n.to(i+new LE(t))})),this._rememberMorpher(t,n),this},_queueObject(t,e){if(this._tryRetarget(t,e))return this;const n=new DL(this._stepper).to(e);return this.queue((function(){n.from(this.element()[t]())}),(function(e){return this.element()[t](n.at(e)),n.done()})),this._rememberMorpher(t,n),this},_queueNumber(t,e){return this._queueObject(t,new LE(e))},cx(t){return this._queueNumber("cx",t)},cy(t){return this._queueNumber("cy",t)},move(t,e){return this.x(t).y(e)},amove(t,e){return this.ax(t).ay(e)},center(t,e){return this.cx(t).cy(e)},size(t,e){let n;return t&&e||(n=this._element.bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.width(t).height(e)},width(t){return this._queueNumber("width",t)},height(t){return this._queueNumber("height",t)},plot(t,e,n,i){if(4===arguments.length)return this.plot([t,e,n,i]);if(this._tryRetarget("plot",t))return this;const r=new DL(this._stepper).type(this._element.MorphArray).to(t);return this.queue((function(){r.from(this._element.array())}),(function(t){return this._element.plot(r.at(t)),r.done()})),this._rememberMorpher("plot",r),this},leading(t){return this._queueNumber("leading",t)},viewbox(t,e,n,i){return this._queueObject("viewbox",new fE(t,e,n,i))},update(t){return"object"!=typeof t?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),WA(WL,{rx:HE,ry:GE,from:KE,to:QE}),BA(WL,"Runner");class ZL extends VE{constructor(t,e=t){super(RA("svg",t),e),this.namespace()}defs(){return this.isRoot()?VA(this.node.querySelector("defs"))||this.put(new FE):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof EA.window.SVGElement)&&"#document-fragment"!==this.node.parentNode.nodeName}namespace(){return this.isRoot()?this.attr({xmlns:DA,version:"1.1"}).attr("xmlns:xlink",AA,TA):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,TA).attr("xmlns:svgjs",null,TA)}root(){return this.isRoot()?this:super.root()}}mA({Container:{nested:UA((function(){return this.put(new ZL)}))}}),BA(ZL,"Svg",!0);class JL extends VE{constructor(t,e=t){super(RA("symbol",t),e)}}mA({Container:{symbol:UA((function(){return this.put(new JL)}))}}),BA(JL,"Symbol");var KL=Object.freeze(Object.defineProperty({__proto__:null,plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(EA.document.createTextNode(t)),this},length:function(){return this.node.getComputedTextLength()},x:function(t,e=this.bbox()){return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)},y:function(t,e=this.bbox()){return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)},move:function(t,e,n=this.bbox()){return this.x(t,n).y(e,n)},cx:function(t,e=this.bbox()){return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)},cy:function(t,e=this.bbox()){return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)},center:function(t,e,n=this.bbox()){return this.cx(t,n).cy(e,n)},ax:function(t){return this.attr("x",t)},ay:function(t){return this.attr("y",t)},amove:function(t,e){return this.ax(t).ay(e)},build:function(t){return this._build=!!t,this}},Symbol.toStringTag,{value:"Module"}));class QL extends BE{constructor(t,e=t){var n;super(RA("text",t),e),this.dom.leading=null!=(n=this.dom.leading)?n:new LE(1.3),this._rebuild=!0,this._build=!1}leading(t){return null==t?this.dom.leading:(this.dom.leading=new LE(t),this.rebuild())}rebuild(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){const t=this;let e=0;const n=this.dom.leading;this.each((function(i){if(kA(this.node))return;const r=EA.window.getComputedStyle(this.node).getPropertyValue("font-size"),a=n*new LE(r);this.dom.newLined&&(this.attr("x",t.attr("x")),"\n"===this.text()?e+=a:(this.attr("dy",i?a+e:0),e=0))})),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new LE(t.leading||1.3),this}writeDataToDom(){return IA(this,this.dom,{leading:1.3}),this}text(t){if(void 0===t){const e=this.node.childNodes;let n=0;t="";for(let i=0,r=e.length;i<r;++i)"textPath"===e[i].nodeName||kA(e[i])?0===i&&(n=i+1):(i!==n&&3!==e[i].nodeType&&!0===VA(e[i]).dom.newLined&&(t+="\n"),t+=e[i].textContent);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(let e=0,n=(t=(t+"").split("\n")).length;e<n;e++)this.newLine(t[e]);return this.build(!1).rebuild()}}WA(QL,KL),mA({Container:{text:UA((function(t=""){return this.put(new QL).text(t)})),plain:UA((function(t=""){return this.put(new QL).plain(t)}))}}),BA(QL,"Text");class tP extends BE{constructor(t,e=t){super(RA("tspan",t),e),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof QL))return this;const e=t.index(this),n=EA.window.getComputedStyle(this.node).getPropertyValue("font-size"),i=t.dom.leading*new LE(n);return this.dy(e?i:0).attr("x",t.x())}text(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}WA(tP,KL),mA({Tspan:{tspan:UA((function(t=""){const e=new tP;return this._build||this.clear(),this.put(e).text(t)}))},Text:{newLine:function(t=""){return this.tspan(t).newLine()}}}),BA(tP,"Tspan");class eP extends BE{constructor(t,e=t){super(RA("circle",t),e)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new LE(t).divide(2))}}WA(eP,{x:jE,y:WE,cx:UE,cy:YE,width:$E,height:qE}),mA({Container:{circle:UA((function(t=0){return this.put(new eP).size(t).move(0,0)}))}}),BA(eP,"Circle");class nP extends VE{constructor(t,e=t){super(RA("clipPath",t),e)}remove(){return this.targets().forEach((function(t){t.unclip()})),super.remove()}targets(){return yE("svg [clip-path*="+this.id()+"]")}}mA({Container:{clip:UA((function(){return this.defs().put(new nP)}))},Element:{clipper(){return this.reference("clip-path")},clipWith(t){const e=t instanceof nP?t:this.parent().clip().add(t);return this.attr("clip-path","url(#"+e.id()+")")},unclip(){return this.attr("clip-path",null)}}}),BA(nP,"ClipPath");class iP extends zE{constructor(t,e=t){super(RA("foreignObject",t),e)}}mA({Container:{foreignObject:UA((function(t,e){return this.put(new iP).size(t,e)}))}}),BA(iP,"ForeignObject");var rP=Object.freeze(Object.defineProperty({__proto__:null,dmove:function(t,e){return this.children().forEach((n=>{let i;try{i=n.node instanceof EA.window.SVGSVGElement?new fE(n.attr(["x","y","width","height"])):n.bbox()}catch(s){return}const r=new dE(n),a=r.translate(t,e).transform(r.inverse()),o=new uE(i.x,i.y).transform(a);n.move(o.x,o.y)})),this},dx:function(t){return this.dmove(t,0)},dy:function(t){return this.dmove(0,t)},height:function(t,e=this.bbox()){return null==t?e.height:this.size(e.width,t,e)},move:function(t=0,e=0,n=this.bbox()){const i=t-n.x,r=e-n.y;return this.dmove(i,r)},size:function(t,e,n=this.bbox()){const i=MA(this,t,e,n),r=i.width/n.width,a=i.height/n.height;return this.children().forEach((t=>{const e=new uE(n).transform(new dE(t).inverse());t.scale(r,a,e.x,e.y)})),this},width:function(t,e=this.bbox()){return null==t?e.width:this.size(t,e.height,e)},x:function(t,e=this.bbox()){return null==t?e.x:this.move(t,e.y,e)},y:function(t,e=this.bbox()){return null==t?e.y:this.move(e.x,t,e)}},Symbol.toStringTag,{value:"Module"}));class aP extends VE{constructor(t,e=t){super(RA("g",t),e)}}WA(aP,rP),mA({Container:{group:UA((function(){return this.put(new aP)}))}}),BA(aP,"G");class oP extends VE{constructor(t,e=t){super(RA("a",t),e)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,AA)}}WA(oP,rP),mA({Container:{link:UA((function(t){return this.put(new oP).to(t)}))},Element:{unlink(){const t=this.linker();if(!t)return this;const e=t.parent();if(!e)return this.remove();const n=e.index(t);return e.add(this,n),t.remove(),this},linkTo(t){let e=this.linker();return e||(e=new oP,this.wrap(e)),"function"==typeof t?t.call(e,e):e.to(t),this},linker(){const t=this.parent();return t&&"a"===t.node.nodeName.toLowerCase()?t:null}}}),BA(oP,"A");class sP extends VE{constructor(t,e=t){super(RA("mask",t),e)}remove(){return this.targets().forEach((function(t){t.unmask()})),super.remove()}targets(){return yE("svg [mask*="+this.id()+"]")}}mA({Container:{mask:UA((function(){return this.defs().put(new sP)}))},Element:{masker(){return this.reference("mask")},maskWith(t){const e=t instanceof sP?t:this.parent().mask().add(t);return this.attr("mask","url(#"+e.id()+")")},unmask(){return this.attr("mask",null)}}}),BA(sP,"Mask");class lP extends zE{constructor(t,e=t){super(RA("stop",t),e)}update(t){return("number"==typeof t||t instanceof LE)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new LE(t.offset)),this}}mA({Gradient:{stop:function(t,e,n){return this.put(new lP).update(t,e,n)}}}),BA(lP,"Stop");class uP extends zE{constructor(t,e=t){super(RA("style",t),e)}addText(t=""){return this.node.textContent+=t,this}font(t,e,n={}){return this.rule("@font-face",{fontFamily:t,src:e,...n})}rule(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;let n=t+"{";for(const i in e)n+=i.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()}))+":"+e[i]+";";return n+="}",n}(t,e))}}mA("Dom",{style(t,e){return this.put(new uP).rule(t,e)},fontface(t,e,n){return this.put(new uP).font(t,e,n)}}),BA(uP,"Style");class cP extends QL{constructor(t,e=t){super(RA("textPath",t),e)}array(){const t=this.track();return t?t.array():null}plot(t){const e=this.track();let n=null;return e&&(n=e.plot(t)),null==t?n:this}track(){return this.reference("href")}}mA({Container:{textPath:UA((function(t,e){return t instanceof QL||(t=this.text(t)),t.path(e)}))},Text:{path:UA((function(t,e=!0){const n=new cP;let i;if(t instanceof NL||(t=this.defs().path(t)),n.attr("href","#"+t,AA),e)for(;i=this.node.firstChild;)n.node.appendChild(i);return this.put(n)})),textPath(){return this.findOne("textPath")}},Path:{text:UA((function(t){return t instanceof QL||(t=(new QL).addTo(this.parent()).text(t)),t.path(this)})),targets(){return yE("svg textPath").filter((t=>(t.attr("href")||"").includes(this.id())))}}}),cP.prototype.MorphArray=kL,BA(cP,"TextPath");class dP extends BE{constructor(t,e=t){super(RA("use",t),e)}use(t,e){return this.attr("href",(e||"")+"#"+t,AA)}}mA({Container:{use:UA((function(t,e){return this.put(new dP).use(t,e)}))}}),BA(dP,"Use");const hP=zA;WA([ZL,JL,rL,iL,uL],vA("viewbox")),WA([lL,RL,zL,NL],vA("marker")),WA(QL,vA("Text")),WA(NL,vA("Path")),WA(FE,vA("Defs")),WA([QL,tP],vA("Tspan")),WA([VL,ZE,nL,WL],vA("radius")),WA(CE,vA("EventTarget")),WA(OE,vA("Dom")),WA(zE,vA("Element")),WA(BE,vA("Shape")),WA([VE,JE],vA("Container")),WA(nL,vA("Gradient")),WA(WL,vA("Runner")),mE.extend([...new Set(gA)]),function(t=[]){PL.push(...[].concat(t))}([LE,lE,fE,dE,EE,aL,kL,uE]),WA(PL,{to(t){return(new DL).type(this.constructor).from(this.toArray()).to(t)},fromArray(t){return this.init(t),this},toConsumable(){return this.toArray()},morph(t,e,n,i,r){return this.fromArray(t.map((function(t,a){return i.step(t,e[a],n,r[a],r)})))}});const pP=e({name:"WallExteriorEl",props:{item:{type:Object,default:()=>{}}},emits:["updateWeldModel"],setup(t,{emit:e}){const n=D((()=>{let e=t.item.width,n=t.item.height,i=t.item.translate[0],r=t.item.translate[1],a=t.item.height+60,o=t.item.width,s=t.item.height+60,l=t.item.settings.strokeWidth,u=t.item.rotate;return t.item.showDimensions,{width:e,height:n,trsX:i,trsY:r,Mx:0,My:a,Lx:o,Ly:s,path:`M0,${a} L${o},${s}`,strokeWidth:l,rotate:u}})),i=()=>({width:t.item.width,height:71,margin:-60}),o=D((()=>i().margin+"px"));return I((()=>{const e=r(null),o=i();e.value=hP().addTo(`#wall_${t.item.id}`).size(o.width,o.height);const s=n=>{const i=e.value.group(),r=i.group(),a=i.group(),o=i.group();r.path(n.path).fill("none").stroke({color:"#000",width:n.strokeWidth});t.item.showDimensions&&(()=>{const e=t.item.height+5,i=n.width/2-20-5<5?5:n.width/2-20-5,r=n.width/2-5+60>n.width-5?n.width-5:n.width/2-5+60;let s=`M5,${n.My-e} L5,${n.My-e-35} L${i},${n.My-e-35}\n                        M${r},${n.My-e-35} L${n.width-5},${n.My-e-35} L${n.width-5},${n.My-e}`;a.path(s).fill("none").stroke({color:"#848687",width:1}).fill("none").stroke({width:1,color:"#848687"});const l=(n.width-10-20)/2,u=n.My-e-40;o.rect(80,12).move(l,u).fill("none").stroke({width:0}).attr({visibility:"hidden","no-export":1});let c=`${n.width.toFixed(2)}' ${n.rotate.toFixed(2)}"`;o.text(c).font({family:"Arial",size:10,anchor:"start",fill:"#000"}).move(l,u)})()};s(n.value),a(n,(t=>{(t=>{e.value.clear();const n=i();e.value.size(n.width,n.height),s(t)})(t)}),{deep:!0})})),{svgData:n,getNewWidthHeight:i,margin:o}}}),fP=()=>{b((t=>{var e,n,i;return{cfbd64d0:null==(i=null==(n=null==(e=t.props)?void 0:e.item)?void 0:n.settings)?void 0:i.bgColor,"3f9174ca":t.margin}}))},gP=pP.setup;pP.setup=gP?(t,e)=>(fP(),gP(t,e)):fP;const mP=["id","width","height"];var vP=il(pP,[["render",function(t,e,r,a,o,s){return n(),i("div",{id:`wall_${t.item.id}`,class:O(["wall-exterior",{"flex flex-col flex-nowrap":!0,[t.item.type]:t.item.type,"with-bg":t.item.settings.bgColor}]),width:t.getNewWidthHeight().width,height:t.getNewWidthHeight().height},null,10,mP)}],["__scopeId","data-v-18473b86"]]);e({name:"NewTopBar",props:{locked:{type:Boolean,default:!1},grpNav:{type:Array,default:()=>[]}},emits:["navGoBack","lockToggle"],setup:(t,{emit:e})=>({tab:r("home"),navGoBack:()=>{e("navGoBack")},lockToggle:()=>{e("lockToggle")}})});const yP=e({name:"DeviceInfo",props:{deviceModel:{type:Object}},emits:["updateDeviceModel","testSendMsg"],data:()=>({treeData:[{id:1,name:"Node 1",children:[{id:2,name:"Child 1"},{id:3,name:"Child 2"}]},{id:4,name:"Node 2",children:[{id:5,name:"Child 3"}]}],listData:[{id:1,name:"Item 1"},{id:2,name:"Item 2"},{id:3,name:"Item 3"}]}),setup(t,{emit:e}){var n,i,o;const s=xt(),l=r(""),u=r(null),c=r(""),d=r([""]),h=r(["All Devices"]),p=Ps.deviceList,f=Ps.graphicList,g=r({device:"",deviceId:-1,serialNumber:-1,graphic:-1,graphicFull:{id:-1,fullLabel:"",label:"",elementCount:""}}),m=()=>{g.value.graphic=-1,g.value.graphicFull={id:-1,fullLabel:"",label:"",elementCount:""}},v=t=>{const e=(t,n)=>{for(const i of t){if(i.label===n)return null==i?void 0:i.pl;if(i.children){const t=e(i.children,n);if(t)return t}}return null};return e(p.value,t)};I((()=>{const t=ws.DeviceOpt.getCurrentDevice();null!==t&&(g.value=t,ws.DeviceOpt.setDeviceAndGraphicDefaultData(t),c.value=t.device);if(0===p.value.length||0===f.value.length){const t="Can not load the device data. Please check whether the T3000 is running or not.";ws.QuasarUtil.setGlobalMsg("error",t,!0,"get_panel_list_data",null)}else ws.QuasarUtil.clearGlobalMsg("get_panel_list_data")}));const y=r(null!=(o=null==(i=null==(n=Ls)?void 0:n.value)?void 0:i.find((t=>"get_panel_list_data"===t.msgType)))?o:{});return a(Ls,(t=>{var e;y.value=null!=(e=null==t?void 0:t.find((t=>"get_panel_list_data"===t.msgType)))?e:{}}),{deep:!0}),a([p,f],(([t,e])=>{t.length>0&&e.length>0&&ws.QuasarUtil.clearGlobalMsg("get_panel_list_data")}),{deep:!0}),{filter:l,filterRef:u,selected:c,ticked:d,expanded:h,dvList:p,myFilterMethod:(t,e)=>{const n=e.toLowerCase();return t.label&&t.label.toLowerCase().indexOf(n)>-1&&t.label.toLowerCase().indexOf("(*)")>-1},resetFilter:()=>{l.value="",u.value.focus()},graphicList:f,currentDevice:g,clearGraphicSelection:m,treeSelected:t=>{var e,n;const i=t=>{t.forEach((t=>{"All Devices"===t.label?t.icon="devices":void 0===t.icon||null===t.icon||(t.icon="horizontal_rule"),t.children&&i(t.children)}))},r=(t,e)=>{for(const n of t){if(n.label===e)return n;if(n.children){const t=r(n.children,e);if(t)return t}}return null};i(p.value);const a=r(p.value,t);if(a){a.icon="check",g.value.device=a.label;const t=v(a.label);g.value.deviceId=null!=(e=null==t?void 0:t.panel_number)?e:-1,g.value.serialNumber=null!=(n=null==t?void 0:t.serial_number)?n:-1}else null===t&&(g.value.device="",g.value.deviceId=-1,g.value.serialNumber=-1);if(m(),""!==g.value.device){const t=g.value.deviceId,e=g.value.graphic;if(ws.WsClient.GetPanelData(t),e<=0)return;ws.WsClient.GetInitialData(t,e,!1)}},updateGraphicSelection:t=>{const e=null!=t?Number(t):-1;g.value.graphic=e;const n=f.value.find((e=>e.id===t));n&&(g.value.graphicFull.id=n.id,g.value.graphicFull.fullLabel=n.fullLabel,g.value.graphicFull.label=n.label,g.value.graphicFull.elementCount=n.elementCount);g.value.deviceId},saveCurrentSelection:()=>{if(z.Debug("= Dvi: saveCurrentSelection / currentDevice:",[g.value.device,g.value.graphic]),""!==g.value.device&&-1!==g.value.graphic)try{ws.WsClient.clearInitialDataInterval(),ws.DeviceOpt.saveCurrentDevice(g.value),z.Debug("= Dvi: saveCurrentSelection / currentDevice saved:",[g.value.device,g.value.graphic]),ws.DeviceOpt.addPresetsData(),ws.WsClient.GetInitialData(g.value.deviceId,g.value.graphic,!0),z.Debug("= Dvi: saveCurrentSelection / GetInitialData called:",[g.value.device,g.value.graphic]),e("updateDeviceModel",!1,g.value)}catch(t){return void s.notify({type:"negative",message:"= Dev test "+t})}else s.notify({type:"negative",message:"Please select a device and a graphic"})},testSendMsg:t=>{e("testSendMsg",t)},noNodesLabel:"No devices available",reloadPanelsData:()=>{ws.WsClient.GetPanelsList()},glMsg:y}}}),_P={class:".dvcontainer"},xP={key:0,class:"q-pa-sm row"},bP={class:"q-pa-sm row"},wP={class:"text-weight-medium select-text"},MP={class:"text-weight-medium select-text"},SP={class:"text-weight-medium select-text"},CP={class:"text-weight-medium select-text"},kP={class:"q-pa-sm row",style:{"margin-top":"-8px"}},IP={class:"col-12 col-sm-4"},DP={class:"col-12 col-sm-8",style:{"padding-left":"5px"}};var TP=il(yP,[["render",function(e,r,a,c,h,_){const x=R("q-link");return n(),i("div",_P,[e.glMsg.isShow?(n(),i("div",xP,[l(ft,{"inline-actions":"",class:"text-white bg-purple",style:{width:"100%"}},{action:u((()=>[l(y,{flat:"",caption:"",color:"white",label:"Reload data",onClick:e.reloadPanelsData},null,8,["onClick"])])),default:u((()=>[p(s(e.glMsg.message)+" ",1)])),_:1})])):A("",!0),o("div",bP,[l(et,{bordered:"",class:"rounded-borders col-12",style:{height:"50px"}},{default:u((()=>[l(Z,null,{default:u((()=>[l(J,{top:"",class:"col-1"},{default:u((()=>[l(K,{class:"q-mt-sm text-weight-medium",style:{"font-size":"13px"}},{default:u((()=>[...r[4]||(r[4]=[p("Current:",-1)])])),_:1})])),_:1}),l(J,{top:"",class:"col-3"},{default:u((()=>[l(K,{class:"q-mt-sm"},{default:u((()=>[p(s(e.currentDevice.device),1)])),_:1})])),_:1}),l(J,{top:"",class:"col-1"},{default:u((()=>[l(K,{caption:"",class:"select-title"},{default:u((()=>[...r[5]||(r[5]=[p(" Graphic ",-1)])])),_:1}),l(K,null,{default:u((()=>[o("span",wP,s(-1===e.currentDevice.graphicFull.id?"":e.currentDevice.graphicFull.id),1)])),_:1})])),_:1}),l(J,{top:"",class:"col-3"},{default:u((()=>[l(K,{caption:"",class:"select-title"},{default:u((()=>[...r[6]||(r[6]=[p(" Full label ",-1)])])),_:1}),l(K,null,{default:u((()=>[o("span",MP,s(e.currentDevice.graphicFull.fullLabel),1)])),_:1})])),_:1}),l(J,{top:""},{default:u((()=>[l(K,{caption:"",class:"select-title"},{default:u((()=>[...r[7]||(r[7]=[p(" Label ",-1)])])),_:1}),l(K,null,{default:u((()=>[o("span",SP,s(e.currentDevice.graphicFull.label),1)])),_:1})])),_:1}),l(J,{top:""},{default:u((()=>[l(K,{caption:"",class:"select-title"},{default:u((()=>[...r[8]||(r[8]=[p(" Element ",-1)])])),_:1}),l(K,null,{default:u((()=>[o("span",CP,s(e.currentDevice.graphicFull.elementCount),1)])),_:1})])),_:1}),l(J,{avatar:"",top:""},{default:u((()=>[l(K,{caption:"",class:"select-title"},{default:u((()=>[...r[9]||(r[9]=[p(" Action ",-1)])])),_:1}),l(x,{class:"text-primary",style:{"font-size":"12px","margin-top":"2px",cursor:"pointer"},onClick:e.saveCurrentSelection},{default:u((()=>[r[11]||(r[11]=p("Confirm ",-1)),l(t,{anchor:"top middle",self:"center left"},{default:u((()=>[...r[10]||(r[10]=[p(" Confirm the current selection ",-1)])])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})]),o("div",kP,[o("div",IP,[l(E,{ref:"filterRef",filled:"",modelValue:e.filter,"onUpdate:modelValue":r[0]||(r[0]=t=>e.filter=t),placeholder:"Search here"},{append:u((()=>[""!==e.filter?(n(),d(g,{key:0,name:"clear",class:"cursor-pointer",onClick:e.resetFilter},null,8,["onClick"])):A("",!0),""===e.filter?(n(),d(g,{key:1,name:"search"})):A("",!0)])),_:1},8,["modelValue"]),l(f,{color:"grey",style:{"margin-top":"2px","margin-bottom":"2px"}}),l(gt,{nodes:e.dvList,noNodesLabel:e.noNodesLabel,"node-key":"label",selected:e.selected,"onUpdate:selected":[r[1]||(r[1]=t=>e.selected=t),e.treeSelected],ticked:e.ticked,"onUpdate:ticked":r[2]||(r[2]=t=>e.ticked=t),expanded:e.expanded,"onUpdate:expanded":r[3]||(r[3]=t=>e.expanded=t),filter:e.filter,accordion:!0,style:{"max-height":"326px","overflow-y":"auto"},"selected-color":"primary"},null,8,["nodes","noNodesLabel","selected","ticked","expanded","filter","onUpdate:selected"])]),o("div",DP,[l(et,{style:{background:"#f0f0f0","font-weight":"600","font-size":"13px"}},{default:u((()=>[l(Z,{style:{padding:"0","min-height":"35px"}},{default:u((()=>[l(J,{top:"",class:"col-1"},{default:u((()=>[l(K,{style:{"margin-left":"5px","margin-top":"2px"}},{default:u((()=>[l(y,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"remove",onClick:e.clearGraphicSelection},{default:u((()=>[l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[12]||(r[12]=[p(" Clear selection ",-1)])])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),l(J,{top:"",class:"col-1"},{default:u((()=>[l(K,{class:"q-mt-sm header-title"},{default:u((()=>[...r[13]||(r[13]=[p("Graphic",-1)])])),_:1})])),_:1}),l(J,{top:"",class:"col-4"},{default:u((()=>[l(K,{class:"q-mt-sm header-title"},{default:u((()=>[...r[14]||(r[14]=[p("Full Label",-1)])])),_:1})])),_:1}),l(J,{top:"",class:"col-3"},{default:u((()=>[l(K,{class:"q-mt-sm header-title"},{default:u((()=>[...r[15]||(r[15]=[p("Label",-1)])])),_:1})])),_:1}),l(J,{top:"",class:"col-2"},{default:u((()=>[l(K,{class:"q-mt-sm header-title"},{default:u((()=>[...r[16]||(r[16]=[p("Element",-1)])])),_:1})])),_:1})])),_:1})])),_:1}),l(f,{color:"grey",style:{"margin-top":"2px","margin-bottom":"2px"}}),(n(!0),i(m,null,v(e.graphicList,(t=>(n(),d(et,{key:t.id},{default:u((()=>[l(Z,{tag:"label",style:{padding:"0px","min-height":"35px","border-bottom":"1px solid #f0f0f0","font-size":"13px"}},{default:u((()=>[l(J,{top:"",class:"col-1"},{default:u((()=>[l(V,{modelValue:e.currentDevice.graphic,"onUpdate:modelValue":[t=>e.currentDevice.graphic=t,e.updateGraphicSelection],val:t.id,color:"blue","checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye"},null,8,["modelValue","onUpdate:modelValue","val"])])),_:2},1024),l(J,{top:"",class:"col-1"},{default:u((()=>[l(K,{class:"graphic-label"},{default:u((()=>[p(s(t.id),1)])),_:2},1024)])),_:2},1024),l(J,{top:"",class:"col-4"},{default:u((()=>[l(K,{class:"graphic-label"},{default:u((()=>[p(s(t.fullLabel),1)])),_:2},1024)])),_:2},1024),l(J,{top:"",class:"col-3"},{default:u((()=>[l(K,{class:"graphic-label"},{default:u((()=>[p(s(t.label),1)])),_:2},1024)])),_:2},1024),l(J,{top:"",class:"col-2"},{default:u((()=>[l(K,{class:"graphic-label"},{default:u((()=>[p(s(t.elementCount),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])])])}],["__scopeId","data-v-ce7b2894"]]);const AP=e({name:"NewTopToolBar",props:{locked:{type:Boolean,default:!1},grpNav:{type:Array,default:()=>[]},object:{type:Object,required:!1},selectedCount:{type:Number,required:!0},disableUndo:{type:Boolean,required:!1},disableRedo:{type:Boolean,required:!1},disablePaste:{type:Boolean,required:!1},zoom:{type:Number,required:!0},rulersGridVisible:{type:Boolean,required:!1},deviceModel:{type:Object,required:!1}},emits:["navGoBack","lockToggle","menuAction","showMoreDevices"],setup(t,{emit:e}){const n=r(null),i=r("Device (-)"),o=F(),s=xt();const l=r(t.rulersGridVisible?"Enable":"Disable");a((()=>t.rulersGridVisible),(t=>{l.value=t?"Enable":"Disable"}));return I((()=>{n.value=t.deviceModel,i.value=`Device (${t.deviceModel.data.device})`})),{tab:r("home"),navGoBack:()=>{e("navGoBack")},lockToggle:()=>{e("lockToggle")},menuActionEmit:function(t,n=null){e("menuAction",t,n)},logout:function(){s.cookies.remove("token"),Ts.value=null,localStorage.removeItem("user")},tools:Qs,user:Ts,showRulersGrid:l,showMoreDevices:()=>{e("showMoreDevices")},currentDevice:n,deviceTabTitle:i,devVersion:As,navigateTo:t=>{o.push({path:t})}}}}),EP={class:"tool-bar-container"},LP={class:"left-panel"},PP={class:"tool-title"},NP={style:{"margin-left":"0px","font-size":"10px",color:"gray","z-index":"99",position:"absolute","margin-top":"0px"}},OP={class:"tool-btns"},zP={key:0},RP={key:1},VP={class:"right-panel"},FP={style:{"margin-left":"auto"}},BP={class:"container"},HP={class:"sub-div"},GP={class:"button-row"},jP={class:"button-row"},WP={class:"sub-div"},UP={class:"button-row"},YP={class:"button-row"},$P={class:"sub-div"},qP={class:"button-row"},XP={class:"sub-div"},ZP={class:"button-row"},JP={class:"button-row"},KP={class:"sub-div"},QP={class:"button-row"},tN={class:"button-row"},eN={class:"sub-div"},nN={class:"button-row"},iN={class:"sub-div"},rN={class:"button-row"},aN={class:"button-row"},oN={class:"sub-div"},sN={class:"button-row"},lN={class:"button-row"},uN={class:"sub-div"},cN={class:"button-row"},dN={class:"button-row"},hN={class:"sub-div"},pN={class:"button-row"},fN={class:"button-row"},gN={class:"sub-div"},mN={class:"button-row"},vN={class:"button-row",style:{"margin-top":"-3px"}},yN={class:"flex items-center px-1",style:{"font-size":"12px"}},_N=["value"],xN={class:"container"},bN={class:"sub-div"},wN={class:"button-row"},MN={class:"sub-div"},SN={class:"button-row"},CN={class:"sub-div"},kN={class:"button-row"},IN={class:"row device-row"},DN={class:"text-weight-medium select-text"},TN={class:"text-weight-medium select-text"},AN={class:"text-weight-medium select-text"},EN={class:"text-weight-medium select-text"};var LN=il(AP,[["render",function(e,r,a,g,b,w){var M;const C=R("q-link");return n(),i("div",EP,[o("div",LP,[o("div",PP,[r[28]||(r[28]=o("p",{style:{"font-size":"12px"}},"T3000 Hvac",-1)),o("span",NP,s(e.devVersion),1)]),o("div",OP,[l(y,{dense:"",flat:"",round:"",icon:"menu",size:"sm",onClick:e.lockToggle},null,8,["onClick"]),l(y,{icon:e.locked?"lock_outline":"lock_open",class:"lock-btn",flat:"",round:"",dense:"",size:"sm",color:e.locked?"primary":"normal",onClick:e.lockToggle},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[e.locked?(n(),i("strong",RP,"Unlock")):(n(),i("strong",zP,"Lock"))])),_:1})])),_:1},8,["icon","color","onClick"]),(null==(M=e.grpNav)?void 0:M.length)>=0?(n(),d(y,{key:0,icon:"arrow_back",class:"back-btn mr-2",dense:"",round:"",size:"sm",onClick:e.navGoBack},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[29]||(r[29]=[o("strong",null,"Go back",-1)])])),_:1})])),_:1},8,["onClick"])):A("",!0)])]),o("div",VP,[l(S,{class:"right-panel-card"},{default:u((()=>[l(ut,{modelValue:e.tab,"onUpdate:modelValue":r[1]||(r[1]=t=>e.tab=t),dense:"",class:"right-tab text-white","active-color":"#fff","indicator-color":"#fff",align:"left","narrow-indicator":""},{default:u((()=>[l(ct,{name:"home","no-caps":"",label:"Home"}),l(ct,{name:"file","no-caps":"",label:"File"}),l(ct,{name:"device","no-caps":"",label:`Device (${void 0===e.deviceModel.data.device?"-":e.deviceModel.data.device})`},null,8,["label"]),l(ct,{name:"newui","no-caps":"",label:"New UI",onClick:r[0]||(r[0]=t=>e.navigateTo("hvac/t2"))}),o("div",FP,[l(y,{flat:"",color:"primary",label:"Login",to:"/login"})])])),_:1},8,["modelValue"]),l(f),l(dt,{modelValue:e.tab,"onUpdate:modelValue":r[27]||(r[27]=t=>e.tab=t),class:"tab-panel"},{default:u((()=>[l(ht,{name:"home",class:"home-panel"},{default:u((()=>[o("div",BP,[o("div",HP,[o("div",GP,[l(y,{flat:"",size:"sm",icon:"content_copy","no-caps":"",onClick:r[2]||(r[2]=t=>e.menuActionEmit("copy")),disable:e.selectedCount<1},{default:u((()=>[r[31]||(r[31]=p("Copy ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[30]||(r[30]=[o("strong",null,"Copy",-1),o("em",null," (Ctrl + C)",-1)])])),_:1})])),_:1},8,["disable"])]),o("div",jP,[l(y,{flat:"",size:"sm",icon:"content_paste","no-caps":"",onClick:r[3]||(r[3]=t=>e.menuActionEmit("paste")),disable:e.disablePaste},{default:u((()=>[r[33]||(r[33]=p("Paste ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[32]||(r[32]=[o("strong",null,"Copy",-1),o("em",null," (Ctrl + V)",-1)])])),_:1})])),_:1},8,["disable"])])]),o("div",WP,[o("div",UP,[l(y,{flat:"",size:"sm",icon:"undo","no-caps":"",onClick:r[4]||(r[4]=t=>e.menuActionEmit("undoAction")),disable:e.disableUndo},{default:u((()=>[r[35]||(r[35]=p("Undo ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[34]||(r[34]=[o("strong",null,"Undo",-1),o("em",null," (Ctrl + Z)",-1)])])),_:1})])),_:1},8,["disable"])]),o("div",YP,[l(y,{flat:"",size:"sm",icon:"redo","no-caps":"",onClick:r[5]||(r[5]=t=>e.menuActionEmit("redoAction")),disable:e.disableRedo},{default:u((()=>[r[37]||(r[37]=p("Redo ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[36]||(r[36]=[o("strong",null,"Redo",-1),o("em",null," (Ctrl + Y)",-1)])])),_:1})])),_:1},8,["disable"])])]),o("div",$P,[o("div",qP,[l(y,{flat:"",size:"sm",icon:"delete","no-caps":"",onClick:r[6]||(r[6]=t=>e.menuActionEmit("deleteSelected")),disable:e.selectedCount<1},{default:u((()=>[r[39]||(r[39]=p("Delete ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[38]||(r[38]=[o("strong",null,"Delete selected",-1),o("em",null," (Delete)",-1)])])),_:1})])),_:1},8,["disable"])])]),l(f,{color:"white",inset:"",vertical:""}),o("div",XP,[o("div",ZP,[l(y,{flat:"",size:"sm",icon:"join_full","no-caps":"",onClick:r[7]||(r[7]=t=>e.menuActionEmit("groupSelected")),disable:e.selectedCount<2},{default:u((()=>[r[41]||(r[41]=p("Group ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[40]||(r[40]=[o("strong",null,"Group selected",-1),o("em",null," (Ctrl + G)",-1)])])),_:1})])),_:1},8,["disable"])]),o("div",JP,[l(y,{flat:"",size:"sm",icon:"join_inner","no-caps":"",onClick:r[8]||(r[8]=t=>e.menuActionEmit("ungroupSelected")),disable:e.selectedCount<2},{default:u((()=>[r[43]||(r[43]=p("Ungroup ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[42]||(r[42]=[o("strong",null,"Ungroup selected",-1),o("em",null," (Ctrl + Shift + G)",-1)])])),_:1})])),_:1},8,["disable"])])]),o("div",KP,[o("div",QP,[l(y,{flat:"",size:"sm",icon:"library_books","no-caps":"",onClick:r[9]||(r[9]=t=>e.menuActionEmit("addToLibrary")),disable:e.selectedCount<2},{default:u((()=>[r[45]||(r[45]=p("Add to library ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[44]||(r[44]=[o("strong",null,"Add selected to library",-1),o("em",null," (Ctrl + L)",-1)])])),_:1})])),_:1},8,["disable"])]),o("div",tN,[l(y,{flat:"",size:"sm",icon:"file_copy","no-caps":"",onClick:r[10]||(r[10]=t=>e.menuActionEmit("duplicateSelected")),disable:e.selectedCount<1},{default:u((()=>[r[47]||(r[47]=p("Duplicate ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[46]||(r[46]=[o("strong",null,"Duplicate selected",-1),o("em",null," (Ctrl + D)",-1)])])),_:1})])),_:1},8,["disable"])])]),l(f,{color:"white",inset:"",vertical:""}),o("div",eN,[o("div",nN,[l(y,{flat:"",size:"sm",icon:"splitscreen","no-caps":"",onClick:r[11]||(r[11]=t=>e.menuActionEmit("weldSelected")),disable:!(e.selectedCount>=2)},{default:u((()=>[r[49]||(r[49]=p("Weld ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[48]||(r[48]=[o("strong",null,"Weld selected",-1),o("em",null," (Ctrl + B)",-1)])])),_:1})])),_:1},8,["disable"])])]),o("div",iN,[o("div",rN,[l(y,{flat:"",size:"sm",icon:"link","no-caps":"",onClick:r[12]||(r[12]=t=>e.menuActionEmit("link")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[r[51]||(r[51]=p("Link ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[50]||(r[50]=[o("strong",null,"Link",-1)])])),_:1})])),_:1},8,["disable"])]),o("div",aN,[l(y,{flat:"",size:"sm",icon:"transform","no-caps":"",disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[r[53]||(r[53]=p("Convert to ",-1)),l(nt,{anchor:"top end",self:"top start","auto-close":""},{default:u((()=>[l(et,null,{default:u((()=>[(n(!0),i(m,null,v(e.tools.filter((t=>t.name!==e.object.type&&!["Duct","Pointer","Text"].includes(t.name))),(t=>c((n(),d(Z,{key:t.name,dense:"",clickable:"",onClick:n=>e.menuActionEmit("convertObjectType",t.name)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:t.icon,color:"grey-7","text-color":"white"},null,8,["icon"])])),_:2},1024),l(J,null,{default:u((()=>[p(s(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[_t]]))),128))])),_:1})])),_:1}),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[52]||(r[52]=[o("strong",null,"Convert to",-1)])])),_:1})])),_:1},8,["disable"])])]),l(f,{color:"white",inset:"",vertical:""}),o("div",oN,[o("div",sN,[l(y,{flat:"",size:"sm",icon:"autorenew","no-caps":"",onClick:r[13]||(r[13]=t=>e.menuActionEmit("rotate90")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[r[55]||(r[55]=p("Rotate 90 ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[54]||(r[54]=[o("strong",null,"Rotate 90",-1)])])),_:1})])),_:1},8,["disable"])]),o("div",lN,[l(y,{flat:"",size:"sm",icon:"sync","no-caps":"",onClick:r[14]||(r[14]=t=>e.menuActionEmit("rotate-90")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[r[57]||(r[57]=p("Rotate -90 ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[56]||(r[56]=[o("strong",null,"Rotate -90",-1)])])),_:1})])),_:1},8,["disable"])])]),o("div",uN,[o("div",cN,[l(y,{flat:"",size:"sm",icon:"flip","no-caps":"",onClick:r[15]||(r[15]=t=>e.menuActionEmit("flipH")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[r[59]||(r[59]=p("Flip horizontal ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[58]||(r[58]=[o("strong",null,"Flip horizontal",-1)])])),_:1})])),_:1},8,["disable"])]),o("div",dN,[l(y,{flat:"",size:"sm",icon:"flip","no-caps":"",onClick:r[16]||(r[16]=t=>e.menuActionEmit("flipV")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[r[61]||(r[61]=p("Flip vertical ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[60]||(r[60]=[o("strong",null,"Flip vertical",-1)])])),_:1})])),_:1},8,["disable"])])]),o("div",hN,[o("div",pN,[l(y,{flat:"",size:"sm",icon:"flip_to_front","no-caps":"",onClick:r[17]||(r[17]=t=>e.menuActionEmit("bringToFront")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[r[63]||(r[63]=p("Bring to front ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[62]||(r[62]=[o("strong",null,"Bring to front",-1)])])),_:1})])),_:1},8,["disable"])]),o("div",fN,[l(y,{flat:"",size:"sm",icon:"flip_to_back","no-caps":"",onClick:r[18]||(r[18]=t=>e.menuActionEmit("sendToBack")),disable:!e.selectedCount||e.selectedCount>1},{default:u((()=>[r[65]||(r[65]=p("Send to back ",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[64]||(r[64]=[o("strong",null,"Send to Back",-1)])])),_:1})])),_:1},8,["disable"])])]),l(f,{color:"white",inset:"",vertical:""}),o("div",gN,[o("div",mN,[l(_,{color:"blue","false-value":"Disable","true-value":"Enable",modelValue:e.showRulersGrid,"onUpdate:modelValue":[r[19]||(r[19]=t=>e.showRulersGrid=t),r[20]||(r[20]=t=>e.menuActionEmit("toggleRulersGrid",e.showRulersGrid))],size:"xs",style:{"margin-top":"-3px"}},{default:u((()=>[r[66]||(r[66]=o("span",{style:{"font-size":"11px"}},"Rulers & Grid",-1)),l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[p(" Show rulers and grid ("+s(e.showRulersGrid)+") ",1)])),_:1})])),_:1},8,["modelValue"])]),o("div",vN,[l(y,{onClick:r[21]||(r[21]=t=>e.menuActionEmit("zoomOut")),disable:e.zoom<=10,dense:"",flat:"",size:"sm",icon:"zoom_out"},{default:u((()=>[l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[67]||(r[67]=[p(" Zoom out ",-1)])])),_:1})])),_:1},8,["disable"]),o("div",yN,[o("input",{class:"zoom-input",onKeydown:r[22]||(r[22]=x((t=>e.menuActionEmit("zoomSet",t.target.value)),["enter"])),value:e.zoom,type:"number"},null,40,_N),r[68]||(r[68]=p("% ",-1))]),l(y,{onClick:r[23]||(r[23]=t=>e.menuActionEmit("zoomIn")),disable:e.zoom>=400,dense:"",flat:"",size:"sm",icon:"zoom_in"},{default:u((()=>[l(t,{anchor:"top middle",self:"center right"},{default:u((()=>[...r[69]||(r[69]=[p(" Zoom in ",-1)])])),_:1})])),_:1},8,["disable"])])])])])),_:1}),l(ht,{name:"file",class:"file-panel"},{default:u((()=>[o("div",xN,[o("div",bN,[o("div",wN,[l(y,{flat:"",size:"sm",icon:"assignment","no-caps":"",label:"New Project",style:{"font-size":"11px"},onClick:r[24]||(r[24]=t=>e.menuActionEmit("newProject"))}),r[70]||(r[70]=o("span",{class:"file-short-cut"},"(Ctrl + R)",-1))])]),l(f,{color:"white",inset:"",vertical:""}),o("div",MN,[o("div",SN,[l(y,{flat:"",size:"sm",icon:"file_open","no-caps":"",label:"Import",style:{"font-size":"11px"},onClick:r[25]||(r[25]=t=>e.menuActionEmit("importJsonAction"))})])]),o("div",CN,[o("div",kN,[l(y,{flat:"",size:"sm",icon:"file_open","no-caps":"",label:"Export",style:{"font-size":"11px"},onClick:r[26]||(r[26]=t=>e.menuActionEmit("exportToJsonAction"))})])])])])),_:1}),l(ht,{name:"device",class:"device-panel"},{default:u((()=>[o("div",IN,[l(et,{class:"col-12",style:{height:"50px"}},{default:u((()=>[l(Z,null,{default:u((()=>[l(J,{top:"",class:"col-3"},{default:u((()=>[l(K,{class:"q-mt-sm"},{default:u((()=>{var t,n;return[p("Current: "+s(null==(n=null==(t=e.currentDevice)?void 0:t.data)?void 0:n.device),1)]})),_:1})])),_:1}),l(J,{top:"",class:"col-1"},{default:u((()=>[l(K,{caption:"",class:"select-title"},{default:u((()=>[...r[71]||(r[71]=[p(" Graphic ",-1)])])),_:1}),l(K,null,{default:u((()=>{var t,n,i;return[o("span",DN,s(null==(i=null==(n=null==(t=e.currentDevice)?void 0:t.data)?void 0:n.graphicFull)?void 0:i.id),1)]})),_:1})])),_:1}),l(J,{top:"",class:"col-2"},{default:u((()=>[l(K,{caption:"",class:"select-title"},{default:u((()=>[...r[72]||(r[72]=[p(" Full label ",-1)])])),_:1}),l(K,null,{default:u((()=>{var t,n,i;return[o("span",TN,s(null==(i=null==(n=null==(t=e.currentDevice)?void 0:t.data)?void 0:n.graphicFull)?void 0:i.fullLabel),1)]})),_:1})])),_:1}),l(J,{top:""},{default:u((()=>[l(K,{caption:"",class:"select-title"},{default:u((()=>[...r[73]||(r[73]=[p(" Label ",-1)])])),_:1}),l(K,null,{default:u((()=>{var t,n,i;return[o("span",AN,s(null==(i=null==(n=null==(t=e.currentDevice)?void 0:t.data)?void 0:n.graphicFull)?void 0:i.label),1)]})),_:1})])),_:1}),l(J,{top:""},{default:u((()=>[l(K,{caption:"",class:"select-title"},{default:u((()=>[...r[74]||(r[74]=[p(" Element Count ",-1)])])),_:1}),l(K,null,{default:u((()=>{var t,n,i;return[o("span",EN,s(null==(i=null==(n=null==(t=e.currentDevice)?void 0:t.data)?void 0:n.graphicFull)?void 0:i.elementCount),1)]})),_:1})])),_:1}),l(J,{avatar:"",top:""},{default:u((()=>[l(K,{caption:"",class:"select-title"},{default:u((()=>[...r[75]||(r[75]=[p(" Action ",-1)])])),_:1}),l(C,{class:"text-primary",style:{"font-size":"12px","margin-top":"2px",cursor:"pointer"},onClick:e.showMoreDevices},{default:u((()=>[r[77]||(r[77]=p("Show more devices ",-1)),l(t,{anchor:"top middle",self:"center left"},{default:u((()=>[...r[76]||(r[76]=[p(" Save the current selection ",-1)])])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"])])),_:1})])])}],["__scopeId","data-v-24d4437a"]]);const PN={style:{display:"flex","justify-content":"flex-start",gap:"8px"}},NN=e({__name:"ScheduleModal",props:{visible:{type:Boolean,default:!1}},setup(t){(()=>{const t=[];for(let e=0;e<24;e++)for(let n=0;n<60;n+=15){const i=e.toString().padStart(2,"0"),r=n.toString().padStart(2,"0");t.push(`${i}:${r}`)}})();const e=r(Array.from({length:8},((t,e)=>({key:(e+1).toString(),status:e%2==0,monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:"",sunday:"",holiday1:"",holiday2:""})))),i=[{title:"On/Off",key:"status"},{title:"Monday",dataIndex:"monday",key:"monday"},{title:"Tuesday",dataIndex:"tuesday",key:"tuesday"},{title:"Wednesday",dataIndex:"wednesday",key:"wednesday"},{title:"Thursday",dataIndex:"thursday",key:"thursday"},{title:"Friday",dataIndex:"friday",key:"friday"},{title:"Saturday",dataIndex:"saturday",key:"saturday"},{title:"Sunday",dataIndex:"sunday",key:"sunday"},{title:"Holiday 1",dataIndex:"holiday1",key:"holiday1"},{title:"Holiday 2",dataIndex:"holiday2",key:"holiday2"}],a=()=>{e.value=e.value.map((t=>{const e=t.monday;return{...t,tuesday:e,wednesday:e,thursday:e,friday:e}}))},s=()=>{v()},c=()=>{e.value=e.value.map((t=>({...t,monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:"",sunday:"",holiday1:"",holiday2:""})))},h=()=>{dl.value=!1},f=()=>{dl.value=!1},g=r("Schedule full label test title"),m=r("T3-TB / Test Schedule / Panel 1 / Schedule 1");I((()=>{if(z.Debug("= ScheduleModal: onMounted scheduleItemData",cl.value),cl.value&&cl.value.t3Entry){const{id:t,label:e,description:n}=cl.value.t3Entry;g.value=[t,e,n].filter(Boolean).join(", ")}if(cl.value&&cl.value.t3Entry){const{command:t,control:e,description:n,id:i,label:r,type:a}=cl.value.t3Entry;m.value=[t,e,n,i,r,a].filter(Boolean).join(" / ")}cl.value&&cl.value.t3Entry&&cl.value.t3Entry.time&&z.Debug("= ScheduleModal: onMounted Schedule time:",JSON.stringify(cl.value.t3Entry.time)),v()}));const v=()=>{var t;if(cl.value&&cl.value.t3Entry&&Array.isArray(cl.value.t3Entry.time)){const n=["monday","tuesday","wednesday","thursday","friday","saturday","sunday","holiday1","holiday2"],i=cl.value.t3Entry.time,r=(null==(t=i[0])?void 0:t.length)||0,a=Array.from({length:r},((t,e)=>{const r={key:(e+1).toString(),status:e%2==0};return n.forEach(((t,n)=>{var a;const o=null==(a=i[n])?void 0:a[e];if(o&&"number"==typeof o.hours&&"number"==typeof o.minutes){const e=o.hours.toString().padStart(2,"0"),n=o.minutes.toString().padStart(2,"0");r[t]=`${e}:${n}`}else r[t]=""})),r}));e.value=a,z.Debug("= ScheduleModal: loadDefaultData scheduleData",JSON.stringify(e.value),e.value)}};return(t,r)=>{const v=R("a-alert"),y=R("a-switch"),_=R("a-time-picker"),x=R("a-table"),b=R("a-button"),M=R("a-modal"),S=R("a-config-provider");return n(),d(S,{theme:{token:{colorPrimary:"#0064c8"}}},{default:u((()=>[l(M,{visible:w(dl),"onUpdate:visible":r[0]||(r[0]=t=>B(dl)?dl.value=t:null),title:g.value,width:1e3,style:{"border-radius":"0px"},wrapClassName:"t3-modal",onOk:h,onCancel:f},{footer:u((()=>[o("div",PN,[l(b,{class:"t3-btn",onClick:a,type:"primary"},{default:u((()=>[...r[1]||(r[1]=[p("Copy to Monday - Friday",-1)])])),_:1}),l(b,{class:"t3-btn",onClick:s},{default:u((()=>[...r[2]||(r[2]=[p("Refresh from T3000",-1)])])),_:1}),l(b,{class:"t3-btn",onClick:c},{default:u((()=>[...r[3]||(r[3]=[p("Clear All",-1)])])),_:1}),l(b,{class:"t3-btn",onClick:h},{default:u((()=>[...r[4]||(r[4]=[p("Save",-1)])])),_:1}),l(b,{class:"t3-btn",onClick:f},{default:u((()=>[...r[5]||(r[5]=[p("Cancel",-1)])])),_:1})])])),default:u((()=>[l(v,{message:m.value,type:"info","show-icon":"",class:"sch-alert"},null,8,["message"]),l(x,{dataSource:e.value,columns:i,pagination:!1,bordered:"",size:"small"},{bodyCell:u((({column:t,record:e})=>["status"===t.key?(n(),d(y,{key:0,checked:e.status,"checked-children":"On","un-checked-children":"Off",disabled:""},null,8,["checked"])):["monday","tuesday","wednesday","thursday","friday","saturday","sunday","holiday1","holiday2"].includes(t.key)?(n(),d(_,{key:1,value:e[t.key]?w(kl)(e[t.key],"HH:mm"):null,format:"HH:mm","minute-step":15,"show-second":!1,style:{width:"100%","border-radius":"0px"},size:"middle",placeholder:"",onChange:(n,i)=>((t,e,n)=>{t[e]=n&&"string"!=typeof n?n:"string"==typeof n?kl(n,"HH:mm"):null})(e,t.key,n)},null,8,["value","onChange"])):A("",!0)])),_:1},8,["dataSource"])])),_:1},8,["visible","title"])])),_:1})}}});"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"January_February_March_April_May_June_July_August_September_October_November_December".split("_");var ON,zN={exports:{}},RN={exports:{}};window,ON=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist",n(n.s=20)}([function(t,e,n){var i=n(3);t.exports=function(t,e,n){var r,a;if(n=n||0,!i(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(a=e.length,r=n;n>=0&&r<a;r+=1)if(e[r]===t)return r;return-1}},function(t,e,n){t.exports=function(t,e,n){var i=0,r=t.length;for(n=n||null;i<r&&!1!==e.call(n,t[i],i,t);i+=1);}},function(t,e,n){t.exports=function(t,e){var n,i,r,a,o=Object.prototype.hasOwnProperty;for(r=1,a=arguments.length;r<a;r+=1)for(i in n=arguments[r])o.call(n,i)&&(t[i]=n[i]);return t}},function(t,e,n){t.exports=function(t){return t instanceof Array}},function(t,e,n){var i=n(3),r=n(1),a=n(16);t.exports=function(t,e,n){i(t)?r(t,e,n):a(t,e,n)}},function(t,e,n){t.exports=function(t){return void 0===t}},function(t,e,n){t.exports=function(t){return"string"==typeof t||t instanceof String}},function(t,e,n){var i=n(0),r=n(4),a=n(3),o=n(6),s=n(2),l=/{{\s?|\s?}}/g,u=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,c=/\[\s?|\s?\]/,d=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,h=/\./,p=/^["']\w+["']$/,f=/"|'/g,g=/^-?\d+\.?\d*$/,m={if:function(t,e,n){var i=function(t,e){var n=[t],i=[],a=0,o=0;return r(e,(function(t,r){0===t.indexOf("if")?a+=1:"/if"===t?a-=1:a||0!==t.indexOf("elseif")&&"else"!==t||(n.push("else"===t?["true"]:t.split(" ").slice(1)),i.push(e.slice(o,r)),o=r+1)})),i.push(e.slice(o)),{exps:n,sourcesInsideIf:i}}(t,e),a=!1,o="";return r(i.exps,(function(t,e){return(a=x(t,n))&&(o=b(i.sourcesInsideIf[e],n)),!a})),o},each:function(t,e,n){var i=x(t,n),o=a(i)?"@index":"@key",l={},u="";return r(i,(function(t,i){l[o]=i,l["@this"]=t,s(n,l),u+=b(e.slice(),n)})),u},with:function(t,e,n){var r=i("as",t),a=t[r+1],o=x(t.slice(0,r),n),l={};return l[a]=o,b(e,s(n,l))||""}},v=3==="a".split(/a/).length?function(t,e){return t.split(e)}:function(t,e){var n,i,r=[],a=0;for(e.global||(e=new RegExp(e,"g")),n=e.exec(t);null!==n;)i=n.index,r.push(t.slice(a,i)),a=i+n[0].length,n=e.exec(t);return r.push(t.slice(a)),r};function y(t,e){var n,i=e[t];return"true"===t?i=!0:"false"===t?i=!1:p.test(t)?i=t.replace(f,""):u.test(t)?i=y((n=t.split(c))[0],e)[y(n[1],e)]:d.test(t)?i=y((n=t.split(h))[0],e)[n[1]]:g.test(t)&&(i=parseFloat(t)),i}function _(t,e,n){for(var i,r,a,s,l=m[t],u=1,c=2,d=e[c];u&&o(d);)0===d.indexOf(t)?u+=1:0===d.indexOf("/"+t)&&(u-=1,i=c),d=e[c+=2];if(u)throw Error(t+" needs {{/"+t+"}} expression.");return e[0]=l(e[0].split(" ").slice(1),(r=0,a=i,(s=e.splice(r+1,a-r)).pop(),s),n),e}function x(t,e){var n=y(t[0],e);return n instanceof Function?function(t,e,n){var i=[];return r(e,(function(t){i.push(y(t,n))})),t.apply(null,i)}(n,t.slice(1),e):n}function b(t,e){for(var n,i,r,a=1,s=t[a];o(s);)i=(n=s.split(" "))[0],m[i]?(r=_(i,t.splice(a,t.length-a),e),t=t.concat(r)):t[a]=x(n,e),s=t[a+=2];return t.join("")}t.exports=function(t,e){return b(v(t,l),e)}},function(t,e,n){var i=n(2),r=n(23),a=n(6),o=n(25),s=n(3),l=n(26),u=n(4),c=/\s+/g;function d(){this.events=null,this.contexts=null}d.mixin=function(t){i(t.prototype,d.prototype)},d.prototype._getHandlerItem=function(t,e){var n={handler:t};return e&&(n.context=e),n},d.prototype._safeEvent=function(t){var e,n=this.events;return n||(n=this.events={}),t&&((e=n[t])||(e=[],n[t]=e),n=e),n},d.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},d.prototype._indexOfContext=function(t){for(var e=this._safeContext(),n=0;e[n];){if(t===e[n][0])return n;n+=1}return-1},d.prototype._memorizeContext=function(t){var e,n;r(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1?e[n][1]+=1:e.push([t,1]))},d.prototype._forgetContext=function(t){var e,n;r(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1&&(e[n][1]-=1,e[n][1]<=0&&e.splice(n,1)))},d.prototype._bindEvent=function(t,e,n){var i=this._safeEvent(t);this._memorizeContext(n),i.push(this._getHandlerItem(e,n))},d.prototype.on=function(t,e,n){var i=this;a(t)?(t=t.split(c),u(t,(function(t){i._bindEvent(t,e,n)}))):o(t)&&(n=e,u(t,(function(t,e){i.on(e,t,n)})))},d.prototype.once=function(t,e,n){var i=this;if(o(t))return n=e,void u(t,(function(t,e){i.once(e,t,n)}));this.on(t,(function r(){e.apply(n,arguments),i.off(t,r,n)}),n)},d.prototype._spliceMatches=function(t,e){var n,i=0;if(s(t))for(n=t.length;i<n;i+=1)!0===e(t[i])&&(t.splice(i,1),n-=1,i-=1)},d.prototype._matchHandler=function(t){var e=this;return function(n){var i=t===n.handler;return i&&e._forgetContext(n.context),i}},d.prototype._matchContext=function(t){var e=this;return function(n){var i=t===n.context;return i&&e._forgetContext(n.context),i}},d.prototype._matchHandlerAndContext=function(t,e){var n=this;return function(i){var r=t===i.handler,a=e===i.context,o=r&&a;return o&&n._forgetContext(i.context),o}},d.prototype._offByEventName=function(t,e){var n=this,i=l(e),r=n._matchHandler(e);t=t.split(c),u(t,(function(t){var e=n._safeEvent(t);i?n._spliceMatches(e,r):(u(e,(function(t){n._forgetContext(t.context)})),n.events[t]=[])}))},d.prototype._offByHandler=function(t){var e=this,n=this._matchHandler(t);u(this._safeEvent(),(function(t){e._spliceMatches(t,n)}))},d.prototype._offByObject=function(t,e){var n,i=this;this._indexOfContext(t)<0?u(t,(function(t,e){i.off(e,t)})):a(e)?(n=this._matchContext(t),i._spliceMatches(this._safeEvent(e),n)):l(e)?(n=this._matchHandlerAndContext(e,t),u(this._safeEvent(),(function(t){i._spliceMatches(t,n)}))):(n=this._matchContext(t),u(this._safeEvent(),(function(t){i._spliceMatches(t,n)})))},d.prototype.off=function(t,e){a(t)?this._offByEventName(t,e):arguments.length?l(t)?this._offByHandler(t):o(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},d.prototype.fire=function(t){this.invoke.apply(this,arguments)},d.prototype.invoke=function(t){var e,n,i,r;if(!this.hasListener(t))return!0;for(e=this._safeEvent(t),n=Array.prototype.slice.call(arguments,1),i=0;e[i];){if(!1===(r=e[i]).handler.apply(r.context,n))return!1;i+=1}return!0},d.prototype.hasListener=function(t){return this.getListenerLength(t)>0},d.prototype.getListenerLength=function(t){return this._safeEvent(t).length},t.exports=d},function(t,e,n){var i=n(27),r=n(2);t.exports=function(t,e){var n;return e||(e=t,t=null),n=e.init||function(){},t&&i(n,t),e.hasOwnProperty("static")&&(r(n,e.static),delete e.static),r(n.prototype,e),n}},function(t,e,n){var i=n(6),r=n(4),a=n(17);function o(t,e,n,i){function o(e){n.call(i||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,o):"attachEvent"in t&&t.attachEvent("on"+e,o),function(t,e,n,i){var o=a(t,e),s=!1;r(o,(function(t){return t.handler!==n||(s=!0,!1)})),s||o.push({handler:n,wrappedHandler:i})}(t,e,n,o)}t.exports=function(t,e,n,a){i(e)?r(e.split(/\s+/g),(function(e){o(t,e,n,a)})):r(e,(function(e,i){o(t,i,e,n)}))}},function(t,e,n){var i=n(6),r=n(4),a=n(17);function o(t,e,n){var i,o=a(t,e);n?(r(o,(function(r,a){return n!==r.handler||(s(t,e,r.wrappedHandler),i=a,!1)})),o.splice(i,1)):(r(o,(function(n){s(t,e,n.wrappedHandler)})),o.splice(0,o.length))}function s(t,e,n){"removeEventListener"in t?t.removeEventListener(e,n):"detachEvent"in t&&t.detachEvent("on"+e,n)}t.exports=function(t,e,n){i(e)?r(e.split(/\s+/g),(function(e){o(t,e,n)})):r(e,(function(e,n){o(t,n,e)}))}},function(t,e,n){var i=n(30);t.exports=function(t,e){var n=t.parentNode;if(i(t,e))return t;for(;n&&n!==document;){if(i(n,e))return n;n=n.parentNode}return null}},function(t,e,n){t.exports=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}},function(t,e,n){t.exports=function(t){return"object"==typeof HTMLElement?t&&(t instanceof HTMLElement||!!t.nodeType):!(!t||!t.nodeType)}},function(t,e,n){var i=n(0),r=n(1),a=n(35),o=0,s={getUniqueId:function(){return o+=1},formatTime:function(t,e){return t=String(t),i(e,["hh","mm"])>=0&&1===t.length?"0"+t:t},getMeridiemHour:function(t){return 0==(t%=12)&&(t=12),t},getRangeArr:function(t,e,n){var i,r=[];if(n=n||1,t>e)for(i=e;i>=t;i-=n)r.push(i);else for(i=t;i<=e;i+=n)r.push(i);return r},fill:function(t,e,n,i){var r,a=i||[],o=Math.min(a.length-1,e);for(r=t;r<=o;r+=1)a[r]=n;for(r=o;r<=e;r+=1)a.push(n);return a},getTarget:function(t){return t.target||t.srcElement},sendHostName:function(){a("time-picker","UA-129987462-1")},getDisabledMinuteArr:function(t,e){var n=this.fill(0,Math.floor(60/e)-2,!1);return r(t,function(t){var i=Math.ceil(t.begin/e),r=Math.floor(t.end/e);n=this.fill(i,r,!0,n)}.bind(this)),n},setDisabled:function(t,e){t.disabled=e}};t.exports=s},function(t,e,n){t.exports=function(t,e,n){var i;for(i in n=n||null,t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))break}},function(t,e,n){var i="_feEventKey";t.exports=function(t,e){var n,r=t[i];return r||(r=t[i]={}),(n=r[e])||(n=r[e]=[]),n}},function(t,e,n){var i=n(5);t.exports=function(t){return t&&t.className?i(t.className.baseVal)?t.className:t.className.baseVal:""}},function(t,e,n){var i=n(3),r=n(5);t.exports=function(t,e){e=(e=i(e)?e.join(" "):e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),r(t.className.baseVal)?t.className=e:t.className.baseVal=e}},function(t,e,n){n(21),t.exports=n(22)},function(t,e,n){},function(t,e,n){var i=n(0),r=n(1),a=n(8),o=n(9),s=n(2),l=n(10),u=n(11),c=n(29),d=n(12),h=n(13),p=n(32),f=n(14),g=n(33),m=n(34),v=n(38),y=n(15),_=n(40),x=n(41),b=n(42),w=".tui-timepicker-meridiem",M="tui-hidden",S="tui-timepicker-meridiem-checked",C="spinbox",k="selectbox",I=o({static:{localeTexts:_},init:function(t,e){e=function(t){return s({language:"en",initialHour:0,initialMinute:0,showMeridiem:!0,inputType:"selectbox",hourStep:1,minuteStep:1,meridiemPosition:"right",format:"h:m",disabledHours:[],disabledMinutes:{},usageStatistics:!0},t)}(e),this.id=y.getUniqueId(),this.container=f(t)?t:document.querySelector(t),this.element=null,this.meridiemElement=null,this.amEl=null,this.pmEl=null,this.showMeridiem=e.showMeridiem,this.meridiemPosition=e.meridiemPosition,this.hourInput=null,this.minuteInput=null,this.hour=e.initialHour,this.minute=e.initialMinute,this.hourStep=e.hourStep,this.minuteStep=e.minuteStep,this.disabledHours=e.disabledHours,this.disabledMinutes=e.disabledMinutes,this.inputType=e.inputType,this.localeText=_[e.language],this.format=this.getValidTimeFormat(e.format),this.render(),this.setEvents(),e.usageStatistics&&y.sendHostName()},setEvents:function(){this.hourInput.on("change",this.onChangeTimeInput,this),this.minuteInput.on("change",this.onChangeTimeInput,this),this.showMeridiem&&(this.inputType===k?l(this.meridiemElement.querySelector("select"),"change",this.onChangeMeridiem,this):this.inputType===C&&l(this.meridiemElement,"click",this.onChangeMeridiem,this))},removeEvents:function(){this.off(),this.hourInput.destroy(),this.minuteInput.destroy(),this.showMeridiem&&(this.inputType===k?u(this.meridiemElement.querySelector("select"),"change",this.onChangeMeridiem,this):this.inputType===C&&u(this.meridiemElement,"click",this.onChangeMeridiem,this))},render:function(){var t={showMeridiem:this.showMeridiem,isSpinbox:"spinbox"===this.inputType};this.showMeridiem&&s(t,{meridiemElement:this.makeMeridiemHTML()}),this.element&&h(this.element),this.container.innerHTML=x(t),this.element=this.container.firstChild,this.renderTimeInputs(),this.showMeridiem&&this.setMeridiemElement()},setMeridiemElement:function(){"left"===this.meridiemPosition&&c(this.element,"tui-has-left"),this.meridiemElement=this.element.querySelector(w),this.amEl=this.meridiemElement.querySelector('[value="AM"]'),this.pmEl=this.meridiemElement.querySelector('[value="PM"]'),this.syncToMeridiemElements()},makeMeridiemHTML:function(){var t=this.localeText;return b({am:t.am,pm:t.pm,radioId:this.id,isSpinbox:"spinbox"===this.inputType})},renderTimeInputs:function(){var t=this.hour,e=this.showMeridiem,n=this.element.querySelector(".tui-timepicker-hour"),i=this.element.querySelector(".tui-timepicker-minute"),r="selectbox"===this.inputType.toLowerCase()?v:m,a=this.format.split(":"),o=this.getHourItems();e&&(t=y.getMeridiemHour(t)),this.hourInput=new r(n,{initialValue:t,items:o,format:a[0],disabledItems:this.makeDisabledStatItems(o)}),this.minuteInput=new r(i,{initialValue:this.minute,items:this.getMinuteItems(),format:a[1]})},makeDisabledStatItems:function(t){var e=[],n=this.disabledHours.slice();return this.showMeridiem&&(n=this.meridiemableTime(n)),r(t,(function(t){e.push(i(t,n)>=0)})),e},meridiemableTime:function(t){var e=0,n=0,i=11,a=[];return this.hour>=12&&(e=12,n=12,i=23),r(t,(function(t){t>=n&&t<=i&&a.push(t-e==0?12:t-e)})),a},getValidTimeFormat:function(t){return t.match(/^[h]{1,2}:[m]{1,2}$/i)?t.toLowerCase():"h:m"},syncToMeridiemElements:function(){var t=this.hour>=12?this.pmEl:this.amEl,e=t===this.pmEl?this.amEl:this.pmEl;t.setAttribute("selected",!0),t.setAttribute("checked",!0),c(t,S),e.removeAttribute("selected"),e.removeAttribute("checked"),p(e,S)},syncToInputs:function(){var t=this.hour,e=this.minute;this.showMeridiem&&(t=y.getMeridiemHour(t)),this.hourInput.setValue(t,!0),this.minuteInput.setValue(e,!0)},onChangeMeridiem:function(t){var e=this.hour,n=y.getTarget(t);n.value&&d(n,w)&&(e=this.to24Hour("PM"===n.value,e),this.setTime(e,this.minute),this.setDisabledHours(),this.setDisabledMinutes(e))},onChangeTimeInput:function(){var t=this.hourInput.getValue(),e=this.minuteInput.getValue(),n=this.hour>=12;this.showMeridiem&&(t=this.to24Hour(n,t)),this.setTime(t,e),this.setDisabledMinutes(t)},to24Hour:function(t,e){return e%=12,t&&(e+=12),e},setDisabledHours:function(){var t=this.getHourItems(),e=this.makeDisabledStatItems(t);this.hourInput.setDisabledItems(e)},setDisabledMinutes:function(t){var e;e=this.disabledMinutes[t]||[],this.minuteInput.setDisabledItems(e)},getHourItems:function(){var t=this.hourStep;return this.showMeridiem?y.getRangeArr(1,12,t):y.getRangeArr(0,23,t)},getMinuteItems:function(){return y.getRangeArr(0,59,this.minuteStep)},validItems:function(t,e){return!(!g(t)||!g(e))&&(this.showMeridiem&&(t=y.getMeridiemHour(t)),i(t,this.getHourItems())>-1&&i(e,this.getMinuteItems())>-1)},setHourStep:function(t){this.hourStep=t,this.hourInput.fire("changeItems",this.getHourItems())},getHourStep:function(){return this.hourStep},setMinuteStep:function(t){this.minuteStep=t,this.minuteInput.fire("changeItems",this.getMinuteItems())},getMinuteStep:function(){return this.minuteStep},show:function(){p(this.element,M)},hide:function(){c(this.element,M)},setHour:function(t){return this.setTime(t,this.minute)},setMinute:function(t){return this.setTime(this.hour,t)},setTime:function(t,e,n){this.validItems(t,e)&&(this.hour=t,this.minute=e,this.syncToInputs(),this.showMeridiem&&this.syncToMeridiemElements(),n||this.fire("change",{hour:this.hour,minute:this.minute}))},setRange:function(t,e){var n,i,r=t.hour,a=t.minute;this.isValidRange(t,e)&&(e&&(n=e.hour,i=e.minute),this.setRangeHour(r,n),this.setRangeMinute(r,a,n,i),this.applyRange(r,a,n))},setRangeHour:function(t,e){var n=y.getRangeArr(0,t-1);e&&(n=n.concat(y.getRangeArr(e+1,23))),this.disabledHours=n.slice()},setRangeMinute:function(t,e,n,i){var r=[];if(t||e){if(r.push({begin:0,end:e}),n&&i){if(r.push({begin:i,end:59}),t===n)return void(this.disabledMinutes[t]=y.getDisabledMinuteArr(r,this.minuteStep).slice());this.disabledMinutes[n]=y.getDisabledMinuteArr([r[1]],this.minuteStep).slice()}this.disabledMinutes[t]=y.getDisabledMinuteArr([r[0]],this.minuteStep).slice()}},applyRange:function(t,e,n){var i,r=Math.ceil(e/this.minuteStep),a=t,o=r*this.minuteStep;this.isLaterThanSetTime(t,e)&&(this.disabledMinutes[a][r]&&(o=(i=this.disabledMinutes[a].slice(r).findIndex((function(t){return!t}))*this.minuteStep)>=0?o+i:60),(1!==this.hourStep&&t%this.hourStep!=1||o>=60)&&(a=t+t%this.hourStep+1,o=0),this.setTime(a,o)),this.setDisabledHours(),this.setDisabledMinutes(this.hour),this.showMeridiem&&(this.syncToMeridiemElements(),y.setDisabled(this.amEl,t>=12),y.setDisabled(this.pmEl,n<12))},resetMinuteRange:function(){var t;for(this.disabledMinutes={},t=0;t<=23;t+=1)this.setDisabledMinutes(this.hour)},isValidRange:function(t,e){var n,i,r=t.hour,a=t.minute;return!!this.isValidTime(r,a)&&(!e||(n=e.hour,i=e.minute,this.isValidTime(n,i)&&this.compareTimes(t,e)>0))},isValidTime:function(t,e){return t>=0&&t<=23&&e>=0&&e<=59},isLaterThanSetTime:function(t,e){return t>this.hour||t===this.hour&&e>this.minute},compareTimes:function(t,e){var n=new Date(0),i=new Date(0);return n.setHours(t.hour,t.minute),i.setHours(e.hour,e.minute),i.getTime()-n.getTime()},getHour:function(){return this.hour},getMinute:function(){return this.minute},changeLanguage:function(t){this.localeText=_[t],this.render()},destroy:function(){this.removeEvents(),h(this.element),this.container=this.showMeridiem=this.hourInput=this.minuteInput=this.hour=this.minute=this.inputType=this.element=this.meridiemElement=this.amEl=this.pmEl=null}});a.mixin(I),t.exports=I},function(t,e,n){var i=n(5),r=n(24);t.exports=function(t){return!i(t)&&!r(t)}},function(t,e,n){t.exports=function(t){return null===t}},function(t,e,n){t.exports=function(t){return t===Object(t)}},function(t,e,n){t.exports=function(t){return t instanceof Function}},function(t,e,n){var i=n(28);t.exports=function(t,e){var n=i(e.prototype);n.constructor=t,t.prototype=n}},function(t,e,n){t.exports=function(t){function e(){}return e.prototype=t,new e}},function(t,e,n){var i=n(4),r=n(0),a=n(18),o=n(19);t.exports=function(t){var e,n=Array.prototype.slice.call(arguments,1),s=t.classList,l=[];s?i(n,(function(e){t.classList.add(e)})):((e=a(t))&&(n=[].concat(e.split(/\s+/),n)),i(n,(function(t){r(t,l)<0&&l.push(t)})),o(t,l))}},function(t,e,n){var i=n(0),r=n(31),a=Element.prototype,o=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||function(t){var e=this.document||this.ownerDocument;return i(this,r(e.querySelectorAll(t)))>-1};t.exports=function(t,e){return o.call(t,e)}},function(t,e,n){var i=n(1);t.exports=function(t){var e;try{e=Array.prototype.slice.call(t)}catch(n){e=[],i(t,(function(t){e.push(t)}))}return e}},function(t,e,n){var i=n(1),r=n(0),a=n(18),o=n(19);t.exports=function(t){var e,n,s=Array.prototype.slice.call(arguments,1),l=t.classList;l?i(s,(function(t){l.remove(t)})):(e=a(t).split(/\s+/),n=[],i(e,(function(t){r(t,s)<0&&n.push(t)})),o(t,n))}},function(t,e,n){t.exports=function(t){return"number"==typeof t||t instanceof Number}},function(t,e,n){var i=n(0),r=n(1),a=n(8),o=n(9),s=n(2),l=n(10),u=n(11),c=n(12),d=n(13),h=n(14),p=n(15),f=n(37),g=o({init:function(t,e){e=s({items:[]},e),this._container=h(t)?t:document.querySelector(t),this._element=null,this._inputElement=null,this._items=e.items,this._disabledItems=e.disabledItems||[],this._selectedIndex=Math.max(0,i(e.initialValue,this._items)),this._format=e.format,this._render(),this._setEvents()},_render:function(){var t,e=i(this.getValue(),this._items);this._disabledItems[e]&&(this._selectedIndex=this._findEnabledIndex()),t={maxLength:this._getMaxLength(),initialValue:this.getValue(),format:this._format,formatTime:p.formatTime},this._container.innerHTML=f(t),this._element=this._container.firstChild,this._inputElement=this._element.querySelector("input")},_findEnabledIndex:function(){return i(!1,this._disabledItems)},_getMaxLength:function(){var t=[];return r(this._items,(function(e){t.push(String(e).length)})),Math.max.apply(null,t)},setDisabledItems:function(t){this._disabledItems=t,this._changeToInputValue()},_setEvents:function(){l(this._container,"click",this._onClickHandler,this),l(this._inputElement,"keydown",this._onKeydownInputElement,this),l(this._inputElement,"change",this._onChangeHandler,this),this.on("changeItems",(function(t){this._items=t,this._render()}),this)},_removeEvents:function(){this.off(),u(this._container,"click",this._onClickHandler,this),u(this._inputElement,"keydown",this._onKeydownInputElement,this),u(this._inputElement,"change",this._onChangeHandler,this)},_onClickHandler:function(t){var e=p.getTarget(t);c(e,".tui-timepicker-btn-down")?this._setNextValue(!0):c(e,".tui-timepicker-btn-up")&&this._setNextValue(!1)},_setNextValue:function(t){var e=this._selectedIndex;e=t?e?e-1:this._items.length-1:e<this._items.length-1?e+1:0,this._disabledItems[e]?(this._selectedIndex=e,this._setNextValue(t)):this.setValue(this._items[e])},_onKeydownInputElement:function(t){var e,n=t.which||t.keyCode;if(c(p.getTarget(t),"input")){switch(n){case 38:e=!1;break;case 40:e=!0;break;default:return}this._setNextValue(e)}},_onChangeHandler:function(t){c(p.getTarget(t),"input")&&this._changeToInputValue()},_changeToInputValue:function(t){var e=Number(this._inputElement.value),n=i(e,this._items);if(this._disabledItems[n])n=this._findEnabledIndex(),e=this._items[n];else if(n===this._selectedIndex)return;-1===n?this.setValue(this._items[this._selectedIndex],t):(this._selectedIndex=n,t||this.fire("change",{value:e}))},setValue:function(t,e){this._inputElement.value=p.formatTime(t,this._format),this._changeToInputValue(e)},getValue:function(){return this._items[this._selectedIndex]},destroy:function(){this._removeEvents(),d(this._element),this._container=this._element=this._inputElement=this._items=this._selectedIndex=null}});a.mixin(g),t.exports=g},function(t,e,n){var i=n(5),r=n(36);t.exports=function(t,e){var n=location.hostname,a="TOAST UI "+t+" for "+n+": Statistics",o=window.localStorage.getItem(a);(i(window.tui)||!1!==window.tui.usageStatistics)&&(o&&!function(t){return(new Date).getTime()-t>6048e5}(o)||(window.localStorage.setItem(a,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||r("https://www.google-analytics.com/collect",{v:1,t:"event",tid:e,cid:n,dp:n,dh:t,el:t,ec:"use"})}),1e3)))}},function(t,e,n){var i=n(16);t.exports=function(t,e){var n=document.createElement("img"),r="";return i(e,(function(t,e){r+="&"+e+"="+t})),r=r.substring(1),n.src=t+"?"+r,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n}},function(t,e,n){var i=n(7);t.exports=function(t){return i('<div class="tui-timepicker-btn-area">  <input type="text" class="tui-timepicker-spinbox-input"        maxlength="{{maxLength}}"        size="{{maxLength}}"        value="{{formatTime initialValue format}}"        aria-label="TimePicker spinbox value">  <button type="button" class="tui-timepicker-btn tui-timepicker-btn-up">    <span class="tui-ico-t-btn">Increase</span>  </button>  <button type="button" class="tui-timepicker-btn tui-timepicker-btn-down">    <span class="tui-ico-t-btn">Decrease</span>  </button></div>',t)}},function(t,e,n){var i=n(0),r=n(8),a=n(9),o=n(2),s=n(10),l=n(11),u=n(12),c=n(13),d=n(14),h=n(15),p=n(39),f=a({init:function(t,e){e=o({items:[]},e),this._container=d(t)?t:document.querySelector(t),this._items=e.items||[],this._disabledItems=e.disabledItems||[],this._selectedIndex=Math.max(0,i(e.initialValue,this._items)),this._format=e.format,this._element=null,this._render(),this._setEvents()},_render:function(){var t;this._changeEnabledIndex(),t={items:this._items,format:this._format,initialValue:this.getValue(),disabledItems:this._disabledItems,formatTime:h.formatTime,equals:function(t,e){return t===e}},this._element&&this._removeElement(),this._container.innerHTML=p(t),this._element=this._container.firstChild,s(this._element,"change",this._onChangeHandler,this)},_changeEnabledIndex:function(){var t=i(this.getValue(),this._items);this._disabledItems[t]&&(this._selectedIndex=i(!1,this._disabledItems))},setDisabledItems:function(t){this._disabledItems=t,this._render()},_setEvents:function(){this.on("changeItems",(function(t){this._items=t,this._render()}),this)},_removeEvents:function(){this.off()},_removeElement:function(){l(this._element,"change",this._onChangeHandler,this),c(this._element)},_onChangeHandler:function(t){u(h.getTarget(t),"select")&&this._setNewValue()},_setNewValue:function(t){var e=Number(this._element.value);this._selectedIndex=i(e,this._items),t||this.fire("change",{value:e})},getValue:function(){return this._items[this._selectedIndex]},setValue:function(t,e){var n=i(t,this._items);n>-1&&n!==this._selectedIndex&&(this._selectedIndex=n,this._element.value=t,this._setNewValue(e))},destroy:function(){this._removeEvents(),this._removeElement(),this._container=this._items=this._selectedIndex=this._element=null}});r.mixin(f),t.exports=f},function(t,e,n){var i=n(7);t.exports=function(t){return i('<select class="tui-timepicker-select" aria-label="Time">  {{each items}}    {{if equals initialValue @this}}      <option value="{{@this}}" selected {{if disabledItems[@index]}}disabled{{/if}}>{{formatTime @this format}}</option>    {{else}}      <option value="{{@this}}" {{if disabledItems[@index]}}disabled{{/if}}>{{formatTime @this format}}</option>    {{/if}}  {{/each}}</select>',t)}},function(t,e,n){t.exports={en:{am:"AM",pm:"PM"},ko:{am:"",pm:""}}},function(t,e,n){var i=n(7);t.exports=function(t){return i('<div class="tui-timepicker">  <div class="tui-timepicker-body">    <div class="tui-timepicker-row">      {{if isSpinbox}}        <div class="tui-timepicker-column tui-timepicker-spinbox tui-timepicker-hour"></div>        <span class="tui-timepicker-column tui-timepicker-colon"><span class="tui-ico-colon">:</span></span>        <div class="tui-timepicker-column tui-timepicker-spinbox tui-timepicker-minute"></div>        {{if showMeridiem}}          {{meridiemElement}}        {{/if}}      {{else}}        <div class="tui-timepicker-column tui-timepicker-selectbox tui-timepicker-hour"></div>        <span class="tui-timepicker-column tui-timepicker-colon"><span class="tui-ico-colon">:</span></span>        <div class="tui-timepicker-column tui-timepicker-selectbox tui-timepicker-minute"></div>        {{if showMeridiem}}          {{meridiemElement}}        {{/if}}      {{/if}}    </div>  </div></div>',t)}},function(t,e,n){var i=n(7);t.exports=function(t){return i('{{if isSpinbox}}  <div class="tui-timepicker-column tui-timepicker-checkbox tui-timepicker-meridiem">    <div class="tui-timepicker-check-area">      <ul class="tui-timepicker-check-lst">        <li class="tui-timepicker-check">          <div class="tui-timepicker-radio">            <input type="radio"                  name="optionsRadios-{{radioId}}"                  value="AM"                  class="tui-timepicker-radio-am"                  id="tui-timepicker-radio-am-{{radioId}}">            <label for="tui-timepicker-radio-am-{{radioId}}" class="tui-timepicker-radio-label">              <span class="tui-timepicker-input-radio"></span>{{am}}            </label>          </div>        </li>        <li class="tui-timepicker-check">          <div class="tui-timepicker-radio">            <input type="radio"                  name="optionsRadios-{{radioId}}"                  value="PM"                  class="tui-timepicker-radio-pm"                  id="tui-timepicker-radio-pm-{{radioId}}">            <label for="tui-timepicker-radio-pm-{{radioId}}" class="tui-timepicker-radio-label">              <span class="tui-timepicker-input-radio"></span>{{pm}}            </label>          </div>        </li>      </ul>    </div>  </div>{{else}}  <div class="tui-timepicker-column tui-timepicker-selectbox tui-is-add-picker tui-timepicker-meridiem">    <select class="tui-timepicker-select" aria-label="AM/PM">      <option value="AM">{{am}}</option>      <option value="PM">{{pm}}</option>    </select>  </div>{{/if}}',t)}}])},RN.exports=ON(),
/*!
 * TOAST UI Date Picker
 * @version 4.3.3
 * @author NHN Cloud. FE Development Lab <dl_javascript@nhn.com>
 * @license MIT
 */
function(t,e){!function(e,n){t.exports=n(RN.exports)}(window,(function(t){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist",n(n.s=34)}([function(t,e,n){var i=n(35),r=n(7);t.exports=function(t,e){var n;return e||(e=t,t=null),n=e.init||function(){},t&&i(n,t),e.hasOwnProperty("static")&&(r(n,e.static),delete e.static),r(n.prototype,e),n}},function(t,e,n){t.exports={TYPE_DATE:"date",TYPE_MONTH:"month",TYPE_YEAR:"year",TYPE_HOUR:"hour",TYPE_MINUTE:"minute",TYPE_MERIDIEM:"meridiem",MIN_DATE:new Date(1900,0,1),MAX_DATE:new Date(2999,11,31),DEFAULT_LANGUAGE_TYPE:"en",CLASS_NAME_SELECTED:"tui-is-selected",CLASS_NAME_PREV_MONTH_BTN:"tui-calendar-btn-prev-month",CLASS_NAME_PREV_YEAR_BTN:"tui-calendar-btn-prev-year",CLASS_NAME_NEXT_YEAR_BTN:"tui-calendar-btn-next-year",CLASS_NAME_NEXT_MONTH_BTN:"tui-calendar-btn-next-month",CLASS_NAME_TITLE_TODAY:"tui-calendar-title-today",DEFAULT_WEEK_START_DAY:"Sun",WEEK_START_DAY_MAP:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}}},function(t,e,n){t.exports=function(t,e,n){var i=0,r=t.length;for(n=n||null;i<r&&!1!==e.call(n,t[i],i,t);i+=1);}},function(t,e,n){var i=n(6);t.exports=function(t,e,n){var r,a;if(n=n||0,!i(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(a=e.length,r=n;n>=0&&r<a;r+=1)if(e[r]===t)return r;return-1}},function(t,e,n){var i=n(2),r=n(46),a=n(47),o=0,s={getTarget:function(t){return t.target||t.srcElement},getElement:function(t){return r(t)?t:document.querySelector(t)},getSelector:function(t){var e="";return t.id?e="#"+t.id:t.className&&(e="."+t.className.split(" ")[0]),e},generateId:function(){return o+=1},filter:function(t,e){var n=[];return i(t,(function(t){e(t)&&n.push(t)})),n},sendHostName:function(){a("date-picker","UA-129987462-1")}};t.exports=s},function(t,e,n){var i=n(28),r=n(15),a=n(1),o=a.TYPE_DATE,s=a.TYPE_MONTH,l=a.TYPE_YEAR,u={getWeeksCount:function(t,e){var n=u.getFirstDay(t,e),i=u.getLastDayInMonth(t,e);return Math.ceil((n+i)/7)},isValidDate:function(t){return i(t)&&!isNaN(t.getTime())},getFirstDay:function(t,e){return new Date(t,e-1,1).getDay()},getFirstDayTimestamp:function(t,e){return new Date(t,e,1).getTime()},getLastDayInMonth:function(t,e){return new Date(t,e,0).getDate()},prependLeadingZero:function(t){var e="";return t<10&&(e="0"),e+t},getMeridiemHour:function(t){return 0===(t%=12)&&(t=12),t},getSafeNumber:function(t,e){if(isNaN(e)||!r(e))throw Error("The defaultNumber must be a valid number.");return isNaN(t)?e:Number(t)},getDateOfWeek:function(t,e,n,i){var r=new Date(t,e-1).getDay();return new Date(t,e-1,7*n-(r-i-1))},getRangeArr:function(t,e){var n,i=[];if(t>e)for(n=e;n>=t;n-=1)i.push(n);else for(n=t;n<=e;n+=1)i.push(n);return i},cloneWithStartOf:function(t,e){switch(e=e||o,(t=new Date(t)).setHours(0,0,0,0),e){case o:break;case s:t.setDate(1);break;case l:t.setMonth(0,1);break;default:throw Error("Unsupported type: "+e)}return t},cloneWithEndOf:function(t,e){switch(e=e||o,(t=new Date(t)).setHours(23,59,59,999),e){case o:break;case s:t.setMonth(t.getMonth()+1,0);break;case l:t.setMonth(11,31);break;default:throw Error("Unsupported type: "+e)}return t},compare:function(t,e,n){var i,r;return u.isValidDate(t)&&u.isValidDate(e)?(n?(i=u.cloneWithStartOf(t,n).getTime(),r=u.cloneWithStartOf(e,n).getTime()):(i=t.getTime(),r=e.getTime()),i>r?1:i===r?0:-1):NaN},isSame:function(t,e,n){return 0===u.compare(t,e,n)},inRange:function(t,e,n,i){return u.compare(t,n,i)<1&&u.compare(e,n,i)>-1}};t.exports=u},function(t,e,n){t.exports=function(t){return t instanceof Array}},function(t,e,n){t.exports=function(t,e){var n,i,r,a,o=Object.prototype.hasOwnProperty;for(r=1,a=arguments.length;r<a;r+=1)for(i in n=arguments[r])o.call(n,i)&&(t[i]=n[i]);return t}},function(t,e,n){var i=n(7),r=n(37),a=n(13),o=n(22),s=n(6),l=n(39),u=n(9),c=/\s+/g;function d(){this.events=null,this.contexts=null}d.mixin=function(t){i(t.prototype,d.prototype)},d.prototype._getHandlerItem=function(t,e){var n={handler:t};return e&&(n.context=e),n},d.prototype._safeEvent=function(t){var e,n=this.events;return n||(n=this.events={}),t&&((e=n[t])||(e=[],n[t]=e),n=e),n},d.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},d.prototype._indexOfContext=function(t){for(var e=this._safeContext(),n=0;e[n];){if(t===e[n][0])return n;n+=1}return-1},d.prototype._memorizeContext=function(t){var e,n;r(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1?e[n][1]+=1:e.push([t,1]))},d.prototype._forgetContext=function(t){var e,n;r(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1&&(e[n][1]-=1,e[n][1]<=0&&e.splice(n,1)))},d.prototype._bindEvent=function(t,e,n){var i=this._safeEvent(t);this._memorizeContext(n),i.push(this._getHandlerItem(e,n))},d.prototype.on=function(t,e,n){var i=this;a(t)?(t=t.split(c),u(t,(function(t){i._bindEvent(t,e,n)}))):o(t)&&(n=e,u(t,(function(t,e){i.on(e,t,n)})))},d.prototype.once=function(t,e,n){var i=this;if(o(t))return n=e,void u(t,(function(t,e){i.once(e,t,n)}));this.on(t,(function r(){e.apply(n,arguments),i.off(t,r,n)}),n)},d.prototype._spliceMatches=function(t,e){var n,i=0;if(s(t))for(n=t.length;i<n;i+=1)!0===e(t[i])&&(t.splice(i,1),n-=1,i-=1)},d.prototype._matchHandler=function(t){var e=this;return function(n){var i=t===n.handler;return i&&e._forgetContext(n.context),i}},d.prototype._matchContext=function(t){var e=this;return function(n){var i=t===n.context;return i&&e._forgetContext(n.context),i}},d.prototype._matchHandlerAndContext=function(t,e){var n=this;return function(i){var r=t===i.handler,a=e===i.context,o=r&&a;return o&&n._forgetContext(i.context),o}},d.prototype._offByEventName=function(t,e){var n=this,i=l(e),r=n._matchHandler(e);t=t.split(c),u(t,(function(t){var e=n._safeEvent(t);i?n._spliceMatches(e,r):(u(e,(function(t){n._forgetContext(t.context)})),n.events[t]=[])}))},d.prototype._offByHandler=function(t){var e=this,n=this._matchHandler(t);u(this._safeEvent(),(function(t){e._spliceMatches(t,n)}))},d.prototype._offByObject=function(t,e){var n,i=this;this._indexOfContext(t)<0?u(t,(function(t,e){i.off(e,t)})):a(e)?(n=this._matchContext(t),i._spliceMatches(this._safeEvent(e),n)):l(e)?(n=this._matchHandlerAndContext(e,t),u(this._safeEvent(),(function(t){i._spliceMatches(t,n)}))):(n=this._matchContext(t),u(this._safeEvent(),(function(t){i._spliceMatches(t,n)})))},d.prototype.off=function(t,e){a(t)?this._offByEventName(t,e):arguments.length?l(t)?this._offByHandler(t):o(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},d.prototype.fire=function(t){this.invoke.apply(this,arguments)},d.prototype.invoke=function(t){var e,n,i,r;if(!this.hasListener(t))return!0;for(e=this._safeEvent(t),n=Array.prototype.slice.call(arguments,1),i=0;e[i];){if(!1===(r=e[i]).handler.apply(r.context,n))return!1;i+=1}return!0},d.prototype.hasListener=function(t){return this.getListenerLength(t)>0},d.prototype.getListenerLength=function(t){return this._safeEvent(t).length},t.exports=d},function(t,e,n){var i=n(6),r=n(2),a=n(23);t.exports=function(t,e,n){i(t)?r(t,e,n):a(t,e,n)}},function(t,e,n){t.exports={en:{titles:{DD:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],D:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"]},titleFormat:"MMMM yyyy",todayFormat:"To\\d\\ay: DD, MMMM d, yyyy",time:"Time",date:"Date"},ko:{titles:{DD:["","","","","","",""],D:["","","","","","",""],MMM:["1","2","3","4","5","6","7","8","9","10","11","12"],MMMM:["1","2","3","4","5","6","7","8","9","10","11","12"]},titleFormat:"yyyy.MM",todayFormat:": yyyy.MM.dd (D)",date:"",time:""}}},function(t,e,n){var i=n(3),r=n(9),a=n(6),o=n(13),s=n(7),l=/{{\s?|\s?}}/g,u=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,c=/\[\s?|\s?\]/,d=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,h=/\./,p=/^["']\w+["']$/,f=/"|'/g,g=/^-?\d+\.?\d*$/,m={if:function(t,e,n){var i=function(t,e){var n=[t],i=[],a=0,o=0;return r(e,(function(t,r){0===t.indexOf("if")?a+=1:"/if"===t?a-=1:a||0!==t.indexOf("elseif")&&"else"!==t||(n.push("else"===t?["true"]:t.split(" ").slice(1)),i.push(e.slice(o,r)),o=r+1)})),i.push(e.slice(o)),{exps:n,sourcesInsideIf:i}}(t,e),a=!1,o="";return r(i.exps,(function(t,e){return(a=x(t,n))&&(o=b(i.sourcesInsideIf[e],n)),!a})),o},each:function(t,e,n){var i=x(t,n),o=a(i)?"@index":"@key",l={},u="";return r(i,(function(t,i){l[o]=i,l["@this"]=t,s(n,l),u+=b(e.slice(),n)})),u},with:function(t,e,n){var r=i("as",t),a=t[r+1],o=x(t.slice(0,r),n),l={};return l[a]=o,b(e,s(n,l))||""}},v=3==="a".split(/a/).length?function(t,e){return t.split(e)}:function(t,e){var n,i,r=[],a=0;for(e.global||(e=new RegExp(e,"g")),n=e.exec(t);null!==n;)i=n.index,r.push(t.slice(a,i)),a=i+n[0].length,n=e.exec(t);return r.push(t.slice(a)),r};function y(t,e){var n,i=e[t];return"true"===t?i=!0:"false"===t?i=!1:p.test(t)?i=t.replace(f,""):u.test(t)?i=y((n=t.split(c))[0],e)[y(n[1],e)]:d.test(t)?i=y((n=t.split(h))[0],e)[n[1]]:g.test(t)&&(i=parseFloat(t)),i}function _(t,e,n){for(var i,r,a,s,l=m[t],u=1,c=2,d=e[c];u&&o(d);)0===d.indexOf(t)?u+=1:0===d.indexOf("/"+t)&&(u-=1,i=c),d=e[c+=2];if(u)throw Error(t+" needs {{/"+t+"}} expression.");return e[0]=l(e[0].split(" ").slice(1),(r=0,a=i,(s=e.splice(r+1,a-r)).pop(),s),n),e}function x(t,e){var n=y(t[0],e);return n instanceof Function?function(t,e,n){var i=[];return r(e,(function(t){i.push(y(t,n))})),t.apply(null,i)}(n,t.slice(1),e):n}function b(t,e){for(var n,i,r,a=1,s=t[a];o(s);)i=(n=s.split(" "))[0],m[i]?(r=_(i,t.splice(a,t.length-a),e),t=t.concat(r)):t[a]=x(n,e),s=t[a+=2];return t.join("")}t.exports=function(t,e){return b(v(t,l),e)}},function(t,e,n){t.exports=function(t){return void 0===t}},function(t,e,n){t.exports=function(t){return"string"==typeof t||t instanceof String}},function(t,e,n){t.exports=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}},function(t,e,n){t.exports=function(t){return"number"==typeof t||t instanceof Number}},function(t,e,n){var i=n(9),r=n(3),a=n(17),o=n(24);t.exports=function(t){var e,n=Array.prototype.slice.call(arguments,1),s=t.classList,l=[];s?i(n,(function(e){t.classList.add(e)})):((e=a(t))&&(n=[].concat(e.split(/\s+/),n)),i(n,(function(t){r(t,l)<0&&l.push(t)})),o(t,l))}},function(t,e,n){var i=n(12);t.exports=function(t){return t&&t.className?i(t.className.baseVal)?t.className:t.className.baseVal:""}},function(t,e,n){var i=n(2),r=n(3),a=n(17),o=n(24);t.exports=function(t){var e,n,s=Array.prototype.slice.call(arguments,1),l=t.classList;l?i(s,(function(t){l.remove(t)})):(e=a(t).split(/\s+/),n=[],i(e,(function(t){r(t,s)<0&&n.push(t)})),o(t,n))}},function(t,e,n){var i=n(31),r=n(33),a={_isMobile:/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent),_getEventType:function(t){return this._isMobile&&("mousedown"===t?t="touchstart":"click"===t&&(t="touchend")),t},on:function(t,e,n,r){i(t,this._getEventType(e),n,r)},off:function(t,e,n){r(t,this._getEventType(e),n)}};t.exports=a},function(t,e,n){var i=n(0),r=n(14),a=n(10),o=n(1).DEFAULT_LANGUAGE_TYPE,s=i({init:function(t){t=t||o,this._element=null,this._localeText=a[t],this._type="base"},_makeContext:function(){l(this.getType(),"_makeContext")},render:function(){l(this.getType(),"render")},getDateElements:function(){l(this.getType(),"getDateElements")},getType:function(){return this._type},changeLanguage:function(t){this._localeText=a[t]},remove:function(){this._element&&r(this._element),this._element=null}});function l(t,e){throw new Error(t+' layer does not have the "'+e+'" method.')}t.exports=s},function(t,e,n){var i=n(3),r=n(2),a=n(0),o=n(8),s=n(16),l=n(25),u=n(26),c=n(27),d=n(18),h=n(14),p=n(7),f=n(6),g=n(28),m=n(15),v=n(22),y=n(43),_=n(29),x=n(56),b=n(1),w=n(10),M=n(5),S=n(4),C=n(19),k=n(58),I=n(59),D=b.DEFAULT_WEEK_START_DAY,T=b.DEFAULT_LANGUAGE_TYPE,A=b.TYPE_DATE,E=b.TYPE_MONTH,L=b.TYPE_YEAR,P=b.CLASS_NAME_NEXT_YEAR_BTN,N=b.CLASS_NAME_NEXT_MONTH_BTN,O=b.CLASS_NAME_PREV_YEAR_BTN,z=b.CLASS_NAME_PREV_MONTH_BTN,R=b.CLASS_NAME_SELECTED,V=b.CLASS_NAME_TITLE_TODAY,F="tui-is-selectable",B="tui-is-blocked",H="tui-is-checked",G="tui-datepicker-selector-button",j="tui-calendar-today",W="tui-hidden",U=a({static:{localeTexts:w},init:function(t,e){e=function(t){if((t=p({language:T,calendar:{},input:{element:null,format:null},timePicker:null,date:null,showAlways:!1,type:A,selectableRanges:null,openers:[],autoClose:!0,usageStatistics:!0,weekStartDay:D},t)).selectableRanges=t.selectableRanges||[[b.MIN_DATE,b.MAX_DATE]],!v(t.calendar))throw new Error("Calendar option must be an object");if(!v(t.input))throw new Error("Input option must be an object");if(!f(t.selectableRanges))throw new Error("Selectable-ranges must be a 2d-array");return t.localeText=w[t.language],t.calendar.language=t.language,t.calendar.type=t.type,t.timePicker=t.timePicker||t.timepicker,t}(e),this._language=e.language,this._container=S.getElement(t),this._container.innerHTML=k(p(e,{isTab:e.timePicker&&"tab"===e.timePicker.layoutType})),this._element=this._container.firstChild,this._calendar=new _(this._element.querySelector(".tui-calendar-container"),p(e.calendar,{usageStatistics:e.usageStatistics,weekStartDay:e.weekStartDay})),this._timePicker=null,this._datepickerInput=null,this._date=null,this._rangeModel=null,this._openers=[],this._isEnabled=!0,this._id="tui-datepicker-"+S.generateId(),this._type=e.type,this.showAlways=e.showAlways,this.autoClose=e.autoClose,this._initializeDatePicker(e)},_initializeDatePicker:function(t){this.setRanges(t.selectableRanges),this._setEvents(),this._initTimePicker(t.timePicker,t.usageStatistics),this.setInput(t.input.element),this.setDateFormat(t.input.format),this.setDate(t.date),r(t.openers,this.addOpener,this),this.showAlways||this._hide(),this.getType()===A&&s(this._element.querySelector(".tui-datepicker-body"),"tui-datepicker-type-date")},_setEvents:function(){C.on(this._element,"click",this._onClickHandler,this),this._calendar.on("draw",this._onDrawCalendar,this)},_removeEvents:function(){C.off(this._element,"click",this._onClickHandler,this),this._calendar.off()},_setDocumentEvents:function(){C.on(document,"mousedown",this._onMousedownDocument,this)},_removeDocumentEvents:function(){C.off(document,"mousedown",this._onMousedownDocument)},_setOpenerEvents:function(t){C.on(t,"click",this.toggle,this)},_removeOpenerEvents:function(t){C.off(t,"click",this.toggle)},_initTimePicker:function(t,e){var n;t&&(n=t.layoutType||"",v(t)?t.usageStatistics=e:t={usageStatistics:e},this._timePicker=new y(this._element.querySelector(".tui-timepicker-container"),t),"tab"===n.toLowerCase()&&this._timePicker.hide(),this._timePicker.on("change",(function(t){var e;this._date&&(e=new Date(this._date),this.setDate(e.setHours(t.hour,t.minute)))}),this))},_changePicker:function(t){var e=l(t,".tui-datepicker-selector-button");!!e.querySelector(".tui-ico-date")?(this._calendar.show(),this._timePicker.hide()):(this._calendar.hide(),this._timePicker.show()),d(this._element.querySelector(".tui-is-checked"),H),s(e,H)},_isOpener:function(t){var e=S.getElement(t);return i(e,this._openers)>-1},_setTodayClassName:function(t){this.getCalendarType()===A&&(Number(u(t,"timestamp"))===(new Date).setHours(0,0,0,0)?s(t,j):d(t,j))},_setSelectableClassName:function(t){var e=new Date(Number(u(t,"timestamp")));this._isSelectableOnCalendar(e)?(s(t,F),d(t,B)):(d(t,F),s(t,B))},_setSelectedClassName:function(t){var e=new Date(Number(u(t,"timestamp")));this._isSelectedOnCalendar(e)?s(t,R):d(t,R)},_isSelectableOnCalendar:function(t){var e=this.getCalendarType(),n=M.cloneWithStartOf(t,e).getTime(),i=M.cloneWithEndOf(t,e).getTime();return this._rangeModel.hasOverlap(n,i)},_isSelectedOnCalendar:function(t){var e=this.getDate(),n=this.getCalendarType();return e&&M.isSame(e,t,n)},_show:function(){d(this._element,W)},_hide:function(){s(this._element,W)},_syncToInput:function(){this._date&&this._datepickerInput.setDate(this._date)},_syncFromInput:function(t){var e,n=!1;try{e=this._datepickerInput.getDate(),this.isSelectable(e)?(this._timePicker&&this._timePicker.setTime(e.getHours(),e.getMinutes()),this.setDate(e)):n=!0}catch(i){this.fire("error",{type:"ParsingError",message:i.message}),n=!0}finally{n&&(t?this._syncToInput():this.setNull())}},_onMousedownDocument:function(t){var e=S.getTarget(t),n=S.getSelector(e),r=!!n&&this._element.querySelector(n),a=this._datepickerInput.is(e),o=i(e,this._openers)>-1;!(this.showAlways||a||r||o)&&this.close()},_onClickHandler:function(t){var e=S.getTarget(t);l(e,".tui-is-selectable")?(t.preventDefault(),this._updateDate(e)):l(e,"."+V)?(t.preventDefault(),this._updateDateToToday()):l(e,".tui-calendar-title")?this.drawUpperCalendar(this._date):l(e,"."+G)&&this._changePicker(e)},_updateDateToToday:function(){this.setDate(Date.now()),this.close()},_updateDate:function(t){var e=Number(u(t,"timestamp")),n=new Date(e),i=this._timePicker,r=this._date;this.getCalendarType()!==this.getType()?this.drawLowerCalendar(n):(i?n.setHours(i.getHour(),i.getMinute()):r&&n.setHours(r.getHours(),r.getMinutes()),this.setDate(n),!this.showAlways&&this.autoClose&&this.close())},_onDrawCalendar:function(t){r(t.dateElements,(function(t){this._setTodayClassName(t),this._setSelectableClassName(t),this._setSelectedClassName(t)}),this),this._setDisplayHeadButtons(),this.fire("draw",t)},_setDisplayHeadButtons:function(){var t,e,n,i,r=this._calendar.getNextYearDate(this.getCalendarType()===L?60:null),a=this._calendar.getPrevYearDate(this.getCalendarType()===L?-60:null),o=this._rangeModel.getMaximumValue(),s=this._rangeModel.getMinimumValue(),l=this._element.querySelector("."+P),u=this._element.querySelector("."+O);this.getCalendarType()===A?(t=M.cloneWithStartOf(this._calendar.getNextDate(),E),e=M.cloneWithEndOf(this._calendar.getPrevDate(),E),n=this._element.querySelector("."+N),i=this._element.querySelector("."+z),this._setDisplay(n,t.getTime()<=o),this._setDisplay(i,e.getTime()>=s),a.setDate(1),r.setDate(1)):(a.setMonth(12,0),r.setMonth(0,1)),this._setDisplay(l,r.getTime()<=o),this._setDisplay(u,a.getTime()>=s)},_setDisplay:function(t,e){t&&(e?d(t,W):s(t,W))},_onChangeInput:function(){this._syncFromInput(!0)},_isChanged:function(t){var e=this.getDate();return!e||t.getTime()!==e.getTime()},_refreshFromRanges:function(){this.isSelectable(this._date)?this._calendar.draw():this.setNull()},getCalendarType:function(){return this._calendar.getType()},getType:function(){return this._type},isSelectable:function(t){var e,n,i=this.getType();return!!M.isValidDate(t)&&(e=M.cloneWithStartOf(t,i).getTime(),n=M.cloneWithEndOf(t,i).getTime(),this._rangeModel.hasOverlap(e,n))},isSelected:function(t){return M.isValidDate(t)&&M.isSame(this._date,t,this.getType())},setRanges:function(t){var e=[];r(t,(function(t){var n=new Date(t[0]).getTime(),i=new Date(t[1]).getTime();e.push([n,i])})),this._rangeModel=new x(e),this._refreshFromRanges()},setType:function(t){this._type=t},addRange:function(t,e){t=new Date(t).getTime(),e=new Date(e).getTime(),this._rangeModel.add(t,e),this._refreshFromRanges()},removeRange:function(t,e,n){t=new Date(t),e=new Date(e),n&&(t=M.cloneWithStartOf(t,n),e=M.cloneWithEndOf(e,n)),this._rangeModel.exclude(t.getTime(),e.getTime()),this._refreshFromRanges()},addOpener:function(t){t=S.getElement(t),this._isOpener(t)||(this._openers.push(t),this._setOpenerEvents(t))},removeOpener:function(t){var e;t=S.getElement(t),(e=i(t,this._openers))>-1&&(this._removeOpenerEvents(t),this._openers.splice(e,1))},removeAllOpeners:function(){r(this._openers,(function(t){this._removeOpenerEvents(t)}),this),this._openers=[]},open:function(){!this.isOpened()&&this._isEnabled&&(this._calendar.draw({date:this._date,type:this._type}),this._show(),this.showAlways||this._setDocumentEvents(),this.fire("open"))},drawUpperCalendar:function(t){var e=this.getCalendarType();e===A?this._calendar.draw({date:t,type:E}):e===E&&this._calendar.draw({date:t,type:L})},drawLowerCalendar:function(t){var e=this.getCalendarType();e===this.getType()||(e===E?this._calendar.draw({date:t,type:A}):e===L&&this._calendar.draw({date:t,type:E}))},close:function(){this.isOpened()&&(this._removeDocumentEvents(),this._hide(),this.fire("close"))},toggle:function(){this.isOpened()?this.close():this.open()},getDate:function(){return this._date?new Date(this._date):null},setDate:function(t,e){var n,i;null!==t?(n=m(t)||g(t),i=new Date(t),n&&this._isChanged(i)&&this.isSelectable(i)&&(i=new Date(t),this._date=i,this._calendar.draw({date:i}),this._timePicker&&this._timePicker.setTime(i.getHours(),i.getMinutes(),!0),this._syncToInput(),e||this.fire("change"))):this.setNull()},setNull:function(){var t=this._calendar.getDate(),e=null!==this._date;this._date=null,this._datepickerInput&&this._datepickerInput.clearText(),this._timePicker&&this._timePicker.setTime(0,0),this.isSelectable(t)?this._calendar.draw():this._calendar.draw({date:new Date(this._rangeModel.getMinimumValue())}),e&&this.fire("change")},setDateFormat:function(t){this._datepickerInput.setFormat(t),this._syncToInput()},isOpened:function(){return!c(this._element,W)},getTimePicker:function(){return this._timePicker},getCalendar:function(){return this._calendar},getLocaleText:function(){return w[this._language]||w[T]},setInput:function(t,e){var n,i=this._datepickerInput,r=this.getLocaleText();e=e||{},i&&(n=i.getFormat(),i.destroy()),this._datepickerInput=new I(t,{format:e.format||n,id:this._id,localeText:r}),this._datepickerInput.on({change:this._onChangeInput,click:this.open},this),e.syncFromInput?this._syncFromInput():this._syncToInput()},enable:function(){this._isEnabled||(this._isEnabled=!0,this._datepickerInput.enable(),r(this._openers,(function(t){t.removeAttribute("disabled"),this._setOpenerEvents(t)}),this))},disable:function(){this._isEnabled&&(this._isEnabled=!1,this.close(),this._datepickerInput.disable(),r(this._openers,(function(t){t.setAttribute("disabled",!0),this._removeOpenerEvents(t)}),this))},isDisabled:function(){return!this._isEnabled},addCssClass:function(t){s(this._element,t)},removeCssClass:function(t){d(this._element,t)},getDateElements:function(){return this._calendar.getDateElements()},findOverlappedRange:function(t,e){var n=new Date(t).getTime(),i=new Date(e).getTime(),r=this._rangeModel.findOverlappedRange(n,i);return[new Date(r[0]),new Date(r[1])]},changeLanguage:function(t){this._language=t,this._calendar.changeLanguage(this._language),this._datepickerInput.changeLocaleTitles(this.getLocaleText().titles),this.setDateFormat(this._datepickerInput.getFormat()),this._timePicker&&this._timePicker.changeLanguage(this._language)},destroy:function(){this._removeDocumentEvents(),this._calendar.destroy(),this._timePicker&&this._timePicker.destroy(),this._datepickerInput&&this._datepickerInput.destroy(),this._removeEvents(),h(this._element),this.removeAllOpeners(),this._calendar=this._timePicker=this._datepickerInput=this._container=this._element=this._date=this._rangeModel=this._openers=this._isEnabled=this._id=null}});o.mixin(U),t.exports=U},function(t,e,n){t.exports=function(t){return t===Object(t)}},function(t,e,n){t.exports=function(t,e,n){var i;for(i in n=n||null,t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))break}},function(t,e,n){var i=n(6),r=n(12);t.exports=function(t,e){e=(e=i(e)?e.join(" "):e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),r(t.className.baseVal)?t.className=e:t.className.baseVal=e}},function(t,e,n){var i=n(40);t.exports=function(t,e){var n=t.parentNode;if(i(t,e))return t;for(;n&&n!==document;){if(i(n,e))return n;n=n.parentNode}return null}},function(t,e,n){var i=n(42);t.exports=function(t,e){return t.dataset?t.dataset[e]:t.getAttribute("data-"+i(e))}},function(t,e,n){var i=n(3),r=n(17);t.exports=function(t,e){var n;return t.classList?t.classList.contains(e):(n=r(t).split(/\s+/),i(e,n)>-1)}},function(t,e,n){t.exports=function(t){return t instanceof Date}},function(t,e,n){var i=n(0),r=n(8),a=n(16),o=n(27),s=n(18),l=n(14),u=n(7),c=n(44),d=n(49),h=n(10),p=n(1),f=n(5),g=n(4),m=p.DEFAULT_WEEK_START_DAY,v=p.DEFAULT_LANGUAGE_TYPE,y=p.TYPE_DATE,_=p.TYPE_MONTH,x=p.TYPE_YEAR,b=p.CLASS_NAME_PREV_MONTH_BTN,w=p.CLASS_NAME_PREV_YEAR_BTN,M=p.CLASS_NAME_NEXT_YEAR_BTN,S=p.CLASS_NAME_NEXT_MONTH_BTN,C="tui-calendar-month",k="tui-calendar-year",I="tui-hidden",D=i({static:{localeTexts:h},init:function(t,e){e=u({language:v,showToday:!0,showJumpButtons:!1,date:new Date,type:y,usageStatistics:!0,weekStartDay:m},e),this._container=g.getElement(t),this._container.innerHTML='<div class="tui-calendar">    <div class="tui-calendar-header"></div>    <div class="tui-calendar-body"></div></div>',this._element=this._container.firstChild,this._date=null,this._type=null,this._header=null,this._body=null,this._initHeader(e),this._initBody(e),this.draw({date:e.date,type:e.type}),e.usageStatistics&&g.sendHostName()},_initHeader:function(t){var e=this._element.querySelector(".tui-calendar-header");this._header=new c(e,t),this._header.on("click",(function(t){var e=g.getTarget(t);o(e,b)?this.drawPrev():o(e,w)?this._onClickPrevYear():o(e,S)?this.drawNext():o(e,M)&&this._onClickNextYear()}),this)},_initBody:function(t){var e=this._element.querySelector(".tui-calendar-body");this._body=new d(e,t)},_onClickPrevYear:function(){this.getType()===y?this.draw({date:this._getRelativeDate(-12)}):this.drawPrev()},_onClickNextYear:function(){this.getType()===y?this.draw({date:this._getRelativeDate(12)}):this.drawNext()},_isValidType:function(t){return t===y||t===_||t===x},_shouldUpdate:function(t,e){var n=this._date;if(!f.isValidDate(t))throw new Error("Invalid date");if(!this._isValidType(e))throw new Error("Invalid layer type");return!n||n.getFullYear()!==t.getFullYear()||n.getMonth()!==t.getMonth()||this.getType()!==e},_render:function(){var t=this._date,e=this.getType();switch(this._header.render(t,e),this._body.render(t,e),s(this._element,C,k),e){case _:a(this._element,C);break;case x:a(this._element,k)}},_getRelativeDate:function(t){var e=this._date;return new Date(e.getFullYear(),e.getMonth()+t)},draw:function(t){var e,n;e=(t=t||{}).date||this._date,n=(t.type||this.getType()).toLowerCase(),this._shouldUpdate(e,n)&&(this._date=e,this._type=n,this._render()),this.fire("draw",{date:this._date,type:n,dateElements:this._body.getDateElements()})},show:function(){s(this._element,I)},hide:function(){a(this._element,I)},drawNext:function(){this.draw({date:this.getNextDate()})},drawPrev:function(){this.draw({date:this.getPrevDate()})},getNextDate:function(){return this.getType()===y?this._getRelativeDate(1):this.getNextYearDate()},getPrevDate:function(){return this.getType()===y?this._getRelativeDate(-1):this.getPrevYearDate()},getNextYearDate:function(t){if(t)return this._getRelativeDate(t);switch(this.getType()){case y:case _:return this._getRelativeDate(12);case x:return this._getRelativeDate(108);default:throw new Error("Unknown layer type")}},getPrevYearDate:function(t){if(t)return this._getRelativeDate(t);switch(this.getType()){case y:case _:return this._getRelativeDate(-12);case x:return this._getRelativeDate(-108);default:throw new Error("Unknown layer type")}},changeLanguage:function(t){this._header.changeLanguage(t),this._body.changeLanguage(t),this._render()},getDate:function(){return new Date(this._date)},getType:function(){return this._type},getDateElements:function(){return this._body.getDateElements()},addCssClass:function(t){a(this._element,t)},removeCssClass:function(t){s(this._element,t)},destroy:function(){this._header.destroy(),this._body.destroy(),l(this._element),this._type=this._date=this._container=this._element=this._header=this._body=null}});r.mixin(D),t.exports=D},function(t,e,n){var i=n(3),r=n(2),a=n(0),o=n(4),s=n(5),l=n(1),u=n(10),c=/\\?(yyyy|yy|mmmm|mmm|mm|m|dd|d|hh|h|a)/gi,d={yyyy:{expression:"(\\d{4}|\\d{2})",type:l.TYPE_YEAR},yy:{expression:"(\\d{4}|\\d{2})",type:l.TYPE_YEAR},y:{expression:"(\\d{4}|\\d{2})",type:l.TYPE_YEAR},M:{expression:"(1[012]|0[1-9]|[1-9])",type:l.TYPE_MONTH},MM:{expression:"(1[012]|0[1-9]|[1-9])",type:l.TYPE_MONTH},MMM:{expression:"(1[012]|0[1-9]|[1-9])",type:l.TYPE_MONTH},MMMM:{expression:"(1[012]|0[1-9]|[1-9])",type:l.TYPE_MONTH},mmm:{expression:"(1[012]|0[1-9]|[1-9])",type:l.TYPE_MONTH},mmmm:{expression:"(1[012]|0[1-9]|[1-9])",type:l.TYPE_MONTH},dd:{expression:"([12]\\d{1}|3[01]|0[1-9]|[1-9])",type:l.TYPE_DATE},d:{expression:"([12]\\d{1}|3[01]|0[1-9]|[1-9])",type:l.TYPE_DATE},D:{expression:"([12]\\d{1}|3[01]|0[1-9]|[1-9])",type:l.TYPE_DATE},DD:{expression:"([12]\\d{1}|3[01]|0[1-9]|[1-9])",type:l.TYPE_DATE},h:{expression:"(d{1}|0\\d{1}|1\\d{1}|2[0123])",type:l.TYPE_HOUR},hh:{expression:"(d{1}|[01]\\d{1}|2[0123])",type:l.TYPE_HOUR},H:{expression:"(d{1}|0\\d{1}|1\\d{1}|2[0123])",type:l.TYPE_HOUR},HH:{expression:"(d{1}|[01]\\d{1}|2[0123])",type:l.TYPE_HOUR},m:{expression:"(d{1}|[012345]\\d{1})",type:l.TYPE_MINUTE},mm:{expression:"(d{1}|[012345]\\d{1})",type:l.TYPE_MINUTE},a:{expression:"([ap]m)",type:l.TYPE_MERIDIEM},A:{expression:"([ap]m)",type:l.TYPE_MERIDIEM}},h=a({init:function(t,e){this._rawStr=t,this._keyOrder=null,this._regExp=null,this._titles=e||u.en.titles,this._parseFormat()},_parseFormat:function(){var t="^",e=this._rawStr.match(c),n=[];e=o.filter(e,(function(t){return"\\"!==t[0]})),r(e,(function(e,i){/m/i.test(e)||(e=e.toLowerCase()),t+=d[e].expression+"[\\D\\s]*",n[i]=d[e].type})),t+="$",this._keyOrder=n,this._regExp=new RegExp(t,"gi")},parse:function(t){var e,n={year:0,month:1,date:1,hour:0,minute:0},i=!1,a=!1;if(this._regExp.lastIndex=0,!(e=this._regExp.exec(t)))throw Error('DateTimeFormatter: Not matched - "'+t+'"');return r(this._keyOrder,(function(t,r){var o=e[r+1];if(t===l.TYPE_MERIDIEM&&/[ap]m/i.test(o))i=!0,a=/pm/i.test(o);else{if(0!==(o=Number(o))&&!o)throw Error("DateTimeFormatter: Unknown value - "+e[r+1]);t===l.TYPE_YEAR&&o<100&&(o+=2e3),n[t]=o}})),i&&(a=a||n.hour>12,n.hour%=12,a&&(n.hour+=12)),new Date(n.year,n.month-1,n.date,n.hour,n.minute)},getRawString:function(){return this._rawStr},format:function(t){var e,n=t.getFullYear(),r=t.getMonth()+1,a=t.getDate(),o=t.getDay(),u=t.getHours(),d=t.getMinutes(),h="a";return i(l.TYPE_MERIDIEM,this._keyOrder)>-1&&(h=u>=12?"pm":"am",u=s.getMeridiemHour(u)),e={yyyy:n,yy:String(n).substr(2,2),M:r,MM:s.prependLeadingZero(r),MMM:this._titles.MMM[r-1],MMMM:this._titles.MMMM[r-1],d:a,dd:s.prependLeadingZero(a),D:this._titles.D[o],DD:this._titles.DD[o],hh:s.prependLeadingZero(u),h:u,mm:s.prependLeadingZero(d),m:d,A:h.toUpperCase(),a:h},this._rawStr.replace(c,(function(t){return"\\"===t[0]?t.substr(1):e[t]||e[t.toLowerCase()]||""}))}});t.exports=h},function(t,e,n){var i=n(13),r=n(9),a=n(32);function o(t,e,n,i){function o(e){n.call(i||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,o):"attachEvent"in t&&t.attachEvent("on"+e,o),function(t,e,n,i){var o=a(t,e),s=!1;r(o,(function(t){return t.handler!==n||(s=!0,!1)})),s||o.push({handler:n,wrappedHandler:i})}(t,e,n,o)}t.exports=function(t,e,n,a){i(e)?r(e.split(/\s+/g),(function(e){o(t,e,n,a)})):r(e,(function(e,i){o(t,i,e,n)}))}},function(t,e,n){var i="_feEventKey";t.exports=function(t,e){var n,r=t[i];return r||(r=t[i]={}),(n=r[e])||(n=r[e]=[]),n}},function(t,e,n){var i=n(13),r=n(9),a=n(32);function o(t,e,n){var i,o=a(t,e);n?(r(o,(function(r,a){return n!==r.handler||(s(t,e,r.wrappedHandler),i=a,!1)})),o.splice(i,1)):(r(o,(function(n){s(t,e,n.wrappedHandler)})),o.splice(0,o.length))}function s(t,e,n){"removeEventListener"in t?t.removeEventListener(e,n):"detachEvent"in t&&t.detachEvent("on"+e,n)}t.exports=function(t,e,n){i(e)?r(e.split(/\s+/g),(function(e){o(t,e,n)})):r(e,(function(e,n){o(t,n,e)}))}},function(t,e,n){var i=n(21),r=n(60),a=n(29);n(61),i.createCalendar=function(t,e){return new a(t,e)},i.createRangePicker=function(t){return new r(t)},t.exports=i},function(t,e,n){var i=n(36);t.exports=function(t,e){var n=i(e.prototype);n.constructor=t,t.prototype=n}},function(t,e,n){t.exports=function(t){function e(){}return e.prototype=t,new e}},function(t,e,n){var i=n(12),r=n(38);t.exports=function(t){return!i(t)&&!r(t)}},function(t,e,n){t.exports=function(t){return null===t}},function(t,e,n){t.exports=function(t){return t instanceof Function}},function(t,e,n){var i=n(3),r=n(41),a=Element.prototype,o=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||function(t){var e=this.document||this.ownerDocument;return i(this,r(e.querySelectorAll(t)))>-1};t.exports=function(t,e){return o.call(t,e)}},function(t,e,n){var i=n(2);t.exports=function(t){var e;try{e=Array.prototype.slice.call(t)}catch(n){e=[],i(t,(function(t){e.push(t)}))}return e}},function(t,e,n){t.exports=function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))}},function(e,n){e.exports=t},function(t,e,n){var i=n(0),r=n(8),a=n(25),o=n(14),s=n(10),l=n(45),u=n(30),c=n(1),d=n(4),h=n(19),p=c.TYPE_DATE,f=c.TYPE_MONTH,g=c.TYPE_YEAR,m=i({init:function(t,e){this._container=d.getElement(t),this._innerElement=null,this._infoElement=null,this._showToday=e.showToday,this._showJumpButtons=e.showJumpButtons,this._yearMonthTitleFormatter=null,this._yearTitleFormatter=null,this._todayFormatter=null,this._setFormatters(s[e.language]),this._setEvents(e)},_setFormatters:function(t){this._yearMonthTitleFormatter=new u(t.titleFormat,t.titles),this._yearTitleFormatter=new u("yyyy",t.titles),this._todayFormatter=new u(t.todayFormat,t.titles)},_setEvents:function(){h.on(this._container,"click",this._onClickHandler,this)},_removeEvents:function(){this.off(),h.off(this._container,"click",this._onClickHandler)},_onClickHandler:function(t){var e=d.getTarget(t);a(e,".tui-calendar-btn")&&this.fire("click",t)},_getTitleClass:function(t){switch(t){case p:return"tui-calendar-title-month";case f:return"tui-calendar-title-year";case g:return"tui-calendar-title-year-to-year";default:return""}},_getTitleText:function(t,e){var n,i,r;switch(e){case p:return this._yearMonthTitleFormatter.format(t);case f:return this._yearTitleFormatter.format(t);case g:return n=t.getFullYear(),i=new Date(n-4,0,1),r=new Date(n+4,0,1),this._yearTitleFormatter.format(i)+" - "+this._yearTitleFormatter.format(r);default:return""}},changeLanguage:function(t){this._setFormatters(s[t])},render:function(t,e){var n={showToday:this._showToday,showJumpButtons:this._showJumpButtons,todayText:this._todayFormatter.format(new Date),isDateCalendar:e===p,titleClass:this._getTitleClass(e),title:this._getTitleText(t,e)};this._container.innerHTML=l(n).replace(/^\s+|\s+$/g,""),this._innerElement=this._container.querySelector(".tui-calendar-header-inner"),n.showToday&&(this._infoElement=this._container.querySelector(".tui-calendar-header-info"))},destroy:function(){this._removeEvents(),o(this._innerElement),o(this._infoElement),this._container=this._showToday=this._showJumpButtons=this._yearMonthTitleFormatter=this._yearTitleFormatter=this._todayFormatter=this._innerElement=this._infoElement=null}});r.mixin(m),t.exports=m},function(t,e,n){var i=n(11);t.exports=function(t){return i('{{if isDateCalendar}}  {{if showJumpButtons}}    <div class="tui-calendar-header-inner tui-calendar-has-btns">      <button class="tui-calendar-btn tui-calendar-btn-prev-year">Prev year</button>      <button class="tui-calendar-btn tui-calendar-btn-prev-month">Prev month</button>      <em class="tui-calendar-title {{titleClass}}">{{title}}</em>      <button class="tui-calendar-btn tui-calendar-btn-next-month">Next month</button>      <button class="tui-calendar-btn tui-calendar-btn-next-year">Next year</button>    </div>  {{else}}    <div class="tui-calendar-header-inner">      <button class="tui-calendar-btn tui-calendar-btn-prev-month">Prev month</button>      <em class="tui-calendar-title {{titleClass}}">{{title}}</em>      <button class="tui-calendar-btn tui-calendar-btn-next-month">Next month</button>    </div>  {{/if}}{{else}}  <div class="tui-calendar-header-inner">    <button class="tui-calendar-btn tui-calendar-btn-prev-year">Prev year</button>    <em class="tui-calendar-title {{titleClass}}">{{title}}</em>    <button class="tui-calendar-btn tui-calendar-btn-next-year">Next year</button>  </div>{{/if}}{{if showToday}}  <div class="tui-calendar-header-info">    <p class="tui-calendar-title-today">{{todayText}}</p>  </div>{{/if}}',t)}},function(t,e,n){t.exports=function(t){return"object"==typeof HTMLElement?t&&(t instanceof HTMLElement||!!t.nodeType):!(!t||!t.nodeType)}},function(t,e,n){var i=n(12),r=n(48);t.exports=function(t,e){var n=location.hostname,a="TOAST UI "+t+" for "+n+": Statistics",o=window.localStorage.getItem(a);(i(window.tui)||!1!==window.tui.usageStatistics)&&(o&&!function(t){return(new Date).getTime()-t>6048e5}(o)||(window.localStorage.setItem(a,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||r("https://www.google-analytics.com/collect",{v:1,t:"event",tid:e,cid:n,dp:n,dh:t,el:t,ec:"use"})}),1e3)))}},function(t,e,n){var i=n(23);t.exports=function(t,e){var n=document.createElement("img"),r="";return i(e,(function(t,e){r+="&"+e+"="+t})),r=r.substring(1),n.src=t+"?"+r,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n}},function(t,e,n){var i=n(2),r=n(0),a=n(50),o=n(52),s=n(54),l=n(1),u=l.TYPE_DATE,c=l.TYPE_MONTH,d=l.TYPE_YEAR,h=r({init:function(t,e){var n=e.language,i=e.weekStartDay;this._container=t,this._dateLayer=new a(n,i),this._monthLayer=new o(n),this._yearLayer=new s(n),this._currentLayer=this._dateLayer},_getLayer:function(t){switch(t){case u:return this._dateLayer;case c:return this._monthLayer;case d:return this._yearLayer;default:return this._currentLayer}},_eachLayer:function(t){i([this._dateLayer,this._monthLayer,this._yearLayer],t)},changeLanguage:function(t){this._eachLayer((function(e){e.changeLanguage(t)}))},render:function(t,e){var n=this._getLayer(e);this._currentLayer.remove(),n.render(t,this._container),this._currentLayer=n},getDateElements:function(){return this._currentLayer.getDateElements()},destroy:function(){this._eachLayer((function(t){t.remove()})),this._container=this._currentLayer=this._dateLayer=this._monthLayer=this._yearLayer=null}});t.exports=h},function(t,e,n){var i=n(0),r=n(5),a=n(51),o=n(20),s=n(1).TYPE_DATE,l=n(1).WEEK_START_DAY_MAP,u=i(o,{init:function(t,e){o.call(this,t),this.weekStartDay=l[String(e).toLowerCase()]||0},_type:s,_makeContext:function(t){var e,n,i,r,a=this._localeText.titles.D;if(e=(t=t||new Date).getFullYear(),n=t.getMonth()+1,this.weekStartDay){for(i=a.slice(),r=0;r<this.weekStartDay;r+=1)i.push(i.shift());a=i}return{Sun:a[0],Mon:a[1],Tue:a[2],Wed:a[3],Thu:a[4],Fri:a[5],Sat:a[6],year:e,month:n,weeks:this._getWeeks(e,n)}},_getWeeks:function(t,e){for(var n,i,a,o,s,l=0,u=6,c=[];l<u;){for(i=[],a=this.weekStartDay;a<7+this.weekStartDay;a+=1)i.push(r.getDateOfWeek(t,e,l,a));n=this._getWeek(t,e,i),!this.weekStartDay||(o=l,s=n[0].dayInMonth,o||1===s||s>7)||(c.push(this._getFirstWeek(t,e)),u-=1),c.push(n),l+=1}return c},_getWeek:function(t,e,n){for(var i,r,a=new Date(t,e-1,1),o=new Date(t,e,0),s=[],l=0,u=n.length;l<u;l+=1)r="tui-calendar-date",(i=n[l])<a&&(r+=" tui-calendar-prev-month"),i>o&&(r+=" tui-calendar-next-month"),0===i.getDay()?r+=" tui-calendar-sun":6===i.getDay()&&(r+=" tui-calendar-sat"),s.push({dayInMonth:i.getDate(),className:r,timestamp:i.getTime()});return s},render:function(t,e){var n=this._makeContext(t);e.innerHTML=a(n),this._element=e.firstChild},getDateElements:function(){return this._element.querySelectorAll(".tui-calendar-date")},_getFirstWeek:function(t,e){var n,i=[];for(n=this.weekStartDay;n<7+this.weekStartDay;n+=1)i.push(r.getDateOfWeek(t,e,-1,n));return this._getWeek(t,e,i)}});t.exports=u},function(t,e,n){var i=n(11);t.exports=function(t){return i('<table class="tui-calendar-body-inner" cellspacing="0" cellpadding="0">  <caption><span>Dates</span></caption>  <thead class="tui-calendar-body-header">    <tr>      <th class="tui-sun" scope="col">{{Sun}}</th>      <th scope="col">{{Mon}}</th>      <th scope="col">{{Tue}}</th>      <th scope="col">{{Wed}}</th>      <th scope="col">{{Thu}}</th>      <th scope="col">{{Fri}}</th>      <th class="tui-sat" scope="col">{{Sat}}</th>    </tr>  </thead>  <tbody>    {{each weeks}}    <tr class="tui-calendar-week">      {{each @this}}      <td class="{{@this["className"]}}" data-timestamp="{{@this["timestamp"]}}">{{@this["dayInMonth"]}}</td>      {{/each}}    </tr>    {{/each}}  </tbody></table>',t)}},function(t,e,n){var i=n(0),r=n(53),a=n(20),o=n(1).TYPE_MONTH,s=n(5),l=i(a,{init:function(t){a.call(this,t)},_type:o,_makeContext:function(t){var e=this._localeText.titles.MMM;return{year:t.getFullYear(),Jan:e[0],Feb:e[1],Mar:e[2],Apr:e[3],May:e[4],Jun:e[5],Jul:e[6],Aug:e[7],Sep:e[8],Oct:e[9],Nov:e[10],Dec:e[11],getFirstDayTimestamp:s.getFirstDayTimestamp}},render:function(t,e){var n=this._makeContext(t);e.innerHTML=r(n),this._element=e.firstChild},getDateElements:function(){return this._element.querySelectorAll(".tui-calendar-month")}});t.exports=l},function(t,e,n){var i=n(11);t.exports=function(t){return i('<table class="tui-calendar-body-inner">  <caption><span>Months</span></caption>  <tbody>    <tr class="tui-calendar-month-group">      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 0}}>{{Jan}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 1}}>{{Feb}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 2}}>{{Mar}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 3}}>{{Apr}}</td>    </tr>    <tr class="tui-calendar-month-group">      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 4}}>{{May}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 5}}>{{Jun}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 6}}>{{Jul}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 7}}>{{Aug}}</td>    </tr>    <tr class="tui-calendar-month-group">      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 8}}>{{Sep}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 9}}>{{Oct}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 10}}>{{Nov}}</td>      <td class="tui-calendar-month" data-timestamp={{getFirstDayTimestamp year 11}}>{{Dec}}</td>    </tr>  </tbody></table>',t)}},function(t,e,n){var i=n(0),r=n(55),a=n(20),o=n(1).TYPE_YEAR,s=n(5),l=i(a,{init:function(t){a.call(this,t)},_type:o,_makeContext:function(t){var e=t.getFullYear();return{yearGroups:[s.getRangeArr(e-4,e-2),s.getRangeArr(e-1,e+1),s.getRangeArr(e+2,e+4)],getFirstDayTimestamp:s.getFirstDayTimestamp}},render:function(t,e){var n=this._makeContext(t);e.innerHTML=r(n),this._element=e.firstChild},getDateElements:function(){return this._element.querySelectorAll(".tui-calendar-year")}});t.exports=l},function(t,e,n){var i=n(11);t.exports=function(t){return i('<table class="tui-calendar-body-inner">  <caption><span>Years</span></caption>  <tbody>    {{each yearGroups}}    <tr class="tui-calendar-year-group">      {{each @this}}      <td class="tui-calendar-year" data-timestamp={{getFirstDayTimestamp @this 0}}>        {{@this}}      </td>      {{/each}}    </tr>    {{/each}}  </tbody></table>',t)}},function(t,e,n){var i=n(2),r=n(0),a=n(15),o=n(57),s=n(4),l=r({init:function(t){t=t||[],this._ranges=[],i(t,(function(t){this.add(t[0],t[1])}),this)},contains:function(t,e){for(var n=0,i=this._ranges.length;n<i;n+=1)if(this._ranges[n].contains(t,e))return!0;return!1},hasOverlap:function(t,e){for(var n=0,i=this._ranges.length;n<i;n+=1)if(this._ranges[n].isOverlapped(t,e))return!0;return!1},add:function(t,e){for(var n,i=!1,r=0,a=this._ranges.length;r<a;r+=1){if(i=(n=this._ranges[r]).isOverlapped(t,e)){n.merge(t,e);break}if(t<n.start)break}i||this._ranges.splice(r,0,new o(t,e))},getMinimumValue:function(){return this._ranges[0].start},getMaximumValue:function(){var t=this._ranges.length;return this._ranges[t-1].end},exclude:function(t,e){a(e)||(e=t),i(this._ranges,(function(n){var i;n.isOverlapped(t,e)&&(i=n.end,n.exclude(t,e),e+1<=i&&this.add(e+1,i))}),this),this._ranges=s.filter(this._ranges,(function(t){return!t.isEmpty()}))},findOverlappedRange:function(t,e){for(var n,i=0,r=this._ranges.length;i<r;i+=1)if((n=this._ranges[i]).isOverlapped(t,e))return[n.start,n.end];return null}});t.exports=l},function(t,e,n){var i=n(0),r=n(15),a=i({init:function(t,e){this.setRange(t,e)},setRange:function(t,e){r(e)||(e=t),this.start=Math.min(t,e),this.end=Math.max(t,e)},merge:function(t,e){r(t)&&r(e)&&this.isOverlapped(t,e)&&(this.start=Math.min(t,this.start),this.end=Math.max(e,this.end))},isEmpty:function(){return!r(this.start)||!r(this.end)},setEmpty:function(){this.start=this.end=null},contains:function(t,e){return r(e)||(e=t),this.start<=t&&e<=this.end},isOverlapped:function(t,e){return r(e)||(e=t),this.start<=e&&this.end>=t},exclude:function(t,e){t<=this.start&&e>=this.end?this.setEmpty():this.contains(t)?this.setRange(this.start,t-1):this.contains(e)&&this.setRange(e+1,this.end)}});t.exports=a},function(t,e,n){var i=n(11);t.exports=function(t){return i('<div class="tui-datepicker">  {{if timePicker}}    {{if isTab}}      <div class="tui-datepicker-selector">        <button type="button" class="tui-datepicker-selector-button tui-is-checked" aria-label="selected">          <span class="tui-ico-date"></span>{{localeText["date"]}}        </button>        <button type="button" class="tui-datepicker-selector-button">          <span class="tui-ico-time"></span>{{localeText["time"]}}        </button>      </div>      <div class="tui-datepicker-body">        <div class="tui-calendar-container"></div>        <div class="tui-timepicker-container"></div>      </div>    {{else}}      <div class="tui-datepicker-body">        <div class="tui-calendar-container"></div>      </div>      <div class="tui-datepicker-footer">        <div class="tui-timepicker-container"></div>      </div>    {{/if}}  {{else}}    <div class="tui-datepicker-body">      <div class="tui-calendar-container"></div>    </div>  {{/if}}</div>',t)}},function(t,e,n){var i=n(0),r=n(8),a=n(31),o=n(33),s=n(30),l=n(19),u=n(4),c=i({init:function(t,e){e.format=e.format||"yyyy-MM-dd",this._input=u.getElement(t),this._id=e.id,this._titles=e.localeText.titles,this._formatter=new s(e.format,this._titles),this._setEvents()},changeLocaleTitles:function(t){this._titles=t},_setEvents:function(){this._input&&(a(this._input,"change",this._onChangeHandler,this),l.on(this._input,"click",this._onClickHandler,this))},_removeEvents:function(){this.off(),this._input&&(o(this._input,"change",this._onChangeHandler),l.off(this._input,"click",this._onClickHandler))},_onChangeHandler:function(){this.fire("change")},_onClickHandler:function(){this.fire("click")},is:function(t){return this._input===t},enable:function(){this._input&&this._input.removeAttribute("disabled")},disable:function(){this._input&&this._input.setAttribute("disabled",!0)},getFormat:function(){return this._formatter.getRawString()},setFormat:function(t){t&&(this._formatter=new s(t,this._titles))},clearText:function(){this._input&&(this._input.value="")},setDate:function(t){this._input&&(this._input.value=this._formatter.format(t))},getDate:function(){var t="";return this._input&&(t=this._input.value),this._formatter.parse(t)},destroy:function(){this._removeEvents(),this._input=this._id=this._formatter=null}});r.mixin(c),t.exports=c},function(t,e,n){var i=n(2),r=n(0),a=n(8),o=n(16),s=n(26),l=n(18),u=n(7),c=n(21),d=n(5),h=n(1),p=n(4),f="tui-rangepicker",g=h.CLASS_NAME_SELECTED,m="tui-is-selected-range",v=r({init:function(t){var e,n;if(e=(t=t||{}).startpicker,n=t.endpicker,!e)throw new Error('The "startpicker" option is required.');if(!n)throw new Error('The "endpicker" option is required.');this._startpicker=null,this._endpicker=null,this._isRangeSet=!1,this._preEndPickerDate=(new Date).getDate(),this._initializePickers(t),this._syncRangesToEndpicker()},_initializePickers:function(t){var e=p.getElement(t.startpicker.container),n=p.getElement(t.endpicker.container),i=p.getElement(t.startpicker.input),r=p.getElement(t.endpicker.input),a=u({},t,{input:{element:i,format:t.format},date:t.startpicker.date,weekStartDay:t.startpicker.weekStartDay}),o=u({},t,{input:{element:r,format:t.format},date:t.endpicker.date,weekStartDay:t.endpicker.weekStartDay});this._startpicker=new c(e,a),this._startpicker.addCssClass(f),this._startpicker.on("change",this._onChangeStartpicker,this),this._startpicker.on("draw",this._onDrawPicker,this),this._endpicker=new c(n,o),this._endpicker.addCssClass(f),this._endpicker.on("change",this._onChangeEndpicker,this),this._endpicker.on("draw",this._onDrawPicker,this)},_onDrawPicker:function(t){var e=t.type,n=this._startpicker.getDate(),r=this._endpicker.getDate();n&&(r||(r=new Date(NaN)),i(t.dateElements,(function(t){var i=new Date(Number(s(t,"timestamp"))),a=d.inRange(n,r,i,e),o=d.isSame(n,i,e)||d.isSame(r,i,e);this._setRangeClass(t,a),this._setSelectedClass(t,o)}),this))},_setRangeClass:function(t,e){e?o(t,m):l(t,m)},_setSelectedClass:function(t,e){e?o(t,g):l(t,g)},_syncRangesToEndpicker:function(){var t,e=this._startpicker.getDate();e?(t=this._startpicker.findOverlappedRange(d.cloneWithStartOf(e).getTime(),d.cloneWithEndOf(e).getTime()),this._endpicker.enable(),this._endpicker.setRanges([[e.getTime(),t[1].getTime()]]),this._setTimeRangeOnEndPicker()):(this._endpicker.setNull(),this._endpicker.disable())},_onChangeStartpicker:function(){this._syncRangesToEndpicker(),this.fire("change:start")},_onChangeEndpicker:function(){var t,e=this._endpicker.getDate();e?(t=e.getDate(),this._preEndPickerDate!==t&&this._setTimeRangeOnEndPicker(),this._preEndPickerDate=t):this._preEndPickerDate=null,this.fire("change:end")},_isStartAndEndDateSame:function(){return!!this._endpicker.getDate()&&!!this._startpicker.getDate()&&0===d.compare(this._endpicker.getDate(),this._startpicker.getDate(),h.TYPE_DATE)},_setTimeRangeOnEndPicker:function(){var t,e,n,i=this._endpicker._timePicker;i&&(t=this._endpicker.getDate()||this._startpicker.getDate(),e=this._getTimeRangeFromStartPicker(),n=t&&e[t.getDate()],this._isStartAndEndDateSame()&&n?(i.setRange(n),this._isRangeSet=!0):this._isRangeSet&&(i.setRange({hour:0,minute:0}),i.resetMinuteRange(),this._isRangeSet=!1))},_getTimeRangeFromStartPicker:function(){var t=this._startpicker.getDate(),e={};return e[t.getDate()]={hour:t.getHours(),minute:t.getMinutes()},e},getStartpicker:function(){return this._startpicker},getEndpicker:function(){return this._endpicker},setStartDate:function(t){this._startpicker.setDate(t)},getStartDate:function(){return this._startpicker.getDate()},getEndDate:function(){return this._endpicker.getDate()},setEndDate:function(t){this._endpicker.setDate(t)},setRanges:function(t){this._startpicker.setRanges(t),this._syncRangesToEndpicker()},addRange:function(t,e){this._startpicker.addRange(t,e),this._syncRangesToEndpicker()},removeRange:function(t,e,n){this._startpicker.removeRange(t,e,n),this._syncRangesToEndpicker()},changeLanguage:function(t){this._startpicker.changeLanguage(t),this._endpicker.changeLanguage(t)},destroy:function(){this.off(),this._startpicker.destroy(),this._endpicker.destroy(),this._startpicker=this._endpicker=null}});a.mixin(v),t.exports=v},function(t,e,n){}])}))}(zN);var VN,FN,BN,HN,GN,jN,WN=ul(zN.exports),UN=Object.defineProperty,YN=Object.defineProperties,$N=Object.getOwnPropertyDescriptors,qN=Object.getOwnPropertySymbols,XN=Object.prototype.hasOwnProperty,ZN=Object.prototype.propertyIsEnumerable,JN=(t,e,n)=>e in t?UN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KN=(t,e)=>{for(var n in e||(e={}))XN.call(e,n)&&JN(t,n,e[n]);if(qN)for(var n of qN(e))ZN.call(e,n)&&JN(t,n,e[n]);return t},QN=(t,e)=>YN(t,$N(e)),tO=(t,e)=>{var n={};for(var i in t)XN.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&qN)for(var i of qN(t))e.indexOf(i)<0&&ZN.call(t,i)&&(n[i]=t[i]);return n},eO={},nO=[],iO=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function rO(t,e){for(var n in e)t[n]=e[n];return t}function aO(t){var e=t.parentNode;e&&e.removeChild(t)}function oO(t,e,n){var i,r,a,o={};for(a in e)"key"==a?i=e[a]:"ref"==a?r=e[a]:o[a]=e[a];if(arguments.length>2&&(o.children=arguments.length>3?VN.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(a in t.defaultProps)void 0===o[a]&&(o[a]=t.defaultProps[a]);return sO(t,o,i,r,null)}function sO(t,e,n,i,r){var a={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++BN:r};return null==r&&null!=FN.vnode&&FN.vnode(a),a}function lO(t){return t.children}function uO(t,e){this.props=t,this.context=e}function cO(t,e){if(null==e)return t.__?cO(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?cO(t):null}function dO(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return dO(t)}}function hO(t){(!t.__d&&(t.__d=!0)&&HN.push(t)&&!pO.__r++||GN!==FN.debounceRendering)&&((GN=FN.debounceRendering)||setTimeout)(pO)}function pO(){for(var t;pO.__r=HN.length;)t=HN.sort((function(t,e){return t.__v.__b-e.__v.__b})),HN=[],t.some((function(t){var e,n,i,r,a,o;t.__d&&(a=(r=(e=t).__v).__e,(o=e.__P)&&(n=[],(i=rO({},r)).__v=r.__v+1,wO(o,r,i,e.__n,void 0!==o.ownerSVGElement,null!=r.__h?[a]:null,n,null==a?cO(r):a,r.__h),MO(n,r),r.__e!=a&&dO(r)))}))}function fO(t,e,n,i,r,a,o,s,l,u){var c,d,h,p,f,g,m,v=i&&i.__k||nO,y=v.length;for(n.__k=[],c=0;c<e.length;c++)if(null!=(p=n.__k[c]=null==(p=e[c])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p||"bigint"==typeof p?sO(null,p,null,null,p):Array.isArray(p)?sO(lO,{children:p},null,null,null):p.__b>0?sO(p.type,p.props,p.key,null,p.__v):p)){if(p.__=n,p.__b=n.__b+1,null===(h=v[c])||h&&p.key==h.key&&p.type===h.type)v[c]=void 0;else for(d=0;d<y;d++){if((h=v[d])&&p.key==h.key&&p.type===h.type){v[d]=void 0;break}h=null}wO(t,p,h=h||eO,r,a,o,s,l,u),f=p.__e,(d=p.ref)&&h.ref!=d&&(m||(m=[]),h.ref&&m.push(h.ref,null,p),m.push(d,p.__c||f,p)),null!=f?(null==g&&(g=f),"function"==typeof p.type&&p.__k===h.__k?p.__d=l=gO(p,l,t):l=vO(t,p,h,v,f,l),"function"==typeof n.type&&(n.__d=l)):l&&h.__e==l&&l.parentNode!=t&&(l=cO(h))}for(n.__e=g,c=y;c--;)null!=v[c]&&("function"==typeof n.type&&null!=v[c].__e&&v[c].__e==n.__d&&(n.__d=cO(i,c+1)),CO(v[c],v[c]));if(m)for(c=0;c<m.length;c++)SO(m[c],m[++c],m[++c])}function gO(t,e,n){for(var i,r=t.__k,a=0;r&&a<r.length;a++)(i=r[a])&&(i.__=t,e="function"==typeof i.type?gO(i,e,n):vO(n,i,i,r,i.__e,e));return e}function mO(t,e){return e=e||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some((function(t){mO(t,e)})):e.push(t)),e}function vO(t,e,n,i,r,a){var o,s,l;if(void 0!==e.__d)o=e.__d,e.__d=void 0;else if(null==n||r!=a||null==r.parentNode)t:if(null==a||a.parentNode!==t)t.appendChild(r),o=null;else{for(s=a,l=0;(s=s.nextSibling)&&l<i.length;l+=2)if(s==r)break t;t.insertBefore(r,a),o=a}return void 0!==o?o:r.nextSibling}function yO(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||iO.test(e)?n:n+"px"}function _O(t,e,n,i,r){var a;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||yO(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||yO(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])a=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=n,n?i||t.addEventListener(e,a?bO:xO,a):t.removeEventListener(e,a?bO:xO,a);else if("dangerouslySetInnerHTML"!==e){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(o){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function xO(t){this.l[t.type+!1](FN.event?FN.event(t):t)}function bO(t){this.l[t.type+!0](FN.event?FN.event(t):t)}function wO(t,e,n,i,r,a,o,s,l){var u,c,d,h,p,f,g,m,v,y,_,x,b,w=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(l=n.__h,s=e.__e=n.__e,e.__h=null,a=[s]),(u=FN.__b)&&u(e);try{t:if("function"==typeof w){if(m=e.props,v=(u=w.contextType)&&i[u.__c],y=u?v?v.props.value:u.__:i,n.__c?g=(c=e.__c=n.__c).__=c.__E:("prototype"in w&&w.prototype.render?e.__c=c=new w(m,y):(e.__c=c=new uO(m,y),c.constructor=w,c.render=kO),v&&v.sub(c),c.props=m,c.state||(c.state={}),c.context=y,c.__n=i,d=c.__d=!0,c.__h=[]),null==c.__s&&(c.__s=c.state),null!=w.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=rO({},c.__s)),rO(c.__s,w.getDerivedStateFromProps(m,c.__s))),h=c.props,p=c.state,d)null==w.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==w.getDerivedStateFromProps&&m!==h&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(m,y),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(m,c.__s,y)||e.__v===n.__v){c.props=m,c.state=c.__s,e.__v!==n.__v&&(c.__d=!1),c.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),c.__h.length&&o.push(c);break t}null!=c.componentWillUpdate&&c.componentWillUpdate(m,c.__s,y),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(h,p,f)}))}if(c.context=y,c.props=m,c.__v=e,c.__P=t,_=FN.__r,x=0,"prototype"in w&&w.prototype.render)c.state=c.__s,c.__d=!1,_&&_(e),u=c.render(c.props,c.state,c.context);else do{c.__d=!1,_&&_(e),u=c.render(c.props,c.state,c.context),c.state=c.__s}while(c.__d&&++x<25);c.state=c.__s,null!=c.getChildContext&&(i=rO(rO({},i),c.getChildContext())),d||null==c.getSnapshotBeforeUpdate||(f=c.getSnapshotBeforeUpdate(h,p)),b=null!=u&&u.type===lO&&null==u.key?u.props.children:u,fO(t,Array.isArray(b)?b:[b],e,n,i,r,a,o,s,l),c.base=e.__e,e.__h=null,c.__h.length&&o.push(c),g&&(c.__E=c.__=null),c.__e=!1}else null==a&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=function(t,e,n,i,r,a,o,s){var l,u,c,d=n.props,h=e.props,p=e.type,f=0;if("svg"===p&&(r=!0),null!=a)for(;f<a.length;f++)if((l=a[f])&&"setAttribute"in l==!!p&&(p?l.localName===p:3===l.nodeType)){t=l,a[f]=null;break}if(null==t){if(null===p)return document.createTextNode(h);t=r?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,h.is&&h),a=null,s=!1}if(null===p)d===h||s&&t.data===h||(t.data=h);else{if(a=a&&VN.call(t.childNodes),u=(d=n.props||eO).dangerouslySetInnerHTML,c=h.dangerouslySetInnerHTML,!s){if(null!=a)for(d={},f=0;f<t.attributes.length;f++)d[t.attributes[f].name]=t.attributes[f].value;(c||u)&&(c&&(u&&c.__html==u.__html||c.__html===t.innerHTML)||(t.innerHTML=c&&c.__html||""))}if(function(t,e,n,i,r){var a;for(a in n)"children"===a||"key"===a||a in e||_O(t,a,null,n[a],i);for(a in e)r&&"function"!=typeof e[a]||"children"===a||"key"===a||"value"===a||"checked"===a||n[a]===e[a]||_O(t,a,e[a],n[a],i)}(t,h,d,r,s),c)e.__k=[];else if(f=e.props.children,fO(t,Array.isArray(f)?f:[f],e,n,i,r&&"foreignObject"!==p,a,o,a?a[0]:n.__k&&cO(n,0),s),null!=a)for(f=a.length;f--;)null!=a[f]&&aO(a[f]);s||("value"in h&&void 0!==(f=h.value)&&(f!==t.value||"progress"===p&&!f||"option"===p&&f!==d.value)&&_O(t,"value",f,d.value,!1),"checked"in h&&void 0!==(f=h.checked)&&f!==t.checked&&_O(t,"checked",f,d.checked,!1))}return t}(n.__e,e,n,i,r,a,o,l);(u=FN.diffed)&&u(e)}catch(M){e.__v=null,(l||null!=a)&&(e.__e=s,e.__h=!!l,a[a.indexOf(s)]=null),FN.__e(M,e,n)}}function MO(t,e){FN.__c&&FN.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(n){FN.__e(n,e.__v)}}))}function SO(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(i){FN.__e(i,n)}}function CO(t,e,n){var i,r;if(FN.unmount&&FN.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||SO(i,null,e)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){FN.__e(a,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&CO(i[r],e,"function"!=typeof t.type);n||null==t.__e||aO(t.__e),t.__e=t.__d=void 0}function kO(t,e,n){return this.constructor(t,n)}function IO(t,e,n){var i,r,a;FN.__&&FN.__(t,e),r=(i="function"==typeof n)?null:n&&n.__k||e.__k,a=[],wO(e,t=(!i&&n||e).__k=oO(lO,null,[t]),r||eO,eO,void 0!==e.ownerSVGElement,!i&&n?[n]:r?null:e.firstChild?VN.call(e.childNodes):null,a,!i&&n?n:r?r.__e:e.firstChild,i),MO(a,t)}function DO(t,e){var n={__c:e="__cC"+jN++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,i;return this.getChildContext||(n=[],(i={})[e]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(hO)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}VN=nO.slice,FN={__e:function(t,e,n,i){for(var r,a,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(t)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,i||{}),o=r.__d),o)return r.__E=r}catch(s){t=s}throw t}},BN=0,uO.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=rO({},this.state),"function"==typeof t&&(t=t(rO({},n),this.props)),t&&rO(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),hO(this))},uO.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),hO(this))},uO.prototype.render=lO,HN=[],pO.__r=0,jN=0;var TO,AO,EO,LO,PO=0,NO=[],OO=[],zO=FN.__b,RO=FN.__r,VO=FN.diffed,FO=FN.__c,BO=FN.unmount;function HO(t,e){FN.__h&&FN.__h(AO,t,PO||e),PO=0;var n=AO.__H||(AO.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:OO}),n.__[t]}function GO(t){return PO=1,jO(ez,t)}function jO(t,e,n){var i=HO(TO++,2);return i.t=t,i.__c||(i.__=[n?n(e):ez(void 0,e),function(t){var e=i.t(i.__[0],t);i.__[0]!==e&&(i.__=[e,i.__[1]],i.__c.setState({}))}],i.__c=AO),i.__}function WO(t,e){var n=HO(TO++,3);!FN.__s&&tz(n.__H,e)&&(n.__=t,n.u=e,AO.__H.__h.push(n))}function UO(t,e){var n=HO(TO++,4);!FN.__s&&tz(n.__H,e)&&(n.__=t,n.u=e,AO.__h.push(n))}function YO(t){return PO=5,$O((function(){return{current:t}}),[])}function $O(t,e){var n=HO(TO++,7);return tz(n.__H,e)?(n.__V=t(),n.u=e,n.__h=t,n.__V):n.__}function qO(t,e){return PO=8,$O((function(){return t}),e)}function XO(t){var e=AO.context[t.__c],n=HO(TO++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(AO)),e.props.value):t.__}function ZO(){for(var t;t=NO.shift();)if(t.__P)try{t.__H.__h.forEach(KO),t.__H.__h.forEach(QO),t.__H.__h=[]}catch(e){t.__H.__h=[],FN.__e(e,t.__v)}}FN.__b=function(t){AO=null,zO&&zO(t)},FN.__r=function(t){RO&&RO(t),TO=0;var e=(AO=t.__c).__H;e&&(EO===AO?(e.__h=[],AO.__h=[],e.__.forEach((function(t){t.__V=OO,t.u=void 0}))):(e.__h.forEach(KO),e.__h.forEach(QO),e.__h=[])),EO=AO},FN.diffed=function(t){VO&&VO(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==NO.push(e)&&LO===FN.requestAnimationFrame||((LO=FN.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(i),JO&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);JO&&(e=requestAnimationFrame(n))})(ZO)),e.__H.__.forEach((function(t){t.u&&(t.__H=t.u),t.__V!==OO&&(t.__=t.__V),t.u=void 0,t.__V=OO}))),EO=AO=null},FN.__c=function(t,e){e.some((function(t){try{t.__h.forEach(KO),t.__h=t.__h.filter((function(t){return!t.__||QO(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],FN.__e(n,t.__v)}})),FO&&FO(t,e)},FN.unmount=function(t){BO&&BO(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{KO(t)}catch(n){e=n}})),e&&FN.__e(e,n.__v))};var JO="function"==typeof requestAnimationFrame;function KO(t){var e=AO,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),AO=e}function QO(t){var e=AO;t.__c=t.__(),AO=e}function tz(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function ez(t,e){return"function"==typeof e?e(t):e}function nz(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function iz(t){return!!t&&!!t[Gz]}function rz(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===jz}(t)||Array.isArray(t)||!!t[Hz]||!!t.constructor[Hz]||uz(t)||cz(t))}function az(t,e,n){void 0===n&&(n=!1),0===oz(t)?(n?Object.keys:Wz)(t).forEach((function(i){n&&"symbol"==typeof i||e(i,t[i],t)})):t.forEach((function(n,i){return e(i,n,t)}))}function oz(t){var e=t[Gz];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:uz(t)?2:cz(t)?3:0}function sz(t,e){return 2===oz(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function lz(t,e,n){var i=oz(t);2===i?t.set(e,n):3===i?(t.delete(e),t.add(n)):t[e]=n}function uz(t){return Rz&&t instanceof Map}function cz(t){return Vz&&t instanceof Set}function dz(t){return t.o||t.t}function hz(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Uz(t);delete e[Gz];for(var n=Wz(e),i=0;i<n.length;i++){var r=n[i],a=e[r];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(e[r]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[r]})}return Object.create(Object.getPrototypeOf(t),e)}function pz(t,e){return void 0===e&&(e=!1),gz(t)||iz(t)||!rz(t)||(oz(t)>1&&(t.set=t.add=t.clear=t.delete=fz),Object.freeze(t),e&&az(t,(function(t,e){return pz(e,!0)}),!0)),t}function fz(){nz(2)}function gz(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function mz(t){var e=Yz[t];return e||nz(18,t),e}function vz(){return Oz}function yz(t,e){e&&(mz("Patches"),t.u=[],t.s=[],t.v=e)}function _z(t){xz(t),t.p.forEach(wz),t.p=null}function xz(t){t===Oz&&(Oz=t.l)}function bz(t){return Oz={p:[],l:Oz,h:t,m:!0,_:0}}function wz(t){var e=t[Gz];0===e.i||1===e.i?e.j():e.O=!0}function Mz(t,e){e._=e.p.length;var n=e.p[0],i=void 0!==t&&t!==n;return e.h.g||mz("ES5").S(e,t,i),i?(n[Gz].P&&(_z(e),nz(4)),rz(t)&&(t=Sz(e,t),e.l||kz(e,t)),e.u&&mz("Patches").M(n[Gz].t,t,e.u,e.s)):t=Sz(e,n,[]),_z(e),e.u&&e.v(e.u,e.s),t!==Bz?t:void 0}function Sz(t,e,n){if(gz(e))return e;var i=e[Gz];if(!i)return az(e,(function(r,a){return Cz(t,i,e,r,a,n)}),!0),e;if(i.A!==t)return e;if(!i.P)return kz(t,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var r=4===i.i||5===i.i?i.o=hz(i.k):i.o;az(3===i.i?new Set(r):r,(function(e,a){return Cz(t,i,r,e,a,n)})),kz(t,r,!1),n&&t.u&&mz("Patches").R(i,n,t.u,t.s)}return i.o}function Cz(t,e,n,i,r,a){if(iz(r)){var o=Sz(t,r,a&&e&&3!==e.i&&!sz(e.D,i)?a.concat(i):void 0);if(lz(n,i,o),!iz(o))return;t.m=!1}if(rz(r)&&!gz(r)){if(!t.h.F&&t._<1)return;Sz(t,r),e&&e.A.l||kz(t,r)}}function kz(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&pz(e,n)}function Iz(t,e){var n=t[Gz];return(n?dz(n):t)[e]}function Dz(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=Object.getPrototypeOf(n)}}function Tz(t){t.P||(t.P=!0,t.l&&Tz(t.l))}function Az(t){t.o||(t.o=hz(t.t))}function Ez(t,e,n){var i=uz(e)?mz("MapSet").N(e,n):cz(e)?mz("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),i={i:n?1:0,A:e?e.A:vz(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},r=i,a=$z;n&&(r=[i],a=qz);var o=Proxy.revocable(r,a),s=o.revoke,l=o.proxy;return i.k=l,i.j=s,l}(e,n):mz("ES5").J(e,n);return(n?n.A:vz()).p.push(i),i}function Lz(t){return iz(t)||nz(22,t),function t(e){if(!rz(e))return e;var n,i=e[Gz],r=oz(e);if(i){if(!i.P&&(i.i<4||!mz("ES5").K(i)))return i.t;i.I=!0,n=Pz(e,r),i.I=!1}else n=Pz(e,r);return az(n,(function(e,r){i&&function(t,e){return 2===oz(t)?t.get(e):t[e]}(i.t,e)===r||lz(n,e,t(r))})),3===r?new Set(n):n}(t)}function Pz(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return hz(t)}var Nz,Oz,zz="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Rz="undefined"!=typeof Map,Vz="undefined"!=typeof Set,Fz="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Bz=zz?Symbol.for("immer-nothing"):((Nz={})["immer-nothing"]=!0,Nz),Hz=zz?Symbol.for("immer-draftable"):"__$immer_draftable",Gz=zz?Symbol.for("immer-state"):"__$immer_state",jz=""+Object.prototype.constructor,Wz="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Uz=Object.getOwnPropertyDescriptors||function(t){var e={};return Wz(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},Yz={},$z={get:function(t,e){if(e===Gz)return t;var n,i,r,a=dz(t);if(!sz(a,e))return n=t,(r=Dz(a,e))?"value"in r?r.value:null===(i=r.get)||void 0===i?void 0:i.call(n.k):void 0;var o=a[e];return t.I||!rz(o)?o:o===Iz(t.t,e)?(Az(t),t.o[e]=Ez(t.A.h,o,t)):o},has:function(t,e){return e in dz(t)},ownKeys:function(t){return Reflect.ownKeys(dz(t))},set:function(t,e,n){var i=Dz(dz(t),e);if(null==i?void 0:i.set)return i.set.call(t.k,n),!0;if(!t.P){var r=Iz(dz(t),e),a=null==r?void 0:r[Gz];if(a&&a.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(n,r)&&(void 0!==n||sz(t.t,e)))return!0;Az(t),Tz(t)}return t.o[e]===n&&"number"!=typeof n&&(void 0!==n||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==Iz(t.t,e)||e in t.t?(t.D[e]=!1,Az(t),Tz(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=dz(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:i.enumerable,value:n[e]}:i},defineProperty:function(){nz(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){nz(12)}},qz={};az($z,(function(t,e){qz[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),qz.deleteProperty=function(t,e){return qz.set.call(this,t,e,void 0)},qz.set=function(t,e,n){return $z.set.call(this,t[0],e,n,t[0])};var Xz=new(function(){function t(t){var e=this;this.g=Fz,this.F=!0,this.produce=function(t,n,i){if("function"==typeof t&&"function"!=typeof n){var r=n;n=t;var a=e;return function(t){var e=this;void 0===t&&(t=r);for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return a.produce(t,(function(t){var i;return(i=n).call.apply(i,[e,t].concat(o))}))}}var o;if("function"!=typeof n&&nz(6),void 0!==i&&"function"!=typeof i&&nz(7),rz(t)){var s=bz(e),l=Ez(e,t,void 0),u=!0;try{o=n(l),u=!1}finally{u?_z(s):xz(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return yz(s,i),Mz(t,s)}),(function(t){throw _z(s),t})):(yz(s,i),Mz(o,s))}if(!t||"object"!=typeof t){if(void 0===(o=n(t))&&(o=t),o===Bz&&(o=void 0),e.F&&pz(o,!0),i){var c=[],d=[];mz("Patches").M(t,o,c,d),i(c,d)}return o}nz(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var i=arguments.length,r=Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(r))}))};var i,r,a=e.produce(t,n,(function(t,e){i=t,r=e}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return[t,i,r]})):[a,i,r]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){rz(t)||nz(8),iz(t)&&(t=Lz(t));var e=bz(this),n=Ez(this,t,void 0);return n[Gz].C=!0,xz(e),n},e.finishDraft=function(t,e){var n=(t&&t[Gz]).A;return yz(n,e),Mz(void 0,n)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!Fz&&nz(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var i=e[n];if(0===i.path.length&&"replace"===i.op){t=i.value;break}}n>-1&&(e=e.slice(n+1));var r=mz("Patches").$;return iz(t)?r(t,e):this.produce(t,(function(t){return r(t,e)}))},t}()),Zz=Xz.produce;Xz.produceWithPatches.bind(Xz),Xz.setAutoFreeze.bind(Xz),Xz.setUseProxies.bind(Xz),Xz.applyPatches.bind(Xz),Xz.createDraft.bind(Xz),Xz.finishDraft.bind(Xz);var Jz=Zz;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Kz=function(t){return void 0===t},Qz=Kz;var tR=function(t,e,n){var i,r=[];for(Qz(e)&&(e=t||0,t=0),e*=i=(n=n||1)<0?-1:1;t*i<e;t+=n)r.push(t);return r};const eR={color:"#000",backgroundColor:"#a1b56c",dragBackgroundColor:"#a1b56c",borderColor:"#000"};var nR=function(t){return"boolean"==typeof t||t instanceof Boolean};var iR=function(t){return"number"==typeof t||t instanceof Number};var rR=function(t){return t===Object(t)};var aR=function(t){return"string"==typeof t||t instanceof String};function oR(t){return Kz(t)||null===t}function sR(t){return!oR(t)}function lR(t){return"function"==typeof t}function uR(...t){const e=[];return t.forEach((t=>{t&&(aR(t)?e.push(t):Object.keys(t).forEach((n=>{t[n]&&e.push(n)})))})),e.map((t=>`toastui-calendar-${t}`)).join(" ")}function cR(t){return`${t}%`}function dR(t){return`${t}px`}function hR(t){const e=t.match(/(\d+)%/),n=t.match(/(-?)\s?(\d+)px/);return{percent:e?parseInt(e[1],10):0,px:n?parseInt(`${n[1]}${n[2]}`,10):0}}function pR(t,e){const n=t.model.getColors();return Object.keys(eR).reduce(((t,i)=>{var r,a;const o=i;return t[o]=null!=(a=null!=(r=n[o])?r:e[o])?a:eR[o],t}),{})}const fR=/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\.)?([0-9]+)?([+-]\d\d(?::?\d\d)?|\s*Z)?$/;function gR(){throw new Error("This operation is not supported.")}function mR(t){const e=function(t){const e=fR.exec(t);if(e){const[,t,n,i,r,a,o,,s,l]=e;return{y:Number(t),M:Number(n)-1,d:Number(i),h:Number(r),m:Number(a),s:Number(o),ms:Number(s)||0,zoneInfo:l}}return null}(t);if(e&&!e.zoneInfo){const{y:t,M:n,d:i,h:r,m:a,s:o,ms:s}=e;return new Date(t,n,i,r,a,o,s)}return null}class vR{constructor(...t){const[e]=t;e instanceof Date?this.d=new Date(e.getTime()):aR(e)&&1===t.length&&(this.d=mR(e)),this.d||(this.d=new Date(...t))}setTimezoneOffset(){gR()}setTimezoneName(){gR()}clone(){return new vR(this.d)}toDate(){return new Date(this.d.getTime())}toString(){return this.d.toString()}}["getTime","getTimezoneOffset","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getDay"].forEach((t=>{vR.prototype[t]=function(...e){return this.d[t](...e)}})),["setTime","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds"].forEach((t=>{vR.prototype[t]=function(...e){return this.d[t](...e)}}));class yR extends vR{clone(){return new yR(this.d)}getTimezoneOffset(){return 0}}["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds","Day"].forEach((t=>{const e=`get${t}`;yR.prototype[e]=function(...e){return this.d[`getUTC${t}`](...e)}})),["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"].forEach((t=>{const e=`set${t}`;yR.prototype[e]=function(...e){return this.d[`setUTC${t}`](...e)}}));class _R extends Error{constructor(t){super(`@toast-ui/calendar: Invalid IANA Timezone Name - ${t}`),this.name="InvalidTimezoneNameError"}}class xR extends Error{constructor(t){super(`@toast-ui/calendar: Invalid DateTime Format - ${t}`),this.name="InvalidDateTimeFormatError"}}class bR extends Error{constructor(t){super(`@toast-ui/calendar: Invalid View Type - ${t}`),this.name="InvalidViewTypeError"}}const wR=(t,...e)=>{};let MR=vR;function SR(...t){return new MR(...t)}function CR(t,e=new LR){if(!lR(null==(i=null==(n=null==Intl?void 0:Intl.DateTimeFormat)?void 0:n.prototype)?void 0:i.formatToParts))return wR("Intl.DateTimeFormat is not fully supported. So It will return the local timezone offset only.\nYou can use a polyfill to fix this issue."),-e.toDate().getTimezoneOffset();var n,i;TR(t);const r=function(t,e){const n=function(t){if(IR[t])return IR[t];const e=new Intl.DateTimeFormat("en-US",{timeZone:t,hourCycle:"h23",hour12:!1,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"});return IR[t]=e,e}(e);return n.formatToParts(t.toDate()).reduce(((t,e)=>{const n=AR[e.type];return sR(n)&&(t[n]=parseInt(e.value,10)),t}),[])}(e,t),a=function(t){const[e,n,i,r,a,o]=t,s=n-1;return new Date(Date.UTC(e,s,i,r%24,a,o))}(r);return Math.round((a.getTime()-e.getTime())/60/1e3)}function kR(t,e){e&&TR(e);const n=new LR(t.getFullYear(),0,1),i=new LR(t.getFullYear(),6,1);return e?Math.max(-CR(e,n),-CR(e,i))!==-CR(e,t):Math.max(n.getTimezoneOffset(),i.getTimezoneOffset())!==t.toDate().getTimezoneOffset()}const IR={},DR={};function TR(t){if(DR[t])return!0;try{return Intl.DateTimeFormat("en-US",{timeZone:t}),DR[t]=!0,!0}catch(e){throw new _R(t)}}const AR={year:0,month:1,day:2,hour:3,minute:4,second:5};function ER(t){return(-(new Date).getTimezoneOffset()-t)*qR}class LR{constructor(...t){this.tzOffset=null,t[0]instanceof LR?this.d=SR(t[0].getTime()):this.d=SR(...t)}toString(){return this.d.toString()}addFullYear(t){return this.setFullYear(this.getFullYear()+t),this}addMonth(t){return this.setMonth(this.getMonth()+t),this}addDate(t){return this.setDate(this.getDate()+t),this}addHours(t){return this.setHours(this.getHours()+t),this}addMinutes(t){return this.setMinutes(this.getMinutes()+t),this}addSeconds(t){return this.setSeconds(this.getSeconds()+t),this}addMilliseconds(t){return this.setMilliseconds(this.getMilliseconds()+t),this}setWithRaw(t,e,n,i,r,a,o){return this.setFullYear(t,e,n),this.setHours(i,r,a,o),this}toDate(){return this.d.toDate()}valueOf(){return this.getTime()}getTimezoneOffset(){var t;return null!=(t=this.tzOffset)?t:this.d.getTimezoneOffset()}getTime(){return this.d.getTime()}getFullYear(){return this.d.getFullYear()}getMonth(){return this.d.getMonth()}getDate(){return this.d.getDate()}getHours(){return this.d.getHours()}getMinutes(){return this.d.getMinutes()}getSeconds(){return this.d.getSeconds()}getMilliseconds(){return this.d.getMilliseconds()}getDay(){return this.d.getDay()}setTime(t){return this.d.setTime(t)}setFullYear(t,e=this.getMonth(),n=this.getDate()){return this.d.setFullYear(t,e,n)}setMonth(t,e=this.getDate()){return this.d.setMonth(t,e)}setDate(t){return this.d.setDate(t)}setHours(t,e=this.getMinutes(),n=this.getSeconds(),i=this.getMilliseconds()){return this.d.setHours(t,e,n,i)}setMinutes(t,e=this.getSeconds(),n=this.getMilliseconds()){return this.d.setMinutes(t,e,n)}setSeconds(t,e=this.getMilliseconds()){return this.d.setSeconds(t,e)}setMilliseconds(t){return this.d.setMilliseconds(t)}tz(t){if("Local"===t)return new LR(this.getTime());const e=aR(t)?CR(t,this):t,n=new LR(this.getTime()-ER(e));return n.tzOffset=e,n}local(t){if(sR(t)){const e=aR(t)?CR(t,this):t;return new LR(this.getTime()+ER(e))}return new LR(this.getTime()+(sR(this.tzOffset)?ER(this.tzOffset):0))}}function PR(t,e={}){return rR(e)?(Object.keys(e).forEach((n=>{const i=n,r=n;Array.isArray(e[r])||!rR(t[i])||!rR(e[r])||e[r]instanceof LR?t[i]=e[r]:t[i]=PR(t[i],e[r])})),t):t}const NR=["top","left","width","height","exceedLeft","exceedRight","croppedStart","croppedEnd","goingDurationHeight","modelDurationHeight","comingDurationHeight","duplicateEvents","duplicateEventIndex","duplicateStarts","duplicateEnds","duplicateLeft","duplicateWidth","collapse","isMain"];class OR{constructor(t){this.top=0,this.left=0,this.width=0,this.height=0,this.exceedLeft=!1,this.exceedRight=!1,this.croppedStart=!1,this.croppedEnd=!1,this.goingDurationHeight=0,this.modelDurationHeight=100,this.comingDurationHeight=0,this.duplicateEvents=[],this.duplicateEventIndex=-1,this.duplicateLeft="",this.duplicateWidth="",this.collapse=!1,this.isMain=!1,this.model=t}getUIProps(){return function(t,...e){return e.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})}(this,...NR)}setUIProps(t){Object.assign(this,t)}getStarts(){return this.renderStarts?this.renderStarts:this.model.getStarts()}getEnds(){return this.renderEnds?this.renderEnds:this.model.getEnds()}cid(){return this.model.cid()}valueOf(){return this.model}duration(){return this.model.duration()}collidesWith(t,e=!0){const n=[];[this,t].forEach((t=>{t instanceof OR&&t.duplicateEvents.length>0?n.push({start:t.duplicateStarts,end:t.duplicateEnds,goingDuration:0,comingDuration:0}):n.push({start:t.getStarts(),end:t.getEnds(),goingDuration:t.valueOf().goingDuration,comingDuration:t.valueOf().comingDuration})}));const[i,r]=n;return vV({start:i.start.getTime(),end:i.end.getTime(),targetStart:r.start.getTime(),targetEnd:r.end.getTime(),goingDuration:i.goingDuration,comingDuration:i.comingDuration,targetGoingDuration:r.goingDuration,targetComingDuration:r.comingDuration,usingTravelTime:e})}clone(){const t=this.getUIProps(),e=new OR(this.model);return e.setUIProps(t),this.renderStarts&&(e.renderStarts=new LR(this.renderStarts)),this.renderEnds&&(e.renderEnds=new LR(this.renderEnds)),e}}var zR={event:{asc:function(t,e){const n=t instanceof OR?t.model:t,i=e instanceof OR?e.model:e,r=function(t,e){return t!==e?t?-1:1:0}(n.isAllday||n.hasMultiDates,i.isAllday||i.hasMultiDates);if(r)return r;const a=eV(t.getStarts(),e.getStarts());if(a)return a;const o=t.duration(),s=e.duration();return o<s?1:o>s?-1:n.cid()-i.cid()}},num:{asc:function(t,e){return Number(t)-Number(e)}}};function RR(t){return t[0]}function VR(t){return t[t.length-1]}function FR(t,e){for(let n=t.length-1;n>=0;n-=1)if(e(t[n]))return n;return-1}function BR(t,e){return t>0?Array.from({length:t},(()=>Array.isArray(e)?e.slice():e)):[]}var HR=(t=>(t[t.SUN=0]="SUN",t[t.MON=1]="MON",t[t.TUE=2]="TUE",t[t.WED=3]="WED",t[t.THU=4]="THU",t[t.FRI=5]="FRI",t[t.SAT=6]="SAT",t))(HR||{});const GR=/^(\d{4}[-|/]*\d{2}[-|/]*\d{2})\s?(\d{2}:\d{2}:\d{2})?$/,jR={},WR=[24,60,60,1e3];function UR(t,e){let n="",i=0;if(String(t).length>e)return String(t);for(;i<e-1;i+=1)n+="0";return(n+t).slice(-1*e)}function YR(t){let e=t.getHours();return 0===e&&(e=12),e>12&&(e%=12),e}const $R={YYYYMMDD:t=>[t.getFullYear(),UR(t.getMonth()+1,2),UR(t.getDate(),2)].join(""),YYYY:t=>String(t.getFullYear()),MM:t=>UR(t.getMonth()+1,2),DD:t=>UR(t.getDate(),2),"HH:mm":function(t){const e=t.getHours(),n=t.getMinutes();return`${UR(e,2)}:${UR(n,2)}`},"hh:mm":function(t){const e=YR(t),n=t.getMinutes();return`${UR(e,2)}:${UR(n,2)}`},hh(t){const e=YR(t);return String(e)},tt:t=>t.getHours()<12?"am":"pm"},qR=6e4,XR=20*qR;function ZR(t,e){let n=e;return Object.entries($R).forEach((([e,i])=>{n=n.replace(e,i(t))})),n}function JR(t,e){const n=jR,i=t+e;if(n[i])return n[i];const r=function(t,e,n){const i={date:0,hour:1,minute:2,second:3};return!(t in i)||isNaN(e)?0:[e].concat(WR.slice(i[t])).reduce(n)}(t,e,((t,e)=>t*e));return r?(n[i]=r,n[i]):0}function KR(t){const e=t?new LR(t):new LR;return e.setHours(0,0,0,0),e}function QR(t,e,n){const i=t.getTime(),r=e.getTime(),a=new LR(t),o=[];let s=i;for(;s<=r&&r>=a.getTime();)o.push(new LR(a)),s+=n,a.addMilliseconds(n);return o}function tV(t){return new LR(t)}function eV(t,e){const n=t.getTime(),i=e.getTime();return n<i?-1:n>i?1:0}function nV(t,e){return function(t,e){return function(t,e){return t.getFullYear()===e.getFullYear()}(t,e)&&t.getMonth()===e.getMonth()}(t,e)&&t.getDate()===e.getDate()}function iV(t,e){return 1===eV(t,e)?t:e}function rV(t,e){return-1===eV(t,e)?t:e}function aV(t,e=-1){const n=t.match(GR);let i,r,a;if(!n)throw new xR(t);if(t.length>8){i=~t.indexOf("/")?"/":"-";const e=n.splice(1);r=e[0].split(i),a=e[1]?e[1].split(":"):[0,0,0]}else{const[t]=n;r=[t.substr(0,4),t.substr(4,2),t.substr(6,2)],a=[0,0,0]}return(new LR).setWithRaw(Number(r[0]),Number(r[1])+e,Number(r[2]),Number(a[0]),Number(a[1]),Number(a[2]),0)}function oV(t){const e=t?new LR(t):new LR;return e.setHours(23,59,59,999),e}function sV(t){return 0===t||6===t}function lV(t){return 0===t}function uV(t){return 6===t}function cV(t){const e=new LR(t);return e.setDate(1),e.setHours(0,0,0,0),e}function dV(t,e,n,i){const r=100/t,a=t>5?100/(t-1):r;let o=0;const s=tR(n,7).concat(tR(t)).slice(0,7);e=!i&&e;const l=s.map((n=>{let i=e?a:r;t>5&&e&&sV(n)&&(i=a/2);const s={width:i,left:o};return o+=i,s})),{length:u}=l,c=BR(u,BR(u,0));return l.forEach((({width:t},e)=>{for(let n=0;n<=e;n+=1)for(let i=e;i<u;i+=1)c[n][i]+=t})),c[0][u-1]=100,{rowStyleInfo:l,cellWidthMap:c.map((t=>t.map(cR)))}}function hV(t,e){const n=tV(t);return n.setMilliseconds(t.getMilliseconds()+e),n}function pV(t,e){const n=tV(t);return n.setMinutes(t.getMinutes()+e),n}function fV(t,e){const n=tV(t);return n.setHours(...e.split(":").map(Number)),n}function gV(t,e){const n=tV(t);return n.setDate(t.getDate()+e),n}function mV(t,e){const n=new LR(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),i=new LR(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return Math.round((n-i)/864e5)}function vV({start:t,end:e,targetStart:n,targetEnd:i,goingDuration:r,comingDuration:a,targetGoingDuration:o,targetComingDuration:s,usingTravelTime:l}){return Math.abs(e-t)<XR&&(e+=XR),Math.abs(e-t)<XR&&(e+=XR),l&&(t-=JR("minute",r),e+=JR("minute",a),n-=JR("minute",o),i+=JR("minute",s)),function(t,e,n,i){return n>t&&n<e||i>t&&i<e||n<=t&&i>=e}(t,e,n,i)}const yV=function(){const t=function(){let t=0;return{next:()=>(t+=1,t)}}();return()=>t.next()}();function _V(t){return t.__fe_id||(t.__fe_id=yV()),t.__fe_id}class xV{constructor(t={}){this.id="",this.calendarId="",this.title="",this.body="",this.isAllday=!1,this.start=new LR,this.end=new LR,this.goingDuration=0,this.comingDuration=0,this.location="",this.attendees=[],this.category="time",this.dueDateClass="",this.recurrenceRule="",this.state="Busy",this.isVisible=!0,this.isPending=!1,this.isFocused=!1,this.isReadOnly=!1,this.isPrivate=!1,this.customStyle={},this.raw=null,this.hasMultiDates=!1,_V(this),this.init(t)}init({id:t="",calendarId:e="",title:n="",body:i="",isAllday:r=!1,start:a=new LR,end:o=new LR,goingDuration:s=0,comingDuration:l=0,location:u="",attendees:c=[],category:d="time",dueDateClass:h="",recurrenceRule:p="",state:f="Busy",isVisible:g=!0,isPending:m=!1,isFocused:v=!1,isReadOnly:y=!1,isPrivate:_=!1,color:x,backgroundColor:b,dragBackgroundColor:w,borderColor:M,customStyle:S={},raw:C=null}={}){this.id=t,this.calendarId=e,this.title=n,this.body=i,this.isAllday="allday"===d||r,this.goingDuration=s,this.comingDuration=l,this.location=u,this.attendees=c,this.category=d,this.dueDateClass=h,this.recurrenceRule=p,this.state=f,this.isVisible=g,this.isPending=m,this.isFocused=v,this.isReadOnly=y,this.isPrivate=_,this.color=x,this.backgroundColor=b,this.dragBackgroundColor=w,this.borderColor=M,this.customStyle=S,this.raw=C,this.isAllday?this.setAlldayPeriod(a,o):this.setTimePeriod(a,o),"milestone"!==d&&"task"!==d||(this.start=new LR(this.end))}setAlldayPeriod(t,e){let n,i;n=aR(t)?aV(t.substring(0,10)):new LR(t||Date.now()),i=aR(e)?aV(e.substring(0,10)):new LR(e||this.start),this.start=n,this.start.setHours(0,0,0),this.end=i||new LR(this.start),this.end.setHours(23,59,59)}setTimePeriod(t,e){this.start=new LR(t||Date.now()),this.end=new LR(e||this.start),e||this.end.setMinutes(this.end.getMinutes()+30),this.hasMultiDates=this.end.getTime()-this.start.getTime()>864e5}getStarts(){return this.start}getEnds(){return this.end}cid(){return _V(this)}equals(t){return this.id===t.id&&(this.title===t.title&&(this.body===t.body&&(this.isAllday===t.isAllday&&(0===eV(this.getStarts(),t.getStarts())&&(0===eV(this.getEnds(),t.getEnds())&&(this.color===t.color&&(this.backgroundColor===t.backgroundColor&&(this.dragBackgroundColor===t.dragBackgroundColor&&this.borderColor===t.borderColor))))))))}duration(){const t=Number(this.getStarts()),e=Number(this.getEnds());let n;return n=this.isAllday?Number(oV(e))-Number(KR(t)):e-t,n}valueOf(){return this}collidesWith(t,e=!0){return t=t instanceof OR?t.model:t,vV({start:Number(this.getStarts()),end:Number(this.getEnds()),targetStart:Number(t.getStarts()),targetEnd:Number(t.getEnds()),goingDuration:this.goingDuration,comingDuration:this.comingDuration,targetGoingDuration:t.goingDuration,targetComingDuration:t.comingDuration,usingTravelTime:e})}toEventObject(){return{id:this.id,calendarId:this.calendarId,__cid:this.cid(),title:this.title,body:this.body,isAllday:this.isAllday,start:this.start,end:this.end,goingDuration:this.goingDuration,comingDuration:this.comingDuration,location:this.location,attendees:this.attendees,category:this.category,dueDateClass:this.dueDateClass,recurrenceRule:this.recurrenceRule,state:this.state,isVisible:this.isVisible,isPending:this.isPending,isFocused:this.isFocused,isReadOnly:this.isReadOnly,isPrivate:this.isPrivate,color:this.color,backgroundColor:this.backgroundColor,dragBackgroundColor:this.dragBackgroundColor,borderColor:this.borderColor,customStyle:this.customStyle,raw:this.raw}}getColors(){return{color:this.color,backgroundColor:this.backgroundColor,dragBackgroundColor:this.dragBackgroundColor,borderColor:this.borderColor}}}function bV({model:t}){const{category:e,isAllday:n,hasMultiDates:i}=t;return"time"===e&&!n&&!i}xV.schema={required:["title"],dateRange:["start","end"]};class wV{constructor(t){this.internalMap=new Map,lR(t)&&(this.getItemID=t)}static and(...t){const{length:e}=t;return n=>{for(let i=0;i<e;i+=1)if(!t[i].call(null,n))return!1;return!0}}static or(...t){const{length:e}=t;return e?n=>{let i=t[0].call(null,n);for(let r=1;r<e;r+=1)i=i||t[r].call(null,n);return i}:()=>!1}getItemID(t){var e;return null!=(e=null==t?void 0:t._id)?e:""}getFirstItem(){return this.internalMap.values().next().value}add(...t){return t.forEach((t=>{const e=this.getItemID(t);this.internalMap.set(e,t)})),this}remove(...t){const e=[];return t.forEach((t=>{const n=aR(t)||iR(t)?t:this.getItemID(t);this.internalMap.has(n)&&(e.push(this.internalMap.get(n)),this.internalMap.delete(n))})),1===e.length?e[0]:e}has(t){const e=aR(t)||iR(t)?t:this.getItemID(t);return this.internalMap.has(e)}get(t){var e;const n=aR(t)||iR(t)?t:this.getItemID(t);return null!=(e=this.internalMap.get(n))?e:null}doWhenHas(t,e){const n=this.internalMap.get(t);oR(n)||e(n)}filter(t){const e=new wV;return this.hasOwnProperty("getItemID")&&(e.getItemID=this.getItemID),this.internalMap.forEach((n=>{!0===t(n)&&e.add(n)})),e}groupBy(t){const e={};return this.internalMap.forEach((n=>{let i=lR(t)?t(n):n[t];lR(i)&&(i=i.call(n)),null!=e[i]||(e[i]=new wV(this.getItemID)),e[i].add(n)})),e}find(t){let e=null;const n=this.internalMap.values();let i=n.next();for(;!1===i.done;){if(t(i.value)){e=i.value;break}i=n.next()}return e}sort(t){return this.toArray().sort(t)}each(t){const e=this.internalMap.entries();let n=e.next();for(;!1===n.done;){const[i,r]=n.value;if(!1===t(r,i))break;n=e.next()}}clear(){this.internalMap.clear()}toArray(){return Array.from(this.internalMap.values())}get size(){return this.internalMap.size}}function MV(...t){const e=new wV((t=>t.cid()));return t.length&&e.add(...t),e}function SV(t,e){return QR(KR(t),oV(e),864e5)}function CV(t){const{model:e}=t;return(n=e).isAllday||"time"===n.category&&Number(n.end)-Number(n.start)>864e5?"allday":e.category;var n}function kV(t,e){SV(e.getStarts(),e.getEnds()).forEach((n=>{const i=ZR(n,"YYYYMMDD");(t[i]=t[i]||[]).push(e.cid())}))}function IV(t,e){const n=e.cid();Object.values(t).forEach((t=>{const e=t.indexOf(n);~e&&t.splice(e,1)}))}function DV(t,e){return function(t,e){return t.events.add(e),kV(t.idsOfDay,e),e}(t,new xV(e))}function TV(t){return{createEvents:e=>t(Jz((t=>{!function(t,e=[]){e.map((e=>DV(t,e)))}(t.calendar,e)}))),updateEvent:({event:e,eventData:n})=>t(Jz((t=>{!function(t,e,n,i){const{idsOfDay:r}=t,a=t.events.find((t=>function(t,e,n){return t.id===e&&t.calendarId===n}(t,e,n)));!!a&&(a.init(KN(KN({},a),i)),IV(r,a),kV(r,a))}(t.calendar,e.id,e.calendarId,n)}))),deleteEvent:e=>t(Jz((t=>{!function(t,e){IV(t.idsOfDay,e),t.events.remove(e)}(t.calendar,e)}))),clearEvents:()=>t(Jz((t=>{var e;(e=t.calendar).idsOfDay={},e.events.clear()}))),setCalendars:e=>t(Jz((t=>{t.calendar.calendars=e}))),setCalendarColor:(e,n)=>t(Jz((t=>{const i=t.calendar.calendars.map((t=>t.id===e?KN(KN({},t),n):t)),r=MV(...t.calendar.events.toArray().map((t=>{var i,r,a,o;return t.calendarId===e&&(t.color=null!=(i=n.color)?i:t.color,t.backgroundColor=null!=(r=n.backgroundColor)?r:t.backgroundColor,t.borderColor=null!=(a=n.borderColor)?a:t.borderColor,t.dragBackgroundColor=null!=(o=n.dragBackgroundColor)?o:t.dragBackgroundColor),t})));t.calendar.calendars=i,t.calendar.events=r}))),setCalendarVisibility:(e,n)=>t(Jz((t=>{const i=t.calendar.events.toArray();t.calendar.events=MV(...i.map((t=>(e.includes(t.calendarId)&&(t.isVisible=n),t))))})))}}var AV=(t=>(t[t.IDLE=0]="IDLE",t[t.INIT=1]="INIT",t[t.DRAGGING=2]="DRAGGING",t[t.CANCELED=3]="CANCELED",t))(AV||{});function EV(t){return{initDrag:e=>{t(Jz((t=>{t.dnd=QN(KN(KN({},t.dnd),e),{draggingState:1})})))},setDragging:e=>{t(Jz((t=>{t.dnd=QN(KN(KN({},t.dnd),e),{draggingState:2})})))},cancelDrag:()=>{t(Jz((t=>{t.dnd={draggingItemType:null,draggingState:0,initX:null,initY:null,x:null,y:null,draggingEventUIModel:null},t.dnd.draggingState=3})))},reset:()=>{t(Jz((t=>{t.dnd={draggingItemType:null,draggingState:0,initX:null,initY:null,x:null,y:null,draggingEventUIModel:null}})))},setDraggingEventUIModel:e=>{t(Jz((t=>{var n;t.dnd.draggingEventUIModel=null!=(n=null==e?void 0:e.clone())?n:null})))}}}function LV(t){return{setGridSelection:(e,n)=>{t(Jz((t=>{t.gridSelection[e]=n})))},addGridSelection:(e,n)=>{t(Jz((t=>{"dayGridMonth"===e&&n&&(t.gridSelection.accumulated[e]=[...t.gridSelection.accumulated[e],n],t.gridSelection.dayGridMonth=null)})))},clearAll:()=>t(Jz((t=>{t.gridSelection={dayGridMonth:null,dayGridWeek:null,timeGrid:null,accumulated:{dayGridMonth:[]}}})))}}function PV(t,e,n){return Object.keys(t).reduce(((n,i)=>i===e?n:n-t[i].height-3),n)}function NV(t){return{setLastPanelType:e=>{t(Jz((t=>{t.weekViewLayout.lastPanelType=e,e&&(t.weekViewLayout.dayGridRows[e].height=PV(t.weekViewLayout.dayGridRows,e,t.layout))})))},updateLayoutHeight:e=>t(Jz((t=>{const{lastPanelType:n}=t.weekViewLayout;t.layout=e,n&&(t.weekViewLayout.dayGridRows[n].height=PV(t.weekViewLayout.dayGridRows,n,e))}))),updateDayGridRowHeight:({rowName:e,height:n})=>t(Jz((t=>{const{lastPanelType:i}=t.weekViewLayout;t.weekViewLayout.dayGridRows[e]={height:n},i&&(t.weekViewLayout.dayGridRows[i].height=PV(t.weekViewLayout.dayGridRows,i,t.layout))}))),updateDayGridRowHeightByDiff:({rowName:e,diff:n})=>t(Jz((t=>{var i,r,a;const{lastPanelType:o}=t.weekViewLayout,s=null!=(a=null==(r=null==(i=t.weekViewLayout.dayGridRows)?void 0:i[e])?void 0:r.height)?a:72;t.weekViewLayout.dayGridRows[e]={height:s+n},o&&(t.weekViewLayout.dayGridRows[o].height=PV(t.weekViewLayout.dayGridRows,o,t.layout))}))),setSelectedDuplicateEventCid:e=>t(Jz((t=>{t.weekViewLayout.selectedDuplicateEventCid=null!=e?e:-1})))}}function OV(t){return t.charAt(0).toUpperCase()+t.slice(1)}const zV=["sun","mon","tue","wed","thu","fri","sat"],RV=t=>zV[t];function VV(t,e){return t.map((t=>{const n=t.getDay(),i=e.length>0?e[n]:OV(RV(n));return{date:t.getDate(),day:t.getDay(),dayName:i,isToday:!0,renderDate:"date",dateInstance:t}}))}function FV(t){if(!t)return!1;const e={getDuplicateEvents:(t,e)=>e.filter((e=>e.title===t.title&&0===eV(e.start,t.start)&&0===eV(e.end,t.end))).sort(((t,e)=>t.calendarId>e.calendarId?1:-1)),getMainEvent:t=>VR(t)};return nR(t)?e:KN(KN({},e),t)}function BV(t={}){const e=KN({startDayOfWeek:HR.SUN,dayNames:[],narrowWeekend:!1,workweek:!1,showNowIndicator:!0,showTimezoneCollapseButton:!1,timezonesCollapsed:!1,hourStart:0,hourEnd:24,eventView:!0,taskView:!0,collapseDuplicateEvents:!1},t);return e.collapseDuplicateEvents=FV(e.collapseDuplicateEvents),e}function HV(t={}){return KN({zones:[]},t)}function GV(t={}){const e=KN({dayNames:[],visibleWeeksCount:0,workweek:!1,narrowWeekend:!1,startDayOfWeek:HR.SUN,isAlways6Weeks:!0,visibleEventCount:6},t);return 0===e.dayNames.length&&(e.dayNames=zV.slice()),e}function jV(t){return nR(t)?{enableDblClick:t,enableClick:t}:KN({enableDblClick:!0,enableClick:!0},t)}const WV=t=>!!t.isVisible;function UV(t){return{setOptions:(e={})=>t(Jz((t=>{var n;e.gridSelection&&(e.gridSelection=jV(e.gridSelection)),(null==(n=e.week)?void 0:n.collapseDuplicateEvents)&&(e.week.collapseDuplicateEvents=FV(e.week.collapseDuplicateEvents)),PR(t.options,e)})))}}var YV=(t=>(t.SeeMore="seeMore",t.Form="form",t.Detail="detail",t))(YV||{});function $V(t){return{showSeeMorePopup:e=>t(Jz((t=>{t.popup.seeMore=e,t.popup.form=null,t.popup.detail=null}))),showFormPopup:e=>t(Jz((t=>{t.popup.form=e,t.popup.seeMore=null,t.popup.detail=null}))),showDetailPopup:(e,n)=>t(Jz((t=>{t.popup.detail=e,t.popup.form=null,n||(t.popup.seeMore=null)}))),hideSeeMorePopup:()=>t(Jz((t=>{t.popup.seeMore=null}))),hideFormPopup:()=>t(Jz((t=>{t.popup.form=null}))),hideDetailPopup:()=>t(Jz((t=>{t.popup.detail=null}))),hideAllPopup:()=>t(Jz((t=>{t.popup.seeMore=null,t.popup.form=null,t.popup.detail=null})))}}const qV=()=>{},XV=/^auto$|^$|%/;function ZV(t,e){let n=t.style[e];if((!n||"auto"===n)&&document.defaultView){const i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function JV(t){return aR(t)?XV.test(t):null===t}function KV(t){const e=ZV(t,"width"),n=ZV(t,"height");if((JV(e)||JV(n))&&t.getBoundingClientRect){const{width:e,height:n}=t.getBoundingClientRect();return{width:e||t.offsetWidth,height:n||t.offsetHeight}}return{width:parseFloat(null!=e?e:"0"),height:parseFloat(null!=n?n:"0")}}const QV=("undefined"==typeof Element?qV:Element).prototype;function tF(t){return t.replace(/<([^>]+)>/gi,"")}QV.matches||QV.webkitMatchesSelector||QV.msMatchesSelector;const eF={milestone:t=>oO(lO,null,oO("span",{className:uR("icon","ic-milestone")}),oO("span",{style:{backgroundColor:t.backgroundColor}},tF(t.title))),milestoneTitle:()=>oO("span",{className:uR("left-content")},"Milestone"),task:t=>`#${t.title}`,taskTitle:()=>oO("span",{className:uR("left-content")},"Task"),alldayTitle:()=>oO("span",{className:uR("left-content")},"All Day"),allday:t=>tF(t.title),time(t){const{start:e,title:n}=t;return e?oO("span",null,oO("strong",null,ZR(e,"HH:mm")),"",oO("span",null,tF(n))):tF(n)},goingDuration(t){const{goingDuration:e}=t,n=e%60;return`GoingTime ${UR(Math.floor(e/60),2)}:${UR(n,2)}`},comingDuration(t){const{comingDuration:e}=t,n=e%60;return`ComingTime ${UR(Math.floor(e/60),2)}:${UR(n,2)}`},monthMoreTitleDate(t){const{date:e,day:n}=t,i=uR("more-title-date"),r=uR("more-title-day"),a=OV(RV(n));return oO(lO,null,oO("span",{className:i},e),oO("span",{className:r},a))},monthMoreClose:()=>"",monthGridHeader(t){const e=parseInt(t.date.split("-")[2],10);return oO("span",{className:uR("weekday-grid-date",{"weekday-grid-date-decorator":t.isToday})},e)},monthGridHeaderExceed:t=>oO("span",{className:uR("weekday-grid-more-events")},t," more"),monthGridFooter:t=>"",monthGridFooterExceed:t=>"",monthDayName:t=>t.label,weekDayName(t){const e=uR("day-name__date"),n=uR("day-name__name");return oO(lO,null,oO("span",{className:e},t.date),"",oO("span",{className:n},t.dayName))},weekGridFooterExceed:t=>`+${t}`,collapseBtnTitle:()=>oO("span",{className:uR("collapse-btn-icon")}),timezoneDisplayLabel({displayLabel:t,timezoneOffset:e}){if(oR(t)&&sR(e)){const t=e<0?"-":"+",n=Math.abs(e/60),i=Math.abs(e%60);return`GMT${t}${UR(n,2)}:${UR(i,2)}`}return t},timegridDisplayPrimaryTime(t){const{time:e}=t;return ZR(e,"hh tt")},timegridDisplayTime(t){const{time:e}=t;return ZR(e,"HH:mm")},timegridNowIndicatorLabel(t){const{time:e,format:n="HH:mm"}=t;return ZR(e,n)},popupIsAllday:()=>"All day",popupStateFree:()=>"Free",popupStateBusy:()=>"Busy",titlePlaceholder:()=>"Subject",locationPlaceholder:()=>"Location",startDatePlaceholder:()=>"Start date",endDatePlaceholder:()=>"End date",popupSave:()=>"Save",popupUpdate:()=>"Update",popupEdit:()=>"Edit",popupDelete:()=>"Delete",popupDetailTitle:({title:t})=>t,popupDetailDate({isAllday:t,start:e,end:n}){const i="YYYY.MM.DD",r="hh:mm tt",a="YYYY.MM.DD hh:mm tt",o=ZR(e,t?i:r),s=nV(e,n)?r:a;return t?`${o}${nV(e,n)?"":` - ${ZR(n,i)}`}`:`${ZR(e,a)} - ${ZR(n,s)}`},popupDetailLocation:({location:t})=>t,popupDetailAttendees:({attendees:t=[]})=>t.join(", "),popupDetailState:({state:t})=>t||"Busy",popupDetailRecurrenceRule:({recurrenceRule:t})=>t,popupDetailBody:({body:t})=>t};function nF(t){return{setTemplate:e=>t(Jz((t=>{t.template=KN(KN({},t.template),e)})))}}function iF(t){return{changeView:e=>t(Jz((t=>{t.view.currentView=e}))),setRenderDate:e=>t(Jz((t=>{t.view.renderDate=KR(e)})))}}const rF=Kz(window)||!window.navigator?WO:UO;function aF(){const t=DO(null);return{StoreProvider:function({children:e,store:n}){return oO(t.Provider,{value:n,children:e})},useStore:(e,n=Object.is)=>{const i=XO(t);if(oR(i))throw new Error("StoreProvider is not found");const[,r]=jO((t=>t+1),0),a=i.getState(),o=YO(a),s=YO(e),l=YO(n),u=YO(!1),c=YO();let d;Kz(c.current)&&(c.current=e(a));let h=!1;(o.current!==a||s.current!==e||l.current!==n||u.current)&&(d=e(a),h=!n(c.current,d)),rF((()=>{h&&(c.current=d),o.current=a,s.current=e,l.current=n,u.current=!1}));const p=YO(a);return rF((()=>{const t=()=>{try{const t=i.getState(),e=s.current(t);!l.current(c.current,e)&&(o.current=t,c.current=d,r())}catch(t){u.current=!0,r()}},e=i.subscribe(t);return i.getState()!==p.current&&t(),e}),[]),h?d:c.current},useInternalStore:()=>{const e=XO(t);if(oR(e))throw new Error("StoreProvider is not found");return $O((()=>e),[e])}}}function oF(t){let e;const n=new Set,i=t=>{const i=t(e);if(i!==e){const t=e;e=KN(KN({},e),i),n.forEach((n=>n(e,t)))}},r=()=>e,a={setState:i,getState:r,subscribe:(t,i,r)=>{let a=t;if(i){let n=i(e);const o=null!=r?r:Object.is;a=()=>{const r=i(e);if(!o(n,r)){const e=n;n=r,t(n,e)}}}return n.add(a),()=>n.delete(a)},clearListeners:()=>n.clear()};return e=t(i,r,a),a}const sF=t=>e=>QN(KN(KN(KN(KN(KN(KN(KN(KN({},function(t={}){var e,n,i,r,a,o;return{options:{defaultView:null!=(e=t.defaultView)?e:"week",useFormPopup:null!=(n=t.useFormPopup)&&n,useDetailPopup:null!=(i=t.useDetailPopup)&&i,isReadOnly:null!=(r=t.isReadOnly)&&r,week:BV(t.week),month:GV(t.month),gridSelection:jV(t.gridSelection),usageStatistics:null==(a=t.usageStatistics)||a,eventFilter:null!=(o=t.eventFilter)?o:WV,timezone:HV(t.timezone)}}}(t)),function(t={}){return{template:KN(KN({},eF),t)}}(t.template)),{popup:{seeMore:null,form:null,detail:null}}),{layout:500,weekViewLayout:{lastPanelType:null,dayGridRows:{},selectedDuplicateEventCid:-1}}),function(t=[]){return{calendar:{calendars:t,events:MV(),idsOfDay:{}}}}(t.calendars)),function(t="week"){const e=new LR;return e.setHours(0,0,0,0),{view:{currentView:t,renderDate:e}}}(t.defaultView)),{dnd:{draggingItemType:null,draggingState:0,initX:null,initY:null,x:null,y:null,draggingEventUIModel:null}}),{gridSelection:{dayGridMonth:null,dayGridWeek:null,timeGrid:null,accumulated:{dayGridMonth:[]}}}),{dispatch:{options:UV(e),popup:$V(e),weekViewLayout:NV(e),calendar:TV(e),view:iF(e),dnd:EV(e),gridSelection:LV(e),template:nF(e)}}),{StoreProvider:lF,useStore:uF,useInternalStore:cF}=aF();function dF(t){return uF(qO((e=>t?e.dispatch[t]:e.dispatch),[t]))}function hF(t){return e=>e[t]}const pF=hF("calendar"),fF=hF("weekViewLayout"),gF=hF("template"),mF=hF("view"),vF=hF("options"),yF=hF("dnd");var _F={exports:{}};
/*! @license DOMPurify 2.3.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.8/LICENSE */_F.exports=function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,n){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,n)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function i(t,r,a){return(i=n()?Reflect.construct:function(t,n,i){var r=[null];r.push.apply(r,n);var a=new(Function.bind.apply(t,r));return i&&e(a,i.prototype),a}).apply(null,arguments)}function r(t){return a(t)||o(t)||s(t)||u()}function a(t){if(Array.isArray(t))return l(t)}function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function s(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c=Object.hasOwnProperty,d=Object.setPrototypeOf,h=Object.isFrozen,p=Object.getPrototypeOf,f=Object.getOwnPropertyDescriptor,g=Object.freeze,m=Object.seal,v=Object.create,y="undefined"!=typeof Reflect&&Reflect,_=y.apply,x=y.construct;_||(_=function(t,e,n){return t.apply(e,n)}),g||(g=function(t){return t}),m||(m=function(t){return t}),x||(x=function(t,e){return i(t,r(e))});var b=E(Array.prototype.forEach),w=E(Array.prototype.pop),M=E(Array.prototype.push),S=E(String.prototype.toLowerCase),C=E(String.prototype.match),k=E(String.prototype.replace),I=E(String.prototype.indexOf),D=E(String.prototype.trim),T=E(RegExp.prototype.test),A=L(TypeError);function E(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return _(t,e,i)}}function L(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return x(t,n)}}function P(t,e){d&&d(t,null);for(var n=e.length;n--;){var i=e[n];if("string"==typeof i){var r=S(i);r!==i&&(h(e)||(e[n]=r),i=r)}t[i]=!0}return t}function N(t){var e,n=v(null);for(e in t)_(c,t,[e])&&(n[e]=t[e]);return n}function O(t,e){for(;null!==t;){var n=f(t,e);if(n){if(n.get)return E(n.get);if("function"==typeof n.value)return E(n.value)}t=p(t)}function i(t){return null}return i}var z=g(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R=g(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),V=g(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),F=g(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),B=g(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),H=g(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),G=g(["#text"]),j=g(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),W=g(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U=g(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Y=g(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$=m(/\{\{[\w\W]*|[\w\W]*\}\}/gm),q=m(/<%[\w\W]*|[\w\W]*%>/gm),X=m(/^data-[\-\w.\u00B7-\uFFFF]/),Z=m(/^aria-[\-\w]+$/),J=m(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),K=m(/^(?:\w+script|data):/i),Q=m(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tt=m(/^html$/i),et=function(){return"undefined"==typeof window?null:window},nt=function(e,n){if("object"!==t(e)||"function"!=typeof e.createPolicy)return null;var i=null,r="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(r)&&(i=n.currentScript.getAttribute(r));var a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML:function(t){return t}})}catch(o){return null}};function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et(),n=function(t){return it(t)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var i=e.document,a=e.document,o=e.DocumentFragment,s=e.HTMLTemplateElement,l=e.Node,u=e.Element,c=e.NodeFilter,d=e.NamedNodeMap,h=void 0===d?e.NamedNodeMap||e.MozNamedAttrMap:d,p=e.HTMLFormElement,f=e.DOMParser,m=e.trustedTypes,v=u.prototype,y=O(v,"cloneNode"),_=O(v,"nextSibling"),x=O(v,"childNodes"),E=O(v,"parentNode");if("function"==typeof s){var L=a.createElement("template");L.content&&L.content.ownerDocument&&(a=L.content.ownerDocument)}var rt=nt(m,i),at=rt?rt.createHTML(""):"",ot=a,st=ot.implementation,lt=ot.createNodeIterator,ut=ot.createDocumentFragment,ct=ot.getElementsByTagName,dt=i.importNode,ht={};try{ht=N(a).documentMode?a.documentMode:{}}catch(Ce){}var pt={};n.isSupported="function"==typeof E&&st&&void 0!==st.createHTMLDocument&&9!==ht;var ft,gt,mt=$,vt=q,yt=X,_t=Z,xt=K,bt=Q,wt=J,Mt=null,St=P({},[].concat(r(z),r(R),r(V),r(B),r(G))),Ct=null,kt=P({},[].concat(r(j),r(W),r(U),r(Y))),It=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Dt=null,Tt=null,At=!0,Et=!0,Lt=!1,Pt=!1,Nt=!1,Ot=!1,zt=!1,Rt=!1,Vt=!1,Ft=!1,Bt=!0,Ht=!0,Gt=!1,jt={},Wt=null,Ut=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Yt=null,$t=P({},["audio","video","img","source","image","track"]),qt=null,Xt=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Zt="http://www.w3.org/1998/Math/MathML",Jt="http://www.w3.org/2000/svg",Kt="http://www.w3.org/1999/xhtml",Qt=Kt,te=!1,ee=["application/xhtml+xml","text/html"],ne="text/html",ie=null,re=a.createElement("form"),ae=function(t){return t instanceof RegExp||t instanceof Function},oe=function(e){ie&&ie===e||(e&&"object"===t(e)||(e={}),e=N(e),Mt="ALLOWED_TAGS"in e?P({},e.ALLOWED_TAGS):St,Ct="ALLOWED_ATTR"in e?P({},e.ALLOWED_ATTR):kt,qt="ADD_URI_SAFE_ATTR"in e?P(N(Xt),e.ADD_URI_SAFE_ATTR):Xt,Yt="ADD_DATA_URI_TAGS"in e?P(N($t),e.ADD_DATA_URI_TAGS):$t,Wt="FORBID_CONTENTS"in e?P({},e.FORBID_CONTENTS):Ut,Dt="FORBID_TAGS"in e?P({},e.FORBID_TAGS):{},Tt="FORBID_ATTR"in e?P({},e.FORBID_ATTR):{},jt="USE_PROFILES"in e&&e.USE_PROFILES,At=!1!==e.ALLOW_ARIA_ATTR,Et=!1!==e.ALLOW_DATA_ATTR,Lt=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Pt=e.SAFE_FOR_TEMPLATES||!1,Nt=e.WHOLE_DOCUMENT||!1,Rt=e.RETURN_DOM||!1,Vt=e.RETURN_DOM_FRAGMENT||!1,Ft=e.RETURN_TRUSTED_TYPE||!1,zt=e.FORCE_BODY||!1,Bt=!1!==e.SANITIZE_DOM,Ht=!1!==e.KEEP_CONTENT,Gt=e.IN_PLACE||!1,wt=e.ALLOWED_URI_REGEXP||wt,Qt=e.NAMESPACE||Kt,e.CUSTOM_ELEMENT_HANDLING&&ae(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(It.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ae(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(It.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(It.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ft=ft=-1===ee.indexOf(e.PARSER_MEDIA_TYPE)?ne:e.PARSER_MEDIA_TYPE,gt="application/xhtml+xml"===ft?function(t){return t}:S,Pt&&(Et=!1),Vt&&(Rt=!0),jt&&(Mt=P({},r(G)),Ct=[],!0===jt.html&&(P(Mt,z),P(Ct,j)),!0===jt.svg&&(P(Mt,R),P(Ct,W),P(Ct,Y)),!0===jt.svgFilters&&(P(Mt,V),P(Ct,W),P(Ct,Y)),!0===jt.mathMl&&(P(Mt,B),P(Ct,U),P(Ct,Y))),e.ADD_TAGS&&(Mt===St&&(Mt=N(Mt)),P(Mt,e.ADD_TAGS)),e.ADD_ATTR&&(Ct===kt&&(Ct=N(Ct)),P(Ct,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&P(qt,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(Wt===Ut&&(Wt=N(Wt)),P(Wt,e.FORBID_CONTENTS)),Ht&&(Mt["#text"]=!0),Nt&&P(Mt,["html","head","body"]),Mt.table&&(P(Mt,["tbody"]),delete Dt.tbody),g&&g(e),ie=e)},se=P({},["mi","mo","mn","ms","mtext"]),le=P({},["foreignobject","desc","title","annotation-xml"]),ue=P({},["title","style","font","a","script"]),ce=P({},R);P(ce,V),P(ce,F);var de=P({},B);P(de,H);var he=function(t){var e=E(t);e&&e.tagName||(e={namespaceURI:Kt,tagName:"template"});var n=S(t.tagName),i=S(e.tagName);return t.namespaceURI===Jt?e.namespaceURI===Kt?"svg"===n:e.namespaceURI===Zt?"svg"===n&&("annotation-xml"===i||se[i]):Boolean(ce[n]):t.namespaceURI===Zt?e.namespaceURI===Kt?"math"===n:e.namespaceURI===Jt?"math"===n&&le[i]:Boolean(de[n]):t.namespaceURI===Kt&&!(e.namespaceURI===Jt&&!le[i])&&!(e.namespaceURI===Zt&&!se[i])&&!de[n]&&(ue[n]||!ce[n])},pe=function(t){M(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(Ce){try{t.outerHTML=at}catch(e){t.remove()}}},fe=function(t,e){try{M(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(Ce){M(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!Ct[t])if(Rt||Vt)try{pe(e)}catch(Ce){}else try{e.setAttribute(t,"")}catch(Ce){}},ge=function(t){var e,n;if(zt)t="<remove></remove>"+t;else{var i=C(t,/^[\r\n\t ]+/);n=i&&i[0]}"application/xhtml+xml"===ft&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var r=rt?rt.createHTML(t):t;if(Qt===Kt)try{e=(new f).parseFromString(r,ft)}catch(Ce){}if(!e||!e.documentElement){e=st.createDocument(Qt,"template",null);try{e.documentElement.innerHTML=te?"":r}catch(Ce){}}var o=e.body||e.documentElement;return t&&n&&o.insertBefore(a.createTextNode(n),o.childNodes[0]||null),Qt===Kt?ct.call(e,Nt?"html":"body")[0]:Nt?e.documentElement:o},me=function(t){return lt.call(t.ownerDocument||t,t,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},ve=function(t){return t instanceof p&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof h)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore)},ye=function(e){return"object"===t(l)?e instanceof l:e&&"object"===t(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},_e=function(t,e,i){pt[t]&&b(pt[t],(function(t){t.call(n,e,i,ie)}))},xe=function(t){var e;if(_e("beforeSanitizeElements",t,null),ve(t))return pe(t),!0;if(T(/[\u0080-\uFFFF]/,t.nodeName))return pe(t),!0;var i=gt(t.nodeName);if(_e("uponSanitizeElement",t,{tagName:i,allowedTags:Mt}),t.hasChildNodes()&&!ye(t.firstElementChild)&&(!ye(t.content)||!ye(t.content.firstElementChild))&&T(/<[/\w]/g,t.innerHTML)&&T(/<[/\w]/g,t.textContent))return pe(t),!0;if("select"===i&&T(/<template/i,t.innerHTML))return pe(t),!0;if(!Mt[i]||Dt[i]){if(!Dt[i]&&we(i)){if(It.tagNameCheck instanceof RegExp&&T(It.tagNameCheck,i))return!1;if(It.tagNameCheck instanceof Function&&It.tagNameCheck(i))return!1}if(Ht&&!Wt[i]){var r=E(t)||t.parentNode,a=x(t)||t.childNodes;if(a&&r)for(var o=a.length-1;o>=0;--o)r.insertBefore(y(a[o],!0),_(t))}return pe(t),!0}return t instanceof u&&!he(t)?(pe(t),!0):"noscript"!==i&&"noembed"!==i||!T(/<\/no(script|embed)/i,t.innerHTML)?(Pt&&3===t.nodeType&&(e=t.textContent,e=k(e,mt," "),e=k(e,vt," "),t.textContent!==e&&(M(n.removed,{element:t.cloneNode()}),t.textContent=e)),_e("afterSanitizeElements",t,null),!1):(pe(t),!0)},be=function(t,e,n){if(Bt&&("id"===e||"name"===e)&&(n in a||n in re))return!1;if(Et&&!Tt[e]&&T(yt,e));else if(At&&T(_t,e));else if(!Ct[e]||Tt[e]){if(!(we(t)&&(It.tagNameCheck instanceof RegExp&&T(It.tagNameCheck,t)||It.tagNameCheck instanceof Function&&It.tagNameCheck(t))&&(It.attributeNameCheck instanceof RegExp&&T(It.attributeNameCheck,e)||It.attributeNameCheck instanceof Function&&It.attributeNameCheck(e))||"is"===e&&It.allowCustomizedBuiltInElements&&(It.tagNameCheck instanceof RegExp&&T(It.tagNameCheck,n)||It.tagNameCheck instanceof Function&&It.tagNameCheck(n))))return!1}else if(qt[e]);else if(T(wt,k(n,bt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==I(n,"data:")||!Yt[t])if(Lt&&!T(xt,k(n,bt,"")));else if(n)return!1;return!0},we=function(t){return t.indexOf("-")>0},Me=function(t){var e,i,r,a;_e("beforeSanitizeAttributes",t,null);var o=t.attributes;if(o){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ct};for(a=o.length;a--;){var l=e=o[a],u=l.name,c=l.namespaceURI;if(i="value"===u?e.value:D(e.value),r=gt(u),s.attrName=r,s.attrValue=i,s.keepAttr=!0,s.forceKeepAttr=void 0,_e("uponSanitizeAttribute",t,s),i=s.attrValue,!s.forceKeepAttr&&(fe(u,t),s.keepAttr))if(T(/\/>/i,i))fe(u,t);else{Pt&&(i=k(i,mt," "),i=k(i,vt," "));var d=gt(t.nodeName);if(be(d,r,i))try{c?t.setAttributeNS(c,u,i):t.setAttribute(u,i),w(n.removed)}catch(Ce){}}}_e("afterSanitizeAttributes",t,null)}},Se=function t(e){var n,i=me(e);for(_e("beforeSanitizeShadowDOM",e,null);n=i.nextNode();)_e("uponSanitizeShadowNode",n,null),xe(n)||(n.content instanceof o&&t(n.content),Me(n));_e("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(r,a){var s,u,c,d,h;if((te=!r)&&(r="\x3c!--\x3e"),"string"!=typeof r&&!ye(r)){if("function"!=typeof r.toString)throw A("toString is not a function");if("string"!=typeof(r=r.toString()))throw A("dirty is not a string, aborting")}if(!n.isSupported){if("object"===t(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof r)return e.toStaticHTML(r);if(ye(r))return e.toStaticHTML(r.outerHTML)}return r}if(Ot||oe(a),n.removed=[],"string"==typeof r&&(Gt=!1),Gt){if(r.nodeName){var p=gt(r.nodeName);if(!Mt[p]||Dt[p])throw A("root node is forbidden and cannot be sanitized in-place")}}else if(r instanceof l)1===(u=(s=ge("\x3c!----\x3e")).ownerDocument.importNode(r,!0)).nodeType&&"BODY"===u.nodeName||"HTML"===u.nodeName?s=u:s.appendChild(u);else{if(!Rt&&!Pt&&!Nt&&-1===r.indexOf("<"))return rt&&Ft?rt.createHTML(r):r;if(!(s=ge(r)))return Rt?null:Ft?at:""}s&&zt&&pe(s.firstChild);for(var f=me(Gt?r:s);c=f.nextNode();)3===c.nodeType&&c===d||xe(c)||(c.content instanceof o&&Se(c.content),Me(c),d=c);if(d=null,Gt)return r;if(Rt){if(Vt)for(h=ut.call(s.ownerDocument);s.firstChild;)h.appendChild(s.firstChild);else h=s;return Ct.shadowroot&&(h=dt.call(i,h,!0)),h}var g=Nt?s.outerHTML:s.innerHTML;return Nt&&Mt["!doctype"]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&T(tt,s.ownerDocument.doctype.name)&&(g="<!DOCTYPE "+s.ownerDocument.doctype.name+">\n"+g),Pt&&(g=k(g,mt," "),g=k(g,vt," ")),rt&&Ft?rt.createHTML(g):g},n.setConfig=function(t){oe(t),Ot=!0},n.clearConfig=function(){ie=null,Ot=!1},n.isValidAttribute=function(t,e,n){ie||oe({});var i=gt(t),r=gt(e);return be(i,r,n)},n.addHook=function(t,e){"function"==typeof e&&(pt[t]=pt[t]||[],M(pt[t],e))},n.removeHook=function(t){if(pt[t])return w(pt[t])},n.removeHooks=function(t){pt[t]&&(pt[t]=[])},n.removeAllHooks=function(){pt={}},n}return it()}();var xF=window.DOMPurify||(window.DOMPurify=_F.exports.default||_F.exports);function bF({template:t,param:e,as:n="div"}){var i;const r=uF(gF)[t];if(oR(r))return null;const a=r(e);return aR(a)?oO(n,{className:uR(`template-${t}`),dangerouslySetInnerHTML:{__html:(o=a,xF.sanitize(o))}}):function(t,e,n){var i,r,a,o=rO({},t.props);for(a in e)"key"==a?i=e[a]:"ref"==a?r=e[a]:o[a]=e[a];return arguments.length>2&&(o.children=arguments.length>3?VN.call(arguments,2):n),sO(t.type,o,i||t.key,r||t.ref,null)}(a,{className:`${null!=(i=a.props.className)?i:""} ${uR(`template-${t}`)}`});var o}const wF=DO(null),MF=wF.Provider,SF=()=>{const t=XO(wF);if(!t)throw new Error("useEventBus must be used within a EventBusProvider");return t},CF=t=>{var e,n,i,r,a;return null!=(a=null==(r=null==(i=null==(n=null==(e=t.options)?void 0:e.timezone)?void 0:n.zones)?void 0:i[0])?void 0:r.timezoneName)?a:"Local"},kF=t=>{var e,n;return null==(n=null==(e=t.options)?void 0:e.timezone)?void 0:n.customOffsetCalculator},IF=t=>{var e;return null!=(e=t.options.timezone.zones)?e:[]};function DF(){const t=uF(kF),e=sR(t);return qO(((n,i=new LR)=>i.tz(e?t(n,i.getTime()):n)),[t,e])}function TF(){const t=uF(CF),e=DF(),n=qO((()=>e(t)),[t,e]);return[t,n]}function AF({dayName:t,style:e,type:n,theme:i}){const r=SF(),[,a]=TF(),o=a(),{day:s}=t,l="week"===n?function({dayName:t,theme:e,today:n}){var i,r;const{day:a,dateInstance:o}=t,s=nV(n,o),l=!s&&o<n;return lV(a)?e.common.holiday.color:l?null==(i=e.week)?void 0:i.pastDay.color:uV(a)?e.common.saturday.color:s?null==(r=e.week)?void 0:r.today.color:e.common.dayName.color}({dayName:t,theme:i,today:o}):function({dayName:t,theme:e}){const{day:n}=t;return lV(n)?e.common.holiday.color:uV(n)?e.common.saturday.color:e.common.dayName.color}({dayName:t,theme:i}),u=`${n}DayName`;return oO("div",{className:uR("day-name-item",n),style:e},oO("span",{className:uR({[`holiday-${RV(s)}`]:sV(s)}),style:{color:l},onClick:()=>{(function(t,e){return"week"===t})(n)&&r.fire("clickDayName",{date:ZR(t.dateInstance,"YYYY-MM-DD")})},"data-testid":`dayName-${n}-${RV(s)}`},oO(bF,{template:u,param:t})))}const EF=hF("common"),LF=hF("month"),PF=t=>t.week.dayGridLeft,NF=t=>t.week.timeGridLeft,OF=t=>t.month.moreView,zF=t=>t.month.gridCell,RF={border:"1px solid #e5e5e5",backgroundColor:"white",holiday:{color:"#ff4040"},saturday:{color:"#333"},dayName:{color:"#333"},today:{color:"#fff"},gridSelection:{backgroundColor:"rgba(81, 92, 230, 0.05)",border:"1px solid #515ce6"}},VF={dayName:{borderLeft:"none",borderTop:"1px solid #e5e5e5",borderBottom:"1px solid #e5e5e5",backgroundColor:"inherit"},weekend:{backgroundColor:"inherit"},today:{color:"inherit",backgroundColor:"rgba(81, 92, 230, 0.05)"},pastDay:{color:"#bbb"},panelResizer:{border:"1px solid #e5e5e5"},dayGrid:{borderRight:"1px solid #e5e5e5",backgroundColor:"inherit"},dayGridLeft:{borderRight:"1px solid #e5e5e5",backgroundColor:"inherit",width:"72px"},timeGrid:{borderRight:"1px solid #e5e5e5"},timeGridLeft:{backgroundColor:"inherit",borderRight:"1px solid #e5e5e5",width:"72px"},timeGridLeftAdditionalTimezone:{backgroundColor:"white"},timeGridHalfHourLine:{borderBottom:"none"},timeGridHourLine:{borderBottom:"1px solid #e5e5e5"},nowIndicatorLabel:{color:"#515ce6"},nowIndicatorPast:{border:"1px dashed #515ce6"},nowIndicatorBullet:{backgroundColor:"#515ce6"},nowIndicatorToday:{border:"1px solid #515ce6"},nowIndicatorFuture:{border:"none"},pastTime:{color:"#bbb"},futureTime:{color:"#333"},gridSelection:{color:"#515ce6"}},FF={dayName:{borderLeft:"none",backgroundColor:"inherit"},holidayExceptThisMonth:{color:"rgba(255, 64, 64, 0.4)"},dayExceptThisMonth:{color:"rgba(51, 51, 51, 0.4)"},weekend:{backgroundColor:"inherit"},moreView:{border:"1px solid #d5d5d5",boxShadow:"0 2px 6px 0 rgba(0, 0, 0, 0.1)",backgroundColor:"white",width:null,height:null},gridCell:{headerHeight:31,footerHeight:null},moreViewTitle:{backgroundColor:"inherit"}};function BF(t){return{setTheme:e=>{t(Jz((t=>{t.common=PR(t.common,e.common),t.week=PR(t.week,e.week),t.month=PR(t.month,e.month)})))},setCommonTheme:e=>{t(Jz((t=>{t.common=PR(t.common,e)})))},setWeekTheme:e=>{t(Jz((t=>{t.week=PR(t.week,e)})))},setMonthTheme:e=>{t(Jz((t=>{t.month=PR(t.month,e)})))}}}const HF=(t={})=>e=>QN(KN(KN(KN({},function(t={}){return{common:PR(RF,t)}}(null==t?void 0:t.common)),function(t={}){return{week:PR(VF,t)}}(null==t?void 0:t.week)),function(t={}){return{month:PR(FF,t)}}(null==t?void 0:t.month)),{dispatch:KN({},BF(e))}),{StoreProvider:GF,useInternalStore:jF,useStore:WF}=aF();function UF(){return WF(LF)}function YF(t){return{common:{saturday:t.common.saturday,holiday:t.common.holiday,today:t.common.today,dayName:t.common.dayName},week:{pastDay:t.week.pastDay,today:t.week.today,dayName:t.week.dayName}}}function $F(t){return{common:{saturday:t.common.saturday,holiday:t.common.holiday,today:t.common.today,dayName:t.common.dayName},month:{dayName:t.month.dayName}}}function qF({dayNames:t,marginLeft:e="0",rowStyleInfo:n,type:i="month"}){var r,a;const o=WF("month"===i?$F:YF),s=null!=(a=null==(r=o[i])?void 0:r.dayName)?a:{},{backgroundColor:l="white",borderLeft:u=null}=s,c=tO(s,["backgroundColor","borderLeft"]),{borderTop:d=null,borderBottom:h=null}=c;return oO("div",{"data-testid":`grid-header-${i}`,className:uR("day-names",i),style:{backgroundColor:l,borderTop:d,borderBottom:h}},oO("div",{className:uR("day-name-container"),style:{marginLeft:e}},t.map(((t,e)=>oO(AF,{type:i,key:`dayNames-${t.day}`,dayName:t,style:{width:cR(n[e].width),left:cR(n[e].left),borderLeft:u},theme:o})))))}var XF=(t=>(t.header="header",t.footer="footer",t))(XF||{});function ZF(t,e=!0){const n=[];let i;return t.length?(n[0]=[t[0].cid()],t.slice(1).forEach(((r,a)=>{i=t.slice(0,a+1).reverse();const o=i.find((t=>r.collidesWith(t,e)));o?n.slice().reverse().some((t=>!!~t.indexOf(o.cid())&&(t.push(r.cid()),!0))):n.push([r.cid()])})),n):n}function JF(t,e){let{length:n}=t;for(;n>0;)if(n-=1,!Kz(t[n][e]))return n;return-1}function KF(t,e,n=!0){const i=[];return e.forEach((e=>{const r=[[]];e.forEach((e=>{const i=t.get(e);let a,o,s=0,l=!1;for(;!l;)o=JF(r,s),-1===o?(r[0].push(i),l=!0):i.collidesWith(r[o][s],n)||(a=o+1,Kz(r[a])&&(r[a]=[]),r[a][s]=i,l=!0),s+=1})),i.push(r)})),i}function QF(t,e){return n=>{const i=n.getStarts();return!(n.getEnds()<t||i>e)}}function tB(t,e,n,i){const r=QR(t,e,864e5).map((t=>ZR(t,"YYYYMMDD")));n.forEach((t=>{t.forEach((t=>{t.forEach(((t,e)=>{if(!t)return;const n=ZR(t.getStarts(),"YYYYMMDD"),a=QR(KR(t.getStarts()),oV(t.getEnds()),864e5).length;t.top=e,t.left=r.indexOf(n),t.width=a,null==i||i(t)}))}))}))}function eB(t,e,n){return n.getStarts()<t&&(n.exceedLeft=!0,n.renderStarts=new LR(t)),n.getEnds()>e&&(n.exceedRight=!0,n.renderEnds=new LR(e)),n}function nB(t,e,n){return n instanceof wV?(n.each((n=>(eB(t,e,n),!0))),null):eB(t,e,n)}function iB(t){const e=new wV((t=>t.cid()));return t.each((function(t){e.add(new OR(t))})),e}function rB({model:t}){return t.isAllday||t.hasMultiDates}function aB(t){return!rB(t)}function oB(t){t.top=t.top||0,t.top+=1}function sB(t,e){const n=e.filter(rB),i=e.filter(aB).sort(zR.event.asc),r={};i.forEach((e=>{const i=ZR(e.getStarts(),"YYYYMMDD");let a=r[i];Kz(a)&&(a=r[i]=function(t,e,n){const i=[];return t[e].forEach((t=>{n.doWhenHas(t,(t=>{i.push(t.top)}))})),i.length>0?Math.max(...i):0}(t,i,n)),r[i]=e.top=a+1}))}function lB(t,e){const{start:n,end:i,andFilters:r=[],alldayFirstMode:a=!1}=e,{events:o,idsOfDay:s}=t,l=wV.and(...[QF(n,i)].concat(r)),u=iB(o.filter(l));!function(t){t.each((t=>{const{model:e}=t,n=e.getStarts(),i=e.getEnds();e.hasMultiDates=!nV(n,i),!e.isAllday&&e.hasMultiDates&&(t.renderStarts=KR(n),t.renderEnds=oV(i))}))}(u),function(t,e,n){n.each((n=>{(n.model.isAllday||n.model.hasMultiDates)&&nB(KR(t),oV(e),n)}))}(n,i,u);const c=u.sort(zR.event.asc),d=KF(u,ZF(c,false),false);return tB(n,i,d,oB),a?sB(s,u):function(t,e){const n=e.filter(rB),i=e.filter(aB).sort(zR.event.asc),r={};i.forEach((e=>{const i=ZR(e.getStarts(),"YYYYMMDD");let a=r[i];if(Kz(a)&&(a=r[i]=[],t[i].forEach((t=>{n.doWhenHas(t,(t=>{a.push(t.top)}))}))),a.indexOf(e.top)>=0){const t=Math.max(...a)+1;for(let n=1;n<=t&&(e.top=n,!(a.indexOf(e.top)<0));n+=1);}a.push(e.top)}))}(s,u),d}function uB(t,e){return 0===t&&24===e?t=>t.sort(zR.event.asc):n=>{return n.filter((i=t,r=e,t=>{const e=t.getStarts(),n=t.getEnds(),a=e.getTime(),o=n.getTime(),s=e.getFullYear(),l=e.getMonth(),u=e.getDate(),c=new LR(s,l,u).setHours(i),d=new LR(s,l,u).setHours(r);return a>=c&&a<d||o>c&&o<=d||a<c&&o>c||o>d&&a<d})).sort(zR.event.asc);var i,r}}function cB(t,e){const{start:n,end:i,uiModelTimeColl:r,hourStart:a,hourEnd:o}=e,s=function(t,e,n,i){const r={};return SV(e,n).forEach((e=>{const n=ZR(e,"YYYYMMDD"),a=t[n],o=r[n]=new wV((t=>t.cid()));a&&a.length&&a.forEach((t=>{i.doWhenHas(t,(t=>{o.add(t)}))}))}),{}),r}(t,n,i,r),l={},u=uB(a,o);return Object.entries(s).forEach((([t,e])=>{const n=KF(e,ZF(u(e),true),true);l[t]=n})),l}function dB(t,e,n){if(!n||!n.size)return[];!function(t){t.each((t=>{const{model:e}=t;e.hasMultiDates=!0,t.renderStarts=KR(e.getStarts()),t.renderEnds=oV(e.getEnds())}))}(n),nB(t,e,n);const i=n.sort(zR.event.asc),r=KF(n,ZF(i,true),true);return tB(t,e,r),r}function hB(t,e,n){const i=Math.max(t,...e);return Math.min(i,...n)}function pB(t,e,n){return e*n/t}function fB(t,e,n){return e<=t&&t<=n}function gB(t,e){t.forEach((t=>{t.forEach((t=>{t.forEach(((t,n)=>{e(t,n)}))}))}))}function mB(t,e){return({top:n})=>t>=n*e}function vB(t,e,n){return t.filter(function(t,e){return({top:n})=>t<n*e}(e,n)).length}function yB(t,e,n){const i=(t=>t.filter((t=>sV(t.getDay()))).length)(t),r=t.length,a=i===r,o=n/(e&&!a?2*r-i:r),s=t.map((t=>{const n=t.getDay();return!e||a||sV(n)?o:2*o})),l=s.reduce(((t,e,n)=>n?[...t,t[n-1]+s[n-1]]:[0]),[]);return{widthList:s,leftList:l}}function _B(t,e,n){return t.reduce(((t,i,r)=>e<=r&&r<=n?t+i:t),0)}function xB(t,e){return e.findIndex((e=>t>=KR(e)&&t<=oV(e)))}const bB=(t,e,n,i)=>{const{widthList:r}=yB(n,i,100);let a=0,o=n.length-1;return n.forEach(((n,i)=>{n<=t&&(a=i),n<=e&&(o=i)})),{width:_B(r,a,o),left:a?_B(r,0,a-1):0}};function wB(t,e,n){const{idsOfDay:i}=e,r=lB(e,{start:t[0],end:oV(t[t.length-1])}),a=[];gB(r,(e=>{const i=e.model.cid();a[i]=function(t,e,n=!1){const i=t.getStarts(),r=t.getEnds(),{width:a,left:o}=bB(i,r,e,n);return t.width=a,t.left=o,t}(e,t,n)}));const o=Object.keys(i).reduce(((t,e)=>{const n=i[e];return t[e]=n.map((t=>a[t])).filter((t=>!!t)),t}),{});return{uiModels:Object.values(a),gridDateEventModelMap:o}}const MB=(t,e,n=!1)=>(gB(t,(t=>{const i=t.getStarts(),r=t.getEnds(),{width:a,left:o}=bB(i,r,e,n);t.width=a,t.left=o,t.top+=1})),SB(t));function SB(t){return t.flatMap((t=>t.flatMap((t=>(t=>t.filter((t=>!!t)))(t)))))}const CB=(t,e,{narrowWeekend:n,hourStart:i,hourEnd:r,weekStartDate:a,weekEndDate:o})=>{const s=function(t,e){var n,i;const{start:r,end:a,panels:o,andFilters:s=[],options:l}=e,{events:u,idsOfDay:c}=t,d=null!=(n=null==l?void 0:l.hourStart)?n:0,h=null!=(i=null==l?void 0:l.hourEnd)?i:24,p=wV.and(...[QF(r,a)].concat(s)),f=iB(u.filter(p)).groupBy(CV);return o.reduce(((t,e)=>{const{name:n,type:i}=e;return oR(f[n])?t:QN(KN({},t),{[n]:"daygrid"===i?dB(r,a,f[n]):cB(c,{start:r,end:a,uiModelTimeColl:f[n],hourStart:d,hourEnd:h})})}),{milestone:[],task:[],allday:[],time:{}})}(e,{start:a,end:o,panels:[{name:"milestone",type:"daygrid",show:!0},{name:"task",type:"daygrid",show:!0},{name:"allday",type:"daygrid",show:!0},{name:"time",type:"timegrid",show:!0}],andFilters:[],options:{hourStart:i,hourEnd:r}});return Object.keys(s).reduce(((e,i)=>{const r=s[i];return QN(KN({},e),{[i]:Array.isArray(r)?MB(r,t,n):(a=r,Array.from(new Set(Object.values(a).reduce(((t,e)=>t.concat(...SB(e))),[]))))});var a}),{milestone:[],allday:[],task:[],time:[]})};function kB(t,{workweek:e=!1,visibleWeeksCount:n=0,startDayOfWeek:i=0,isAlways6Weeks:r=!0}){const a=new LR(t),o=n>0,s=o?a:cV(a),l=function(t,e){const n=tV(t);return n.setDate(t.getDate()-e),n}(s,s.getDay()-i+(s.getDay()<i?7:0)),u=l.getDay(),c=function(t){const e=cV(t);return e.setMonth(e.getMonth()+1),e.setDate(e.getDate()-1),e.setHours(23,59,59,999),e}(a).getDate(),d=mV(l,s),h=c+Math.abs(d);let p=6;return o?p=n:!1===r&&(p=Math.ceil(h/7)),tR(0,p).map((t=>tR(0,7).reduce(((n,i)=>{const r=7*t+i;if(!e||e&&!sV((r+u)%7)){const t=gV(l,r);n.push(t)}return n}),[])))}function IB(t,{startDayOfWeek:e=HR.SUN,workweek:n}){const i=KR(t),r=i.getDay()-e;return(r>=0?tR(-r,7-r):tR(-7-r,-r)).reduce(((t,e)=>{const r=gV(i,e);return n&&sV(r.getDay())||t.push(r),t}),[])}function DB(t,e){var n;const i=function(t,e=!1){const n=t.length,i=n>5&&e,r=i?100/(n-1):100/n;return t.map((t=>{const e=i&&sV(t.getDay())?r/2:r;return{date:t,width:e}})).reduce(((t,e,n)=>{const i=t[n-1];return t.push(QN(KN({},e),{left:0===n?0:i.left+i.width})),t}),[])}(t,null!=(n=e.narrowWeekend)&&n),r=2*(e.hourEnd-e.hourStart),a=100/r;return{columns:i,rows:tR(r).map(((t,n)=>{const i=n%2==1,r=e.hourStart+Math.floor(t/2),o=`${r}:${i?"30":"00"}`.padStart(5,"0"),s=(i?`${r+1}:00`:`${r}:30`).padStart(5,"0");return{top:a*n,height:a,startTime:o,endTime:s}}))}}function TB({rowsCount:t,columnsCount:e,container:n,narrowWeekend:i=!1,startDayOfWeek:r=HR.SUN}){if(oR(n))return()=>null;const a=tR(r,r+e).map((t=>t%7)),o=i?a.filter((t=>sV(t))).length:0;return function(r){const{left:s,top:l,width:u,height:c}=n.getBoundingClientRect(),[d,h]=function({clientX:t,clientY:e},{left:n,top:i,clientLeft:r,clientTop:a}){return[t-n-r,e-i-a]}(r,{left:s,top:l,clientLeft:n.clientLeft,clientTop:n.clientTop});if(d<0||h<0||d>u||h>c)return null;const p=i?u/(e-o+1):u/e,f=a.map((t=>i&&sV(t)?p/2:p)),g=[];f.forEach(((t,e)=>{0===e?g.push(0):g.push(g[e-1]+f[e-1])}));return{columnIndex:FR(g,(t=>d>=t)),rowIndex:(m=t,v=c,y=h,hB(Math.floor(pB(v,m,y)),[0],[m-1]))};var m,v,y}}function AB(t){return t.common.gridSelection}function EB({type:t,gridSelectionData:e,weekDates:n,narrowWeekend:i}){const{backgroundColor:r,border:a}=WF(AB),{startCellIndex:o,endCellIndex:s}=e,{left:l,width:u}=((t,e,n,i)=>{const{widthList:r}=yB(n,i,100);return{left:t?_B(r,0,t-1):0,width:_B(r,null!=t?t:0,e<0?n.length-1:e)}})(Math.min(o,s),Math.max(o,s),n,i),c={left:cR(l),width:cR(u),height:cR(100),backgroundColor:r,border:a};return u>0?oO("div",{className:uR(t,"grid-selection"),style:c}):null}function LB(t,e,n){return{startColumnIndex:n?e.columnIndex:t.columnIndex,startRowIndex:n?e.rowIndex:t.rowIndex,endColumnIndex:n?t.columnIndex:e.columnIndex,endRowIndex:n?t.rowIndex:e.rowIndex}}const PB={sortSelection:(t,e)=>LB(t,e,t.columnIndex>e.columnIndex||t.columnIndex===e.columnIndex&&t.rowIndex>e.rowIndex),getDateFromCollection:(t,e)=>{const n=t;return[fV(n.columns[e.startColumnIndex].date,n.rows[e.startRowIndex].startTime),fV(n.columns[e.endColumnIndex].date,n.rows[e.endRowIndex].endTime)]},calculateSelection:function(t,e,n){if(oR(t))return null;const{startColumnIndex:i,endColumnIndex:r,endRowIndex:a,startRowIndex:o}=t;if(!fB(e,i,r))return null;const s={startRowIndex:o,endRowIndex:a,isSelectingMultipleColumns:i!==r,isStartingColumn:e===i};return i<e&&e<r?(s.startRowIndex=0,s.endRowIndex=n):i!==r&&(i===e?s.endRowIndex=n:r===e&&(s.startRowIndex=0)),s}};const NB={sortSelection:(t,e)=>LB(t,e,t.rowIndex>e.rowIndex||t.rowIndex===e.rowIndex&&t.columnIndex>e.columnIndex),getDateFromCollection:(t,e)=>{const n=t;return[n[e.startRowIndex][e.startColumnIndex],n[e.endRowIndex][e.endColumnIndex]]},calculateSelection:function(t,e,n){if(!(sR(t)&&sR(e)&&sR(n)))return null;const{startRowIndex:i,startColumnIndex:r,endRowIndex:a,endColumnIndex:o}=t;if(!fB(e,Math.min(i,a),Math.max(i,a)))return null;let s=r,l=o;return i<e&&(s=0),a>e&&(l=n-1),{startCellIndex:s,endCellIndex:l}}};const OB={sortSelection:(t,e)=>LB(t,e,t.columnIndex>e.columnIndex),getDateFromCollection:(t,e)=>{const n=t;return[n[e.startColumnIndex],n[e.endColumnIndex]]},calculateSelection:function(t){return sR(t)?{startCellIndex:t.startColumnIndex,endCellIndex:t.endColumnIndex}:null}};function zB(t){return OB.calculateSelection(t.gridSelection.dayGridWeek)}function RB({weekDates:t,narrowWeekend:e}){const n=uF(zB);return oR(n)?null:oO(EB,{type:"allday",gridSelectionData:n,weekDates:t,narrowWeekend:e})}function VB(t,e){for(var n in e)t[n]=e[n];return t}function FB(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var i in e)if("__source"!==i&&t[i]!==e[i])return!0;return!1}function BB(t){this.props=t}function HB(t,e){function n(t){var n=this.props.ref,i=n==t.ref;return!i&&n&&(n.call?n(null):n.current=null),e?!e(this.props,t)||!i:FB(this.props,t)}function i(e){return this.shouldComponentUpdate=n,oO(t,e)}return i.displayName="Memo("+(t.displayName||t.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i}(BB.prototype=new uO).isPureReactComponent=!0,BB.prototype.shouldComponentUpdate=function(t,e){return FB(this.props,t)||FB(this.state,e)};var GB=FN.__b;FN.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),GB&&GB(t)};var jB="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function WB(t){function e(e){var n=VB({},e);return delete n.ref,t(n,e.ref||null)}return e.$$typeof=jB,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var UB=FN.__e;FN.__e=function(t,e,n,i){if(t.then)for(var r,a=e;a=a.__;)if((r=a.__c)&&r.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e);UB(t,e,n,i)};var YB=FN.unmount;function $B(){this.__u=0,this.t=null,this.__b=null}function qB(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function XB(){this.u=null,this.o=null}FN.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&!0===t.__h&&(t.type=null),YB&&YB(t)},($B.prototype=new uO).__c=function(t,e){var n=e.__c,i=this;null==i.t&&(i.t=[]),i.t.push(n);var r=qB(i.__v),a=!1,o=function(){a||(a=!0,n.__R=null,r?r(s):s())};n.__R=o;var s=function(){if(!--i.__u){if(i.state.__a){var t=i.state.__a;i.__v.__k[0]=function t(e,n,i){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return t(e,n,i)})),e.__c&&e.__c.__P===n&&(e.__e&&i.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=i)),e}(t,t.__c.__P,t.__c.__O)}var e;for(i.setState({__a:i.__b=null});e=i.t.pop();)e.forceUpdate()}},l=!0===e.__h;i.__u++||l||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(o,o)},$B.prototype.componentWillUnmount=function(){this.t=[]},$B.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=function t(e,n,i){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),e.__c.__H=null),null!=(e=VB({},e)).__c&&(e.__c.__P===i&&(e.__c.__P=n),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return t(e,n,i)}))),e}(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__a&&oO(lO,null,t.fallback);return r&&(r.__h=null),[oO(lO,null,e.__a?null:t.children),r]};var ZB=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function JB(t){return this.getChildContext=function(){return t.context},t.children}function KB(t){var e=this,n=t.i;e.componentWillUnmount=function(){IO(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(t){this.childNodes.push(t),e.i.appendChild(t)},insertBefore:function(t,n){this.childNodes.push(t),e.i.appendChild(t)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.i.removeChild(t)}}),IO(oO(JB,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function QB(t,e){var n=oO(KB,{__v:t,i:e});return n.containerInfo=e,n}(XB.prototype=new uO).__a=function(t){var e=this,n=qB(e.__v),i=e.o.get(t);return i[0]++,function(r){var a=function(){e.props.revealOrder?(i.push(r),ZB(e,t,i)):r()};n?n(a):a()}},XB.prototype.render=function(t){this.u=null,this.o=new Map;var e=mO(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},XB.prototype.componentDidUpdate=XB.prototype.componentDidMount=function(){var t=this;this.o.forEach((function(e,n){ZB(t,n,e)}))};var tH="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,eH=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|shape|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nH="undefined"!=typeof document,iH=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(t)};uO.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(uO.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var rH=FN.event;function aH(){}function oH(){return this.cancelBubble}function sH(){return this.defaultPrevented}FN.event=function(t){return rH&&(t=rH(t)),t.persist=aH,t.isPropagationStopped=oH,t.isDefaultPrevented=sH,t.nativeEvent=t};var lH={configurable:!0,get:function(){return this.class}},uH=FN.vnode;FN.vnode=function(t){var e=t.type,n=t.props,i=n;if("string"==typeof e){var r=-1===e.indexOf("-");for(var a in i={},n){var o=n[a];nH&&"children"===a&&"noscript"===e||"value"===a&&"defaultValue"in n&&null==o||("defaultValue"===a&&"value"in n&&null==n.value?a="value":"download"===a&&!0===o?o="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+e)&&!iH(n.type)?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(a)?a=a.toLowerCase():r&&eH.test(a)?a=a.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===o&&(o=void 0),/^oninput$/i.test(a)&&(a=a.toLowerCase(),i[a]&&(a="oninputCapture")),i[a]=o)}"select"==e&&i.multiple&&Array.isArray(i.value)&&(i.value=mO(n.children).forEach((function(t){t.props.selected=-1!=i.value.indexOf(t.props.value)}))),"select"==e&&null!=i.defaultValue&&(i.value=mO(n.children).forEach((function(t){t.props.selected=i.multiple?-1!=i.defaultValue.indexOf(t.props.value):i.defaultValue==t.props.value}))),t.props=i,n.class!=n.className&&(lH.enumerable="className"in n,null!=n.className&&(i.class=n.className),Object.defineProperty(i,"className",lH))}t.$$typeof=tH,uH&&uH(t)};var cH=FN.__r;function dH({index:t,exceedCount:e,isClicked:n,onClickExceedCount:i}){const r={display:n?"none":""};return e&&!n?oO("span",{className:uR("weekday-exceed-in-week"),onClick:()=>i(t),style:r},oO(bF,{template:"weekGridFooterExceed",param:e})):null}function hH({isClicked:t,isClickedIndex:e,onClickCollapseButton:n}){return t&&e?oO("span",{className:uR("weekday-exceed-in-week"),onClick:n},oO(bF,{template:"collapseBtnTitle"})):null}function pH({width:t,left:e,index:n,exceedCount:i,isClicked:r,onClickExceedCount:a,isClickedIndex:o,onClickCollapseButton:s,isLastCell:l}){const{borderRight:u,backgroundColor:c}=WF(qO((t=>t.week.dayGrid),[])),d={width:t,left:e,borderRight:l?"none":u,backgroundColor:c};return oO("div",{className:uR("panel-grid"),style:d},oO(dH,{index:n,exceedCount:i,isClicked:r,onClickExceedCount:a}),oO(hH,{isClickedIndex:o,isClicked:r,onClickCollapseButton:s}))}FN.__r=function(t){cH&&cH(t),t.__c};const fH=HB((function({uiModels:t,weekDates:e,narrowWeekend:n,height:i,clickedIndex:r,isClickedCount:a,onClickExceedCount:o,onClickCollapseButton:s}){const{widthList:l,leftList:u}=yB(e,n,100),c=e.length-1;return oO(lO,null,e.map(((e,n)=>{const d=cR(l[n]),h=cR(u[n]);var p;const f=vB(t.filter((p=e,t=>{const e=KR(t.getStarts()),n=KR(t.getEnds());return e<=p&&p<=n})),i,24),g=n===r,m=n===c;return oO(pH,{key:`panel-grid-${e.getDate()}`,width:d,left:h,index:n,exceedCount:f,isClicked:a,onClickExceedCount:o,isClickedIndex:g,onClickCollapseButton:s,isLastCell:m})})))}));function gH({onMouseDown:t}){return oO("span",{className:`${uR("weekday-resize-handle")} ${uR("handle-y")}`,onMouseDown:t,"data-testid":"horizontal-event-resize-icon"},oO("i",{className:`${uR("icon")} ${uR("ic-handle-y")}`}))}const mH=DO(null),vH=mH.Provider,yH=()=>{const t=XO(mH);if(Kz(t))throw new Error("LayoutContainerProvider is not found");return t},_H="panelResizer",xH=(t,e)=>`event/${t}/resize/${e}`,bH=(t,e)=>`event/${t}/move/${e}`,wH=t=>`gridSelection/${t}`;function MH(t){return uF(qO((e=>e.calendar.calendars.find((e=>e.id===t))),[t]))}function SH(t){var e;const n=MH(null!=(e=null==t?void 0:t.calendarId)?e:null);return $O((()=>({color:null==n?void 0:n.color,borderColor:null==n?void 0:n.borderColor,backgroundColor:null==n?void 0:n.backgroundColor,dragBackgroundColor:null==n?void 0:n.dragBackgroundColor})),[n])}var CH=(t=>(t.ESCAPE="Escape",t))(CH||{});const kH={Escape:27};function IH(t,e){const n=cF(),i=YO(t),r=YO(e);WO((()=>{i.current=t,r.current=e}),[t,e]),WO((()=>n.subscribe((t=>r.current(t)),(t=>i.current(t)))),[t,n])}function DH(t,{onInit:e,onDragStart:n,onDrag:i,onMouseUp:r,onPressESCKey:a}={}){const{initDrag:o,setDragging:s,cancelDrag:l,reset:u}=dF("dnd"),c=YO(cF().getState().dnd);IH(yF,(t=>{c.current=t}));const[d,h]=GO(!1),p=YO(null),f=YO(null),g=YO(null),m=qO((n=>{0===n.button&&(n.currentTarget&&(n.currentTarget.ondragstart=function(){return!1}),n.preventDefault(),h(!0),o({draggingItemType:t,initX:n.clientX,initY:n.clientY}),null==e||e(n,c.current))}),[e,t,o]),v=qO((e=>{const{initX:r,initY:a,draggingState:o,draggingItemType:l}=c.current;if(l!==t)return h(!1),void u();if(!sR(r)||!sR(a)||function(t,e,n,i){return Math.abs(t-n)>=3||Math.abs(e-i)>=3}(r,a,e.clientX,e.clientY)){if(o<=AV.INIT)return s({x:e.clientX,y:e.clientY}),void(null==n||n(e,c.current));s({x:e.clientX,y:e.clientY}),null==i||i(e,c.current)}}),[t,i,n,s,u]),y=qO((t=>{t.stopPropagation(),d&&(null==r||r(t,c.current),h(!1),u())}),[d,r,u]),_=qO((t=>{(function(t,e){return t.key?t.key===e:t.keyCode===kH[e]})(t,CH.ESCAPE)&&(h(!1),l(),null==a||a(t,c.current))}),[a,l]);return WO((()=>{p.current=v,f.current=y,g.current=_}),[_,v,y]),WO((()=>{const t=t=>{var e;return null==(e=p.current)?void 0:e.call(p,t)},e=t=>{var e;return null==(e=f.current)?void 0:e.call(f,t)},n=t=>{var e;return null==(e=g.current)?void 0:e.call(g,t)};return d?(document.addEventListener("mousemove",t),document.addEventListener("mouseup",e),document.addEventListener("keydown",n),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e),document.removeEventListener("keydown",n)}):qV}),[d,u]),m}function TH(t,e){return t?e:void 0}function AH(t){return{vertical:t?5:2,horizontal:8}}function EH(t,e){const n=t?0:"2px",i=e?0:"2px";return`${n} ${i} ${i} ${n}`}function LH({model:t}){return`${t.calendarId?`${t.calendarId}-`:""}${t.id?`${t.id}-`:""}${t.title}`}const PH={eventBody:uR("weekday-event"),eventTitle:uR("weekday-event-title"),eventDot:uR("weekday-event-dot"),moveEvent:uR("dragging--move-event"),resizeEvent:uR("dragging--resize-horizontal-event")};function NH({flat:t=!1,uiModel:e,eventHeight:n,headerHeight:i,resizingWidth:r=null,movingLeft:a=null}){const{currentView:o}=uF(mF),{useDetailPopup:s,isReadOnly:l}=uF(vF),{setDraggingEventUIModel:u}=dF("dnd"),{showDetailPopup:c}=dF("popup"),d=yH(),h=SF(),p=SH(e.model),[f,g]=GO(!1),m=YO(null),{isReadOnly:v,id:y,calendarId:_}=e.model,x=!l&&!v&&oR(r)&&oR(a),b=t=>{u(e),null==d||d.classList.add(t)},w=t=>{g(!1),null==d||d.classList.remove(t)};IH(yF,(({draggingEventUIModel:t,draggingState:n})=>{n===AV.DRAGGING&&(null==t?void 0:t.cid())===e.cid()&&oR(r)&&oR(a)?g(!0):g(!1)})),WO((()=>{x&&h.fire("afterRenderEvent",e.model.toEventObject())}),[]);const M=DH(xH("dayGrid",`${e.cid()}`),{onDragStart:()=>b(PH.resizeEvent),onMouseUp:()=>w(PH.resizeEvent),onPressESCKey:()=>w(PH.resizeEvent)}),S=DH(bH("dayGrid",`${e.cid()}`),{onDragStart:()=>{x&&b(PH.moveEvent)},onMouseUp:(n,{draggingState:i})=>{w(PH.moveEvent);const r=i<=AV.INIT;r&&s&&m.current&&c({event:e.model,eventRect:m.current.getBoundingClientRect()},t),r&&h.fire("clickEvent",{event:e.model.toEventObject(),nativeEvent:n})},onPressESCKey:()=>w(PH.moveEvent)}),C=!f&&"month"===o&&"time"===e.model.category&&nV(e.model.start,e.model.end),k=!x||t||f||e.exceedRight,I=function({flat:t,uiModel:e,resizingWidth:n,movingLeft:i,eventHeight:r,headerHeight:a}){const{top:o,left:s,width:l,model:u}=e,c=AH(t),d=t?{}:{width:n||cR(l),left:cR(null!=i?i:s),top:(o-1)*(r+c.vertical)+a,position:"absolute"};return Object.assign(d,u.customStyle)}({uiModel:e,eventHeight:n,headerHeight:i,flat:t,movingLeft:a,resizingWidth:r}),D=function({uiModel:t,flat:e,eventHeight:n,isDraggingTarget:i,calendarColor:r}){const{exceedLeft:a,exceedRight:o}=t,{color:s,backgroundColor:l,dragBackgroundColor:u,borderColor:c}=pR(t,r),d={color:s,backgroundColor:i?u:l,borderLeft:a?"none":`3px solid ${c}`,borderRadius:EH(a,o),overflow:"hidden",height:n,lineHeight:dR(n),opacity:i?.5:1},h=AH(e);return KN(e?{marginTop:h.vertical}:{marginLeft:a?0:h.horizontal,marginRight:o?0:h.horizontal},d)}({uiModel:e,flat:t,eventHeight:n,isDraggingTarget:f,calendarColor:p});return oO("div",{className:uR("weekday-event-block",{"weekday-exceed-left":e.exceedLeft,"weekday-exceed-right":e.exceedRight}),style:I,"data-testid":TH(x,LH(e)),"data-calendar-id":_,"data-event-id":y,ref:m},oO("div",{className:PH.eventBody,style:QN(KN({},D),{backgroundColor:C?null:D.backgroundColor,borderLeft:C?null:D.borderLeft}),onMouseDown:t=>{t.stopPropagation(),S(t)}},C?oO("span",{className:PH.eventDot,style:{backgroundColor:D.backgroundColor}}):null,oO("span",{className:PH.eventTitle},oO(bF,{template:e.model.category,param:e.model})),k?null:oO(gH,{onMouseDown:t=>{t.stopPropagation(),x&&M(t)}})))}function OH(t,e){const n=YO(t);WO((()=>{n.current=t}),[t]),WO((()=>{e&&n.current()}),[e])}function zH(t){const[e,n]=GO(null);IH(yF,(e=>{if(sR(e.x)&&sR(e.y)){const i=t({clientX:e.x,clientY:e.y});i&&n(i)}}));return[e,qO((()=>n(null)),[])]}function RH(t,e){const[n,i]=GO(!1),[r,a]=GO(!1),[o,s]=GO(null);IH(yF,(({draggingItemType:n,draggingEventUIModel:r,draggingState:l})=>{const u=((t,e,n)=>{return oR(t)?null:(i=t,new RegExp(`^event/${e}/${n}/\\d+$`).test(i)?VR(t.split("/")):null);var i})(n,t,e),c=Number(u)===(null==r?void 0:r.cid()),d=l===AV.IDLE,h=l===AV.CANCELED;oR(o)&&c&&s(r),sR(o)&&(d||h)&&(i(!0),a(h))}));return{isDraggingEnd:n,isDraggingCanceled:r,draggingEvent:o,clearDraggingEvent:()=>{s(null),i(!1),a(!1)}}}function VH({rowStyleInfo:t,gridPositionFinder:e}){const{movingEvent:n,movingLeft:i}=function({rowStyleInfo:t,gridPositionFinder:e}){const n=SF(),{isDraggingEnd:i,isDraggingCanceled:r,draggingEvent:a,clearDraggingEvent:o}=RH("dayGrid","move"),s=YO(null),[l,u]=zH(e),{columnIndex:c}=null!=l?l:{},d=$O((()=>oR(a)?null:t.findIndex((({left:t})=>t===a.left))),[t,a]),h=$O((()=>{if(oR(c)||oR(s.current)||oR(d))return null;const e=d+c-s.current;return e<0?-t[-e].left:t[e].left}),[c,t,d]);return WO((()=>{oR(s.current)&&sR(c)&&(s.current=c)}),[c]),OH((()=>{if(!r&&sR(a)&&sR(c)&&sR(h)&&c!==s.current&&sR(s.current)){const t=c-s.current,e=new LR(a.model.getStarts()),i=new LR(a.model.getEnds());e.addDate(t),i.addDate(t),n.fire("beforeUpdateEvent",{event:a.model.toEventObject(),changes:{start:e,end:i}})}o(),u(),s.current=null}),i),$O((()=>({movingEvent:a,movingLeft:h})),[h,a])}({rowStyleInfo:t,gridPositionFinder:e});return oR(n)?null:oO(NH,{uiModel:n,eventHeight:22,headerHeight:0,movingLeft:i})}function FH({weekDates:t,gridColWidthMap:e,gridPositionFinder:n}){const i=SF(),{isDraggingEnd:r,isDraggingCanceled:a,draggingEvent:o,clearDraggingEvent:s}=RH("dayGrid","resize"),[l,u]=zH(n),{columnIndex:c}=null!=l?l:{},d=$O((()=>{return o?(n=t,{start:xB((e=o).getStarts(),n),end:xB(e.getEnds(),n)}):{start:-1,end:-1};var e,n}),[t,o]),h=$O((()=>d.start>-1&&sR(c)?e[d.start][c]:null),[c,e,d.start]);return OH((()=>{if(!a&&sR(o)&&sR(c)&&d.start<=c&&d.end!==c){const e=t[c];i.fire("beforeUpdateEvent",{event:o.model.toEventObject(),changes:{end:e}})}u(),s()}),r),$O((()=>({resizingEvent:o,resizingWidth:h})),[h,o])}function BH({weekDates:t,gridColWidthMap:e,gridPositionFinder:n}){const{resizingEvent:i,resizingWidth:r}=FH({weekDates:t,gridColWidthMap:e,gridPositionFinder:n});return oR(i)?null:oO(NH,{uiModel:i,eventHeight:22,headerHeight:0,resizingWidth:r})}function HH(){const[t,e]=GO(null);return[t,qO((t=>{t&&e(t)}),[])]}function GH(t,e){const[n,i]=GO(0),[r,a]=GO(!1),{updateDayGridRowHeight:o}=dF("weekViewLayout");return{clickedIndex:n,isClickedCount:r,onClickExceedCount:qO((n=>{a(!0),i(n),o({rowName:e,height:22*(t+1)})}),[e,t,o]),onClickCollapseButton:qO((()=>{a(!1),o({rowName:e,height:72})}),[e,o])}}function jH({onClick:t,onDblClick:e,delay:n=300}){const i=YO(qV),r=t=>{i.current=t},a=()=>{i.current()};WO((()=>a),[]);return[e=>{a(),function(t,e,n){let i;const r=a=>{if(i||(i=a),a-i>=e)return t(),void n(qV);const o=requestAnimationFrame(r);n((()=>cancelAnimationFrame(o)))},a=requestAnimationFrame(r);n((()=>cancelAnimationFrame(a)))}(t.bind(null,e),n,r)},t=>{a(),e(t)}]}const WH={dayGridMonth:"month",dayGridWeek:"allday",timeGrid:"time"};function UH({type:t,selectionSorter:e,dateGetter:n,dateCollection:i,gridPositionFinder:r}){const{useFormPopup:a,gridSelection:o}=uF(vF),{enableDblClick:s,enableClick:l}=o,{setGridSelection:u,addGridSelection:c,clearAll:d}=dF("gridSelection"),{hideAllPopup:h,showFormPopup:p}=dF("popup"),f=SF(),g=yH(),[m,v]=GO(null),[y,_]=GO(null),x=YO(!1),b=YO(null);IH(qO((e=>e.gridSelection[t]),[t]),(t=>{b.current=t})),IH(yF,(({draggingState:t,draggingItemType:e})=>{x.current=e===w&&t>=AV.INIT}));const w=wH(t),M=n=>{const i=r(n);sR(y)&&sR(i)&&u(t,e(y,i))},[S,C]=jH({onClick:t=>{l&&k(t,!0)},onDblClick:t=>{s&&k(t,!0)},delay:250}),k=(e,r)=>{var o;if(r&&M(e),sR(b.current)){const[r,s]=function(t,e){return t<e?[t,e]:[e,t]}(...n(i,b.current));if(a&&sR(m)){const n={top:(e.clientY+m.y)/2,left:(e.clientX+m.x)/2};p({isCreationPopup:!0,title:"",location:"",start:r,end:s,isAllday:"timeGrid"!==t,isPrivate:!1,popupArrowPointPosition:n,close:d})}const l=`.${uR(WH[t])}.${uR("grid-selection")}`,u=Array.from(null!=(o=null==g?void 0:g.querySelectorAll(l))?o:[]);f.fire("selectDateTime",{start:r.toDate(),end:s.toDate(),isAllday:"timeGrid"!==t,nativeEvent:e,gridSelectionElements:u})}},I=qO((()=>{v(null),_(null),u(t,null)}),[u,t]),D=DH(w,{onInit:e=>{a&&(v({x:e.clientX,y:e.clientY}),h());const n=r(e);sR(n)&&_(n),a||c(t,b.current)},onDragStart:t=>{M(t)},onDrag:t=>{x.current&&M(t)},onMouseUp:(t,{draggingState:e})=>{t.stopPropagation();const n=e<=AV.INIT;n?(t=>{const e=t.detail<=1;(l||s&&!e)&&(l?e?S(t):C(t):k(t,!0))})(t):k(t,n)},onPressESCKey:I});return WO((()=>I),[I]),D}function YH({events:t,weekDates:e,height:n=72,options:i={},rowStyleInfo:r,gridColWidthMap:a}){const{isReadOnly:o}=uF(vF),s=WF(PF),[l,u]=HH(),{narrowWeekend:c=!1,startDayOfWeek:d=HR.SUN}=i,h=$O((()=>Math.max(0,...t.map((({top:t})=>t)))),[t]),p=$O((()=>TB({container:l,rowsCount:1,columnsCount:e.length,narrowWeekend:c,startDayOfWeek:d})),[l,e.length,c,d]),{clickedIndex:f,isClickedCount:g,onClickExceedCount:m,onClickCollapseButton:v}=GH(h,"allday"),y=$O((()=>t.filter(mB(n,24)).map((t=>oO(NH,{key:`allday-DayEvent-${t.cid()}`,uiModel:t,eventHeight:22,headerHeight:0})))),[t,n]),_=UH({type:"dayGridWeek",gridPositionFinder:p,dateCollection:e,selectionSorter:OB.sortSelection,dateGetter:OB.getDateFromCollection});return oO(lO,null,oO("div",{className:uR("panel-title"),style:s},oO(bF,{template:"alldayTitle",param:"alldayTitle"})),oO("div",{className:uR("allday-panel"),ref:u,onMouseDown:t=>{const e=t.target;!o&&e.classList.contains(uR("panel-grid"))&&_(t)}},oO("div",{className:uR("panel-grid-wrapper")},oO(fH,{uiModels:t,weekDates:e,narrowWeekend:c,height:n,clickedIndex:f,isClickedCount:g,onClickExceedCount:m,onClickCollapseButton:v})),oO("div",{className:uR("panel-allday-events")},y),oO(BH,{weekDates:e,gridPositionFinder:p,gridColWidthMap:a}),oO(VH,{rowStyleInfo:r,gridPositionFinder:p}),oO(RB,{weekDates:e,narrowWeekend:c})))}function $H({events:t,weekDates:e,category:n,height:i=72,options:r={}}){const a=WF(PF),o=$O((()=>Math.max(0,...t.map((({top:t})=>t)))),[t]),{narrowWeekend:s=!1}=r,l=`${n}Title`,{clickedIndex:u,isClickedCount:c,onClickExceedCount:d,onClickCollapseButton:h}=GH(o,n),p=$O((()=>t.filter(mB(i,24)).map((t=>oO(NH,{key:`${n}-DayEvent-${t.cid()}`,uiModel:t,eventHeight:22,headerHeight:0})))),[n,t,i]);return oO(lO,null,oO("div",{className:uR("panel-title"),style:a},oO(bF,{template:l,param:n})),oO("div",{className:uR("allday-panel")},oO("div",{className:uR("panel-grid-wrapper")},oO(fH,{uiModels:t,weekDates:e,narrowWeekend:s,height:i,clickedIndex:u,isClickedCount:c,onClickExceedCount:d,onClickCollapseButton:h})),oO("div",{className:uR(`panel-${n}-events`)},p)))}const qH={detailItem:uR("detail-item"),detailItemIndent:uR("detail-item","detail-item-indent"),detailItemSeparate:uR("detail-item","detail-item-separate"),sectionDetail:uR("popup-section","section-detail"),content:uR("content"),locationIcon:uR("icon","ic-location-b"),repeatIcon:uR("icon","ic-repeat-b"),userIcon:uR("icon","ic-user-b"),stateIcon:uR("icon","ic-state-b"),calendarDotIcon:uR("icon","calendar-dot")};function XH({event:t}){var e,n;const{location:i,recurrenceRule:r,attendees:a,state:o,calendarId:s,body:l}=t,u=MH(s);return oO("div",{className:qH.sectionDetail},i&&oO("div",{className:qH.detailItem},oO("span",{className:qH.locationIcon}),oO("span",{className:qH.content},oO(bF,{template:"popupDetailLocation",param:t,as:"span"}))),r&&oO("div",{className:qH.detailItem},oO("span",{className:qH.repeatIcon}),oO("span",{className:qH.content},oO(bF,{template:"popupDetailRecurrenceRule",param:t,as:"span"}))),a&&oO("div",{className:qH.detailItemIndent},oO("span",{className:qH.userIcon}),oO("span",{className:qH.content},oO(bF,{template:"popupDetailAttendees",param:t,as:"span"}))),o&&oO("div",{className:qH.detailItem},oO("span",{className:qH.stateIcon}),oO("span",{className:qH.content},oO(bF,{template:"popupDetailState",param:t,as:"span"}))),u&&oO("div",{className:qH.detailItem},oO("span",{className:qH.calendarDotIcon,style:{backgroundColor:null!=(e=null==u?void 0:u.backgroundColor)?e:""}}),oO("span",{className:qH.content},null!=(n=null==u?void 0:u.name)?n:"")),l&&oO("div",{className:qH.detailItemSeparate},oO("span",{className:qH.content},oO(bF,{template:"popupDetailBody",param:t,as:"span"}))))}const ZH={sectionHeader:uR("popup-section","section-header"),content:uR("content"),eventTitle:uR("event-title")};function JH({event:t}){return oO("div",{className:ZH.sectionHeader},oO("div",{className:ZH.eventTitle},oO(bF,{template:"popupDetailTitle",param:t,as:"span"})),oO("div",{className:ZH.content},oO(bF,{template:"popupDetailDate",param:t,as:"span"})))}const KH=uR("see-more-popup-slot"),QH=uR("event-form-popup-slot"),tG=uR("event-detail-popup-slot"),eG=["isPrivate","isAllday","isPending","isFocused","isVisible","isReadOnly"];var nG=(t=>(t.right="right",t.left="left",t))(nG||{}),iG=(t=>(t.top="top",t.bottom="bottom",t))(iG||{});const rG=DO(null);function aG({children:t}){const[e,n]=HH(),[i,r]=HH(),[a,o]=HH(),[s,l]=HH(),u={container:e,seeMorePopupSlot:i,formPopupSlot:a,detailPopupSlot:s};return oO(rG.Provider,{value:u},t,oO("div",{ref:n,className:uR("floating-layer")},oO("div",{ref:r,className:KH}),oO("div",{ref:o,className:QH}),oO("div",{ref:l,className:tG})))}const oG=t=>{var e;const n=XO(rG);if(Kz(n))throw new Error("FloatingLayerProvider is not found");return null!=(e=null==n?void 0:n[t])?e:null};function sG(t,e,n){return t+n.height>e.top+e.height}function lG(t,e,n){return t+n.width>e.left+e.width}const uG=t=>t.popup[YV.Form],cG=t=>t.popup[YV.Detail],dG=t=>t.popup[YV.SeeMore],hG={popupContainer:uR("popup-container"),detailContainer:uR("detail-container"),topLine:uR("popup-top-line"),border:uR("popup-arrow-border"),fill:uR("popup-arrow-fill"),sectionButton:uR("popup-section","section-button"),content:uR("content"),editIcon:uR("icon","ic-edit"),deleteIcon:uR("icon","ic-delete"),editButton:uR("edit-button"),deleteButton:uR("delete-button"),verticalLine:uR("vertical-line")};function pG(){const{useFormPopup:t}=uF(vF),e=uF(cG),{event:n,eventRect:i}=null!=e?e:{},{showFormPopup:r,hideDetailPopup:a}=dF("popup"),o=SH(n),s=yH(),l=oG("detailPopupSlot"),u=SF(),c=YO(null),[d,h]=GO({}),[p,f]=GO(0),[g,m]=GO(nG.left),v=$O((()=>uR("popup-arrow",{right:g===nG.right,left:g===nG.left})),[g]);if(UO((()=>{if(c.current&&i&&s){const t=s.getBoundingClientRect(),e=c.current.getBoundingClientRect(),[n,r]=function(t,e,n){let i=t.top+t.height/2-n.height/2,r=t.left+t.width;return sG(i,e,n)&&(i=e.top+e.height-n.height),lG(r,e,n)&&(r=t.left-n.width),[Math.max(i,e.top)+window.scrollY,Math.max(r,e.left)+window.scrollX]}(i,t,e),{top:a,direction:o}=function(t,e,n){return{top:t.top+t.height/2+window.scrollY,direction:t.left+t.width+n.width>e.left+e.width?nG.right:nG.left}}(i,t,e);h({top:n,left:r}),f(a-n-8),m(o)}}),[i,s]),oR(n)||oR(i)||oR(l))return null;const{title:y="",isAllday:_=!1,start:x=new LR,end:b=new LR,location:w,state:M,isReadOnly:S,isPrivate:C}=n,k={top:i.top+i.height/2,left:i.left+i.width/2};return QB(oO("div",{role:"dialog",className:hG.popupContainer,ref:c,style:d},oO("div",{className:hG.detailContainer},oO(JH,{event:n}),oO(XH,{event:n}),!S&&oO("div",{className:hG.sectionButton},oO("button",{type:"button",className:hG.editButton,onClick:()=>{t?r({isCreationPopup:!1,event:n,title:y,location:w,start:x,end:b,isAllday:_,isPrivate:C,eventState:M,popupArrowPointPosition:k}):u.fire("beforeUpdateEvent",{event:n.toEventObject(),changes:{}})}},oO("span",{className:hG.editIcon}),oO("span",{className:hG.content},oO(bF,{template:"popupEdit",as:"span"}))),oO("div",{className:hG.verticalLine}),oO("button",{type:"button",className:hG.deleteButton,onClick:()=>{u.fire("beforeDeleteEvent",n.toEventObject()),a()}},oO("span",{className:hG.deleteIcon}),oO("span",{className:hG.content},oO(bF,{template:"popupDelete",as:"span"}))))),oO("div",{className:hG.topLine,style:{backgroundColor:o.backgroundColor}}),oO("div",{className:v},oO("div",{className:hG.border,style:{top:p}},oO("div",{className:hG.fill})))),l)}const fG={dropdownMenu:uR("dropdown-menu"),dropdownMenuItem:uR("dropdown-menu-item"),dotIcon:uR("icon","dot"),content:uR("content")};function gG({index:t,name:e,backgroundColor:n,onClick:i}){return oO("li",{className:fG.dropdownMenuItem,onClick:e=>i(e,t)},oO("span",{className:fG.dotIcon,style:{backgroundColor:n}}),oO("span",{className:fG.content},e))}function mG({calendars:t,setOpened:e,onChangeIndex:n}){const i=(t,i)=>{t.stopPropagation(),e(!1),n(i)};return oO("ul",{className:fG.dropdownMenu},t.map((({name:t,backgroundColor:e="000"},n)=>oO(gG,{key:`dropdown-${t}-${n}`,index:n,name:t,backgroundColor:e,onClick:i}))))}function vG({children:t,classNames:e=[],onClick:n=qV}){return oO("div",{className:uR("popup-section",...e),onClick:n},t)}function yG(){const[t,e]=GO(!1);return{isOpened:t,setOpened:e,toggleDropdown:()=>e((t=>!t))}}var _G=(t=>(t.init="init",t.setCalendarId="setCalendarId",t.setTitle="setTitle",t.setLocation="setLocation",t.setPrivate="setPrivate",t.setAllday="setAllday",t.setState="setState",t.reset="reset",t))(_G||{});const xG={title:"",location:"",isAllday:!1,isPrivate:!1,state:"Busy"};function bG(t,e){switch(e.type){case"init":return KN(KN({},xG),e.event);case"setCalendarId":return QN(KN({},t),{calendarId:e.calendarId});case"setTitle":return QN(KN({},t),{title:e.title});case"setLocation":return QN(KN({},t),{location:e.location});case"setPrivate":return QN(KN({},t),{isPrivate:e.isPrivate});case"setAllday":return QN(KN({},t),{isAllday:e.isAllday});case"setState":return QN(KN({},t),{state:e.state});case"reset":return KN(KN({},t),xG);default:return t}}const wG={popupSection:["dropdown-section","calendar-section"],popupSectionItem:uR("popup-section-item","popup-button"),dotIcon:uR("icon","dot"),content:uR("content","event-calendar")};function MG({calendars:t,selectedCalendarId:e,formStateDispatch:n}){const{isOpened:i,setOpened:r,toggleDropdown:a}=yG(),o=t.find((t=>t.id===e)),{backgroundColor:s="",name:l=""}=null!=o?o:{};return oO(vG,{onClick:a,classNames:wG.popupSection},oO("button",{type:"button",className:wG.popupSectionItem},oO("span",{className:wG.dotIcon,style:{backgroundColor:s}}),oO("span",{className:wG.content},l),oO("span",{className:uR("icon","ic-dropdown-arrow",{open:i})})),i&&oO(mG,{calendars:t,setOpened:r,onChangeIndex:e=>n({type:_G.setCalendarId,calendarId:t[e].id})}))}const SG={closeButton:uR("popup-button","popup-close"),closeIcon:uR("icon","ic-close")};function CG({type:t,close:e}){const{hideAllPopup:n}=dF("popup");return oO("button",{type:"button",className:SG.closeButton,onClick:()=>{n(),lR(e)&&e()}},"moreEvents"===t?oO(bF,{template:"monthMoreClose"}):oO("i",{className:SG.closeIcon}))}const kG={confirmButton:uR("popup-button","popup-confirm")};function IG({children:t}){return oO("button",{type:"submit",className:kG.confirmButton},oO("span",null,t))}function DG({template:t,model:e,defaultValue:n=""}){const i=uF(gF)[t];if(oR(i))return n;let r=i(e);return aR(r)||(r=n),r}const TG={datePickerContainer:uR("datepicker-container"),datePicker:uR("popup-section-item","popup-date-picker"),allday:uR("popup-section-item","popup-section-allday"),dateIcon:uR("icon","ic-date"),dateDash:uR("popup-date-dash"),content:uR("content")},AG=WB((function({start:t,end:e,isAllday:n=!1,formStateDispatch:i},r){const{usageStatistics:a}=uF(vF),o=YO(null),s=YO(null),l=YO(null),u=YO(null),c=DG({template:"startDatePlaceholder",defaultValue:"Start Date"}),d=DG({template:"endDatePlaceholder",defaultValue:"End Date"});return WO((()=>{if(o.current&&s.current&&l.current&&u.current){const i=new LR(t),c=new LR(e);n&&(i.setHours(12,0,0),c.setHours(13,0,0)),r.current=WN.createRangePicker({startpicker:{date:i.toDate(),input:s.current,container:o.current},endpicker:{date:c.toDate(),input:u.current,container:l.current},format:n?"yyyy-MM-dd":"yyyy-MM-dd HH:mm",timePicker:!n&&{showMeridiem:!1,usageStatistics:a},usageStatistics:a})}}),[t,e,n,a,r]),oO(vG,null,oO("div",{className:TG.datePicker},oO("span",{className:TG.dateIcon}),oO("input",{name:"start",className:TG.content,placeholder:c,ref:s}),oO("div",{className:TG.datePickerContainer,ref:o})),oO("span",{className:TG.dateDash},"-"),oO("div",{className:TG.datePicker},oO("span",{className:TG.dateIcon}),oO("input",{name:"end",className:TG.content,placeholder:d,ref:u}),oO("div",{className:TG.datePickerContainer,ref:l})),oO("div",{className:TG.allday,onClick:()=>i({type:_G.setAllday,isAllday:!n})},oO("span",{className:uR("icon",{"ic-checkbox-normal":!n,"ic-checkbox-checked":n})}),oO("span",{className:TG.content},oO(bF,{template:"popupIsAllday"})),oO("input",{name:"isAllday",type:"checkbox",className:uR("hidden-input"),value:n?"true":"false",checked:n})))})),EG=["Busy","Free"],LG={popupSectionItem:uR("popup-section-item","dropdown-menu-item"),dropdownMenu:uR("dropdown-menu"),icon:uR("icon"),content:uR("content")};function PG({setOpened:t,setEventState:e}){return oO("ul",{className:LG.dropdownMenu},EG.map((n=>oO("li",{key:n,className:LG.popupSectionItem,onClick:i=>((n,i)=>{n.stopPropagation(),t(!1),e(i)})(i,n)},oO("span",{className:LG.icon}),oO("span",{className:LG.content},oO(bF,"Busy"===n?{template:"popupStateBusy"}:{template:"popupStateFree"}))))))}const NG={popupSection:["dropdown-section","state-section"],popupSectionItem:uR("popup-section-item","popup-button"),stateIcon:uR("icon","ic-state"),arrowIcon:uR("icon","ic-dropdown-arrow"),content:uR("content","event-state")};function OG({eventState:t="Busy",formStateDispatch:e}){const{isOpened:n,setOpened:i,toggleDropdown:r}=yG();return oO(vG,{onClick:r,classNames:NG.popupSection},oO("button",{type:"button",className:NG.popupSectionItem},oO("span",{className:NG.stateIcon}),oO("span",{className:NG.content},oO(bF,"Busy"===t?{template:"popupStateBusy"}:{template:"popupStateFree"})),oO("span",{className:NG.arrowIcon})),n&&oO(PG,{setOpened:i,setEventState:t=>e({type:_G.setState,state:t})}))}const zG={popupSectionItem:uR("popup-section-item","popup-section-location"),locationIcon:uR("icon","ic-location"),content:uR("content")};function RG({location:t,formStateDispatch:e}){const n=DG({template:"locationPlaceholder",defaultValue:"Location"});return oO(vG,null,oO("div",{className:zG.popupSectionItem},oO("span",{className:zG.locationIcon}),oO("input",{name:"location",className:zG.content,placeholder:n,value:t,onChange:t=>{e({type:_G.setLocation,location:t.currentTarget.value})}})))}const VG={popupSectionItem:uR("popup-section-item","popup-section-title"),privateButton:uR("popup-section-item","popup-section-private","popup-button"),titleIcon:uR("icon","ic-title"),content:uR("content")};function FG({title:t,isPrivate:e=!1,formStateDispatch:n}){const i=DG({template:"titlePlaceholder",defaultValue:"Subject"});return oO(vG,null,oO("div",{className:VG.popupSectionItem},oO("span",{className:VG.titleIcon}),oO("input",{name:"title",className:VG.content,placeholder:i,value:t,onChange:t=>{n({type:_G.setTitle,title:t.currentTarget.value})},required:!0})),oO("button",{type:"button",className:VG.privateButton,onClick:()=>n({type:_G.setPrivate,isPrivate:!e})},oO("span",{className:uR("icon",{"ic-private":e,"ic-public":!e})}),oO("input",{name:"isPrivate",type:"checkbox",className:uR("hidden-input"),value:e?"true":"false",checked:e})))}const BG={popupContainer:uR("popup-container"),formContainer:uR("form-container"),popupArrowBorder:uR("popup-arrow-border"),popupArrowFill:uR("popup-arrow-fill")};function HG(){var t;const{calendars:e}=uF(pF),{hideAllPopup:n}=dF("popup"),i=uF(uG),{start:r,end:a,popupArrowPointPosition:o,close:s,isCreationPopup:l,event:u}=null!=i?i:{},c=SF(),d=oG("formPopupSlot"),[h,p]=(f=null==(t=e[0])?void 0:t.id,jO(bG,KN({calendarId:f},xG)));var f;const g=YO(null),m=YO(null),[v,y]=GO({}),[_,x]=GO(0),[b,w]=GO(iG.bottom),M=yH(),S=$O((()=>uR("popup-arrow",{top:b===iG.top,bottom:b===iG.bottom})),[b]);if(UO((()=>{if(m.current&&o&&M){const t=M.getBoundingClientRect(),e=m.current.getBoundingClientRect(),{top:n,left:i,direction:r}=function(t,e,n){let i=t.top-n.height-8,r=t.left-n.width/2,a=iG.bottom;return i<e.top&&(a=iG.top,i=t.top+8),sG(i,e,n)&&(i=e.top+e.height-n.height),lG(r,e,n)&&(r=e.left+e.width-n.width),{top:i+window.scrollY,left:Math.max(r,e.left)+window.scrollX,direction:a}}(o,t,e),a=o.left-i;y({left:i,top:n}),x(a),w(r)}}),[M,o]),WO((()=>{sR(i)&&sR(u)&&p({type:_G.init,event:{title:i.title,location:i.location,isAllday:i.isAllday,isPrivate:i.isPrivate,calendarId:u.calendarId,state:i.eventState}})}),[e,u,p,i]),WO((()=>{oR(i)&&p({type:_G.reset})}),[p,i]),oR(r)||oR(a)||oR(d))return null;return QB(oO("div",{role:"dialog",className:BG.popupContainer,ref:m,style:v},oO("form",{onSubmit:t=>{var e,i;t.preventDefault();const r=new FormData(t.target),a=KN({},h);if(r.forEach(((t,e)=>{a[e]=function(t){return-1!==eG.indexOf(t)}(e)?"true"===t:t})),a.start=new LR(null==(e=g.current)?void 0:e.getStartDate()),a.end=new LR(null==(i=g.current)?void 0:i.getEndDate()),l)c.fire("beforeCreateEvent",a);else if(u){const t=function(t,e){return Object.entries(e).reduce(((e,[n,i])=>{const r=n;return t[r]instanceof LR?0!==eV(t[r],i)&&(e[r]=i):t[r]!==i&&(e[r]=i),e}),{})}(u,a);c.fire("beforeUpdateEvent",{event:u.toEventObject(),changes:t})}n()}},oO("div",{className:BG.formContainer},(null==e?void 0:e.length)?oO(MG,{selectedCalendarId:h.calendarId,calendars:e,formStateDispatch:p}):oO(vG,null),oO(FG,{title:h.title,isPrivate:h.isPrivate,formStateDispatch:p}),oO(RG,{location:h.location,formStateDispatch:p}),oO(AG,{start:r,end:a,isAllday:h.isAllday,formStateDispatch:p,ref:g}),oO(OG,{eventState:h.state,formStateDispatch:p}),oO(CG,{type:"form",close:s}),oO(vG,null,oO(IG,null,oO(bF,l?{template:"popupSave"}:{template:"popupUpdate"})))),oO("div",{className:S},oO("div",{className:BG.popupArrowBorder,style:{left:_}},oO("div",{className:BG.popupArrowFill}))))),d)}function GG(t){return Object.values(t.popup).find((t=>sR(t)))}function jG(){const t=uF(GG),{hideAllPopup:e}=dF("popup"),n=sR(t);return oO("div",{className:uR("popup-overlay"),style:{display:n?"block":"none"},onClick:n=>{var i;n.stopPropagation(),null==(i=null==t?void 0:t.close)||i.call(t),e()}})}const WG={container:uR("see-more-container"),seeMore:uR("see-more"),header:uR("see-more-header"),list:uR("month-more-list")};function UG(){const t=uF(dG),{date:e,events:n=[],popupPosition:i}=null!=t?t:{},{moreView:r,moreViewTitle:a}=UF(),o=oG("seeMorePopupSlot"),s=SF(),l=YO(null),u=oR(e)||oR(i)||oR(o);if(WO((()=>{!u&&l.current&&s.fire("clickMoreEventsBtn",{date:e.toDate(),target:l.current})}),[e,s,u]),u)return null;const c={height:44,marginBottom:12,padding:"12px 17px 0",backgroundColor:a.backgroundColor},d={ymd:ZR(e,"YYYY-MM-DD"),day:e.getDay(),date:e.getDate().toString().padStart(2,"0")},h={height:"calc(100% - 68px)"};return QB(oO("div",{role:"dialog",className:WG.container,style:i,ref:l},oO("div",{className:WG.seeMore,style:r},oO("div",{className:WG.header,style:c},oO(bF,{template:"monthMoreTitleDate",param:d}),oO(CG,{type:"moreEvents"})),oO("div",{className:WG.list,style:h},n.map((t=>oO(NH,{key:`see-more-event-item-${t.cid()}`,uiModel:t,eventHeight:24,headerHeight:44,flat:!0})))))),o)}function YG(t,e){const n={height:cR(100)};return t&&(n.width=t),e&&(n.height=e),n}function $G({children:t,width:e,height:n,className:i="",autoAdjustPanels:r=!1}){const{backgroundColor:a}=WF(EF),[o,s]=HH(),{setLastPanelType:l,updateLayoutHeight:u}=dF("weekViewLayout"),c=$O((()=>`${uR("layout")} ${i}`),[i]);return UO((()=>{if(o){const t=()=>u(o.offsetHeight);return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}return qV}),[o,u]),UO((()=>{if(o&&r){const e=mO(t),n=e[e.length-1];aR(n)||iR(n)||oR(n)||l(n.props.name)}}),[t,l,r,o]),oO(vH,{value:o},oO("div",{ref:s,className:c,style:QN(KN({},YG(e,n)),{backgroundColor:a})},o?t:null),oO(HG,null),oO(pG,null),oO(UG,null),oO(jG,null))}function qG({name:t,height:e}){const n=function(t,e){return{height:t,width:"100%",cursor:"row-resize",borderTop:e,borderBottom:e}}(e,WF(qO((t=>t.week.panelResizer.border),[]))),i=QN(KN({},n),{display:"none",border:"none",backgroundColor:"#999"}),[r,a]=GO(i),o=YO(null),{updateDayGridRowHeightByDiff:s}=dF("weekViewLayout"),l=DH(_H,{onDragStart:t=>{o.current={left:t.pageX,top:t.pageY}},onDrag:t=>{if(o.current){const e=t.pageY-o.current.top;a((t=>QN(KN({},t),{top:e,display:null})))}},onMouseUp:e=>{if(o.current){const n=e.pageY-o.current.top;o.current=null,a(i),s({rowName:t,diff:n})}}});return oO("div",{style:{position:"relative"}},oO("div",{className:uR("panel-resizer"),style:n,onMouseDown:l}),oO("div",{className:uR("panel-resizer-guide"),style:r}))}function XG(t,e){return e?Math.min(e,t):t}const ZG=WB((function({name:t,initialWidth:e=72,initialHeight:n=72,overflowX:i,overflowY:r,maxExpandableWidth:a,maxExpandableHeight:o,minHeight:s,maxHeight:l,minWidth:u,maxWidth:c,resizerWidth:d=3,resizerHeight:h=3,resizable:p,children:f},g){const{updateDayGridRowHeight:m}=dF("weekViewLayout"),{height:v}=uF(qO((e=>{var n;return null!=(n=e.weekViewLayout.dayGridRows[t])?n:{}}),[t])),y=null!=v?v:n;UO((()=>{m({rowName:t,height:n})}),[n,t,m]);const _=function({initialHeight:t,initialWidth:e,overflowX:n,overflowY:i,maxExpandableWidth:r,maxExpandableHeight:a,minHeight:o,maxHeight:s,minWidth:l,maxWidth:u}){const c={};return e&&(c.width=XG(e,r),c.height="100%"),t&&(c.width="100%",c.height=XG(t,a)),n&&(c.overflowX="auto"),i&&(c.overflowY="auto"),QN(KN({},c),{minHeight:o,maxHeight:s,minWidth:l,maxWidth:u})}({initialWidth:e,initialHeight:y,overflowX:i,overflowY:r,maxExpandableWidth:a,maxExpandableHeight:o,minHeight:s,maxHeight:l,minWidth:u,maxWidth:c}),x=$O((()=>oR(p)||nR(p)?!!p:p.includes(t)),[p,t]);return oO(lO,null,oO("div",{className:uR("panel",t),style:_,ref:g},f),x?oO(qG,{name:t,width:d,height:h}):null)})),JG=t=>`timegrid-${t}`,KG={second:"HH:mm:ss",minute:"HH:mm",hour:"HH:mm",date:"HH:mm",month:"MM.DD",year:"YYYY.MM.DD"},QG={time:uR("event-time"),content:uR("event-time-content"),travelTime:uR("travel-time"),resizeHandleX:uR("resize-handler-x"),moveEvent:uR("dragging--move-event"),resizeEvent:uR("dragging--resize-vertical-event")};function tj(t,e){return aR(t)?t:t>=0?`calc(${cR(t)} - ${e}px)`:""}function ej({uiModel:t,isDraggingTarget:e,hasNextStartTime:n,calendarColor:i,minHeight:r}){const{top:a,left:o,height:s,width:l,duplicateLeft:u,duplicateWidth:c,goingDurationHeight:d,modelDurationHeight:h,comingDurationHeight:p,croppedStart:f,croppedEnd:g}=t,m=function(t){const{percent:e,px:n}=hR(`${t}`);return t>0||e>0||n>0?2:0}(o),{color:v,backgroundColor:y,borderColor:_,dragBackgroundColor:x}=pR(t,i),b={width:tj(c||l,m),height:`calc(${cR(Math.max(s,r))} - 2px)`,top:cR(a),left:u||cR(o),borderRadius:2,borderLeft:`3px solid ${_}`,marginLeft:m,color:v,backgroundColor:e?x:y,opacity:e?.5:1,zIndex:n?1:0},w={height:cR(d),borderBottom:"1px dashed white"},M={height:cR(h)},S={height:cR(p),borderTop:"1px dashed white"};return f&&(b.borderTopLeftRadius=0,b.borderTopRightRadius=0),g&&(b.borderBottomLeftRadius=0,b.borderBottomRightRadius=0),{containerStyle:b,goingDurationStyle:w,modelDurationStyle:M,comingDurationStyle:S}}function nj({uiModel:t,nextStartTime:e,isResizingGuide:n=!1,minHeight:i=0}){const{useDetailPopup:r,isReadOnly:a,week:o}=uF(vF),s=SH(t.model),{collapseDuplicateEvents:l}=o,u=yH(),{showDetailPopup:c}=dF("popup"),{setDraggingEventUIModel:d}=dF("dnd"),{setSelectedDuplicateEventCid:h}=dF("weekViewLayout"),p=SF(),f=YO(null),[g,m]=GO(!1),{model:v,goingDurationHeight:y,modelDurationHeight:_,comingDurationHeight:x,croppedEnd:b}=t,{id:w,calendarId:M,customStyle:S}=v,C=sR(e),{containerStyle:k,goingDurationStyle:I,modelDurationStyle:D,comingDurationStyle:T}=ej({uiModel:t,isDraggingTarget:g,hasNextStartTime:C,calendarColor:s,minHeight:i}),A=C||n;IH(yF,(({draggingEventUIModel:e,draggingState:i})=>{i!==AV.DRAGGING||(null==e?void 0:e.cid())!==t.cid()||C||n?m(!1):m(!0)})),WO((()=>{n||p.fire("afterRenderEvent",t.model.toEventObject())}),[]);const E=e=>{d(t),null==u||u.classList.add(e)},L=t=>{m(!1),null==u||u.classList.remove(t)},P=DH(bH("timeGrid",`${t.cid()}`),{onDragStart:()=>{O&&E(QG.moveEvent)},onMouseUp:(e,{draggingState:n})=>{L(QG.moveEvent);const i=n<=AV.INIT;if(i&&l){const e=t.duplicateEvents.length>0?t.cid():-1;h(e)}i&&r&&f.current&&c({event:t.model,eventRect:f.current.getBoundingClientRect()},!1),i&&p.fire("clickEvent",{event:t.model.toEventObject(),nativeEvent:e})},onPressESCKey:()=>L(QG.moveEvent)}),N=DH(xH("timeGrid",`${t.cid()}`),{onDragStart:()=>E(QG.resizeEvent),onMouseUp:()=>L(QG.resizeEvent),onPressESCKey:()=>L(QG.resizeEvent)}),O=function({uiModel:t,isReadOnlyCalendar:e,isDraggingTarget:n,hasNextStartTime:i}){const{model:r}=t;return!(e||r.isReadOnly||n||i)}({uiModel:t,isReadOnlyCalendar:a,isDraggingTarget:g,hasNextStartTime:C}),z=O&&!b;return oO("div",{"data-testid":`${A?"guide-":""}time-event-${v.title}-${t.cid()}`,"data-calendar-id":M,"data-event-id":w,className:QG.time,style:KN(KN({},k),S),onMouseDown:t=>{t.stopPropagation(),P(t)},ref:f},y?oO("div",{className:QG.travelTime,style:I},oO(bF,{template:"goingDuration",param:v})):null,_?oO("div",{className:QG.content,style:D},oO(bF,{template:"time",param:QN(KN({},v.toEventObject()),{start:C?e:v.start})})):null,x?oO("div",{className:QG.travelTime,style:T},oO(bF,{template:"comingDuration",param:v})):null,z?oO("div",{className:QG.resizeHandleX,onMouseDown:t=>{t.stopPropagation(),N(t)}}):null)}function ij({top:t,height:e,text:n}){const{backgroundColor:i,border:r}=WF(qO((t=>t.common.gridSelection),[])),a=WF(qO((t=>t.week.gridSelection.color),[])),o={top:cR(t),height:cR(e),backgroundColor:i,border:r};return oO("div",{className:uR("time","grid-selection"),style:o,"data-testid":`time-grid-selection-${t}-${e}`},n.length>0?oO("span",{className:uR("grid-selection-label"),style:{color:a}},n):null)}function rj({columnIndex:t,timeGridRows:e}){const n=uF(qO((n=>PB.calculateSelection(n.gridSelection.timeGrid,t,e.length-1)),[t,e])),i=$O((()=>{if(!n)return null;const{startRowIndex:t,endRowIndex:i,isStartingColumn:r,isSelectingMultipleColumns:a}=n,{top:o,startTime:s}=e[t],{top:l,height:u,endTime:c}=e[i];let d=`${s} - ${c}`;return a&&(d=r?s:""),{top:o,height:l+u-o,text:d}}),[n,e]);return oR(i)?null:oO(ij,KN({},i))}function aj({gridPositionFinder:t,totalUIModels:e,columnIndex:n,timeGridData:i}){const r=function({gridPositionFinder:t,totalUIModels:e,columnIndex:n,timeGridData:i}){const r=SF(),{isDraggingEnd:a,isDraggingCanceled:o,draggingEvent:s,clearDraggingEvent:l}=RH("timeGrid","resize"),[u,c]=zH(t),[d,h]=GO(null),p=qO((()=>{h(null),l(),c()}),[c,l]),f=$O((()=>{if(oR(s))return null;const{columns:t,rows:n}=i,r=e.map((t=>t.filter((t=>t.cid()===s.cid())))),a=(e,n)=>r=>{const a=fV(t[n].date,r.startTime),o=fV(i.columns[n].date,r.endTime);return a<=e&&e<o},o=r.findIndex((t=>t.length>0)),l=r[o][0],{goingDuration:u=0}=l.model,c=pV(l.getStarts(),-u),d=Math.max(n.findIndex(a(c,o)),0),h=FR(r,(t=>t.length>0)),p=r[h][0],{comingDuration:f=0}=p.model,g=pV(p.getStarts(),f);let m=n.findIndex(a(g,h));return m=m>=0?m:n.length-1,{eventStartDateColumnIndex:o,eventStartDateRowIndex:d,eventEndDateColumnIndex:h,eventEndDateRowIndex:m,resizeTargetUIModelColumns:r}}),[s,i,e]),g=sR(f)&&sR(s)&&sR(u),m=$O((()=>f?i.rows[0].height:0),[f,i.rows]);return WO((()=>{if(g){const{eventStartDateRowIndex:t,eventStartDateColumnIndex:e,eventEndDateColumnIndex:r}=f;if(n===r&&e===r){const e=s.clone(),{height:n,goingDurationHeight:r,comingDurationHeight:a}=e,o=Math.max(m+r*n/100+a*n/100,i.rows[u.rowIndex].top-i.rows[t].top+m),l=r*n/o,c=a*n/o;e.setUIProps({height:o,goingDurationHeight:l,comingDurationHeight:c,modelDurationHeight:100-(l+c)}),h(e)}}}),[f,g,n,u,s,i.rows,m]),WO((()=>{if(g){const{resizeTargetUIModelColumns:t,eventStartDateColumnIndex:e,eventEndDateColumnIndex:r}=f;if((n===e||n===r)&&e!==r){let r;n===e?r=t[n][0].clone():(r=s.clone(),r.setUIProps({height:i.rows[u.rowIndex].top+m})),h(r)}}}),[f,g,n,u,s,i.rows,m]),OH((()=>{if(!o&&sR(f)&&sR(u)&&sR(s)&&f.eventEndDateColumnIndex===n){const{comingDuration:t=0}=s.model,e=pV(fV(i.columns[n].date,i.rows[u.rowIndex].endTime),-t),a=pV(s.getStarts(),30);r.fire("beforeUpdateEvent",{event:s.model.toEventObject(),changes:{end:iV(a,e)}})}p()}),a),d}({gridPositionFinder:t,totalUIModels:e,columnIndex:n,timeGridData:i});return oR(r)?null:oO(nj,{uiModel:r,isResizingGuide:!0})}const oj={column:uR("column"),backgrounds:uR("background-events"),events:uR("events")};function sj({eventUIModels:t,minEventHeight:e}){return oO("div",{className:oj.events,style:{marginRight:8}},t.map((t=>oO(nj,{key:`${t.valueOf()}-${t.cid()}`,uiModel:t,minHeight:e}))))}function lj(t){return{defaultBackgroundColor:t.week.dayGrid.backgroundColor,todayBackgroundColor:t.week.today.backgroundColor,weekendBackgroundColor:t.week.weekend.backgroundColor}}const uj=HB((function({columnDate:t,columnWidth:e,columnIndex:n,totalUIModels:i,gridPositionFinder:r,timeGridData:a,isLastColumn:o}){const{rows:s}=a,l=WF(qO((t=>t.week.timeGrid.borderRight),[])),u=WF(lj),[,c]=TF(),d=c(),h=function({today:t,columnDate:e,defaultBackgroundColor:n,todayBackgroundColor:i,weekendBackgroundColor:r}){const a=nV(t,e),o=sV(e.getDay());return a?i:o?r:n}(KN({today:d,columnDate:t},u)),p={width:e,backgroundColor:h,borderRight:o?"none":l},f=i[n],g=s[0].height;return oO("div",{className:oj.column,style:p,"data-testid":`timegrid-column-${t.getDay()}`},oO(sj,{eventUIModels:f,minEventHeight:g}),oO(aj,{gridPositionFinder:r,totalUIModels:i,columnIndex:n,timeGridData:a}),oO(rj,{columnIndex:n,timeGridRows:s}))}));function cj(t){return{halfHourLineBorder:t.week.timeGridHalfHourLine.borderBottom,hourLineBorder:t.week.timeGridHourLine.borderBottom}}const dj=HB((function({timeGridRows:t}){const{halfHourLineBorder:e,hourLineBorder:n}=WF(cj);return oO("div",{className:uR("gridlines")},t.map(((t,i)=>{const r=i%2==0;return oO("div",{key:`gridline-${t.startTime}-${t.endTime}`,className:uR("gridline-half"),style:{top:cR(t.top),height:cR(t.height),borderBottom:r?e:n},"data-testid":`gridline-${t.startTime}-${t.endTime}`})})))}));function hj(t,e){const n=t.getHours()-e,i=t.getMinutes();return 2*n+Math.floor(i/30)}const pj=t=>t.dnd.initX,fj=t=>t.dnd.initY;function gj({gridPositionFinder:t,timeGridData:e}){const n=uF(pj),i=uF(fj),r=SF(),{isDraggingEnd:a,isDraggingCanceled:o,draggingEvent:s,clearDraggingEvent:l}=RH("timeGrid","move"),[u,c]=zH(t),d=YO(null);WO((()=>{sR(n)&&sR(i)&&(d.current=t({clientX:n,clientY:i}))}),[t,n,i]);const h=$O((()=>oR(d.current)||oR(u)?null:{columnDiff:u.columnIndex-d.current.columnIndex,rowDiff:u.rowIndex-d.current.rowIndex}),[u]),p=$O((()=>oR(s)?null:s.getStarts()),[s]),f=qO((()=>{c(),l(),d.current=null}),[c,l]),g=$O((()=>oR(h)||oR(p)?null:hV(p,18e5*h.rowDiff+864e5*h.columnDiff)),[h,p]),m=$O((()=>{if(oR(s)||oR(u)||oR(h))return null;const t=s.clone(),{top:n,height:i}=function({draggingEvent:t,columnDiff:e,rowDiff:n,timeGridDataRows:i,currentDate:r}){const a=i[0].height,o=a*i.length,s=18e5*n+864e5*e,l=Number(i[0].startTime.split(":")[0]),{goingDuration:u=0,comingDuration:c=0}=t.model,d=pV(t.getStarts(),-u),h=pV(t.getEnds(),c),p=hV(d,s),f=hV(h,s),g=Math.max(hj(p,l),0),m=Math.min(hj(f,l),i.length-1),v=p.getFullYear()<r.getFullYear()||p.getMonth()<r.getMonth()||p.getDate()<r.getDate(),y=f.getFullYear()>r.getFullYear()||f.getMonth()>r.getMonth()||f.getDate()>r.getDate(),_=m-(v?0:g);return{top:v?0:i[g].top,height:y?o:Math.max(_,1)*a}}({draggingEvent:t,columnDiff:h.columnDiff,rowDiff:h.rowDiff,timeGridDataRows:e.rows,currentDate:e.columns[u.columnIndex].date});return t.setUIProps({left:e.columns[u.columnIndex].left,width:e.columns[u.columnIndex].width,top:n,height:i}),t}),[u,s,h,e.columns,e.rows]);return OH((()=>{if(!o&&sR(s)&&sR(u)&&sR(h)&&sR(g)&&(0!==h.rowDiff||0!==h.columnDiff)){const t=s.duration(),e=hV(g,t);r.fire("beforeUpdateEvent",{event:s.model.toEventObject(),changes:{start:g,end:e}})}f()}),a),{movingEvent:m,nextStartTime:g}}function mj({gridPositionFinder:t,timeGridData:e}){const{movingEvent:n,nextStartTime:i}=gj({gridPositionFinder:t,timeGridData:e});return oR(n)?null:oO(nj,{uiModel:n,nextStartTime:i})}const vj="timegrid-now-indicator",yj="timegrid-now-indicator-label",_j={line:uR(JG("now-indicator")),left:uR(JG("now-indicator-left")),marker:uR(JG("now-indicator-marker")),today:uR(JG("now-indicator-today")),right:uR(JG("now-indicator-right"))};function xj(t){return{pastBorder:t.week.nowIndicatorPast.border,todayBorder:t.week.nowIndicatorToday.border,futureBorder:t.week.nowIndicatorFuture.border,bulletBackgroundColor:t.week.nowIndicatorBullet.backgroundColor}}function bj({top:t,columnWidth:e,columnCount:n,columnIndex:i}){const{pastBorder:r,todayBorder:a,futureBorder:o,bulletBackgroundColor:s}=WF(xj),l=yH(),u=SF(),c=YO(null),d={left:cR(e*i),width:cR(e*i)},h={left:cR(e*(i+1)),width:cR(e*(n-i+1))};return WO((()=>{const t=t=>{var e;const n=null!=(e=null==l?void 0:l.querySelector(`.${uR("panel")}.${uR("time")}`))?e:null;if(n&&c.current){const{offsetHeight:e}=n,{offsetTop:i}=c.current,r=i-e/2;n.scrollTo?n.scrollTo({top:r,behavior:t}):n.scrollTop=r}};return u.on("scrollToNow",t),()=>u.off("scrollToNow",t)}),[u,l]),WO((()=>{u.fire("scrollToNow","smooth")}),[u]),oO("div",{ref:c,className:_j.line,style:{top:cR(t)},"data-testid":vj},oO("div",{className:_j.left,style:{width:d.width,borderTop:r}}),oO("div",{className:_j.marker,style:{left:d.left,backgroundColor:s}}),oO("div",{className:_j.today,style:{left:d.left,width:cR(e),borderTop:a}}),oO("div",{className:_j.right,style:{left:h.left,borderTop:o}}))}const wj={now:JG("current-time"),dayDifference:JG("day-difference")};function Mj({unit:t,top:e,now:n,zonedNow:i}){const r=WF(qO((t=>t.week.nowIndicatorLabel.color),[])),a=$O((()=>mV(i,n)),[i,n]),o={unit:t,time:i,format:KG[t]};return oO("div",{className:uR(wj.now),style:{top:cR(e),color:r},"data-testid":yj},0!==a&&oO("span",{className:uR(wj.dayDifference)},`[${a>0?"+":"-"}${Math.abs(a)}]`),oO(bF,{template:"timegridNowIndicatorLabel",param:o,as:"span"}))}const Sj=t=>{var e;return null!=(e=t.options.month.visibleEventCount)?e:6},Cj=t=>t.options.week.showNowIndicator,kj=t=>{var e;return null!=(e=t.options.week.showTimezoneCollapseButton)&&e},Ij=t=>{var e;return null!=(e=t.options.week.timezonesCollapsed)&&e},Dj={timeColumn:JG("time-column"),hourRows:JG("hour-rows"),time:JG("time"),timeLabel:JG("time-label"),first:JG("time-first"),last:JG("time-last"),hidden:JG("time-hidden")};function Tj(t){return{primaryTimezoneBackgroundColor:t.week.timeGridLeft.backgroundColor,subTimezoneBackgroundColor:t.week.timeGridLeftAdditionalTimezone.backgroundColor}}function Aj(t){return{pastTimeColor:t.week.pastTime.color,futureTimeColor:t.week.futureTime.color}}function Ej({rowsInfo:t,isPrimary:e,borderRight:n,width:i,nowIndicatorState:r}){var a;const o=uF(Cj),{primaryTimezoneBackgroundColor:s,subTimezoneBackgroundColor:l}=WF(Tj),{pastTimeColor:u,futureTimeColor:c}=WF(Aj),d=sR(r)?pV(r.now,null!=(a=t[0].diffFromPrimaryTimezone)?a:0):null,h=e?s:l;return oO("div",{role:"rowgroup",className:uR(Dj.hourRows),style:{width:cR(i),borderRight:n,backgroundColor:h}},t.map((({date:t,top:n,className:i})=>{const r=sR(d)&&t<d?u:c;return oO("div",{key:t.getTime(),className:i,style:{top:cR(n),color:r},role:"row"},oO(bF,{template:`timegridDisplay${e?"Primary":""}Time`,param:{time:t},as:"span"}))})),o&&sR(r)&&sR(d)&&oO(Mj,{unit:"hour",top:r.top,now:r.now,zonedNow:d}))}const Lj=HB((function({timeGridRows:t,nowIndicatorState:e}){const n=uF(Cj),i=uF(IF),r=uF(Ij),a=DF(),{width:o,borderRight:s}=WF(NF),l=$O((()=>t.filter(((e,n)=>n%2==0||n===t.length-1))),[t]),u=qO(((t,i,r)=>{const a=0===i,o=i===l.length-1,s=uR(Dj.time,{[Dj.first]:a,[Dj.last]:o,[Dj.hidden]:(({top:t,height:i})=>{if(!n||oR(e))return!1;const r=e.top;return t-i<=r&&r<=t+i})(t)});let u=fV(new LR,o?t.endTime:t.startTime);return sR(r)&&(u=pV(u,r)),{date:u,top:t.top,className:s,diffFromPrimaryTimezone:r}}),[l,e,n]),[c,...d]=i,h=d.length>0?100/(d.length+1):100,p=l.map(((t,e)=>u(t,e))),f=$O((()=>0===d.length?[]:d.reverse().map((t=>{const{timezoneName:e}=t,n=a(c.timezoneName).getTimezoneOffset(),i=a(e).getTimezoneOffset()-n;return l.map(((t,e)=>u(t,e,i)))}))),[u,d,c,l,a]);return oO("div",{className:uR(Dj.timeColumn),style:{width:o},"data-testid":"timegrid-time-column"},!r&&f.map((t=>oO(Ej,{key:t[0].diffFromPrimaryTimezone,rowsInfo:t,isPrimary:!1,borderRight:s,width:h,nowIndicatorState:e}))),oO(Ej,{rowsInfo:p,isPrimary:!0,borderRight:s,width:r?100:h,nowIndicatorState:e}))}));function Pj(t,e,n){const i=e.getTime(),r=n.getTime(),a=hB(t.getTime(),[i],[r])-i;return hB(pB(r-i,100,a),[0],[100])}function Nj(t,e,n,i){const r=Pj(t,n,i);return{top:r,height:Pj(e,n,i)-r}}function Oj(t,e){return n=>{const{goingDuration:i=0,comingDuration:r=0}=n.model,a=pV(n.getStarts(),-i);return!(pV(n.getEnds(),r)<=t||a>=e)}}function zj(t,e){const{startColumnTime:n,endColumnTime:i,baseWidth:r,columnIndex:a,renderStart:o,renderEnd:s}=e,{duplicateEvents:l}=t,{top:u,height:c}=Nj(o,s,n,i),d={top:u,left:r*a,width:r,height:Math.max(1,c),duplicateLeft:"",duplicateWidth:""};l.length>0&&(d.duplicateLeft=function(t,e){const{duplicateEvents:n,duplicateEventIndex:i}=t,r=n[i-1];let a=e;if(r){const{percent:t,px:e}=hR(`${r.duplicateLeft}`),{percent:n,px:i}=hR(`${r.duplicateWidth}`),o=t+n,s=e+i+2;a=0!==o?`calc(${cR(o)} ${s>0?"+":"-"} ${dR(Math.abs(s))})`:dR(s)}else a=cR(a);return a}(t,d.left),d.duplicateWidth=function(t,e){const{collapse:n}=t;return n?"9px":`calc(${cR(e)} - ${dR(11*(t.duplicateEvents.length-1)+2)})`}(t,d.width)),t.setUIProps(d)}function Rj({uiModel:t,columnIndex:e,baseWidth:n,startColumnTime:i,endColumnTime:r,isDuplicateEvent:a=!1}){if(!a&&t.duplicateEvents.length>0)return void t.duplicateEvents.forEach((t=>{Rj({uiModel:t,columnIndex:e,baseWidth:n,startColumnTime:i,endColumnTime:r,isDuplicateEvent:!0})}));const o=function(t,e,n,i,r){const{goingDuration:a=0,comingDuration:o=0}=t.model,s=t.getStarts(),l=t.getEnds(),u=pV(s,-a),c=pV(l,o);return{baseWidth:n,columnIndex:e,modelStart:s,modelEnd:l,renderStart:iV(u,i),renderEnd:rV(c,r),goingStart:u,comingEnd:c,startColumnTime:i,endColumnTime:r,duplicateEvents:t.duplicateEvents}}(t,e,n,i,r);zj(t,o),function(t,e){const{renderStart:n,renderEnd:i,modelStart:r,modelEnd:a}=e,{goingDuration:o=0,comingDuration:s=0}=t.model;let l=100;if(o>0){const{height:e}=Nj(n,r,n,i);t.goingDurationHeight=e,l-=e}if(s>0){const{height:e}=Nj(a,i,n,i);t.comingDurationHeight=e,l-=e}t.modelDurationHeight=l}(t,o),function(t,e){const{goingStart:n,comingEnd:i,startColumnTime:r,endColumnTime:a}=e;n<r&&(t.croppedStart=!0),i>a&&(t.croppedEnd=!0)}(t,o)}function Vj(t,e,n,i,r){const a=t.filter(bV).filter(Oj(e,n)).sort(zR.event.asc);r&&function(t,e,n){const{getDuplicateEvents:i,getMainEvent:r}=e,a=t.map((t=>t.model.toEventObject()));t.forEach((e=>{if(e.collapse||e.duplicateEvents.length>0)return;const o=i(e.model.toEventObject(),a);if(o.length<=1)return;const s=r(o),l=o.map((e=>t.find((t=>t.cid()===e.__cid)))),u=!!(n>-1&&o.find((t=>t.__cid===n))),c=o.reduce(((t,{start:e,goingDuration:n})=>rV(t,pV(e,-n))),o[0].start),d=o.reduce(((t,{end:e,comingDuration:n})=>iV(t,pV(e,n))),o[0].end);l.forEach(((t,e)=>{const i=t.cid()===s.__cid,r=!(u&&t.cid()===n||!u&&i);t.setUIProps({duplicateEvents:l,duplicateEventIndex:e,collapse:r,isMain:i,duplicateStarts:c,duplicateEnds:d})}))}))}(a,r,i);const o=a.filter((t=>!t.collapse));return KF(MV(...o),ZF(o,true),true).forEach((t=>{const i=Math.max(...t.map((t=>t.length))),r=Math.round(100/i);t.forEach((t=>{t.forEach(((t,i)=>{Rj({uiModel:t,columnIndex:i,baseWidth:r,startColumnTime:e,endColumnTime:n})}))}))})),a}const Fj={timegrid:uR("timegrid"),scrollArea:uR(JG("scroll-area"))};function Bj({timeGridData:t,events:e}){const{isReadOnly:n,week:{narrowWeekend:i,startDayOfWeek:r,collapseDuplicateEvents:a}}=uF(vF),o=uF(Cj),s=uF((t=>t.weekViewLayout.selectedDuplicateEventCid)),[,l]=TF(),u=function(){const t=YO(!0);return WO((()=>()=>{t.current=!1}),[]),qO((()=>t.current),[])}(),{width:c}=WF(NF),[d,h]=GO(null),{columns:p,rows:f}=t,g=p.length-1,m=$O((()=>p.map((({date:t})=>e.filter(Oj(KR(t),oV(t))).map((t=>t.clone())))).map(((t,e)=>Vj(t,fV(p[e].date,RR(f).startTime),fV(p[e].date,VR(f).endTime),s,a)))),[p,f,e,s,a]),v=$O((()=>{const e=l(),n=p.findIndex((t=>nV(t.date,e)));if(n<0)return null;return{startTime:fV(p[n].date,t.rows[0].startTime),endTime:fV(p[n].date,VR(t.rows).endTime),currentDateIndex:n}}),[p,l,t.rows]),[y,_]=HH(),x=$O((()=>TB({rowsCount:f.length,columnsCount:p.length,container:y,narrowWeekend:i,startDayOfWeek:r})),[p.length,y,i,f.length,r]),b=UH({type:"timeGrid",gridPositionFinder:x,selectionSorter:PB.sortSelection,dateGetter:PB.getDateFromCollection,dateCollection:t}),w=qO((()=>{if(sR(v)){const{startTime:t,endTime:e}=v,n=l();t<=n&&n<=e&&h({top:Pj(n,t,e),now:n})}}),[v,l]);return UO((()=>{var t;u()&&((null!=(t=null==v?void 0:v.currentDateIndex)?t:-1)>=0?w():h(null))}),[v,u,w]),function(t,e){const n=YO(t);WO((()=>{n.current=t}),[t]),WO((()=>{const t=null!=e?e:-1;if(t>0){const e=setInterval((()=>n.current()),t);return()=>clearInterval(e)}}),[e])}(w,sR(v)?qR:null),oO("div",{className:Fj.timegrid},oO("div",{className:Fj.scrollArea},oO(Lj,{timeGridRows:f,nowIndicatorState:d}),oO("div",{className:uR("columns"),style:{left:c},ref:_,onMouseDown:TH(!n,b)},oO(dj,{timeGridRows:f}),oO(mj,{gridPositionFinder:x,timeGridData:t}),p.map(((e,n)=>oO(uj,{key:e.date.toString(),timeGridData:t,columnDate:e.date,columnWidth:cR(e.width),columnIndex:n,totalUIModels:m,gridPositionFinder:x,isLastColumn:n===g}))),o&&sR(v)&&sR(d)?oO(bj,{top:d.top,columnWidth:p[0].width,columnCount:p.length,columnIndex:v.currentDateIndex}):null)))}function Hj({isCollapsed:t}){const e=SF(),n=uR("icon",{"ic-arrow-right":t,"ic-arrow-left":!t});return oO("button",{className:uR(JG("timezone-collapse-button")),"aria-expanded":!t,onClick:()=>e.fire("clickTimezonesCollapseBtn",t)},oO("span",{className:n,role:"img"}))}function Gj({label:t,offset:e,tooltip:n,width:i=100,left:r}){return oO("div",{title:n,className:uR(JG("timezone-label")),style:{width:cR(i),height:cR(100),left:cR(r)},role:"gridcell"},oO(bF,{template:"timezoneDisplayLabel",param:{displayLabel:t,timezoneOffset:e},as:"span"}))}function jj({top:t}){const e=uF(IF),{width:n}=WF(NF),i=DF(),{showTimezoneCollapseButton:r,timezonesCollapsed:a}=function(){const t=uF(kj),e=uF(Ij);return $O((()=>({showTimezoneCollapseButton:t,timezonesCollapsed:e})),[t,e])}();if(e.length<=1)return null;const o=e.map((({displayLabel:t,timezoneName:e,tooltip:n})=>Kz(t)?{label:null,offset:i(e).getTimezoneOffset(),tooltip:null!=n?n:e}:{label:t,offset:null,tooltip:null!=n?n:e})),[s,...l]=o,u=l.reverse(),c=100/(a?1:e.length);return oO("div",{style:{top:t,width:n},role:"columnheader",className:uR("timezone-labels-slot")},!a&&u.map(((t,e)=>{var n;return oO(Gj,KN({key:`subTimezone-${null!=(n=t.label)?n:t.offset}`,width:c,left:c*e},t))})),r&&oO(Hj,{isCollapsed:a}),oO(Gj,KN({width:c,left:c*u.length},s)))}const Wj={MONTH:"month",WEEK:"week",DAY:"day"},Uj=["milestone","task"],Yj=["allday","time"];function $j(t,e){const n=[];return!0===t?n.push(...Uj):Array.isArray(t)&&n.push(...t),!0===e?n.push(...Yj):Array.isArray(e)&&n.push(...e),n}function qj(t){const e=uF(CF),n=DF();return $O((()=>{if("Local"===e)return t;const i=kR(new LR),{timedEvents:r=MV(),totalEvents:a=MV()}=t.groupBy((t=>"time"===t.category?"timedEvents":"totalEvents"));return r.each((t=>{const r=(o=t,Object.assign(Object.create(Object.getPrototypeOf(o)),o));var o;let s=n(e,r.start),l=n(e,r.end);i?(kR(s)||(s=s.addHours(1)),kR(l)||(l=l.addHours(1))):(kR(s)&&(s=s.addHours(-1)),kR(l)&&(l=l.addHours(-1))),r.start=s,r.end=l,a.add(r)})),a}),[t,e,n])}function Xj(t,...e){const n=qj($O((()=>t.events.filter(wV.and(...e))),[t.events,e]));return $O((()=>QN(KN({},t),{events:n})),[t,n])}function Zj(t,e){IH(yF,(({y:n,draggingItemType:i,draggingState:r})=>{if(sR(t)&&function(t){return/^(event|gridSelection)\/timeGrid/.test(null!=t?t:"")}(i)&&r===AV.DRAGGING&&sR(n)){const{offsetTop:i,offsetHeight:r,scrollHeight:a}=t,o=Math.floor(a/e),s=i+r;if(n<i+o){const e=n-(i+o);t.scrollTop=Math.max(0,t.scrollTop+e)}else if(n>s-o){const e=n-(s-o);t.scrollTop=Math.min(r,t.scrollTop+e)}}}))}function Jj(t){var e,n,i;return null==(i=null==(n=null==(e=t.weekViewLayout)?void 0:e.dayGridRows)?void 0:n.time)?void 0:i.height}function Kj(t){const e=uF(Jj),[n,i]=GO(null);return UO((()=>{sR(e)&&t&&i(t.offsetTop)}),[e,t]),n}function Qj({rowIndex:t,weekDates:e,narrowWeekend:n}){const i=uF(qO((n=>n.gridSelection.accumulated.dayGridMonth.map((n=>NB.calculateSelection(n,t,e.length)))),[t,e]));return oO("div",{className:uR("accumulated-grid-selection")},i.map((t=>t?oO(EB,{type:"accumulated",gridSelectionData:t,weekDates:e,narrowWeekend:n}):null)))}function tW({type:t,number:e,onClickButton:n,className:i}){const{reset:r}=dF("dnd");return oO("button",{type:"button",onMouseDown:t=>{t.stopPropagation()},onClick:()=>{r(),n()},className:i},oO(bF,{template:`monthGrid${t===XF.header?"Header":"Footer"}Exceed`,param:e}))}function eW({date:t,theme:e,renderDate:n,isToday:i}){const r=t.getDay(),a=n.getMonth()===t.getMonth(),{common:{holiday:o,saturday:s,today:l,dayName:u},month:{dayExceptThisMonth:c,holidayExceptThisMonth:d}}=e;return i?l.color:lV(r)?a?o.color:d.color:uV(r)?a?s.color:c.color:a?u.color:c.color}function nW(){const t=WF(EF),e=UF();return $O((()=>({common:t,month:e})),[t,e])}function iW({type:t=XF.header,exceedCount:e=0,date:n,onClickExceedCount:i}){const{renderDate:r}=uF(mF),[,a]=TF(),o=nW(),s=o.month.gridCell[`${t}Height`],l=ZR(n,"YYYYMMDD"),u=ZR(a(),"YYYYMMDD"),c=l===u,d={date:ZR(n,"YYYY-MM-DD"),day:n.getDay(),hiddenEventCount:e,isOtherMonth:n.getMonth()!==r.getMonth(),isToday:l===u,month:n.getMonth(),ymd:l},h={color:eW({date:n,theme:o,isToday:c,renderDate:r})},p=`monthGrid${OV(t)}`;return oR(s)?null:oO("div",{className:uR(`grid-cell-${t}`),style:{height:s}},oO("span",{className:uR("grid-cell-date"),style:h},oO(bF,{template:p,param:d})),e?oO(tW,{type:t,number:e,onClickButton:i,className:uR("grid-cell-more-events")}):null)}function rW({layoutContainer:t,cell:e,popupSize:n}){const i=function(t,e,n){const{width:i,height:r,left:a,top:o}=e,{width:s,height:l}=t,u=a+i,c=o+r;let d=n.left+n.width/2-s/2,{top:h}=n;const p=d+s>u,f=h+l>c;return d<a&&(d=a),p&&(d=u-s),h<o&&(h=o),f&&(h=c-l),{top:h+window.scrollY,left:d+window.scrollX}}(n,t.getBoundingClientRect(),e.getBoundingClientRect());return KN(KN({},n),i)}function aW(t,e,n){const{width:i,height:r}=WF(OF),[a,o]=HH(),[s,l]=GO(null);return WO((()=>{if(n&&e&&a){const o=function({grid:t,offsetWidth:e,eventLength:n,layerSize:i}){const r=KV(t).height+10;let a=e+10;const{width:o,height:s}=i;a=Math.max(a,280);let l=61;return l+=n<=10?26*n:260,o&&(a=o),s&&(l=s),(isNaN(l)||l<r)&&(l=r),{width:a,height:l}}({grid:e,offsetWidth:a.offsetWidth,eventLength:t,layerSize:{width:i,height:r}}),s=rW({cell:a,layoutContainer:n,popupSize:o});l(s)}}),[n,a,t,e,i,r]),{popupPosition:s,containerRefCallback:o}}function oW(t){return t.month.weekend.backgroundColor}function sW({date:t,events:e=[],style:n,parentContainer:i,contentAreaHeight:r}){const a=yH(),{showSeeMorePopup:o}=dF("popup"),s=WF(oW),{popupPosition:l,containerRefCallback:u}=aW(e.length,i,a),c=qO((()=>{l&&o({date:t,popupPosition:l,events:e})}),[t,e,l,o]),d=vB(e,r,26);return oO("div",{className:uR("daygrid-cell"),style:QN(KN({},n),{backgroundColor:sV(t.getDay())?s:"inherit"}),ref:u},oO(iW,{type:XF.header,exceedCount:d,date:t,onClickExceedCount:c}),oO(iW,{type:XF.footer,exceedCount:d,date:t,onClickExceedCount:c}))}const lW=HB((function({week:t,rowInfo:e,gridDateEventModelMap:n={},contentAreaHeight:i}){const[r,a]=HH(),o=WF(qO((t=>t.common.border),[]));return oO("div",{className:uR("weekday-grid"),style:{borderTop:o},ref:a},t.map(((t,a)=>{const o=t.getDay(),{width:s,left:l}=e[a],u=ZR(KR(t),"YYYYMMDD");return oO(sW,{key:`daygrid-cell-${o}`,date:t,style:{width:cR(s),left:cR(l)},parentContainer:r,events:n[u],contentAreaHeight:i})})))}));function uW({weekDates:t,narrowWeekend:e,rowIndex:n}){const i=uF(qO((e=>NB.calculateSelection(e.gridSelection.dayGridMonth,n,t.length)),[n,t.length]));return oR(i)?null:oO(EB,{type:"month",gridSelectionData:i,weekDates:t,narrowWeekend:e})}const cW=HB((function({contentAreaHeight:t,eventHeight:e=22,events:n,name:i,className:r}){const{headerHeight:a}=WF(zF);return oO("div",{className:r},n.filter(mB(t,e+2)).map((t=>oO(NH,{key:`${i}-DayEvent-${t.cid()}`,uiModel:t,eventHeight:e,headerHeight:null!=a?a:27}))))}));function dW({dateMatrix:t,gridPositionFinder:e,rowInfo:n,rowIndex:i}){const r=function({dateMatrix:t,rowInfo:e,gridPositionFinder:n,rowIndex:i}){const r=SF(),{isDraggingEnd:a,isDraggingCanceled:o,draggingEvent:s,clearDraggingEvent:l}=RH("dayGrid","move"),[u,c]=zH(n),d=$O((()=>{var t,n;let r=null;return s&&(null==u?void 0:u.rowIndex)===i&&(r=s,r.left=e[null!=(t=null==u?void 0:u.columnIndex)?t:0].left,r.width=e[null!=(n=null==u?void 0:u.columnIndex)?n:0].width),r}),[s,null==u?void 0:u.rowIndex,null==u?void 0:u.columnIndex,i,e]);return OH((()=>{if(!o&&sR(d)&&sR(u)){const e=d.model.getStarts(),n=d.duration(),i=864e5*mV(t[u.rowIndex][u.columnIndex],e),a=new LR(e.getTime()+i),o=new LR(a.getTime()+n);r.fire("beforeUpdateEvent",{event:d.model.toEventObject(),changes:{start:a,end:o}})}l(),c()}),a),d}({dateMatrix:t,rowInfo:n,gridPositionFinder:e,rowIndex:i});return oR(r)?null:oO(NH,{uiModel:r,movingLeft:r.left,eventHeight:22,headerHeight:30})}function hW(t,e){return{startColumnIndex:Math.max(xB(t.getStarts(),e),0),endColumnIndex:xB(t.getEnds(),e)}}function pW({dateMatrix:t,cellWidthMap:e,gridPositionFinder:n,renderedUIModels:i,rowIndex:r}){const a=function({dateMatrix:t,gridPositionFinder:e,renderedUIModels:n,cellWidthMap:i,rowIndex:r}){const a=SF(),{isDraggingEnd:o,isDraggingCanceled:s,draggingEvent:l,clearDraggingEvent:u}=RH("dayGrid","resize"),[c,d]=zH(e),[h,p]=GO(null),f=qO((()=>{p(null),d(),u()}),[d,u]),g=$O((()=>{if(oR(l))return null;const e=n.map((({uiModels:t})=>t.filter((t=>t.cid()===l.cid())))),i=e.findIndex((t=>t.length>0)),r=FR(e,(t=>t.length>0)),a=hW(e[i][0],t[i]),o=hW(e[r][0],t[r]);return{eventStartDateColumnIndex:a.startColumnIndex,eventStartDateRowIndex:i,eventEndDateColumnIndex:o.endColumnIndex,eventEndDateRowIndex:r,resizeTargetUIModelRows:e}}),[t,n,l]),m=sR(g)&&sR(l)&&sR(c);return WO((()=>{if(m&&r===g.eventStartDateRowIndex){const{eventStartDateRowIndex:e,eventStartDateColumnIndex:n}=g,a=g.resizeTargetUIModelRows[e][0].clone();let o;e===c.rowIndex?o=i[n][Math.max(n,c.columnIndex)]:e>c.rowIndex?o=i[n][n]:(o=i[n][t[r].length-1],a.setUIProps({exceedRight:!0})),p([a,o])}}),[g,m,i,c,t,r]),WO((()=>{if(m&&g.eventStartDateRowIndex<r&&r<c.rowIndex){const t=l.clone();t.setUIProps({left:0,exceedLeft:!0,exceedRight:!0}),p([t,"100%"])}}),[g,m,c,l,r]),WO((()=>{if(m&&g.eventStartDateRowIndex<c.rowIndex&&r===c.rowIndex){const t=l.clone();t.setUIProps({left:0,exceedLeft:!0}),p([t,i[0][c.columnIndex]])}}),[g,m,i,c,l,r]),WO((()=>{m&&r>g.eventStartDateRowIndex&&r>c.rowIndex&&p(null)}),[m,c,g,r]),OH((()=>{if(m){const{eventStartDateColumnIndex:e,eventStartDateRowIndex:n}=g;if(!s&&(c.rowIndex===n&&c.columnIndex>=e||c.rowIndex>n)){const e=t[c.rowIndex][c.columnIndex];a.fire("beforeUpdateEvent",{event:l.model.toEventObject(),changes:{end:e}})}}f()}),o),h}({dateMatrix:t,gridPositionFinder:n,cellWidthMap:e,renderedUIModels:i,rowIndex:r});if(oR(a))return null;const[o,s]=a;return oO("div",{className:uR("weekday-events")},oO(NH,{key:`resizing-event-${o.cid()}`,uiModel:o,eventHeight:24,headerHeight:30,resizingWidth:s}))}function fW({dateMatrix:t=[],rowInfo:e=[],cellWidthMap:n=[]}){const[i,r]=HH(),a=uF(pF),{ref:o,cellContentAreaHeight:s}=function(t){const e=uF(Sj),{headerHeight:n,footerHeight:i}=WF(zF),r=YO(null),[a,o]=GO(0);return WO((()=>{if(r.current){const a=KV(r.current).height-(3+(null!=n?n:27))-(null!=i?i:0),s=e*(t+2);o(Math.min(a,s))}}),[i,n,t,e]),{ref:r,cellContentAreaHeight:a}}(24),{eventFilter:l,month:u,isReadOnly:c}=uF(vF),{narrowWeekend:d,startDayOfWeek:h}=u,p=100/t.length,f=$O((()=>TB({container:i,rowsCount:t.length,columnsCount:t[0].length,narrowWeekend:d,startDayOfWeek:h})),[t,i,d,h]),g=Xj(a,l),m=$O((()=>t.map((t=>wB(t,g,d)))),[g,t,d]);return oO("div",{ref:r,onMouseDown:TH(!c,UH({type:"dayGridMonth",gridPositionFinder:f,dateCollection:t,dateGetter:NB.getDateFromCollection,selectionSorter:NB.sortSelection})),className:uR("month-daygrid")},t.map(((i,r)=>{const{uiModels:a,gridDateEventModelMap:l}=m[r];return oO("div",{key:`dayGrid-events-${r}`,className:uR("month-week-item"),style:{height:cR(p)},ref:o},oO("div",{className:uR("weekday")},oO(lW,{gridDateEventModelMap:l,week:i,rowInfo:e,contentAreaHeight:s}),oO(cW,{name:"month",events:a,contentAreaHeight:s,eventHeight:24,className:uR("weekday-events")}),oO(uW,{weekDates:i,narrowWeekend:d,rowIndex:r}),oO(Qj,{rowIndex:r,weekDates:i,narrowWeekend:d})),oO(pW,{dateMatrix:t,gridPositionFinder:f,rowIndex:r,cellWidthMap:n,renderedUIModels:m}),oO(dW,{dateMatrix:t,gridPositionFinder:f,rowIndex:r,rowInfo:e}))})))}const gW={month:function(){const t=uF(vF),{renderDate:e}=uF(mF),n=function(t){const{dayNames:e,startDayOfWeek:n,workweek:i}=t.month;return[...Array(7)].map(((t,e)=>(n+e)%7)).map((t=>({day:t,label:OV(e[t])}))).filter((t=>!i||!sV(t.day)))}(t),i=t.month,{narrowWeekend:r,startDayOfWeek:a,workweek:o}=i,s=$O((()=>kB(e,i)),[i,e]),{rowStyleInfo:l,cellWidthMap:u}=$O((()=>dV(n.length,r,a,o)),[n.length,r,a,o]),c=l.map(((t,e)=>QN(KN({},t),{date:s[0][e]})));return oO($G,{className:uR("month")},oO(qF,{type:"month",dayNames:n,options:i,rowStyleInfo:l}),oO(fW,{dateMatrix:s,rowInfo:c,cellWidthMap:u}))},week:function(){var t,e;const{options:n,calendar:i,gridRowLayout:r,lastPanelType:a,renderDate:o}=function(){const t=uF(vF),e=uF(pF),{dayGridRows:n,lastPanelType:i}=uF(fF),{renderDate:r}=uF(mF);return $O((()=>({options:t,calendar:e,gridRowLayout:n,lastPanelType:i,renderDate:r})),[e,n,i,t,r])}(),s=WF(qO((t=>t.week.dayGridLeft.width),[])),l=uF(CF),[u,c]=HH(),d=n.week,{narrowWeekend:h,startDayOfWeek:p,workweek:f,hourStart:g,hourEnd:m,eventView:v,taskView:y}=d,_=$O((()=>IB(o,d)),[o,d]),x=VV(_,null!=(e=null==(t=n.week)?void 0:t.dayNames)?e:[]),{rowStyleInfo:b,cellWidthMap:w}=dV(_.length,h,p,f),M=Xj(i,n.eventFilter),S=$O((()=>{const[t,e]="Local"===l?[KR(RR(_)),oV(VR(_))]:[KR(gV(RR(_),-1)),oV(gV(VR(_),1))];return CB(_,M,{narrowWeekend:h,hourStart:g,hourEnd:m,weekStartDate:t,weekEndDate:e})}),[M,m,g,h,l,_]),C=$O((()=>DB(_,{hourStart:g,hourEnd:m,narrowWeekend:h})),[m,g,h,_]),k=$j(y,v),I=k.map((t=>{var e,n;if("time"===t)return null;const i=t;return oO(ZG,{name:i,key:i,resizable:i!==a},"allday"===i?oO(YH,{events:S[i],rowStyleInfo:b,gridColWidthMap:w,weekDates:_,height:null==(e=r[i])?void 0:e.height,options:d}):oO($H,{category:i,events:S[i],weekDates:_,height:null==(n=r[i])?void 0:n.height,options:d,gridColWidthMap:w}))})),D=$O((()=>k.includes("time")),[k]);Zj(u,C.rows.length);const T=Kj(u);return oO($G,{className:uR("week-view"),autoAdjustPanels:!0},oO(ZG,{name:"week-view-day-names",initialHeight:44},oO(qF,{type:"week",dayNames:x,marginLeft:s,options:d,rowStyleInfo:b})),I,D?oO(ZG,{name:"time",autoSize:1,ref:c},oO(Bj,{events:S.time,timeGridData:C}),oO(jj,{top:T})):null)},day:function(){var t,e;const{calendar:n,options:i,gridRowLayout:r,lastPanelType:a,renderDate:o}=function(){const t=uF(pF),e=uF(vF),{dayGridRows:n,lastPanelType:i}=uF(fF),{renderDate:r}=uF(mF);return $O((()=>({calendar:t,options:e,gridRowLayout:n,lastPanelType:i,renderDate:r})),[t,e,n,i,r])}(),s=uF(CF),l=WF(qO((t=>t.week.dayGridLeft.width),[])),[u,c]=HH(),d=i.week,{narrowWeekend:h,startDayOfWeek:p,workweek:f,hourStart:g,hourEnd:m,eventView:v,taskView:y}=d,_=$O((()=>[o]),[o]),x=VV(_,null!=(e=null==(t=i.week)?void 0:t.dayNames)?e:[]),{rowStyleInfo:b,cellWidthMap:w}=dV(_.length,h,p,f),M=Xj(n,i.eventFilter),S=$O((()=>{const[t,e]="Local"===s?[KR(_[0]),oV(_[0])]:[KR(gV(_[0],-1)),oV(gV(_[0],1))];return CB(_,M,{narrowWeekend:h,hourStart:g,hourEnd:m,weekStartDate:t,weekEndDate:e})}),[M,_,m,g,h,s]),C=$O((()=>DB(_,{hourStart:g,hourEnd:m,narrowWeekend:h})),[_,m,g,h]),k=$j(y,v),I=k.map((t=>{var e,n;if("time"===t)return null;const i=t;return oO(ZG,{key:i,name:i,resizable:i!==a},"allday"===i?oO(YH,{events:S[i],rowStyleInfo:b,gridColWidthMap:w,weekDates:_,height:null==(e=r[i])?void 0:e.height,options:d}):oO($H,{category:i,events:S[i],weekDates:_,height:null==(n=r[i])?void 0:n.height,options:d,gridColWidthMap:w}))}));Zj(u,C.rows.length);const D=Kj(u);return oO($G,{className:uR("day-view"),autoAdjustPanels:!0},oO(ZG,{name:"day-view-day-names",initialHeight:43},oO(qF,{type:"week",dayNames:x,marginLeft:l,rowStyleInfo:b})),I,k.includes("time")?oO(ZG,{name:"time",autoSize:1,ref:c},oO(Bj,{events:S.time,timeGridData:C}),oO(jj,{top:D})):null)}};function mW(){const{currentView:t}=uF(mF);return oO($O((()=>gW[t]||(()=>null)),[t]),null)}var vW=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,yW=/[&<>"]/;function _W(t){var e=String(t);return yW.test(e)?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e}var xW=function(t,e){return String(t).replace(/(\n+)/g,"$1"+(e||"\t"))},bW=function(t,e,n){return String(t).length>(e||40)||!n&&-1!==String(t).indexOf("\n")||-1!==String(t).indexOf("<")},wW={};function MW(t){var e="";for(var n in t){var i=t[n];null!=i&&""!==i&&(e&&(e+=" "),e+="-"==n[0]?n:wW[n]||(wW[n]=n.replace(/([A-Z])/g,"-$1").toLowerCase()),e+=": ",e+=i,"number"==typeof i&&!1===vW.test(n)&&(e+="px"),e+=";")}return e||void 0}function SW(t,e){for(var n in e)t[n]=e[n];return t}function CW(t,e){return Array.isArray(e)?e.reduce(CW,t):null!=e&&!1!==e&&t.push(e),t}var kW={shallow:!0},IW=[],DW=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,TW=/[\s\n\\/='"\0<>]/;function AW(){this.__d=!0}LW.render=LW;var EW=[];function LW(t,e,n){e=e||{},n=n||{};var i=FN.__s;FN.__s=!0;var r=PW(t,e,n);return FN.__c&&FN.__c(t,EW),EW.length=0,FN.__s=i,r}function PW(t,e,n,i,r,a){if(null==t||"boolean"==typeof t)return"";if("object"!=typeof t)return _W(t);var o=n.pretty,s=o&&"string"==typeof o?o:"\t";if(Array.isArray(t)){for(var l="",u=0;u<t.length;u++)o&&u>0&&(l+="\n"),l+=PW(t[u],e,n,i,r,a);return l}var c,d=t.type,h=t.props,p=!1;if("function"==typeof d){if(p=!0,!n.shallow||!i&&!1!==n.renderRootComponent){if(d===lO){var f=[];return CW(f,t.props.children),PW(f,e,n,!1!==n.shallowHighOrder,r,a)}var g,m=t.__c={__v:t,context:e,props:t.props,setState:AW,forceUpdate:AW,__d:!0,__h:[]};FN.__b&&FN.__b(t);var v=FN.__r;if(d.prototype&&"function"==typeof d.prototype.render){var y=d.contextType,_=y&&e[y.__c],x=null!=y?_?_.props.value:y.__:e;(m=t.__c=new d(h,x)).__v=t,m._dirty=m.__d=!0,m.props=h,null==m.state&&(m.state={}),null==m._nextState&&null==m.__s&&(m._nextState=m.__s=m.state),m.context=x,d.getDerivedStateFromProps?m.state=SW(SW({},m.state),d.getDerivedStateFromProps(m.props,m.state)):m.componentWillMount&&(m.componentWillMount(),m.state=m._nextState!==m.state?m._nextState:m.__s!==m.state?m.__s:m.state),v&&v(t),g=m.render(m.props,m.state,m.context)}else for(var b=d.contextType,w=b&&e[b.__c],M=null!=b?w?w.props.value:b.__:e,S=0;m.__d&&S++<25;)m.__d=!1,v&&v(t),g=d.call(t.__c,h,M);return m.getChildContext&&(e=SW(SW({},e),m.getChildContext())),FN.diffed&&FN.diffed(t),PW(g,e,n,!1!==n.shallowHighOrder,r,a)}d=(c=d).displayName||c!==Function&&c.name||function(t){var e=(Function.prototype.toString.call(t).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!e){for(var n=-1,i=IW.length;i--;)if(IW[i]===t){n=i;break}n<0&&(n=IW.push(t)-1),e="UnnamedComponent"+n}return e}(c)}var C,k,I="<"+d;if(h){var D=Object.keys(h);n&&!0===n.sortAttributes&&D.sort();for(var T=0;T<D.length;T++){var A=D[T],E=h[A];if("children"!==A){if(!TW.test(A)&&(n&&n.allAttributes||"key"!==A&&"ref"!==A&&"__self"!==A&&"__source"!==A)){if("defaultValue"===A)A="value";else if("defaultChecked"===A)A="checked";else if("defaultSelected"===A)A="selected";else if("className"===A){if(void 0!==h.class)continue;A="class"}else r&&/^xlink:?./.test(A)&&(A=A.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===A){if(h.for)continue;A="for"}"style"===A&&E&&"object"==typeof E&&(E=MW(E)),"a"===A[0]&&"r"===A[1]&&"boolean"==typeof E&&(E=String(E));var L=n.attributeHook&&n.attributeHook(A,E,e,n,p);if(L||""===L)I+=L;else if("dangerouslySetInnerHTML"===A)k=E&&E.__html;else if("textarea"===d&&"value"===A)C=E;else if((E||0===E||""===E)&&"function"!=typeof E){if(!(!0!==E&&""!==E||(E=A,n&&n.xml))){I=I+" "+A;continue}if("value"===A){if("select"===d){a=E;continue}"option"===d&&a==E&&void 0===h.selected&&(I+=" selected")}I=I+" "+A+'="'+_W(E)+'"'}}}else C=E}}if(o){var P=I.replace(/\n\s*/," ");P===I||~P.indexOf("\n")?o&&~I.indexOf("\n")&&(I+="\n"):I=P}if(I+=">",TW.test(d))throw new Error(d+" is not a valid HTML tag name in "+I);var N,O=DW.test(d)||n.voidElements&&n.voidElements.test(d),z=[];if(k)o&&bW(k)&&(k="\n"+s+xW(k,s)),I+=k;else if(null!=C&&CW(N=[],C).length){for(var R=o&&~I.indexOf("\n"),V=!1,F=0;F<N.length;F++){var B=N[F];if(null!=B&&!1!==B){var H=PW(B,e,n,!0,"svg"===d||"foreignObject"!==d&&r,a);if(o&&!R&&bW(H)&&(R=!0),H)if(o){var G=H.length>0&&"<"!=H[0];V&&G?z[z.length-1]+=H:z.push(H),V=G}else z.push(H)}}if(o&&R)for(var j=z.length;j--;)z[j]="\n"+s+xW(z[j],s)}if(z.length||k)I+=z.join("");else if(n&&n.xml)return I.substring(0,I.length-1)+" />";return!O||N||k?(o&&~I.indexOf("\n")&&(I+="\n"),I=I+"</"+d+">"):I=I.replace(/>$/," />"),I}LW.shallowRender=function(t,e){return LW(t,e,kW)};var NW=function(t,e,n){var i;for(i in n=n||null,t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))break},OW=NW;var zW=Kz,RW=function(t,e){var n=document.createElement("img"),i="";return OW(e,(function(t,e){i+="&"+e+"="+t})),i=i.substring(1),n.src=t+"?"+i,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n};var VW=function(t,e){var n=location.hostname,i="TOAST UI "+t+" for "+n+": Statistics",r=window.localStorage.getItem(i);(zW(window.tui)||!1!==window.tui.usageStatistics)&&(r&&!function(t){return(new Date).getTime()-t>6048e5}(r)||(window.localStorage.setItem(i,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||RW("https://www.google-analytics.com/collect",{v:1,t:"event",tid:e,cid:n,dp:n,dh:t,el:t,ec:"use"})}),1e3)))};function FW({theme:t,store:e,eventBus:n,children:i}){return oO(MF,{value:n},oO(GF,{store:t},oO(lF,{store:e},oO(aG,null,i))))}var BW=Kz,HW=function(t){return null===t};var GW=function(t){return t instanceof Array};var jW=GW,WW=function(t,e,n){var i=0,r=t.length;for(n=n||null;i<r&&!1!==e.call(n,t[i],i,t);i+=1);},UW=NW;var YW=function(t,e){var n,i,r,a,o=Object.prototype.hasOwnProperty;for(r=1,a=arguments.length;r<a;r+=1)for(i in n=arguments[r])o.call(n,i)&&(t[i]=n[i]);return t},$W=function(t){return!BW(t)&&!HW(t)},qW=aR,XW=rR,ZW=GW,JW=function(t){return t instanceof Function},KW=function(t,e,n){jW(t)?WW(t,e,n):UW(t,e,n)},QW=/\s+/g;function tU(){this.events=null,this.contexts=null}tU.mixin=function(t){YW(t.prototype,tU.prototype)},tU.prototype._getHandlerItem=function(t,e){var n={handler:t};return e&&(n.context=e),n},tU.prototype._safeEvent=function(t){var e,n=this.events;return n||(n=this.events={}),t&&((e=n[t])||(e=[],n[t]=e),n=e),n},tU.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},tU.prototype._indexOfContext=function(t){for(var e=this._safeContext(),n=0;e[n];){if(t===e[n][0])return n;n+=1}return-1},tU.prototype._memorizeContext=function(t){var e,n;$W(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1?e[n][1]+=1:e.push([t,1]))},tU.prototype._forgetContext=function(t){var e,n;$W(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1&&(e[n][1]-=1,e[n][1]<=0&&e.splice(n,1)))},tU.prototype._bindEvent=function(t,e,n){var i=this._safeEvent(t);this._memorizeContext(n),i.push(this._getHandlerItem(e,n))},tU.prototype.on=function(t,e,n){var i=this;qW(t)?(t=t.split(QW),KW(t,(function(t){i._bindEvent(t,e,n)}))):XW(t)&&(n=e,KW(t,(function(t,e){i.on(e,t,n)})))},tU.prototype.once=function(t,e,n){var i=this;if(XW(t))return n=e,void KW(t,(function(t,e){i.once(e,t,n)}));this.on(t,(function r(){e.apply(n,arguments),i.off(t,r,n)}),n)},tU.prototype._spliceMatches=function(t,e){var n,i=0;if(ZW(t))for(n=t.length;i<n;i+=1)!0===e(t[i])&&(t.splice(i,1),n-=1,i-=1)},tU.prototype._matchHandler=function(t){var e=this;return function(n){var i=t===n.handler;return i&&e._forgetContext(n.context),i}},tU.prototype._matchContext=function(t){var e=this;return function(n){var i=t===n.context;return i&&e._forgetContext(n.context),i}},tU.prototype._matchHandlerAndContext=function(t,e){var n=this;return function(i){var r=t===i.handler,a=e===i.context,o=r&&a;return o&&n._forgetContext(i.context),o}},tU.prototype._offByEventName=function(t,e){var n=this,i=JW(e),r=n._matchHandler(e);t=t.split(QW),KW(t,(function(t){var e=n._safeEvent(t);i?n._spliceMatches(e,r):(KW(e,(function(t){n._forgetContext(t.context)})),n.events[t]=[])}))},tU.prototype._offByHandler=function(t){var e=this,n=this._matchHandler(t);KW(this._safeEvent(),(function(t){e._spliceMatches(t,n)}))},tU.prototype._offByObject=function(t,e){var n,i=this;this._indexOfContext(t)<0?KW(t,(function(t,e){i.off(e,t)})):qW(e)?(n=this._matchContext(t),i._spliceMatches(this._safeEvent(e),n)):JW(e)?(n=this._matchHandlerAndContext(e,t),KW(this._safeEvent(),(function(t){i._spliceMatches(t,n)}))):(n=this._matchContext(t),KW(this._safeEvent(),(function(t){i._spliceMatches(t,n)})))},tU.prototype.off=function(t,e){qW(t)?this._offByEventName(t,e):arguments.length?JW(t)?this._offByHandler(t):XW(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},tU.prototype.fire=function(t){this.invoke.apply(this,arguments)},tU.prototype.invoke=function(t){var e,n,i,r;if(!this.hasListener(t))return!0;for(e=this._safeEvent(t),n=Array.prototype.slice.call(arguments,1),i=0;e[i];){if(!1===(r=e[i]).handler.apply(r.context,n))return!1;i+=1}return!0},tU.prototype.hasListener=function(t){return this.getListenerLength(t)>0},tU.prototype.getListenerLength=function(t){return this._safeEvent(t).length};var eU=tU;class nU extends eU{on(t,e){return super.on(t,e),this}off(t,e){return super.off(t,e),this}fire(t,...e){return super.fire(t,...e),this}once(t,e){return super.once(t,e),this}}class iU extends class{constructor(t,e={}){var n;this.container=aR(t)?null!=(n=null==document?void 0:document.querySelector(t))?n:null:t,this.theme=((t={})=>oF(HF(t)))(e.theme),this.eventBus=new nU,this.store=((t={})=>oF(sF(t)))(e),this.renderRange=this.calculateRenderRange(KR()),xF.addHook("beforeSanitizeAttributes",(t=>{if("A"===t.tagName){const e=t.getAttribute("target");e?t.setAttribute("data-target-temp",e):t.setAttribute("target","_self")}})),xF.addHook("afterSanitizeAttributes",(t=>{"A"===t.tagName&&t.hasAttribute("data-target-temp")&&(t.setAttribute("target",t.getAttribute("data-target-temp")),t.removeAttribute("data-target-temp"),"_blank"===t.getAttribute("target")&&t.setAttribute("rel","noopener"))})),!0===this.getStoreState().options.usageStatistics&&VW("calendar","UA-129951699-1")}getStoreState(t){const e=this.store.getState();return t?e[t]:e}getStoreDispatchers(t){const e=this.store.getState().dispatch;return t?e[t]:e}destroy(){var t;this.container&&(t=this.container).__k&&IO(null,t),this.store.clearListeners(),this.theme.clearListeners(),this.eventBus.off(),xF.removeAllHooks();for(const e in this)this.hasOwnProperty(e)&&delete this[e]}calculateMonthRenderDate({renderDate:t,offset:e,monthOptions:n}){let i=new LR(t);const{visibleWeeksCount:r}=n;i=r>0?gV(i,7*e*r):function(t,e=1){const n=tV(t);if(0!==e){const t=n.getDate(),i=new LR(n.getTime());if(i.setMonth(n.getMonth()+e+1,0),t>=i.getDate())return i;n.setFullYear(i.getFullYear(),i.getMonth(),t)}return n}(i,e);const a=kB(i,n),[[o]]=a;return{renderDate:i,renderRange:{start:o,end:VR(VR(a))}}}calculateWeekRenderDate({renderDate:t,offset:e,weekOptions:n}){const i=new LR(t);i.addDate(7*e);const r=IB(i,n),[a]=r;return{renderDate:i,renderRange:{start:a,end:VR(r)}}}calculateDayRenderDate({renderDate:t,offset:e}){const n=new LR(t);n.addDate(e);return{renderDate:n,renderRange:{start:KR(n),end:oV(n)}}}move(t){if(oR(t))return;const{currentView:e,renderDate:n}=this.getStoreState().view,{options:i}=this.getStoreState(),{setRenderDate:r}=this.getStoreDispatchers().view,a=new LR(n);let o={renderDate:a,renderRange:{start:new LR(a),end:new LR(a)}};"month"===e?o=this.calculateMonthRenderDate({renderDate:n,offset:t,monthOptions:i.month}):"week"===e?o=this.calculateWeekRenderDate({renderDate:n,offset:t,weekOptions:i.week}):"day"===e&&(o=this.calculateDayRenderDate({renderDate:n,offset:t})),r(o.renderDate),this.renderRange=o.renderRange}createEvents(t){const{createEvents:e}=this.getStoreDispatchers("calendar");e(t)}getEventModel(t,e){const{events:n}=this.getStoreState("calendar");return n.find((({id:n,calendarId:i})=>n===t&&i===e))}getEvent(t,e){var n,i;return null!=(i=null==(n=this.getEventModel(t,e))?void 0:n.toEventObject())?i:null}updateEvent(t,e,n){const{updateEvent:i}=this.getStoreDispatchers("calendar"),r=this.getEventModel(t,e);r&&i({event:r,eventData:n})}deleteEvent(t,e){const{deleteEvent:n}=this.getStoreDispatchers("calendar"),i=this.getEventModel(t,e);i&&n(i)}setCalendarVisibility(t,e){const{setCalendarVisibility:n}=this.getStoreDispatchers("calendar");n(Array.isArray(t)?t:[t],e)}render(){return sR(this.container)&&IO(oO(FW,{theme:this.theme,store:this.store,eventBus:this.eventBus},this.getComponent()),this.container),this}renderToString(){return LW(oO(FW,{theme:this.theme,store:this.store,eventBus:this.eventBus},this.getComponent()))}clear(){const{clearEvents:t}=this.getStoreDispatchers("calendar");t()}scrollToNow(t="auto"){this.eventBus.fire("scrollToNow",t)}calculateRenderRange(t){const{currentView:e}=this.getStoreState().view,{options:n}=this.getStoreState(),i=new LR(t);let r={start:new LR(i),end:new LR(i)};return"month"===e?r=this.calculateMonthRenderDate({renderDate:t,offset:0,monthOptions:n.month}).renderRange:"week"===e?r=this.calculateWeekRenderDate({renderDate:t,offset:0,weekOptions:n.week}).renderRange:"day"===e&&(r=this.calculateDayRenderDate({renderDate:t,offset:0}).renderRange),r}today(){const{setRenderDate:t}=this.getStoreDispatchers().view,e=new LR;t(e),this.renderRange=this.calculateRenderRange(e)}setDate(t){const{setRenderDate:e}=this.getStoreDispatchers("view"),n=new LR(t);e(n),this.renderRange=this.calculateRenderRange(n)}next(){this.move(1)}prev(){this.move(-1)}setCalendarColor(t,e){const{setCalendarColor:n}=this.getStoreDispatchers().calendar;n(t,e)}changeView(t){const{changeView:e}=this.getStoreDispatchers("view");e(t),this.renderRange=this.calculateRenderRange(this.getDate())}getElement(t,e){return this.getEvent(t,e)&&this.container?this.container.querySelector(`[data-event-id="${t}"][data-calendar-id="${e}"]`):null}setTheme(t){const{setTheme:e}=this.theme.getState().dispatch;e(t)}getOptions(){const{options:t,template:e}=this.getStoreState(),n=this.theme.getState(),i=tO(n,["dispatch"]);return QN(KN({},t),{template:e,theme:i})}setOptions(t){const e=t,{theme:n,template:i}=e,r=tO(e,["theme","template"]),{setTheme:a}=this.theme.getState().dispatch,{options:{setOptions:o},template:{setTemplate:s}}=this.getStoreDispatchers();sR(n)&&a(n),sR(i)&&s(i),o(r)}getDate(){const{renderDate:t}=this.getStoreState().view;return t}getDateRangeStart(){return this.renderRange.start}getDateRangeEnd(){return this.renderRange.end}getViewName(){const{currentView:t}=this.getStoreState("view");return t}setCalendars(t){const{setCalendars:e}=this.getStoreDispatchers().calendar;e(t)}openFormPopup(t){const{showFormPopup:e}=this.getStoreDispatchers().popup,n=new xV(t),{title:i,location:r,start:a,end:o,isAllday:s,isPrivate:l,state:u}=n;e({isCreationPopup:!0,event:n,title:i,location:r,start:a,end:o,isAllday:s,isPrivate:l,eventState:u})}clearGridSelections(){const{clearAll:t}=this.getStoreDispatchers().gridSelection;t()}fire(t,...e){return this.eventBus.fire(t,...e),this}off(t,e){return this.eventBus.off(t,e),this}on(t,e){return this.eventBus.on(t,e),this}once(t,e){return this.eventBus.once(t,e),this}}{constructor(t,e={}){super(t,e);const{defaultView:n="week"}=e;if(i=n,!Object.values(Wj).find((t=>t===i)))throw new bR(n);var i;this.render()}getComponent(){return oO(mW,null)}}class rU{constructor(){this.calendar=null,this.CurrentViewTitle=()=>Il(hl.value,"MMMM dd, yyyy")}static GetTimeTemplate(t){const e=pl.value.find((e=>e.id===t.id)),n=e?e.flagText:"",i=t.start?kl(t.start).format("HH:mm"):"",r=t.end?kl(t.end).format("HH:mm"):"";let a="";return n?"end-empty"===n?a=`On: ${i}`:"start-empty"===n&&(a=`Off: ${r}`):a=`On: ${i}&#10;Off: ${r}`,`\n      <span\n        title="${a}"\n        style="display: inline-block; cursor: pointer;">\n        ${"start-empty"===n?`<span>Off: ${t.end?kl(t.end).format("HH:mm"):""}</span>`:"end-empty"===n?`<span>On: ${t.start?kl(t.start).format("HH:mm"):""}</span>`:`\n              <span>On: ${t.start?kl(t.start).format("HH:mm"):""}</span><br/>\n              <span>Off: ${t.end?kl(t.end).format("HH:mm"):""}</span>\n            `}\n      </span>\n    `}InitVariables(t,e,n,i){this.selectedEventId=r(null),this.calendarRef=t,this.currentView=r("week"),this.isEventModalVisible=e,this.modalMode=n,this.eventForm=i}DefaultCalendarOptions(){return{defaultView:this.currentView.value,useFormPopup:!1,useDetailPopup:!1,week:{showTimezoneCollapseButton:!0,timezonesCollapsed:!0,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Holiday1","Holiday2"],visibleWeeksCount:1,visibleEventCount:9},month:{visibleWeeksCount:6},template:{time:t=>rU.GetTimeTemplate(t)},calendars:[{id:"1",name:"Schedule",color:"#ffffff",bgColor:"#1890ff",borderColor:"#1890ff"}]}}InitTuiCalendar(){if(!this.calendarRef.value)return void z.Error("= tuiCalendarUtil: Calendar ref is not available");const t=()=>{const t=["#1890ff"];return t[Math.floor(Math.random()*t.length)]},e=iU.prototype.createEvents;iU.prototype.createEvents=function(n){return z.Debug("= tuiCalendarUtil: Calendar.prototype.createEvents:",n),n.forEach((e=>{e.backgroundColor=t(),e.color="#fff",e.borderColor=e.backgroundColor})),e.call(this,n)};const n=iU.prototype.updateEvent;iU.prototype.updateEvent=function(e,i,r){return z.Debug("= tuiCalendarUtil: Calendar.prototype.updateEvent:",e,i,r),r.backgroundColor||(r.backgroundColor=t(),r.color="#fff",r.borderColor=r.backgroundColor),n.call(this,e,i,r)},this.calendar=new iU(this.calendarRef.value,this.DefaultCalendarOptions()),this.calendar?(hl.value=this.calendar.getDate().toDate(),this.BindBeforeCreateEvent(),this.BindBeforeUpdateEvent(),this.BindClickEvent(),this.BindSelectDateTime(),z.Debug("= tuiCalendarUtil: Calendar initialized successfully:",this.calendar)):z.Error("= tuiCalendarUtil: Failed to initialize calendar")}BindBeforeCreateEvent(){this.calendar.on("beforeCreateEvent",(t=>{z.Debug("= tuiCalendarUtil: Calendar beforeCreateEvent triggered:",t),this.modalMode.value="create",this.eventForm.title=t.title||"",this.eventForm.start=t.start||new Date,this.eventForm.end=t.end||new Date,this.isEventModalVisible.value=!0}))}BindBeforeUpdateEvent(){this.calendar.on("beforeUpdateEvent",(({event:t,changes:e})=>{var n;z.Debug("= tuiCalendarUtil: Calendar beforeUpdateEvent triggered:",t,e);const{id:i,calendarId:r}=t;null==(n=this.calendar)||n.updateEvent(i,r,e)}))}BindClickEvent(){this.calendar.on("clickEvent",(({event:t})=>{z.Debug("= tuiCalendarUtil: Calendar clickEvent triggered:",t),this.selectedEventId.value=t.id,this.modalMode.value="edit",this.eventForm.title=t.title||"",this.eventForm.start=t.start||new Date,this.eventForm.end=t.end||new Date,this.SetEventModalVisiblity(!0)}))}BindSelectDateTime(){this.calendar.on("selectDateTime",(t=>{z.Debug("= tuiCalendarUtil: Calendar Date selected:",fl,gl,ml,t);t.start.toLocaleString("en-US");const e=kl(t.start).toDate(),n=kl(t.end).toDate();this.modalMode.value="create",this.eventForm.title="",this.eventForm.start=e,this.eventForm.end=n;kl(t.start).startOf("week");const i=kl(t.start).day();let r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Holiday1","Holiday2"][i],a=`${r}-${i}-${Date.now()}`;this.eventForm.id=a,this.eventForm.group=r,this.SetEventModalVisiblity(!0)}))}SetEventModalVisiblity(t){this.isEventModalVisible.value=t}ResetEventForm(){this.eventForm.id="",this.eventForm.title="",this.eventForm.start=new Date,this.eventForm.end=new Date,this.eventForm.flagText="",this.eventForm.group="",this.eventForm.calendarId="1"}HandleModalOk(){z.Debug("= tuiCalendarUtil: handleModalOk called with eventForm:",this.eventForm),(this.eventForm.start||this.eventForm.end)&&("create"===this.modalMode.value?(this.ModalCreateEvent(),z.Debug("= tuiCalendarUtil: Creating new event with title:",this.eventForm)):"edit"===this.modalMode.value&&this.selectedEventId.value&&(this.ModalEditEvent(),z.Debug("= tuiCalendarUtil: Editing existing event with ID:",this.selectedEventId.value)),this.ResetEventForm(),this.SetEventModalVisiblity(!1),pl.value=vl.value,z.Debug("= tuiCalendarUtil: All calendar events:",pl.value,vl.value))}ModalCreateEvent(){var t,e,n;const i={id:this.eventForm.id,calendarId:"1",title:this.eventForm.title,start:this.eventForm.start,end:this.eventForm.end,flagText:this.eventForm.flagText||"",group:this.eventForm.group||"",startFlag:0===this.eventForm.start.getHours()&&0===this.eventForm.start.getMinutes()?1:this.eventForm.startFlag||0,endFlag:0===this.eventForm.end.getHours()&&0===this.eventForm.end.getMinutes()?1:this.eventForm.endFlag||0};null==(t=this.calendar)||t.createEvents([i]),vl.value.push(i),this.calendar&&(null==(n=(e=this.calendar).clearGridSelections)||n.call(e))}ModalEditEvent(){var t,e,n;const i=vl.value.find((t=>t.id===this.selectedEventId.value));z.Debug("= tuiCalendarUtil: Editing event with ID: Before",this.selectedEventId.value,i,this.eventForm);const r={id:this.selectedEventId.value,calendarId:"1",title:this.eventForm.title,start:this.eventForm.start,end:this.eventForm.end,flagText:i.flagText||"",group:i.group||"",startFlag:0===this.eventForm.start.getHours()&&0===this.eventForm.start.getMinutes()?1:this.eventForm.startFlag||0,endFlag:0===this.eventForm.end.getHours()&&0===this.eventForm.end.getMinutes()?1:this.eventForm.endFlag||0};null==(t=this.calendar)||t.updateEvent(r.id,"1",r);const a=vl.value.findIndex((t=>t.id===this.selectedEventId.value));-1!==a&&(vl.value[a]=r),this.calendar&&(null==(n=(e=this.calendar).clearGridSelections)||n.call(e))}HandleModalCancel(){this.isEventModalVisible.value=!1,this.ResetEventForm()}HandleDeleteEvent(){var t;if(z.Debug("= tuiCalendarUtil: handleDeleteEvent called with selectedEventId:",this.selectedEventId.value),this.selectedEventId.value){null==(t=this.calendar)||t.deleteEvent(this.selectedEventId.value,"1");const e=vl.value.findIndex((t=>t.id===this.selectedEventId.value));-1!==e&&vl.value.splice(e,1),this.isEventModalVisible.value=!1,this.ResetEventForm(),z.Debug("= tuiCalendarUtil: Event deleted successfully:",vl.value),z.Debug("= tuiCalendarUtil: Remaining events:"),this.calendar&&this.calendar.render()}}HideUIPanel(){const t=document.createElement("style");t.innerHTML="\n      .toastui-calendar-milestone,\n      .toastui-calendar-panel-resizer {\n      display: none !important;\n      }\n    ",document.head.appendChild(t);const e=document.createElement("style");e.innerHTML="\n      .toastui-calendar-task,\n      .toastui-calendar-panel-resizer {\n      display: none !important;\n      }\n    ",document.head.appendChild(e);const n=document.createElement("style");n.innerHTML="\n      .toastui-calendar-allday-panel,\n      .toastui-calendar-allday,\n      .toastui-calendar-panel-resizer {\n      display: none !important;\n      }\n    ",document.head.appendChild(n)}InitTitle(){if(cl.value&&cl.value.t3Entry){const{id:t,label:e,description:n}=cl.value.t3Entry;yl.value=[t,e,n].filter(Boolean).join(", ")}if(cl.value&&cl.value.t3Entry){const{command:t,control:e,description:n,id:i,label:r,type:a}=cl.value.t3Entry;_l.value=[t,e,n,i,r,a].filter(Boolean).join(" / ")}z.Debug("= tuiCalendarUtil: InitTitle called, modalTitle, schInfo:",yl.value,"schInfo:",_l.value,cl.value.t3Entry),z.Debug("= tuiCalendarUtil: time:",JSON.stringify(cl.value.t3Entry.time,null,0))}InitTestData(){return[[{hours:2,minutes:59,flag:0},{hours:3,minutes:0,flag:0},{hours:9,minutes:0,flag:0},{hours:21,minutes:0,flag:0},{hours:23,minutes:0,flag:0},{hours:0,minutes:0,flag:0},{hours:0,minutes:0,flag:0},{hours:0,minutes:0,flag:0}],[{hours:0,minutes:0,flag:1},{hours:3,minutes:0,flag:0},{hours:9,minutes:0,flag:0},{hours:21,minutes:0,flag:0},{hours:23,minutes:0,flag:0},{hours:0,minutes:0,flag:0},{hours:0,minutes:0,flag:0},{hours:0,minutes:0,flag:0}]]}InitT3Data(){var t,e;let n=(null==(e=null==(t=cl.value)?void 0:t.t3Entry)?void 0:e.time)||[];return n=this.InitTestData(),n}InitDefaultEvents(){var t;const e=this.InitT3Data(),n=this.ConvertTimeArrayToEvents(e),i=vl.value&&vl.value.length>0?vl.value:n;vl.value=i,pl.value=i,null==(t=this.calendar)||t.createEvents(i)}CopyMondayToWeekdays(){var t,e;const n=vl.value.filter((t=>"Monday"===t.group));z.Debug("= tuiCalendarUtil: CopyMondayToWeekdays called, found Monday events:",vl.value,n);const i=["Tuesday","Wednesday","Thursday","Friday"];vl.value=vl.value.filter((t=>!i.includes(t.group||""))),i.forEach(((t,e)=>{n.forEach(((n,i)=>{const r=kl(n.start).startOf("week"),a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Holiday1","Holiday2"].indexOf(t),o=kl(r).add(a,"day").hour(kl(n.start).hour()).minute(kl(n.start).minute()).second(0).toDate(),s=kl(r).add(a,"day").hour(kl(n.end).hour()).minute(kl(n.end).minute()).second(0).toDate();vl.value.push(H({...n,id:`${t}-${e}-${i}-${Date.now()}`,group:t,start:o,end:s}))}))})),pl.value=[...vl.value],null==(t=this.calendar)||t.clear(),null==(e=this.calendar)||e.createEvents(vl.value),z.Debug("= tuiCalendarUtil: CopyMondayToWeekdays completed, updated events:",vl.value,pl.value)}RefreshFromT3000(){var t;null==(t=this.calendar)||t.clear(),vl.value=[],pl.value=[],this.InitDefaultEvents()}ClearAll(){var t;null==(t=this.calendar)||t.clear(),vl.value=[],pl.value=[],this.InitDefaultEvents()}ConvertTimeArrayToEvents(t){const e=[6,0,1,2,3,4,5,7,8],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Holiday1","Holiday2"],i=kl().startOf("week"),r=[];for(let a=0;a<e.length;a++){const o=t[e[a]];if(Array.isArray(o)&&!(o.length<2))for(let t=0;t<o.length-1;t+=2){let e=o[t],s=o[t+1];if(e&&s&&0===e.hours&&0===e.minutes&&0===e.flag&&0===s.hours&&0===s.minutes&&0===s.flag)continue;let l,u,c="";if(!e||0!==e.hours||0!==e.minutes||0!==e.flag||0===s.hours&&0===s.minutes&&0===s.flag?!s||0!==s.hours||0!==s.minutes||0!==s.flag||0===e.hours&&0===e.minutes&&0===e.flag||(s={...e},e={...e},c="end-empty"):(e={...s},s={...s},c="start-empty"),7===a||8===a)l=new Date(9999,0,1,e.hours,e.minutes,0,0),u=new Date(9999,0,1,s.hours,s.minutes,0,0);else{let t=i.add(a,"day");l=t.hour(e.hours).minute(e.minutes).second(0).toDate(),u=t.hour(s.hours).minute(s.minutes).second(0).toDate()}const d=`${`${e.hours.toString().padStart(2,"0")}:${e.minutes.toString().padStart(2,"0")}`} - ${`${s.hours.toString().padStart(2,"0")}:${s.minutes.toString().padStart(2,"0")}`}`;r.push({id:`${n[a]}-${a}-${t}`,calendarId:"1",title:d,start:l,end:u,group:n[a]||`Day${a+1}`,flagText:c,startFlag:e.flag,endFlag:s.flag})}}return z.Debug("= tuiCalendarUtil: Converted events:",r),r}SaveDataToT3000(){const t=this.TransferEventsToT3Format(),e=this.PrepareMsgData(t);Ns.value?ws.WebClient.UpdateEntry(e):ws.WsClient.UpdateEntry(e)}PrepareMsgData(t){if(null==cl.value||null==cl.value.t3Entry)return;const e=t,n=cl.value.t3Entry.pid,i=cl.value.t3Entry.index;cl.value.t3Entry.type;return{action:3,field:"value",value:-1,data:{time:e},panelId:n,entryIndex:i,entryType:16}}TransferEventsToT3Format(){const t=Array.from({length:9},(()=>Array.from({length:8},(()=>({hours:0,minutes:0,flag:0}))))),e={};for(const n of vl.value)n.group&&(e[n.group]||(e[n.group]=[]),e[n.group].push(n));return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","Holiday1","Holiday2"].forEach(((n,i)=>{var r,a;const o=(e[n]||[]).sort(((t,e)=>{var n,i,r,a;return(null!=(i=null==(n=t.start)?void 0:n.getTime())?i:0)-(null!=(a=null==(r=e.start)?void 0:r.getTime())?a:0)}));let s=0;for(const e of o){if(s>=8)break;if("start-empty"===e.flagText?t[i][s]={hours:0,minutes:0,flag:0}:t[i][s]={hours:e.start?e.start.getHours():0,minutes:e.start?e.start.getMinutes():0,flag:null!=(r=e.startFlag)?r:0},s++,s>=8)break;"end-empty"===e.flagText?t[i][s]={hours:0,minutes:0,flag:0}:t[i][s]={hours:e.end?e.end.getHours():0,minutes:e.end?e.end.getMinutes():0,flag:null!=(a=e.endFlag)?a:0},s++}})),z.Debug("= tuiCalendarUtil: TransferEventsToT3Format completed, result:",pl.value,t),t}GoToPrev(){var t;null==(t=this.calendar)||t.prev(),this.calendar&&(hl.value=this.calendar.getDate().toDate())}GoToNext(){var t;null==(t=this.calendar)||t.next(),this.calendar&&(hl.value=this.calendar.getDate().toDate())}GoToToday(){var t;null==(t=this.calendar)||t.today(),this.calendar&&(hl.value=this.calendar.getDate().toDate())}}const aU={class:"schedule-calendar-container"},oU={style:{display:"flex","justify-content":"flex-start",gap:"4px",height:"32px"}},sU={class:"view-title"},lU={key:0,style:{display:"flex","justify-content":"flex-start",gap:"8px"}},uU={style:{display:"flex","justify-content":"flex-start",gap:"4px"}},cU=e({name:"ScheduleCalendar",__name:"ScheduleCalendar",setup(t){kl.locale("en");const e=r(null),a=r(!1),c=r("create"),h=H({id:"",calendarId:"1",title:"",start:new Date,end:new Date,group:"",flagText:"",startFlag:0,endFlag:0}),f=D({get:()=>kl(h.start),set:t=>{t&&(h.start=t.toDate())}}),g=D({get:()=>kl(h.end),set:t=>{t&&(h.end=t.toDate())}}),m=new rU;z.Debug("ScheduleCalendar","TuiCalendarUtil initialized",m);const v=D((()=>{try{return m.CurrentViewTitle()}catch(t){return z.Error("ScheduleCalendar","Failed to get current view title",t),"Schedule Calendar"}})),y=()=>{try{m.HandleModalOk()}catch(t){z.Error("ScheduleCalendar","Failed to handle modal OK",t)}},_=()=>{try{m.HandleModalCancel()}catch(t){z.Error("ScheduleCalendar","Failed to handle modal cancel",t)}},x=()=>{try{m.HandleDeleteEvent()}catch(t){z.Error("ScheduleCalendar","Failed to delete event",t)}},b=()=>{try{xl.value=!1,Ms.SetNavVisiblity(!0),m.SaveDataToT3000(),z.Debug("ScheduleCalendar","Data saved successfully")}catch(t){z.Error("ScheduleCalendar","Failed to save data",t)}},M=()=>{try{xl.value=!1,Ms.SetNavVisiblity(!0)}catch(t){z.Error("ScheduleCalendar","Failed to cancel modal",t)}},S=()=>{try{m.CopyMondayToWeekdays()}catch(t){z.Error("ScheduleCalendar","Failed to copy Monday to weekdays",t)}},C=()=>{try{m.RefreshFromT3000()}catch(t){z.Error("ScheduleCalendar","Failed to refresh from T3000",t)}},k=()=>{try{m.ClearAll()}catch(t){z.Error("ScheduleCalendar","Failed to clear all data",t)}};return I((()=>{try{m.InitVariables(e,a,c,h),m.InitTuiCalendar(),m.HideUIPanel(),m.InitTitle(),m.InitDefaultEvents(),z.Debug("ScheduleCalendar","Component mounted and initialized successfully")}catch(t){z.Error("ScheduleCalendar","Failed to initialize component on mount",t)}})),(t,r)=>{const m=R("a-col"),I=R("a-button"),D=R("a-row"),T=R("a-modal"),E=R("a-switch"),L=R("a-form-item"),P=R("a-time-picker"),N=R("a-form"),O=R("a-config-provider");return n(),d(O,{theme:{token:{colorPrimary:"#0064c8"}}},{default:u((()=>[l(T,{open:w(xl),"onUpdate:open":r[0]||(r[0]=t=>B(xl)?xl.value=t:null),title:w(yl),width:950,style:{top:"30px",height:"600px"},wrapClassName:"t3-modal",onOk:b,onCancel:M,destroyOnClose:"",keyboard:"true"},{footer:u((()=>[...r[9]||(r[9]=[])])),default:u((()=>[o("div",aU,[l(D,{type:"flex",justify:"space-between",align:"middle",style:{"margin-bottom":"10px"}},{default:u((()=>[l(m,{style:{"margin-top":"5px"}},{default:u((()=>[o("div",oU,[o("label",sU,s(v.value),1)])])),_:1}),l(m,null,{default:u((()=>[w(Os)?A("",!0):(n(),i("div",lU,[l(I,{class:"t3-btn",size:"small",onClick:S,type:"primary"},{default:u((()=>[...r[4]||(r[4]=[p("Copy to Monday - Friday",-1)])])),_:1}),l(I,{class:"t3-btn",size:"small",onClick:C},{default:u((()=>[...r[5]||(r[5]=[p("Reset",-1)])])),_:1}),l(I,{class:"t3-btn",size:"small",onClick:k},{default:u((()=>[...r[6]||(r[6]=[p("Clear All",-1)])])),_:1}),l(I,{class:"t3-btn",size:"small",onClick:b},{default:u((()=>[...r[7]||(r[7]=[p("Save Data",-1)])])),_:1}),l(I,{class:"t3-btn",size:"small",onClick:M},{default:u((()=>[...r[8]||(r[8]=[p("Cancel",-1)])])),_:1})]))])),_:1})])),_:1})]),o("div",{ref_key:"calendarRef",ref:e,class:"calendar-container"},null,512)])),_:1},8,["open","title"]),l(T,{open:a.value,"onUpdate:open":r[3]||(r[3]=t=>a.value=t),width:300,title:"create"===c.value?"Create Schedule":"Edit Schedule",wrapClassName:"t3-sub-modal",onOk:y,onCancel:_,destroyOnClose:"",keyboard:"true"},{footer:u((()=>[o("div",uU,[l(I,{class:"t3-btn",key:"back",onClick:_},{default:u((()=>[...r[10]||(r[10]=[p("Cancel",-1)])])),_:1}),"edit"===c.value?(n(),d(I,{class:"t3-btn",key:"delete",danger:"",onClick:x},{default:u((()=>[...r[11]||(r[11]=[p("Delete",-1)])])),_:1})):A("",!0),l(I,{class:"t3-btn",key:"submit",type:"primary",onClick:y},{default:u((()=>[...r[12]||(r[12]=[p("Save",-1)])])),_:1})])])),default:u((()=>[l(N,{model:h,layout:"vertical"},{default:u((()=>[l(D,{gutter:"16",align:"middle",style:{"margin-bottom":"0","font-size":"12px"}},{default:u((()=>[l(m,{span:6},{default:u((()=>[l(L,{label:"On/Off",name:"isOnStart",style:{"margin-bottom":"0"}},{default:u((()=>[l(E,{checked:!0,disabled:!0,"checked-children":"On","un-checked-children":"Off"})])),_:1})])),_:1}),l(m,{span:18},{default:u((()=>[l(L,{label:"Start Date",name:"start",style:{"margin-bottom":"0"}},{default:u((()=>[l(D,{gutter:"8"},{default:u((()=>[l(m,null,{default:u((()=>[l(P,{value:f.value,"onUpdate:value":r[1]||(r[1]=t=>f.value=t),format:"HH:mm","minute-step":1,style:{width:"140px"}},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),l(D,{gutter:"16",align:"middle",style:{"margin-bottom":"0","font-size":"12px"}},{default:u((()=>[l(m,{span:6},{default:u((()=>[l(L,{label:"On/Off",name:"isOnEnd",style:{"margin-bottom":"0"}},{default:u((()=>[l(E,{checked:!1,disabled:!0,"checked-children":"On","un-checked-children":"Off"})])),_:1})])),_:1}),l(m,{span:18},{default:u((()=>[l(L,{label:"End Date",name:"end",style:{"margin-bottom":"0"}},{default:u((()=>[l(D,{gutter:"8"},{default:u((()=>[l(m,null,{default:u((()=>[l(P,{value:g.value,"onUpdate:value":r[2]||(r[2]=t=>g.value=t),format:"HH:mm","minute-step":1,style:{width:"140px"}},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["open","title"])])),_:1})}}});const dU={class:"annual-calendar-container"},hU={style:{display:"flex","justify-content":"flex-start",gap:"4px",height:"32px"}},pU={class:"view-title"},fU={key:0,style:{display:"flex","justify-content":"flex-start",gap:"8px"}},gU={style:{display:"flex","flex-wrap":"wrap",gap:"16px"}},mU={key:0},vU={key:1,style:{width:"24px",height:"24px",margin:"auto"}},yU=e({__name:"ScheduleAnnual",setup(t){const e=["January","February","March","April","May","June","July","August","September","October","November","December"],r=D((()=>kl().year())),a=D((()=>e.map(((t,e)=>kl(`${r.value}-${String(e+1).padStart(2,"0")}-01`))))),c=t=>{var n;const i=e[t.month()],r=t.format("YYYY-MM-DD");return(null==(n=wl.value[i])?void 0:n.includes(r))||!1},h=t=>{const e=t%19+1,n=Math.floor(t/100)+1,i=Math.floor(3*n/4)-12;let r=(11*e+20+(Math.floor((8*n+5)/25)-5)-i)%30;(25===r&&e>11||24===r)&&r++;const a=44-r;let o=a+7-(Math.floor(5*t/4)-i-10+a)%7;if(o>31){return`${t}-04-${String(o-31).padStart(2,"0")}`}return`${t}-03-${String(o).padStart(2,"0")}`},f=t=>{const e=kl(`${t}-01-01`);return(1===e.day()?e:e.add((8-e.day())%7,"day")).add(14,"day").format("YYYY-MM-DD")},g=t=>{const e=kl(`${t}-02-01`);return(1===e.day()?e:e.add((8-e.day())%7,"day")).add(14,"day").format("YYYY-MM-DD")},y=t=>{const e=kl(`${t}-05-31`);return(1===e.day()?e:e.subtract((e.day()+6)%7,"day")).format("YYYY-MM-DD")},_=t=>{const e=kl(`${t}-09-01`);return(1===e.day()?e:e.add((8-e.day())%7,"day")).format("YYYY-MM-DD")},x=t=>{const e=kl(`${t}-10-01`);return(1===e.day()?e:e.add((8-e.day())%7,"day")).add(7,"day").format("YYYY-MM-DD")},b=t=>{const e=kl(`${t}-11-01`);return(4===e.day()?e:e.add((11-e.day())%7,"day")).add(21,"day").format("YYYY-MM-DD")},M=t=>{const e=kl(`${t}-05-01`);return(0===e.day()?e:e.add(7-e.day(),"day")).add(7,"day").format("YYYY-MM-DD")},S=t=>{const e=kl(`${t}-06-01`);return(0===e.day()?e:e.add(7-e.day(),"day")).add(14,"day").format("YYYY-MM-DD")};D((()=>{return[{date:`${t=r.value}-01-01`,name:"New Year's Day"},{date:`${t}-06-19`,name:"Juneteenth"},{date:`${t}-07-04`,name:"Independence Day"},{date:`${t}-11-11`,name:"Veterans Day"},{date:`${t}-12-25`,name:"Christmas Day"},{date:f(t),name:"Martin Luther King Jr. Day"},{date:g(t),name:"Presidents' Day"},{date:y(t),name:"Memorial Day"},{date:_(t),name:"Labor Day"},{date:x(t),name:"Columbus Day"},{date:b(t),name:"Thanksgiving Day"},{date:h(t),name:"Easter Sunday"},{date:M(t),name:"Mother's Day"},{date:S(t),name:"Father's Day"},{date:`${t}-02-14`,name:"Valentine's Day"},{date:`${t}-03-17`,name:"St. Patrick's Day"},{date:`${t}-10-31`,name:"Halloween"},{date:`${t}-12-31`,name:"New Year's Eve"},{date:`${t}-11-01`,name:"All Saints' Day"}].filter((t=>t.date&&10===t.date.length));var t}));const C=(t,{source:n})=>{const i=a.value.find((e=>e.month()===t.month()&&e.year()===t.year()));if(!i||t.month()!==i.month())return;const r=t.month(),o=e[r],s=t.format("YYYY-MM-DD");wl.value[o]||(wl.value[o]=[]);const l=wl.value[o].indexOf(s);-1===l?wl.value[o].push(s):wl.value[o].splice(l,1)},k=()=>{Object.keys(wl.value).forEach((t=>{wl.value[t]=[]})),P()},T=()=>{Object.keys(wl.value).forEach((t=>{wl.value[t]=[]}))},E=()=>{try{bl.value=!1,Ms.SetNavVisiblity(!0);const t=N(),e=L(t);Ns.value?ws.WebClient.UpdateEntry(e):ws.WsClient.UpdateEntry(e)}catch(t){z.Error(`Error saving annual schedule: ${t}`)}},L=t=>{if(null==cl.value||null==cl.value.t3Entry)return;const e=t,n=cl.value.t3Entry.pid,i=cl.value.t3Entry.index;cl.value.t3Entry.type;const r={action:3,field:"value",value:-1,data:{data:e},panelId:n,entryIndex:i,entryType:17};return z.Debug(`PrepareMsgData: ${JSON.stringify(r)}`),r},P=()=>{var t,n;let i;if((null==(n=null==(t=cl.value)?void 0:t.t3Entry)?void 0:n.data)&&Array.isArray(cl.value.t3Entry.data))i=cl.value.t3Entry.data;else{i=new Array(46).fill(0),i[0]=65,i[4]=32;const t=59+2,e=t%8;i[Math.floor(t/8)]=1<<e}Object.keys(wl.value).forEach((t=>{wl.value[t]=[]}));var a;let o;o=(a=r.value)%4==0&&(a%100!=0||a%400==0)?[0,31,60,91,121,152,182,213,244,274,305,335]:[0,31,59,90,120,151,181,212,243,273,304,334];for(let s=0;s<12;s++){const t=e[s];let n=0;if(0===s)for(let e=0;e<4&&e<i.length;e++)n|=i[e]<<8*e;else{const t=Math.floor(o[s]/8),e=o[s]%8;let r=BigInt(0);for(let n=0;n<5&&t+n<i.length;n++)r|=BigInt(i[t+n])<<BigInt(8*n);r>>=BigInt(e),r&=BigInt(4294967295),n=Number(r)}for(let e=0;e<31;e++)if(n>>e&1){const n=e+1,i=`${r.value}-${String(s+1).padStart(2,"0")}-${String(n).padStart(2,"0")}`,a=kl(i);a.isValid()&&a.month()===s&&n>0&&n<=31&&(wl.value[t]||(wl.value[t]=[]),wl.value[t].includes(i)||wl.value[t].push(i))}}},N=()=>{const t=new Array(46).fill(0);var n;let i;i=(n=r.value)%4==0&&(n%100!=0||n%400==0)?[0,31,60,91,121,152,182,213,244,274,305,335]:[0,31,59,90,120,151,181,212,243,273,304,334];for(let r=0;r<12;r++){const n=e[r];let a=0;if((wl.value[n]||[]).forEach((t=>{const e=kl(t);if(e.isValid()&&e.month()===r){const t=e.date();t>=1&&t<=31&&(a|=1<<t-1)}})),0===r)for(let e=0;e<4;e++)t[e]=a>>8*e&255;else{const e=i[r];for(let n=0;n<31;n++)if(a>>n&1){const i=e+n,r=Math.floor(i/8),a=i%8;r<t.length&&(t[r]|=1<<a)}}}return t};return I((()=>{P()})),(t,h)=>(n(),d(w(Ll),{theme:{token:{colorPrimary:"#0064c8"}}},{default:u((()=>[l(w(Dl),{open:w(bl),"onUpdate:open":h[0]||(h[0]=t=>B(bl)?bl.value=t:null),width:"75vw",style:{top:"20px"},footer:null,wrapClassName:"t3-annual-modal",destroyOnClose:"",keyboard:"true",closable:!0},{default:u((()=>[o("div",dU,[l(w(Tl),{type:"flex",justify:"space-between",align:"middle",style:{"margin-bottom":"20px"}},{default:u((()=>[l(w(Al),{style:{"margin-top":"5px","margin-left":"10px"}},{default:u((()=>[o("div",hU,[o("label",pU,s(`Annual Schedule for ${r.value}`),1)])])),_:1}),l(w(Al),{style:{"margin-right":"40px"}},{default:u((()=>[w(Os)?A("",!0):(n(),i("div",fU,[l(w(Pl),{class:"t3-btn",size:"small",type:"primary",onClick:k},{default:u((()=>[...h[1]||(h[1]=[p("Refresh From T3000",-1)])])),_:1}),l(w(Pl),{class:"t3-btn",size:"small",onClick:T},{default:u((()=>[...h[2]||(h[2]=[p("Clear All",-1)])])),_:1}),l(w(Pl),{class:"t3-btn",size:"small",onClick:E},{default:u((()=>[...h[3]||(h[3]=[p("Save Data",-1)])])),_:1})]))])),_:1})])),_:1})]),o("div",gU,[(n(!0),i(m,null,v(a.value,(t=>(n(),d(w(El),{key:t.format("YYYY-MM"),value:t,fullscreen:!1,"header-render":()=>(({value:t})=>j("div",{style:"padding: 0px 0px;margin-left:10px;margin-bottom:5px"},[j("span",{style:"font-weight: bold; font-size: 14px;"},e[t.month()])]))({value:t}),onSelect:C,style:{flex:"1 1 220px","min-width":"220px","max-width":"1fr","font-size":"12px"}},{dateFullCellRender:u((({current:e})=>[e.month()===t.month()?(n(),i("div",mU,[o("div",{style:G(c(e)?"background: linear-gradient(135deg, #1890ff 0%, #4bd666 100%); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; margin: auto;":"width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; margin: auto;")},s(e.date()),5)])):(n(),i("div",vU))])),_:2},1032,["value","header-render"])))),128))])])),_:1},8,["open"])])),_:1}))}});class _U{static safeDestroy(t){try{if(!t||!t.value)return!1;const e=t.value;return"function"==typeof e.destroy?(e.destroy(),!0):!(!e.$_selecto||"function"!=typeof e.$_selecto.destroy)&&(e.$_selecto.destroy(),!0)}catch(e){return!1}}static safeDestroyWithSelectoFix(t){try{if(!t||!t.value)return!1;const e=t.value;return void 0!==e.$_selecto&&null!==e.$_selecto&&(null!==e.$_selecto.gesto&&void 0!==e.$_selecto.gesto&&("function"==typeof e.$_selecto.destroy?(e.$_selecto.destroy(),!0):"function"==typeof e.destroy&&(e.destroy(),!0)))}catch(e){return e.message&&e.message.includes("$_selecto")||e.message&&e.message.includes("gesto"),!1}}static isInitialized(t){try{if(!t||!t.value)return!1;const e=t.value;return void 0!==e.$_selecto&&null!==e.$_selecto||"function"==typeof e.destroy}catch(e){return!1}}static safeCall(t,e,...n){try{if(!t||!t.value)return null;const i=t.value;return void 0===i.$_selecto||null===i.$_selecto?null:i.$_selecto&&"function"==typeof i.$_selecto[e]?i.$_selecto[e](...n):"function"==typeof i[e]?i[e](...n):null}catch(i){return i.message&&i.message.includes("$_selecto"),null}}static addErrorHandling(t){try{if(!this.isInitialized(t))return;const e=t.value;["clickTarget","setSelectedTargets"].forEach((t=>{if("function"==typeof e[t]){const n=e[t];e[t]=(...t)=>{try{return n.apply(e,t)}catch(i){return null}}}}))}catch(e){}}static universalDestroy(t){const e=[()=>this.safeDestroyWithSelectoFix(t),()=>this.safeDestroyWithGestoFix(t),()=>this.safeDestroy(t)];for(let i=0;i<e.length;i++)try{if(e[i]())return!0}catch(n){}try{t&&t.value&&(t.value=null)}catch(n){}return!1}}const xU={class:"full-area"},bU={class:"top-area"},wU={class:"main-area"},MU={key:0,class:"side-bar"},SU={class:"work-area"},CU={class:"document-area"},kU={key:0,class:"c-ruler"},IU={key:1,class:"h-ruler"},DU={key:2,class:"v-ruler"},TU={key:3,class:"hv-grid"},AU={key:0},EU={key:1},LU={key:0},PU={key:1},NU=["id"],OU={class:"flex"},zU={class:"flex flex-col items-center mt-4"},RU={class:"text-xl text-center"},VU={class:"flex"},FU={class:"flex flex-col items-center mt-4"},BU={class:"text-xl text-center"};var HU=il({__name:"IndexPage",setup(e){var a;b((t=>({"3193affa":w(Xs).widthOffset,"14446a8e":w(Xs).heightOffset})));bt({title:"HVAC Drawer"});const x=new st,M=xt(),L=r(null),P=r([]),N=r({...Qs[0],type:"default"}),R=r(!1),V=r([0,0]),F=r(!0),B=r(!1),H=["Duct","Wall","Int_Ext_Wall"],j=r({addedCount:0,active:!1,uploadBtnLoading:!1,data:null}),Q=r(!1),ot=D((()=>null===js.value.loadingPanel?100:parseInt(100*(js.value.loadingPanel+1/js.value.panelsList.length)))),lt=r(!1),ut=ws.IdxPage.zoom;const ct=r({x:0,y:0}),dt=r(null);function ht(t,e){Fs.value.active=t,Fs.value.data=e}function ft(){ws.DeviceOpt.clearDirtyCurrentDevice(),Fs.value.active=!0,Rs.value.selectedTarget=[],Rs.value.selectedTargets=[],Rs.value.activeItemIndex=null,ws.DeviceOpt.refreshGraphicPanelElementCount(Fs.value.data)}function gt(t){ct.value.x=t.clientX-Ws.left,ct.value.y=t.clientY-Ws.top;const e=1/Rs.value.viewportTransform.scale;if(R.value&&H.includes(N.value.name)&&null!==Rs.value.activeItemIndex){const n=t.ctrlKey,i=(t.clientX-Ws.left-Rs.value.viewportTransform.x)*e,r=(t.clientY-Ws.top-Rs.value.viewportTransform.y)*e,a=i-V.value[0],o=r-V.value[1];let s=Math.atan2(o,a)*(180/Math.PI);n&&(s=5*Math.round(s/5));const l=Math.sqrt(a*a+o*o);Rs.value.items[Rs.value.activeItemIndex].rotate=s,Rs.value.items[Rs.value.activeItemIndex].width=l,wt()}}function wt(){if(dt.value)for(const t of dt.value)t.refresh&&t.refresh()}function Mt(t){"Move Object"!==t&&setTimeout((()=>{he(!1,!1),wt()}),200),Hs.value=[],Bs.value.unshift({title:t,state:Es.exports.cloneDeep(Rs.value)}),Bs.value.length>20&&Bs.value.pop()}function St(t){_U.safeCall(L,"clickTarget",t.inputEvent,t.inputTarget)}function Ct(t){Mt("Move Object")}function kt(t){Rs.value.items.find((e=>`moveable-item-${e.id}`===t.target.id)),t.target.style.transform=t.transform}function It(t){if(t.lastEvent){Rs.value.items.find((e=>`moveable-item-${e.id}`===t.target.id)).translate=t.lastEvent.beforeTranslate,he(!1,!1),wt()}else Bs.value.shift()}function Dt(t){Mt("Move Group"),t.events.forEach(((t,e)=>{const n=Rs.value.items.findIndex((e=>`moveable-item-${e.id}`===t.target.id));t.set(Rs.value.items[n].translate)}))}function Tt(t){t.events.forEach(((t,e)=>{const n=Rs.value.items.findIndex((e=>`moveable-item-${e.id}`===t.target.id));Rs.value.items[n].translate=t.beforeTranslate}))}function At(t){t.lastEvent?wt():Bs.value.shift()}function Et(t){const e=t.inputEvent.target;(Vs.value.isMoveableElement(e)||Rs.value.selectedTargets.some((t=>t===e||t.contains(e))))&&t.stop()}function Lt(t){var e;if(Rs.value.selectedTargets=t.selected,(null==t?void 0:t.selected)&&!(null==(e=null==t?void 0:t.inputEvent)?void 0:e.ctrlKey)){const e=Rs.value.items.filter((e=>t.selected.some((t=>t.id===`moveable-item-${e.id}`))));[...new Set(e.filter((t=>t.group)).map((t=>t.group)))].forEach((t=>{!function(t){const e=[];Rs.value.items.filter((e=>e.group===t&&!Rs.value.selectedTargets.some((t=>t.id===`moveable-item-${e.id}`)))).forEach((t=>{const n=document.querySelector(`#moveable-item-${t.id}`);e.push(n)})),Rs.value.selectedTargets=Rs.value.selectedTargets.concat(e),_U.safeCall(L,"setSelectedTargets",Rs.value.selectedTargets)}(t)}))}1===Rs.value.selectedTargets.length?Rs.value.activeItemIndex=Rs.value.items.findIndex((t=>`moveable-item-${t.id}`===Rs.value.selectedTargets[0].id)):Rs.value.activeItemIndex=null,t.isDragStart&&(t.inputEvent.preventDefault(),setTimeout((()=>{Vs.value.dragStart(t.inputEvent)}))),Rs.value.selectedTargets.length>1&&!Os.value?setTimeout((()=>{Q.value=!0}),100):Q.value=!1,hs.refreshMoveableGuides(),setTimeout((()=>{pt.Hvac.PageMain.SetWallDimensionsVisible("select",R.value,Rs,null)}),100)}function Pt(t){Mt("Resize object");const e=Rs.value.items.findIndex((e=>`moveable-item-${e.id}`===t.target.id));t.setOrigin(["%","%"]),t.dragStart&&t.dragStart.set(Rs.value.items[e].translate)}function Nt(t){const e=Rs.value.items.find((e=>`moveable-item-${e.id}`===t.target.id));t.target.style.width=`${t.width}px`,t.target.style.height=`${t.height}px`,t.target.style.transform=`translate(${t.drag.beforeTranslate[0]}px, ${t.drag.beforeTranslate[1]}px) rotate(${e.rotate}deg) scaleX(${e.scaleX}) scaleY(${e.scaleY})`}function Ot(t){if(null===t.lastEvent||void 0===t.lastEvent)return;const e=Rs.value.items.findIndex((e=>{var n,i;return`moveable-item-${e.id}`===(null==(i=null==(n=null==t?void 0:t.lastEvent)?void 0:n.target)?void 0:i.id)}));Rs.value.items[e].width=t.lastEvent.width,Rs.value.items[e].height=t.lastEvent.height,Rs.value.items[e].translate=t.lastEvent.drag.beforeTranslate,pt.Hvac.PageMain.UpdateExteriorWallStroke(Rs,e,t.lastEvent.height),wt()}function zt(t){Mt("Rotate object")}function Rt(t){Rs.value.items.find((e=>`moveable-item-${e.id}`===t.target.id)).rotate=t.rotate}function Vt(t){wt()}function Ft(t){wt()}function Bt(t){B.value=!0}function Ht(t){t.events.forEach(((t,e)=>{t.target.style.width=`${t.width}px`,t.target.style.height=`${t.height}px`,t.target.style.transform=t.drag.transform}))}function Gt(t){t.events.forEach((t=>{const e=Rs.value.items.findIndex((e=>`moveable-item-${e.id}`===t.lastEvent.target.id));Rs.value.items[e].width=t.lastEvent.width,Rs.value.items[e].height=t.lastEvent.height,Rs.value.items[e].translate=t.lastEvent.drag.beforeTranslate})),wt(),B.value=!1}function jt(t){Mt("Rotate Group"),t.events.forEach((t=>{const e=Rs.value.items.findIndex((e=>`moveable-item-${e.id}`===t.target.id));t.set(Rs.value.items[e].rotate),t.dragStart&&t.dragStart.set(Rs.value.items[e].translate)}))}function Wt(t){t.events.forEach(((t,e)=>{const n=Rs.value.items.findIndex((e=>`moveable-item-${e.id}`===t.target.id));Rs.value.items[n].translate=t.drag.beforeTranslate,Rs.value.items[n].rotate=t.rotate}))}function Ut(t,e,n=!0){var i;n&&Mt(`Add ${null!=(i=null==t?void 0:t.type)?i:""}`),Rs.value.itemsCount++,t.id=Rs.value.itemsCount,t.group=e,t.settings.titleColor||(t.settings.titleColor="inherit"),t.settings.bgColor||(t.settings.bgColor="inherit"),t.settings.textColor||(t.settings.textColor="inherit"),t.settings.fontSize||(t.settings.fontSize=16),Rs.value.items.push(t);const r=document.querySelectorAll(".moveable-item");return Rs.value.elementGuidelines=[],Array.from(r).forEach((function(t){Rs.value.elementGuidelines.push(t)})),ws.DeviceOpt.refreshGraphicPanelElementCount(Fs.value.data),t}function Yt(t){var e;const n={width:t.rect.width,height:t.rect.height},i={clientX:t.clientX,clientY:t.clientY,top:t.rect.top,left:t.rect.left};if(("Pointer"===N.value.name||n.width<20||n.height<20)&&!H.includes(N.value.name))return void(R.value=!1);H.includes(N.value.name)&&n.height<20&&(n.height=N.value.height);const r=$t(n,i);r&&H.includes(null!=(e=null==r?void 0:r.type)?e:"")&&setTimeout((()=>{R.value=!0,Rs.value.selectedTargets=[],Rs.value.items[Rs.value.activeItemIndex].rotate=0,V.value=Es.exports.cloneDeep(r.translate)}),100)}function $t(t,e,n){var i;if("libItem"===(n=n||N.value).type)return void function(t,e,n){const i=[],r=[];Rs.value.groupCount++,t.forEach((t=>{r.push(ne(t,Rs.value.groupCount))})),setTimeout((()=>{r.forEach((t=>{const e=document.querySelector(`#moveable-item-${t.id}`);i.push(e)})),Rs.value.selectedTargets=i,_U.safeCall(L,"setSelectedTargets",i),Rs.value.activeItemIndex=null;const t=1/Rs.value.viewportTransform.scale;setTimeout((()=>{Vs.value.request("draggable",{x:(n.clientX-Ws.left-Rs.value.viewportTransform.x)*t-e.width*t,y:(n.clientY-Ws.top-Rs.value.viewportTransform.y)*t-e.height*t},!0),setTimeout((()=>{ws.IdxPage.refreshMoveable()}),1)}),10)}),10)}(n.items,t,e);const r=1/Rs.value.viewportTransform.scale,a=Es.exports.cloneDeep(null==(i=Qs.find((t=>t.name===n.name)))?void 0:i.settings)||{},o=Object.keys(a).reduce(((t,e)=>(t[e]=a[e].value,t)),{});"G_Rectangle"===n.name&&(t.width=100);const s={title:null,active:!1,type:n.name,translate:[(e.left-Ws.left-Rs.value.viewportTransform.x)*r,(e.top-Ws.top-Rs.value.viewportTransform.y)*r],width:t.width*r,height:t.height*r,rotate:0,scaleX:1,scaleY:1,settings:o,zindex:1,t3Entry:null,showDimensions:!0};if("Image"===n.type&&(s.image=n,s.type=n.id),n.cat){const[t]=n.cat;s.cat=t}const l=Ut(s);return["Value","Icon","Switch"].includes(n.name)&&(Us.value.active=!0),setTimeout((()=>{Os.value||(Rs.value.activeItemIndex=Rs.value.items.findIndex((t=>t.id===l.id)))}),10),setTimeout((()=>{if(Os.value)return;const t=document.querySelector(`#moveable-item-${l.id}`);Rs.value.selectedTargets=[t],_U.safeCall(L,"setSelectedTargets",[t])}),100),l}function qt(t,e="default"){N.value=t,"string"==typeof t&&(N.value=Qs.find((e=>e.name===t))),N.value.type=e}function Xt(t,e=!1){t&&(Mt("Rotate object"),t.rotate=e?t.rotate-90:t.rotate+90,ws.IdxPage.refreshMoveable())}function Zt(t){Mt("Flip object H"),1===t.scaleX?t.scaleX=-1:t.scaleX=1,ws.IdxPage.refreshMoveable()}function Jt(t){Mt("Flip object V"),1===t.scaleY?t.scaleY=-1:t.scaleY=1,ws.IdxPage.refreshMoveable()}function Kt(t){Mt("Bring object to front"),t.zindex=t.zindex+1}function Qt(t){Mt("Send object to back"),t.zindex=t.zindex-1}function te(t){Mt("Remove object");const e=Rs.value.items.findIndex((e=>e.id===t.id));Rs.value.activeItemIndex=null,Rs.value.items.splice(e,1),Rs.value.selectedTargets=[],ws.DeviceOpt.refreshGraphicPanelElementCount(Fs.value.data)}function ee(t){Mt(`Duplicate ${t.type}`),Rs.value.activeItemIndex=null;const e=ne(t);Rs.value.selectedTargets=[],setTimeout((()=>{!function(t){const e=document.querySelector(`#moveable-item-${t.id}`);Rs.value.selectedTargets=[e],Rs.value.activeItemIndex=Rs.value.items.findIndex((e=>e.id===t.id))}(e)}),10)}function ne(t,e){const n=Es.exports.cloneDeep(t);n.translate[0]=n.translate[0]+5,n.translate[1]=n.translate[1]+5;return Ut(n,e,!1)}function ie(t){}function re(t,e){ws.IdxPage.T3UpdateEntryField(t,e)}function ae(t){he(!1,!0)}function oe(t){return!t.inputEvent.altKey}function se(){Mt("Link object to T3000 entry"),Rs.value.items[Rs.value.activeItemIndex].settings.t3EntryDisplayField||(void 0===Rs.value.items[Rs.value.activeItemIndex].label?Rs.value.items[Rs.value.activeItemIndex].settings.t3EntryDisplayField="description":Rs.value.items[Rs.value.activeItemIndex].settings.t3EntryDisplayField="label");if(void 0!==Us.value.data.value&&null!==Us.value.data.value&&Us.value.data.value>=1e3&&(Us.value.data.value=Us.value.data.value/1e3),Rs.value.items[Rs.value.activeItemIndex].t3Entry=Es.exports.cloneDeep(X(Us.value.data)),"Icon"===Rs.value.items[Rs.value.activeItemIndex].type){let t="fa-solid fa-camera-retro";"GRP"===Us.value.data.type?t="fa-solid fa-camera-retro":"SCHEDULE"===Us.value.data.type?t="schedule":"PROGRAM"===Us.value.data.type?t="fa-solid fa-laptop-code":"HOLIDAY"===Us.value.data.type&&(t="calendar_month"),Rs.value.items[Rs.value.activeItemIndex].settings.icon=t}hs.refreshObjectStatus(Rs.value.items[Rs.value.activeItemIndex]),Us.value.data=null,Us.value.active=!1}function le(t,e){e(""!==t?()=>{const e=t.toUpperCase();Ys.value=js.value.panelsData.filter((t=>{var n,i;return t.command.toUpperCase().indexOf(e)>-1||(null==(n=t.description)?void 0:n.toUpperCase().indexOf(e))>-1||(null==(i=t.label)?void 0:i.toUpperCase().indexOf(e))>-1}))}:()=>{Ys.value=js.value.panelsData})}I((()=>{ws.IdxPage.initQuasar(M),ws.IdxPage.initPage()})),T((()=>{_U.universalDestroy(L)})),W((()=>{ws.IdxPage.clearAutoSaveInterval(),ws.WsClient.clearInitialDataInterval(),ws.IdxPage.clearIdx()}));const ue=r(0);function ce(t){Mt("Insert object to T3000 entry");const e=$t({width:60,height:60},{clientX:300,clientY:100,top:100,left:200+80*ue.value},Qs.find((t=>"Pump"===t.name))),n=Rs.value.items.findIndex((t=>t.id===e.id));Rs.value.activeItemIndex=n,function(){Mt("Link object to T3000 entry"),Rs.value.items[Rs.value.activeItemIndex].settings.t3EntryDisplayField||(void 0===Rs.value.items[Rs.value.activeItemIndex].label?Rs.value.items[Rs.value.activeItemIndex].settings.t3EntryDisplayField="description":Rs.value.items[Rs.value.activeItemIndex].settings.t3EntryDisplayField="label");if(Rs.value.items[Rs.value.activeItemIndex].t3Entry=Es.exports.cloneDeep(X(Ss.value.data)),"Icon"===Rs.value.items[Rs.value.activeItemIndex].type){let t="fa-solid fa-camera-retro";"GRP"===Ss.value.data.type?t="fa-solid fa-camera-retro":"SCHEDULE"===Ss.value.data.type?t="schedule":"PROGRAM"===Ss.value.data.type?t="fa-solid fa-laptop-code":"HOLIDAY"===Ss.value.data.type&&(t="calendar_month"),Rs.value.items[Rs.value.activeItemIndex].settings.icon=t}hs.refreshObjectStatus(Rs.value.items[Rs.value.activeItemIndex]),Ss.value.data=null,Ss.value.active=!1}(),ue.value++}function de(){}function he(t=!1,e=!1){ws.IdxPage.save(t,e)}function pe(){ws.IdxPage.refreshMoveable()}function fe(){var t;(null==(t=Rs.value.items)?void 0:t.length)>0?M.dialog({dark:!0,title:"Do you want to clear the drawing and start over?",message:"This will also erase your undo history",cancel:!0,persistent:!0}).onOk((()=>{ws.IdxPage.newProject()})).onCancel((()=>{})):ws.IdxPage.newProject()}function ge(){var t,e;Us.value.active=!0,(null==(t=Rs.value.items[Rs.value.activeItemIndex])?void 0:t.t3Entry)&&(Us.value.data=Es.exports.cloneDeep(null==(e=Rs.value.items[Rs.value.activeItemIndex])?void 0:e.t3Entry))}function me(){Mt("Remove selected objects"),Rs.value.selectedTargets.length>0&&(Rs.value.selectedTargets.forEach((t=>{const e=Rs.value.items.findIndex((e=>`moveable-item-${e.id}`===t.id));-1!==e&&Rs.value.items.splice(e,1)})),Rs.value.selectedTargets=[],Rs.value.activeItemIndex=null,ws.DeviceOpt.refreshGraphicPanelElementCount(Fs.value.data))}function ve(t){const e=1/Rs.value.viewportTransform.scale,n=t[0].translate[0];t[0].translate[1];const i=Math.min(...t.map((t=>t.translate[0])));let r=Math.min(...t.map((t=>t.translate[1])));const a=Math.max(...t.map((t=>t.translate[0]+t.width))),o=Math.max(...t.map((t=>t.translate[1]+t.height)));let s=n<i?n:i;const l=t.reduce(((t,e)=>{const n=e.rotate*Math.PI/180,i=Math.cos(n),r=Math.sin(n);return[{x:e.translate[0],y:e.translate[1]},{x:e.translate[0]+e.width*i,y:e.translate[1]+e.width*r},{x:e.translate[0]-e.height*r,y:e.translate[1]+e.height*i},{x:e.translate[0]+e.width*i-e.height*r,y:e.translate[1]+e.width*r+e.height*i}].forEach((e=>{t.minX=Math.min(t.minX,e.x),t.minY=Math.min(t.minY,e.y),t.maxX=Math.max(t.maxX,e.x),t.maxY=Math.max(t.maxY,e.y)})),t}),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});l.minX,l.minY,l.maxX,l.minX,l.maxY,l.minY;const u=t.map((t=>{var e;return null!=(e=null==t?void 0:t.type)?e:""})).join("-");let c=t[0].zindex;t.forEach((t=>{t.zindex=c-1,c=t.zindex}));const d=t.every((t=>{var e;return"Duct"===(null!=(e=null==t?void 0:t.type)?e:"")}));if(d){const e=function(t){const e=[];return t.map((t=>{const n=document.querySelector(`#moveable-item-${t.id} .duct-start`),i=document.querySelector(`#moveable-item-${t.id} .duct-end`),r=_e(n),a=_e(i);e.push({id:t.id,isStartOverlap:r,isEndOverlap:a})})),e}(t);t.forEach((t=>{const n=e.find((e=>e.id===t.id));n&&(t.overlap={isStartOverlap:n.isStartOverlap,isEndOverlap:n.isEndOverlap})}))}Ut({title:`Weld-${u}`,active:!1,cat:"General",type:d?"Weld_Duct":"Weld_General",translate:[s,r],width:(a-i)*e+8,height:(o-r)*e+8,rotate:0,scaleX:1,scaleY:1,settings:{active:!1,fillColor:"#659dc5",fontSize:16,inAlarm:!1,textColor:"inherit",titleColor:"inherit"},weldItems:Es.exports.cloneDeep(t),zindex:1,t3Entry:null,id:Rs.value.itemsCount+1})}function ye(t){const{left:e,top:n,pos1:i,pos2:r,pos3:a,pos4:o}=t;return[i,r,o,a].map((t=>[e+t[0],n+t[1]]))}function _e(t){const e=t.closest(".moveable-item.Duct"),n=ks(t),i=document.querySelectorAll(".moveable-item.Duct");for(const r of Array.from(i)){if(e.isSameNode(r))continue;const t=ks(r),i=ye(n),a=ye(t);if(Ds(i,a)>0)return!0}return!1}function xe(){if(Rs.value.selectedTargets.length<2)return;if(Rs.value.items.filter((t=>Rs.value.selectedTargets.some((e=>e.id===`moveable-item-${t.id}`)))).some((t=>{var e;return"Weld"===(null!=(e=null==t?void 0:t.type)?e:"")})))return void M.notify({type:"warning",message:"Currently not supported!"});Mt("Weld selected objects");const t=Rs.value.items.filter((t=>Rs.value.selectedTargets.some((e=>e.id===`moveable-item-${t.id}`)))),e=t.every((t=>"General"===t.cat)),n=t.every((t=>{var e;return"Duct"===(null!=(e=null==t?void 0:t.type)?e:"")}));e||n?ve(t):function(t){const e=1/Rs.value.viewportTransform.scale,n=t[0].translate[0];t[0].translate[1];const i=Math.min(...t.map((t=>t.translate[0]))),r=Math.min(...t.map((t=>t.translate[1]))),a=Math.max(...t.map((t=>t.translate[0]+t.width))),o=Math.max(...t.map((t=>t.translate[1]+t.height))),s=n<i?n:i,l=t.map((t=>{var e;return null!=(e=null==t?void 0:t.type)?e:""})).join("-");let u=t[0].zindex;t.forEach((t=>{t.zindex=u-1,u=t.zindex})),Ut({title:`Weld-${l}`,active:!1,type:"Weld",translate:[s,r],width:(a-i)*e,height:(o-r)*e,rotate:0,scaleX:1,scaleY:1,settings:{active:!1,fillColor:"#659dc5",fontSize:16,inAlarm:!1,textColor:"inherit",titleColor:"inherit",weldItems:Es.exports.cloneDeep(t)},zindex:1,t3Entry:null,id:Rs.value.itemsCount+1})}(t),t.forEach((t=>{const e=Rs.value.items.findIndex((e=>e.id===t.id));-1!==e&&Rs.value.items.splice(e,1)})),ws.DeviceOpt.refreshGraphicPanelElementCount(Fs.value.data),ws.IdxPage.refreshMoveable()}function be(){Bs.value.length<1||(Hs.value.unshift({title:null,state:Es.exports.cloneDeep(Rs.value)}),Rs.value=Es.exports.cloneDeep(Bs.value[0].state),Bs.value.shift(),ws.IdxPage.refreshMoveable(),ws.DeviceOpt.refreshGraphicPanelElementCount(Fs.value.data))}function we(){Hs.value.length<1||(Bs.value.unshift({title:null,state:Es.exports.cloneDeep(Rs.value)}),Rs.value=Es.exports.cloneDeep(Hs.value[0].state),Hs.value.shift(),ws.IdxPage.refreshMoveable(),ws.DeviceOpt.refreshGraphicPanelElementCount(Fs.value.data))}function Me(t){}function Se(t){return new Promise(((e,n)=>{var i=new FileReader;i.onload=()=>{e(i.result)},i.onerror=n,i.readAsDataURL(t)}))}async function Ce(t){if(Ts.value)return void al.post("hvacTools",{json:{name:t.name,fileId:t.id}}).then((async t=>{M.notify({color:"positive",message:"Image successfully saved"});!function(t){const e=$s.value.images.findIndex((e=>e.id==="IMG-"+t.id));-1!==e&&$s.value.images.splice(e,1);$s.value.images.push({id:"IMG-"+t.id,dbId:t.id,name:t.name,path:{}.API_URL+"/file/"+t.file.path,online:!0})}(await t.json())})).catch((t=>{M.notify({color:"negative",message:t.message})}));$s.value.imagesCount++;const e={action:9,filename:t.name,fileLength:t.size,fileData:await Se(t.data)};Ns.value?ws.WebClient.SaveImage(e):ws.WsClient.SaveImage(e)}x.keyup((t=>{"ctrl"===t.key&&(F.value=!0)})),x.keydown((t=>{"esc"===t.key&&(qt(Qs[0]),zs.value.length>1&&Je(),R.value&&(R.value=!1,be())),"ctrl"===t.key&&(F.value=!1),Rs.value.selectedTargets.length<1||(["up","down","left","right"].includes(t.key)&&Mt("Move object"),"up"===t.key?Vs.value.request("draggable",{deltaX:0,deltaY:-5},!0):"down"===t.key?Vs.value.request("draggable",{deltaX:0,deltaY:5},!0):"left"===t.key?Vs.value.request("draggable",{deltaX:-5,deltaY:0},!0):"right"===t.key?Vs.value.request("draggable",{deltaX:5,deltaY:0},!0):"delete"===t.key&&me(),["up","down","left","right"].includes(t.key)&&ws.IdxPage.refreshMoveable())})),x.keydown(["ctrl","s"],(t=>{t.inputEvent.preventDefault(),he(!0,!0)})),x.keydown(["ctrl","z"],(t=>{t.inputEvent.preventDefault(),Os.value||be()})),x.keydown(["ctrl","y"],(t=>{t.inputEvent.preventDefault(),Os.value||we()})),x.keydown(["ctrl","r"],(t=>{t.inputEvent.preventDefault(),fe()})),x.keydown(["ctrl","d"],(t=>{t.inputEvent.preventDefault(),Ae()})),x.keydown(["ctrl","g"],(t=>{t.inputEvent.preventDefault(),Ee()})),x.keydown(["ctrl","shift","g"],(t=>{t.inputEvent.preventDefault(),Le()})),x.keydown(["ctrl","c"],(t=>{document.activeElement.matches(".viewport")&&(t.inputEvent.preventDefault(),en())})),x.keydown(["ctrl","v"],(t=>{document.activeElement.matches(".viewport")&&(t.inputEvent.preventDefault(),nn())})),x.keydown(["ctrl","b"],(t=>{t.inputEvent.preventDefault(),xe()})),x.keydown(["insert"],(t=>{pt.Hvac.KiOpt.InsertT3EntryDialog()}));const ke=r({active:!1,data:{settings:null==(a=Qs.find((t=>"Gauge"===t.name)))?void 0:a.settings}});function Ie(t){ke.value.active=!0,ke.value.data=t}function De(t){const e=Rs.value.items.findIndex((e=>e.id===t.id));Rs.value.items[e]=t,ke.value.active=!1,ke.value.data={}}async function Te(t){const e=await t.data.text();j.value.data=e,function(){var t,e;const n=JSON.parse(j.value.data);if(!(null==(t=n.items)?void 0:t[0].type))return void M.notify({message:"Error, Invalid json file",color:"negative",icon:"error",actions:[{label:"Dismiss",color:"white",handler:()=>{}}]});if((null==(e=Rs.value.items)?void 0:e.length)>0)return void M.dialog({dark:!0,title:"You have unsaved drawing!",message:"Before proceeding with the import, please note that any unsaved drawing will be lost,\n           and your undo history will also be erased. Are you sure you want to proceed?",cancel:!0,persistent:!0}).onOk((()=>{Bs.value=[],Hs.value=[],j.value.active=!1,Rs.value=n,j.value.data=null,setTimeout((()=>{hs.refreshMoveableGuides()}),100),ws.IdxPage.refreshMoveable(),ws.DeviceOpt.refreshGraphicPanelElementCount(Fs.value.data)})).onCancel((()=>{j.value.active=!1}));Bs.value=[],Hs.value=[],j.value.active=!1,Rs.value=n,j.value.data=null,setTimeout((()=>{hs.refreshMoveableGuides()}),100),ws.IdxPage.refreshMoveable(),ws.DeviceOpt.refreshGraphicPanelElementCount(Fs.value.data)}()}function Ae(){if(Rs.value.selectedTargets.length<1)return;Mt("Duplicate the selected objects");const t=[],e={};Rs.value.selectedTargets.forEach((n=>{const i=Rs.value.items.find((t=>`moveable-item-${t.id}`===n.id));if(i){let n;i.group&&(e[`${i.group}`]||(Rs.value.groupCount++,e[`${i.group}`]=Rs.value.groupCount),n=e[`${i.group}`]);const r=ne(i,n);setTimeout((()=>{const e=document.querySelector(`#moveable-item-${r.id}`);t.push(e)}),10)}})),setTimeout((()=>{Rs.value.selectedTargets=t,_U.safeCall(L,"setSelectedTargets",t),Rs.value.activeItemIndex=null}),20)}function Ee(){Rs.value.selectedTargets.length<2||(Mt("Group the selected objects"),Rs.value.selectedTargets.length>0&&(Rs.value.groupCount++,Rs.value.selectedTargets.forEach((t=>{const e=Rs.value.items.find((e=>`moveable-item-${e.id}`===t.id));e&&(e.group=Rs.value.groupCount)}))))}function Le(){Rs.value.selectedTargets.length<2||(Mt("Ungroup the selected objects"),Rs.value.selectedTargets.length>0&&Rs.value.selectedTargets.forEach((t=>{const e=Rs.value.items.find((e=>`moveable-item-${e.id}`===t.id));e&&(e.group=void 0)})))}function Pe(t,e){const n=Rs.value.items[Rs.value.activeItemIndex];switch(t){case"newProject":fe();break;case"importJsonAction":j.value.active=!0;break;case"exportToJsonAction":!function(){const t=Es.exports.cloneDeep(X(Rs.value));t.selectedTargets=[],t.elementGuidelines=[];const e=document.createElement("a"),n=new Blob([JSON.stringify(t)],{type:"application/json"});e.href=URL.createObjectURL(n),e.download="HVAC_Drawer_Project.json",e.click()}();break;case"save":he(!0,!0);break;case"undoAction":be();break;case"redoAction":we();break;case"duplicateSelected":Ae();break;case"groupSelected":Ee();break;case"ungroupSelected":Le();break;case"addToLibrary":Qe();break;case"deleteSelected":me();break;case"weldSelected":xe();break;case"duplicateObject":ee(n);break;case"rotate90":Xt(n);break;case"rotate-90":Xt(n,!0);break;case"flipH":Zt(n);break;case"flipV":Jt(n);break;case"bringToFront":Kt(n);break;case"sendToBack":Qt(n);break;case"removeObject":te(n);break;case"zoomOut":ws.IdxPage.zoomAction("out");break;case"zoomIn":ws.IdxPage.zoomAction();break;case"zoomSet":ws.IdxPage.zoomAction("set",e);break;case"copy":en();break;case"paste":nn();break;case"link":ge();break;case"convertObjectType":sn(n,e);break;case"toggleRulersGrid":!function(t){qs.value="Enable"===t,Rs.value.rulersGridVisible=qs.value,he(!1,!1)}(e)}}function Ne(){js.value.loadingPanel=null,Ns.value?ws.WebClient.GetPanelsList():ws.WsClient.GetPanelsList()}function Oe(t){let e="";return(t.description&&t.id!==t.description||!t.description&&t.id!==t.label)&&(e=t.id+" - "),t.description||t.label||(e=t.id),e+(t.description||t.label||"")}function ze(){Rs.value.activeItemIndex=null,Rs.value.selectedTargets=[],Os.value=!Os.value,Os.value&&qt("Pointer"),Cs.restDocumentAreaPosition()}function Re(t){var e,n,i,r,a;if(function(){if(Rs.value.selectedTargets.length>1)Be.value=!1,Ue.value=!1,$e.value=!1;else if(1===Rs.value.selectedTargets.length){const t=Rs.value.items.find((t=>`moveable-item-${t.id}`===Rs.value.selectedTargets[0].id));null!==t.t3Entry?(Be.value=!0,Xe(t)):(Be.value=!1,Ue.value=!1,$e.value=!1)}}(),Os.value)if("GRP"===(null==(e=t.t3Entry)?void 0:e.type)){const e={action:7,panelId:t.t3Entry.pid,entryIndex:t.t3Entry.index};Ns.value?ws.WebClient.LoadGraphicEntry(e):ws.WsClient.LoadGraphicEntry(e)}else if(["SCHEDULE","PROGRAM","HOLIDAY"].includes(null==(n=t.t3Entry)?void 0:n.type)){const e={action:8,panelId:t.t3Entry.pid,entryType:Zs[t.t3Entry.type],entryIndex:t.t3Entry.index};Ns.value?ws.WebClient.OpenEntryEditWindow(e):ws.WsClient.OpenEntryEditWindow(e)}else 1===(null==(i=t.t3Entry)?void 0:i.auto_manual)&&0===(null==(r=t.t3Entry)?void 0:r.digital_analog)&&(null==(a=t.t3Entry)?void 0:a.range)&&(t.t3Entry.control=1===t.t3Entry.control?0:1,re("control",t))}function Ve(t,e,n){const i=n?"control":"value",r=Rs.value.items.find((e=>e.id===t.id));r.t3Entry[i]=e,re(i,r)}function Fe(t){Os.value&&(t.t3Entry.auto_manual=t.t3Entry.auto_manual?0:1,re("auto_manual",t))}D((()=>Sl.value?[{key:"1",property:"ID",value:Sl.value.id},{key:"2",property:"Description",value:Sl.value.description},{key:"3",property:"Panel",value:Sl.value.panel}]:[]));const Be=r(!1),He=r(!1),Ge=r("Auto"),je=r("Off"),We=r(!1),Ue=r(!1),Ye=r(!1),$e=r(!1),qe=r(0);function Xe(t,e){null!==t.t3Entry?(He.value=!0,1===t.t3Entry.auto_manual?(Ge.value="Manual",We.value=!1,Ye.value=!1):(Ge.value="Auto",We.value=!0,Ye.value=!0),0===t.t3Entry.digital_analog?Ue.value=!0:Ue.value=!1,1===t.t3Entry.control?je.value="On":je.value="Off",1===t.t3Entry.digital_analog&&101!==t.t3Entry.range?($e.value=!0,qe.value=1*t.t3Entry.value):$e.value=!1):He.value=!1}function Ze(t,e,n){"mode"===e&&("Auto"===Ge.value?(We.value=!0,Ye.value=!0):(We.value=!1,Ye.value=!1),t.t3Entry.auto_manual="Auto"===Ge.value?0:1,re("auto_manual",t)),"value"==e&&(t.t3Entry.control="Off"===je.value?0:1,re("control",t)),"number-value"===e&&(t.t3Entry.value=1*qe.value,re("value",t)),he(!1,!0)}function Je(){if(zs.value.length>1){const t=zs.value[zs.value.length-2],e={action:7,panelId:t.pid,entryIndex:t.index};Ns.value?ws.WebClient.LoadGraphicEntry(e):ws.WsClient.LoadGraphicEntry(e)}else if(Ns.value)ws.WebClient.GetInitialData();else{const t=ws.DeviceOpt.getCurrentDevice(),e=t.panelId,n=t.graphic;ws.WsClient.GetInitialData(e,n,!0)}}function Ke(){Bs.value.shift()}async function Qe(){if(Rs.value.selectedTargets.length<1||Os.value)return;const t=Rs.value.items.filter((t=>Rs.value.selectedTargets.some((e=>e.id===`moveable-item-${t.id}`))));let e=!1;const n=Es.exports.cloneDeep(t);$s.value.objLibItemsCount++;let i=null;Ts.value&&(e=!0,al.post("hvacObjectLibs",{json:{label:"Item "+$s.value.objLibItemsCount,items:n.map((t=>(delete t.id,t)))}}).then((async t=>{i=await t.json(),M.notify({type:"positive",message:"Successfully saved to library"}),$s.value.objLib.push({id:(null==i?void 0:i.id)||$s.value.objLibItemsCount,label:"Item "+$s.value.objLibItemsCount,items:i.items,online:e}),hs.saveLib()})).catch((t=>{M.notify({type:"negative",message:t.message})}))),$s.value.objLib.push({id:(null==i?void 0:i.id)||$s.value.objLibItemsCount,label:"Item "+$s.value.objLibItemsCount,items:n,online:e}),hs.saveLib()}function tn(t=!1){Vs.value.request("rotatable",{deltaRotate:t?-90:90},!0),ws.IdxPage.refreshMoveable()}function en(){if(Os.value)return;if(0===Rs.value.selectedTargets.length)return;const t=Rs.value.items.filter((t=>Rs.value.selectedTargets.some((e=>e.id===`moveable-item-${t.id}`))));localStorage.setItem("clipboard",JSON.stringify(t)),lt.value=!0}function nn(){if(Os.value)return;let t=[];const e=localStorage.getItem("clipboard");if(e&&(t=JSON.parse(e)),!t)return;Mt("Paste");const n=[],i=[];t.forEach((t=>{i.push(ne(t))})),setTimeout((()=>{i.forEach((t=>{const e=document.querySelector(`#moveable-item-${t.id}`);n.push(e)})),Rs.value.selectedTargets=n,_U.safeCall(L,"setSelectedTargets",n),Rs.value.activeItemIndex=null}),10)}function rn(t){Ts.value&&t.online&&al.delete("hvacObjectLibs/"+t.id).then((async()=>{M.notify({type:"positive",message:"Successfully deleted"})})).catch((t=>{M.notify({type:"negative",message:t.message})}));const e=$s.value.objLib.findIndex((e=>e.name===t.name));-1!==e&&$s.value.objLib.splice(e,1),hs.saveLib()}function an(t,e){Ts.value&&t.online&&al.patch("hvacObjectLibs/"+t.id,{json:{label:e}}).then((async()=>{M.notify({type:"positive",message:"Successfully updated"})})).catch((t=>{M.notify({type:"negative",message:t.message})}));const n=$s.value.objLib.findIndex((e=>e.name===t.name));-1!==n&&($s.value.objLib[n].label=e),hs.saveLib()}function on(t){t.online&&al.delete("hvacTools/"+t.dbId||t.id.slice(4)).then((async()=>{M.notify({type:"positive",message:"Successfully deleted"})})).catch((t=>{M.notify({type:"negative",message:t.message})}));const e=$s.value.images.findIndex((e=>e.name===t.name));if(-1!==e&&($s.value.images.splice(e,1),!t.online)){if($s.value.images.length<=0)return;const t=Es.exports.cloneDeep($s.value.images[e].path);Ns.value?ws.WebClient.DeleteImage(X(t)):ws.WsClient.DeleteImage(X(t)),hs.saveLib()}}function sn(t,e){var n;if(t||(t=Rs.value.items[Rs.value.activeItemIndex]),!t)return;Mt("Convert object to "+e);const i=Es.exports.cloneDeep(null==(n=Qs.find((t=>t.name===e)))?void 0:n.settings)||{},r=Object.keys(i).reduce(((t,e)=>(t[e]=i[e].value,t)),{}),a={};for(const s in r)Object.hasOwnProperty.call(r,s)&&(void 0!==t.settings[s]?a[s]=t.settings[s]:a[s]=r[s]);const o=["bgColor","textColor","title","t3EntryDisplayField"];for(const s of o)void 0===a[s]&&(a[s]=t.settings[s]);t.type=e,t.settings=a}function ln(t,e){$t("Int_Ext_Wall"===e.name?{width:200,height:10}:{width:60,height:60},{clientX:t.clientX,clientY:t.clientY,top:t.clientY,left:t.clientX},e)}const un=(t,e)=>{Rs.value.items.map((n=>{var i;"Weld"===(null!=(i=null==n?void 0:n.type)?i:"")&&n.id===t.id&&(n.settings.weldItems=e)}))},cn=(t,e)=>{Rs.value.items.map((n=>{var i,r,a,o,s;if(("Weld_General"===(null!=(i=null==n?void 0:n.type)?i:"")||"Weld_Duct"===(null!=(r=null==n?void 0:n.type)?r:""))&&n.id===t.id){const t=null==(a=null==n?void 0:n.weldItems[0])?void 0:a.translate[0],i=null==(o=null==n?void 0:n.weldItems[0])?void 0:o.translate[1];null==(s=null==n?void 0:n.weldItems)||s.forEach((n=>{const r=null==e?void 0:e.find((t=>{var e;return(null==(e=null==t?void 0:t.item)?void 0:e.id)===(null==n?void 0:n.id)}));r&&(n.width=r.newPos.width,n.height=r.newPos.height,n.translate[0]=t+r.newPos.trsx,n.translate[1]=i+r.newPos.trsy)}))}}))};function dn(t){t.preventDefault();Os.value||"Pointer"===N.value.name||"Wall"==N.value.name||R.value||"Int_Ext_Wall"==N.value.name||"Duct"==N.value.name||(Yt({rect:{width:60,height:60,top:t.clientY,left:t.clientX},clientX:t.clientX,clientY:t.clientY}),qt(Qs[0]))}function hn(t){t.preventDefault(),qt(Qs[0]),R.value&&(R.value=!1,be(),setTimeout((()=>{wt()}),10),pt.Hvac.PageMain.ClearItemsWithZeroWidth(Rs),pt.Hvac.PageMain.SetWallDimensionsVisible("all",R.value,Rs,!1))}return(e,r)=>(n(),i(m,null,[l(it,{style:{"background-color":"#ebeced"}},{default:u((()=>{var a,x,b;return[o("div",xU,[o("div",bU,[w(Ns)&&w(fl)?(n(),d(wD,{key:0,onMenuAction:Pe,object:w(Rs).items[w(Rs).activeItemIndex],"selected-count":null==(a=w(Rs).selectedTargets)?void 0:a.length,"disable-undo":w(Os)||w(Bs).length<1,"disable-redo":w(Os)||w(Hs).length<1,"disable-paste":w(Os)||!lt.value,zoom:w(ut),rulersGridVisible:w(qs)},null,8,["object","selected-count","disable-undo","disable-redo","disable-paste","zoom","rulersGridVisible"])):A("",!0),w(Ns)||w(Os)||!w(fl)?A("",!0):(n(),d(LN,{key:1,locked:w(Os),onLockToggle:ze,onNavGoBack:Je,onMenuAction:Pe,object:w(Rs).items[w(Rs).activeItemIndex],"selected-count":null==(x=w(Rs).selectedTargets)?void 0:x.length,"disable-undo":w(Os)||w(Bs).length<1,"disable-redo":w(Os)||w(Hs).length<1,"disable-paste":w(Os)||!lt.value,zoom:w(ut),rulersGridVisible:w(qs),deviceModel:w(Fs),onShowMoreDevices:ft},null,8,["locked","object","selected-count","disable-undo","disable-redo","disable-paste","zoom","rulersGridVisible","deviceModel"]))]),o("div",wU,[!w(Os)&&w(gl)?(n(),i("div",MU,[!w(Os)&&w(gl)?(n(),d(zD,{key:0,"selected-tool":N.value,images:w($s).images,"object-lib":w($s).objLib,onSelectTool:qt,onDeleteLibItem:rn,onRenameLibItem:an,onDeleteLibImage:on,onSaveLibImage:Ce,onToolDropped:ln,isBuiltInEdge:w(Ns)},null,8,["selected-tool","images","object-lib","isBuiltInEdge"])):A("",!0)])):A("",!0),o("div",SU,[o("div",CU,[!w(Os)&&w(qs)?(n(),i("div",kU)):A("",!0),!w(Os)&&w(qs)?(n(),i("div",IU,[l(yT,{id:"h-ruler",documentArea:w(Xs)},null,8,["documentArea"])])):A("",!0),!w(Os)&&w(qs)?(n(),i("div",DU,[l(bT,{id:"v-ruler",documentArea:w(Xs)},null,8,["documentArea"])])):A("",!0),!w(Os)&&w(qs)?(n(),i("div",TU,[l(ST,{id:"hv-grid",documentArea:w(Xs)},null,8,["documentArea"])])):A("",!0),o("div",{class:"viewport-wrapper",onScroll:r[11]||(r[11]=(...t)=>e.handleScroll&&e.handleScroll(...t))},[o("div",{class:O(["flex fixed top-20 ml-10 z-50 nav-btns",{locked:w(Os)}])},[(null==(b=w(zs))?void 0:b.length)>1?(n(),d(y,{key:0,icon:"arrow_back",class:"back-btn mr-2",dense:"",round:"",size:"md",color:"primary",onClick:Je},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[23]||(r[23]=[o("strong",null,"Go back",-1)])])),_:1})])),_:1})):A("",!0),w(Ns)?(n(),d(y,{key:1,icon:w(Os)?"lock_outline":"lock_open",class:"lock-btn",flat:"",round:"",dense:"",size:"md",color:w(Os)?"primary":"normal",onClick:ze},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[w(Os)?(n(),i("strong",EU,"Unlock")):(n(),i("strong",AU,"Lock"))])),_:1})])),_:1},8,["icon","color"])):A("",!0)],2),o("div",null,[!w(Ns)&&w(Os)?(n(),d(y,{key:0,icon:w(Os)?"lock_outline":"lock_open",class:"lock-btn",flat:"",round:"",dense:"",size:"md",color:w(Os)?"primary":"normal",onClick:ze},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[w(Os)?(n(),i("strong",PU,"Unlock")):(n(),i("strong",LU,"Lock"))])),_:1})])),_:1},8,["icon","color"])):A("",!0)]),o("div",{class:"viewport",tabindex:"0",onMousemove:gt,onContextmenu:U(hn,["right"]),onClick:U(dn,["left"]),onDragover:r[10]||(r[10]=t=>{t.preventDefault()})},[w(Os)||"Pointer"===N.value.name?A("",!0):(n(),d(g,{key:0,class:"cursor-icon",name:N.value.icon?N.value.icon:"libItem"===N.value.type?"space_dashboard":"photo",size:"sm",style:G({left:ct.value.x+0+"px",top:ct.value.y+"px"})},null,8,["name","style"])),l(w(su),{ref_key:"selecto",ref:L,dragContainer:".viewport",selectableTargets:w(Os)?[]:P.value,hitRate:20,selectByClick:!w(Os),selectFromInside:!0,toggleContinueSelect:["shift"],ratio:0,boundContainer:!0,getElementRect:w(ks),onDragStart:Et,onSelectEnd:Lt,onDragEnd:Yt,dragCondition:oe},null,8,["selectableTargets","selectByClick","getElementRect"]),o("div",{ref_key:"viewport",ref:Gs},[l(w(Fl),{ref_key:"moveable",ref:Vs,draggable:!w(Os),resizable:!w(Os),rotatable:!w(Os),keepRatio:B.value,target:w(Rs).selectedTargets,snappable:F.value&&!w(Os),snapThreshold:10,isDisplaySnapDigit:!0,snapGap:!0,snapDirections:{top:!0,right:!0,bottom:!0,left:!0},elementSnapDirections:{top:!0,right:!0,bottom:!0,left:!0},snapDigit:0,elementGuidelines:w(Rs).elementGuidelines,origin:!0,throttleResize:0,throttleRotate:0,rotationPosition:"top",originDraggable:!0,originRelative:!0,defaultGroupRotate:0,defaultGroupOrigin:"50% 50%",padding:{left:0,top:0,right:0,bottom:0},onClickGroup:St,onDragStart:Ct,onDrag:kt,onDragEnd:It,onDragGroupStart:Dt,onDragGroup:Tt,onDragGroupEnd:At,onResizeStart:Pt,onResize:Nt,onResizeEnd:Ot,onRotateStart:zt,onRotate:Rt,onRotateEnd:Vt,onResizeGroupStart:Bt,onResizeGroup:Ht,onResizeGroupEnd:Gt,onRotateGroupStart:jt,onRotateGroup:Wt,onRotateGroupEnd:Ft,renderDirections:["n","nw","ne","s","se","sw","e","w"]},null,8,["draggable","resizable","rotatable","keepRatio","target","snappable","elementGuidelines"]),Q.value?(n(),d(nt,{key:0,"touch-position":"",target:".moveable-area","context-menu":""},{default:u((()=>[l(et,null,{default:u((()=>[c((n(),d(Z,{dense:"",clickable:"",onClick:en},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"content_copy",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[24]||(r[24]=[p("Copy",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[25]||(r[25]=[p("Ctrl + C",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:Ae},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"content_copy",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[26]||(r[26]=[p("Duplicate",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[27]||(r[27]=[p("Ctrl + D",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:Ee},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"join_full",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[28]||(r[28]=[p("Group",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[29]||(r[29]=[p("Ctrl + G",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:Le},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"join_inner",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[30]||(r[30]=[p("Ungroup",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[31]||(r[31]=[p("Ctrl + Shift + G",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:Qe},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"library_books",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[32]||(r[32]=[p("Add to Library",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[33]||(r[33]=[p("Ctrl + L",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:r[0]||(r[0]=t=>(Mt("Bring selected objects to front"),void Rs.value.items.filter((t=>Rs.value.selectedTargets.some((e=>e.id===`moveable-item-${t.id}`)))).forEach((t=>{t.zindex=t.zindex+1}))))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"flip_to_front",color:"grey-7","text-color":"white"})])),_:1}),l(J,{class:"py-2"},{default:u((()=>[...r[34]||(r[34]=[p("Bring to front",-1)])])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[1]||(r[1]=t=>(Mt("Send selected objects to back"),void Rs.value.items.filter((t=>Rs.value.selectedTargets.some((e=>e.id===`moveable-item-${t.id}`)))).forEach((t=>{t.zindex=t.zindex-1}))))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"flip_to_back",color:"grey-7","text-color":"white"})])),_:1}),l(J,{class:"py-2"},{default:u((()=>[...r[35]||(r[35]=[p("Send to Back",-1)])])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:r[2]||(r[2]=t=>tn())},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"autorenew",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[36]||(r[36]=[p("Rotate 90",-1)])])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:r[3]||(r[3]=t=>tn(!0))},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"sync",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[37]||(r[37]=[p("Rotate -90",-1)])])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:me},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"delete",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[38]||(r[38]=[p("Delete",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[39]||(r[39]=[p("Delete",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:xe},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"splitscreen",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[40]||(r[40]=[p("Weld Selected",-1)])])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[41]||(r[41]=[p("Ctrl + B",-1)])])),_:1})])),_:1})])),_:1})),[[_t]])])),_:1})])),_:1})):A("",!0),(n(!0),i(m,null,v(w(Rs).items,((t,e)=>{var a,y,x,b,M,S,C,k,I,D,T,L;return n(),i("div",{key:t.id,ref_for:!0,ref_key:"targets",ref:P,style:G(`position: absolute; transform: translate(${t.translate[0]}px, ${t.translate[1]}px) rotate(${t.rotate}deg) scaleX(${t.scaleX}) scaleY(${t.scaleY}); width: ${t.width}px; height: ${t.height}px; z-index: ${t.zindex};`),id:`moveable-item-${t.id}`,onMousedown:U(ie,["right"]),class:O(["moveable-item-wrapper",`moveable-item-index-${e}`])},[w(Os)||1!==(null==(a=w(Rs).selectedTargets)?void 0:a.length)?A("",!0):(n(),d(nt,{key:0,"touch-position":"","context-menu":""},{default:u((()=>[l(et,null,{default:u((()=>[Be.value?(n(),d(Z,{key:0,dense:""},{default:u((()=>[r[42]||(r[42]=o("span",{style:{"margin-top":"8px"}},"Mode:",-1)),l(_,{label:Ge.value,modelValue:Ge.value,"onUpdate:modelValue":r[4]||(r[4]=t=>Ge.value=t),color:"blue",onClick:e=>Ze(t,"mode"),"false-value":"Auto","true-value":"Manual"},null,8,["label","modelValue","onClick"])])),_:2},1024)):A("",!0),l(f),Ue.value?(n(),d(Z,{key:1,dense:"",disable:We.value},{default:u((()=>[r[43]||(r[43]=o("span",{style:{"margin-top":"8px"}},"Value:",-1)),l(_,{disable:We.value,label:je.value,modelValue:je.value,"onUpdate:modelValue":r[5]||(r[5]=t=>je.value=t),color:"blue",onClick:e=>Ze(t,"value"),"false-value":"Off","true-value":"On"},null,8,["disable","label","modelValue","onClick"])])),_:2},1032,["disable"])):A("",!0),$e.value?(n(),d(Z,{key:2,dense:"",disable:Ye.value},{default:u((()=>[r[44]||(r[44]=o("span",{style:{"margin-top":"8px"}},"Value:",-1)),l(E,{style:{"margin-left":"15px","margin-top":"-5px"},disable:Ye.value,dense:"",type:"number",modelValue:qe.value,"onUpdate:modelValue":r[6]||(r[6]=t=>qe.value=t),onClick:e=>Ze(t,"number-value")},null,8,["disable","modelValue","onClick"])])),_:2},1032,["disable"])):A("",!0),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:ge},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"link",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[45]||(r[45]=[p("Link",-1)])])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:en},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"content_copy",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[l(K,null,{default:u((()=>[...r[46]||(r[46]=[p("Copy",-1)])])),_:1})])),_:1}),l(J,{side:""},{default:u((()=>[l(tt,null,{default:u((()=>[...r[47]||(r[47]=[p("Ctrl + C",-1)])])),_:1})])),_:1})])),_:1})),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:e=>ee(t)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"file_copy",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[48]||(r[48]=[p("Duplicate",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:e=>Xt(t)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"autorenew",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[49]||(r[49]=[p("Rotate 90",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:e=>Xt(t,!0)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"sync",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[50]||(r[50]=[p("Rotate -90",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:e=>Zt(t)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"flip",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[51]||(r[51]=[p("Flip horizontal",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:e=>Jt(t)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"flip",color:"grey-7","text-color":"white",style:{transform:"rotate(90deg)"}})])),_:1}),l(J,null,{default:u((()=>[...r[52]||(r[52]=[p("Flip vertical",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]]),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:e=>Kt(t)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"flip_to_front",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[53]||(r[53]=[p("Bring to front",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]]),c((n(),d(Z,{dense:"",clickable:"",onClick:e=>Qt(t)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"flip_to_back",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[54]||(r[54]=[p("Send to Back",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]]),l(f),l(Z,{dense:"",clickable:""},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"transform",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[55]||(r[55]=[p("Convert to",-1)])])),_:1}),l(J,{side:""},{default:u((()=>[l(g,{name:"keyboard_arrow_right"})])),_:1}),l(nt,{anchor:"top end",self:"top start","auto-close":""},{default:u((()=>[l(et,null,{default:u((()=>[(n(!0),i(m,null,v(w(Qs).filter((e=>{var n;return e.name!==(null!=(n=null==t?void 0:t.type)?n:"")&&!["Duct","Pointer","Text"].includes(e.name)})),(e=>c((n(),d(Z,{key:e.name,dense:"",clickable:"",onClick:n=>sn(t,e.name)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:e.icon,color:"grey-7","text-color":"white"},null,8,["icon"])])),_:2},1024),l(J,null,{default:u((()=>[p(s(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[_t]]))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024),l(f),c((n(),d(Z,{dense:"",clickable:"",onClick:e=>te(t)},{default:u((()=>[l(J,{avatar:""},{default:u((()=>[l(h,{size:"sm",icon:"remove",color:"grey-7","text-color":"white"})])),_:1}),l(J,null,{default:u((()=>[...r[56]||(r[56]=[p("Remove",-1)])])),_:1})])),_:2},1032,["onClick"])),[[_t]])])),_:2},1024)])),_:2},1024)),He.value&&0===(null==(y=w(Rs).selectedTargets)?void 0:y.length)?(n(),d(nt,{key:1,"touch-position":"","context-menu":""},{default:u((()=>[l(et,null,{default:u((()=>[l(Z,{dense:""},{default:u((()=>[r[57]||(r[57]=o("span",{style:{"margin-top":"8px"}},"Mode:",-1)),l(_,{label:Ge.value,modelValue:Ge.value,"onUpdate:modelValue":r[7]||(r[7]=t=>Ge.value=t),color:"blue",onClick:e=>Ze(t,"mode"),"false-value":"Auto","true-value":"Manual"},null,8,["label","modelValue","onClick"])])),_:2},1024),l(f),Ue.value?(n(),d(Z,{key:0,dense:"",disable:We.value},{default:u((()=>[r[58]||(r[58]=o("span",{style:{"margin-top":"8px"}},"Value:",-1)),l(_,{disable:We.value,label:je.value,modelValue:je.value,"onUpdate:modelValue":r[8]||(r[8]=t=>je.value=t),color:"blue",onClick:e=>Ze(t,"value"),"false-value":"Off","true-value":"On"},null,8,["disable","label","modelValue","onClick"])])),_:2},1032,["disable"])):A("",!0),$e.value?(n(),d(Z,{key:1,dense:"",disable:Ye.value},{default:u((()=>[r[59]||(r[59]=o("span",{style:{"margin-top":"8px"}},"Value:",-1)),l(E,{style:{"margin-left":"15px","margin-top":"-5px"},disable:Ye.value,dense:"",type:"number",modelValue:qe.value,"onUpdate:modelValue":r[9]||(r[9]=t=>qe.value=t),onClick:e=>Ze(t,"number-value")},null,8,["disable","modelValue","onClick"])])),_:2},1032,["disable"])):A("",!0),l(f)])),_:2},1024)])),_:2},1024)):A("",!0),"Int_Ext_Wall"!==(null!=(x=null==t?void 0:t.type)?x:"")?(n(),d(Is,{ref_for:!0,ref_key:"objectsRef",ref:dt,item:t,key:t.id+(null!=(b=null==t?void 0:t.type)?b:""),class:O({link:w(Os)&&t.t3Entry}),"show-arrows":w(Os)&&!!(null==(M=t.t3Entry)?void 0:M.range),onObjectClicked:e=>Re(t),onAutoManualToggle:e=>Fe(t),onChangeValue:Ve,onUpdateWeldModel:un,onContextmenu:U((e=>Xe(t)),["right"]),onDblclick:e=>function(t){var e,n,i,r;z.Debug("= idx: objectDoubleClicked /",t.t3Entry),"SCH"===(null==(e=t.t3Entry)?void 0:e.type)&&(cl.value=t,xl.value=!0),"SCHEDULE"===(null==(n=t.t3Entry)?void 0:n.type)&&(cl.value=t,xl.value=!0),"HOL"===(null==(i=t.t3Entry)?void 0:i.type)&&(cl.value=t,wl.value=[],bl.value=!0,z.Debug("= idx: objectDoubleClicked HOLIDAY",wl.value)),"MON"===(null==(r=t.t3Entry)?void 0:r.type)&&(cl.value=t,Cl.value=[],Ml.value=!0,z.Debug("= idx: objectDoubleClicked MON Trend Log",cl.value,Cl.value,Ml.value)),Ms.SetNavVisiblity(!1)}(t)},null,8,["item","class","show-arrows","onObjectClicked","onAutoManualToggle","onContextmenu","onDblclick"])):A("",!0),"Weld_General"===(null!=(S=null==t?void 0:t.type)?S:"")||"Weld_Duct"===(null!=(C=null==t?void 0:t.type)?C:"")?(n(),d(gT,{ref_for:!0,ref_key:"objectsRef",ref:dt,item:t,key:t.id+(null!=(k=null==t?void 0:t.type)?k:""),class:O({link:w(Os)&&t.t3Entry}),"show-arrows":w(Os)&&!!(null==(I=t.t3Entry)?void 0:I.range),onObjectClicked:e=>Re(t),onAutoManualToggle:e=>Fe(t),onChangeValue:Ve,onUpdateWeldModel:cn},null,8,["item","class","show-arrows","onObjectClicked","onAutoManualToggle"])):A("",!0),"Int_Ext_Wall"===(null!=(D=null==t?void 0:t.type)?D:"")?(n(),d(vP,{ref_for:!0,ref_key:"objectsRef",ref:dt,item:t,key:t.id+(null!=(T=null==t?void 0:t.type)?T:"")+t.index,class:O({link:w(Os)&&t.t3Entry}),"show-arrows":w(Os)&&!!(null==(L=t.t3Entry)?void 0:L.range),onObjectClicked:e=>Re(t),onAutoManualToggle:e=>Fe(t),onChangeValue:Ve,onUpdateWeldModel:cn},null,8,["item","class","show-arrows","onObjectClicked","onAutoManualToggle"])):A("",!0)],46,NU)})),128))],512)],32)],32)])])])]),!w(Os)&&w(Rs).items[w(Rs).activeItemIndex]&&(w(Rs).activeItemIndex||0===w(Rs).activeItemIndex)&&w(ml)&&w(Rs).selectedTargets.length>0?(n(),d(oT,{key:0,object:w(Rs).items[w(Rs).activeItemIndex],onRefreshMoveable:pe,onT3UpdateEntryField:re,onLinkT3Entry:ge,onGaugeSettings:Ie,onMounted:r[12]||(r[12]=t=>Mt("Object settings opened")),onNoChange:Ke,onDisplayFieldValueChanged:ae},null,8,["object"])):A("",!0)]})),_:1}),l(q,{modelValue:w(Us).active,"onUpdate:modelValue":r[14]||(r[14]=t=>w(Us).active=t)},{default:u((()=>[l(S,{style:G({minWidth:w(M).platform.is.mobile?"400px":"650px"})},{default:u((()=>[l(C,{class:"row items-center q-pb-none"},{default:u((()=>[r[60]||(r[60]=o("div",{class:"text-h6"},"Link Entry",-1)),l(rt),c(l(y,{icon:"close",flat:"",round:"",dense:""},null,512),[[_t]])])),_:1}),l(f),l(C,{style:{height:"70vh"},class:"scroll"},{default:u((()=>[o("div",OU,[l(y,{icon:"refresh",flat:"",onClick:Ne},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[61]||(r[61]=[o("strong",null,"Reload panels data",-1)])])),_:1})])),_:1}),l(at,{"option-label":Oe,"option-value":"id",filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",modelValue:w(Us).data,"onUpdate:modelValue":r[13]||(r[13]=t=>w(Us).data=t),options:w(Ys),onFilter:le,label:"Select Entry",class:"grow"},{option:u((t=>[l(Z,Y($(t.itemProps)),{default:u((()=>[l(J,{class:"grow"},{default:u((()=>[l(K,null,{default:u((()=>[p(s(Oe(t.opt)),1)])),_:2},1024)])),_:2},1024),l(J,{avatar:"",class:"pl-1 min-w-0"},{default:u((()=>[l(tt,{size:"sm",icon:"label_important"},{default:u((()=>[p("Panel: "+s(t.opt.pid),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options"])]),o("div",zU,[null!==w(js).loadingPanel?(n(),d(mt,{key:0,indeterminate:"","show-value":"",value:ot.value,size:"270px",thickness:.22,color:"light-blue","track-color":"grey-3",class:"q-ma-md overflow-hidden"},{default:u((()=>[o("div",RU,[o("div",null,s(ot.value)+"%",1),o("div",null," Loading Panel #"+s(w(js).panelsList[w(js).loadingPanel].panel_number),1)])])),_:1},8,["value"])):A("",!0)])])),_:1}),l(f),l(k,{align:"right"},{default:u((()=>[c(l(y,{flat:"",label:"Cancel",color:"primary"},null,512),[[_t]]),l(y,{flat:"",label:"Save",disable:!w(Us).data,color:"primary",onClick:se},null,8,["disable"])])),_:1})])),_:1},8,["style"])])),_:1},8,["modelValue"]),l(q,{modelValue:w(Ss).active,"onUpdate:modelValue":r[17]||(r[17]=t=>w(Ss).active=t)},{default:u((()=>[l(S,{style:G({minWidth:w(M).platform.is.mobile?"400px":"650px"})},{default:u((()=>[l(C,{class:"row items-center q-pb-none"},{default:u((()=>[r[62]||(r[62]=o("div",{class:"text-h6"},"Insert Entry",-1)),l(rt),c(l(y,{icon:"close",flat:"",round:"",dense:""},null,512),[[_t]])])),_:1}),l(f),l(C,{style:{height:"70vh"},class:"scroll"},{default:u((()=>[o("div",VU,[l(y,{icon:"refresh",flat:"",onClick:Ne},{default:u((()=>[l(t,{anchor:"top middle",self:"bottom middle"},{default:u((()=>[...r[63]||(r[63]=[o("strong",null,"Reload panels data",-1)])])),_:1})])),_:1}),l(at,{"option-label":Oe,label:"Type or select Entry","option-value":"id",filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",modelValue:w(Ss).data,"onUpdate:modelValue":[r[15]||(r[15]=t=>w(Ss).data=t),r[16]||(r[16]=t=>ce(e.value))],options:w(Ys),onFilter:le,class:"grow",autofocus:"",onFocus:de},{option:u((t=>[l(Z,Y($(t.itemProps)),{default:u((()=>[l(J,{class:"grow"},{default:u((()=>[l(K,null,{default:u((()=>[p(s(Oe(t.opt)),1)])),_:2},1024)])),_:2},1024),l(J,{avatar:"",class:"pl-1 min-w-0"},{default:u((()=>[l(tt,{size:"sm",icon:"label_important"},{default:u((()=>[p("Panel: "+s(t.opt.pid),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options"])]),o("div",FU,[null!==w(js).loadingPanel?(n(),d(mt,{key:0,indeterminate:"","show-value":"",value:ot.value,size:"270px",thickness:.22,color:"light-blue","track-color":"grey-3",class:"q-ma-md overflow-hidden"},{default:u((()=>[o("div",BU,[o("div",null,s(ot.value)+"%",1),o("div",null," Loading Panel #"+s(w(js).panelsList[w(js).loadingPanel].panel_number),1)])])),_:1},8,["value"])):A("",!0)])])),_:1})])),_:1},8,["style"])])),_:1},8,["modelValue"]),l(vt,{active:ke.value.active,"onUpdate:active":r[18]||(r[18]=t=>ke.value.active=t),data:ke.value.data,onSaved:De},null,8,["active","data"]),l(q,{modelValue:j.value.active,"onUpdate:modelValue":r[20]||(r[20]=t=>j.value.active=t)},{default:u((()=>[l(S,{style:{"min-width":"450px"}},{default:u((()=>[l(C,null,{default:u((()=>[...r[64]||(r[64]=[o("div",{class:"text-h6"},"Import from a JSON file",-1)])])),_:1}),l(C,{class:"q-pt-none"},{default:u((()=>[l(yt,{types:["application/json"],onUploaded:Me,onFileAdded:Te})])),_:1}),l(k,{align:"right",class:"text-primary"},{default:u((()=>[l(y,{flat:"",label:"Cancel",onClick:r[19]||(r[19]=t=>j.value.active=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"]),l(q,{modelValue:w(Fs).active,"onUpdate:modelValue":r[21]||(r[21]=t=>w(Fs).active=t)},{default:u((()=>[l(S,{style:G({minWidth:w(M).platform.is.mobile?"700px":"900px"})},{default:u((()=>[l(C,{class:"row items-center q-pb-none"},{default:u((()=>[r[65]||(r[65]=o("div",{class:"text-h6"},"Devices List",-1)),l(rt),c(l(y,{icon:"close",flat:"",round:"",dense:""},null,512),[[_t]])])),_:1}),l(f),l(TP,{deviceModel:w(Fs),onUpdateDeviceModel:ht,onTestSendMsg:e.testSendMsg},null,8,["deviceModel","onTestSendMsg"])])),_:1},8,["style"])])),_:1},8,["modelValue"]),w(dl)?(n(),d(NN,{key:0,visible:w(dl)},null,8,["visible"])):A("",!0),w(xl)?(n(),d(cU,{key:1,visible:w(xl)},null,8,["visible"])):A("",!0),w(bl)?(n(),d(yU,{key:2,visible:w(bl)},null,8,["visible"])):A("",!0),w(Ml)?(n(),d(Nl,{key:3,visible:w(Ml),"item-data":w(cl),"onUpdate:visible":r[22]||(r[22]=t=>Ml.value=t)},null,8,["visible","item-data"])):A("",!0)],64))}},[["__scopeId","data-v-05363058"]]);export{HU as default};

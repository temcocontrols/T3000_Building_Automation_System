import{j as e}from"./react.8639cc86.js";import{r as s,R as t}from"./client.58f92968.js";import{l,L as r,M as n,n as a,T as o,y as i,N as c,z as d,P as u,Q as p,I as x,S as h,R as m,U as g,V as f,X as j,Y as b,Z as v,$ as _}from"./App.7c34790a.js";import{R as N,g as I}from"./RangeSelectionDrawer.b62b2464.js";import{c as C,D as S,a as w,b as y,d as z,e as $,f as F}from"./DataGridHeaderCell.ec45a911.js";import{T as k}from"./TableCellLayout.d4b0b796.js";import"./index.3bd6c859.js";import"./Serializer.f6a5f515.js";import"./axios.65f6a2c9.js";import"./T3Data.63f93fe7.js";import"./_commonjsHelpers.a5007c1f.js";import"./RadioGroup.bf5be0e5.js";import"./Input.7691f421.js";var D="_container_1lu2z_18",E="_bladeContentContainer_1lu2z_30",L="_bladeContentWrapper_1lu2z_38",T="_bladeContent_1lu2z_30",W="_partContent_1lu2z_54",P="_toolbar_1lu2z_63",R="_toolbarContainer_1lu2z_72",A="_toolbarButton_1lu2z_80",H="_toolbarSeparator_1lu2z_119",V="_searchInputWrapper_1lu2z_127",M="_searchIcon_1lu2z_134",U="_searchInput_1lu2z_127",B="_overviewHr_1lu2z_194",O="_dockingBody_1lu2z_202",K="_scrollContainer_1lu2z_211",G="_noData_1lu2z_242",Y="_loadingBar_1lu2z_251",q="_autoLoadIndicator_1lu2z_265",J="_editableCell_1lu2z_467",Q="_editInput_1lu2z_481",X="_saveButton_1lu2z_517",Z="_refreshIconButton_1lu2z_548",ee="_isRefreshing_1lu2z_583",se="_rotating_1lu2z_603",te="_headerCellSort_1lu2z_611",le="_headerCell_1lu2z_611",re="_sortIconFaded_1lu2z_624",ne="_cellFlexContainer_1lu2z_628",ae="_editInputContainer_1lu2z_633",oe="_flex1_1lu2z_640",ie="_iconSmall_1lu2z_644",ce="_iconMedium_1lu2z_648",de="_switchScale_1lu2z_656",ue="_switchContainer_1lu2z_660",pe="_rangeLink_1lu2z_666",xe="_marginLeft8_1lu2z_671",he="_errorNotice_1lu2z_675",me="_iconError_1lu2z_685",ge="_textError_1lu2z_691",fe="_noPadding_1lu2z_697",je="_centerText_1lu2z_701";const be=()=>{const{selectedDevice:be,treeData:ve,selectDevice:_e,getNextDevice:Ne,getFilteredDevices:Ie}=l(),Ce=r((e=>e.setMessage)),[Se,we]=s.exports.useState([]),[ye,ze]=s.exports.useState(!1),[$e,Fe]=s.exports.useState(null),[ke,De]=s.exports.useState(!1),[Ee,Le]=s.exports.useState(new Set),[Te,We]=s.exports.useState(!1),Pe=s.exports.useRef(!1),Re=s.exports.useRef(null),[Ae,He]=s.exports.useState(!1),Ve=s.exports.useRef(!1),Me=s.exports.useRef(0),Ue=s.exports.useCallback((async()=>{if(be){ze(!0),Fe(null);try{const e=`${n}/api/t3_device/devices/${be.serialNumber}/input-points`,s=await fetch(e);if(!s.ok)throw new Error(`Failed to fetch inputs: ${s.statusText}`);const t=(await s.json()).input_points||[];we(t)}catch(e){const s=e instanceof Error?e.message:"Failed to load inputs";Fe(s),console.error("Error fetching inputs:",e)}finally{ze(!1)}}else we([])}),[be]);s.exports.useEffect((()=>{Ue()}),[Ue]),s.exports.useEffect((()=>{we([]),We(!1),Pe.current=!1}),[null==be?void 0:be.serialNumber]),s.exports.useEffect((()=>{if(ye||!be||Te||Pe.current)return;(async()=>{if(Pe.current=!0,Se.length>0)return console.log("[InputsPage] Database has data, skipping auto-refresh"),void We(!0);console.log("[InputsPage] Database empty, auto-refreshing from device..."),ze(!0);try{const e=await m.refreshFromDevice({serialNumber:be.serialNumber,type:"input",onLoadingChange:e=>{e&&Ce(`Loading inputs from ${be.nameShowOnTree} (Action 17)...`,"info")}});Ce(`✓ Synced ${e.itemCount} inputs from ${be.nameShowOnTree}`,"success")}catch(e){console.error("[InputsPage] Auto-refresh failed:",e),Ce(`Failed to sync inputs: ${e instanceof Error?e.message:"Unknown error"}`,"error")}finally{await Ue(),We(!0),ze(!1)}})()}),[ye,be,Te,Ue,Se.length,Ce]);const Be=s.exports.useCallback((async()=>{const e=Ne();e?(console.log(`[InputsPage] Auto-loading next device: ${e.nameShowOnTree} (SN: ${e.serialNumber})`),He(!0),_e(e),setTimeout((()=>{He(!1)}),500)):console.log("[InputsPage] No next device available")}),[Ne,_e]),Oe=s.exports.useCallback((e=>{if(Ae||ye)return;const s=e.currentTarget;s.scrollHeight-s.scrollTop-s.clientHeight<=1&&Se.length>0?(Ve.current=!0,console.log("[InputsPage] Reached bottom, scroll again to load next device")):Ve.current=!1}),[Ae,ye,Se.length]),Ke=s.exports.useCallback((e=>{Ae||ye||0===Se.length||e.deltaY>0&&Ve.current&&(console.log("[InputsPage] User scrolled down while at bottom, loading next device"),Ve.current=!1,Be())}),[Ae,ye,Se.length,Be]);s.exports.useEffect((()=>{be&&Re.current&&Re.current.scrollTo({top:0,behavior:Ae?"smooth":"auto"})}),[be,Ae]),s.exports.useEffect((()=>{if(!ke&&!ye&&Me.current>0&&Re.current){const e=setTimeout((()=>{Re.current&&(Re.current.scrollTop=Me.current,Me.current=0)}),50);return()=>clearTimeout(e)}}),[Se,ke,ye]);const Ge=(e,s,t)=>{es({serialNumber:e.serialNumber,inputIndex:e.inputIndex||"",field:s}),ts(t||"")},Ye=async(e,s,t,l,r)=>{var a,o;try{console.log(`[Action 16] Updating ${t} for Input ${s} (SN: ${e})`),console.log("[Action 16] Using current UI state as baseline:",r);const i={fullLabel:"fullLabel"===t?l:r.fullLabel||"",label:"label"===t?l:r.label||"",value:"fValue"===t?parseFloat(l||"0"):parseFloat(r.fValue||"0")/1e3,range:"range"===t?parseInt(l||"0",10):parseInt(r.rangeField||r.range||"0",10),autoManual:"autoManual"===t?parseInt(l||"0",10):parseInt(r.autoManual||"0",10),control:0,filter:parseInt(r.filterField||"0",10),digitalAnalog:parseInt(r.digitalAnalog||"0",10),calibrationSign:parseInt(r.sign||"0",10),calibrationH:parseInt((null==(a=r.calibration)?void 0:a.split(".")[0])||"0",10),calibrationL:parseInt((null==(o=r.calibration)?void 0:o.split(".")[1])||"0",10),decom:0};console.log("[Action 16] Full payload:",i);const c=await fetch(`${n}/api/t3_device/inputs/${e}/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!c.ok){const e=await c.text();throw new Error(`HTTP ${c.status}: ${e}`)}const d=await c.json();return console.log("[Action 16] Success - Device updated via FFI and saved to database:",d),d}catch(i){throw console.error("[Action 16] Failed:",i),i}},qe=async()=>{if(Ze)if("fValue"===Ze.field||ss.trim()){rs(!0);try{if(be&&["fullLabel","label","fValue","range","autoManual"].includes(Ze.field)){console.log(`=== Updating ${Ze.field} ===`),console.log(`Device: ${be.serialNumber}, Input: ${Ze.inputIndex}, New Value: "${ss}"`),console.log("Using Action 16 (UPDATE_WEBVIEW_LIST)");const e=Se.find((e=>e.serialNumber===Ze.serialNumber&&e.inputIndex===Ze.inputIndex));if(!e)throw new Error("Current input data not found");await Ye(be.serialNumber,Ze.inputIndex,Ze.field,ss,e),console.log(`✅ ${Ze.field} updated successfully!`)}we((e=>e.map((e=>e.serialNumber===Ze.serialNumber&&e.inputIndex===Ze.inputIndex?{...e,[Ze.field]:"fValue"===Ze.field?(1e3*parseFloat(ss||"0")).toString():ss}:e)))),console.log("Updated",Ze.field,":",ss,"for",Ze),es(null)}catch(e){console.error("Failed to update:",e),alert(`Failed to update: ${e instanceof Error?e.message:"Unknown error"}`)}finally{rs(!1)}}else es(null);else es(null)},Je=e=>{"Enter"===e.key?(e.preventDefault(),qe()):"Escape"===e.key&&(e.preventDefault(),es(null),ts(""))},[Qe,Xe]=s.exports.useState(""),[Ze,es]=s.exports.useState(null),[ss,ts]=s.exports.useState(""),[ls,rs]=s.exports.useState(!1),[ns,as]=s.exports.useState(!1),[os,is]=s.exports.useState(null),[cs,ds]=s.exports.useState(null),[us,ps]=s.exports.useState("ascending"),xs=e=>{cs===e?ps("ascending"===us?"descending":"ascending"):(ds(e),ps("ascending"))},hs=t.useMemo((()=>0===Se.length?Array(10).fill(null).map(((e,s)=>({serialNumber:(null==be?void 0:be.serialNumber)||0,inputId:"",inputIndex:"",panel:"",fullLabel:"",autoManual:"",fValue:"",units:"",range:"",rangeField:"",calibration:"",sign:"",filterField:"",status:"",signalType:"",digitalAnalog:"",label:"",typeField:""}))):Se),[Se,be]),ms=e=>!e.inputIndex&&!e.inputId&&0===Se.length,gs=[C({columnId:"panel",renderHeaderCell:()=>e.exports.jsxs("div",{className:te,onClick:()=>xs("panel"),children:[e.exports.jsx("span",{children:"Panel"}),"panel"===cs?"ascending"===us?e.exports.jsx(g,{}):e.exports.jsx(f,{}):e.exports.jsx(j,{className:re})]}),renderCell:s=>e.exports.jsx(k,{children:!ms(s)&&(s.panel||"---")})}),C({columnId:"input",renderHeaderCell:()=>e.exports.jsxs("div",{className:te,onClick:()=>xs("input"),children:[e.exports.jsx("span",{children:"Input"}),"input"===cs?"ascending"===us?e.exports.jsx(g,{}):e.exports.jsx(f,{}):e.exports.jsx(j,{className:re})]}),renderCell:s=>{const t=s.inputIndex||"",l=Ee.has(t);return e.exports.jsx(k,{children:!ms(s)&&e.exports.jsxs("div",{className:ne,children:[e.exports.jsx("button",{onClick:e=>{e.stopPropagation(),(async e=>{if(!be)return;const s=parseInt(e,10);if(isNaN(s))console.error("[InputsPage] Invalid input index:",e);else{Le((s=>new Set(s).add(e)));try{console.log(`[InputsPage] Refreshing input ${s} from device via FFI...`);const t=await m.refreshSingleInput(be.serialNumber,s);console.log("[InputsPage] Refresh result:",t),await Ue()}catch(t){console.error(`[InputsPage] Failed to refresh input ${s}:`,t)}finally{Le((s=>{const t=new Set(s);return t.delete(e),t}))}}})(t)},className:`${Z} ${l?ee:""}`,title:"Refresh this input from device",disabled:l,children:e.exports.jsx(i,{className:`${ie} ${l?se:""}`})}),e.exports.jsx(o,{size:200,weight:"regular",children:s.inputId||(s.inputIndex?`IN${parseInt(s.inputIndex)+1}`:"---")})]})})}}),C({columnId:"fullLabel",renderHeaderCell:()=>e.exports.jsxs("div",{className:te,onClick:()=>xs("fullLabel"),children:[e.exports.jsx("span",{children:"Full Label"}),"fullLabel"===cs?"ascending"===us?e.exports.jsx(g,{}):e.exports.jsx(f,{}):e.exports.jsx(j,{className:re})]}),renderCell:s=>{const t=(null==Ze?void 0:Ze.serialNumber)===s.serialNumber&&(null==Ze?void 0:Ze.inputIndex)===s.inputIndex&&"fullLabel"===(null==Ze?void 0:Ze.field);return e.exports.jsx(k,{children:!ms(s)&&(t?e.exports.jsxs("div",{className:ae,children:[e.exports.jsx("input",{type:"text",className:`${Q} ${oe}`,value:ss,onChange:e=>ts(e.target.value),onBlur:qe,onKeyDown:Je,autoFocus:!0,disabled:ls,placeholder:"Enter label","aria-label":"Edit full label"}),e.exports.jsx("button",{onClick:e=>{e.stopPropagation(),qe()},disabled:ls,className:X,title:"Save",children:e.exports.jsx(b,{className:ce})})]}):e.exports.jsx("div",{className:J,onDoubleClick:()=>Ge(s,"fullLabel",s.fullLabel||""),title:"Double-click to edit",children:e.exports.jsx(o,{size:200,weight:"regular",children:s.fullLabel||"Unnamed"})}))})}}),C({columnId:"label",renderHeaderCell:()=>e.exports.jsxs("div",{className:te,onClick:()=>xs("label"),children:[e.exports.jsx("span",{children:"Label"}),"label"===cs?"ascending"===us?e.exports.jsx(g,{}):e.exports.jsx(f,{}):e.exports.jsx(j,{className:re})]}),renderCell:s=>{const t=(null==Ze?void 0:Ze.serialNumber)===s.serialNumber&&(null==Ze?void 0:Ze.inputIndex)===s.inputIndex&&"label"===(null==Ze?void 0:Ze.field);return e.exports.jsx(k,{children:!ms(s)&&(t?e.exports.jsxs("div",{className:ae,children:[e.exports.jsx("input",{type:"text",className:`${Q} ${oe}`,value:ss,onChange:e=>ts(e.target.value),onBlur:qe,onKeyDown:Je,autoFocus:!0,disabled:ls,placeholder:"Enter label","aria-label":"Edit label"}),e.exports.jsx("button",{onClick:e=>{e.stopPropagation(),qe()},disabled:ls,className:X,title:"Save",children:e.exports.jsx(b,{className:ce})})]}):e.exports.jsx("div",{className:J,onDoubleClick:()=>Ge(s,"label",s.label||""),title:"Double-click to edit",children:e.exports.jsx(o,{size:200,weight:"regular",children:s.label||"---"})}))})}}),C({columnId:"autoManual",renderHeaderCell:()=>e.exports.jsx("div",{className:le,children:e.exports.jsx("span",{children:"Auto/Man"})}),renderCell:s=>{var t;const l=null==(t=s.autoManual)?void 0:t.toString().toLowerCase(),r="auto"===l||"1"===l;return e.exports.jsx(k,{children:!ms(s)&&e.exports.jsx("div",{onClick:async()=>{const e=r?"0":"1";console.log("Auto/Man toggled:",s.serialNumber,s.inputIndex,e);try{const t=Se.find((e=>e.serialNumber===s.serialNumber&&e.inputIndex===s.inputIndex));if(!t)throw new Error("Current input data not found");await Ye(s.serialNumber,s.inputIndex,"autoManual",e,t),we((t=>t.map((t=>t.serialNumber===s.serialNumber&&t.inputIndex===s.inputIndex?{...t,autoManual:e}:t)))),console.log("✅ Auto/Man updated successfully!")}catch(t){console.error("Failed to update Auto/Man:",t),alert(`Failed to update Auto/Man: ${t instanceof Error?t.message:"Unknown error"}`)}},className:ue,children:e.exports.jsx(v,{checked:r,className:de})})})}}),C({columnId:"value",renderHeaderCell:()=>e.exports.jsxs("div",{className:te,onClick:()=>xs("value"),children:[e.exports.jsx("span",{children:"Value"}),"value"===cs?"ascending"===us?e.exports.jsx(g,{}):e.exports.jsx(f,{}):e.exports.jsx(j,{className:re})]}),renderCell:s=>{const t=(null==Ze?void 0:Ze.serialNumber)===s.serialNumber&&(null==Ze?void 0:Ze.inputIndex)===s.inputIndex&&"fValue"===(null==Ze?void 0:Ze.field);return e.exports.jsx(k,{children:!ms(s)&&(t?e.exports.jsxs("div",{className:ae,children:[e.exports.jsx("input",{type:"number",step:"0.01",className:`${Q} ${oe}`,value:ss,onChange:e=>ts(e.target.value),onBlur:qe,onKeyDown:Je,autoFocus:!0,disabled:ls,placeholder:"Enter value","aria-label":"Edit value"}),e.exports.jsx("button",{onClick:e=>{e.stopPropagation(),qe()},disabled:ls,className:X,title:"Save",children:e.exports.jsx(b,{className:ce})})]}):e.exports.jsx("div",{className:J,onDoubleClick:()=>Ge(s,"fValue",s.fValue?(parseFloat(s.fValue)/1e3).toFixed(2):"0"),title:"Double-click to edit",children:e.exports.jsx(o,{size:200,weight:"regular",children:s.fValue?(parseFloat(s.fValue)/1e3).toFixed(2):"---"})}))})}}),C({columnId:"units",renderHeaderCell:()=>e.exports.jsxs("div",{className:te,onClick:()=>xs("units"),children:[e.exports.jsx("span",{children:"Units"}),"units"===cs?"ascending"===us?e.exports.jsx(g,{}):e.exports.jsx(f,{}):e.exports.jsx(j,{className:re})]}),renderCell:s=>e.exports.jsx(k,{children:!ms(s)&&(s.units||"---")})}),C({columnId:"range",renderHeaderCell:()=>e.exports.jsxs("div",{className:te,onClick:()=>xs("range"),children:[e.exports.jsx("span",{children:"Range"}),"range"===cs?"ascending"===us?e.exports.jsx(g,{}):e.exports.jsx(f,{}):e.exports.jsx(j,{className:re})]}),renderCell:s=>{const t=s.range?parseInt(s.range):0,l="Digital"===s.signalType?1:0,r=I(t,l);return e.exports.jsx(k,{children:!ms(s)&&e.exports.jsx("div",{onClick:()=>(e=>{is(e),as(!0)})(s),className:pe,title:"Click to change range",children:e.exports.jsx(o,{size:200,weight:"regular",children:r})})})}}),C({columnId:"calibration",renderHeaderCell:()=>e.exports.jsx("div",{className:le,children:e.exports.jsx("span",{children:"Calibration"})}),renderCell:s=>e.exports.jsx(k,{children:!ms(s)&&(s.calibration||"0")})}),C({columnId:"sign",renderHeaderCell:()=>e.exports.jsx("div",{className:le,children:e.exports.jsx("span",{children:"Sign"})}),renderCell:s=>e.exports.jsx(k,{children:!ms(s)&&(s.sign||"+")})}),C({columnId:"filter",renderHeaderCell:()=>e.exports.jsx("div",{className:le,children:e.exports.jsx("span",{children:"Filter"})}),renderCell:s=>e.exports.jsx(k,{children:!ms(s)&&(s.filterField||"0")})}),C({columnId:"status",renderHeaderCell:()=>e.exports.jsxs("div",{className:te,onClick:()=>xs("status"),children:[e.exports.jsx("span",{children:"Status"}),"status"===cs?"ascending"===us?e.exports.jsx(g,{}):e.exports.jsx(f,{}):e.exports.jsx(j,{className:re})]}),renderCell:s=>{var t;let l="Normal",r="success";const n=null==(t=s.status)?void 0:t.toString();return"0"===n||"64"===n?(l="Normal",r="success"):n&&"online"!==n&&"normal"!==n?(l=`Code ${n}`,r="warning"):"online"!==(null==n?void 0:n.toLowerCase())&&"normal"!==(null==n?void 0:n.toLowerCase())||(l="Normal",r="success"),e.exports.jsx(k,{children:!ms(s)&&e.exports.jsx(_,{appearance:"filled",color:r,children:l})})}}),C({columnId:"signalType",renderHeaderCell:()=>e.exports.jsx("div",{className:le,children:e.exports.jsx("span",{children:"Signal Type"})}),renderCell:()=>e.exports.jsx(k,{})}),C({columnId:"type",renderHeaderCell:()=>e.exports.jsx("div",{className:le,children:e.exports.jsx("span",{children:"Type"})}),renderCell:s=>{const t="0"===s.digitalAnalog;return e.exports.jsx(k,{children:!ms(s)&&e.exports.jsx(_,{appearance:"outline",color:t?"informative":"brand",children:t?"Digital":"Analog"})})}})];return e.exports.jsxs("div",{className:D,children:[e.exports.jsx("div",{className:E,children:e.exports.jsx("div",{className:L,children:e.exports.jsx("div",{className:T,children:e.exports.jsxs("div",{className:W,children:[$e&&e.exports.jsxs("div",{className:he,children:[e.exports.jsx(a,{className:me}),e.exports.jsx(o,{className:ge,children:$e})]}),be&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("div",{className:P,children:e.exports.jsxs("div",{className:R,children:[e.exports.jsxs("button",{className:A,onClick:async()=>{if(be){Re.current&&(Me.current=Re.current.scrollTop),De(!0),Ce("Refreshing inputs from device...","info");try{console.log("[InputsPage] Refreshing all inputs from device via FFI...");const e=await m.refreshFromDevice({serialNumber:be.serialNumber,type:"input",onLoadingChange:e=>{e&&Ce("Loading data from device (Action 17)...","info")}});console.log("[InputsPage] Refresh result:",e),Ce(e.message,"success")}catch(e){console.error("[InputsPage] Failed to refresh from device:",e);const s=e instanceof Error?e.message:"Failed to refresh from device";Fe(s),Ce(s,"error")}finally{await Ue(),De(!1)}}},disabled:ke,title:"Refresh all inputs from device","aria-label":"Refresh from Device",children:[e.exports.jsx(i,{}),e.exports.jsx("span",{children:ke?"Refreshing...":"Refresh from Device"})]}),e.exports.jsxs("button",{className:A,onClick:()=>{console.log("Export inputs to CSV")},title:"Export to CSV","aria-label":"Export to CSV",children:[e.exports.jsx(c,{}),e.exports.jsx("span",{children:"Export to CSV"})]}),e.exports.jsx("div",{className:H,role:"separator"}),e.exports.jsxs("button",{className:A,onClick:()=>{console.log("Settings clicked")},title:"Settings","aria-label":"Settings",children:[e.exports.jsx(d,{}),e.exports.jsx("span",{children:"Settings"})]}),e.exports.jsxs("div",{className:V,children:[e.exports.jsx(u,{className:M}),e.exports.jsx("input",{className:U,type:"text",placeholder:"Search inputs...",value:Qe,onChange:e=>{Xe(e.target.value),console.log("Search query:",e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search inputs"})]}),e.exports.jsx(p,{content:`Showing input points for ${be.nameShowOnTree} (SN: ${be.serialNumber}). This table displays all configured input points including digital and analog sensors, their current values, calibration settings, and operational status.`,relationship:"description",children:e.exports.jsx("button",{className:`${A} ${xe}`,title:"Information","aria-label":"Information about this page",children:e.exports.jsx(x,{})})})]})}),e.exports.jsx("div",{className:fe,children:e.exports.jsx("hr",{className:B})})]}),e.exports.jsxs("div",{className:O,children:[ye&&0===Se.length&&e.exports.jsxs("div",{className:Y,children:[e.exports.jsx(h,{size:"tiny"}),e.exports.jsx(o,{size:200,weight:"regular",children:"Loading inputs..."})]}),!be&&!ye&&e.exports.jsx("div",{className:G,children:e.exports.jsxs("div",{className:je,children:[e.exports.jsx(o,{size:400,weight:"semibold",children:"No device selected"}),e.exports.jsx("br",{}),e.exports.jsx(o,{size:200,children:"Please select a device from the tree to view inputs"})]})}),be&&!ye&&0===Se.length&&e.exports.jsx("div",{className:G,children:e.exports.jsxs("div",{className:je,children:[e.exports.jsx(o,{size:400,weight:"semibold",children:"No inputs found"}),e.exports.jsx("br",{}),e.exports.jsx(o,{size:200,children:"This device has no configured input points"})]})}),be&&!ye&&Se.length>0&&e.exports.jsxs("div",{ref:Re,className:K,onScroll:Oe,onWheel:Ke,children:[e.exports.jsxs(S,{items:hs,columns:gs,sortable:!0,resizableColumns:!0,columnSizingOptions:{input:{minWidth:60,defaultWidth:80},panel:{minWidth:60,defaultWidth:75},fullLabel:{minWidth:180,defaultWidth:250},autoManual:{minWidth:90,defaultWidth:120},value:{minWidth:120,defaultWidth:180},units:{minWidth:100,defaultWidth:150},range:{minWidth:80,defaultWidth:100},calibration:{minWidth:80,defaultWidth:100},sign:{minWidth:50,defaultWidth:60},filter:{minWidth:60,defaultWidth:80},status:{minWidth:80,defaultWidth:100},signalType:{minWidth:90,defaultWidth:110},label:{minWidth:130,defaultWidth:170},type:{minWidth:60,defaultWidth:75}},children:[e.exports.jsx(w,{children:e.exports.jsx(y,{children:({renderHeaderCell:s})=>e.exports.jsx(z,{children:s()})})}),e.exports.jsx($,{children:({item:s,rowId:t})=>e.exports.jsx(y,{children:({renderCell:t})=>e.exports.jsx(F,{children:t(s)})},t)})]}),Ae&&e.exports.jsxs("div",{className:q,children:[e.exports.jsx(h,{size:"tiny"}),e.exports.jsx(o,{size:200,weight:"regular",children:"Loading next device..."})]})]})]})]})})})}),os&&e.exports.jsx(N,{isOpen:ns,onClose:()=>as(!1),currentRange:os.range?parseInt(os.range):0,digitalAnalog:"Digital"===os.signalType?1:0,onSave:async e=>{if(os&&be)try{console.log("=== Updating range ==="),console.log(`Device: ${be.serialNumber}, Input: ${os.inputIndex}, New Range: ${e}`);const s=Se.find((e=>e.serialNumber===os.serialNumber&&e.inputIndex===os.inputIndex));if(!s)throw new Error("Current input data not found");await Ye(be.serialNumber,os.inputIndex,"range",e.toString(),s),we((s=>s.map((s=>s.serialNumber===os.serialNumber&&s.inputIndex===os.inputIndex?{...s,range:e.toString(),rangeField:e.toString()}:s)))),console.log("✅ Range updated successfully!")}catch(s){console.error("Failed to update range:",s),alert(`Failed to update range: ${s instanceof Error?s.message:"Unknown error"}`)}},inputLabel:`Input ${os.inputIndex||os.inputId} - ${os.fullLabel||"Unnamed"}`})]})};export{be as InputsPage,be as default};

var t=Object.defineProperty,e=(e,n,a)=>(((e,n,a)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a})(e,"symbol"!=typeof n?n+"":n,a),a);import{bK as n}from"./index.3bd6c859.js";class a{}e(a,"clipboard"),e(a,"currentObjSeqId"),e(a,"docUtil"),e(a,"opt"),e(a,"wallOpt"),e(a,"maxUndo",25),e(a,"state"),e(a,"stdObj"),e(a,"userSetting"),e(a,"Evt_ShapeDragStart"),e(a,"Evt_LMShapeHold"),e(a,"Evt_LMShapeDoubleTap"),e(a,"Evt_StampObjectDragEnd"),e(a,"Evt_LMMouseStpObjectDone"),e(a,"arrowHlkTable",[]),e(a,"arrowHsTable",[]),e(a,"gFmtTextObj"),e(a,"quasar");class s{}e(s,"StateOperationType",{CREATE:1,UPDATE:2,DELETE:3}),e(s,"StoredObjectType",{BaseDrawObject:"BaseDrawObject",TextObject:"TextObject",NotesObject:"NotesObject",SDDataObject:"SDData",TEDataObject:"TEData",SelectedListObject:"SelectedList",LinkListObject:"Links",LayersManagerObject:"LayersManager",HNativeObject:"hNative",HNativeWinObject:"hNativeWindows",BlobBytesObject:"BlobBytes",STDataObject:"STData",ExpandedViewObject:"ExpandedView",CommentBlock:"CommentBlock",CommentThread:"CommentThread",CommentList:"CommentList"});class r{constructor(t,n,r,i,l,c){if(e(this,"ID"),e(this,"Dirty"),e(this,"Type"),e(this,"Data"),e(this,"IsPersisted"),e(this,"stateOptTypeId"),e(this,"Delete",(()=>{a.stdObj.DeleteObject(this.ID)})),this.ID=t===parseInt(t,10)&&t>=0?t:-1,this.Dirty=i||!1,this.Type=n||null,this.Data=r||null,this.IsPersisted=!1!==l,this.stateOptTypeId=null,this.Data&&o.IsObject(this.Data)&&(this.Data.BlockID=t),void 0===c||!1===c||null===c)return this;if(void 0!==a.stdObj&&!0===this.IsPersisted)if(-1!==this.ID){const t=a.stdObj.GetObject(this.ID);if(void 0!==t)return null==t?null:(t.Type=n?this.Type:t.Type,t.Data=r?this.Data:t.Data,t.Dirty=i?this.Dirty:t.Dirty,t.stateOptTypeId=s.StateOperationType.UPDATE,t.IsPersisted=this.IsPersisted,t.Delete=this.Delete,a.stdObj.SaveObject(t),t)}else this.stateOptTypeId=s.StateOperationType.CREATE,a.stdObj.SaveObject(this)}}class i{constructor(){e(this,"angle"),e(this,"origSeg"),e(this,"clipSeg"),e(this,"extSeg"),this.angle=0,this.origSeg={start:{x:0,y:0},end:{x:0,y:0}},this.clipSeg={start:{x:0,y:0},end:{x:0,y:0}},this.extSeg={startRay:{x:0,y:0},startExt:{x:0,y:0},start:{x:0,y:0},end:{x:0,y:0},endExt:{x:0,y:0},endRay:{x:0,y:0}}}}class o{static Alert(t,e,a){let s="Error: ";t&&(s=t),e&&(s+=e),n.create({title:"Alert",message:s,ok:{label:"OK",color:"primary",handler:()=>{"function"==typeof a&&a()}},persistent:!0})}static IsObject(t){return null!==t&&"object"==typeof t}static CloneBlock(t){const e=o.GetObjectInstance;if(null===t||"object"!=typeof t)throw new Error("Parameter is not an object");const n=e(t),a=o.DeepCopy({...n,...t});return null!==t.Data&&t.Data instanceof Object&&(a.Data=o.DeepCopy(t.Data)),a}static GetObjectInstance(t){if(null===t||"object"!=typeof t)throw new Error("Parameter is not an object");let e;if(t.constructor===r)e=new r(null,null,null,!1,!1,!0);else if(t instanceof Array)e=[];else{e=void 0;for(const[a,r]of Object.entries(s.StoredObjectType))try{if(t.Type===r){e=new t.constructor({});break}}catch(n){throw n}}return e}static GenerateObjectID(){return a.currentObjSeqId+=1,a.currentObjSeqId}static PatchArrayBufferSlice(){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(t,e){const n=new Uint8Array(this);void 0===e&&(e=n.length);const a=e-t,s=new ArrayBuffer(a),r=new Uint8Array(s);for(let i=0;i<a;i++)r[i]=n[i+t];return s})}static IsStateOpen(){return a.state.currentStateId>0&&a.state.states[a.state.currentStateId].IsOpen}static DeepCopy(t){if(null==t)return null;const e=typeof t;if(t instanceof Array){const e=[],n=t.length;for(let a=0;a<n;a++)e.push(o.DeepCopy(t[a]));return e}if("string"===e||"number"===e||"boolean"===e||"function"===e)return t;if(t instanceof Blob){return t.slice()}if(t instanceof Uint8Array)return t;if("object"===e){const e=new t.constructor;for(const n in t){const a=t[n],s=typeof a;if(null==a)e[n]=a;else if("string"===s||"number"===s||"boolean"===s)e[n]=a;else if(a instanceof Array){null==e[n]&&(e[n]=[]);const t=a.length;for(let s=0;s<t;s++)e[n].push(o.DeepCopy(a[s]))}else"function"!==s&&(e[n]=o.DeepCopy(a))}return e}return null}static GenerateUUID(){let t=(new Date).getTime(),e=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){let a=16*Math.random();return t>0?(a=(t+a)%16|0,t=Math.floor(t/16)):(a=(e+a)%16|0,e=Math.floor(e/16)),("x"===n?a:3&a|8).toString(16)}))}static CalcAngleFromPoints(t,e){let n,a=e.x-t.x,s=e.y-t.y;return 0===s?n=a>=0?0:180:0===a?n=s>0?90:270:(n=Math.atan(s/a)*(180/Math.PI),a<0?n+=180:s<0&&(n+=360)),n}static RoundCoord(t){const e=Math.round(1e3*Number(t))/1e3;return isNaN(e)?t:e}static RoundCoordExt(t){const e=Math.round(100*Number(t))/100;return isNaN(e)?t:e}static RoundCoordLP(t){const e=Math.round(10*Number(t))/10;return isNaN(e)?t:e}static ResolveHyperlink(t){return null}static ResolveHyperlinkForDisplay(t){let e=t||"";if(e.indexOf("\r")>=0){const t=e.split("\r");e=t[0]}else 0===e.indexOf("/#")&&(e=e.slice(2));return e}static CopyObj(t){return t?JSON.parse(JSON.stringify(t)):null}static ToTitleCase(t){return t.replace(/([^\W_]+[^\s-]*) */g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}))}static StrEscapeRegExp(t){return t.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")}static StrReplaceAll(t,e,n){return n.replace(new RegExp(this.StrEscapeRegExp(t),"g"),e)}static CloneToDoc(t,e){const n=document.createElementNS(t.namespaceURI,t.nodeName);for(let a=0,s=t.attributes.length;a<s;++a){const s=t.attributes[a],r=s.nodeName;if(r.length){const t=r[0]>="A"&&r[0]<="Z"?r.toLowerCase():r;e?""!==s.nodeValue&&"xmlns"!==t&&n.setAttribute(t,s.nodeValue):""!==s.nodeValue&&n.setAttribute(t,s.nodeValue)}}for(let a=0,s=t.childNodes.length;a<s;++a){const s=t.childNodes[a];1===s.nodeType?n.insertBefore(this.CloneToDoc(s,e),null):n.insertBefore(document.createTextNode(s.nodeValue),null)}return n}static CalcSegmentAngle(t,e){const n=e.x-t.x,a=e.y-t.y;let s;if(0===a)s=n>=0?0:180;else if(0===n)s=a>0?90:270;else{const t=a/n;s=180*Math.atan(t)/Math.PI,n<0?s+=180:a<0&&(s+=360)}return s}static RotatePoint(t,e,n){var a,s,r,i;const o=Math.PI*-n/180;let l=Math.sin(o),c=Math.cos(o);Math.abs(l)<1e-4&&(l=0),Math.abs(c)<1e-4&&(c=0);const E=e.x-(null!=(a=null==t?void 0:t.x)?a:0),A=e.y-(null!=(s=null==t?void 0:t.y)?s:0);return{x:E*c+A*l+(null!=(r=null==t?void 0:t.x)?r:0),y:-E*l+A*c+(null!=(i=null==t?void 0:t.y)?i:0)}}static OffsetPointAtAngle(t,e,n){const a=o.DeepCopy(t);if(0!==n){a.x+=n;return this.RotatePoint(t,a,e)}return a}static CalcExtendedOffsetSegment(t,e,n,a){const s=this.CalcSegmentAngle(t.origSeg.start,t.origSeg.end),r=s-90;t.extSeg.start=this.OffsetPointAtAngle(t.origSeg.start,r,e),t.extSeg.end=this.OffsetPointAtAngle(t.origSeg.end,r,e),t.extSeg.startExt=this.OffsetPointAtAngle(t.extSeg.start,s,-e*n),t.extSeg.startRay=this.OffsetPointAtAngle(t.extSeg.start,s,-a),t.extSeg.endExt=this.OffsetPointAtAngle(t.extSeg.end,s,e*n),t.extSeg.endRay=this.OffsetPointAtAngle(t.extSeg.end,s,a),t.extSeg.start=this.OffsetPointAtAngle(t.extSeg.start,s,-1),t.extSeg.end=this.OffsetPointAtAngle(t.extSeg.end,s,1),t.angle=s}static CalcSegmentIntersect(t,e,n,a,s){const r=(a.y-n.y)*(e.x-t.x)-(a.x-n.x)*(e.y-t.y),i=((a.x-n.x)*(t.y-n.y)-(a.y-n.y)*(t.x-n.x))/r,o=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/r;if(0===r){if(0===i&&0===o){let a,r,i,o;if(t.x<=e.x?(a=t.x,r=e.x):(a=e.x,r=t.x),t.y<=e.y?(i=t.y,o=e.y):(i=e.y,o=t.y),n.x>=a&&n.x<=r&&n.y>=i&&n.y<=o)return s.x=(n.x+e.x)/2,s.y=(n.y+e.y)/2,!0}return!1}return!(i<0||i>1||o<0||o>1)&&(s.x=t.x+i*(e.x-t.x),s.y=t.y+i*(e.y-t.y),!0)}static GetSegmentCenterPoint(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}static CompareAngle(t,e){let n;return n=t===e?0:t>e?t<e+180?1:-1:t<e-180?1:-1,n}static DeltaAngle(t,e){let n=t-e;return n>180?n-=360:n<-180&&(n+=360),n}static DeltaPoints(t,e){const n=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);return n>a?n:a}static GetSegmentsDeltaAngle(t,e,n,a){let s=0,r=n;for(;r!==a;)r--,r<0&&(r=e-1),s+=this.DeltaAngle(t[n].angle,t[r].angle),n=r;return s}static AreSegmentsObtuse(t,e,n,a){return this.GetSegmentsDeltaAngle(t,e,n,a)>0}static AreSegmentsAjacent(t,e,n){n<0&&(n=t-1);return n===e-1}static InsertSegment(t,e,n,a,s,r,o){const l=new i;l.extSeg.start=n,l.extSeg.end=a,l.clipSeg.start=n,l.clipSeg.end=a,l.angle=this.CalcSegmentAngle(n,a),l.extSeg.startExt=this.OffsetPointAtAngle(n,l.angle,-s*r),l.extSeg.startRay=this.OffsetPointAtAngle(n,l.angle,-o),l.extSeg.endExt=this.OffsetPointAtAngle(a,l.angle,s*r),l.extSeg.endRay=this.OffsetPointAtAngle(a,l.angle,o),t.splice(e,0,l)}static SegmentsInAlignment(t,e,n,a){const s=-t[a].angle,r=t[a].extSeg.start,i=this.RotatePoint(r,t[a].extSeg.end,s),o=this.RotatePoint(r,t[n].extSeg.start,s),l=this.RotatePoint(r,t[n].extSeg.end,s);return o.x>i.x&&l.x>i.x&&o.x<=l.x}static IsEmptySeg(t){return t.start.x===t.end.x&&t.start.y===t.end.y}static IsStart(t,e){return 0===t&&!e}static IsEnd(t,e,n){return t===e-1&&!n}static TrimTrailing(t){return t.replace(/\s+$/g,"")}static TrimLeading(t){return t.replace(/^\s+/g,"")}static CleanGraphics(){}static MakeGuid(){return"aaaaaaaa-aaaa-4aaa-8aaa-aaaaaaaaaaaa".replace(/a/g,(function(){return Math.floor(16*Math.random()).toString(16)}))}}class l{}e(l,"DATA_SERVER_ONLINE",-1),e(l,"GET_PANEL_DATA",0),e(l,"GET_INITIAL_DATA",1),e(l,"SAVE_GRAPHIC_DATA",2),e(l,"UPDATE_ENTRY",3),e(l,"GET_PANELS_LIST",4),e(l,"GET_PANEL_RANGE_INFO",5),e(l,"GET_ENTRIES",6),e(l,"LOAD_GRAPHIC_ENTRY",7),e(l,"OPEN_ENTRY_EDIT_WINDOW",8),e(l,"SAVE_IMAGE",9),e(l,"SAVE_LIBRARY_DATA",10),e(l,"DELETE_IMAGE",11),e(l,"GET_SELECTED_DEVICE_INFO",12),e(l,"BIND_DEVICE",13),e(l,"SAVE_NEW_LIBRARY_DATA",14),e(l,"LOGGING_DATA",15),e(l,"GET_PANEL_DATA_RES","GET_PANEL_DATA_RES"),e(l,"GET_INITIAL_DATA_RES","GET_INITIAL_DATA_RES"),e(l,"SAVE_GRAPHIC_DATA_RES","SAVE_GRAPHIC_DATA_RES"),e(l,"UPDATE_ENTRY_RES","UPDATE_ENTRY_RES"),e(l,"GET_PANELS_LIST_RES","GET_PANELS_LIST_RES"),e(l,"GET_PANEL_RANGE_INFO_RES","GET_PANEL_RANGE_INFO_RES"),e(l,"GET_ENTRIES_RES","GET_ENTRIES_RES"),e(l,"LOAD_GRAPHIC_ENTRY_RES","LOAD_GRAPHIC_ENTRY_RES"),e(l,"OPEN_ENTRY_EDIT_WINDOW_RES","OPEN_ENTRY_EDIT_WINDOW"),e(l,"SAVE_IMAGE_RES","SAVE_IMAGE_RES"),e(l,"SAVE_LIBRARY_DATA_RES","SAVE_LIBRAY_DATA_RES"),e(l,"DELETE_IMAGE_RES","DELETE_IMAGE_RES"),e(l,"GET_SELECTED_DEVICE_INFO_RES","GET_SELECTED_DEVICE_INFO_RES"),e(l,"BIND_DEVICE_RES","BIND_DEVICE_RES"),e(l,"SAVE_NEW_LIBRARY_DATA_RES","SAVE_NEW_LIBRARY_DATA_RES"),e(l,"LOGGING_DATA_RES","LOGGING_DATA_RES");export{r as D,l as M,s as S,a as T,o as U,i as a};

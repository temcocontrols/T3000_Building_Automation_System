import{h as a,o as e,e as s,X as t,Y as l,Z as o,c as r,a4 as i,an as n,aw as c,C as d,$ as u,aD as m,am as f,ao as b,ax as h}from"./index.9313841a.js";import{Q as v,a as p}from"./QTable.a99795ad.js";import{Q as _}from"./QBadge.dc0fd2bb.js";import{u as g}from"./use-quasar.ca800b49.js";import{_ as y}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.ee2e6e4d.js";import"./position-engine.57eefbc7.js";import"./QMarkupTable.7bd30c76.js";import"./QSelect.0c708abc.js";import"./QChip.ec87464e.js";import"./QItem.257ec3b6.js";import"./QItemLabel.e0bdf6a9.js";import"./format.b9446fb2.js";const S={class:"database-monitoring-panel"},w={class:"health-overview q-mb-md"},T={class:"text-h5"},A={class:"stats-grid q-mb-md"},j={class:"stat-item"},q={class:"stat-value"},z={class:"stat-item"},C={class:"stat-value"},I={class:"stat-item"},Q={class:"stat-value"},x={class:"stat-item"},B={class:"stat-value"},R={class:"chart-placeholder"},M={class:"chart-message"},D={class:"system-info"},P={class:"info-row"},V={class:"info-value"},k={class:"info-row"},E={class:"info-value"},L={class:"info-row"},N={class:"info-value"},H={class:"info-row"},G={class:"info-value"},O={class:"info-row"},F={class:"info-value"},U={class:"refresh-controls q-mt-md"};var K=y({name:"MonitoringStatsPanel",setup(){const t=g(),l=a(!1),o=a(!1),r=a(null),i=a({databaseSize:"45.2 MB",totalRecords:"127,543",activeConnections:3,avgQueryTime:12,sqliteVersion:"3.42.0",databasePath:"Database/webview_t3_device.db",lastBackup:"2025-09-26 08:30:00",lastVacuum:"2025-09-25 22:15:00",uptime:"2 days, 14 hours"}),n=a({status:"Good",icon:"check_circle",class:"health-good"}),c=a([{table_name:"APPLICATION_SETTINGS",record_count:15,size_bytes:8192,health_score:98},{table_name:"DATABASE_PARTITIONS",record_count:3,size_bytes:4096,health_score:95},{table_name:"TRENDLOG_DATA",record_count:125420,size_bytes:47185920,health_score:87},{table_name:"T3_DEVICE",record_count:12,size_bytes:16384,health_score:100}]),d=async()=>{l.value=!0;try{await new Promise((a=>setTimeout(a,500))),t.notify({type:"positive",message:"Statistics refreshed"})}catch(a){t.notify({type:"negative",message:"Failed to refresh statistics"})}finally{l.value=!1}};return e((()=>{d()})),s((()=>{r.value&&clearInterval(r.value)})),{loading:l,autoRefresh:o,stats:i,healthStatus:n,tableStats:c,tableColumns:[{name:"table_name",label:"Table Name",field:"table_name",sortable:!0,align:"left"},{name:"record_count",label:"Records",field:"record_count",sortable:!0,align:"right"},{name:"size",label:"Size",field:"size_bytes",sortable:!0,align:"right"},{name:"health",label:"Health",field:"health_score",sortable:!0,align:"center"}],formatBytes:a=>{if(0===a)return"0 B";const e=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,e)).toFixed(2))+" "+["B","KB","MB","GB"][e]},getHealthColor:a=>a>=95?"positive":a>=80?"warning":"negative",refreshStats:d,toggleAutoRefresh:a=>{a?(r.value=setInterval((()=>{d()}),3e4),t.notify({type:"info",message:"Auto refresh enabled (30s interval)"})):(r.value&&(clearInterval(r.value),r.value=null),t.notify({type:"info",message:"Auto refresh disabled"}))}}}},[["render",function(a,e,s,g,y,K){return t(),l("div",S,[e[16]||(e[16]=o("div",{class:"page-header"},[o("h2",null,"Database Health Monitoring"),o("p",null,"Monitor database performance, size, and connection health")],-1)),o("div",w,[r(f,{flat:"",bordered:"",class:m(["health-card",g.healthStatus.class])},{default:i((()=>[r(n,null,{default:i((()=>[o("div",T,[r(c,{name:g.healthStatus.icon,class:"q-mr-sm"},null,8,["name"]),d(" "+u(g.healthStatus.status),1)]),e[1]||(e[1]=o("div",{class:"text-caption"},"Overall System Health",-1))])),_:1})])),_:1},8,["class"])]),o("div",A,[r(f,{flat:"",bordered:""},{default:i((()=>[r(n,null,{default:i((()=>[o("div",j,[o("div",q,u(g.stats.databaseSize),1),e[2]||(e[2]=o("div",{class:"stat-label"},"Database Size",-1))])])),_:1})])),_:1}),r(f,{flat:"",bordered:""},{default:i((()=>[r(n,null,{default:i((()=>[o("div",z,[o("div",C,u(g.stats.totalRecords),1),e[3]||(e[3]=o("div",{class:"stat-label"},"Total Records",-1))])])),_:1})])),_:1}),r(f,{flat:"",bordered:""},{default:i((()=>[r(n,null,{default:i((()=>[o("div",I,[o("div",Q,u(g.stats.activeConnections),1),e[4]||(e[4]=o("div",{class:"stat-label"},"Active Connections",-1))])])),_:1})])),_:1}),r(f,{flat:"",bordered:""},{default:i((()=>[r(n,null,{default:i((()=>[o("div",x,[o("div",B,u(g.stats.avgQueryTime)+"ms",1),e[5]||(e[5]=o("div",{class:"stat-label"},"Avg Query Time",-1))])])),_:1})])),_:1})]),r(f,{flat:"",bordered:"",class:"q-mb-md"},{default:i((()=>[r(n,null,{default:i((()=>[e[6]||(e[6]=o("div",{class:"text-h6 q-mb-md"},"Table Statistics",-1)),r(v,{rows:g.tableStats,columns:g.tableColumns,"row-key":"table_name",loading:g.loading},{"body-cell-size":i((a=>[r(p,{props:a},{default:i((()=>[d(u(g.formatBytes(a.row.size_bytes)),1)])),_:2},1032,["props"])])),"body-cell-health":i((a=>[r(p,{props:a},{default:i((()=>[r(_,{color:g.getHealthColor(a.row.health_score),label:a.row.health_score+"%"},null,8,["color","label"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading"])])),_:1})])),_:1}),r(f,{flat:"",bordered:"",class:"q-mb-md"},{default:i((()=>[r(n,null,{default:i((()=>[e[9]||(e[9]=o("div",{class:"text-h6 q-mb-md"},"Performance Trends",-1)),o("div",R,[o("div",M,[r(c,{name:"timeline",size:"3rem",color:"grey-5"}),e[7]||(e[7]=o("div",{class:"q-mt-sm text-grey-6"},"Performance chart will be displayed here",-1)),e[8]||(e[8]=o("div",{class:"text-caption text-grey-5"},"Integration with Chart.js or similar charting library",-1))])])])),_:1})])),_:1}),r(f,{flat:"",bordered:""},{default:i((()=>[r(n,null,{default:i((()=>[e[15]||(e[15]=o("div",{class:"text-h6 q-mb-md"},"System Information",-1)),o("div",D,[o("div",P,[e[10]||(e[10]=o("span",{class:"info-label"},"Database Engine:",-1)),o("span",V,"SQLite "+u(g.stats.sqliteVersion),1)]),o("div",k,[e[11]||(e[11]=o("span",{class:"info-label"},"Database Path:",-1)),o("span",E,u(g.stats.databasePath),1)]),o("div",L,[e[12]||(e[12]=o("span",{class:"info-label"},"Last Backup:",-1)),o("span",N,u(g.stats.lastBackup),1)]),o("div",H,[e[13]||(e[13]=o("span",{class:"info-label"},"Last Vacuum:",-1)),o("span",G,u(g.stats.lastVacuum),1)]),o("div",O,[e[14]||(e[14]=o("span",{class:"info-label"},"Uptime:",-1)),o("span",F,u(g.stats.uptime),1)])])])),_:1})])),_:1}),o("div",U,[r(b,{color:"primary",icon:"refresh",label:"Refresh Now",onClick:g.refreshStats},null,8,["onClick"]),r(h,{modelValue:g.autoRefresh,"onUpdate:modelValue":[e[0]||(e[0]=a=>g.autoRefresh=a),g.toggleAutoRefresh],label:"Auto Refresh (30s)",class:"q-ml-md"},null,8,["modelValue","onUpdate:modelValue"])])])}],["__scopeId","data-v-78e18da6"]]);export{K as default};

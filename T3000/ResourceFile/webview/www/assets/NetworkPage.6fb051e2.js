import{j as e}from"./react.1acd1a13.js";import{r as s,R as r}from"./client.58f92968.js";import{l as t,n as o,T as l,y as n,N as a,z as i,P as d,Q as c,I as x,S as p}from"./App.3fe38e41.js";import{c as h,D as m,a as u,b as j,d as f,e as _,f as b}from"./DataGridHeaderCell.f7016832.js";import{T as C}from"./TableCellLayout.9e29eb07.js";import"./index.2479820c.js";import"./Serializer.f6a5f515.js";import"./T3Data.5fdf3c76.js";import"./_commonjsHelpers.a5007c1f.js";var g="_container_17zeo_18",v="_bladeContentContainer_17zeo_30",N="_bladeContentWrapper_17zeo_38",z="_bladeContent_17zeo_30",k="_partContent_17zeo_54",w="_toolbar_17zeo_63",S="_toolbarContainer_17zeo_72",I="_toolbarButton_17zeo_80",y="_toolbarSeparator_17zeo_119",W="_searchInputWrapper_17zeo_127",H="_searchIcon_17zeo_134",D="_searchInput_17zeo_127",E="_overviewHr_17zeo_194",T="_dockingBody_17zeo_202",B="_noData_17zeo_232",R="_loadingBar_17zeo_241";const A=()=>{const{selectedDevice:A,treeData:F,selectDevice:L}=t(),[P,V]=s.exports.useState([]),[M,O]=s.exports.useState(!1),[$,G]=s.exports.useState(null);s.exports.useEffect((()=>{if(!A&&F.length>0){const e=s=>{for(const r of s){if(r.data)return r;if(r.children&&r.children.length>0){const s=e(r.children);if(s)return s}}return null},s=e(F);(null==s?void 0:s.data)&&L(s.data)}}),[A,F,L]);const Q=s.exports.useCallback((async()=>{if(A){O(!0),G(null);try{V([])}catch(e){const s=e instanceof Error?e.message:"Failed to load networks";G(s)}finally{O(!1)}}else V([])}),[A]);s.exports.useEffect((()=>{Q()}),[Q]);const[q,J]=s.exports.useState(""),K=r.useMemo((()=>0===P.length?Array(10).fill(null).map(((e,s)=>({networkId:"",networkNumber:void 0,buildingName:"",deviceCount:void 0,status:"",protocol:"",description:""}))):P),[P]),U=e=>!e.networkId&&0===P.length,X=s.exports.useMemo((()=>[h({columnId:"networkId",renderHeaderCell:()=>e.exports.jsx("span",{children:"Network ID"}),renderCell:s=>e.exports.jsx(C,{children:!U(s)&&s.networkId})}),h({columnId:"networkNumber",renderHeaderCell:()=>e.exports.jsx("span",{children:"Number"}),renderCell:s=>{var r;return e.exports.jsx(C,{children:!U(s)&&(null!=(r=s.networkNumber)?r:"---")})}}),h({columnId:"buildingName",renderHeaderCell:()=>e.exports.jsx("span",{children:"Building Name"}),renderCell:s=>e.exports.jsx(C,{children:!U(s)&&(s.buildingName||"---")})}),h({columnId:"deviceCount",renderHeaderCell:()=>e.exports.jsx("span",{children:"Devices"}),renderCell:s=>{var r;return e.exports.jsx(C,{children:!U(s)&&(null!=(r=s.deviceCount)?r:0)})}}),h({columnId:"status",renderHeaderCell:()=>e.exports.jsx("span",{children:"Status"}),renderCell:s=>e.exports.jsx(C,{children:!U(s)&&(s.status||"---")})}),h({columnId:"protocol",renderHeaderCell:()=>e.exports.jsx("span",{children:"Protocol"}),renderCell:s=>e.exports.jsx(C,{children:!U(s)&&(s.protocol||"---")})}),h({columnId:"description",renderHeaderCell:()=>e.exports.jsx("span",{children:"Description"}),renderCell:s=>e.exports.jsx(C,{children:!U(s)&&(s.description||"---")})})]),[]);return e.exports.jsx("div",{className:g,children:e.exports.jsx("div",{className:v,children:e.exports.jsx("div",{className:N,children:e.exports.jsx("div",{className:z,children:e.exports.jsxs("div",{className:k,children:[$&&e.exports.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#fef6f6",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.exports.jsx(o,{style:{color:"#d13438",fontSize:"16px",flexShrink:0}}),e.exports.jsx(l,{style:{color:"#d13438",fontWeight:500,fontSize:"13px"},children:$})]}),A&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("div",{className:w,children:e.exports.jsxs("div",{className:S,children:[e.exports.jsxs("button",{className:I,onClick:()=>{Q()},disabled:M,title:"Refresh","aria-label":"Refresh",children:[e.exports.jsx(n,{}),e.exports.jsx("span",{children:"Refresh"})]}),e.exports.jsxs("button",{className:I,onClick:()=>{},title:"Export to CSV","aria-label":"Export to CSV",children:[e.exports.jsx(a,{}),e.exports.jsx("span",{children:"Export to CSV"})]}),e.exports.jsx("div",{className:y,role:"separator"}),e.exports.jsxs("button",{className:I,onClick:()=>{},title:"Settings","aria-label":"Settings",children:[e.exports.jsx(i,{}),e.exports.jsx("span",{children:"Settings"})]}),e.exports.jsxs("div",{className:W,children:[e.exports.jsx(d,{className:H}),e.exports.jsx("input",{className:D,type:"text",placeholder:"Search networks...",value:q,onChange:e=>{J(e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search networks"})]}),A&&e.exports.jsx(c,{content:`Showing network topology for ${A.nameShowOnTree} (SN: ${A.serialNumber}). This table displays all configured networks and their connection status.`,relationship:"description",children:e.exports.jsx("button",{className:I,style:{marginLeft:"8px"},title:"Information","aria-label":"Information about this page",children:e.exports.jsx(x,{})})})]})}),e.exports.jsx("div",{style:{padding:"0"},children:e.exports.jsx("hr",{className:E})})]}),e.exports.jsxs("div",{className:T,children:[M&&0===P.length&&e.exports.jsxs("div",{className:R,children:[e.exports.jsx(p,{size:"tiny"}),e.exports.jsx(l,{size:200,weight:"regular",children:"Loading networks..."})]}),!A&&!M&&e.exports.jsx("div",{className:B,children:e.exports.jsxs("div",{style:{textAlign:"center"},children:[e.exports.jsx(l,{size:400,weight:"semibold",children:"No device selected"}),e.exports.jsx("br",{}),e.exports.jsx(l,{size:200,children:"Please select a device from the tree to view network"})]})}),A&&!M&&e.exports.jsx(e.exports.Fragment,{children:e.exports.jsxs(m,{items:K,columns:X,sortable:!0,resizableColumns:!0,columnSizingOptions:{networkId:{minWidth:80,defaultWidth:100},networkNumber:{minWidth:80,defaultWidth:100},buildingName:{minWidth:150,defaultWidth:200},deviceCount:{minWidth:80,defaultWidth:100},status:{minWidth:80,defaultWidth:100},protocol:{minWidth:100,defaultWidth:120},description:{minWidth:150,defaultWidth:250}},children:[e.exports.jsx(u,{children:e.exports.jsx(j,{children:({renderHeaderCell:s})=>e.exports.jsx(f,{children:s()})})}),e.exports.jsx(_,{children:({item:s,rowId:r})=>e.exports.jsx(j,{children:({renderCell:r})=>e.exports.jsx(b,{children:r(s)})},r)})]})})]})]})})})})})};export{A as NetworkPage};

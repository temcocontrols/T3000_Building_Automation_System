import{j as e}from"./react.8639cc86.js";import{r,R as s}from"./client.58f92968.js";import{l as t,n as o,T as l,y as n,N as a,z as i,P as d,Q as c,I as x,S as p}from"./App.7c34790a.js";import{c as h,D as m,a as u,b as j,d as f,e as _,f as b}from"./DataGridHeaderCell.ec45a911.js";import{T as g}from"./TableCellLayout.d4b0b796.js";import"./index.3bd6c859.js";import"./Serializer.f6a5f515.js";import"./axios.65f6a2c9.js";import"./T3Data.63f93fe7.js";import"./_commonjsHelpers.a5007c1f.js";var C="_container_17zeo_18",v="_bladeContentContainer_17zeo_30",N="_bladeContentWrapper_17zeo_38",k="_bladeContent_17zeo_30",w="_partContent_17zeo_54",z="_toolbar_17zeo_63",S="_toolbarContainer_17zeo_72",I="_toolbarButton_17zeo_80",y="_toolbarSeparator_17zeo_119",W="_searchInputWrapper_17zeo_127",H="_searchIcon_17zeo_134",D="_searchInput_17zeo_127",E="_overviewHr_17zeo_194",T="_dockingBody_17zeo_202",B="_noData_17zeo_232",R="_loadingBar_17zeo_241";const V=()=>{const{selectedDevice:V,treeData:A,selectDevice:F}=t(),[L,P]=r.exports.useState([]),[M,O]=r.exports.useState(!1),[$,G]=r.exports.useState(null);r.exports.useEffect((()=>{if(!V&&A.length>0){const e=r=>{for(const s of r){if(s.data)return s;if(s.children&&s.children.length>0){const r=e(s.children);if(r)return r}}return null},r=e(A);(null==r?void 0:r.data)&&F(r.data)}}),[V,A,F]);const Q=r.exports.useCallback((async()=>{if(V){O(!0),G(null);try{P([])}catch(e){const r=e instanceof Error?e.message:"Failed to load networks";G(r),console.error("Error fetching networks:",e)}finally{O(!1)}}else P([])}),[V]);r.exports.useEffect((()=>{Q()}),[Q]);const[q,J]=r.exports.useState(""),K=s.useMemo((()=>0===L.length?Array(10).fill(null).map(((e,r)=>({networkId:"",networkNumber:void 0,buildingName:"",deviceCount:void 0,status:"",protocol:"",description:""}))):L),[L]),U=e=>!e.networkId&&0===L.length,X=r.exports.useMemo((()=>[h({columnId:"networkId",renderHeaderCell:()=>e.exports.jsx("span",{children:"Network ID"}),renderCell:r=>e.exports.jsx(g,{children:!U(r)&&r.networkId})}),h({columnId:"networkNumber",renderHeaderCell:()=>e.exports.jsx("span",{children:"Number"}),renderCell:r=>{var s;return e.exports.jsx(g,{children:!U(r)&&(null!=(s=r.networkNumber)?s:"---")})}}),h({columnId:"buildingName",renderHeaderCell:()=>e.exports.jsx("span",{children:"Building Name"}),renderCell:r=>e.exports.jsx(g,{children:!U(r)&&(r.buildingName||"---")})}),h({columnId:"deviceCount",renderHeaderCell:()=>e.exports.jsx("span",{children:"Devices"}),renderCell:r=>{var s;return e.exports.jsx(g,{children:!U(r)&&(null!=(s=r.deviceCount)?s:0)})}}),h({columnId:"status",renderHeaderCell:()=>e.exports.jsx("span",{children:"Status"}),renderCell:r=>e.exports.jsx(g,{children:!U(r)&&(r.status||"---")})}),h({columnId:"protocol",renderHeaderCell:()=>e.exports.jsx("span",{children:"Protocol"}),renderCell:r=>e.exports.jsx(g,{children:!U(r)&&(r.protocol||"---")})}),h({columnId:"description",renderHeaderCell:()=>e.exports.jsx("span",{children:"Description"}),renderCell:r=>e.exports.jsx(g,{children:!U(r)&&(r.description||"---")})})]),[]);return e.exports.jsx("div",{className:C,children:e.exports.jsx("div",{className:v,children:e.exports.jsx("div",{className:N,children:e.exports.jsx("div",{className:k,children:e.exports.jsxs("div",{className:w,children:[$&&e.exports.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#fef6f6",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.exports.jsx(o,{style:{color:"#d13438",fontSize:"16px",flexShrink:0}}),e.exports.jsx(l,{style:{color:"#d13438",fontWeight:500,fontSize:"13px"},children:$})]}),V&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("div",{className:z,children:e.exports.jsxs("div",{className:S,children:[e.exports.jsxs("button",{className:I,onClick:()=>{Q()},disabled:M,title:"Refresh","aria-label":"Refresh",children:[e.exports.jsx(n,{}),e.exports.jsx("span",{children:"Refresh"})]}),e.exports.jsxs("button",{className:I,onClick:()=>{console.log("Export networks to CSV")},title:"Export to CSV","aria-label":"Export to CSV",children:[e.exports.jsx(a,{}),e.exports.jsx("span",{children:"Export to CSV"})]}),e.exports.jsx("div",{className:y,role:"separator"}),e.exports.jsxs("button",{className:I,onClick:()=>{console.log("Settings clicked")},title:"Settings","aria-label":"Settings",children:[e.exports.jsx(i,{}),e.exports.jsx("span",{children:"Settings"})]}),e.exports.jsxs("div",{className:W,children:[e.exports.jsx(d,{className:H}),e.exports.jsx("input",{className:D,type:"text",placeholder:"Search networks...",value:q,onChange:e=>{J(e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search networks"})]}),V&&e.exports.jsx(c,{content:`Showing network topology for ${V.nameShowOnTree} (SN: ${V.serialNumber}). This table displays all configured networks and their connection status.`,relationship:"description",children:e.exports.jsx("button",{className:I,style:{marginLeft:"8px"},title:"Information","aria-label":"Information about this page",children:e.exports.jsx(x,{})})})]})}),e.exports.jsx("div",{style:{padding:"0"},children:e.exports.jsx("hr",{className:E})})]}),e.exports.jsxs("div",{className:T,children:[M&&0===L.length&&e.exports.jsxs("div",{className:R,children:[e.exports.jsx(p,{size:"tiny"}),e.exports.jsx(l,{size:200,weight:"regular",children:"Loading networks..."})]}),!V&&!M&&e.exports.jsx("div",{className:B,children:e.exports.jsxs("div",{style:{textAlign:"center"},children:[e.exports.jsx(l,{size:400,weight:"semibold",children:"No device selected"}),e.exports.jsx("br",{}),e.exports.jsx(l,{size:200,children:"Please select a device from the tree to view network"})]})}),V&&!M&&e.exports.jsx(e.exports.Fragment,{children:e.exports.jsxs(m,{items:K,columns:X,sortable:!0,resizableColumns:!0,columnSizingOptions:{networkId:{minWidth:80,defaultWidth:100},networkNumber:{minWidth:80,defaultWidth:100},buildingName:{minWidth:150,defaultWidth:200},deviceCount:{minWidth:80,defaultWidth:100},status:{minWidth:80,defaultWidth:100},protocol:{minWidth:100,defaultWidth:120},description:{minWidth:150,defaultWidth:250}},children:[e.exports.jsx(u,{children:e.exports.jsx(j,{children:({renderHeaderCell:r})=>e.exports.jsx(f,{children:r()})})}),e.exports.jsx(_,{children:({item:r,rowId:s})=>e.exports.jsx(j,{children:({renderCell:s})=>e.exports.jsx(b,{children:s(r)})},s)})]})})]})]})})})})})};export{V as NetworkPage};

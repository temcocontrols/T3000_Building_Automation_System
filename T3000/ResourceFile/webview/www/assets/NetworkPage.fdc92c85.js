import{j as e}from"./react.3bc90b5d.js";import{r as s,R as r}from"./client.58f92968.js";import{u as t,E as o,T as l,h as n,N as a,i,P as d,Q as c,I as x,S as p}from"./App.4ea21eda.js";import{c as h,D as m,a as u,b as j,d as g,e as f,f as _}from"./DataGridHeaderCell.c083631d.js";import{T as b}from"./TableCellLayout.777c5080.js";import"./index.f111124c.js";import"./Serializer.f6a5f515.js";import"./axios.65f6a2c9.js";import"./T3Data.f6c34e59.js";import"./_commonjsHelpers.a5007c1f.js";var k="_container_1wgek_35",w="_bladeContentContainer_1wgek_59",C="_bladeContentWrapper_1wgek_75",v="_bladeContent_1wgek_59",N="_partContent_1wgek_107",S="_toolbar_1wgek_125",I="_toolbarContainer_1wgek_143",y="_toolbarButton_1wgek_159",W="_toolbarSeparator_1wgek_237",H="_searchInputWrapper_1wgek_253",D="_searchIcon_1wgek_267",z="_searchInput_1wgek_253",E="_overviewHr_1wgek_387",T="_dockingBody_1wgek_403",B="_noData_1wgek_463",R="_loadingBar_1wgek_481";const A=()=>{const{selectedDevice:A,treeData:F,selectDevice:L}=t(),[P,V]=s.exports.useState([]),[M,O]=s.exports.useState(!1),[$,G]=s.exports.useState(null);s.exports.useEffect((()=>{if(!A&&F.length>0){const e=s=>{for(const r of s){if(r.data)return r;if(r.children&&r.children.length>0){const s=e(r.children);if(s)return s}}return null},s=e(F);(null==s?void 0:s.data)&&L(s.data)}}),[A,F,L]);const Q=s.exports.useCallback((async()=>{if(A){O(!0),G(null);try{V([])}catch(e){const s=e instanceof Error?e.message:"Failed to load networks";G(s)}finally{O(!1)}}else V([])}),[A]);s.exports.useEffect((()=>{Q()}),[Q]);const[q,J]=s.exports.useState(""),K=r.useMemo((()=>0===P.length?Array(10).fill(null).map(((e,s)=>({networkId:"",networkNumber:void 0,buildingName:"",deviceCount:void 0,status:"",protocol:"",description:""}))):P),[P]),U=e=>!e.networkId&&0===P.length,X=s.exports.useMemo((()=>[h({columnId:"networkId",renderHeaderCell:()=>e.exports.jsx("span",{children:"Network ID"}),renderCell:s=>e.exports.jsx(b,{children:!U(s)&&s.networkId})}),h({columnId:"networkNumber",renderHeaderCell:()=>e.exports.jsx("span",{children:"Number"}),renderCell:s=>{var r;return e.exports.jsx(b,{children:!U(s)&&(null!=(r=s.networkNumber)?r:"---")})}}),h({columnId:"buildingName",renderHeaderCell:()=>e.exports.jsx("span",{children:"Building Name"}),renderCell:s=>e.exports.jsx(b,{children:!U(s)&&(s.buildingName||"---")})}),h({columnId:"deviceCount",renderHeaderCell:()=>e.exports.jsx("span",{children:"Devices"}),renderCell:s=>{var r;return e.exports.jsx(b,{children:!U(s)&&(null!=(r=s.deviceCount)?r:0)})}}),h({columnId:"status",renderHeaderCell:()=>e.exports.jsx("span",{children:"Status"}),renderCell:s=>e.exports.jsx(b,{children:!U(s)&&(s.status||"---")})}),h({columnId:"protocol",renderHeaderCell:()=>e.exports.jsx("span",{children:"Protocol"}),renderCell:s=>e.exports.jsx(b,{children:!U(s)&&(s.protocol||"---")})}),h({columnId:"description",renderHeaderCell:()=>e.exports.jsx("span",{children:"Description"}),renderCell:s=>e.exports.jsx(b,{children:!U(s)&&(s.description||"---")})})]),[]);return e.exports.jsx("div",{className:k,children:e.exports.jsx("div",{className:w,children:e.exports.jsx("div",{className:C,children:e.exports.jsx("div",{className:v,children:e.exports.jsxs("div",{className:N,children:[$&&e.exports.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#fef6f6",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[e.exports.jsx(o,{style:{color:"#d13438",fontSize:"16px",flexShrink:0}}),e.exports.jsx(l,{style:{color:"#d13438",fontWeight:500,fontSize:"13px"},children:$})]}),A&&e.exports.jsxs(e.exports.Fragment,{children:[e.exports.jsx("div",{className:S,children:e.exports.jsxs("div",{className:I,children:[e.exports.jsxs("button",{className:y,onClick:()=>{Q()},disabled:M,title:"Refresh","aria-label":"Refresh",children:[e.exports.jsx(n,{}),e.exports.jsx("span",{children:"Refresh"})]}),e.exports.jsxs("button",{className:y,onClick:()=>{},title:"Export to CSV","aria-label":"Export to CSV",children:[e.exports.jsx(a,{}),e.exports.jsx("span",{children:"Export to CSV"})]}),e.exports.jsx("div",{className:W,role:"separator"}),e.exports.jsxs("button",{className:y,onClick:()=>{},title:"Settings","aria-label":"Settings",children:[e.exports.jsx(i,{}),e.exports.jsx("span",{children:"Settings"})]}),e.exports.jsxs("div",{className:H,children:[e.exports.jsx(d,{className:D}),e.exports.jsx("input",{className:z,type:"text",placeholder:"Search networks...",value:q,onChange:e=>{J(e.target.value)},spellCheck:"false",role:"searchbox","aria-label":"Search networks"})]}),A&&e.exports.jsx(c,{content:`Showing network topology for ${A.nameShowOnTree} (SN: ${A.serialNumber}). This table displays all configured networks and their connection status.`,relationship:"description",children:e.exports.jsx("button",{className:y,style:{marginLeft:"8px"},title:"Information","aria-label":"Information about this page",children:e.exports.jsx(x,{})})})]})}),e.exports.jsx("div",{style:{padding:"0"},children:e.exports.jsx("hr",{className:E})})]}),e.exports.jsxs("div",{className:T,children:[M&&0===P.length&&e.exports.jsxs("div",{className:R,children:[e.exports.jsx(p,{size:"tiny"}),e.exports.jsx(l,{size:200,weight:"regular",children:"Loading networks..."})]}),!A&&!M&&e.exports.jsx("div",{className:B,children:e.exports.jsxs("div",{style:{textAlign:"center"},children:[e.exports.jsx(l,{size:400,weight:"semibold",children:"No device selected"}),e.exports.jsx("br",{}),e.exports.jsx(l,{size:200,children:"Please select a device from the tree to view network"})]})}),A&&!M&&e.exports.jsx(e.exports.Fragment,{children:e.exports.jsxs(m,{items:K,columns:X,sortable:!0,resizableColumns:!0,columnSizingOptions:{networkId:{minWidth:80,defaultWidth:100},networkNumber:{minWidth:80,defaultWidth:100},buildingName:{minWidth:150,defaultWidth:200},deviceCount:{minWidth:80,defaultWidth:100},status:{minWidth:80,defaultWidth:100},protocol:{minWidth:100,defaultWidth:120},description:{minWidth:150,defaultWidth:250}},children:[e.exports.jsx(u,{children:e.exports.jsx(j,{children:({renderHeaderCell:s})=>e.exports.jsx(g,{children:s()})})}),e.exports.jsx(f,{children:({item:s,rowId:r})=>e.exports.jsx(j,{children:({renderCell:r})=>e.exports.jsx(_,{children:r(s)})},r)})]})})]})]})})})})})};export{A as NetworkPage};

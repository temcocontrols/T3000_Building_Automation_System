import{ab as e,bl as l,bm as t,bn as o,bo as a,am as n,h as i,a as u,w as r,bp as s,H as c,J as d,I as v,f as p,n as f,Q as m,g as S,bq as g,br as h,A as y,b,b6 as w,at as V,bs as C,bt as x,b0 as k,bu as z,bv as q,aX as I,aM as A,bw as O,ai as M,ad as _}from"./index.43a69561.js";import{Q as L}from"./QChip.e0f2eff0.js";import{a as E,Q as B}from"./QItem.37b7f197.js";import{Q as T}from"./QExpansionItem.f6315431.js";import{a as H}from"./QMenu.750dec7e.js";var F=e({name:"QField",inheritAttrs:!1,props:{...l,tag:{type:String,default:"label"}},emits:t,setup:()=>o(a({tagProp:!0}))});let D=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,D=e.scrollLeft>=0,e.remove()}const R=["start","center","end","start-force","center-force","end-force"],j=Array.prototype.filter,$=void 0===window.getComputedStyle(document.body).overflowAnchor?n:function(e,l){null!==e&&(void 0!==e._qOverflowAnimationFrame&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame((()=>{if(null===e)return;e._qOverflowAnimationFrame=void 0;const t=e.children||[];j.call(t,(e=>e.dataset&&void 0!==e.dataset.qVsAnchor)).forEach((e=>{delete e.dataset.qVsAnchor}));const o=t[l];(null==o?void 0:o.dataset)&&(o.dataset.qVsAnchor="")})))};function N(e,l){return e+l}function P(e,l,t,o,a,n,i,u){const r=e===window?document.scrollingElement||document.documentElement:e,s=!0===a?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-i-u,scrollMaxSize:0,offsetStart:-i,offsetEnd:-u};if(!0===a?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=r.scrollLeft,c.scrollViewSize+=r.clientWidth),c.scrollMaxSize=r.scrollWidth,!0===n&&(c.scrollStart=(!0===D?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=r.scrollTop,c.scrollViewSize+=r.clientHeight),c.scrollMaxSize=r.scrollHeight),null!==t)for(let d=t.previousElementSibling;null!==d;d=d.previousElementSibling)!1===d.classList.contains("q-virtual-scroll--skip")&&(c.offsetStart+=d[s]);if(null!==o)for(let d=o.nextElementSibling;null!==d;d=d.nextElementSibling)!1===d.classList.contains("q-virtual-scroll--skip")&&(c.offsetEnd+=d[s]);if(l!==e){const t=r.getBoundingClientRect(),o=l.getBoundingClientRect();!0===a?(c.offsetStart+=o.left-t.left,c.offsetEnd-=o.width):(c.offsetStart+=o.top-t.top,c.offsetEnd-=o.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function Q(e,l,t,o){"end"===l&&(l=(e===window?document.body:e)[!0===t?"scrollWidth":"scrollHeight"]),e===window?!0===t?(!0===o&&(l=(!0===D?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):!0===t?(!0===o&&(l=(!0===D?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function K(e,l,t,o){if(t>=o)return 0;const a=l.length,n=Math.floor(t/1e3),i=Math.floor((o-1)/1e3)+1;let u=e.slice(n,i).reduce(N,0);return t%1e3!=0&&(u-=l.slice(1e3*n,t).reduce(N,0)),o%1e3!=0&&o!==a&&(u-=l.slice(o,1e3*i).reduce(N,0)),u}const U={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},W=Object.keys(U),X={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...U};function Y({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:t,virtualScrollItemSizeComputed:o}){const a=S(),{props:n,emit:g,proxy:h}=a,{$q:y}=h;let b,w,V,C,x=[];const k=i(0),z=i(0),q=i({}),I=i(null),A=i(null),O=i(null),M=i({from:0,to:0}),_=u((()=>void 0!==n.tableColspan?n.tableColspan:100));void 0===o&&(o=u((()=>n.virtualScrollItemSize)));const L=u((()=>o.value+";"+n.virtualScrollHorizontal)),E=u((()=>L.value+";"+n.virtualScrollSliceRatioBefore+";"+n.virtualScrollSliceRatioAfter));function B(){W(w,!0)}function T(e){W(void 0===e?w:e)}function H(o,a){const i=l();if(null==i||8===i.nodeType)return;const u=P(i,t(),I.value,A.value,n.virtualScrollHorizontal,y.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd);V!==u.scrollViewSize&&X(u.scrollViewSize),F(i,u,Math.min(e.value-1,Math.max(0,parseInt(o,10)||0)),0,-1!==R.indexOf(a)?a:-1!==w&&o>w?"end":"start")}function F(l,t,o,a,i){const u="string"==typeof i&&-1!==i.indexOf("-force"),r=!0===u?i.replace("-force",""):i,s=void 0!==r?r:"start";let c=Math.max(0,o-q.value[s]),d=c+q.value.total;d>e.value&&(d=e.value,c=Math.max(0,d-q.value.total)),b=t.scrollStart;const v=c!==M.value.from||d!==M.value.to;if(!1===v&&void 0===r)return void Y(o);const{activeElement:p}=document,f=O.value;!0===v&&null!==f&&f!==p&&!0===f.contains(p)&&(f.addEventListener("focusout",U),setTimeout((()=>{null==f||f.removeEventListener("focusout",U)}))),$(f,o-c);const m=void 0!==r?C.slice(c,o).reduce(N,0):0;if(!0===v){const l=d>=M.value.from&&c<=M.value.to?M.value.to:d;M.value={from:c,to:l},k.value=K(x,C,0,c),z.value=K(x,C,d,e.value),requestAnimationFrame((()=>{M.value.to!==d&&b===t.scrollStart&&(M.value={from:M.value.from,to:d},z.value=K(x,C,d,e.value))}))}requestAnimationFrame((()=>{if(b!==t.scrollStart)return;!0===v&&D(c);const e=C.slice(c,o).reduce(N,0),i=e+t.offsetStart+k.value,s=i+C[o];let d=i+a;if(void 0!==r){const l=e-m,a=t.scrollStart+l;d=!0!==u&&a<i&&s<a+t.scrollViewSize?a:"end"===r?s-t.scrollViewSize:i-("start"===r?0:Math.round((t.scrollViewSize-C[o])/2))}b=d,Q(l,d,n.virtualScrollHorizontal,y.lang.rtl),Y(o)}))}function D(e){const l=O.value;if(l){const t=j.call(l.children,(e=>e.classList&&!1===e.classList.contains("q-virtual-scroll--skip"))),o=t.length,a=!0===n.virtualScrollHorizontal?e=>e.getBoundingClientRect().width:e=>e.offsetHeight;let i,u,r=e;for(let e=0;e<o;){for(i=a(t[e]),e++;e<o&&!0===t[e].classList.contains("q-virtual-scroll--with-prev");)i+=a(t[e]),e++;u=i-C[r],0!==u&&(C[r]+=u,x[Math.floor(r/1e3)]+=u),r++}}}function U(){var e;null==(e=O.value)||e.focus()}function W(l,t){const a=1*o.value;!0!==t&&!1!==Array.isArray(C)||(C=[]);const n=C.length;C.length=e.value;for(let o=e.value-1;o>=n;o--)C[o]=a;const i=Math.floor((e.value-1)/1e3);x=[];for(let o=0;o<=i;o++){let l=0;const t=Math.min(1e3*(o+1),e.value);for(let e=1e3*o;e<t;e++)l+=C[e];x.push(l)}w=-1,b=void 0,k.value=K(x,C,0,M.value.from),z.value=K(x,C,M.value.to,e.value),l>=0?(D(M.value.from),f((()=>{H(l)}))):G()}function X(e){if(void 0===e&&"undefined"!=typeof window){const o=l();null!=o&&8!==o.nodeType&&(e=P(o,t(),I.value,A.value,n.virtualScrollHorizontal,y.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd).scrollViewSize)}V=e;const a=parseFloat(n.virtualScrollSliceRatioBefore)||0,i=1+a+(parseFloat(n.virtualScrollSliceRatioAfter)||0),u=void 0===e||e<=0?1:Math.ceil(e/o.value),r=Math.max(1,u,Math.ceil((n.virtualScrollSliceSize>0?n.virtualScrollSliceSize:10)/i));q.value={total:Math.ceil(r*i),start:Math.ceil(r*a),center:Math.ceil(r*(.5+a)),end:Math.ceil(r*(1+a)),view:u}}function Y(e){w!==e&&(void 0!==n.onVirtualScroll&&g("virtualScroll",{index:e,from:M.value.from,to:M.value.to-1,direction:e<w?"decrease":"increase",ref:h}),w=e)}r(E,(()=>{X()})),r(L,B),X();const G=s((function(){const o=l();if(null==o||8===o.nodeType)return;const a=P(o,t(),I.value,A.value,n.virtualScrollHorizontal,y.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd),i=e.value-1,u=a.scrollMaxSize-a.offsetStart-a.offsetEnd-z.value;if(b===a.scrollStart)return;if(a.scrollMaxSize<=0)return void F(o,a,0,0);V!==a.scrollViewSize&&X(a.scrollViewSize),D(M.value.from);const r=Math.floor(a.scrollMaxSize-Math.max(a.scrollViewSize,a.offsetEnd)-Math.min(C[i],a.scrollViewSize/2));if(r>0&&Math.ceil(a.scrollStart)>=r)return void F(o,a,i,a.scrollMaxSize-a.offsetEnd-x.reduce(N,0));let s=0,c=a.scrollStart-a.offsetStart,d=c;if(c<=u&&c+a.scrollViewSize>=k.value)c-=k.value,s=M.value.from,d=c;else for(let e=0;c>=x[e]&&s<i;e++)c-=x[e],s+=1e3;for(;c>0&&s<i;)c-=C[s],c>-a.scrollViewSize?(s++,d=c):d=C[s]+c;F(o,a,s,d)}),!0===y.platform.is.ios?120:35);c((()=>{X()}));let J=!1;return d((()=>{J=!0})),v((()=>{if(!0!==J)return;const e=l();void 0!==b&&null!=e&&8!==e.nodeType?Q(e,b,n.virtualScrollHorizontal,y.lang.rtl):H(w)})),p((()=>{G.cancel()})),Object.assign(h,{scrollTo:H,reset:B,refresh:T}),{virtualScrollSliceRange:M,virtualScrollSliceSizeComputed:q,setVirtualScrollSize:X,onVirtualScrollEvt:G,localResetVirtualScroll:W,padVirtualScroll:function(e,l){const t=!0===n.virtualScrollHorizontal?"width":"height",a={["--q-virtual-scroll-item-"+t]:o.value+"px"};return["tbody"===e?m(e,{class:"q-virtual-scroll__padding",key:"before",ref:I},[m("tr",[m("td",{style:{[t]:`${k.value}px`,...a},colspan:_.value})])]):m(e,{class:"q-virtual-scroll__padding",key:"before",ref:I,style:{[t]:`${k.value}px`,...a}}),m(e,{class:"q-virtual-scroll__content",key:"content",ref:O,tabindex:-1},l.flat()),"tbody"===e?m(e,{class:"q-virtual-scroll__padding",key:"after",ref:A},[m("tr",[m("td",{style:{[t]:`${z.value}px`,...a},colspan:_.value})])]):m(e,{class:"q-virtual-scroll__padding",key:"after",ref:A,style:{[t]:`${z.value}px`,...a}})]},scrollTo:H,reset:B,refresh:T}}function G(e,l,t){return t<=l?l:Math.min(t,Math.max(l,e))}function J(e,l,t){if(t<=l)return l;const o=t-l+1;let a=l+(e-l)%o;return a<l&&(a=o+a),0===a?0:a}const Z=e=>["add","add-unique","toggle"].includes(e),ee=Object.keys(l);function le(e,l){if("function"==typeof e)return e;const t=void 0!==e?e:l;return e=>null!==e&&"object"==typeof e&&t in e?e[t]:e}var te=e({name:"QSelect",inheritAttrs:!1,props:{...X,...g,...l,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Z},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:X.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...t,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:l,emit:t}){const{proxy:n}=S(),{$q:s}=n,c=i(!1),d=i(!1),v=i(-1),g=i(""),_=i(!1),D=i(!1);let R,j,$,N,P,Q,K,U=null,W=null,X=null;const G=i(null),te=i(null),oe=i(null),ae=i(null),ne=i(null),ie=h(e),ue=O(ol),re=u((()=>Array.isArray(e.options)?e.options.length:0)),se=u((()=>void 0===e.virtualScrollItemSize?!0===e.optionsDense?24:48:e.virtualScrollItemSize)),{virtualScrollSliceRange:ce,virtualScrollSliceSizeComputed:de,localResetVirtualScroll:ve,padVirtualScroll:pe,onVirtualScrollEvt:fe,scrollTo:me,setVirtualScrollSize:Se}=Y({virtualScrollLength:re,getVirtualScrollTarget:function(){return ll()},getVirtualScrollEl:ll,virtualScrollItemSizeComputed:se}),ge=a(),he=u((()=>{const l=!0===e.mapOptions&&!0!==e.multiple,t=void 0===e.modelValue||null===e.modelValue&&!0!==l?[]:!0===e.multiple&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue];if(!0===e.mapOptions&&!0===Array.isArray(e.options)){const o=!0===e.mapOptions&&void 0!==R?R:[],a=t.map((l=>function(l,t){const o=e=>x(He.value(e),l);return e.options.find(o)||t.find(o)||l}(l,o)));return null===e.modelValue&&!0===l?a.filter((e=>null!==e)):a}return t})),ye=u((()=>{const l={};return ee.forEach((t=>{const o=e[t];void 0!==o&&(l[t]=o)})),l})),be=u((()=>null===e.optionsDark?ge.isDark.value:e.optionsDark)),we=u((()=>C(he.value))),Ve=u((()=>{let l="q-field__input q-placeholder col";return!0===e.hideSelected||0===he.value.length?[l,e.inputClass]:(l+=" q-field__input--padding",void 0===e.inputClass?l:[l,e.inputClass])})),Ce=u((()=>(!0===e.virtualScrollHorizontal?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:""))),xe=u((()=>0===re.value)),ke=u((()=>he.value.map((e=>Fe.value(e))).join(", "))),ze=u((()=>void 0!==e.displayValue?e.displayValue:ke.value)),qe=u((()=>!0===e.optionsHtml?()=>!0:e=>!0===(null==e?void 0:e.html))),Ie=u((()=>!0===e.displayValueHtml||void 0===e.displayValue&&(!0===e.optionsHtml||he.value.some(qe.value)))),Ae=u((()=>!0===ge.focused.value?e.tabindex:-1)),Oe=u((()=>{const l={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":!0===e.readonly?"true":"false","aria-autocomplete":!0===e.useInput?"list":"none","aria-expanded":!0===c.value?"true":"false","aria-controls":`${ge.targetUid.value}_lb`};return v.value>=0&&(l["aria-activedescendant"]=`${ge.targetUid.value}_${v.value}`),l})),Me=u((()=>({id:`${ge.targetUid.value}_lb`,role:"listbox","aria-multiselectable":!0===e.multiple?"true":"false"}))),_e=u((()=>he.value.map(((e,l)=>({index:l,opt:e,html:qe.value(e),selected:!0,removeAtIndex:Pe,toggleOption:Ke,tabindex:Ae.value}))))),Le=u((()=>{if(0===re.value)return[];const{from:l,to:t}=ce.value;return e.options.slice(l,t).map(((t,o)=>{const a=!0===De.value(t),n=!0===Xe(t),i=l+o,u={clickable:!0,active:n,activeClass:Te.value,manualFocus:!0,focused:!1,disable:a,tabindex:-1,dense:e.optionsDense,dark:be.value,role:"option","aria-selected":!0===n?"true":"false",id:`${ge.targetUid.value}_${i}`,onClick:()=>{Ke(t)}};return!0!==a&&(v.value===i&&(u.focused=!0),!0===s.platform.is.desktop&&(u.onMousemove=()=>{!0===c.value&&Ue(i)})),{index:i,opt:t,html:qe.value(t),label:Fe.value(t),selected:u.active,focused:u.focused,toggleOption:Ke,setOptionIndex:Ue,itemProps:u}}))})),Ee=u((()=>void 0!==e.dropdownIcon?e.dropdownIcon:s.iconSet.arrow.dropdown)),Be=u((()=>!1===e.optionsCover&&!0!==e.outlined&&!0!==e.standout&&!0!==e.borderless&&!0!==e.rounded)),Te=u((()=>void 0!==e.optionsSelectedClass?e.optionsSelectedClass:void 0!==e.color?`text-${e.color}`:"")),He=u((()=>le(e.optionValue,"value"))),Fe=u((()=>le(e.optionLabel,"label"))),De=u((()=>le(e.optionDisable,"disable"))),Re=u((()=>he.value.map(He.value))),je=u((()=>{const e={onInput:ol,onChange:ue,onKeydown:el,onKeyup:Je,onKeypress:Ze,onFocus:Ye,onClick(e){!0===j&&z(e)}};return e.onCompositionstart=e.onCompositionupdate=e.onCompositionend=ue,e}));function $e(l){return!0===e.emitValue?He.value(l):l}function Ne(l){if(-1!==l&&l<he.value.length)if(!0===e.multiple){const o=e.modelValue.slice();t("remove",{index:l,value:o.splice(l,1)[0]}),t("update:modelValue",o)}else t("update:modelValue",null)}function Pe(e){Ne(e),ge.focus()}function Qe(l,o){const a=$e(l);if(!0!==e.multiple)return!0===e.fillInput&&nl(Fe.value(l),!0,!0),void t("update:modelValue",a);if(0===he.value.length)return t("add",{index:0,value:a}),void t("update:modelValue",!0===e.multiple?[a]:a);if(!0===o&&!0===Xe(l))return;if(void 0!==e.maxValues&&e.modelValue.length>=e.maxValues)return;const n=e.modelValue.slice();t("add",{index:n.length,value:a}),n.push(a),t("update:modelValue",n)}function Ke(l,o){var a;if(!0!==ge.editable.value||void 0===l||!0===De.value(l))return;const n=He.value(l);if(!0!==e.multiple)return!0!==o&&(nl(!0===e.fillInput?Fe.value(l):"",!0,!0),Sl()),null==(a=te.value)||a.focus(),void(0!==he.value.length&&!0===x(He.value(he.value[0]),n)||t("update:modelValue",!0===e.emitValue?n:l));if(!0===j&&!0!==_.value||ge.focus(),Ye(),0===he.value.length){const o=!0===e.emitValue?n:l;return t("add",{index:0,value:o}),void t("update:modelValue",!0===e.multiple?[o]:o)}const i=e.modelValue.slice(),u=Re.value.findIndex((e=>x(e,n)));if(-1!==u)t("remove",{index:u,value:i.splice(u,1)[0]});else{if(void 0!==e.maxValues&&i.length>=e.maxValues)return;const o=!0===e.emitValue?n:l;t("add",{index:i.length,value:o}),i.push(o)}t("update:modelValue",i)}function Ue(e){if(!0!==s.platform.is.desktop)return;const l=-1!==e&&e<re.value?e:-1;v.value!==l&&(v.value=l)}function We(l=1,t){if(!0===c.value){let o=v.value;do{o=J(o+l,-1,re.value-1)}while(-1!==o&&o!==v.value&&!0===De.value(e.options[o]));v.value!==o&&(Ue(o),me(o),!0!==t&&!0===e.useInput&&!0===e.fillInput&&al(o>=0?Fe.value(e.options[o]):N,!0))}}function Xe(e){const l=He.value(e);return void 0!==Re.value.find((e=>x(e,l)))}function Ye(l){!0===e.useInput&&null!==te.value&&(void 0===l||te.value===l.target&&l.target.value===ke.value)&&te.value.select()}function Ge(e){!0===k(e,27)&&!0===c.value&&(z(e),Sl(),gl()),t("keyup",e)}function Je(l){const{value:t}=l.target;if(void 0===l.keyCode)if(l.target.value="",null!==U&&(clearTimeout(U),U=null),null!==W&&(clearTimeout(W),W=null),gl(),"string"==typeof t&&0!==t.length){const l=t.toLocaleLowerCase(),o=t=>{const o=e.options.find((e=>String(t.value(e)).toLocaleLowerCase()===l));return void 0!==o&&(-1===he.value.indexOf(o)?Ke(o):Sl(),!0)},a=e=>{!0!==o(He)&&!0!==e&&!0!==o(Fe)&&il(t,!0,(()=>a(!0)))};a()}else ge.clearValue(l);else Ge(l)}function Ze(e){t("keypress",e)}function el(l){if(t("keydown",l),!0===q(l))return;const o=0!==g.value.length&&(void 0!==e.newValueMode||void 0!==e.onNewValue),a=!0!==l.shiftKey&&!0!==e.disableTabSelection&&!0!==e.multiple&&(-1!==v.value||!0===o);if(27===l.keyCode)return void w(l);if(9===l.keyCode&&!1===a)return void fl();if(void 0===l.target||l.target.id!==ge.targetUid.value||!0!==ge.editable.value)return;if(40===l.keyCode&&!0!==ge.innerLoading.value&&!1===c.value)return I(l),void ml();if(8===l.keyCode&&(!0===e.useChips||!0===e.clearable)&&!0!==e.hideSelected&&0===g.value.length)return void(!0===e.multiple&&!0===Array.isArray(e.modelValue)?Ne(e.modelValue.length-1):!0!==e.multiple&&null!==e.modelValue&&t("update:modelValue",null));35!==l.keyCode&&36!==l.keyCode||"string"==typeof g.value&&0!==g.value.length||(I(l),v.value=-1,We(36===l.keyCode?1:-1,e.multiple)),33!==l.keyCode&&34!==l.keyCode||void 0===de.value||(I(l),v.value=Math.max(-1,Math.min(re.value,v.value+(33===l.keyCode?-1:1)*de.value.view)),We(33===l.keyCode?1:-1,e.multiple)),38!==l.keyCode&&40!==l.keyCode||(I(l),We(38===l.keyCode?-1:1,e.multiple));const n=re.value;if((void 0===Q||K<Date.now())&&(Q=""),n>0&&!0!==e.useInput&&void 0!==l.key&&1===l.key.length&&!1===l.altKey&&!1===l.ctrlKey&&!1===l.metaKey&&(32!==l.keyCode||0!==Q.length)){!0!==c.value&&ml(l);const t=l.key.toLocaleLowerCase(),o=1===Q.length&&Q[0]===t;K=Date.now()+1500,!1===o&&(I(l),Q+=t);const a=new RegExp("^"+Q.split("").map((e=>-1!==".*+?^${}()|[]\\".indexOf(e)?"\\"+e:e)).join(".*"),"i");let i=v.value;if(!0===o||i<0||!0!==a.test(Fe.value(e.options[i])))do{i=J(i+1,-1,n-1)}while(i!==v.value&&(!0===De.value(e.options[i])||!0!==a.test(Fe.value(e.options[i]))));v.value!==i&&f((()=>{Ue(i),me(i),i>=0&&!0===e.useInput&&!0===e.fillInput&&al(Fe.value(e.options[i]),!0)}))}else if(13===l.keyCode||32===l.keyCode&&!0!==e.useInput&&""===Q||9===l.keyCode&&!1!==a)if(9!==l.keyCode&&I(l),-1!==v.value&&v.value<n)Ke(e.options[v.value]);else{if(!0===o){const l=(l,t)=>{var o;if(t){if(!0!==Z(t))return}else t=e.newValueMode;if(nl("",!0!==e.multiple,!0),null==l)return;("toggle"===t?Ke:Qe)(l,"add-unique"===t),!0!==e.multiple&&(null==(o=te.value)||o.focus(),Sl())};if(void 0!==e.onNewValue?t("newValue",g.value,l):l(g.value),!0!==e.multiple)return}!0===c.value?fl():!0!==ge.innerLoading.value&&ml()}}function ll(){return!0===j?ne.value:null!==oe.value&&null!==oe.value.contentEl?oe.value.contentEl:void 0}function tl(){if(!0===xe.value)return void 0!==l["no-option"]?l["no-option"]({inputValue:g.value}):void 0;const e=void 0!==l.option?l.option:e=>m(B,{key:e.index,...e.itemProps},(()=>m(E,(()=>m(T,(()=>m("span",{[!0===e.html?"innerHTML":"textContent"]:e.label})))))));let t=pe("div",Le.value.map(e));return void 0!==l["before-options"]&&(t=l["before-options"]().concat(t)),M(l["after-options"],t)}function ol(l){null!==U&&(clearTimeout(U),U=null),null!==W&&(clearTimeout(W),W=null),l&&l.target&&!0===l.target.qComposing||(al(l.target.value||""),$=!0,N=g.value,!0===ge.focused.value||!0===j&&!0!==_.value||ge.focus(),void 0!==e.onFilter&&(U=setTimeout((()=>{U=null,il(g.value)}),e.inputDebounce)))}function al(l,o){g.value!==l&&(g.value=l,!0===o||0===e.inputDebounce||"0"===e.inputDebounce?t("inputValue",l):W=setTimeout((()=>{W=null,t("inputValue",l)}),e.inputDebounce))}function nl(l,t,o){$=!0!==o,!0===e.useInput&&(al(l,!0),!0!==t&&!0===o||(N=l),!0!==t&&il(l))}function il(l,o,a){if(void 0===e.onFilter||!0!==o&&!0!==ge.focused.value)return;!0===ge.innerLoading.value?t("filterAbort"):(ge.innerLoading.value=!0,D.value=!0),""!==l&&!0!==e.multiple&&0!==he.value.length&&!0!==$&&l===Fe.value(he.value[0])&&(l="");const i=setTimeout((()=>{!0===c.value&&(c.value=!1)}),10);null!==X&&clearTimeout(X),X=i,t("filter",l,((e,l)=>{!0!==o&&!0!==ge.focused.value||X!==i||(clearTimeout(X),"function"==typeof e&&e(),D.value=!1,f((()=>{ge.innerLoading.value=!1,!0===ge.editable.value&&(!0===o?!0===c.value&&Sl():!0===c.value?hl(!0):c.value=!0),"function"==typeof l&&f((()=>{l(n)})),"function"==typeof a&&f((()=>{a(n)}))})))}),(()=>{!0===ge.focused.value&&X===i&&(clearTimeout(X),ge.innerLoading.value=!1,D.value=!1),!0===c.value&&(c.value=!1)}))}function ul(e){wl(e),fl()}function rl(){Se()}function sl(e){var l;z(e),null==(l=te.value)||l.focus(),_.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function cl(e){z(e),f((()=>{_.value=!1}))}function dl(e){wl(e),null!==ae.value&&ae.value.__updateRefocusTarget(ge.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),ge.focused.value=!1}function vl(e){Sl(),!1===ge.focused.value&&t("blur",e),gl()}function pl(){const e=document.activeElement;null!==e&&e.id===ge.targetUid.value||null===te.value||te.value===e||te.value.focus(),Se()}function fl(){!0!==d.value&&(v.value=-1,!0===c.value&&(c.value=!1),!1===ge.focused.value&&(null!==X&&(clearTimeout(X),X=null),!0===ge.innerLoading.value&&(t("filterAbort"),ge.innerLoading.value=!1,D.value=!1)))}function ml(t){!0===ge.editable.value&&(!0===j?(ge.onControlFocusin(t),d.value=!0,f((()=>{ge.focus()}))):ge.focus(),void 0!==e.onFilter?il(g.value):!0===xe.value&&void 0===l["no-option"]||(c.value=!0))}function Sl(){d.value=!1,fl()}function gl(){!0===e.useInput&&nl(!0!==e.multiple&&!0===e.fillInput&&0!==he.value.length&&Fe.value(he.value[0])||"",!0,!0)}function hl(l){let t=-1;if(!0===l){if(0!==he.value.length){const l=He.value(he.value[0]);t=e.options.findIndex((e=>x(He.value(e),l)))}ve(t)}Ue(t)}function yl(){!1===d.value&&null!==oe.value&&oe.value.updatePosition()}function bl(e){void 0!==e&&z(e),t("popupShow",e),ge.hasPopupOpen=!0,ge.onControlFocusin(e)}function wl(e){void 0!==e&&z(e),t("popupHide",e),ge.hasPopupOpen=!1,ge.onControlFocusout(e)}function Vl(){j=(!0===s.platform.is.mobile||"dialog"===e.behavior)&&("menu"!==e.behavior&&(!0!==e.useInput||(void 0!==l["no-option"]||void 0!==e.onFilter||!1===xe.value))),P=!0===s.platform.is.ios&&!0===j&&!0===e.useInput?"fade":e.transitionShow}return r(he,(l=>{R=l,!0===e.useInput&&!0===e.fillInput&&!0!==e.multiple&&!0!==ge.innerLoading.value&&(!0!==d.value&&!0!==c.value||!0!==we.value)&&(!0!==$&&gl(),!0!==d.value&&!0!==c.value||il(""))}),{immediate:!0}),r((()=>e.fillInput),gl),r(c,hl),r(re,(function(e,l){!0===c.value&&!1===ge.innerLoading.value&&(ve(-1,!0),f((()=>{!0===c.value&&!1===ge.innerLoading.value&&(e>l?ve():hl(!0))})))})),y(Vl),b(yl),Vl(),p((()=>{null!==U&&clearTimeout(U),null!==W&&clearTimeout(W)})),Object.assign(n,{showPopup:ml,hidePopup:Sl,removeAtIndex:Ne,add:Qe,toggleOption:Ke,getOptionIndex:()=>v.value,setOptionIndex:Ue,moveOptionSelection:We,filter:il,updateMenuPosition:yl,updateInputValue:nl,isOptionSelected:Xe,getEmittingOptionValue:$e,isOptionDisabled:(...e)=>!0===De.value.apply(null,e),getOptionValue:(...e)=>He.value.apply(null,e),getOptionLabel:(...e)=>Fe.value.apply(null,e)}),Object.assign(ge,{innerValue:he,fieldClass:u((()=>`q-select q-field--auto-height q-select--with${!0!==e.useInput?"out":""}-input q-select--with${!0!==e.useChips?"out":""}-chips q-select--${!0===e.multiple?"multiple":"single"}`)),inputRef:G,targetRef:te,hasValue:we,showPopup:ml,floatingLabel:u((()=>!0!==e.hideSelected&&!0===we.value||"number"==typeof g.value||0!==g.value.length||C(e.displayValue))),getControlChild:()=>{if(!1!==ge.editable.value&&(!0===d.value||!0!==xe.value||void 0!==l["no-option"]))return!0===j?function(){const t=[m(F,{class:`col-auto ${ge.fieldClass.value}`,...ye.value,for:ge.targetUid.value,dark:be.value,square:!0,loading:D.value,itemAligned:!1,filled:!0,stackLabel:0!==g.value.length,...ge.splitAttrs.listeners.value,onFocus:sl,onBlur:cl},{...l,rawControl:()=>ge.getControl(!0),before:void 0,after:void 0})];return!0===c.value&&t.push(m("div",{ref:ne,class:Ce.value+" scroll",style:e.popupContentStyle,...Me.value,onClick:w,onScrollPassive:fe},tl())),m(A,{ref:ae,modelValue:d.value,position:!0===e.useInput?"top":void 0,transitionShow:P,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:bl,onBeforeHide:dl,onHide:vl,onShow:pl},(()=>m("div",{class:"q-select__dialog"+(!0===be.value?" q-select__dialog--dark q-dark":"")+(!0===_.value?" q-select__dialog--focused":"")},t)))}():m(H,{ref:oe,class:Ce.value,style:e.popupContentStyle,modelValue:c.value,fit:!0!==e.menuShrink,cover:!0===e.optionsCover&&!0!==xe.value&&!0!==e.useInput,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:be.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Be.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Me.value,onScrollPassive:fe,onBeforeShow:bl,onBeforeHide:ul,onShow:rl},tl);!0===ge.hasPopupOpen&&(ge.hasPopupOpen=!1)},controlEvents:{onFocusin(e){ge.onControlFocusin(e)},onFocusout(e){ge.onControlFocusout(e,(()=>{gl(),fl()}))},onClick(e){var l;if(w(e),!0!==j&&!0===c.value)return fl(),void(null==(l=te.value)||l.focus());ml(e)}},getControl:t=>{const o=!0===e.hideSelected?[]:void 0!==l["selected-item"]?_e.value.map((e=>l["selected-item"](e))).slice():void 0!==l.selected?[].concat(l.selected()):!0===e.useChips?_e.value.map(((l,t)=>m(L,{key:"option-"+t,removable:!0===ge.editable.value&&!0!==De.value(l.opt),dense:!0,textColor:e.color,tabindex:Ae.value,onRemove(){l.removeAtIndex(t)}},(()=>m("span",{class:"ellipsis",[!0===l.html?"innerHTML":"textContent"]:Fe.value(l.opt)}))))):[m("span",{class:"ellipsis",[!0===Ie.value?"innerHTML":"textContent"]:ze.value})],a=!0===t||!0!==d.value||!0!==j;if(!0===e.useInput)o.push(function(l,t){const o=!0===t?{...Oe.value,...ge.splitAttrs.attributes.value}:void 0,a={ref:!0===t?te:void 0,key:"i_t",class:Ve.value,style:e.inputStyle,value:void 0!==g.value?g.value:"",type:"search",...o,id:!0===t?ge.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":!0===l||!0===e.autofocus||void 0,disabled:!0===e.disable,readonly:!0===e.readonly,...je.value};return!0!==l&&!0===j&&(!0===Array.isArray(a.class)?a.class=[...a.class,"no-pointer-events"]:a.class+=" no-pointer-events"),m("input",a)}(t,a));else if(!0===ge.editable.value){const l=!0===a?Oe.value:void 0;o.push(m("input",{ref:!0===a?te:void 0,key:"d_t",class:"q-select__focus-target",id:!0===a?ge.targetUid.value:void 0,value:ze.value,readonly:!0,"data-autofocus":!0===t||!0===e.autofocus||void 0,...l,onKeydown:el,onKeyup:Ge,onKeypress:Ze})),!0===a&&"string"==typeof e.autocomplete&&0!==e.autocomplete.length&&o.push(m("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Je}))}if(void 0!==ie.value&&!0!==e.disable&&0!==Re.value.length){const l=Re.value.map((e=>m("option",{value:e,selected:!0})));o.push(m("select",{class:"hidden",name:ie.value,multiple:e.multiple},l))}const n=!0===e.useInput||!0!==a?void 0:ge.splitAttrs.attributes.value;return m("div",{class:"q-field__native row items-center",...n,...ge.splitAttrs.listeners.value},o)},getInnerAppend:()=>!0!==e.loading&&!0!==D.value&&!0!==e.hideDropdownIcon?[m(V,{class:"q-select__dropdown-icon"+(!0===c.value?" rotate-180":""),name:Ee.value})]:null}),o(ge)}}),oe=e({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:l}){const t=u((()=>{const l=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter((l=>!0===e[l])).map((e=>`q-btn-group--${e}`)).join(" ");return"q-btn-group row no-wrap"+(0!==l.length?" "+l:"")+(!0===e.spread?" q-btn-group--spread":" inline")}));return()=>m("div",{class:t.value},_(l.default))}});export{te as Q,oe as a,G as b,Y as c,W as d,D as r,X as u};

import{ab as e,aY as a,a_ as t,a as o,Q as s,ad as n,g as l,aN as i,aO as r,al as u,aP as c,h as d,aQ as f,aR as v,aS as p,aT as g,aU as h,w as m,bd as b,be as q,bf as y,bg as x,an as S,T as B,f as k,bh as C,bi as E,bj as O,bk as T,aX as w}from"./index.8dd48b07.js";import{f as P,v as R,a as D,b as Q,c as j,r as F,s as H,p as M,e as W}from"./QChip.246fee19.js";const _=["ul","ol"];var A=e({name:"QList",props:{...a,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:a}){const i=l(),r=t(e,i.proxy.$q),u=o((()=>_.includes(e.tag)?null:"list")),c=o((()=>"q-list"+(!0===e.bordered?" q-list--bordered":"")+(!0===e.dense?" q-list--dense":"")+(!0===e.separator?" q-list--separator":"")+(!0===r.value?" q-list--dark":"")+(!0===e.padding?" q-list--padding":"")));return()=>s(e.tag,{class:c.value,role:u.value},n(a.default))}}),K=e({name:"QMenu",inheritAttrs:!1,props:{...P,...i,...a,...r,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:R},self:{type:String,validator:R},offset:{type:Array,validator:D},scrollTarget:u,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...c,"click","escapeKey"],setup(e,{slots:a,emit:i,attrs:r}){let u,c,P,R=null;const D=l(),{proxy:_}=D,{$q:A}=_,K=d(null),L=d(!1),$=o((()=>!0!==e.persistent&&!0!==e.noRouteDismiss)),N=t(e,A),{registerTick:U,removeTick:X}=f(),{registerTimeout:Y}=v(),{transitionProps:z,transitionStyle:G}=p(e),{localScrollTarget:I,changeScrollEvent:J,unconfigureScrollTarget:V}=Q(e,ve),{anchorEl:Z,canShow:ee}=j({showing:L}),{hide:ae}=g({showing:L,canShow:ee,handleShow:function(a){if(R=!1===e.noRefocus?document.activeElement:null,b(ge),te(),ve(),u=void 0,void 0!==a&&(e.touchPosition||e.contextMenu)){const e=q(a);if(void 0!==e.left){const{top:a,left:t}=Z.value.getBoundingClientRect();u={left:e.left-t,top:e.top-a}}}void 0===c&&(c=m((()=>A.screen.width+"|"+A.screen.height+"|"+e.self+"|"+e.anchor+"|"+A.lang.rtl),me));!0!==e.noFocus&&document.activeElement.blur();U((()=>{me(),!0!==e.noFocus&&de()})),Y((()=>{!0===A.platform.is.ios&&(P=e.autoClose,K.value.click()),me(),te(!0),i("show",a)}),e.transitionDuration)},handleHide:function(a){X(),oe(),fe(!0),null===R||void 0!==a&&!0===a.qClickOutside||(((0===(null==a?void 0:a.type.indexOf("key"))?R.closest('[tabindex]:not([tabindex^="-"])'):void 0)||R).focus(),R=null);Y((()=>{oe(!0),i("hide",a)}),e.transitionDuration)},hideOnRouteChange:$,processOnMount:!0}),{showPortal:te,hidePortal:oe,renderPortal:se}=h(D,K,(function(){return s(B,z.value,(()=>!0===L.value?s("div",{role:"menu",...r,ref:K,tabindex:-1,class:["q-menu q-position-engine scroll"+re.value,r.class],style:[r.style,G.value],...ue.value},n(a.default)):null))}),"menu"),ne={anchorEl:Z,innerRef:K,onClickOutside(a){if(!0!==e.persistent&&!0===L.value)return ae(a),("touchstart"===a.type||a.target.classList.contains("q-dialog__backdrop"))&&w(a),!0}},le=o((()=>M(e.anchor||(!0===e.cover?"center middle":"bottom start"),A.lang.rtl))),ie=o((()=>!0===e.cover?le.value:M(e.self||"top start",A.lang.rtl))),re=o((()=>(!0===e.square?" q-menu--square":"")+(!0===N.value?" q-menu--dark q-dark":""))),ue=o((()=>!0===e.autoClose?{onClick:pe}:{})),ce=o((()=>!0===L.value&&!0!==e.persistent));function de(){C((()=>{let e=K.value;e&&!0!==e.contains(document.activeElement)&&(e=e.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||e.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||e.querySelector("[autofocus], [data-autofocus]")||e,e.focus({preventScroll:!0}))}))}function fe(e){u=void 0,void 0!==c&&(c(),c=void 0),!0!==e&&!0!==L.value||(y(ge),V(),F(ne),x(he)),!0!==e&&(R=null)}function ve(){null===Z.value&&void 0===e.scrollTarget||(I.value=S(Z.value,e.scrollTarget),J(I.value,me))}function pe(e){!0!==P?(E(_,e),i("click",e)):P=!1}function ge(a){!0===ce.value&&!0!==e.noFocus&&!0!==T(K.value,a.target)&&de()}function he(a){!0!==e.noEscDismiss&&(i("escapeKey"),ae(a))}function me(){H({targetEl:K.value,offset:e.offset,anchorEl:Z.value,anchorOrigin:le.value,selfOrigin:ie.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}return m(ce,(e=>{!0===e?(O(he),W(ne)):(x(he),F(ne))})),k(fe),Object.assign(_,{focus:de,updatePosition:me}),se}});export{A as Q,K as a};

import{a6 as e,aV as a,aX as l,a as t,Q as i,aw as n,ad as o,b_ as r,b$ as s,bt as u,a8 as c,k as d,bp as v,bq as m,ah as b,br as p,aS as f,bs as h,bh as g,bk as y,b3 as _,aR as S,aT as z,aU as C,h as x,aW as T,be as q,w as k,J as w,I as D,f as O,g as N,bV as V,c0 as I,bG as P,o as A,X as j,a3 as R,a4 as L,Z as E,c as U,ap as B,ao as F,aD as $,Y as M,F as Q,ar as H,a0 as G,$ as J,C as X,aq as Y,am as K,an as W,at as Z,au as ee,ax as ae}from"./index.0d1b2de5.js";import{g as le,s as te,Q as ie}from"./touch.105f74ed.js";import{Q as ne,a as oe}from"./QItem.4ab2870d.js";import{Q as re}from"./QItemLabel.775068c2.js";import{Q as se}from"./QBadge.97a9817a.js";import{Q as ue}from"./QExpansionItem.00dc926f.js";import{Q as ce}from"./QTooltip.abc580a4.js";import{Q as de}from"./QBtnGroup.665634ac.js";import{Q as ve}from"./QSelect.89b98024.js";import{Q as me,a as be}from"./QTable.fac90244.js";import{Q as pe}from"./QMenu.40925189.js";import{Q as fe}from"./QBtnDropdown.645609fb.js";import{Q as he}from"./QResizeObserver.cd8d7447.js";import{Q as ge}from"./QScrollObserver.5dc81d5a.js";import{d as ye}from"./position-engine.80f234a1.js";import{b as _e}from"./format.b9446fb2.js";import{Q as Se}from"./QForm.1233e1e3.js";import{Q as ze}from"./QPage.bbc3658c.js";import{u as Ce}from"./use-quasar.637dff1a.js";import{k as xe}from"./index.d11c4764.js";import{_ as Te}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.95e02d72.js";import"./QMarkupTable.5cc2aabe.js";var qe=e({name:"QBreadcrumbsEl",props:{...a,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:a}){const{linkTag:r,linkAttrs:s,linkClass:u,navigateOnClick:c}=l(),d=t((()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(!0!==e.disable?"q-link--focusable"+u.value:"q-breadcrumbs__el--disable"),...s.value,onClick:c}))),v=t((()=>"q-breadcrumbs__el-icon"+(void 0!==e.label?" q-breadcrumbs__el-icon--with-label":"")));return()=>{const l=[];return void 0!==e.icon&&l.push(i(n,{class:v.value,name:e.icon})),void 0!==e.label&&l.push(e.label),i(r.value,{...d.value},o(a.default,l))}}});const ke=["",!0];var we=e({name:"QBreadcrumbs",props:{...r,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:a}){const l=s(e),n=t((()=>`flex items-center ${l.value}${"none"===e.gutter?"":` q-gutter-${e.gutter}`}`)),o=t((()=>e.separatorColor?` text-${e.separatorColor}`:"")),r=t((()=>` text-${e.activeColor}`));return()=>{if(void 0===a.default)return;const l=u(c(a.default));if(0===l.length)return;let t=1;const s=[],d=l.filter((e=>{var a;return"QBreadcrumbsEl"===(null==(a=e.type)?void 0:a.name)})).length,v=void 0!==a.separator?a.separator:()=>e.separator;return l.forEach((e=>{var a;if("QBreadcrumbsEl"===(null==(a=e.type)?void 0:a.name)){const a=t<d,l=(!0===a?"":" q-breadcrumbs--last")+(!0!==(null!==e.props&&ke.includes(e.props.disable))&&!0===a?r.value:"");t++,s.push(i("div",{class:`flex items-center${l}`},[e])),!0===a&&s.push(i("div",{class:"q-breadcrumbs__separator"+o.value},v()))}else s.push(e)})),i("div",{class:"q-breadcrumbs"},[i("div",{class:n.value},s)])}}}),De=e({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup:e=>()=>[i("div",{class:e.store.scroll.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:e.store.onVerticalMousedown}),i("div",{class:e.store.scroll.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:e.store.onHorizontalMousedown}),d(i("div",{ref:e.store.scroll.vertical.ref,class:e.store.scroll.vertical.thumbClass.value,style:e.store.scroll.vertical.style.value,"aria-hidden":"true"}),e.store.thumbVertDir),d(i("div",{ref:e.store.scroll.horizontal.ref,class:e.store.scroll.horizontal.thumbClass.value,style:e.store.scroll.horizontal.style.value,"aria-hidden":"true"}),e.store.thumbHorizDir)]});function Oe(e,a,l){const t=_(e);let i,n=t.left-a.event.x,o=t.top-a.event.y,r=Math.abs(n),s=Math.abs(o);const u=a.direction;!0===u.horizontal&&!0!==u.vertical?i=n<0?"left":"right":!0!==u.horizontal&&!0===u.vertical?i=o<0?"up":"down":!0===u.up&&o<0?(i="up",r>s&&(!0===u.left&&n<0?i="left":!0===u.right&&n>0&&(i="right"))):!0===u.down&&o>0?(i="down",r>s&&(!0===u.left&&n<0?i="left":!0===u.right&&n>0&&(i="right"))):!0===u.left&&n<0?(i="left",r<s&&(!0===u.up&&o<0?i="up":!0===u.down&&o>0&&(i="down"))):!0===u.right&&n>0&&(i="right",r<s&&(!0===u.up&&o<0?i="up":!0===u.down&&o>0&&(i="down")));let c=!1;if(void 0===i&&!1===l){if(!0===a.event.isFirst||void 0===a.event.lastDir)return{};i=a.event.lastDir,c=!0,"left"===i||"right"===i?(t.left-=n,r=0,n=0):(t.top-=o,s=0,o=0)}return{synthetic:c,payload:{evt:e,touch:!0!==a.event.mouse,mouse:!0===a.event.mouse,position:t,direction:i,isFirst:a.event.isFirst,isFinal:!0===l,duration:Date.now()-a.event.time,distance:{x:r,y:s},offset:{x:n,y:o},delta:{x:t.left-a.event.lastX,y:t.top-a.event.lastY}}}}let Ne=0;var Ve=v({name:"touch-pan",beforeMount(e,{value:a,modifiers:l}){if(!0!==l.mouse&&!0!==m.has.touch)return;function t(e,a){!0===l.mouse&&!0===a?z(e):(!0===l.stop&&y(e),!0===l.prevent&&g(e))}const i={uid:"qvtp_"+Ne++,handler:a,modifiers:l,direction:le(l),noop:b,mouseStart(e){te(e,i)&&p(e)&&(f(i,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),i.start(e,!0))},touchStart(e){if(te(e,i)){const a=e.target;f(i,"temp",[[a,"touchmove","move","notPassiveCapture"],[a,"touchcancel","end","passiveCapture"],[a,"touchend","end","passiveCapture"]]),i.start(e)}},start(a,t){if(!0===m.is.firefox&&h(e,!0),i.lastEvt=a,!0===t||!0===l.stop){if(!0!==i.direction.all&&(!0!==t||!0!==i.modifiers.mouseAllDir&&!0!==i.modifiers.mousealldir)){const e=-1!==a.type.indexOf("mouse")?new MouseEvent(a.type,a):new TouchEvent(a.type,a);!0===a.defaultPrevented&&g(e),!0===a.cancelBubble&&y(e),Object.assign(e,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:void 0===a.qClonedBy?[i.uid]:a.qClonedBy.concat(i.uid)}),i.initialEvent={target:a.target,event:e}}y(a)}const{left:n,top:o}=_(a);i.event={x:n,y:o,time:Date.now(),mouse:!0===t,detected:!1,isFirst:!0,isFinal:!1,lastX:n,lastY:o}},move(e){if(void 0===i.event)return;const a=_(e),n=a.left-i.event.x,o=a.top-i.event.y;if(0===n&&0===o)return;i.lastEvt=e;const r=!0===i.event.mouse,s=()=>{let a;t(e,r),!0!==l.preserveCursor&&!0!==l.preservecursor&&(a=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),!0===r&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ye(),i.styleCleanup=e=>{if(i.styleCleanup=void 0,void 0!==a&&(document.documentElement.style.cursor=a),document.body.classList.remove("non-selectable"),!0===r){const a=()=>{document.body.classList.remove("no-pointer-events--children")};void 0!==e?setTimeout((()=>{a(),e()}),50):a()}else void 0!==e&&e()}};if(!0===i.event.detected){!0!==i.event.isFirst&&t(e,i.event.mouse);const{payload:a,synthetic:l}=Oe(e,i,!1);return void(void 0!==a&&(!1===i.handler(a)?i.end(e):(void 0===i.styleCleanup&&!0===i.event.isFirst&&s(),i.event.lastX=a.position.left,i.event.lastY=a.position.top,i.event.lastDir=!0===l?void 0:a.direction,i.event.isFirst=!1)))}if(!0===i.direction.all||!0===r&&(!0===i.modifiers.mouseAllDir||!0===i.modifiers.mousealldir))return s(),i.event.detected=!0,void i.move(e);const u=Math.abs(n),c=Math.abs(o);u!==c&&(!0===i.direction.horizontal&&u>c||!0===i.direction.vertical&&u<c||!0===i.direction.up&&u<c&&o<0||!0===i.direction.down&&u<c&&o>0||!0===i.direction.left&&u>c&&n<0||!0===i.direction.right&&u>c&&n>0?(i.event.detected=!0,i.move(e)):i.end(e,!0))},end(a,l){var t;if(void 0!==i.event){if(S(i,"temp"),!0===m.is.firefox&&h(e,!1),!0===l)null==(t=i.styleCleanup)||t.call(i),!0!==i.event.detected&&void 0!==i.initialEvent&&i.initialEvent.target.dispatchEvent(i.initialEvent.event);else if(!0===i.event.detected){!0===i.event.isFirst&&i.handler(Oe(void 0===a?i.lastEvt:a,i).payload);const{payload:e}=Oe(void 0===a?i.lastEvt:a,i,!0),l=()=>{i.handler(e)};void 0!==i.styleCleanup?i.styleCleanup(l):l()}i.event=void 0,i.initialEvent=void 0,i.lastEvt=void 0}}};if(e.__qtouchpan=i,!0===l.mouse){const a=!0===l.mouseCapture||!0===l.mousecapture?"Capture":"";f(i,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}!0===m.has.touch&&f(i,"main",[[e,"touchstart","touchStart","passive"+(!0===l.capture?"Capture":"")],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const l=e.__qtouchpan;void 0!==l&&(a.oldValue!==a.value&&("function"!=typeof value&&l.end(),l.handler=a.value),l.direction=le(a.modifiers))},beforeUnmount(e){var a;const l=e.__qtouchpan;void 0!==l&&(void 0!==l.event&&l.end(),S(l,"main"),S(l,"temp"),!0===m.is.firefox&&h(e,!1),null==(a=l.styleCleanup)||a.call(l),delete e.__qtouchpan)}});const Ie=["vertical","horizontal"],Pe={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Ae={prevent:!0,mouse:!0,mouseAllDir:!0},je=e=>e>=250?50:Math.ceil(e/5);var Re=e({name:"QScrollArea",props:{...C,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:a,emit:l}){const n=x(!1),r=x(!1),s=x(!1),u={vertical:x(0),horizontal:x(0)},c={vertical:{ref:x(null),position:x(0),size:x(0)},horizontal:{ref:x(null),position:x(0),size:x(0)}},{proxy:d}=N(),v=T(e,d.$q);let m,b=null;const p=x(null),f=t((()=>"q-scrollarea"+(!0===v.value?" q-scrollarea--dark":"")));Object.assign(u,{verticalInner:t((()=>u.vertical.value-e.verticalOffset[0]-e.verticalOffset[1])),horizontalInner:t((()=>u.horizontal.value-e.horizontalOffset[0]-e.horizontalOffset[1]))}),c.vertical.percentage=t((()=>{const e=c.vertical.size.value-u.vertical.value;if(e<=0)return 0;const a=_e(c.vertical.position.value/e,0,1);return Math.round(1e4*a)/1e4})),c.vertical.thumbHidden=t((()=>!0!==(null===e.visible?s.value:e.visible)&&!1===n.value&&!1===r.value||c.vertical.size.value<=u.vertical.value+1)),c.vertical.thumbStart=t((()=>e.verticalOffset[0]+c.vertical.percentage.value*(u.verticalInner.value-c.vertical.thumbSize.value))),c.vertical.thumbSize=t((()=>Math.round(_e(u.verticalInner.value*u.verticalInner.value/c.vertical.size.value,je(u.verticalInner.value),u.verticalInner.value)))),c.vertical.style=t((()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${c.vertical.thumbStart.value}px`,height:`${c.vertical.thumbSize.value}px`,right:`${e.horizontalOffset[1]}px`}))),c.vertical.thumbClass=t((()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(!0===c.vertical.thumbHidden.value?" q-scrollarea__thumb--invisible":""))),c.vertical.barClass=t((()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(!0===c.vertical.thumbHidden.value?" q-scrollarea__bar--invisible":""))),c.horizontal.percentage=t((()=>{const e=c.horizontal.size.value-u.horizontal.value;if(e<=0)return 0;const a=_e(Math.abs(c.horizontal.position.value)/e,0,1);return Math.round(1e4*a)/1e4})),c.horizontal.thumbHidden=t((()=>!0!==(null===e.visible?s.value:e.visible)&&!1===n.value&&!1===r.value||c.horizontal.size.value<=u.horizontal.value+1)),c.horizontal.thumbStart=t((()=>e.horizontalOffset[0]+c.horizontal.percentage.value*(u.horizontalInner.value-c.horizontal.thumbSize.value))),c.horizontal.thumbSize=t((()=>Math.round(_e(u.horizontalInner.value*u.horizontalInner.value/c.horizontal.size.value,je(u.horizontalInner.value),u.horizontalInner.value)))),c.horizontal.style=t((()=>({...e.thumbStyle,...e.horizontalThumbStyle,[!0===d.$q.lang.rtl?"right":"left"]:`${c.horizontal.thumbStart.value}px`,width:`${c.horizontal.thumbSize.value}px`,bottom:`${e.verticalOffset[1]}px`}))),c.horizontal.thumbClass=t((()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(!0===c.horizontal.thumbHidden.value?" q-scrollarea__thumb--invisible":""))),c.horizontal.barClass=t((()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(!0===c.horizontal.thumbHidden.value?" q-scrollarea__bar--invisible":"")));const h=t((()=>!0===c.vertical.thumbHidden.value&&!0===c.horizontal.thumbHidden.value?e.contentStyle:e.contentActiveStyle));function g(){const e={};return Ie.forEach((a=>{const l=c[a];Object.assign(e,{[a+"Position"]:l.position.value,[a+"Percentage"]:l.percentage.value,[a+"Size"]:l.size.value,[a+"ContainerSize"]:u[a].value,[a+"ContainerInnerSize"]:u[a+"Inner"].value})})),e}const y=q((()=>{const e=g();e.ref=d,l("scroll",e)}),0);function _(e,a,l){if(!1===Ie.includes(e))return;("vertical"===e?V:I)(p.value,a,l)}function S({height:e,width:a}){let l=!1;u.vertical.value!==e&&(u.vertical.value=e,l=!0),u.horizontal.value!==a&&(u.horizontal.value=a,l=!0),!0===l&&j()}function z({position:e}){let a=!1;c.vertical.position.value!==e.top&&(c.vertical.position.value=e.top,a=!0),c.horizontal.position.value!==e.left&&(c.horizontal.position.value=e.left,a=!0),!0===a&&j()}function C({height:e,width:a}){c.horizontal.size.value!==a&&(c.horizontal.size.value=a,j()),c.vertical.size.value!==e&&(c.vertical.size.value=e,j())}function P(e,a){const l=c[a];if(!0===e.isFirst){if(!0===l.thumbHidden.value)return;m=l.position.value,r.value=!0}else if(!0!==r.value)return;!0===e.isFinal&&(r.value=!1);const t=Pe[a],i=(l.size.value-u[a].value)/(u[a+"Inner"].value-l.thumbSize.value),n=e.distance[t.dist];R(m+(e.direction===t.dir?1:-1)*n*i,a)}function A(a,l){const t=c[l];if(!0!==t.thumbHidden.value){const i="vertical"===l?e.verticalOffset[0]:e.horizontalOffset[0],n=a[Pe[l].offset]-i,o=t.thumbStart.value-i;if(n<o||n>o+t.thumbSize.value){const e=n-t.thumbSize.value/2;R(_e(e/(u[l+"Inner"].value-t.thumbSize.value),0,1)*Math.max(0,t.size.value-u[l].value),l)}null!==t.ref.value&&t.ref.value.dispatchEvent(new MouseEvent(a.type,a))}}function j(){n.value=!0,null!==b&&clearTimeout(b),b=setTimeout((()=>{b=null,n.value=!1}),e.delay),void 0!==e.onScroll&&y()}function R(e,a){p.value[Pe[a].scroll]=e}let L=null;function E(){null!==L&&clearTimeout(L),L=setTimeout((()=>{L=null,s.value=!0}),d.$q.platform.is.ios?50:0)}function U(){null!==L&&(clearTimeout(L),L=null),s.value=!1}let B=null;k((()=>d.$q.lang.rtl),(e=>{null!==p.value&&I(p.value,Math.abs(c.horizontal.position.value)*(!0===e?-1:1))})),w((()=>{B={top:c.vertical.position.value,left:c.horizontal.position.value}})),D((()=>{if(null===B)return;const e=p.value;null!==e&&(I(e,B.left),V(e,B.top))})),O(y.cancel),Object.assign(d,{getScrollTarget:()=>p.value,getScroll:g,getScrollPosition:()=>({top:c.vertical.position.value,left:c.horizontal.position.value}),getScrollPercentage:()=>({top:c.vertical.percentage.value,left:c.horizontal.percentage.value}),setScrollPosition:_,setScrollPercentage(e,a,l){_(e,a*(c[e].size.value-u[e].value)*("horizontal"===e&&!0===d.$q.lang.rtl?-1:1),l)}});const F={scroll:c,thumbVertDir:[[Ve,e=>{P(e,"vertical")},void 0,{vertical:!0,...Ae}]],thumbHorizDir:[[Ve,e=>{P(e,"horizontal")},void 0,{horizontal:!0,...Ae}]],onVerticalMousedown(e){A(e,"vertical")},onHorizontalMousedown(e){A(e,"horizontal")}};return()=>i("div",{class:f.value,onMouseenter:E,onMouseleave:U},[i("div",{ref:p,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:void 0!==e.tabindex?e.tabindex:void 0},[i("div",{class:"q-scrollarea__content absolute",style:h.value},o(a.default,[i(he,{debounce:0,onResize:C})])),i(ge,{axis:"both",onScroll:z})]),i(he,{debounce:0,onResize:S}),i(De,{store:F,barStyle:e.barStyle,verticalBarStyle:e.verticalBarStyle,horizontalBarStyle:e.horizontalBarStyle})])}});const Le=new class{constructor(e=""){this.baseUrl=e,this.api=xe.create({prefixUrl:e,headers:{"Content-Type":"application/json",auth:P.get("token")||""},hooks:{beforeRequest:[e=>{const a=P.get("token");a&&e.headers.set("auth",a)}],afterResponse:[(e,a,l)=>{401===l.status&&P.remove("token")}]}})}async getTableRecords(e,a){var l,t,i;const n=new URLSearchParams;(null==a?void 0:a.page)&&n.set("page",a.page.toString()),(null==a?void 0:a.per_page)&&n.set("per_page",a.per_page.toString()),(null==a?void 0:a.search)&&n.set("search",a.search);const o=`api/t3_device/${e}${n.toString()?"?"+n.toString():""}`,r=await this.api.get(o).json();return{data:r.data||[],total:r.total||r.count||(null==(l=r.data)?void 0:l.length)||0,message:r.message||`Retrieved ${r.total||r.count||(null==(t=r.data)?void 0:t.length)||0} records from ${e}`,count:r.total||r.count||(null==(i=r.data)?void 0:i.length)||0}}async getTableCount(e){return await this.api.get(`api/t3_device/${e}/count`).json()}async createRecord(e,a){return await this.api.post(`api/t3_device/${e}`,{json:a}).json()}async updateRecord(e,a,l){return await this.api.put(`api/t3_device/${e}/${a}`,{json:l}).json()}async deleteRecord(e,a){return await this.api.delete(`api/t3_device/${e}/${a}`).json()}async getBuildings(e){return this.getTableRecords("buildings",e)}async getBuildingsCount(){return this.getTableCount("buildings")}async getDevices(e){return this.getTableRecords("devices",e)}async getDevicesCount(){return this.getTableCount("devices")}async getInputPoints(e){return this.getTableRecords("input_points",e)}async getInputPointsCount(){return this.getTableCount("input_points")}async getOutputPoints(e){return this.getTableRecords("output_points",e)}async getOutputPointsCount(){return this.getTableCount("output_points")}async getVariables(e){return this.getTableRecords("variables",e)}async getVariablesCount(){return this.getTableCount("variables")}async getPrograms(e){return this.getTableRecords("programs",e)}async getProgramsCount(){return this.getTableCount("programs")}async getSchedules(e){return this.getTableRecords("schedules",e)}async getSchedulesCount(){return this.getTableCount("schedules")}async getHolidays(e){return this.getTableRecords("holidays",e)}async getHolidaysCount(){return this.getTableCount("holidays")}async getTrendlogs(e){return this.getTableRecords("trendlogs",e)}async getTrendlogsCount(){return this.getTableCount("trendlogs")}}("http://localhost:9103");const Ee={class:"top-bar"},Ue={class:"top-bar-left"},Be={class:"top-bar-right"},Fe={class:"main-content"},$e={class:"left-panel"},Me={class:"panel-header"},Qe={key:0,class:"table-tree"},He={class:"right-panel"},Ge={key:0,class:"data-header"},Je={class:"data-header-left"},Xe={class:"q-ma-none"},Ye={class:"q-ma-none text-grey-6"},Ke={class:"data-header-right"},We={key:1,class:"data-controls"},Ze={class:"data-controls-left"},ea={class:"data-controls-right"},aa={key:2,class:"data-content"},la={key:1,class:"cards-container"},ta={class:"card-header"},ia={class:"q-ma-none"},na={class:"card-content"},oa={class:"field-label"},ra={class:"field-value"},sa={key:2,class:"json-container"},ua={class:"json-content"},ca={key:3,class:"empty-state"},da={class:"dialog-title"},va={class:"q-ma-none"};var ma=Te({__name:"T3DeviceDb",setup(e){const a=Ce(),l=x(""),i=x(!0),o=x("table"),r=x(""),s=x(""),u=x([]),c=x([]),d=x(!1),v=x(!1),m=x("create"),b=x(!1),p=x({}),f=x(!1),h=x({page:1,rowsPerPage:10,rowsNumber:0}),g=x([{name:"DEVICES",label:"All Nodes/Devices",description:"T3000 devices and nodes",icon:"developer_board",count:0}]),y=x([{name:"INPUTS",label:"Input Points",description:"Device input data points",icon:"input",count:0},{name:"OUTPUTS",label:"Output Points",description:"Device output control points",icon:"output",count:0},{name:"VARIABLES",label:"Variable Points",description:"Variable data points",icon:"code",count:0},{name:"PROGRAMS",label:"Programs",description:"Control programs",icon:"smart_toy",count:0},{name:"PID_TABLE",label:"PID Controllers",description:"PID control loops",icon:"tune",count:0},{name:"SCHEDULES",label:"Schedules",description:"Time schedules",icon:"schedule",count:0}]),_=x([{name:"TRENDLOGS",label:"Trend Logs",description:"Data trending configurations",icon:"trending_up",count:0},{name:"TRENDLOG_DATA",label:"Trend Data",description:"Historical trend data",icon:"analytics",count:0},{name:"ALARMS",label:"Alarms",description:"Alarm definitions",icon:"warning",count:0},{name:"HOLIDAYS",label:"Holidays",description:"Holiday schedules",icon:"event",count:0},{name:"GRAPHICS",label:"Graphics",description:"Graphical displays",icon:"image",count:0},{name:"MONITORDATA",label:"Monitor Data",description:"Real-time monitoring data",icon:"monitor",count:0}]),S=t((()=>{if(!l.value)return[];return[...T(l.value),{name:"actions",label:"Actions",field:"actions",sortable:!1,align:"center"}]})),z=e=>{l.value=e,c.value=[],k()},C=()=>[...g.value,...y.value,..._.value].find((e=>e.name===l.value)),T=e=>({DEVICES:[{name:"SerialNumber",label:"Serial Number",field:"SerialNumber",sortable:!0},{name:"Product_Name",label:"Product Name",field:"Product_Name",sortable:!0},{name:"Building_Name",label:"Building",field:"Building_Name",sortable:!0},{name:"Address",label:"Address",field:"Address",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0},{name:"Description",label:"Description",field:"Description",sortable:!0}],INPUTS:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Input_index",label:"Input #",field:"Input_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"fValue",label:"Value",field:"fValue",sortable:!0},{name:"Units",label:"Units",field:"Units",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],OUTPUTS:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Output_index",label:"Output #",field:"Output_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"fValue",label:"Value",field:"fValue",sortable:!0},{name:"Units",label:"Units",field:"Units",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],VARIABLES:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Variable_index",label:"Variable #",field:"Variable_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"fValue",label:"Value",field:"fValue",sortable:!0},{name:"Units",label:"Units",field:"Units",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],PROGRAMS:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Program_index",label:"Program #",field:"Program_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],SCHEDULES:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Schedule_index",label:"Schedule #",field:"Schedule_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],TRENDLOGS:[{name:"TrendLog_ID",label:"Trend ID",field:"TrendLog_ID",sortable:!0},{name:"TrendLog_Name",label:"Name",field:"TrendLog_Name",sortable:!0},{name:"Object_Name",label:"Object",field:"Object_Name",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],ALARMS:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Alarm_index",label:"Alarm #",field:"Alarm_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}]}[e]||[{name:"id",label:"ID",field:"id",sortable:!0},{name:"created_at",label:"Created",field:"created_at",sortable:!0}]),q=()=>{if(!l.value)return[];const e=["SerialNumber","nSerialNumber","TrendLog_ID"];return S.value.filter((a=>"actions"!==a.name&&!e.includes(a.name))).map((e=>({label:e.label,value:e.name})))},k=async()=>{if(l.value){d.value=!0;try{const e=await Le.getTableRecords(l.value,{page:h.value.page,per_page:h.value.rowsPerPage});u.value=e.data||[],h.value.rowsNumber=e.total||u.value.length}catch(e){a.notify({type:"negative",message:"Failed to load table data"}),u.value=w(l.value)}finally{d.value=!1}}},w=e=>({DEVICES:[{SerialNumber:1,Product_Name:"T3-BB",Building_Name:"Main Building",Address:"192.168.1.100",Status:"Online",Description:"Building Controller"},{SerialNumber:2,Product_Name:"T3-8I",Building_Name:"Building B",Address:"192.168.1.101",Status:"Offline",Description:"Input Module"}],INPUTS:[{nSerialNumber:1,Input_index:"1",Full_Label:"Zone Temperature",fValue:"72.5",Units:"Deg F",Status:"Normal"},{nSerialNumber:1,Input_index:"2",Full_Label:"Humidity",fValue:"45.2",Units:"%RH",Status:"Normal"}],OUTPUTS:[{nSerialNumber:1,Output_index:"1",Full_Label:"Cooling Valve",fValue:"25.0",Units:"%",Status:"Normal"}],VARIABLES:[{nSerialNumber:1,Variable_index:"1",Full_Label:"Setpoint",fValue:"72.0",Units:"Deg F",Status:"Normal"}]}[e]||[]),D=()=>{k(),O()},O=async()=>{const e=[...g.value,...y.value,..._.value];for(const l of e)try{const e=await Le.getTableCount(l.name);l.count=e.count||0}catch(a){const e={DEVICES:2,INPUTS:24,OUTPUTS:16,VARIABLES:8,PROGRAMS:4,SCHEDULES:6,TRENDLOGS:3,ALARMS:5};l.count=e[l.name]||0}},N=e=>{const{page:a,rowsPerPage:l}=e.pagination;h.value.page=a,h.value.rowsPerPage=l,k()},V=()=>{m.value="create",p.value={},v.value=!0},I=e=>{m.value="edit",p.value={...e},v.value=!0},P=e=>{var l;a.dialog({title:`View ${null==(l=C())?void 0:l.label}`,message:`<pre>${JSON.stringify(e,null,2)}</pre>`,html:!0,style:"min-width: 400px"})},le=e=>{var t;a.dialog({title:"Confirm Delete",message:`Are you sure you want to delete this ${null==(t=C())?void 0:t.label.toLowerCase()}?`,cancel:!0,persistent:!0}).onOk((async()=>{try{await Le.deleteRecord(l.value,e.id),a.notify({type:"positive",message:"Record deleted successfully"}),k()}catch(t){a.notify({type:"negative",message:"Failed to delete record"})}}))},te=()=>{0!==c.value.length&&a.dialog({title:"Confirm Delete",message:`Are you sure you want to delete ${c.value.length} selected records?`,cancel:!0,persistent:!0}).onOk((async()=>{try{const e=c.value.map((e=>Le.deleteRecord(l.value,e.id)));await Promise.all(e),a.notify({type:"positive",message:`${c.value.length} records deleted successfully`}),c.value=[],k()}catch(e){a.notify({type:"negative",message:"Failed to delete records"})}}))},he=async()=>{if(p.value){f.value=!0;try{"create"===m.value?await Le.createRecord(l.value,p.value):await Le.updateRecord(l.value,p.value.id,p.value),a.notify({type:"positive",message:`Record ${"create"===m.value?"created":"updated"} successfully`}),v.value=!1,k()}catch(e){a.notify({type:"negative",message:"Failed to save record"})}finally{f.value=!1}}},ge=()=>{if(!l.value)return[];return{buildings:[{name:"name",label:"Name",type:"text",required:!0},{name:"address",label:"Address",type:"text",required:!1},{name:"description",label:"Description",type:"text",required:!1},{name:"protocol",label:"Protocol",type:"text",required:!1},{name:"ip_domain_tel",label:"IP/Domain/Tel",type:"text",required:!1},{name:"modbus_tcp_port",label:"Modbus TCP Port",type:"number",required:!1},{name:"selected",label:"Selected",type:"boolean",required:!1}],devices:[{name:"device_name",label:"Device Name",type:"text",required:!1},{name:"instance_number",label:"Instance Number",type:"number",required:!0},{name:"product_type",label:"Product Type",type:"number",required:!0},{name:"ip_address",label:"IP Address",type:"text",required:!1},{name:"modbus_address",label:"Modbus Address",type:"number",required:!1},{name:"status",label:"Status",type:"select",options:[{label:"Offline",value:0},{label:"Online",value:1}],required:!1}]}[l.value]||[{name:"name",label:"Name",type:"text",required:!0}]},ye=()=>{const e=JSON.stringify(u.value,null,2),a=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(a),i=document.createElement("a");i.href=t,i.download=`${l.value}_export.json`,i.click(),URL.revokeObjectURL(t)},_e=()=>{const e=document.createElement("input");e.type="file",e.accept=".json,.csv",e.onchange=e=>{var l;const t=null==(l=e.target.files)?void 0:l[0];if(t){const e=new FileReader;e.onload=e=>{var l;try{JSON.parse(null==(l=e.target)?void 0:l.result);a.notify({type:"positive",message:"Data imported successfully"})}catch(t){a.notify({type:"negative",message:"Invalid file format"})}},e.readAsText(t)}},e.click()},xe=e=>e.name||e.label||e.device_name||`Record ${e.id}`,Te=e=>{const a=["id","created_at","updated_at"],l={};return Object.keys(e).forEach((t=>{a.includes(t)||null===e[t]||""===e[t]||(l[t]=e[t])})),l},ke=e=>c.value.some((a=>a.id===e.id));return A((()=>{O()})),(e,a)=>(j(),R(ze,{class:"t3-device-db"},{default:L((()=>{var e,t;return[E("div",Ee,[E("div",Ue,[U(n,{name:"storage",size:"20px",class:"q-mr-sm"}),a[11]||(a[11]=E("span",{class:"page-title"},"WebView T3000 Database",-1)),U(B,{vertical:"",class:"q-mx-md"}),U(we,null,{default:L((()=>[U(qe,{label:"Home",icon:"home"}),U(qe,{label:"Database"}),U(qe,{label:"T3000 Devices"})])),_:1})]),E("div",Be,[U(F,{flat:"",icon:"refresh",label:"Refresh",onClick:D,class:"q-mr-sm",size:"sm"}),U(F,{color:"primary",icon:"add",label:"Create New",onClick:V,disable:!l.value,size:"sm"},null,8,["disable"])])]),E("div",Fe,[E("div",$e,[E("div",Me,[a[12]||(a[12]=E("h6",{class:"q-ma-none"},"Database Tables",-1)),U(ie),U(F,{flat:"",dense:"",icon:"expand_more",class:$({"rotate-180":!i.value}),onClick:a[0]||(a[0]=e=>i.value=!i.value),size:"sm"},null,8,["class"])]),U(B),i.value?(j(),M("div",Qe,[U(ue,{icon:"business",label:"Infrastructure","default-opened":"",class:"table-group"},{default:L((()=>[(j(!0),M(Q,null,H(g.value,(e=>(j(),R(ne,{key:e.name,clickable:"",active:l.value===e.name,onClick:a=>z(e.name),class:"table-item"},{default:L((()=>[U(oe,{avatar:""},{default:L((()=>[U(n,{name:e.icon,size:"20px"},null,8,["name"])])),_:2},1024),U(oe,null,{default:L((()=>[U(re,null,{default:L((()=>[X(J(e.label),1)])),_:2},1024),U(re,{caption:""},{default:L((()=>[X(J(e.description),1)])),_:2},1024)])),_:2},1024),U(oe,{side:""},{default:L((()=>[U(se,{label:e.count,color:"grey-6"},null,8,["label"])])),_:2},1024)])),_:2},1032,["active","onClick"])))),128))])),_:1}),U(ue,{icon:"device_hub",label:"Device Points","default-opened":"",class:"table-group"},{default:L((()=>[(j(!0),M(Q,null,H(y.value,(e=>(j(),R(ne,{key:e.name,clickable:"",active:l.value===e.name,onClick:a=>z(e.name),class:"table-item"},{default:L((()=>[U(oe,{avatar:""},{default:L((()=>[U(n,{name:e.icon,size:"20px"},null,8,["name"])])),_:2},1024),U(oe,null,{default:L((()=>[U(re,null,{default:L((()=>[X(J(e.label),1)])),_:2},1024),U(re,{caption:""},{default:L((()=>[X(J(e.description),1)])),_:2},1024)])),_:2},1024),U(oe,{side:""},{default:L((()=>[U(se,{label:e.count,color:"primary"},null,8,["label"])])),_:2},1024)])),_:2},1032,["active","onClick"])))),128))])),_:1}),U(ue,{icon:"settings",label:"System Configuration",class:"table-group"},{default:L((()=>[(j(!0),M(Q,null,H(_.value,(e=>(j(),R(ne,{key:e.name,clickable:"",active:l.value===e.name,onClick:a=>z(e.name),class:"table-item"},{default:L((()=>[U(oe,{avatar:""},{default:L((()=>[U(n,{name:e.icon,size:"20px"},null,8,["name"])])),_:2},1024),U(oe,null,{default:L((()=>[U(re,null,{default:L((()=>[X(J(e.label),1)])),_:2},1024),U(re,{caption:""},{default:L((()=>[X(J(e.description),1)])),_:2},1024)])),_:2},1024),U(oe,{side:""},{default:L((()=>[U(se,{label:e.count,color:"secondary"},null,8,["label"])])),_:2},1024)])),_:2},1032,["active","onClick"])))),128))])),_:1})])):G("",!0)]),E("div",He,[l.value?(j(),M("div",Ge,[E("div",Je,[E("h5",Xe,J(null==(e=C())?void 0:e.label),1),E("p",Ye,J(null==(t=C())?void 0:t.description),1)]),E("div",Ke,[U(de,{flat:""},{default:L((()=>[U(F,{flat:"",icon:"view_list",color:"table"===o.value?"primary":"grey-6",onClick:a[1]||(a[1]=e=>o.value="table"),dense:"",size:"sm"},{default:L((()=>[U(ce,null,{default:L((()=>[...a[13]||(a[13]=[X("Table View",-1)])])),_:1})])),_:1},8,["color"]),U(F,{flat:"",icon:"view_module",color:"cards"===o.value?"primary":"grey-6",onClick:a[2]||(a[2]=e=>o.value="cards"),dense:"",size:"sm"},{default:L((()=>[U(ce,null,{default:L((()=>[...a[14]||(a[14]=[X("Card View",-1)])])),_:1})])),_:1},8,["color"]),U(F,{flat:"",icon:"code",color:"json"===o.value?"primary":"grey-6",onClick:a[3]||(a[3]=e=>o.value="json"),dense:"",size:"sm"},{default:L((()=>[U(ce,null,{default:L((()=>[...a[15]||(a[15]=[X("JSON View",-1)])])),_:1})])),_:1},8,["color"])])),_:1})])])):G("",!0),l.value?(j(),M("div",We,[E("div",Ze,[U(Y,{modelValue:r.value,"onUpdate:modelValue":a[4]||(a[4]=e=>r.value=e),placeholder:"Search records...",outlined:"",dense:"",style:{width:"280px"}},{prepend:L((()=>[U(n,{name:"search",size:"18px"})])),_:1},8,["modelValue"]),U(ve,{modelValue:s.value,"onUpdate:modelValue":a[5]||(a[5]=e=>s.value=e),options:q(),placeholder:"Filter by...",outlined:"",dense:"",style:{width:"140px"},class:"q-ml-sm"},null,8,["modelValue","options"])]),E("div",ea,[U(F,{flat:"",icon:"file_download",label:"Export",onClick:ye,class:"q-mr-sm",size:"sm"}),U(F,{flat:"",icon:"upload_file",label:"Import",onClick:_e,class:"q-mr-sm",size:"sm"}),U(F,{color:"negative",icon:"delete",label:"Delete Selected",onClick:te,disable:0===c.value.length,size:"sm"},null,8,["disable"])])])):G("",!0),l.value?(j(),M("div",aa,["table"===o.value?(j(),R(me,{key:0,rows:u.value,columns:S.value,loading:d.value,pagination:h.value,"row-key":"id",selection:"multiple",selected:c.value,"onUpdate:selected":a[6]||(a[6]=e=>c.value=e),onRequest:N,class:"data-table"},{"body-cell-actions":L((e=>[U(be,{props:e},{default:L((()=>[U(F,{flat:"",dense:"",icon:"edit",color:"primary",onClick:a=>I(e.row),size:"sm"},null,8,["onClick"]),U(F,{flat:"",dense:"",icon:"visibility",color:"info",onClick:a=>P(e.row),size:"sm"},null,8,["onClick"]),U(F,{flat:"",dense:"",icon:"delete",color:"negative",onClick:a=>le(e.row),size:"sm"},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","pagination","selected"])):"cards"===o.value?(j(),M("div",la,[(j(!0),M(Q,null,H(u.value,(e=>(j(),R(K,{key:e.id,class:$(["record-card",{selected:ke(e)}]),onClick:a=>(e=>{const a=c.value.findIndex((a=>a.id===e.id));a>-1?c.value.splice(a,1):c.value.push(e)})(e)},{default:L((()=>[U(W,null,{default:L((()=>[E("div",ta,[E("h6",ia,J(xe(e)),1),U(ie),U(fe,{flat:"",dense:"",icon:"more_vert"},{default:L((()=>[U(pe,null,{default:L((()=>[U(ne,{clickable:"",onClick:a=>I(e)},{default:L((()=>[U(oe,{avatar:""},{default:L((()=>[U(n,{name:"edit"})])),_:1}),U(oe,null,{default:L((()=>[...a[16]||(a[16]=[X("Edit",-1)])])),_:1})])),_:2},1032,["onClick"]),U(ne,{clickable:"",onClick:a=>P(e)},{default:L((()=>[U(oe,{avatar:""},{default:L((()=>[U(n,{name:"visibility"})])),_:1}),U(oe,null,{default:L((()=>[...a[17]||(a[17]=[X("View",-1)])])),_:1})])),_:2},1032,["onClick"]),U(B),U(ne,{clickable:"",onClick:a=>le(e)},{default:L((()=>[U(oe,{avatar:""},{default:L((()=>[U(n,{name:"delete",color:"negative"})])),_:1}),U(oe,null,{default:L((()=>[...a[18]||(a[18]=[X("Delete",-1)])])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)]),E("div",na,[(j(!0),M(Q,null,H(Te(e),((e,a)=>{return j(),M("div",{key:a,class:"card-field"},[E("span",oa,J((l=a,l.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))))+":",1),E("span",ra,J(e),1)]);var l})),128))])])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])):"json"===o.value?(j(),M("div",sa,[U(Re,{class:"fit"},{default:L((()=>[E("pre",ua,J(JSON.stringify(u.value,null,2)),1)])),_:1})])):G("",!0)])):(j(),M("div",ca,[U(n,{name:"table_chart",size:"80px",color:"grey-4"}),a[19]||(a[19]=E("h5",{class:"q-mt-md text-grey-6"},"Select a table to view data",-1)),a[20]||(a[20]=E("p",{class:"text-grey-5"},"Choose a table from the left panel to start managing your T3000 device data",-1))]))])]),U(ee,{modelValue:v.value,"onUpdate:modelValue":a[10]||(a[10]=e=>v.value=e),maximized:b.value},{default:L((()=>[U(K,{style:{"min-width":"600px","max-width":"800px"}},{default:L((()=>[U(W,{class:"dialog-header"},{default:L((()=>{var e;return[E("div",da,[E("h6",va,J("create"===m.value?"Create New":"Edit")+" "+J(null==(e=C())?void 0:e.label),1)]),U(ie),U(F,{flat:"",dense:"",icon:b.value?"fullscreen_exit":"fullscreen",onClick:a[7]||(a[7]=e=>b.value=!b.value)},null,8,["icon"]),U(F,{flat:"",dense:"",icon:"close",onClick:a[8]||(a[8]=e=>v.value=!1)})]})),_:1}),U(B),U(W,{class:"dialog-content"},{default:L((()=>[U(Se,{onSubmit:he,class:"record-form"},{default:L((()=>[(j(!0),M(Q,null,H(ge(),(e=>(j(),M("div",{key:e.name,class:"form-field"},["text"===e.type||"number"===e.type?(j(),R(Y,{key:0,modelValue:p.value[e.name],"onUpdate:modelValue":a=>p.value[e.name]=a,label:e.label,type:e.type,required:e.required,outlined:"",class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue","label","type","required"])):"select"===e.type?(j(),R(ve,{key:1,modelValue:p.value[e.name],"onUpdate:modelValue":a=>p.value[e.name]=a,options:e.options,label:e.label,required:e.required,outlined:"",class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue","options","label","required"])):"boolean"===e.type?(j(),R(ae,{key:2,modelValue:p.value[e.name],"onUpdate:modelValue":a=>p.value[e.name]=a,label:e.label,class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue","label"])):G("",!0)])))),128))])),_:1})])),_:1}),U(B),U(Z,{align:"right"},{default:L((()=>[U(F,{flat:"",label:"Cancel",onClick:a[9]||(a[9]=e=>v.value=!1)}),U(F,{color:"primary",label:"Save",onClick:he,loading:f.value},null,8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue","maximized"])]})),_:1}))}},[["__scopeId","data-v-745e425f"]]);export{ma as default};

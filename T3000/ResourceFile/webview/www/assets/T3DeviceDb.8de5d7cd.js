var e=Object.defineProperty,a=(a,l,t)=>(((a,l,t)=>{l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t})(a,"symbol"!=typeof l?l+"":l,t),t);import{a7 as l,aW as t,aY as o,a as i,Q as n,ax as r,ae as s,bY as u,bZ as c,bu as d,a9 as v,k as m,bq as b,br as p,ai as f,bs as h,aT as g,bt as y,bi as _,bl as S,b4 as z,aS as C,aU as x,aV as T,h as q,aX as k,bf as w,w as D,J as O,I as N,f as P,g as V,bT as I,b_ as E,bD as A,o as j,Y as L,a4 as R,a5 as U,$ as B,c as F,aq as Q,ap as $,aE as M,Z as H,F as G,as as Y,a1 as J,a0 as X,C as Z,ar as K,an as W,ao as ee,au as ae,av as le,ay as te}from"./index.3bd6c859.js";import{g as oe,s as ie,Q as ne}from"./touch.2d8410d0.js";import{Q as re,a as se}from"./QItem.dc1462d4.js";import{Q as ue}from"./QItemLabel.e2a12bb6.js";import{Q as ce}from"./QBadge.590ff7cf.js";import{Q as de}from"./QExpansionItem.4ba5f0f6.js";import{Q as ve}from"./QTooltip.25e7c95b.js";import{Q as me}from"./QBtnGroup.453d4dba.js";import{Q as be}from"./QSelect.6850d5f4.js";import{Q as pe,a as fe}from"./QTable.5bb8bb75.js";import{Q as he}from"./QMenu.e18b116c.js";import{Q as ge}from"./QBtnDropdown.6db7a494.js";import{Q as ye}from"./QResizeObserver.c4dc0ff0.js";import{Q as _e}from"./QScrollObserver.a80e8fd4.js";import{d as Se}from"./position-engine.69644a20.js";import{b as ze}from"./format.b9446fb2.js";import{Q as Ce}from"./QForm.02dfba53.js";import{Q as xe}from"./QPage.85bf0837.js";import{u as Te}from"./use-quasar.7b655738.js";import{k as qe}from"./index.d11c4764.js";import{_ as ke}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.2cea4c57.js";import"./QMarkupTable.295fb157.js";var we=l({name:"QBreadcrumbsEl",props:{...t,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:a}){const{linkTag:l,linkAttrs:t,linkClass:u,navigateOnClick:c}=o(),d=i((()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(!0!==e.disable?"q-link--focusable"+u.value:"q-breadcrumbs__el--disable"),...t.value,onClick:c}))),v=i((()=>"q-breadcrumbs__el-icon"+(void 0!==e.label?" q-breadcrumbs__el-icon--with-label":"")));return()=>{const t=[];return void 0!==e.icon&&t.push(n(r,{class:v.value,name:e.icon})),void 0!==e.label&&t.push(e.label),n(l.value,{...d.value},s(a.default,t))}}});const De=["",!0];var Oe=l({name:"QBreadcrumbs",props:{...u,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:a}){const l=c(e),t=i((()=>`flex items-center ${l.value}${"none"===e.gutter?"":` q-gutter-${e.gutter}`}`)),o=i((()=>e.separatorColor?` text-${e.separatorColor}`:"")),r=i((()=>` text-${e.activeColor}`));return()=>{if(void 0===a.default)return;const l=d(v(a.default));if(0===l.length)return;let i=1;const s=[],u=l.filter((e=>{var a;return"QBreadcrumbsEl"===(null==(a=e.type)?void 0:a.name)})).length,c=void 0!==a.separator?a.separator:()=>e.separator;return l.forEach((e=>{var a;if("QBreadcrumbsEl"===(null==(a=e.type)?void 0:a.name)){const a=i<u,l=(!0===a?"":" q-breadcrumbs--last")+(!0!==(null!==e.props&&De.includes(e.props.disable))&&!0===a?r.value:"");i++,s.push(n("div",{class:`flex items-center${l}`},[e])),!0===a&&s.push(n("div",{class:"q-breadcrumbs__separator"+o.value},c()))}else s.push(e)})),n("div",{class:"q-breadcrumbs"},[n("div",{class:t.value},s)])}}}),Ne=l({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup:e=>()=>[n("div",{class:e.store.scroll.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:e.store.onVerticalMousedown}),n("div",{class:e.store.scroll.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:e.store.onHorizontalMousedown}),m(n("div",{ref:e.store.scroll.vertical.ref,class:e.store.scroll.vertical.thumbClass.value,style:e.store.scroll.vertical.style.value,"aria-hidden":"true"}),e.store.thumbVertDir),m(n("div",{ref:e.store.scroll.horizontal.ref,class:e.store.scroll.horizontal.thumbClass.value,style:e.store.scroll.horizontal.style.value,"aria-hidden":"true"}),e.store.thumbHorizDir)]});function Pe(e,a,l){const t=z(e);let o,i=t.left-a.event.x,n=t.top-a.event.y,r=Math.abs(i),s=Math.abs(n);const u=a.direction;!0===u.horizontal&&!0!==u.vertical?o=i<0?"left":"right":!0!==u.horizontal&&!0===u.vertical?o=n<0?"up":"down":!0===u.up&&n<0?(o="up",r>s&&(!0===u.left&&i<0?o="left":!0===u.right&&i>0&&(o="right"))):!0===u.down&&n>0?(o="down",r>s&&(!0===u.left&&i<0?o="left":!0===u.right&&i>0&&(o="right"))):!0===u.left&&i<0?(o="left",r<s&&(!0===u.up&&n<0?o="up":!0===u.down&&n>0&&(o="down"))):!0===u.right&&i>0&&(o="right",r<s&&(!0===u.up&&n<0?o="up":!0===u.down&&n>0&&(o="down")));let c=!1;if(void 0===o&&!1===l){if(!0===a.event.isFirst||void 0===a.event.lastDir)return{};o=a.event.lastDir,c=!0,"left"===o||"right"===o?(t.left-=i,r=0,i=0):(t.top-=n,s=0,n=0)}return{synthetic:c,payload:{evt:e,touch:!0!==a.event.mouse,mouse:!0===a.event.mouse,position:t,direction:o,isFirst:a.event.isFirst,isFinal:!0===l,duration:Date.now()-a.event.time,distance:{x:r,y:s},offset:{x:i,y:n},delta:{x:t.left-a.event.lastX,y:t.top-a.event.lastY}}}}let Ve=0;var Ie=b({name:"touch-pan",beforeMount(e,{value:a,modifiers:l}){if(!0!==l.mouse&&!0!==p.has.touch)return;function t(e,a){!0===l.mouse&&!0===a?x(e):(!0===l.stop&&S(e),!0===l.prevent&&_(e))}const o={uid:"qvtp_"+Ve++,handler:a,modifiers:l,direction:oe(l),noop:f,mouseStart(e){ie(e,o)&&h(e)&&(g(o,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),o.start(e,!0))},touchStart(e){if(ie(e,o)){const a=e.target;g(o,"temp",[[a,"touchmove","move","notPassiveCapture"],[a,"touchcancel","end","passiveCapture"],[a,"touchend","end","passiveCapture"]]),o.start(e)}},start(a,t){if(!0===p.is.firefox&&y(e,!0),o.lastEvt=a,!0===t||!0===l.stop){if(!0!==o.direction.all&&(!0!==t||!0!==o.modifiers.mouseAllDir&&!0!==o.modifiers.mousealldir)){const e=-1!==a.type.indexOf("mouse")?new MouseEvent(a.type,a):new TouchEvent(a.type,a);!0===a.defaultPrevented&&_(e),!0===a.cancelBubble&&S(e),Object.assign(e,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:void 0===a.qClonedBy?[o.uid]:a.qClonedBy.concat(o.uid)}),o.initialEvent={target:a.target,event:e}}S(a)}const{left:i,top:n}=z(a);o.event={x:i,y:n,time:Date.now(),mouse:!0===t,detected:!1,isFirst:!0,isFinal:!1,lastX:i,lastY:n}},move(e){if(void 0===o.event)return;const a=z(e),i=a.left-o.event.x,n=a.top-o.event.y;if(0===i&&0===n)return;o.lastEvt=e;const r=!0===o.event.mouse,s=()=>{let a;t(e,r),!0!==l.preserveCursor&&!0!==l.preservecursor&&(a=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),!0===r&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Se(),o.styleCleanup=e=>{if(o.styleCleanup=void 0,void 0!==a&&(document.documentElement.style.cursor=a),document.body.classList.remove("non-selectable"),!0===r){const a=()=>{document.body.classList.remove("no-pointer-events--children")};void 0!==e?setTimeout((()=>{a(),e()}),50):a()}else void 0!==e&&e()}};if(!0===o.event.detected){!0!==o.event.isFirst&&t(e,o.event.mouse);const{payload:a,synthetic:l}=Pe(e,o,!1);return void(void 0!==a&&(!1===o.handler(a)?o.end(e):(void 0===o.styleCleanup&&!0===o.event.isFirst&&s(),o.event.lastX=a.position.left,o.event.lastY=a.position.top,o.event.lastDir=!0===l?void 0:a.direction,o.event.isFirst=!1)))}if(!0===o.direction.all||!0===r&&(!0===o.modifiers.mouseAllDir||!0===o.modifiers.mousealldir))return s(),o.event.detected=!0,void o.move(e);const u=Math.abs(i),c=Math.abs(n);u!==c&&(!0===o.direction.horizontal&&u>c||!0===o.direction.vertical&&u<c||!0===o.direction.up&&u<c&&n<0||!0===o.direction.down&&u<c&&n>0||!0===o.direction.left&&u>c&&i<0||!0===o.direction.right&&u>c&&i>0?(o.event.detected=!0,o.move(e)):o.end(e,!0))},end(a,l){var t;if(void 0!==o.event){if(C(o,"temp"),!0===p.is.firefox&&y(e,!1),!0===l)null==(t=o.styleCleanup)||t.call(o),!0!==o.event.detected&&void 0!==o.initialEvent&&o.initialEvent.target.dispatchEvent(o.initialEvent.event);else if(!0===o.event.detected){!0===o.event.isFirst&&o.handler(Pe(void 0===a?o.lastEvt:a,o).payload);const{payload:e}=Pe(void 0===a?o.lastEvt:a,o,!0),l=()=>{o.handler(e)};void 0!==o.styleCleanup?o.styleCleanup(l):l()}o.event=void 0,o.initialEvent=void 0,o.lastEvt=void 0}}};if(e.__qtouchpan=o,!0===l.mouse){const a=!0===l.mouseCapture||!0===l.mousecapture?"Capture":"";g(o,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}!0===p.has.touch&&g(o,"main",[[e,"touchstart","touchStart","passive"+(!0===l.capture?"Capture":"")],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const l=e.__qtouchpan;void 0!==l&&(a.oldValue!==a.value&&("function"!=typeof value&&l.end(),l.handler=a.value),l.direction=oe(a.modifiers))},beforeUnmount(e){var a;const l=e.__qtouchpan;void 0!==l&&(void 0!==l.event&&l.end(),C(l,"main"),C(l,"temp"),!0===p.is.firefox&&y(e,!1),null==(a=l.styleCleanup)||a.call(l),delete e.__qtouchpan)}});const Ee=["vertical","horizontal"],Ae={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},je={prevent:!0,mouse:!0,mouseAllDir:!0},Le=e=>e>=250?50:Math.ceil(e/5);var Re=l({name:"QScrollArea",props:{...T,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:a,emit:l}){const t=q(!1),o=q(!1),r=q(!1),u={vertical:q(0),horizontal:q(0)},c={vertical:{ref:q(null),position:q(0),size:q(0)},horizontal:{ref:q(null),position:q(0),size:q(0)}},{proxy:d}=V(),v=k(e,d.$q);let m,b=null;const p=q(null),f=i((()=>"q-scrollarea"+(!0===v.value?" q-scrollarea--dark":"")));Object.assign(u,{verticalInner:i((()=>u.vertical.value-e.verticalOffset[0]-e.verticalOffset[1])),horizontalInner:i((()=>u.horizontal.value-e.horizontalOffset[0]-e.horizontalOffset[1]))}),c.vertical.percentage=i((()=>{const e=c.vertical.size.value-u.vertical.value;if(e<=0)return 0;const a=ze(c.vertical.position.value/e,0,1);return Math.round(1e4*a)/1e4})),c.vertical.thumbHidden=i((()=>!0!==(null===e.visible?r.value:e.visible)&&!1===t.value&&!1===o.value||c.vertical.size.value<=u.vertical.value+1)),c.vertical.thumbStart=i((()=>e.verticalOffset[0]+c.vertical.percentage.value*(u.verticalInner.value-c.vertical.thumbSize.value))),c.vertical.thumbSize=i((()=>Math.round(ze(u.verticalInner.value*u.verticalInner.value/c.vertical.size.value,Le(u.verticalInner.value),u.verticalInner.value)))),c.vertical.style=i((()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${c.vertical.thumbStart.value}px`,height:`${c.vertical.thumbSize.value}px`,right:`${e.horizontalOffset[1]}px`}))),c.vertical.thumbClass=i((()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(!0===c.vertical.thumbHidden.value?" q-scrollarea__thumb--invisible":""))),c.vertical.barClass=i((()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(!0===c.vertical.thumbHidden.value?" q-scrollarea__bar--invisible":""))),c.horizontal.percentage=i((()=>{const e=c.horizontal.size.value-u.horizontal.value;if(e<=0)return 0;const a=ze(Math.abs(c.horizontal.position.value)/e,0,1);return Math.round(1e4*a)/1e4})),c.horizontal.thumbHidden=i((()=>!0!==(null===e.visible?r.value:e.visible)&&!1===t.value&&!1===o.value||c.horizontal.size.value<=u.horizontal.value+1)),c.horizontal.thumbStart=i((()=>e.horizontalOffset[0]+c.horizontal.percentage.value*(u.horizontalInner.value-c.horizontal.thumbSize.value))),c.horizontal.thumbSize=i((()=>Math.round(ze(u.horizontalInner.value*u.horizontalInner.value/c.horizontal.size.value,Le(u.horizontalInner.value),u.horizontalInner.value)))),c.horizontal.style=i((()=>({...e.thumbStyle,...e.horizontalThumbStyle,[!0===d.$q.lang.rtl?"right":"left"]:`${c.horizontal.thumbStart.value}px`,width:`${c.horizontal.thumbSize.value}px`,bottom:`${e.verticalOffset[1]}px`}))),c.horizontal.thumbClass=i((()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(!0===c.horizontal.thumbHidden.value?" q-scrollarea__thumb--invisible":""))),c.horizontal.barClass=i((()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(!0===c.horizontal.thumbHidden.value?" q-scrollarea__bar--invisible":"")));const h=i((()=>!0===c.vertical.thumbHidden.value&&!0===c.horizontal.thumbHidden.value?e.contentStyle:e.contentActiveStyle));function g(){const e={};return Ee.forEach((a=>{const l=c[a];Object.assign(e,{[a+"Position"]:l.position.value,[a+"Percentage"]:l.percentage.value,[a+"Size"]:l.size.value,[a+"ContainerSize"]:u[a].value,[a+"ContainerInnerSize"]:u[a+"Inner"].value})})),e}const y=w((()=>{const e=g();e.ref=d,l("scroll",e)}),0);function _(e,a,l){if(!1===Ee.includes(e))return void console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");("vertical"===e?I:E)(p.value,a,l)}function S({height:e,width:a}){let l=!1;u.vertical.value!==e&&(u.vertical.value=e,l=!0),u.horizontal.value!==a&&(u.horizontal.value=a,l=!0),!0===l&&A()}function z({position:e}){let a=!1;c.vertical.position.value!==e.top&&(c.vertical.position.value=e.top,a=!0),c.horizontal.position.value!==e.left&&(c.horizontal.position.value=e.left,a=!0),!0===a&&A()}function C({height:e,width:a}){c.horizontal.size.value!==a&&(c.horizontal.size.value=a,A()),c.vertical.size.value!==e&&(c.vertical.size.value=e,A())}function x(e,a){const l=c[a];if(!0===e.isFirst){if(!0===l.thumbHidden.value)return;m=l.position.value,o.value=!0}else if(!0!==o.value)return;!0===e.isFinal&&(o.value=!1);const t=Ae[a],i=(l.size.value-u[a].value)/(u[a+"Inner"].value-l.thumbSize.value),n=e.distance[t.dist];j(m+(e.direction===t.dir?1:-1)*n*i,a)}function T(a,l){const t=c[l];if(!0!==t.thumbHidden.value){const o="vertical"===l?e.verticalOffset[0]:e.horizontalOffset[0],i=a[Ae[l].offset]-o,n=t.thumbStart.value-o;if(i<n||i>n+t.thumbSize.value){const e=i-t.thumbSize.value/2;j(ze(e/(u[l+"Inner"].value-t.thumbSize.value),0,1)*Math.max(0,t.size.value-u[l].value),l)}null!==t.ref.value&&t.ref.value.dispatchEvent(new MouseEvent(a.type,a))}}function A(){t.value=!0,null!==b&&clearTimeout(b),b=setTimeout((()=>{b=null,t.value=!1}),e.delay),void 0!==e.onScroll&&y()}function j(e,a){p.value[Ae[a].scroll]=e}let L=null;function R(){null!==L&&clearTimeout(L),L=setTimeout((()=>{L=null,r.value=!0}),d.$q.platform.is.ios?50:0)}function U(){null!==L&&(clearTimeout(L),L=null),r.value=!1}let B=null;D((()=>d.$q.lang.rtl),(e=>{null!==p.value&&E(p.value,Math.abs(c.horizontal.position.value)*(!0===e?-1:1))})),O((()=>{B={top:c.vertical.position.value,left:c.horizontal.position.value}})),N((()=>{if(null===B)return;const e=p.value;null!==e&&(E(e,B.left),I(e,B.top))})),P(y.cancel),Object.assign(d,{getScrollTarget:()=>p.value,getScroll:g,getScrollPosition:()=>({top:c.vertical.position.value,left:c.horizontal.position.value}),getScrollPercentage:()=>({top:c.vertical.percentage.value,left:c.horizontal.percentage.value}),setScrollPosition:_,setScrollPercentage(e,a,l){_(e,a*(c[e].size.value-u[e].value)*("horizontal"===e&&!0===d.$q.lang.rtl?-1:1),l)}});const F={scroll:c,thumbVertDir:[[Ie,e=>{x(e,"vertical")},void 0,{vertical:!0,...je}]],thumbHorizDir:[[Ie,e=>{x(e,"horizontal")},void 0,{horizontal:!0,...je}]],onVerticalMousedown(e){T(e,"vertical")},onHorizontalMousedown(e){T(e,"horizontal")}};return()=>n("div",{class:f.value,onMouseenter:R,onMouseleave:U},[n("div",{ref:p,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:void 0!==e.tabindex?e.tabindex:void 0},[n("div",{class:"q-scrollarea__content absolute",style:h.value},s(a.default,[n(ye,{debounce:0,onResize:C})])),n(_e,{axis:"both",onScroll:z})]),n(ye,{debounce:0,onResize:S}),n(Ne,{store:F,barStyle:e.barStyle,verticalBarStyle:e.verticalBarStyle,horizontalBarStyle:e.horizontalBarStyle})])}});const Ue=new class{constructor(e=""){a(this,"api"),a(this,"baseUrl"),this.baseUrl=e,this.api=qe.create({prefixUrl:e,headers:{"Content-Type":"application/json",auth:A.get("token")||""},hooks:{beforeRequest:[e=>{const a=A.get("token");a&&e.headers.set("auth",a)}],afterResponse:[(e,a,l)=>{401===l.status&&A.remove("token")}]}})}async getTableRecords(e,a){var l,t,o;const i=new URLSearchParams;(null==a?void 0:a.page)&&i.set("page",a.page.toString()),(null==a?void 0:a.per_page)&&i.set("per_page",a.per_page.toString()),(null==a?void 0:a.search)&&i.set("search",a.search);const n=`api/t3_device/${e}${i.toString()?"?"+i.toString():""}`,r=await this.api.get(n).json();return{data:r.data||[],total:r.total||r.count||(null==(l=r.data)?void 0:l.length)||0,message:r.message||`Retrieved ${r.total||r.count||(null==(t=r.data)?void 0:t.length)||0} records from ${e}`,count:r.total||r.count||(null==(o=r.data)?void 0:o.length)||0}}async getTableCount(e){return await this.api.get(`api/t3_device/${e}/count`).json()}async createRecord(e,a){return await this.api.post(`api/t3_device/${e}`,{json:a}).json()}async updateRecord(e,a,l){return await this.api.put(`api/t3_device/${e}/${a}`,{json:l}).json()}async deleteRecord(e,a){return await this.api.delete(`api/t3_device/${e}/${a}`).json()}async getBuildings(e){return this.getTableRecords("buildings",e)}async getBuildingsCount(){return this.getTableCount("buildings")}async getDevices(e){return this.getTableRecords("devices",e)}async getDevicesCount(){return this.getTableCount("devices")}async getInputPoints(e){return this.getTableRecords("input_points",e)}async getInputPointsCount(){return this.getTableCount("input_points")}async getOutputPoints(e){return this.getTableRecords("output_points",e)}async getOutputPointsCount(){return this.getTableCount("output_points")}async getVariables(e){return this.getTableRecords("variables",e)}async getVariablesCount(){return this.getTableCount("variables")}async getPrograms(e){return this.getTableRecords("programs",e)}async getProgramsCount(){return this.getTableCount("programs")}async getSchedules(e){return this.getTableRecords("schedules",e)}async getSchedulesCount(){return this.getTableCount("schedules")}async getHolidays(e){return this.getTableRecords("holidays",e)}async getHolidaysCount(){return this.getTableCount("holidays")}async getTrendlogs(e){return this.getTableRecords("trendlogs",e)}async getTrendlogsCount(){return this.getTableCount("trendlogs")}}("http://localhost:9103");const Be={class:"top-bar"},Fe={class:"top-bar-left"},Qe={class:"top-bar-right"},$e={class:"main-content"},Me={class:"left-panel"},He={class:"panel-header"},Ge={key:0,class:"table-tree"},Ye={class:"right-panel"},Je={key:0,class:"data-header"},Xe={class:"data-header-left"},Ze={class:"q-ma-none"},Ke={class:"q-ma-none text-grey-6"},We={class:"data-header-right"},ea={key:1,class:"data-controls"},aa={class:"data-controls-left"},la={class:"data-controls-right"},ta={key:2,class:"data-content"},oa={key:1,class:"cards-container"},ia={class:"card-header"},na={class:"q-ma-none"},ra={class:"card-content"},sa={class:"field-label"},ua={class:"field-value"},ca={key:2,class:"json-container"},da={class:"json-content"},va={key:3,class:"empty-state"},ma={class:"dialog-title"},ba={class:"q-ma-none"};var pa=ke({__name:"T3DeviceDb",setup(e){const a=Te(),l=q(""),t=q(!0),o=q("table"),n=q(""),s=q(""),u=q([]),c=q([]),d=q(!1),v=q(!1),m=q("create"),b=q(!1),p=q({}),f=q(!1),h=q({page:1,rowsPerPage:10,rowsNumber:0}),g=q([{name:"DEVICES",label:"All Nodes/Devices",description:"T3000 devices and nodes",icon:"developer_board",count:0}]),y=q([{name:"INPUTS",label:"Input Points",description:"Device input data points",icon:"input",count:0},{name:"OUTPUTS",label:"Output Points",description:"Device output control points",icon:"output",count:0},{name:"VARIABLES",label:"Variable Points",description:"Variable data points",icon:"code",count:0},{name:"PROGRAMS",label:"Programs",description:"Control programs",icon:"smart_toy",count:0},{name:"PID_TABLE",label:"PID Controllers",description:"PID control loops",icon:"tune",count:0},{name:"SCHEDULES",label:"Schedules",description:"Time schedules",icon:"schedule",count:0}]),_=q([{name:"TRENDLOGS",label:"Trend Logs",description:"Data trending configurations",icon:"trending_up",count:0},{name:"TRENDLOG_DATA",label:"Trend Data",description:"Historical trend data",icon:"analytics",count:0},{name:"ALARMS",label:"Alarms",description:"Alarm definitions",icon:"warning",count:0},{name:"HOLIDAYS",label:"Holidays",description:"Holiday schedules",icon:"event",count:0},{name:"GRAPHICS",label:"Graphics",description:"Graphical displays",icon:"image",count:0},{name:"MONITORDATA",label:"Monitor Data",description:"Real-time monitoring data",icon:"monitor",count:0}]),S=i((()=>{if(!l.value)return[];return[...x(l.value),{name:"actions",label:"Actions",field:"actions",sortable:!1,align:"center"}]})),z=e=>{l.value=e,c.value=[],k()},C=()=>[...g.value,...y.value,..._.value].find((e=>e.name===l.value)),x=e=>({DEVICES:[{name:"SerialNumber",label:"Serial Number",field:"SerialNumber",sortable:!0},{name:"Product_Name",label:"Product Name",field:"Product_Name",sortable:!0},{name:"Building_Name",label:"Building",field:"Building_Name",sortable:!0},{name:"Address",label:"Address",field:"Address",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0},{name:"Description",label:"Description",field:"Description",sortable:!0}],INPUTS:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Input_index",label:"Input #",field:"Input_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"fValue",label:"Value",field:"fValue",sortable:!0},{name:"Units",label:"Units",field:"Units",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],OUTPUTS:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Output_index",label:"Output #",field:"Output_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"fValue",label:"Value",field:"fValue",sortable:!0},{name:"Units",label:"Units",field:"Units",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],VARIABLES:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Variable_index",label:"Variable #",field:"Variable_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"fValue",label:"Value",field:"fValue",sortable:!0},{name:"Units",label:"Units",field:"Units",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],PROGRAMS:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Program_index",label:"Program #",field:"Program_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],SCHEDULES:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Schedule_index",label:"Schedule #",field:"Schedule_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],TRENDLOGS:[{name:"TrendLog_ID",label:"Trend ID",field:"TrendLog_ID",sortable:!0},{name:"TrendLog_Name",label:"Name",field:"TrendLog_Name",sortable:!0},{name:"Object_Name",label:"Object",field:"Object_Name",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}],ALARMS:[{name:"nSerialNumber",label:"Device Serial",field:"nSerialNumber",sortable:!0},{name:"Alarm_index",label:"Alarm #",field:"Alarm_index",sortable:!0},{name:"Full_Label",label:"Label",field:"Full_Label",sortable:!0},{name:"Status",label:"Status",field:"Status",sortable:!0}]}[e]||[{name:"id",label:"ID",field:"id",sortable:!0},{name:"created_at",label:"Created",field:"created_at",sortable:!0}]),T=()=>{if(!l.value)return[];const e=["SerialNumber","nSerialNumber","TrendLog_ID"];return S.value.filter((a=>"actions"!==a.name&&!e.includes(a.name))).map((e=>({label:e.label,value:e.name})))},k=async()=>{if(l.value){d.value=!0;try{const e=await Ue.getTableRecords(l.value,{page:h.value.page,per_page:h.value.rowsPerPage});u.value=e.data||[],h.value.rowsNumber=e.total||u.value.length}catch(e){console.error("Error loading table data:",e),a.notify({type:"negative",message:"Failed to load table data"}),u.value=w(l.value)}finally{d.value=!1}}},w=e=>({DEVICES:[{SerialNumber:1,Product_Name:"T3-BB",Building_Name:"Main Building",Address:"192.168.1.100",Status:"Online",Description:"Building Controller"},{SerialNumber:2,Product_Name:"T3-8I",Building_Name:"Building B",Address:"192.168.1.101",Status:"Offline",Description:"Input Module"}],INPUTS:[{nSerialNumber:1,Input_index:"1",Full_Label:"Zone Temperature",fValue:"72.5",Units:"Deg F",Status:"Normal"},{nSerialNumber:1,Input_index:"2",Full_Label:"Humidity",fValue:"45.2",Units:"%RH",Status:"Normal"}],OUTPUTS:[{nSerialNumber:1,Output_index:"1",Full_Label:"Cooling Valve",fValue:"25.0",Units:"%",Status:"Normal"}],VARIABLES:[{nSerialNumber:1,Variable_index:"1",Full_Label:"Setpoint",fValue:"72.0",Units:"Deg F",Status:"Normal"}]}[e]||[]),D=()=>{k(),O()},O=async()=>{const e=[...g.value,...y.value,..._.value];for(const l of e)try{const e=await Ue.getTableCount(l.name);l.count=e.count||0}catch(a){console.error(`Error loading count for ${l.name}:`,a);const e={DEVICES:2,INPUTS:24,OUTPUTS:16,VARIABLES:8,PROGRAMS:4,SCHEDULES:6,TRENDLOGS:3,ALARMS:5};l.count=e[l.name]||0}},N=e=>{const{page:a,rowsPerPage:l}=e.pagination;h.value.page=a,h.value.rowsPerPage=l,k()},P=()=>{m.value="create",p.value={},v.value=!0},V=e=>{m.value="edit",p.value={...e},v.value=!0},I=e=>{var l;a.dialog({title:`View ${null==(l=C())?void 0:l.label}`,message:`<pre>${JSON.stringify(e,null,2)}</pre>`,html:!0,style:"min-width: 400px"})},E=e=>{var t;a.dialog({title:"Confirm Delete",message:`Are you sure you want to delete this ${null==(t=C())?void 0:t.label.toLowerCase()}?`,cancel:!0,persistent:!0}).onOk((async()=>{try{await Ue.deleteRecord(l.value,e.id),a.notify({type:"positive",message:"Record deleted successfully"}),k()}catch(t){console.error("Error deleting record:",t),a.notify({type:"negative",message:"Failed to delete record"})}}))},A=()=>{0!==c.value.length&&a.dialog({title:"Confirm Delete",message:`Are you sure you want to delete ${c.value.length} selected records?`,cancel:!0,persistent:!0}).onOk((async()=>{try{const e=c.value.map((e=>Ue.deleteRecord(l.value,e.id)));await Promise.all(e),a.notify({type:"positive",message:`${c.value.length} records deleted successfully`}),c.value=[],k()}catch(e){console.error("Error deleting records:",e),a.notify({type:"negative",message:"Failed to delete records"})}}))},oe=async()=>{if(p.value){f.value=!0;try{"create"===m.value?await Ue.createRecord(l.value,p.value):await Ue.updateRecord(l.value,p.value.id,p.value),a.notify({type:"positive",message:`Record ${"create"===m.value?"created":"updated"} successfully`}),v.value=!1,k()}catch(e){console.error("Error saving record:",e),a.notify({type:"negative",message:"Failed to save record"})}finally{f.value=!1}}},ie=()=>{if(!l.value)return[];return{buildings:[{name:"name",label:"Name",type:"text",required:!0},{name:"address",label:"Address",type:"text",required:!1},{name:"description",label:"Description",type:"text",required:!1},{name:"protocol",label:"Protocol",type:"text",required:!1},{name:"ip_domain_tel",label:"IP/Domain/Tel",type:"text",required:!1},{name:"modbus_tcp_port",label:"Modbus TCP Port",type:"number",required:!1},{name:"selected",label:"Selected",type:"boolean",required:!1}],devices:[{name:"device_name",label:"Device Name",type:"text",required:!1},{name:"instance_number",label:"Instance Number",type:"number",required:!0},{name:"product_type",label:"Product Type",type:"number",required:!0},{name:"ip_address",label:"IP Address",type:"text",required:!1},{name:"modbus_address",label:"Modbus Address",type:"number",required:!1},{name:"status",label:"Status",type:"select",options:[{label:"Offline",value:0},{label:"Online",value:1}],required:!1}]}[l.value]||[{name:"name",label:"Name",type:"text",required:!0}]},ye=()=>{const e=JSON.stringify(u.value,null,2),a=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(a),o=document.createElement("a");o.href=t,o.download=`${l.value}_export.json`,o.click(),URL.revokeObjectURL(t)},_e=()=>{const e=document.createElement("input");e.type="file",e.accept=".json,.csv",e.onchange=e=>{var l;const t=null==(l=e.target.files)?void 0:l[0];if(t){const e=new FileReader;e.onload=e=>{var l;try{const t=JSON.parse(null==(l=e.target)?void 0:l.result);console.log("Imported data:",t),a.notify({type:"positive",message:"Data imported successfully"})}catch(t){a.notify({type:"negative",message:"Invalid file format"})}},e.readAsText(t)}},e.click()},Se=e=>e.name||e.label||e.device_name||`Record ${e.id}`,ze=e=>{const a=["id","created_at","updated_at"],l={};return Object.keys(e).forEach((t=>{a.includes(t)||null===e[t]||""===e[t]||(l[t]=e[t])})),l},qe=e=>c.value.some((a=>a.id===e.id));return j((()=>{O()})),(e,a)=>(L(),R(xe,{class:"t3-device-db"},{default:U((()=>{var e,i;return[B("div",Be,[B("div",Fe,[F(r,{name:"storage",size:"20px",class:"q-mr-sm"}),a[11]||(a[11]=B("span",{class:"page-title"},"WebView T3000 Database",-1)),F(Q,{vertical:"",class:"q-mx-md"}),F(Oe,null,{default:U((()=>[F(we,{label:"Home",icon:"home"}),F(we,{label:"Database"}),F(we,{label:"T3000 Devices"})])),_:1})]),B("div",Qe,[F($,{flat:"",icon:"refresh",label:"Refresh",onClick:D,class:"q-mr-sm",size:"sm"}),F($,{color:"primary",icon:"add",label:"Create New",onClick:P,disable:!l.value,size:"sm"},null,8,["disable"])])]),B("div",$e,[B("div",Me,[B("div",He,[a[12]||(a[12]=B("h6",{class:"q-ma-none"},"Database Tables",-1)),F(ne),F($,{flat:"",dense:"",icon:"expand_more",class:M({"rotate-180":!t.value}),onClick:a[0]||(a[0]=e=>t.value=!t.value),size:"sm"},null,8,["class"])]),F(Q),t.value?(L(),H("div",Ge,[F(de,{icon:"business",label:"Infrastructure","default-opened":"",class:"table-group"},{default:U((()=>[(L(!0),H(G,null,Y(g.value,(e=>(L(),R(re,{key:e.name,clickable:"",active:l.value===e.name,onClick:a=>z(e.name),class:"table-item"},{default:U((()=>[F(se,{avatar:""},{default:U((()=>[F(r,{name:e.icon,size:"20px"},null,8,["name"])])),_:2},1024),F(se,null,{default:U((()=>[F(ue,null,{default:U((()=>[Z(X(e.label),1)])),_:2},1024),F(ue,{caption:""},{default:U((()=>[Z(X(e.description),1)])),_:2},1024)])),_:2},1024),F(se,{side:""},{default:U((()=>[F(ce,{label:e.count,color:"grey-6"},null,8,["label"])])),_:2},1024)])),_:2},1032,["active","onClick"])))),128))])),_:1}),F(de,{icon:"device_hub",label:"Device Points","default-opened":"",class:"table-group"},{default:U((()=>[(L(!0),H(G,null,Y(y.value,(e=>(L(),R(re,{key:e.name,clickable:"",active:l.value===e.name,onClick:a=>z(e.name),class:"table-item"},{default:U((()=>[F(se,{avatar:""},{default:U((()=>[F(r,{name:e.icon,size:"20px"},null,8,["name"])])),_:2},1024),F(se,null,{default:U((()=>[F(ue,null,{default:U((()=>[Z(X(e.label),1)])),_:2},1024),F(ue,{caption:""},{default:U((()=>[Z(X(e.description),1)])),_:2},1024)])),_:2},1024),F(se,{side:""},{default:U((()=>[F(ce,{label:e.count,color:"primary"},null,8,["label"])])),_:2},1024)])),_:2},1032,["active","onClick"])))),128))])),_:1}),F(de,{icon:"settings",label:"System Configuration",class:"table-group"},{default:U((()=>[(L(!0),H(G,null,Y(_.value,(e=>(L(),R(re,{key:e.name,clickable:"",active:l.value===e.name,onClick:a=>z(e.name),class:"table-item"},{default:U((()=>[F(se,{avatar:""},{default:U((()=>[F(r,{name:e.icon,size:"20px"},null,8,["name"])])),_:2},1024),F(se,null,{default:U((()=>[F(ue,null,{default:U((()=>[Z(X(e.label),1)])),_:2},1024),F(ue,{caption:""},{default:U((()=>[Z(X(e.description),1)])),_:2},1024)])),_:2},1024),F(se,{side:""},{default:U((()=>[F(ce,{label:e.count,color:"secondary"},null,8,["label"])])),_:2},1024)])),_:2},1032,["active","onClick"])))),128))])),_:1})])):J("",!0)]),B("div",Ye,[l.value?(L(),H("div",Je,[B("div",Xe,[B("h5",Ze,X(null==(e=C())?void 0:e.label),1),B("p",Ke,X(null==(i=C())?void 0:i.description),1)]),B("div",We,[F(me,{flat:""},{default:U((()=>[F($,{flat:"",icon:"view_list",color:"table"===o.value?"primary":"grey-6",onClick:a[1]||(a[1]=e=>o.value="table"),dense:"",size:"sm"},{default:U((()=>[F(ve,null,{default:U((()=>[...a[13]||(a[13]=[Z("Table View",-1)])])),_:1})])),_:1},8,["color"]),F($,{flat:"",icon:"view_module",color:"cards"===o.value?"primary":"grey-6",onClick:a[2]||(a[2]=e=>o.value="cards"),dense:"",size:"sm"},{default:U((()=>[F(ve,null,{default:U((()=>[...a[14]||(a[14]=[Z("Card View",-1)])])),_:1})])),_:1},8,["color"]),F($,{flat:"",icon:"code",color:"json"===o.value?"primary":"grey-6",onClick:a[3]||(a[3]=e=>o.value="json"),dense:"",size:"sm"},{default:U((()=>[F(ve,null,{default:U((()=>[...a[15]||(a[15]=[Z("JSON View",-1)])])),_:1})])),_:1},8,["color"])])),_:1})])])):J("",!0),l.value?(L(),H("div",ea,[B("div",aa,[F(K,{modelValue:n.value,"onUpdate:modelValue":a[4]||(a[4]=e=>n.value=e),placeholder:"Search records...",outlined:"",dense:"",style:{width:"280px"}},{prepend:U((()=>[F(r,{name:"search",size:"18px"})])),_:1},8,["modelValue"]),F(be,{modelValue:s.value,"onUpdate:modelValue":a[5]||(a[5]=e=>s.value=e),options:T(),placeholder:"Filter by...",outlined:"",dense:"",style:{width:"140px"},class:"q-ml-sm"},null,8,["modelValue","options"])]),B("div",la,[F($,{flat:"",icon:"file_download",label:"Export",onClick:ye,class:"q-mr-sm",size:"sm"}),F($,{flat:"",icon:"upload_file",label:"Import",onClick:_e,class:"q-mr-sm",size:"sm"}),F($,{color:"negative",icon:"delete",label:"Delete Selected",onClick:A,disable:0===c.value.length,size:"sm"},null,8,["disable"])])])):J("",!0),l.value?(L(),H("div",ta,["table"===o.value?(L(),R(pe,{key:0,rows:u.value,columns:S.value,loading:d.value,pagination:h.value,"row-key":"id",selection:"multiple",selected:c.value,"onUpdate:selected":a[6]||(a[6]=e=>c.value=e),onRequest:N,class:"data-table"},{"body-cell-actions":U((e=>[F(fe,{props:e},{default:U((()=>[F($,{flat:"",dense:"",icon:"edit",color:"primary",onClick:a=>V(e.row),size:"sm"},null,8,["onClick"]),F($,{flat:"",dense:"",icon:"visibility",color:"info",onClick:a=>I(e.row),size:"sm"},null,8,["onClick"]),F($,{flat:"",dense:"",icon:"delete",color:"negative",onClick:a=>E(e.row),size:"sm"},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","pagination","selected"])):"cards"===o.value?(L(),H("div",oa,[(L(!0),H(G,null,Y(u.value,(e=>(L(),R(W,{key:e.id,class:M(["record-card",{selected:qe(e)}]),onClick:a=>(e=>{const a=c.value.findIndex((a=>a.id===e.id));a>-1?c.value.splice(a,1):c.value.push(e)})(e)},{default:U((()=>[F(ee,null,{default:U((()=>[B("div",ia,[B("h6",na,X(Se(e)),1),F(ne),F(ge,{flat:"",dense:"",icon:"more_vert"},{default:U((()=>[F(he,null,{default:U((()=>[F(re,{clickable:"",onClick:a=>V(e)},{default:U((()=>[F(se,{avatar:""},{default:U((()=>[F(r,{name:"edit"})])),_:1}),F(se,null,{default:U((()=>[...a[16]||(a[16]=[Z("Edit",-1)])])),_:1})])),_:2},1032,["onClick"]),F(re,{clickable:"",onClick:a=>I(e)},{default:U((()=>[F(se,{avatar:""},{default:U((()=>[F(r,{name:"visibility"})])),_:1}),F(se,null,{default:U((()=>[...a[17]||(a[17]=[Z("View",-1)])])),_:1})])),_:2},1032,["onClick"]),F(Q),F(re,{clickable:"",onClick:a=>E(e)},{default:U((()=>[F(se,{avatar:""},{default:U((()=>[F(r,{name:"delete",color:"negative"})])),_:1}),F(se,null,{default:U((()=>[...a[18]||(a[18]=[Z("Delete",-1)])])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)]),B("div",ra,[(L(!0),H(G,null,Y(ze(e),((e,a)=>{return L(),H("div",{key:a,class:"card-field"},[B("span",sa,X((l=a,l.replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))))+":",1),B("span",ua,X(e),1)]);var l})),128))])])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])):"json"===o.value?(L(),H("div",ca,[F(Re,{class:"fit"},{default:U((()=>[B("pre",da,X(JSON.stringify(u.value,null,2)),1)])),_:1})])):J("",!0)])):(L(),H("div",va,[F(r,{name:"table_chart",size:"80px",color:"grey-4"}),a[19]||(a[19]=B("h5",{class:"q-mt-md text-grey-6"},"Select a table to view data",-1)),a[20]||(a[20]=B("p",{class:"text-grey-5"},"Choose a table from the left panel to start managing your T3000 device data",-1))]))])]),F(le,{modelValue:v.value,"onUpdate:modelValue":a[10]||(a[10]=e=>v.value=e),maximized:b.value},{default:U((()=>[F(W,{style:{"min-width":"600px","max-width":"800px"}},{default:U((()=>[F(ee,{class:"dialog-header"},{default:U((()=>{var e;return[B("div",ma,[B("h6",ba,X("create"===m.value?"Create New":"Edit")+" "+X(null==(e=C())?void 0:e.label),1)]),F(ne),F($,{flat:"",dense:"",icon:b.value?"fullscreen_exit":"fullscreen",onClick:a[7]||(a[7]=e=>b.value=!b.value)},null,8,["icon"]),F($,{flat:"",dense:"",icon:"close",onClick:a[8]||(a[8]=e=>v.value=!1)})]})),_:1}),F(Q),F(ee,{class:"dialog-content"},{default:U((()=>[F(Ce,{onSubmit:oe,class:"record-form"},{default:U((()=>[(L(!0),H(G,null,Y(ie(),(e=>(L(),H("div",{key:e.name,class:"form-field"},["text"===e.type||"number"===e.type?(L(),R(K,{key:0,modelValue:p.value[e.name],"onUpdate:modelValue":a=>p.value[e.name]=a,label:e.label,type:e.type,required:e.required,outlined:"",class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue","label","type","required"])):"select"===e.type?(L(),R(be,{key:1,modelValue:p.value[e.name],"onUpdate:modelValue":a=>p.value[e.name]=a,options:e.options,label:e.label,required:e.required,outlined:"",class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue","options","label","required"])):"boolean"===e.type?(L(),R(te,{key:2,modelValue:p.value[e.name],"onUpdate:modelValue":a=>p.value[e.name]=a,label:e.label,class:"q-mb-md"},null,8,["modelValue","onUpdate:modelValue","label"])):J("",!0)])))),128))])),_:1})])),_:1}),F(Q),F(ae,{align:"right"},{default:U((()=>[F($,{flat:"",label:"Cancel",onClick:a[9]||(a[9]=e=>v.value=!1)}),F($,{color:"primary",label:"Save",onClick:oe,loading:f.value},null,8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue","maximized"])]})),_:1}))}},[["__scopeId","data-v-fc839b2c"]]);export{pa as default};

import{Q as e}from"./QChip.ec34d7aa.js";import{c as t,h as a,w as n,X as l,d as i,a as s,a7 as o,o as r,n as u,e as d,a1 as c,a8 as p,a9 as v,a3 as m,C as f,a4 as g,u as h,a2 as y,a5 as b,au as w,F as D,aa as _,aH as T,aJ as C}from"./index.1af70167.js";import{d as E}from"./dayjs.min.a4094c4f.js";import{C as O}from"./auto.4ae97206.js";import"./chartjs-adapter-date-fns.esm.6cd07d05.js";import{s as I}from"./RefConstant.1fa2cf9e.js";import{h as S}from"./T3Data.a3c00959.js";import{fa as k,f3 as A}from"./Hvac.003d6c4c.js";import{_ as R}from"./plugin-vue_export-helper.21dcd24c.js";import{Z as L,X as x,a9 as M,a8 as P}from"./index.9b5882c1.js";import{L as $,R as H,C as N,F as j}from"./ReloadOutlined.bd3c0da2.js";import{A as F}from"./AntdIcon.ab7b234d.js";import{C as z}from"./CheckOutlined.7c52724b.js";import{al as U,am as V}from"./index.93e747d4.js";var B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){W(e,t,a[t])}))}return e}function W(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var q=function(e,a){var n=Y({},e,a.attrs);return t(F,Y({},n,{icon:B}),null)};q.displayName="BarChartOutlined",q.inheritAttrs=!1;var G=q,K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832.6 191.4c-84.6-84.6-221.5-84.6-306 0l-96.9 96.9 51 51 96.9-96.9c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204l-96.9 96.9 51.1 51.1 96.9-96.9c84.4-84.6 84.4-221.5-.1-306.1zM446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l96.9-96.9-51.1-51.1-96.9 96.9c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l96.9-96.9-51-51-96.8 97zM260.3 209.4a8.03 8.03 0 00-11.3 0L209.4 249a8.03 8.03 0 000 11.3l554.4 554.4c3.1 3.1 8.2 3.1 11.3 0l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3L260.3 209.4z"}}]},name:"disconnect",theme:"outlined"};function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){Z(e,t,a[t])}))}return e}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var X=function(e,a){var n=J({},e,a.attrs);return t(F,J({},n,{icon:K}),null)};X.displayName="DisconnectOutlined",X.inheritAttrs=!1;var Q=X,ee={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"};function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){ae(e,t,a[t])}))}return e}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ne=function(e,a){var n=te({},e,a.attrs);return t(F,te({},n,{icon:ee}),null)};ne.displayName="ExportOutlined",ne.inheritAttrs=!1;var le=ne,ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"};function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){oe(e,t,a[t])}))}return e}function oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var re=function(e,a){var n=se({},e,a.attrs);return t(F,se({},n,{icon:ie}),null)};re.displayName="FileExcelOutlined",re.inheritAttrs=!1;var ue=re,de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){pe(e,t,a[t])}))}return e}function pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ve=function(e,a){var n=ce({},e,a.attrs);return t(F,ce({},n,{icon:de}),null)};ve.displayName="FileImageOutlined",ve.inheritAttrs=!1;var me=ve,fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){he(e,t,a[t])}))}return e}function he(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ye=function(e,a){var n=ge({},e,a.attrs);return t(F,ge({},n,{icon:fe}),null)};ye.displayName="LineChartOutlined",ye.inheritAttrs=!1;var be=ye,we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){_e(e,t,a[t])}))}return e}function _e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Te=function(e,a){var n=De({},e,a.attrs);return t(F,De({},n,{icon:we}),null)};Te.displayName="SettingOutlined",Te.inheritAttrs=!1;var Ce=Te,Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){Ie(e,t,a[t])}))}return e}function Ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Se=function(e,a){var n=Oe({},e,a.attrs);return t(F,Oe({},n,{icon:Ee}),null)};Se.displayName="SyncOutlined",Se.inheritAttrs=!1;var ke=Se;const Ae={digital:[{id:1,label:"Off/On",off:"Off",on:"On",direct:null},{id:2,label:"Close/Open",off:"Close",on:"Open",direct:null},{id:3,label:"Stop/Start",off:"Stop",on:"Start",direct:null},{id:4,label:"Disable/Enable",off:"Disable",on:"Enable",direct:null},{id:5,label:"Normal/Alarm",off:"Normal",on:"Alarm",direct:null},{id:6,label:"Normal/High",off:"Normal",on:"High",direct:null},{id:7,label:"Normal/Low",off:"Normal",on:"Low",direct:null},{id:8,label:"No/Yes",off:"No",on:"Yes",direct:null},{id:9,label:"Cool/Heat",off:"Cool",on:"Heat",direct:null},{id:10,label:"Unoccupy/Occupy",off:"Unoccupy",on:"Occupy",direct:null},{id:11,label:"Low/High",on:"Low",off:"High",direct:null},{id:12,label:"On/Off",on:"Off",off:"On",direct:!0},{id:13,label:"Open/Close",on:"Close",off:"Open",direct:!0},{id:14,label:"Start/Stop",on:"Stop",off:"Start",direct:!0},{id:15,label:"Enable/Disable",on:"Disable",off:"Enable",direct:!0},{id:16,label:"Alarm/Normal",on:"Normal",off:"Alarm",direct:!0},{id:17,label:"High/Normal",on:"Normal",off:"High",direct:!0},{id:18,label:"Low/Normal",on:"Normal",off:"Low",direct:!0},{id:19,label:"Yes/No",on:"No",off:"Yes",direct:!0},{id:20,label:"Heat/Cool",on:"Cool",off:"Heat",direct:!0},{id:21,label:"Occupy/Unoccupy",on:"Unoccupy",off:"Occupy",direct:!0},{id:22,label:"High/Low",on:"Low",off:"High",direct:!0}],analog:{input:[{id:0,unit:"",label:"Unused"},{id:1,unit:"Deg.C",label:"Y3K -40 to 150"},{id:2,unit:"Deg.F",label:"Y3K -40 to 300"},{id:3,unit:"Deg.C",label:"10K Type2"},{id:4,unit:"Deg.F",label:"10K Type2"},{id:5,unit:"Deg.C",label:"G3K -40 to 120"},{id:6,unit:"Deg.F",label:"G3K -40 to 250"},{id:7,unit:"Deg.C",label:"10K Type3"},{id:8,unit:"Deg.F",label:"10K Type3"},{id:9,unit:"Deg.C",label:"PT 1K -200 to 300"},{id:10,unit:"Deg.F",label:"PT 1K -200 to 570"},{id:11,unit:"Volts",label:"0.0 to 5.0"},{id:12,unit:"Amps",label:"0.0 to 100"},{id:13,unit:"ma",label:"4 to 20"},{id:14,unit:"psi",label:"4 to 20"},{id:15,unit:"counts",label:"Pulse Count (Slow 1Hz)"},{id:16,unit:"%",label:"0 to 100"},{id:17,unit:"%",label:"0 to 100"},{id:18,unit:"%",label:"0 to 100"},{id:19,unit:"Volts",label:"0.0 to 10.0"},{id:25,unit:"counts",label:"Pulse Count (Fast 100Hz)"},{id:26,unit:"Hz",label:"Frequency"},{id:27,unit:"%",label:"Humidty %"},{id:28,unit:"PPM",label:"CO2  PPM"},{id:29,unit:"RPM",label:"Revolutions Per Minute"},{id:30,unit:"PPB",label:"TVOC PPB"},{id:31,unit:"ug/m3",label:"ug/m3"},{id:32,unit:"#/cm3",label:"#/cm3"},{id:33,unit:"dB",label:"dB"},{id:34,unit:"Lux",label:"Lux"}],output:[{id:0,unit:"",label:"Unused"},{id:1,unit:"Volts",label:"0.0 to 10.0"},{id:2,unit:"%Open",label:"0.0 to 100"},{id:3,unit:"psi",label:"4 to 20"},{id:4,unit:"%",label:"0 to 100"},{id:5,unit:"%Cls",label:"0 to 100"},{id:6,unit:"ma",label:"4 to 20"},{id:7,unit:"%PWM",label:"0 to 100"},{id:8,unit:"%",label:"2 to 10"}],variable:[{id:0,unit:"Unused",label:"Unused"},{id:1,unit:"Deg.C",label:"Deg.C"},{id:2,unit:"Deg.F",label:"Deg.F"},{id:3,unit:"Feet per Min",label:"Feet per Min"},{id:4,unit:"Pascals",label:"Pascals"},{id:5,unit:"KPascals",label:"KPascals"},{id:6,unit:"lbs/sqr.inch",label:"lbs/sqr.inch"},{id:7,unit:"inches of WC",label:"inches of WC"},{id:8,unit:"Watts",label:"Watts"},{id:9,unit:"KWatts",label:"KWatts"},{id:10,unit:"KWH",label:"KWH"},{id:11,unit:"Volts",label:"Volts"},{id:12,unit:"KV",label:"KV"},{id:13,unit:"Amps",label:"Amps"},{id:14,unit:"ma",label:"ma"},{id:15,unit:"CFM",label:"CFM"},{id:16,unit:"Seconds",label:"Seconds"},{id:17,unit:"Minutes",label:"Minutes"},{id:18,unit:"Hours",label:"Hours"},{id:19,unit:"Days",label:"Days"},{id:20,unit:"Time",label:"Time"},{id:21,unit:"Ohms",label:"Ohms"},{id:22,unit:"%",label:"%"},{id:23,unit:"%RH",label:"%RH"},{id:24,unit:"p/min",label:"p/min"},{id:25,unit:"Counts",label:"Counts"},{id:26,unit:"%Open",label:"%Open"},{id:27,unit:"Kg",label:"Kg"},{id:28,unit:"L/Hour",label:"L/Hour"},{id:29,unit:"GPH",label:"GPH"},{id:30,unit:"GAL",label:"GAL"},{id:31,unit:"CF",label:"CF"},{id:32,unit:"BTU",label:"BTU"},{id:33,unit:"CMH",label:"CMH"}]}};const Re=new class{constructor(){this.dataReadiness=a("NOT_INITIALIZED"),this.lastUpdateTime=a(0),this.pendingRequests=new Map,this.dataFlowHistory=[],this.DEFAULT_TIMEOUT=3e4,this.MAX_RETRY_ATTEMPTS=3,this.MAX_HISTORY=50,this.initializeManager()}initializeManager(){var e;this.trackDataFlow("INIT",(null==(e=S.value.panelsData)?void 0:e.length)||0),n((()=>S.value.panelsData),((e,t)=>{this.handlePanelsDataChange(e,t)}),{deep:!0}),n((()=>S.value.loadingPanel),((e,t)=>{this.handleLoadingStateChange(e,t)})),this.assessCurrentDataState()}trackDataFlow(e,t,a,n){const l={timestamp:Date.now(),action:e,entryCount:t,source:a,details:n};this.dataFlowHistory.push(l),this.dataFlowHistory.length>this.MAX_HISTORY&&this.dataFlowHistory.shift()}handlePanelsDataChange(e,t){var a,n;const i=Date.now();this.lastUpdateTime.value=i;const s=(null==e?void 0:e.length)||0,o=(null==t?void 0:t.length)||0;this.trackDataFlow("UPDATE",s,this.detectChangeSource(),{previousCount:o,countDelta:s-o}),l.Debug("= T3DataManager: T3000_DATA UPDATED - Full data details:",{updateInfo:{timestamp:(new Date).toISOString(),source:this.detectChangeSource(),previousCount:o,newCount:s,countDelta:s-o},fullT3000Data:{panelsData:{length:s,data:e},panelsList:{length:(null==(a=S.value.panelsList)?void 0:a.length)||0,data:S.value.panelsList},panelsRanges:{length:(null==(n=S.value.panelsRanges)?void 0:n.length)||0,data:S.value.panelsRanges},loadingPanel:S.value.loadingPanel},dataAnalysis:{uniquePanels:Array.from(new Set((null==e?void 0:e.map((e=>e.pid)))||[])),sampleEntries:(null==e?void 0:e.slice(0,5).map((e=>({pid:e.pid,type:e.type,id:e.id,label:e.label,value:e.value,units:e.units}))))||[]}}),this.isDataComplete(e)&&(this.setDataReadiness("READY"),this.resolvePendingRequests())}detectChangeSource(){try{const e=(new Error).stack;return e?e.includes("WebViewClient")?"WebViewClient":e.includes("WebSocketClient")?"WebSocketClient":e.includes("IndexPage")?"IndexPage":e.includes("demoDeviceData")?"DemoData":"unknown":"unknown"}catch{return"unknown"}}handleLoadingStateChange(e,t){null!==e&&null===t?this.setDataReadiness("LOADING"):null===e&&null!==t&&this.isDataComplete(S.value.panelsData)&&this.setDataReadiness("READY")}setDataReadiness(e){this.dataReadiness.value,this.dataReadiness.value=e,"READY"===e?this.resolvePendingRequests():"ERROR"===e&&this.rejectPendingRequests("Data loading failed")}isDataComplete(e){if(!e||!Array.isArray(e))return!1;const t=e.length>0,a=null===S.value.loadingPanel;return t&&a}assessCurrentDataState(){const e=S.value.panelsData;null!==S.value.loadingPanel?this.setDataReadiness("LOADING"):this.isDataComplete(e)?this.setDataReadiness("READY"):this.setDataReadiness("NOT_INITIALIZED")}async waitForDataReady(e={}){const{timeout:t=this.DEFAULT_TIMEOUT,retryAttempts:a=this.MAX_RETRY_ATTEMPTS,specificEntries:n=[]}=e;if("READY"===this.dataReadiness.value){const e=await this.validateData(n);if(e.isValid)return e}return new Promise(((e,a)=>{const l=`req_${Date.now()}_${Math.random()}`,i=setTimeout((()=>{this.pendingRequests.delete(l),a(new Error(`Data not ready within ${t}ms timeout`))}),t);this.pendingRequests.set(l,{resolve:async()=>{clearTimeout(i),this.pendingRequests.delete(l);try{const t=await this.validateData(n);e(t)}catch(t){a(t)}},reject:e=>{clearTimeout(i),this.pendingRequests.delete(l),a(new Error(e))},timeout:i})}))}async validateData(e=[]){var t;const a=S.value.panelsData||[],n=Date.now();if(!Array.isArray(a))return{isValid:!1,timestamp:n,panelsCount:0,entriesCount:0};let l=!0;if(e.length>0)for(const i of e){if(!a.find((e=>{var t;return e.id===i||e.label===i||(null==(t=e.description)?void 0:t.includes(i))}))){l=!1;break}}return{isValid:l&&a.length>0,timestamp:n,panelsCount:(null==(t=S.value.panelsList)?void 0:t.length)||0,entriesCount:a.length}}async getEntry(e,t={}){if(!(await this.waitForDataReady({...t,specificEntries:[e]})).isValid)throw new Error(`Entry ${e} not available or invalid`);const a=S.value.panelsData.find((t=>{var a;return t.id===e||t.label===e||(null==(a=t.description)?void 0:a.includes(e))}));if(!a)throw new Error(`Entry ${e} not found in panelsData`);return a}async getEntryByPid(e,t,a={}){if(!(await this.waitForDataReady({...a,specificEntries:[e]})).isValid)throw new Error(`Entry ${e} not available or invalid`);const n=S.value.panelsData.filter((e=>e.pid===t));if(0===n.length)throw new Error(`No entries found with PID ${t}`);const l=n.find((t=>{var a;return t.id===e||t.label===e||(null==(a=t.description)?void 0:a.includes(e))}));if(!l)throw new Error(`Entry ${e} not found in PID ${t} filtered data`);return l}async getEntriesMatching(e,t={}){if(!(await this.waitForDataReady(t)).isValid)throw new Error("Data not available for filtering");return S.value.panelsData.filter(e)}resolvePendingRequests(){this.pendingRequests.forEach((e=>{e.resolve()})),this.pendingRequests.clear()}rejectPendingRequests(e){this.pendingRequests.forEach((t=>{t.reject(e)})),this.pendingRequests.clear()}getDataFlowHistory(){return[...this.dataFlowHistory]}getDataStateInfo(){var e;const t=S.value.panelsData||[];return{readiness:this.dataReadiness.value,entryCount:t.length,panelCount:(null==(e=S.value.panelsList)?void 0:e.length)||0,lastUpdate:this.lastUpdateTime.value,isLoading:null!==S.value.loadingPanel,pendingRequests:this.pendingRequests.size}}getReadinessState(){return this.dataReadiness.value}get isReady(){return"READY"===this.dataReadiness.value}get loadingProgress(){var e;const t=S.value.loadingPanel,a=(null==(e=S.value.panelsList)?void 0:e.length)||0;return null===t||0===a?100:Math.round((t+1)/a*100)}clearDataFlowHistory(){this.dataFlowHistory=[]}forceRefresh(){this.assessCurrentDataState()}destroy(){this.rejectPendingRequests("Manager destroyed"),this.dataFlowHistory=[],this.dataReadiness.value="NOT_INITIALIZED"}};function Le(){const e=a(!1),t=a(null);return{isLoading:e,error:t,getTrendlogHistory:async a=>{e.value=!0,t.value=null;try{const t=await fetch(`http://localhost:9103/api/t3_device/devices/${a.serial_number}/trendlogs/${a.trendlog_id}/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok)throw new Error(`API request failed: ${t.status}`);return await t.json()}catch(n){const e=n instanceof Error?n.message:"Failed to fetch trendlog history";return t.value=e,null}finally{e.value=!1}},saveRealtimeData:async e=>{try{return(await fetch("http://localhost:9103/api/t3_device/trendlog-data/realtime",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok}catch(t){return!1}},saveRealtimeBatch:async e=>{try{const t=await fetch("http://localhost:9103/api/t3_device/trendlog-data/realtime/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Batch save failed: ${t.status}`);return(await t.json()).rows_affected||0}catch(t){return 0}},getRecentData:async(e,t,a,n=100)=>{try{const l=new URLSearchParams({panel_id:t.toString(),limit:n.toString()});a&&a.length>0&&l.set("point_types",a.join(","));const i=await fetch(`http://localhost:9103/api/t3_device/devices/${e}/trendlog-data/recent?${l}`);if(!i.ok)throw new Error(`Failed to fetch recent data: ${i.status}`);return(await i.json()).data||[]}catch(l){return[]}},getDataStatistics:async(e,t)=>{try{const a=new URLSearchParams({panel_id:t.toString()}),n=await fetch(`http://localhost:9103/api/t3_device/devices/${e}/trendlog-data/stats?${a}`);if(!n.ok)throw new Error(`Failed to fetch statistics: ${n.status}`);return await n.json()}catch(a){return null}},getSmartTrendlogData:async e=>{try{const t=await fetch(`http://localhost:9103/devices/${e.serial_number}/trendlog-data/smart`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to fetch smart trendlog data: ${t.status}`);const a=await t.json();return{data:a.data||[],total_points:a.total_points||0,sources_used:a.sources_used||[],consolidation_applied:a.consolidation_applied||!1,has_historical_data:a.has_historical_data||!1}}catch(t){return null}},formatSocketDataForSave:(e,t,a)=>e&&Array.isArray(e.data)?e.data.map((e=>{var n,l,i;return{serial_number:t,panel_id:a,point_id:e.id||`${e.type||"UNK"}${e.index||0}`,point_index:e.index||0,point_type:e.type||"UNKNOWN",value:(null==(n=e.value)?void 0:n.toString())||"0",range_field:null==(l=e.range)?void 0:l.toString(),digital_analog:null==(i=e.digital_analog)?void 0:i.toString(),units:e.units}})):[]}}const xe={class:"top-controls-bar"},Me={class:"timeseries-container"},Pe={class:"left-panel"},$e={class:"control-section"},He={class:"data-series-header"},Ne={class:"header-line-1"},je={class:"data-source-indicator"},Fe={key:0,class:"source-badge realtime"},ze={key:1,class:"source-badge historical"},Ue={key:2,class:"source-badge error"},Ve={class:"header-line-2"},Be={class:"left-controls"},Ye={class:"auto-scroll-toggle"},We={class:"series-list"},qe={key:0,class:"series-empty-state"},Ge={class:"empty-state-content"},Ke={key:0,class:"empty-state-icon"},Je={key:1,class:"empty-state-icon"},Ze={key:2,class:"empty-state-text"},Xe={key:3,class:"empty-state-text"},Qe={key:4,class:"empty-state-subtitle"},et={key:5,class:"empty-state-subtitle"},tt=["onClick"],at={class:"series-info"},nt={class:"series-name-line"},lt={class:"series-name-container"},it={class:"series-name"},st={class:"series-inline-tags"},ot={class:"unit-info"},rt={class:"series-controls"},ut={key:0,class:"series-stats"},dt={class:"stat-item"},ct={class:"stat-value"},pt={class:"stat-item"},vt={class:"stat-value"},mt={class:"stat-item"},ft={class:"stat-value"},gt={class:"stat-item"},ht={class:"stat-value"},yt={class:"right-panel"},bt={class:"oscilloscope-container"},wt={class:"combined-analog-chart"},Dt=["id"],_t={key:0,class:"loading-overlay"},Tt={class:"custom-date-modal"},Ct={class:"quick-actions"},Et={key:0,class:"range-summary"},Ot={class:"range-text"};var It=R(i({__name:"TrendLogChart",props:{itemData:{default:null},title:{default:"Trend Log Chart"}},setup(i){const R=e=>({1:{name:"Output",category:"OUT"},2:{name:"Input",category:"IN"},3:{name:"Variable",category:"VAR"},4:{name:"Program",category:"PRG"},5:{name:"Controller",category:"CON"},6:{name:"Screen",category:"SCR"},7:{name:"Holiday",category:"HOL"},8:{name:"Schedule",category:"SCH"},9:{name:"Monitor",category:"MON"}}[e]||{name:`Type_${e}`,category:""}),F=e=>e.name||"Unknown",B=(e,t,a)=>{const n=S.value.panelsData,l=S.value.panelsRanges;if(!(null==n?void 0:n.length))return"";const i=R(t);if(!(null==i?void 0:i.category))return"";const s=`${i.category}${a+1}`,o=n.find((t=>String(t.pid)===String(e)&&t.id===s));if(!o||void 0===o.unit)return"";if(null==l?void 0:l.length){const t=l.find((t=>String(t.pid)===String(e)&&t.index===o.range));if("digital"===(null==t?void 0:t.type)&&(t.on||t.off))return`${t.off}/${t.on}`}let r=[];"IN"===i.category?r=Ae.analog.input:"OUT"===i.category?r=Ae.analog.output:"VAR"===i.category&&(r=Ae.analog.variable);const u=r.find((e=>e.id===o.unit));if(u)return u.unit||u.label;const d=Ae.digital.find((e=>e.id===o.unit));return d?`${d.off}/${d.on}`:""},Y=e=>{const t=Ae.digital.find((t=>t.id===e));return t?!1===t.direct?[t.on,t.off]:[t.off,t.on]:["LOW","HIGH"]},W=e=>new Date(e>1e10?e:1e3*e).toLocaleString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/(\d{4})-(\d{2})-(\d{2}), (\d{2}):(\d{2}):(\d{2})/,"$1-$2-$3 $4:$5:$6"),q=i,K=s((()=>q.itemData||I.value)),J=a("5m"),Z=a(1);a(1);const X=a(null),ee=a(null),te=a(null),ae=a(null),ne=a(!1),ie=a(!0),se=e=>{if(!e)return 6e4;const{hour_interval_time:t=0,minute_interval_time:a=0,second_interval_time:n=0}=e,l=3600*t+60*a+n;return l>0?Math.max(1e3*l,15e3):6e4},oe=s((()=>se(De.value))),re=a(!1),de=a(!0),ce=a(!1),pe=a(!1),ve=a(!1),fe=a("No data synced yet"),ge=Le(),he=a("realtime"),ye=a(!1),we=o(),De=a(null);a("connected"),a({visible:!1,message:""});const _e=a(new Set),Te=(e,t,a)=>{const n=S.value.panelsData;if(!(null==n?void 0:n.length))return"";const l=R(t);if(!(null==l?void 0:l.category))return"";const i=`${l.category}${a+1}`,s=n.find((t=>String(t.pid)===String(e)&&t.id===i));return s&&(s.label||s.command||s.fullLabel||s.description||s.id)||""},Ee=(e,t,a)=>{var n;const l=S.value.panelsData;if(!(null==l?void 0:l.length))return 1;const i=R(t);if(!(null==i?void 0:i.category))return 1;const s=`${i.category}${a+1}`,o=l.find((t=>String(t.pid)===String(e)&&t.id===s));return null!=(n=null==o?void 0:o.digital_analog)?n:1},Oe=["#FF0000","#0000FF","#00AA00","#FF8000","#AA00AA","#00AAAA","#CC6600","#AA0000","#0066AA","#AA6600","#6600AA","#006600","#FF6600","#0000AA"],Ie=a([]),Se=()=>{const e=(()=>{var e,t,a,n;const l=null==(t=null==(e=q.itemData)?void 0:e.t3Entry)?void 0:t.input,i=null==(n=null==(a=q.itemData)?void 0:a.t3Entry)?void 0:n.range;if(!(null==l?void 0:l.length)||!(null==i?void 0:i.length))return[];const s=Math.min(l.length,i.length);return 0===s?[]:Array.from({length:s},((e,t)=>{const a=l[t],{panel:n,point_type:s,point_number:o}=a,r=R(s),u=Ee(n,s,o),d=B(n,s,o),c=Te(n,s,o),p=0===u?"digital":"analog",v=c||`${r.category}${o+1} (P${n})`,m=c?`${r.category} - ${c}`:`${r.category}${o+1}`,f=`${n}${r.category}${o+1}`,g=`${r.category}${o+1}`;return{name:v,color:Oe[t%Oe.length],data:[],visible:!0,unit:d,isEmpty:!1,unitType:p,unitCode:i[t],itemType:f,prefix:r.category,description:m,pointType:s,pointNumber:o,panelId:n,id:g}}))})();e.forEach((e=>{const t=Ie.value.find((t=>t.id===e.id&&t.panelId===e.panelId));t&&t.data&&t.data.length>0&&(e.data=t.data)})),Ie.value=e};n(K,(e=>{e&&Se()}),{immediate:!0,deep:!0}),n(Ie,((e,t)=>{}),{deep:!0}),n((()=>q.itemData),((e,t)=>{}),{deep:!0}),n((()=>{var e;return null==(e=S.value)?void 0:e.panelsData}),((e,t)=>{if(e&&e.length>0){K.value&&Se();const t=e.flat();ua(t)}}),{deep:!0}),n(I,((e,t)=>{var a,n,i,s,o,r,u,d;l.Info("= TLChart: scheduleItemData changed",{hasNewData:!!e,hasOldData:!!t,newDataId:null==(a=null==e?void 0:e.t3Entry)?void 0:a.id,oldDataId:null==(n=null==t?void 0:t.t3Entry)?void 0:n.id,newDataPid:null==(i=null==e?void 0:e.t3Entry)?void 0:i.pid,oldDataPid:null==(s=null==t?void 0:t.t3Entry)?void 0:s.pid,idsChanged:(null==(o=null==e?void 0:e.t3Entry)?void 0:o.id)!==(null==(r=null==t?void 0:t.t3Entry)?void 0:r.id),pidsChanged:(null==(u=null==e?void 0:e.t3Entry)?void 0:u.pid)!==(null==(d=null==t?void 0:t.t3Entry)?void 0:d.pid),timestamp:(new Date).toISOString()})}),{deep:!0}),n(J,((e,t)=>{l.Info("= TLChart: timeBase changed - API Data Fetch Analysis",{oldTimeBase:t,newTimeBase:e,is5Minutes:"5m"===e,isCustom:"custom"===e,needsApiData:"5m"!==e&&"custom"!==e,currentDataSource:he.value,willTriggerApiCall:"5m"!==e&&"custom"!==e,timestamp:(new Date).toISOString()}),ha()}),{immediate:!1});const It=e=>({"5m":{stepMinutes:1,unit:"minute"},"10m":{stepMinutes:2,unit:"minute"},"30m":{stepMinutes:5,unit:"minute"},"1h":{stepMinutes:10,unit:"minute"},"4h":{stepMinutes:30,unit:"minute"},"12h":{stepMinutes:60,unit:"hour"},"1d":{stepMinutes:120,unit:"hour"},"4d":{stepMinutes:480,unit:"hour"}}[e]||{stepMinutes:10,unit:"minute"});s((()=>{const e=(()=>{var e,t,a,n;const l=60*((null==(t=null==(e=q.itemData)?void 0:e.t3Entry)?void 0:t.minute_interval_time)||0)+((null==(n=null==(a=q.itemData)?void 0:a.t3Entry)?void 0:n.second_interval_time)||0);return l>0?l:60*Zt(J.value)})();return{internalSec:e,roundedSec:(e=>{if(e<=5)return 5;if(e<=10)return 10;if(e<=15)return 15;if(e<=20)return 20;if(e<=30)return 30;if(e<=60)return 60;const t=e/60;return t<=5?300:t<=10?600:t<=15?900:t<=20?1200:t<=30?1800:60*Math.round(t/60)*60})(e)}})),a();const St=a(),kt=a([]);let At=null,Rt={},Lt=null;const xt=s((()=>{var e,t,a,n,l;return q.title||(null==(t=null==(e=q.itemData)?void 0:e.t3Entry)?void 0:t.description)||(null==(n=null==(a=q.itemData)?void 0:a.t3Entry)?void 0:n.label)||(null==(l=q.itemData)?void 0:l.title)||"Trend Log Chart"}));s((()=>Ie.value.reduce(((e,t)=>e+t.data.length),0)));const Mt=s((()=>Ie.value.filter((e=>e.visible)).length)),Pt=s((()=>({"5m":"Last 5 minutes","10m":"Last 10 minutes","30m":"Last 30 minutes","1h":"Last 1 hour","4h":"Last 4 hours","12h":"Last 12 hours","1d":"Last 1 day","4d":"Last 4 days"}[J.value]||""))),$t=["5m","10m","30m","1h","4h","12h","1d","4d"],Ht=s((()=>$t.indexOf(J.value)>0)),Nt=s((()=>{const e=$t.indexOf(J.value);return e>=0&&e<$t.length-1})),jt=s((()=>Ie.value.some((e=>e.visible)))),Ft=s((()=>Ie.value.some((e=>!e.visible)))),zt=s((()=>Ie.value.filter((e=>"analog"===e.unitType)))),Ut=s((()=>Ie.value.filter((e=>"digital"===e.unitType)))),Vt=s((()=>zt.value.length>0)),Bt=s((()=>Ut.value.length>0)),Yt=s((()=>zt.value.length)),Wt=s((()=>Ut.value.length)),qt=s((()=>zt.value.length>0&&zt.value.every((e=>e.visible)))),Gt=s((()=>Ut.value.length>0&&Ut.value.every((e=>e.visible)))),Kt=s((()=>zt.value.filter((e=>e.visible)))),Jt=s((()=>Ut.value.filter((e=>e.visible)))),Zt=e=>({"5m":1,"10m":1,"30m":2,"1h":5,"4h":15,"12h":30,"1d":60,"4d":240}[e]||1),Xt=a(0),Qt=()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0),a=new Date(t.getTime()+60*Xt.value*1e3),n=new Date(a.getTime()+6e4),l=da(J.value);return{min:new Date(n.getTime()-60*l*1e3).getTime(),max:n.getTime()}},ea=()=>{var e,t;return"ms-appx-web:"===window.location.protocol||void 0!==(null==(e=window.chrome)?void 0:e.webview)||void 0!==(null==(t=window.external)?void 0:t.sendMessage)?new k:A.WsClient},ta=async()=>{try{re.value=!0;const e=De.value;if(!e)return re.value=!1,[];const t=S.value.panelsData||[];let a=!1;if(a=t.length>0||await(async(e=1e4)=>{const t=Date.now();for(;Date.now()-t<e;){if((S.value.panelsData||[]).length>0)return!0;await new Promise((e=>setTimeout(e,200)))}return!1})(5e3),!a)return re.value=!1,[];const n=ea();if(!n)return[];ra(n);const l=S.value.panelsList||[],i=l.length>0?l[0].panel_number:1,s=(S.value.panelsData||[]).filter((e=>String(e.pid)===String(i)));if(!s)return[];let o=s;if(!Array.isArray(o)||0===o.length)return[];return await aa(n,e,{panelId:i,panelData:o})}catch(e){return[]}finally{re.value=!1}},aa=async(e,t,a)=>{var n;try{l.Info("ðŸ“¦ TrendLogChart: fetchAllItemsDataBatch called",{inputItemsCount:(null==(n=t.inputItems)?void 0:n.length)||0,panelId:a.panelId,timestamp:(new Date).toISOString()});const s=[],o=[];if(t.inputItems.forEach(((e,n)=>{const i=n,r=t.ranges[i]||0,u=na(e,a.panelData);if(u){const t=parseInt(u.index)||0,d=e.point_type;s.push({panelId:a.panelId,index:t,type:d}),o.push({inputItem:e,matchingDevice:u,rangeValue:r,itemIndex:i}),l.Info(`ðŸ“¦ Added item ${n} to batch request`,{deviceIndex:t,deviceType:d,panelId:a.panelId})}else l.Warn(`âš ï¸ No matching device found for item ${n}`),o.push(null)})),0===s.length)return l.Warn("âš ï¸ No valid items for batch request"),[];if(l.Info("ðŸ“¡ Sending BATCH GET_ENTRIES request",{itemCount:s.length,requestData:s}),e&&e.GetEntries)try{e.GetEntries(a.panelId,null,s),l.Info("ï¿½?BATCH GET_ENTRIES request sent successfully",{panelId:a.panelId,itemCount:s.length})}catch(i){l.Error("ï¿½?Error sending batch GET_ENTRIES request:",i)}const r=[];return o.forEach(((e,t)=>{if(e){const t=oa(e.matchingDevice,e.rangeValue);r.push([{timestamp:Date.now(),value:t.value}])}else r.push([{timestamp:Date.now(),value:0}])})),r}catch(i){return l.Error("ï¿½?Error in fetchAllItemsDataBatch:",i),[]}},na=(e,t)=>{const a=ia(e.point_type,e.point_number),n=t.find((e=>e.id===a));return n||(l.Warn("= TLChart: Device not found in panelsData",{deviceId:a}),null)},la=e=>e>=1e3?e/1e3:e,ia=(e,t)=>`${sa(e)}${t+1}`,sa=e=>{switch(e-1){case 0:return"OUT";case 1:return"IN";case 2:return"VAR";case 3:return"PID";case 4:return"SCH";case 5:return"HOL";case 6:return"PRG";case 7:return"TBL";case 8:return"DMON";case 9:return"AMON";case 10:return"GRP";case 11:return"AY";case 12:return"ALARMM";case 13:return"UNIT";case 14:return"USER_NAME";case 15:return"ALARMS";case 16:return"WR_TIME";case 17:return"AR_Y";default:return""}},oa=(e,t)=>{const a=((e,t)=>{if(e&&void 0!==e.digital_analog)return 1===e.digital_analog;const a=0===t;return e&&e.control,a})(e,t),n=((e,t)=>{let a;if(t)a=la(parseFloat(e.value)||0);else if("OUT1"===e.id||"OUT2"===e.id){const t=la(parseFloat(e.control)||0),n=la(parseFloat(e.value)||0),l=la(parseFloat(e.auto_manual)||0);a=n>0?n:l>0?l:t}else a=la(parseFloat(e.control)||0);return a})(e,a);if(a){let t;t=n>1e3?n/1e3:n;const a={0:"",31:"Â°C",32:"Â°F",33:"ft/min",34:"Pa",35:"kPa",36:"psi",37:"inWC",38:"W",39:"kW",40:"kWh",41:"V",42:"kV",43:"A",44:"mA",45:"CFM",46:"s",47:"min",48:"h",49:"days",50:"time",51:"Î©",52:"%",53:"%RH",54:"p/min",55:"counts",56:"%Open",57:"kg",58:"L/h",59:"GPH",60:"gal",61:"ftÂ³",62:"BTU",63:"mÂ³/h"}[e.range]||"";return{value:t,displayValue:`${t.toFixed(2)}`,unit:a}}{const t=Y(e.range);return{value:n,displayValue:n>0?`1 (${t[1]})`:`0 (${t[0]})`,unit:""}}};window.testTimeSeriesCommunication=async()=>{var e,t;const a=ea();if(a){ra(a),l.Info("ï¿½?TrendLogModal: Test 2 - Response handler setup complete");try{const n={panelId:(null==(t=null==(e=S.value.panelsList)?void 0:e[0])?void 0:t.panel_number)||1,index:1,type:"IN"};if(a.GetEntries){a.GetEntries(void 0,void 0,[n])}setTimeout((()=>{l.Info("ï¿½?TrendLogModal: Test 3 - Timeout check (5 seconds elapsed)")}),5e3)}catch(n){l.Error("ï¿½?TrendLogModal: Test 3 - Error sending request:",n)}}else l.Error("ï¿½?TrendLogModal: Cannot proceed - no data client available")};const ra=e=>{if(!e)return void l.Error("No dataClient provided to setupGetEntriesResponseHandlers");const t=e.HandleGetEntriesRes;e.HandleGetEntriesRes=a=>{try{if(a.data&&Array.isArray(a.data)){const e=a.data.filter((e=>e&&"object"==typeof e&&e.hasOwnProperty("value")&&null!==e.value&&void 0!==e.value&&e.id));e.length>0&&ua(e)}}catch(n){l.Error("Error processing GET_ENTRIES response:",n)}if(t&&"function"==typeof t)try{t.call(e,a)}catch(n){l.Error("Error calling original handler:",n)}}},ua=e=>{var t,a;if(!(null==(t=Ie.value)?void 0:t.length)||!Array.isArray(e)||!e.length)return void l.Debug("ðŸ“ˆ TrendLogChart: No data to process",{hasSeriesConfig:!!(null==(a=Ie.value)?void 0:a.length),dataItemsCount:(null==e?void 0:e.length)||0});const n=new Date;let i=0,s=0;Ie.value.forEach(((t,a)=>{if(!t.id||!t.panelId)return l.Debug(`âš ï¸ Series ${a} missing id or panelId`,{seriesName:t.name,hasId:!!t.id,hasPanelId:!!t.panelId}),void s++;const o=e.find((e=>e.id===t.id&&e.pid===t.panelId));if(!o)return l.Debug(`No match found for series ${t.name}`,{searchingFor:{id:t.id,panelId:t.panelId},seriesIndex:a}),void s++;let r;r=1===o.digital_analog?o.value:Math.random()>.5?1:0;const u={timestamp:n.getTime(),value:la(r||0),id:o.id,type:o.type,digital_analog:o.digital_analog||1,description:o.description||o.label||`Point ${o.id}`};t.data=t.data||[],t.data.push(u),t.data.length>100&&(t.data=t.data.slice(-100)),o.description&&!t.description&&(t.description=o.description),o.label&&t.name===t.description&&(t.name=o.label),i++,l.Debug(`âœ… Matched series ${t.name}`,{matchedItem:{id:o.id,pid:o.pid,digital_analog:o.digital_analog,rawValue:1===o.digital_analog?o.value:o.control,scaledValue:r}})})),l.Debug("ðŸ“Š TrendLogChart: Data processing complete",{matched:i,unmatched:s,totalSeries:Ie.value}),At||Object.keys(Rt).length>0?ha():l.Debug("âš ï¸ Chart instances not available for update")},da=e=>({"5m":5,"10m":10,"30m":30,"1h":60,"4h":240,"12h":720,"1d":1440,"4d":5760}[e]||60),ca=async()=>{var e,t,a,n;l.Info("= TLChart: Starting data initialization for 14 panel items",{currentDataSeriesLength:Ie.value.length,hasMonitorConfig:!!De.value,timeBase:J.value}),he.value="realtime";const i=De.value;if(i&&i.inputItems&&i.inputItems.length>0){if(Ie.value.length>0&&Ie.value.some((e=>e.data.length>0)))return;l.Info("= TLChart: Real T3000 data source detected:",{totalInputItems:i.inputItems.length,monitorId:i.id});try{re.value=!0;const e=await ta();if(e&&e.length>0)return await(async()=>{const e=De.value;if(e)try{const t=await ta();if(!t.some((e=>e.length>0)))return void(Ie.value=[]);const a=[];for(let n=0;n<e.inputItems.length;n++){const i=e.inputItems[n],s=R(i.point_type),o=e.ranges[n]||0,r=t[n]||[];if(0===r.length)continue;const u=s.category,d=Te(i.panel,i.point_type,i.point_number),c=d||`${i.point_number+1} (P${i.panel})`,p=d||`${i.point_number+1}`,v=Ee(i.panel,i.point_type,i.point_number),m=0===v;let f,g;l.Info("= TLChart: Series generation - Digital/Analog analysis",{inputItemIndex:n,panelId:i.panel,pointType:i.point_type,pointNumber:i.point_number,digitalAnalog:v,isDigital:m}),m?(f="digital",g=B(i.panel,i.point_type,i.point_number)):(f="analog",g=B(i.panel,i.point_type,i.point_number)),l.Info("= TLChart: Series generation - Unit determination result",{unitType:f,unitSymbol:g});const h={name:c,color:`hsl(${360*a.length/e.inputItems.length}, 70%, 50%)`,data:r,visible:!0,isEmpty:!1,unit:g,unitType:f,unitCode:o,itemType:s.name,prefix:u,description:p};a.push(h)}l.Info("= TLChart: initializeRealDataSeries updating dataSeries",{previousSeriesCount:Ie.value.length,newSeriesCount:a.length,newSeriesNames:a.map((e=>e.name)),timestamp:(new Date).toISOString()}),Ie.value=a,fe.value=(new Date).toLocaleTimeString()}catch(t){l.Error("= TLChart: Error initializing real data series:",t),l.Warn("= TLChart: Setting connection error state - chart will remain empty"),ye.value=!0,Ie.value=[]}else Ie.value=[]})(),re.value=!1,he.value="realtime",l.Info("= TLChart: Real-time data initialization completed for 14 panel items"),ha(),void u((()=>{ha()}));l.Warn("= TLChart: No real-time data available - setting connection error"),ye.value=!0,Ie.value=[],re.value=!1}catch(s){l.Error("= TLChart: Failed to initialize real data series:",s),ye.value=!0,Ie.value=[],re.value=!1}}else l.Info("ðŸ“Š Empty State Configuration:",{configExists:!!i,hasInputItems:!!(null==i?void 0:i.inputItems),inputItemsLength:(null==(e=null==i?void 0:i.inputItems)?void 0:e.length)||0,scheduleDataExists:!!K.value,scheduleId:null==(a=null==(t=K.value)?void 0:t.t3Entry)?void 0:a.id,panelsDataLength:(null==(n=S.value.panelsData)?void 0:n.length)||0,dataType:"NO_DATA_AVAILABLE"}),ye.value=!0,Ie.value=[],re.value=!1;0!==Ie.value.length?ye.value?l.Info("ðŸ“Š TrendLogChart: Skipping data generation - connection error (should show empty chart)"):(l.Info("ðŸ“Š TrendLogChart: Mock/demo data generation removed - chart will only show real data"),ha()):l.Info("ðŸ“Š TrendLogChart: No data series available - maintaining empty state",{dataSeriesLength:Ie.value.length,hasMonitorConfig:!!De.value})},pa=async()=>{if(!ie.value)return;if(0===Ie.value.length)return;const e=De.value;if(e&&e.inputItems&&0!==e.inputItems.length){try{await(async e=>{try{const t=S.value.panelsList||[],a=t.length>0?t[0].panel_number:1,n=(S.value.panelsData||[]).filter((e=>String(e.pid)===String(a)));if(!n||0===n.length)return void l.Debug("GET_ENTRIES Batch Request -> No panel data available");const i=ea();if(!i)return void l.Debug("GET_ENTRIES Batch Request -> No data client available");const s=[];if(e.inputItems.forEach(((e,t)=>{const l=na(e,n);if(l){const t=parseInt(l.index)||0,n=e.point_type;s.push({panelId:a,index:t,type:n})}})),l.Debug("GET_ENTRIES Batch Request -> Sending periodic batch:",{itemCount:s.length,panelId:a,batchSample:s.slice(0,3),timestamp:(new Date).toISOString()}),0===s.length)return void l.Debug("GET_ENTRIES Batch Request -> No valid items for batch request");i.GetEntries?i.GetEntries(a,null,s):l.Error("GET_ENTRIES Batch Request -> ERROR: GetEntries method not available")}catch(t){l.Error("GET_ENTRIES Batch Request -> ERROR in sendBatchGetEntriesRequest:",t)}})(e),fe.value=(new Date).toLocaleTimeString(),ye.value&&(l.Info("TrendLogChart: Auto-recovering from connection error - batch request sent successfully"),ye.value=!1)}catch(t){l.Warn("TrendLogChart: Failed to send batch request, setting connection error:",t),ye.value=!0}ha()}},va=()=>{ma(),fa()},ma=()=>{if(!St.value)return;if(0===St.value.offsetWidth||0===St.value.offsetHeight)return void setTimeout((()=>ma()),100);const e=St.value.getContext("2d");if(e)try{At&&At.destroy();At=new O(e,{type:"line",data:{datasets:[]},options:{responsive:!0,maintainAspectRatio:!1,animation:!1,elements:{line:{borderWidth:2,skipNull:!1}},layout:{padding:{left:10,right:20,top:10,bottom:10}},interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!0,position:"top",labels:{color:"#000000",font:{size:11,family:"Inter, Helvetica, Arial, sans-serif"},usePointStyle:!0,pointStyle:"line"}},tooltip:{backgroundColor:"#ffffff",titleColor:"#000000",bodyColor:"#000000",borderColor:"#d9d9d9",borderWidth:1,cornerRadius:4,displayColors:!0,usePointStyle:!0,callbacks:{title:e=>{const t=e[0].parsed.x;return"number"==typeof t&&t>1e9?W(t):new Date(t).toLocaleString()},label:e=>{const t=Kt.value.find((t=>t.name===e.dataset.label));if(!t)return`${e.dataset.label}: ${e.parsed.y}`;const a=t.description||t.prefix||e.dataset.label,n=t.unit||"";return`${a}: ${e.parsed.y.toFixed(2)}${n}`}}}},scales:{x:{type:"time",display:!0,grid:{color:"#e0e0e0",display:!0,lineWidth:1},ticks:{color:"#595959",font:{size:11,family:"Inter, Helvetica, Arial, sans-serif"},maxRotation:0,minRotation:0,maxTicksLimit:14,autoSkip:!1}},y:{grid:{color:"#e0e0e0",display:!0,lineWidth:1},ticks:{color:"#595959",font:{size:11,family:"Inter, Helvetica, Arial, sans-serif"},padding:8}}}}})}catch(t){}},fa=()=>{Object.values(Rt).forEach((e=>{e.destroy()})),Rt={},Jt.value.forEach(((e,t)=>{const a=kt.value[t];if(!a)return;const n=a.getContext("2d");if(n)try{const a=((e,t=!1)=>{const a=Y(e.unitCode||1);return{type:"line",data:{datasets:[]},options:{responsive:!0,maintainAspectRatio:!1,animation:!1,elements:{line:{borderWidth:2,skipNull:!1}},layout:{padding:{left:10,right:20,top:5,bottom:5}},interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#ffffff",titleColor:"#000000",bodyColor:"#000000",borderColor:"#d9d9d9",borderWidth:1,cornerRadius:4,displayColors:!0,usePointStyle:!0,callbacks:{title:e=>{const t=e[0].parsed.x;return"number"==typeof t&&t>1e9?W(t):new Date(t).toLocaleString()},label:t=>{const n=1===t.parsed.y?1:0,l=a[n];return`${e.name}: ${l}`}}}},scales:{x:{type:"time",display:!0,grid:{color:"#e0e0e0",display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0},ticks:{display:!0,color:t?"#595959":"transparent",font:{size:10,family:"Inter, Helvetica, Arial, sans-serif"},maxRotation:0,minRotation:0}},y:{min:-.5,max:1.5,display:!0,grid:{color:"#F0F0F0",display:!0,lineWidth:.3},ticks:{display:!0,color:"#595959",font:{size:8,family:"Inter, Helvetica, Arial, sans-serif"},padding:5,maxTicksLimit:2,callback:function(e){return e>.5?a[1]:a[0]}}}}}}})(e,t===Jt.value.length-1);Rt[t]=new O(n,a)}catch(l){}}))},ga=()=>{At&&(At.destroy(),At=null),Object.values(Rt).forEach((e=>{e.destroy()})),Rt={}},ha=()=>{ya(),ba()},ya=()=>{var e,t;if(!At)return;const a=Kt.value.filter((e=>e.data.length>0));if(At.data.datasets=a.map((e=>{const t=e.data.slice().sort(((e,t)=>e.timestamp-t.timestamp)).map((e=>({x:e.timestamp,y:e.value})));return{label:e.name,data:t,borderColor:e.color,backgroundColor:e.color+"20",borderWidth:2,fill:!1,tension:pe.value?.4:0,pointRadius:ve.value?3:0,pointHoverRadius:6,pointBackgroundColor:e.color,pointBorderColor:"#fff",pointBorderWidth:2,pointStyle:"circle",spanGaps:!1}})),null==(e=At.options.scales)?void 0:e.x){const e=At.options.scales.x,t=It(J.value),a=(J.value,"dd/MM HH:mm");e.time={unit:t.unit,stepSize:t.stepMinutes,displayFormats:{minute:a,hour:a,day:"dd/MM HH:mm"},minUnit:"second"};const n={"5m":6,"10m":6,"30m":7,"1h":7,"4h":9,"12h":13,"1d":13,"4d":13};e.ticks={...e.ticks,maxTicksLimit:n[J.value]||7,maxRotation:0,minRotation:0,includeBounds:!0},e.grid={color:de.value?"#e0e0e0":"transparent",display:de.value,lineWidth:1};const l=Qt();e.min=l.min,e.max=l.max}if(null==(t=At.options.scales)?void 0:t.y){At.options.scales.y.grid={color:de.value?"#e0e0e0":"transparent",display:de.value,lineWidth:1}}At.update("none")},ba=()=>{Jt.value.forEach(((e,t)=>{var a;const n=Rt[t];if(!n||0===e.data.length)return;const l=e.data.slice().sort(((e,t)=>e.timestamp-t.timestamp)).map((e=>({x:e.timestamp,y:e.value>.5?1.2:.2})));if(n.data.datasets=[{label:e.name,data:l,borderColor:e.color,backgroundColor:"transparent",borderWidth:2,fill:!1,stepped:"middle",pointRadius:0,pointHoverRadius:4,spanGaps:!1}],null==(a=n.options.scales)?void 0:a.x){const e=n.options.scales.x,t=It(J.value),a=(J.value,"dd/MM HH:mm");e.time={unit:t.unit,stepSize:t.stepMinutes,displayFormats:{minute:a,hour:a,day:"dd/MM HH:mm"},minUnit:"second"};const l={"5m":6,"10m":6,"30m":7,"1h":7,"4h":9,"12h":13,"1d":13,"4d":13};e.ticks={...e.ticks,maxTicksLimit:l[J.value]||7,maxRotation:0,minRotation:0,includeBounds:!0},e.grid={color:de.value?"#e0e0e0":"transparent",display:de.value,lineWidth:.5};const i=Qt();e.min=i.min,e.max=i.max}n.update("none")}))},wa=async()=>{if(ie.value)return;const e=da(J.value);Xt.value-=e,await ca()},Da=async()=>{if(ie.value)return;const e=da(J.value);Xt.value+=e,await ca()},_a=()=>{const e=$t.indexOf(J.value);if(e>0){const t=$t[e-1];J.value=t,ie.value="5m"===t,Oa()}},Ta=()=>{const e=$t.indexOf(J.value);if(e>=0&&e<$t.length-1){const t=$t[e+1];J.value=t,ie.value="5m"===t,Oa()}},Ca=()=>{J.value="5m",Xt.value=0,ie.value=!0,Oa()},Ea=e=>{Z.value=e;const t={1:{showGrid:!0,showLegend:!1,smoothLines:!1,showPoints:!1,title:"Standard View",description:"Grid lines enabled for comprehensive data analysis"},2:{showGrid:!1,showLegend:!1,smoothLines:!0,showPoints:!1,title:"Clean View",description:"Minimalist display with smooth lines for focused viewing"},3:{showGrid:!0,showLegend:!1,smoothLines:!0,showPoints:!1,title:"Detailed View",description:"All features enabled for maximum data visualization detail"}}[e];t&&(de.value=t.showGrid,ce.value=t.showLegend,pe.value=t.smoothLines,ve.value=t.showPoints,(At||Object.keys(Rt).length>0)&&(ga(),va()))},Oa=async()=>{if("custom"!==J.value)if(Xt.value=0,"5m"!==J.value){const e=ja(J.value),t=Fa();t.sn&&null!==t.panel_id&&null!==t.trendlog_id?await za(t,e):await ca()}else await ca()},Ia=()=>{if(X.value&&ee.value&&te.value&&ae.value){const e=X.value.hour(te.value.hour()).minute(te.value.minute()).second(0).millisecond(0),t=ee.value.hour(ae.value.hour()).minute(ae.value.minute()).second(0).millisecond(0);if(t.isBefore(e))return void U.error("End time must be after start time");X.value=e,ee.value=t,J.value="custom",ie.value=!1,ne.value=!1,(async()=>{if("custom"===J.value&&X.value&&ee.value){const e=Fa();if(Math.floor((ee.value.valueOf()-X.value.valueOf())/36e5),e.sn&&null!==e.panel_id&&null!==e.trendlog_id){const t={startTime:X.value.toISOString(),endTime:ee.value.toISOString(),durationMinutes:Math.floor((ee.value.valueOf()-X.value.valueOf())/6e4),expectedDataPoints:Math.floor((ee.value.valueOf()-X.value.valueOf())/15e3),timebaseLabel:`Custom Range (${X.value.format("DD/MM HH:mm")} - ${ee.value.format("DD/MM HH:mm")})`};await za(e,t)}else await ca();(At||Object.keys(Rt).length>0)&&(ga(),va())}})(),U.success("Custom date range applied successfully")}else U.error("Please select both start and end date/time")},Sa=()=>{ne.value=!1},ka=e=>{const t=E();switch(e){case"today":X.value=t.startOf("day"),ee.value=t.endOf("day"),te.value=E().hour(0).minute(0),ae.value=E().hour(23).minute(59);break;case"yesterday":const e=t.subtract(1,"day");X.value=e.startOf("day"),ee.value=e.endOf("day"),te.value=E().hour(0).minute(0),ae.value=E().hour(23).minute(59);break;case"thisWeek":X.value=t.startOf("week"),ee.value=t.endOf("week"),te.value=E().hour(0).minute(0),ae.value=E().hour(23).minute(59);break;case"lastWeek":const a=t.subtract(1,"week");X.value=a.startOf("week"),ee.value=a.endOf("week"),te.value=E().hour(0).minute(0),ae.value=E().hour(23).minute(59)}},Aa=()=>{if(X.value&&ee.value&&te.value&&ae.value){const e=X.value.hour(te.value.hour()).minute(te.value.minute()),t=ee.value.hour(ae.value.hour()).minute(ae.value.minute());return`${e.format("DD/MM/YYYY HH:mm")} - ${t.format("DD/MM/YYYY HH:mm")}`}return""},Ra=e=>{var t,a;l.Info("ðŸ”„ TrendLogModal: Auto Scroll toggle - "+(e?"ON":"OFF"),{currentDataSeriesLength:Ie.value.length,hasRealData:!!(null==(a=null==(t=De.value)?void 0:t.inputItems)?void 0:a.length)}),e?(Xt.value=0,ca(),La()):(xa(),l.Info("ðŸ§¹ TrendLogModal: Clearing monitor config and data series on Auto Scroll OFF"),De.value=null,Ie.value=[])},La=()=>{Lt&&clearInterval(Lt);const e=De.value,t=(null==e?void 0:e.dataIntervalMs)||oe.value,a=new Date,n=a.toLocaleTimeString()+"."+a.getMilliseconds().toString().padStart(3,"0");if(l.Info(`ðŸ”„ TrendLogModal: Starting real-time updates [${n}] with detailed interval analysis:`,{"monitorConfig.value exists":!!De.value,monitorConfigData:e,"monitorConfigData?.dataIntervalMs":null==e?void 0:e.dataIntervalMs,"updateInterval.value (computed)":oe.value,"actualInterval selected":t,intervalSeconds:t/1e3,intervalMinutes:t/6e4,"Raw monitorConfig":De.value}),!(null==e?void 0:e.dataIntervalMs)){l.Info("ðŸ“Š TrendLogModal: Using computed updateInterval, calculating from monitorConfig:");const e=se(De.value);l.Info("ðŸ“Š TrendLogModal: Calculated interval result:",e)}l.Info(`ï¿½?TrendLogModal: Setting up polling timer [${n}] - Next request expected at: ${new Date(Date.now()+t).toLocaleTimeString()}`),Lt=setInterval(pa,t)},xa=()=>{Lt&&(clearInterval(Lt),Lt=null)},Ma=({key:e})=>{var t;"custom"!==(t=e)?(J.value=t,ie.value="5m"===t,Oa()):ne.value=!0},Pa=({key:e})=>{switch(e){case"grid":case"json":Ja()}},$a=({key:e})=>{switch(e){case"enable-all":Ie.value.forEach((e=>{e.visible=!0})),ha();break;case"disable-all":Ie.value.forEach((e=>{e.visible=!1})),ha()}},Ha=({key:e})=>{switch(e){case"png":Ga();break;case"jpg":Ka();break;case"csv":qa();break;case"json":Ja()}},Na=({key:e})=>{switch(e){case"toggle-analog":(()=>{const e=!qt.value;Ie.value.forEach((t=>{"analog"===t.unitType&&(t.visible=e)})),ha()})();break;case"toggle-digital":(()=>{const e=!Gt.value;Ie.value.forEach((t=>{"digital"===t.unitType&&(t.visible=e)})),ha()})()}},ja=e=>{const t=E();let a,n,l;const i={"5m":{duration:5,label:"5 minutes"},"10m":{duration:10,label:"10 minutes"},"30m":{duration:30,label:"30 minutes"},"1h":{duration:60,label:"1 hour"},"4h":{duration:240,label:"4 hours"},"12h":{duration:720,label:"12 hours"},"1d":{duration:1440,label:"1 day"},"4d":{duration:5760,label:"4 days"}}[e]||{duration:60,label:"1 hour"};l=i.duration;const s=e=>{const t=e.toDate();return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`};n=s(t),a=s(t.subtract(l,"minute"));return{startTime:a,endTime:n,durationMinutes:l,expectedDataPoints:Math.floor(60*l/15),timebaseLabel:i.label}},Fa=()=>{var e;let t=null,a=null,n=null;try{we.query.sn&&(t=parseInt(we.query.sn)),we.query.panel_id&&(a=parseInt(we.query.panel_id)),we.query.trendlog_id&&(n=parseInt(we.query.trendlog_id))}catch(l){}if(null==(e=q.itemData)?void 0:e.t3Entry){const e=q.itemData.t3Entry;if(null===a&&(a=e.pid||null),null===n&&e.id&&"string"==typeof e.id){const t=e.id.match(/MON(\d+)|TRL(\d+)/i);n=t?parseInt(t[1]||t[2]):null}}return!t&&S.value.panelsList&&S.value.panelsList.length>0&&(t=S.value.panelsList[0].serial_number),!a&&S.value.panelsList&&S.value.panelsList.length>0&&(a=S.value.panelsList[0].panel_number),{sn:t,panel_id:a,trendlog_id:n}},za=async(e,t)=>{try{re.value=!0,he.value="api",ie.value=!1;const a=(()=>{const e=[];return Ie.value&&0!==Ie.value.length?(Ie.value.forEach(((t,a)=>{try{const n=t.itemType||`${Fa().panel_id}VAR${a+1}`,l=n.match(/^(\d+)/),i=l?parseInt(l[1]):Fa().panel_id||2;let s,o,r;if(n.includes("Input")){s="INPUT";const e=n.match(/Input(\d+)$/);o=e?parseInt(e[1])-1:a}else if(n.includes("Output")){s="OUTPUT";const e=n.match(/Output(\d+)$/);o=e?parseInt(e[1])-1:a}else if(n.includes("VAR")){s="VARIABLE";const e=n.match(/VAR(\d+)$/);o=e?parseInt(e[1])-1:a}else if(n.includes("HOL")){s="MONITOR";const e=n.match(/HOL(\d+)$/);o=e?parseInt(e[1])-1:a}else s="VARIABLE",o=a;r="INPUT"===s?`IN${o+1}`:"OUTPUT"===s?`OUT${o+1}`:"VARIABLE"===s?`VAR${o+1}`:"MONITOR"===s?`HOL${o+1}`:`VAR${o+1}`,e.push({point_id:r,point_type:s,point_index:o,panel_id:i})}catch(n){const t=Fa();e.push({point_id:`VAR${a+1}`,point_type:"VARIABLE",point_index:a,panel_id:t.panel_id||2})}})),e):e})(),n={serial_number:e.sn,panel_id:e.panel_id,trendlog_id:e.trendlog_id.toString(),start_time:t.startTime,end_time:t.endTime,limit:Math.min(2*t.expectedDataPoints,5e3),point_types:["INPUT","OUTPUT","VARIABLE","MONITOR"],specific_points:a},l=await ge.getTrendlogHistory(n);if(l&&l.data&&l.data.length>0){const e=Ua(l.data,t);Ie.value=e,ha(),fe.value=E().format("HH:mm:ss")}else ye.value=!0,Ie.value=[],await ca()}catch(a){ye.value=!0,Ie.value=[],V.error({message:"Historical Data Error",description:`Failed to load historical data: ${a instanceof Error?a.message:"Unknown error"}`,duration:4.5}),await ca()}finally{re.value=!1}},Ua=(e,t)=>{const a=Ie.value||[],n=new Map;e.forEach((e=>{const t=`${e.point_type}_${e.point_id}`;n.has(t)||n.set(t,[]),n.get(t).push(e)}));const l=[],i=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#F1948A","#85C1E9","#F4D03F"];return a.forEach(((e,t)=>{let a,s;if(n.forEach(((n,l)=>{if(a)return;const[i,o]=l.split("_");if(e.itemType&&e.itemType.includes(o))return a=n,void(s=l);if(e.name.includes(o))return a=n,void(s=l);if(e.prefix===i){if(o===`${"INPUT"===i?"IN":"OUTPUT"===i?"OUT":"VARIABLE"===i?"VAR":"UNK"}${t+1}`)return a=n,void(s=l)}})),a&&s){n.delete(s),a.sort(((e,t)=>new Date(e.time).getTime()-new Date(t.time).getTime()));const o=a.map((e=>({timestamp:new Date(e.time).getTime(),value:"number"==typeof e.value?e.value:parseFloat(e.value)||0}))),r={name:e.name,color:e.color||i[t%i.length],data:o,visible:!1!==e.visible,unit:e.unit||"",unitType:e.unitType,unitCode:e.unitCode,itemType:e.itemType,prefix:e.prefix,description:e.description};l.push(r)}else{const a={name:e.name,color:e.color||i[t%i.length],data:[],visible:!1!==e.visible,unit:e.unit||"",unitType:e.unitType,unitCode:e.unitCode,itemType:e.itemType,prefix:e.prefix,description:e.description,isEmpty:!0};l.push(a)}})),l},Va=(e,t)=>{if(0===e.length)return"N/A";const a=e[e.length-1].value;if("digital"===(null==t?void 0:t.unitType)){const e=1===a?1:0;return`${Y(t.unitCode||1)[e]} (${a})`}{const e=(null==t?void 0:t.unit)||"";return a.toFixed(2)+e}},Ba=(e,t)=>{if(0===e.length)return"N/A";const a=e.reduce(((e,t)=>e+t.value),0)/e.length;if("digital"===(null==t?void 0:t.unitType)){return`${(e.filter((e=>1===e.value)).length/e.length*100).toFixed(1)}% High`}{const e=(null==t?void 0:t.unit)||"";return a.toFixed(2)+e}},Ya=(e,t)=>{if(0===e.length)return"N/A";const a=Math.min(...e.map((e=>e.value)));if("digital"===(null==t?void 0:t.unitType)){const e=1===a?1:0;return`${Y(t.unitCode||1)[e]} (${a})`}{const e=(null==t?void 0:t.unit)||"";return a.toFixed(2)+e}},Wa=(e,t)=>{if(0===e.length)return"N/A";const a=Math.max(...e.map((e=>e.value)));if("digital"===(null==t?void 0:t.unitType)){const e=1===a?1:0;return`${Y(t.unitCode||1)[e]} (${a})`}{const e=(null==t?void 0:t.unit)||"";return a.toFixed(2)+e}},qa=()=>{var e,t;const a=Ie.value.filter((e=>e.visible&&!e.isEmpty)),n=[],l=["Timestamp",...a.map((e=>e.name))];n.push(l.join(","));const i=Math.max(...a.map((e=>e.data.length)));for(let r=0;r<i;r++){const l=[],i=null==(t=null==(e=a.find((e=>e.data[r])))?void 0:e.data[r])?void 0:t.timestamp;i&&("number"==typeof i&&i>1e9?l.push(W(i)):l.push(new Date(i).toLocaleString()),a.forEach((e=>{var t,a;l.push((null==(a=null==(t=e.data[r])?void 0:t.value)?void 0:a.toFixed(2))||"")})),n.push(l.join(",")))}const s=new Blob([n.join("\n")],{type:"text/csv"}),o=document.createElement("a");o.download=`${xt.value}_${E().format("YYYY-MM-DD_HH-mm-ss")}.csv`,o.href=URL.createObjectURL(s),o.click()},Ga=()=>{if(!At)return;const e=document.createElement("a");e.download=`${xt.value}_${E().format("YYYY-MM-DD_HH-mm-ss")}.png`,e.href=At.toBase64Image("image/png",1),e.click()},Ka=()=>{if(!At)return;const e=document.createElement("a");e.download=`${xt.value}_${E().format("YYYY-MM-DD_HH-mm-ss")}.jpg`,e.href=At.toBase64Image("image/jpeg",.9),e.click()},Ja=()=>{var e,t,a,n,l;const i=Ie.value.filter((e=>e.visible&&!e.isEmpty)),s={title:xt.value,exportedAt:(new Date).toISOString(),timeRange:{start:null==(t=null==(e=i[0])?void 0:e.data[0])?void 0:t.timestamp,end:null==(l=null==(n=i[0])?void 0:n.data[(null==(a=i[0])?void 0:a.data.length)-1])?void 0:l.timestamp},series:i.map((e=>({name:e.name,unit:e.unit,type:e.unitType,color:e.color,data:e.data.map((e=>({timestamp:e.timestamp,value:e.value})))})))},o=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=document.createElement("a");r.download=`${xt.value}_${E().format("YYYY-MM-DD_HH-mm-ss")}.json`,r.href=URL.createObjectURL(o),r.click()};return n([de,ce,pe,ve],(()=>{(At||Object.keys(Rt).length>0)&&(ga(),va())})),r((async()=>{try{const e=await(async()=>{var e,t,a,n;const l=null==(t=null==(e=K.value)?void 0:e.t3Entry)?void 0:t.id,i=null==(n=null==(a=K.value)?void 0:a.t3Entry)?void 0:n.pid;if(!l)return null;if(!i&&0!==i)return null;try{if(!(await Re.waitForDataReady({timeout:15e3,specificEntries:[l]})).isValid)return null;const e=await Re.getEntryByPid(l,i);if(!e)return null;const t=se(e),a=[],n=[];if(e.input&&Array.isArray(e.input))for(let l=0;l<e.input.length;l++){const t=e.input[l];if(t&&void 0!==t.panel&&void 0!==t.point_number){a.push({panel:t.panel,point_number:t.point_number,index:l,point_type:t.point_type,network:t.network,sub_panel:t.sub_panel});const i=e.range&&e.range[l]?e.range[l]:0;n.push(i)}}return 0===a.length||0===a.filter((e=>void 0!==e.panel&&void 0!==e.point_number&&e.point_number>=0)).length?null:{id:e.id,label:e.label||e.description||`Monitor ${l}`,pid:e.pid,type:e.type,status:e.status,numInputs:a.length,inputItems:a,ranges:n,dataIntervalMs:t,originalConfig:e}}catch(s){return null}})();e&&(De.value=e,ea())}catch(e){l.Error("TrendLogChart: Initialization failed:",e)}Ea(1),u((async()=>{var e;if((null==(e=window.chrome)?void 0:e.webview)||await new Promise((e=>setTimeout(e,150))),St.value){St.value.offsetWidth>0&&St.value.offsetHeight>0||await new Promise((e=>setTimeout(e,300)))}await ca(),va(),ie.value&&La()}))})),d((()=>{xa(),ga()})),(a,n)=>{const i=_("a-typography-text"),s=_("a-button"),o=_("a-menu-item"),r=_("a-menu-divider"),u=_("a-menu"),d=_("a-dropdown"),E=_("a-flex"),O=_("a-button-group"),I=_("a-tag"),S=_("a-checkbox"),k=_("h7"),A=_("a-switch"),R=_("a-spin"),U=_("a-col"),V=_("a-date-picker"),B=_("a-time-picker"),Y=_("a-row"),W=_("a-space"),q=_("a-alert"),K=_("a-modal"),se=_("a-config-provider");return c(),p(se,{theme:{token:{colorPrimary:"#0064c8",colorBgBase:"#ffffff",colorText:"#000000",colorBorder:"#d9d9d9"}}},{default:v((()=>[m("div",xe,[t(E,{wrap:"wrap",gap:"small",class:"controls-main-flex"},{default:v((()=>[t(E,{align:"center",gap:"small",class:"control-group"},{default:v((()=>[t(i,{class:"control-label",style:{"font-size":"11px"}},{default:v((()=>[...n[17]||(n[17]=[f("Time Base:",-1)])])),_:1}),t(d,{placement:"bottomRight"},{overlay:v((()=>[t(u,{onClick:Ma,class:"timebase-dropdown-menu"},{default:v((()=>[t(o,{key:"5m"},{default:v((()=>[...n[18]||(n[18]=[f("5 minutes",-1)])])),_:1}),t(o,{key:"10m"},{default:v((()=>[...n[19]||(n[19]=[f("10 minutes",-1)])])),_:1}),t(o,{key:"30m"},{default:v((()=>[...n[20]||(n[20]=[f("30 minutes",-1)])])),_:1}),t(o,{key:"1h"},{default:v((()=>[...n[21]||(n[21]=[f("1 hour",-1)])])),_:1}),t(o,{key:"4h"},{default:v((()=>[...n[22]||(n[22]=[f("4 hours",-1)])])),_:1}),t(o,{key:"12h"},{default:v((()=>[...n[23]||(n[23]=[f("12 hours",-1)])])),_:1}),t(o,{key:"1d"},{default:v((()=>[...n[24]||(n[24]=[f("1 day",-1)])])),_:1}),t(o,{key:"4d"},{default:v((()=>[...n[25]||(n[25]=[f("4 days",-1)])])),_:1}),t(r),t(o,{key:"custom"},{default:v((()=>[...n[26]||(n[26]=[f("Custom Define",-1)])])),_:1})])),_:1})])),default:v((()=>[t(s,{size:"small",style:{display:"flex","align-items":"center"}},{default:v((()=>[m("span",null,g({"5m":"5 minutes","10m":"10 minutes","30m":"30 minutes","1h":"1 hour","4h":"4 hours","12h":"12 hours","1d":"1 day","4d":"4 days",custom:"Custom Define"}[J.value]||"1 hour"),1),t(h(L),{style:{"margin-left":"4px"}})])),_:1})])),_:1})])),_:1}),t(E,{align:"center",class:"control-group"},{default:v((()=>[t(O,{size:"small"},{default:v((()=>[t(s,{onClick:wa,disabled:ie.value},{icon:v((()=>[t(h($))])),_:1},8,["disabled"]),t(s,{onClick:Da,disabled:ie.value},{icon:v((()=>[t(h(x))])),_:1},8,["disabled"])])),_:1})])),_:1}),t(E,{align:"center",class:"control-group"},{default:v((()=>[t(O,{size:"small"},{default:v((()=>[t(s,{onClick:Ta,disabled:!Nt.value,title:"Zoom Out (Longer timebase)",style:{display:"flex","align-items":"center",gap:"2px"}},{default:v((()=>[t(h(M)),n[27]||(n[27]=m("span",null,"Zoom Out",-1))])),_:1},8,["disabled"]),t(s,{onClick:_a,disabled:!Ht.value,title:"Zoom In (Shorter timebase)",style:{display:"flex","align-items":"center",gap:"2px"}},{default:v((()=>[t(h(P)),n[28]||(n[28]=m("span",null,"Zoom In",-1))])),_:1},8,["disabled"])])),_:1})])),_:1}),t(E,{align:"center",class:"control-group"},{default:v((()=>[t(s,{onClick:Ca,size:"small",title:"Reset to default 5 minutes timebase",style:{display:"flex","align-items":"center",gap:"2px"}},{default:v((()=>[t(h(H)),n[29]||(n[29]=m("span",null,"Reset",-1))])),_:1})])),_:1}),t(E,{align:"center",class:"control-group"},{default:v((()=>[t(O,{size:"small"},{default:v((()=>[t(s,{type:1===Z.value?"primary":"default",onClick:n[0]||(n[0]=e=>Ea(1))},{default:v((()=>[...n[30]||(n[30]=[f(" View 1 ",-1)])])),_:1},8,["type"]),t(s,{type:2===Z.value?"primary":"default",onClick:n[1]||(n[1]=e=>Ea(2))},{default:v((()=>[...n[31]||(n[31]=[f(" View 2 ",-1)])])),_:1},8,["type"]),t(s,{type:3===Z.value?"primary":"default",onClick:n[2]||(n[2]=e=>Ea(3))},{default:v((()=>[...n[32]||(n[32]=[f(" View 3 ",-1)])])),_:1},8,["type"])])),_:1})])),_:1}),t(E,{align:"center",wrap:"wrap",gap:"small",class:"control-group status-tags"},{default:v((()=>[ie.value?(c(),p(I,{key:0,color:"green",size:"small"},{icon:v((()=>[t(h(ke),{spin:!0})])),default:v((()=>[f(" Live - "+g(fe.value),1)])),_:1})):(c(),p(I,{key:1,color:"blue",size:"small"},{icon:v((()=>[t(h(N))])),default:v((()=>[n[33]||(n[33]=f(" Historical ",-1))])),_:1})),t(I,{size:"small"},{default:v((()=>[f(g("custom"===J.value?"Custom":Pt.value),1)])),_:1})])),_:1}),t(E,{align:"center",class:"control-group chart-options"},{default:v((()=>[t(d,{placement:"bottomRight"},{overlay:v((()=>[t(u,{class:"chart-options-menu",onClick:Pa},{default:v((()=>[t(o,{key:"grid"},{default:v((()=>[t(S,{checked:de.value,"onUpdate:checked":n[3]||(n[3]=e=>de.value=e),style:{"margin-right":"8px"}},null,8,["checked"]),n[35]||(n[35]=f(" Show Grid ",-1))])),_:1}),t(o,{key:"legend"},{default:v((()=>[t(S,{checked:ce.value,"onUpdate:checked":n[4]||(n[4]=e=>ce.value=e),style:{"margin-right":"8px"}},null,8,["checked"]),n[36]||(n[36]=f(" Show Legend ",-1))])),_:1}),t(o,{key:"smooth"},{default:v((()=>[t(S,{checked:pe.value,"onUpdate:checked":n[5]||(n[5]=e=>pe.value=e),style:{"margin-right":"8px"}},null,8,["checked"]),n[37]||(n[37]=f(" Smooth Lines ",-1))])),_:1}),t(o,{key:"points"},{default:v((()=>[t(S,{checked:ve.value,"onUpdate:checked":n[6]||(n[6]=e=>ve.value=e),style:{"margin-right":"8px"}},null,8,["checked"]),n[38]||(n[38]=f(" Show Points ",-1))])),_:1}),t(r),t(o,{key:"reset"},{default:v((()=>[t(h(H)),n[39]||(n[39]=f(" Reset to Default ",-1))])),_:1})])),_:1})])),default:v((()=>[t(s,{size:"small",style:{display:"flex","align-items":"center"}},{default:v((()=>[t(h(Ce),{style:{"margin-right":"4px"}}),n[34]||(n[34]=m("span",null,"Chart",-1)),t(h(L),{style:{"margin-left":"4px"}})])),_:1})])),_:1})])),_:1}),t(E,{align:"center",class:"control-group export-options"},{default:v((()=>[t(d,{placement:"bottomRight"},{overlay:v((()=>[t(u,{class:"export-options-menu",onClick:Ha},{default:v((()=>[t(o,{key:"png"},{default:v((()=>[t(h(me)),n[41]||(n[41]=f(" Export as PNG ",-1))])),_:1}),t(o,{key:"jpg"},{default:v((()=>[t(h(me)),n[42]||(n[42]=f(" Export as JPG ",-1))])),_:1}),t(r),t(o,{key:"csv"},{default:v((()=>[t(h(ue)),n[43]||(n[43]=f(" Export Data (CSV) ",-1))])),_:1}),t(o,{key:"json"},{default:v((()=>[t(h(j)),n[44]||(n[44]=f(" Export Data (JSON) ",-1))])),_:1})])),_:1})])),default:v((()=>[t(s,{size:"small",style:{display:"flex","align-items":"center"}},{default:v((()=>[t(h(le),{style:{"margin-right":"4px"}}),n[40]||(n[40]=m("span",null,"Export",-1)),t(h(L),{style:{"margin-left":"4px"}})])),_:1})])),_:1})])),_:1})])),_:1})]),m("div",Me,[m("div",Pe,[m("div",$e,[m("div",He,[m("div",Ne,[t(k,null,{default:v((()=>[f(g(xt.value)+" ("+g(Mt.value)+"/"+g(Ie.value.length)+")",1)])),_:1}),m("div",je,["realtime"===he.value?(c(),y("span",Fe," ðŸ“¡ Live ")):"api"===he.value?(c(),y("span",ze," ðŸ“š Historical ("+g(J.value)+") ",1)):ye.value?(c(),y("span",Ue," âŒ Connection Error ")):b("",!0)])]),m("div",Ve,[m("div",Be,[t(d,null,{overlay:v((()=>[t(u,{onClick:$a,class:"all-dropdown-menu"},{default:v((()=>[t(o,{key:"enable-all",disabled:!Ft.value},{default:v((()=>[t(h(z)),n[46]||(n[46]=f(" Enable All ",-1))])),_:1},8,["disabled"]),t(o,{key:"disable-all",disabled:!jt.value},{default:v((()=>[t(h(Q)),n[47]||(n[47]=f(" Disable All ",-1))])),_:1},8,["disabled"])])),_:1})])),default:v((()=>[t(s,{size:"small",style:{display:"flex","align-items":"center"}},{default:v((()=>[n[45]||(n[45]=m("span",null,"All",-1)),t(h(L),{style:{"margin-left":"4px"}})])),_:1})])),_:1}),t(d,null,{overlay:v((()=>[t(u,{onClick:Na,class:"bytype-dropdown-menu"},{default:v((()=>[t(o,{key:"toggle-analog",disabled:!Vt.value},{default:v((()=>[t(h(be)),f(" "+g(qt.value?"Disable":"Enable")+" Analog ("+g(Yt.value)+") ",1)])),_:1},8,["disabled"]),t(o,{key:"toggle-digital",disabled:!Bt.value},{default:v((()=>[t(h(G)),f(" "+g(Gt.value?"Disable":"Enable")+" Digital ("+g(Wt.value)+") ",1)])),_:1},8,["disabled"])])),_:1})])),default:v((()=>[t(s,{size:"small",style:{display:"flex","align-items":"center"}},{default:v((()=>[n[48]||(n[48]=m("span",null,"By Type",-1)),t(h(L),{style:{"margin-left":"4px"}})])),_:1})])),_:1})]),m("div",Ye,[t(i,{class:"toggle-label"},{default:v((()=>[...n[49]||(n[49]=[f("Auto Scroll:",-1)])])),_:1}),t(A,{checked:ie.value,"onUpdate:checked":n[7]||(n[7]=e=>ie.value=e),size:"small",onChange:Ra},null,8,["checked"])])])]),m("div",We,[0===Ie.value.length?(c(),y("div",qe,[m("div",Ge,[ye.value?(c(),y("div",Ke,"âŒ")):(c(),y("div",Je,"ðŸ“Š")),ye.value?(c(),y("div",Ze,"Data Connection Error")):(c(),y("div",Xe,"No trend log data available")),ye.value?(c(),y("div",Qe," Unable to load real-time or historical data. Check system connections. ")):(c(),y("div",et,"Configure monitor points to see data series"))])])):b("",!0),(c(!0),y(D,null,w(Ie.value,((a,i)=>(c(),y("div",{key:a.name,class:T(["series-item",{"series-disabled":!a.visible}])},[m("div",{class:"series-header",onClick:e=>((e,t)=>{t&&"function"==typeof t.stopPropagation&&t.stopPropagation(),Ie.value[e].isEmpty||(Ie.value[e].visible=!Ie.value[e].visible,ha(),l.Debug(`Toggled visibility for series ${Ie.value[e].name} to ${Ie.value[e].visible}`))})(i,e)},[m("div",{class:T(["series-toggle-indicator",{active:a.visible,inactive:!a.visible}]),style:C({backgroundColor:a.visible?a.color:"#d9d9d9"})},[m("div",{class:T(["toggle-inner",{visible:a.visible}])},null,2)],6),m("div",at,[m("div",nt,[m("div",lt,[m("span",it,g(F(a)),1),a.prefix?(c(),p(e,{key:0,label:a.prefix,color:"grey-4","text-color":"grey-8",size:"xs",dense:"",class:"series-prefix-tag-small"},null,8,["label"])):b("",!0)]),m("span",st,[m("span",ot,g(a.unit),1)])])]),m("div",rt,[t(s,{size:"small",type:"text",class:"expand-toggle",onClick:e=>((e,t)=>{t&&"function"==typeof t.stopPropagation&&t.stopPropagation(),Ie.value[e].isEmpty||(_e.value.has(e)?_e.value.delete(e):_e.value.add(e))})(i,e)},{icon:v((()=>[_e.value.has(i)?(c(),p(h(L),{key:0,class:"expand-icon expanded"})):(c(),p(h(x),{key:1,class:"expand-icon"}))])),_:2},1032,["onClick"])])],8,tt),_e.value.has(i)?(c(),y("div",ut,[m("div",dt,[n[50]||(n[50]=m("span",{class:"stat-label"},"Last:",-1)),m("span",ct,g(Va(a.data,a)),1)]),m("div",pt,[n[51]||(n[51]=m("span",{class:"stat-label"},"Avg:",-1)),m("span",vt,g(Ba(a.data,a)),1)]),m("div",mt,[n[52]||(n[52]=m("span",{class:"stat-label"},"Min:",-1)),m("span",ft,g(Ya(a.data,a)),1)]),m("div",gt,[n[53]||(n[53]=m("span",{class:"stat-label"},"Max:",-1)),m("span",ht,g(Wa(a.data,a)),1)])])):b("",!0)],2)))),128))])])]),m("div",yt,[m("div",bt,[m("div",wt,[m("canvas",{ref_key:"analogChartCanvas",ref:St,id:"analog-chart"},null,512)]),(c(!0),y(D,null,w(Jt.value,((e,t)=>(c(),y("div",{key:e.name,class:"channel-chart"},[m("canvas",{ref_for:!0,ref:e=>((e,t)=>{e&&"tagName"in e&&"CANVAS"===e.tagName&&(kt.value[t]=e)})(e,t),id:`digital-${t}-chart`},null,8,Dt)])))),128))])])]),re.value?(c(),y("div",_t,[t(R,{size:"large"}),n[54]||(n[54]=m("div",{class:"loading-text"},"Loading trend log data...",-1))])):b("",!0),t(K,{visible:ne.value,"onUpdate:visible":n[16]||(n[16]=e=>ne.value=e),title:"X Axis",width:320,centered:"",onOk:Ia,onCancel:Sa},{default:v((()=>[m("div",Tt,[t(Y,{gutter:8,class:"date-time-row"},{default:v((()=>[t(U,{span:4,class:"label-col"},{default:v((()=>[...n[55]||(n[55]=[m("label",{class:"time-label"},"Start:",-1)])])),_:1}),t(U,{span:11},{default:v((()=>[t(V,{value:X.value,"onUpdate:value":n[8]||(n[8]=e=>X.value=e),placeholder:"Date",size:"small",style:{width:"100%","font-size":"11px"},format:"DD/MM/YYYY"},null,8,["value"])])),_:1}),t(U,{span:9},{default:v((()=>[t(B,{value:te.value,"onUpdate:value":n[9]||(n[9]=e=>te.value=e),placeholder:"Time",size:"small",style:{width:"100%","font-size":"11px"},format:"HH:mm"},null,8,["value"])])),_:1})])),_:1}),t(Y,{gutter:8,class:"date-time-row"},{default:v((()=>[t(U,{span:4,class:"label-col"},{default:v((()=>[...n[56]||(n[56]=[m("label",{class:"time-label"},"End:",-1)])])),_:1}),t(U,{span:11},{default:v((()=>[t(V,{value:ee.value,"onUpdate:value":n[10]||(n[10]=e=>ee.value=e),placeholder:"Date",size:"small",style:{width:"100%","font-size":"11px"},format:"DD/MM/YYYY"},null,8,["value"])])),_:1}),t(U,{span:9},{default:v((()=>[t(B,{value:ae.value,"onUpdate:value":n[11]||(n[11]=e=>ae.value=e),placeholder:"Time",size:"small",style:{width:"100%","font-size":"11px"},format:"HH:mm"},null,8,["value"])])),_:1})])),_:1}),m("div",Ct,[t(W,{size:"small"},{default:v((()=>[t(s,{size:"small",onClick:n[12]||(n[12]=e=>ka("today"))},{default:v((()=>[...n[57]||(n[57]=[f("Today",-1)])])),_:1}),t(s,{size:"small",onClick:n[13]||(n[13]=e=>ka("yesterday"))},{default:v((()=>[...n[58]||(n[58]=[f("Yesterday",-1)])])),_:1}),t(s,{size:"small",onClick:n[14]||(n[14]=e=>ka("thisWeek"))},{default:v((()=>[...n[59]||(n[59]=[f("This Week",-1)])])),_:1}),t(s,{size:"small",onClick:n[15]||(n[15]=e=>ka("lastWeek"))},{default:v((()=>[...n[60]||(n[60]=[f("Last Week",-1)])])),_:1})])),_:1})]),X.value&&ee.value&&te.value&&ae.value?(c(),y("div",Et,[t(q,{type:"info","show-icon":"",size:"small"},{message:v((()=>[m("span",Ot,g(Aa()),1)])),_:1})])):b("",!0)])])),_:1},8,["visible"])])),_:1})}}}),[["__scopeId","data-v-17e97428"]]);export{It as T,Re as t,Le as u};

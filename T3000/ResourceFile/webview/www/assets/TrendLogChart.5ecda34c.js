import{Q as e}from"./QChip.246fee19.js";import{c as t,h as a,w as n,X as i,d as l,a as o,a7 as r,o as s,n as u,e as d,a1 as c,a8 as p,a9 as v,a3 as g,C as m,a4 as f,u as h,a5 as y,a2 as b,F as w,au as I,aa as D,aH as _,aJ as T,W as S}from"./index.8dd48b07.js";import{d as C}from"./dayjs.min.a4094c4f.js";import{C as E}from"./auto.4ae97206.js";import"./chartjs-adapter-date-fns.esm.6cd07d05.js";import{s as O}from"./RefConstant.bfc4e7f0.js";import{h as x}from"./T3Data.301774c4.js";import{fa as k,f3 as A}from"./Hvac.a7a3a515.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";import{Z as R,X as $,a9 as M,a8 as P}from"./index.9ba5e6aa.js";import{L as N,R as F,C as H,F as j}from"./ReloadOutlined.13be878a.js";import{A as z}from"./AntdIcon.ddaa8d78.js";import{C as U}from"./CheckOutlined.82384d3a.js";import{al as V,F as B,am as W}from"./index.fb568b06.js";var q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"};function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){G(e,t,a[t])}))}return e}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var K=function(e,a){var n=Y({},e,a.attrs);return t(z,Y({},n,{icon:q}),null)};K.displayName="BarChartOutlined",K.inheritAttrs=!1;var J=K,Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832.6 191.4c-84.6-84.6-221.5-84.6-306 0l-96.9 96.9 51 51 96.9-96.9c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204l-96.9 96.9 51.1 51.1 96.9-96.9c84.4-84.6 84.4-221.5-.1-306.1zM446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l96.9-96.9-51.1-51.1-96.9 96.9c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l96.9-96.9-51-51-96.8 97zM260.3 209.4a8.03 8.03 0 00-11.3 0L209.4 249a8.03 8.03 0 000 11.3l554.4 554.4c3.1 3.1 8.2 3.1 11.3 0l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3L260.3 209.4z"}}]},name:"disconnect",theme:"outlined"};function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){Q(e,t,a[t])}))}return e}function Q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ee=function(e,a){var n=X({},e,a.attrs);return t(z,X({},n,{icon:Z}),null)};ee.displayName="DisconnectOutlined",ee.inheritAttrs=!1;var te=ee,ae={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"};function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){ie(e,t,a[t])}))}return e}function ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var le=function(e,a){var n=ne({},e,a.attrs);return t(z,ne({},n,{icon:ae}),null)};le.displayName="ExportOutlined",le.inheritAttrs=!1;var oe=le,re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM514.1 580.1l-61.8-102.4c-2.2-3.6-6.1-5.8-10.3-5.8h-38.4c-2.3 0-4.5.6-6.4 1.9-5.6 3.5-7.3 10.9-3.7 16.6l82.3 130.4-83.4 132.8a12.04 12.04 0 0010.2 18.4h34.5c4.2 0 8-2.2 10.2-5.7L510 664.8l62.3 101.4c2.2 3.6 6.1 5.7 10.2 5.7H620c2.3 0 4.5-.7 6.5-1.9 5.6-3.6 7.2-11 3.6-16.6l-84-130.4 85.3-132.5a12.04 12.04 0 00-10.1-18.5h-35.7c-4.2 0-8.1 2.2-10.3 5.8l-61.2 102.3z"}}]},name:"file-excel",theme:"outlined"};function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){ue(e,t,a[t])}))}return e}function ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var de=function(e,a){var n=se({},e,a.attrs);return t(z,se({},n,{icon:re}),null)};de.displayName="FileExcelOutlined",de.inheritAttrs=!1;var ce=de,pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){ge(e,t,a[t])}))}return e}function ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var me=function(e,a){var n=ve({},e,a.attrs);return t(z,ve({},n,{icon:pe}),null)};me.displayName="FileImageOutlined",me.inheritAttrs=!1;var fe=me,he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M841 370c3-3.3 2.7-8.3-.6-11.3a8.24 8.24 0 00-5.3-2.1h-72.6c-2.4 0-4.6 1-6.1 2.8L633.5 504.6a7.96 7.96 0 01-13.4-1.9l-63.5-141.3a7.9 7.9 0 00-7.3-4.7H380.7l.9-4.7 8-42.3c10.5-55.4 38-81.4 85.8-81.4 18.6 0 35.5 1.7 48.8 4.7l14.1-66.8c-22.6-4.7-35.2-6.1-54.9-6.1-103.3 0-156.4 44.3-175.9 147.3l-9.4 49.4h-97.6c-3.8 0-7.1 2.7-7.8 6.4L181.9 415a8.07 8.07 0 007.8 9.7H284l-89 429.9a8.07 8.07 0 007.8 9.7H269c3.8 0 7.1-2.7 7.8-6.4l89.7-433.1h135.8l68.2 139.1c1.4 2.9 1 6.4-1.2 8.8l-180.6 203c-2.9 3.3-2.6 8.4.7 11.3 1.5 1.3 3.4 2 5.3 2h72.7c2.4 0 4.6-1 6.1-2.8l123.7-146.7c2.8-3.4 7.9-3.8 11.3-1 .9.8 1.6 1.7 2.1 2.8L676.4 784c1.3 2.8 4.1 4.7 7.3 4.7h64.6a8.02 8.02 0 007.2-11.5l-95.2-198.9c-1.4-2.9-.9-6.4 1.3-8.8L841 370z"}}]},name:"function",theme:"outlined"};function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){be(e,t,a[t])}))}return e}function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var we=function(e,a){var n=ye({},e,a.attrs);return t(z,ye({},n,{icon:he}),null)};we.displayName="FunctionOutlined",we.inheritAttrs=!1;var Ie=we,De={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"};function _e(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){Te(e,t,a[t])}))}return e}function Te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Se=function(e,a){var n=_e({},e,a.attrs);return t(z,_e({},n,{icon:De}),null)};Se.displayName="ImportOutlined",Se.inheritAttrs=!1;var Ce=Se,Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){xe(e,t,a[t])}))}return e}function xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ke=function(e,a){var n=Oe({},e,a.attrs);return t(z,Oe({},n,{icon:Ee}),null)};ke.displayName="LineChartOutlined",ke.inheritAttrs=!1;var Ae=ke,Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){$e(e,t,a[t])}))}return e}function $e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Me=function(e,a){var n=Re({},e,a.attrs);return t(z,Re({},n,{icon:Le}),null)};Me.displayName="SettingOutlined",Me.inheritAttrs=!1;var Pe=Me,Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){He(e,t,a[t])}))}return e}function He(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var je=function(e,a){var n=Fe({},e,a.attrs);return t(z,Fe({},n,{icon:Ne}),null)};je.displayName="SyncOutlined",je.inheritAttrs=!1;var ze=je;const Ue={digital:[{id:1,label:"Off/On",off:"Off",on:"On",direct:null},{id:2,label:"Close/Open",off:"Close",on:"Open",direct:null},{id:3,label:"Stop/Start",off:"Stop",on:"Start",direct:null},{id:4,label:"Disable/Enable",off:"Disable",on:"Enable",direct:null},{id:5,label:"Normal/Alarm",off:"Normal",on:"Alarm",direct:null},{id:6,label:"Normal/High",off:"Normal",on:"High",direct:null},{id:7,label:"Normal/Low",off:"Normal",on:"Low",direct:null},{id:8,label:"No/Yes",off:"No",on:"Yes",direct:null},{id:9,label:"Cool/Heat",off:"Cool",on:"Heat",direct:null},{id:10,label:"Unoccupy/Occupy",off:"Unoccupy",on:"Occupy",direct:null},{id:11,label:"Low/High",on:"Low",off:"High",direct:null},{id:12,label:"On/Off",on:"Off",off:"On",direct:!0},{id:13,label:"Open/Close",on:"Close",off:"Open",direct:!0},{id:14,label:"Start/Stop",on:"Stop",off:"Start",direct:!0},{id:15,label:"Enable/Disable",on:"Disable",off:"Enable",direct:!0},{id:16,label:"Alarm/Normal",on:"Normal",off:"Alarm",direct:!0},{id:17,label:"High/Normal",on:"Normal",off:"High",direct:!0},{id:18,label:"Low/Normal",on:"Normal",off:"Low",direct:!0},{id:19,label:"Yes/No",on:"No",off:"Yes",direct:!0},{id:20,label:"Heat/Cool",on:"Cool",off:"Heat",direct:!0},{id:21,label:"Occupy/Unoccupy",on:"Unoccupy",off:"Occupy",direct:!0},{id:22,label:"High/Low",on:"Low",off:"High",direct:!0}],analog:{input:[{id:0,unit:"",label:"Unused"},{id:1,unit:"Deg.C",label:"Y3K -40 to 150"},{id:2,unit:"Deg.F",label:"Y3K -40 to 300"},{id:3,unit:"Deg.C",label:"10K Type2"},{id:4,unit:"Deg.F",label:"10K Type2"},{id:5,unit:"Deg.C",label:"G3K -40 to 120"},{id:6,unit:"Deg.F",label:"G3K -40 to 250"},{id:7,unit:"Deg.C",label:"10K Type3"},{id:8,unit:"Deg.F",label:"10K Type3"},{id:9,unit:"Deg.C",label:"PT 1K -200 to 300"},{id:10,unit:"Deg.F",label:"PT 1K -200 to 570"},{id:11,unit:"Volts",label:"0.0 to 5.0"},{id:12,unit:"Amps",label:"0.0 to 100"},{id:13,unit:"ma",label:"4 to 20"},{id:14,unit:"psi",label:"4 to 20"},{id:15,unit:"counts",label:"Pulse Count (Slow 1Hz)"},{id:16,unit:"%",label:"0 to 100"},{id:17,unit:"%",label:"0 to 100"},{id:18,unit:"%",label:"0 to 100"},{id:19,unit:"Volts",label:"0.0 to 10.0"},{id:25,unit:"counts",label:"Pulse Count (Fast 100Hz)"},{id:26,unit:"Hz",label:"Frequency"},{id:27,unit:"%",label:"Humidty %"},{id:28,unit:"PPM",label:"CO2  PPM"},{id:29,unit:"RPM",label:"Revolutions Per Minute"},{id:30,unit:"PPB",label:"TVOC PPB"},{id:31,unit:"ug/m3",label:"ug/m3"},{id:32,unit:"#/cm3",label:"#/cm3"},{id:33,unit:"dB",label:"dB"},{id:34,unit:"Lux",label:"Lux"}],output:[{id:0,unit:"",label:"Unused"},{id:1,unit:"Volts",label:"0.0 to 10.0"},{id:2,unit:"%Open",label:"0.0 to 100"},{id:3,unit:"psi",label:"4 to 20"},{id:4,unit:"%",label:"0 to 100"},{id:5,unit:"%Cls",label:"0 to 100"},{id:6,unit:"ma",label:"4 to 20"},{id:7,unit:"%PWM",label:"0 to 100"},{id:8,unit:"%",label:"2 to 10"}],variable:[{id:0,unit:"Unused",label:"Unused"},{id:1,unit:"Deg.C",label:"Deg.C"},{id:2,unit:"Deg.F",label:"Deg.F"},{id:3,unit:"Feet per Min",label:"Feet per Min"},{id:4,unit:"Pascals",label:"Pascals"},{id:5,unit:"KPascals",label:"KPascals"},{id:6,unit:"lbs/sqr.inch",label:"lbs/sqr.inch"},{id:7,unit:"inches of WC",label:"inches of WC"},{id:8,unit:"Watts",label:"Watts"},{id:9,unit:"KWatts",label:"KWatts"},{id:10,unit:"KWH",label:"KWH"},{id:11,unit:"Volts",label:"Volts"},{id:12,unit:"KV",label:"KV"},{id:13,unit:"Amps",label:"Amps"},{id:14,unit:"ma",label:"ma"},{id:15,unit:"CFM",label:"CFM"},{id:16,unit:"Seconds",label:"Seconds"},{id:17,unit:"Minutes",label:"Minutes"},{id:18,unit:"Hours",label:"Hours"},{id:19,unit:"Days",label:"Days"},{id:20,unit:"Time",label:"Time"},{id:21,unit:"Ohms",label:"Ohms"},{id:22,unit:"%",label:"%"},{id:23,unit:"%RH",label:"%RH"},{id:24,unit:"p/min",label:"p/min"},{id:25,unit:"Counts",label:"Counts"},{id:26,unit:"%Open",label:"%Open"},{id:27,unit:"Kg",label:"Kg"},{id:28,unit:"L/Hour",label:"L/Hour"},{id:29,unit:"GPH",label:"GPH"},{id:30,unit:"GAL",label:"GAL"},{id:31,unit:"CF",label:"CF"},{id:32,unit:"BTU",label:"BTU"},{id:33,unit:"CMH",label:"CMH"}]}};const Ve=new class{constructor(){this.dataReadiness=a("NOT_INITIALIZED"),this.lastUpdateTime=a(0),this.pendingRequests=new Map,this.dataFlowHistory=[],this.DEFAULT_TIMEOUT=3e4,this.MAX_RETRY_ATTEMPTS=3,this.MAX_HISTORY=50,this.initializeManager()}initializeManager(){var e;this.trackDataFlow("INIT",(null==(e=x.value.panelsData)?void 0:e.length)||0),n((()=>x.value.panelsData),((e,t)=>{this.handlePanelsDataChange(e,t)}),{deep:!0}),n((()=>x.value.loadingPanel),((e,t)=>{this.handleLoadingStateChange(e,t)})),this.assessCurrentDataState()}trackDataFlow(e,t,a,n){const i={timestamp:Date.now(),action:e,entryCount:t,source:a,details:n};this.dataFlowHistory.push(i),this.dataFlowHistory.length>this.MAX_HISTORY&&this.dataFlowHistory.shift()}handlePanelsDataChange(e,t){var a,n;const l=Date.now();this.lastUpdateTime.value=l;const o=(null==e?void 0:e.length)||0,r=(null==t?void 0:t.length)||0;this.trackDataFlow("UPDATE",o,this.detectChangeSource(),{previousCount:r,countDelta:o-r}),i.Debug("= T3DataManager: T3000_DATA UPDATED - Full data details:",{updateInfo:{timestamp:(new Date).toISOString(),source:this.detectChangeSource(),previousCount:r,newCount:o,countDelta:o-r},fullT3000Data:{panelsData:{length:o,data:e},panelsList:{length:(null==(a=x.value.panelsList)?void 0:a.length)||0,data:x.value.panelsList},panelsRanges:{length:(null==(n=x.value.panelsRanges)?void 0:n.length)||0,data:x.value.panelsRanges},loadingPanel:x.value.loadingPanel},dataAnalysis:{uniquePanels:Array.from(new Set((null==e?void 0:e.map((e=>e.pid)))||[])),sampleEntries:(null==e?void 0:e.slice(0,5).map((e=>({pid:e.pid,type:e.type,id:e.id,label:e.label,value:e.value,units:e.units}))))||[]}}),this.isDataComplete(e)&&(this.setDataReadiness("READY"),this.resolvePendingRequests())}detectChangeSource(){try{const e=(new Error).stack;return e?e.includes("WebViewClient")?"WebViewClient":e.includes("WebSocketClient")?"WebSocketClient":e.includes("IndexPage")?"IndexPage":e.includes("demoDeviceData")?"DemoData":"unknown":"unknown"}catch{return"unknown"}}handleLoadingStateChange(e,t){null!==e&&null===t?this.setDataReadiness("LOADING"):null===e&&null!==t&&this.isDataComplete(x.value.panelsData)&&this.setDataReadiness("READY")}setDataReadiness(e){this.dataReadiness.value,this.dataReadiness.value=e,"READY"===e?this.resolvePendingRequests():"ERROR"===e&&this.rejectPendingRequests("Data loading failed")}isDataComplete(e){if(!e||!Array.isArray(e))return!1;const t=e.length>0,a=null===x.value.loadingPanel;return t&&a}assessCurrentDataState(){const e=x.value.panelsData;null!==x.value.loadingPanel?this.setDataReadiness("LOADING"):this.isDataComplete(e)?this.setDataReadiness("READY"):this.setDataReadiness("NOT_INITIALIZED")}async waitForDataReady(e={}){const{timeout:t=this.DEFAULT_TIMEOUT,retryAttempts:a=this.MAX_RETRY_ATTEMPTS,specificEntries:n=[]}=e;if("READY"===this.dataReadiness.value){const e=await this.validateData(n);if(e.isValid)return e}return new Promise(((e,a)=>{const i=`req_${Date.now()}_${Math.random()}`,l=setTimeout((()=>{this.pendingRequests.delete(i),a(new Error(`Data not ready within ${t}ms timeout`))}),t);this.pendingRequests.set(i,{resolve:async()=>{clearTimeout(l),this.pendingRequests.delete(i);try{const t=await this.validateData(n);e(t)}catch(t){a(t)}},reject:e=>{clearTimeout(l),this.pendingRequests.delete(i),a(new Error(e))},timeout:l})}))}async validateData(e=[]){var t;const a=x.value.panelsData||[],n=Date.now();if(!Array.isArray(a))return{isValid:!1,timestamp:n,panelsCount:0,entriesCount:0};let i=!0;if(e.length>0)for(const l of e){if(!a.find((e=>{var t;return e.id===l||e.label===l||(null==(t=e.description)?void 0:t.includes(l))}))){i=!1;break}}return{isValid:i&&a.length>0,timestamp:n,panelsCount:(null==(t=x.value.panelsList)?void 0:t.length)||0,entriesCount:a.length}}async getEntry(e,t={}){if(!(await this.waitForDataReady({...t,specificEntries:[e]})).isValid)throw new Error(`Entry ${e} not available or invalid`);const a=x.value.panelsData.find((t=>{var a;return t.id===e||t.label===e||(null==(a=t.description)?void 0:a.includes(e))}));if(!a)throw new Error(`Entry ${e} not found in panelsData`);return a}async getEntryByPid(e,t,a={}){if(!(await this.waitForDataReady({...a,specificEntries:[e]})).isValid)throw new Error(`Entry ${e} not available or invalid`);const n=x.value.panelsData.filter((e=>e.pid===t));if(0===n.length)throw new Error(`No entries found with PID ${t}`);const i=n.find((t=>{var a;return t.id===e||t.label===e||(null==(a=t.description)?void 0:a.includes(e))}));if(!i)throw new Error(`Entry ${e} not found in PID ${t} filtered data`);return i}async getEntriesMatching(e,t={}){if(!(await this.waitForDataReady(t)).isValid)throw new Error("Data not available for filtering");return x.value.panelsData.filter(e)}resolvePendingRequests(){this.pendingRequests.forEach((e=>{e.resolve()})),this.pendingRequests.clear()}rejectPendingRequests(e){this.pendingRequests.forEach((t=>{t.reject(e)})),this.pendingRequests.clear()}getDataFlowHistory(){return[...this.dataFlowHistory]}getDataStateInfo(){var e;const t=x.value.panelsData||[];return{readiness:this.dataReadiness.value,entryCount:t.length,panelCount:(null==(e=x.value.panelsList)?void 0:e.length)||0,lastUpdate:this.lastUpdateTime.value,isLoading:null!==x.value.loadingPanel,pendingRequests:this.pendingRequests.size}}getReadinessState(){return this.dataReadiness.value}get isReady(){return"READY"===this.dataReadiness.value}get loadingProgress(){var e;const t=x.value.loadingPanel,a=(null==(e=x.value.panelsList)?void 0:e.length)||0;return null===t||0===a?100:Math.round((t+1)/a*100)}clearDataFlowHistory(){this.dataFlowHistory=[]}forceRefresh(){this.assessCurrentDataState()}destroy(){this.rejectPendingRequests("Manager destroyed"),this.dataFlowHistory=[],this.dataReadiness.value="NOT_INITIALIZED"}};function Be(){const e=a(!1),t=a(null),n=async(e,t)=>{try{const a=await fetch(`http://localhost:9103/api/t3_device/trendlogs/${t}/init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:e})});if(!a.ok)throw new Error(`Initial TrendLog creation failed: ${a.status} ${a.statusText}`);return await a.json()}catch(a){throw a}},i=async(e,t)=>{try{const a=await fetch(`http://localhost:9103/api/t3_device/trendlogs/${t}/sync-ffi`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_id:e})});if(!a.ok)throw new Error(`FFI sync failed: ${a.status} ${a.statusText}`);return await a.json()}catch(a){throw a}};return{isLoading:e,error:t,getTrendlogHistory:async a=>{e.value=!0,t.value=null;try{const t=await fetch(`http://localhost:9103/api/t3_device/devices/${a.serial_number}/trendlogs/${a.trendlog_id}/history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok)throw new Error(`API request failed: ${t.status}`);return await t.json()}catch(n){const e=n instanceof Error?n.message:"Failed to fetch trendlog history";return t.value=e,null}finally{e.value=!1}},saveRealtimeData:async e=>{try{return(await fetch("http://localhost:9103/api/t3_device/trendlog-data/realtime",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok}catch(t){return!1}},saveRealtimeBatch:async e=>{try{const t=await fetch("http://localhost:9103/api/t3_device/trendlog-data/realtime/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Batch save failed: ${t.status}`);return(await t.json()).rows_affected||0}catch(t){return 0}},getRecentData:async(e,t,a,n=100)=>{try{const i=new URLSearchParams({panel_id:t.toString(),limit:n.toString()});a&&a.length>0&&i.set("point_types",a.join(","));const l=await fetch(`http://localhost:9103/api/t3_device/devices/${e}/trendlog-data/recent?${i}`);if(!l.ok)throw new Error(`Failed to fetch recent data: ${l.status}`);return(await l.json()).data||[]}catch(i){return[]}},getDataStatistics:async(e,t)=>{try{const a=new URLSearchParams({panel_id:t.toString()}),n=await fetch(`http://localhost:9103/api/t3_device/devices/${e}/trendlog-data/stats?${a}`);if(!n.ok)throw new Error(`Failed to fetch statistics: ${n.status}`);return await n.json()}catch(a){return null}},getSmartTrendlogData:async e=>{try{const t=await fetch(`http://localhost:9103/devices/${e.serial_number}/trendlog-data/smart`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to fetch smart trendlog data: ${t.status}`);const a=await t.json();return{data:a.data||[],total_points:a.total_points||0,sources_used:a.sources_used||[],consolidation_applied:a.consolidation_applied||!1,has_historical_data:a.has_historical_data||!1}}catch(t){return null}},createInitialTrendlog:n,syncTrendlogWithFFI:i,initializeCompleteFFI:async(e,t)=>{try{const a=await n(e,t),l=parseInt(t.replace("MONITOR",""))||0,o=await i(e,l);return{initial:a,ffi:o,success:a.success&&o.success}}catch(a){throw a}},formatSocketDataForSave:(e,t,a)=>e&&Array.isArray(e.data)?e.data.map((e=>{var n,i,l;return{serial_number:t,panel_id:a,point_id:e.id||`${e.type||"UNK"}${e.index||0}`,point_index:e.index||0,point_type:e.type||"UNKNOWN",value:(null==(n=e.value)?void 0:n.toString())||"0",range_field:null==(i=e.range)?void 0:i.toString(),digital_analog:null==(l=e.digital_analog)?void 0:l.toString(),units:e.units}})):[]}}const We={class:"top-controls-bar"},qe={key:0,class:"empty-tracking-state"},Ye={class:"empty-content"},Ge={class:"empty-title"},Ke={key:1,class:"timeseries-container"},Je={class:"left-panel"},Ze={class:"control-section"},Xe={class:"data-series-header"},Qe={class:"header-line-1"},et={class:"data-source-indicator"},tt={key:0,class:"source-badge loading"},at={key:1,class:"source-badge realtime"},nt={key:2,class:"source-badge historical"},it={key:3,class:"source-badge error"},lt={class:"header-line-2"},ot={class:"left-controls"},rt={class:"auto-scroll-toggle"},st={class:"series-list"},ut={key:0,class:"series-empty-state"},dt={class:"empty-state-content"},ct={key:0,class:"empty-state-icon"},pt={key:1,class:"empty-state-icon"},vt={key:2,class:"empty-state-icon"},gt={key:3,class:"empty-state-text"},mt={key:4,class:"empty-state-text"},ft={key:5,class:"empty-state-text"},ht={key:6,class:"empty-state-subtitle"},yt={key:7,class:"empty-state-subtitle"},bt={key:8,class:"empty-state-subtitle"},wt=["onClick"],It={class:"series-info"},Dt={class:"series-name-line"},_t={class:"series-name-container"},Tt={class:"series-name"},St={class:"series-inline-tags"},Ct={class:"series-controls"},Et={key:1,class:"series-stats"},Ot={class:"stat-item"},xt={class:"stat-value"},kt={class:"stat-item"},At={class:"stat-value"},Lt={class:"stat-item"},Rt={class:"stat-value"},$t={class:"stat-item"},Mt={class:"stat-value"},Pt={class:"right-panel"},Nt={class:"oscilloscope-container"},Ft={class:"combined-analog-chart"},Ht=["id"],jt={key:2,class:"loading-overlay"},zt={class:"custom-date-modal"},Ut={class:"quick-actions"},Vt={key:0,class:"range-summary"},Bt={class:"range-text"},Wt={class:"drawer-title"},qt={class:"drawer-content"},Yt={class:"items-compact-list"},Gt=["onClick"],Kt={class:"item-details"},Jt={class:"item-main-info"},Zt={class:"item-name"},Xt={key:0,class:"item-unit"},Qt={class:"item-meta"},ea={key:0,class:"item-description"},ta={key:1,class:"item-range"},aa={class:"item-status"},na={key:0,class:"status-badge empty"},ia={key:1,class:"status-badge hidden"},la={key:2,class:"status-badge active"},oa={class:"drawer-footer"},ra={class:"footer-actions"};var sa=L(l({__name:"TrendLogChart",props:{itemData:{default:null},title:{default:"Trend Log Chart"}},setup(l){const L=e=>{const t=(e=>{var t;if(e>=0&&e<=22){const t=Ue.digital.find((t=>t.id===e));return{type:"digital",id:e,range:t}}const a={31:{category:"variable",id:1},32:{category:"variable",id:2},34:{category:"variable",id:4},35:{category:"variable",id:5},36:{category:"variable",id:6},37:{category:"variable",id:7},38:{category:"variable",id:8},39:{category:"variable",id:9},40:{category:"variable",id:10},41:{category:"variable",id:11},42:{category:"variable",id:12},43:{category:"variable",id:13},44:{category:"variable",id:14},45:{category:"variable",id:15},33:{category:"variable",id:3},46:{category:"variable",id:16},47:{category:"variable",id:17},48:{category:"variable",id:18},49:{category:"variable",id:19},50:{category:"variable",id:20},51:{category:"variable",id:21},52:{category:"variable",id:22},53:{category:"variable",id:23},54:{category:"variable",id:24},55:{category:"variable",id:25},56:{category:"variable",id:26},57:{category:"variable",id:27},58:{category:"variable",id:28},59:{category:"variable",id:29},60:{category:"variable",id:30},61:{category:"variable",id:31},62:{category:"variable",id:32},63:{category:"variable",id:33}}[e];if(a){const e=null==(t=Ue.analog[a.category])?void 0:t.find((e=>e.id===a.id));return{type:"analog",category:a.category,id:a.id,range:e}}return{type:"analog"}})(e);return t.range?"digital"===t.type?t.range.label||"":t.range.unit||"":""},z=e=>({1:{name:"Output",category:"OUT"},2:{name:"Input",category:"IN"},3:{name:"Variable",category:"VAR"},4:{name:"Program",category:"PRG"},5:{name:"Controller",category:"CON"},6:{name:"Screen",category:"SCR"},7:{name:"Holiday",category:"HOL"},8:{name:"Schedule",category:"SCH"},9:{name:"Monitor",category:"MON"}}[e]||{name:`Type_${e}`,category:""}),q=e=>e.name||"Unknown",Y=(e,t,a)=>{const n=x.value.panelsData,i=x.value.panelsRanges;if(!(null==n?void 0:n.length))return"";const l=z(t);if(!(null==l?void 0:l.category))return"";const o=`${l.category}${a+1}`,r=n.find((t=>String(t.pid)===String(e)&&t.id===o));if(!r||void 0===r.unit)return"";if(null==i?void 0:i.length){const t=i.find((t=>String(t.pid)===String(e)&&t.index===r.range));if("digital"===(null==t?void 0:t.type)&&(t.on||t.off))return`${t.off}/${t.on}`}let s=[];"IN"===l.category?s=Ue.analog.input:"OUT"===l.category?s=Ue.analog.output:"VAR"===l.category&&(s=Ue.analog.variable);const u=s.find((e=>e.id===r.unit));if(u)return u.unit||u.label;const d=Ue.digital.find((e=>e.id===r.unit));return d?`${d.off}/${d.on}`:""},G=e=>e.includes("/")?e.split("/"):void 0,K=e=>{const t=Ue.digital.find((t=>t.id===e));return t?!1===t.direct?[t.on,t.off]:[t.off,t.on]:["LOW","HIGH"]},Z=e=>{if("digital"!==e.unitType)return e.unit||"";const t=e.unitCode;if("number"!=typeof t||t<0)return"";let a=t;0===t&&(a=1);const n=Ue.digital.find((e=>e.id===a));return n?n.label:""},X=e=>new Date(e>1e10?e:1e3*e).toLocaleString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/(\d{4})-(\d{2})-(\d{2}), (\d{2}):(\d{2}):(\d{2})/,"$1-$2-$3 $4:$5:$6"),Q=l,ee=o((()=>Q.itemData||O.value)),ae=a("5m"),ne=a(1);a(1);const ie=a(null),le=a(null),re=a(null),se=a(null),ue=a(!1),de=a(!0),pe=a({2:[],3:[]}),ve=a(!1),ge=a({syncing:!1,completed:!1,error:null,lastSync:null}),me=a(new Map),he=a(null),ye=e=>{if(!e)return 6e4;const{hour_interval_time:t=0,minute_interval_time:a=0,second_interval_time:n=0}=e,i=3600*t+60*a+n;return i>0?Math.max(1e3*i,15e3):6e4},be=o((()=>ye(Re.value))),we=a(!1),De=a(!0),_e=a(!1),Te=a(!1),Se=a(!1),Ee=a("No data synced yet"),Oe=Be(),xe=a("realtime"),ke=a(!1),Le=r(),Re=a(null);a("connected"),a({visible:!1,message:""});const $e=a(new Set),Me=(e,t,a)=>{const n=x.value.panelsData;if(!(null==n?void 0:n.length))return i.Debug("âš ï¸ TrendLogChart: No panelsData available for device description",{panelId:e,pointType:t,pointNumber:a}),"";const l=z(t);if(!(null==l?void 0:l.category))return"";const o=`${l.category}${a+1}`,r=n.find((t=>String(t.pid)===String(e)&&t.id===o));if(!r)return i.Debug("âš ï¸ TrendLogChart: Device not found in panelsData",{panelId:e,pointType:t,pointNumber:a,idToFind:o,availableDevices:n.map((e=>({pid:e.pid,id:e.id}))).slice(0,5)}),"";const s=r.label||r.command||r.fullLabel||r.description||r.id||"";return s||i.Debug("âš ï¸ TrendLogChart: Device found but no description fields available",{device:r}),s},Ne=(e,t,a)=>{var n;const i=x.value.panelsData;if(!(null==i?void 0:i.length))return 1;const l=z(t);if(!(null==l?void 0:l.category))return 1;const o=`${l.category}${a+1}`,r=i.find((t=>String(t.pid)===String(e)&&t.id===o));return null!=(n=null==r?void 0:r.digital_analog)?n:1},Fe=["#FF0000","#0000FF","#00AA00","#FF8000","#AA00AA","#00AAAA","#CC6600","#AA0000","#0066AA","#AA6600","#6600AA","#006600","#FF6600","#0000AA"],He=a([]),je=()=>{const e=(()=>{var e,t,a,n;const l=null==(t=null==(e=Q.itemData)?void 0:e.t3Entry)?void 0:t.input,o=null==(n=null==(a=Q.itemData)?void 0:a.t3Entry)?void 0:n.range;if(!(null==l?void 0:l.length)||!(null==o?void 0:o.length))return[];const r=Math.min(l.length,o.length);if(0===r)return[];const s=[];for(let u=0;u<r;u++){const e=l[u],{panel:t,point_type:a,point_number:n}=e,r=z(a),d=Ne(t,a,n),c=Y(t,a,n),p=Me(t,a,n),v=p;if(!p&&0===t){i.Info("ðŸš« TrendLogChart: Filtering out placeholder data (no description + panel 0)",{inputItem:e,pointType:a,pointNumber:n,panelId:t,potentialSeriesName:v});continue}if(!p){i.Info("ðŸš« TrendLogChart: Filtering out undescribed data (prevents demo names)",{inputItem:e,pointType:a,pointNumber:n,panelId:t,potentialSeriesName:v,reason:"No device description - likely demo/test data"});continue}if(v&&(v.includes("(P0)")||v.match(/^\d+\s*\([P]\d+\)$/))){i.Info("ðŸš« TrendLogChart: Filtering out explicit demo data (demo pattern)",{inputItem:e,potentialSeriesName:v,reason:'Series name matches demo data pattern like "1 (P0)" or contains (P0)'});continue}const g=0===d?"digital":"analog",m=p,f=`${r.category} - ${p}`;i.Debug(`âœ… TrendLogChart: Including real T3000 data series: "${m}"`,{panelId:t,pointType:a,pointNumber:n,unitType:g,hasDescription:!!p});const h=`${t}${r.category}${n+1}`,y=`${r.category}${n+1}`,b={name:m,color:Fe[s.length%Fe.length],data:[],visible:!0,unit:c,isEmpty:!1,unitType:g,unitCode:o[u],itemType:h,prefix:r.category,description:f,pointType:a,pointNumber:n,panelId:t,id:y};s.push(b)}return i.Info("ðŸ“Š TrendLogChart: Generated series with filtering",{totalInputItems:r,validSeriesCount:s.length,filteredOut:r-s.length}),s})(),t=new Map;He.value.forEach((e=>{const a=`${e.id}_${e.panelId}`;t.set(a,e)}));const a=e.map((e=>{const a=`${e.id}_${e.panelId}`,n=t.get(a);if(n){return n.name!==e.name||n.unitType!==e.unitType||n.unitCode!==e.unitCode||n.pointType!==e.pointType||n.description!==e.description?{...e,data:n.data||[],visible:n.visible,color:n.color||e.color}:{...n,color:n.color||e.color}}return{...e,data:[],visible:!0}}));e.length,He.value.filter((t=>e.some((e=>e.id===t.id&&e.panelId===t.panelId)))).length,He.value.length,e.filter((e=>He.value.some((t=>t.id===e.id&&t.panelId===e.panelId)))).length,He.value=a};n(ee,(e=>{e&&je()}),{immediate:!0,deep:!0}),n(He,((e,t)=>{}),{deep:!0}),n((()=>Q.itemData),((e,t)=>{}),{deep:!0}),n((()=>{var e;return null==(e=x.value)?void 0:e.panelsData}),((e,t)=>{var a;if(e&&e.length>0){ee.value&&je();const t=e.flat();if(fn(t),de.value&&t.length>0&&(null==(a=He.value)?void 0:a.length)>0){const e=He.value.map((e=>({id:e.id,panelId:e.panelId,pointType:e.pointType,pointNumber:e.pointNumber,seriesName:e.name}))).filter((e=>e.id&&e.panelId)),a=t.filter((t=>t&&"object"==typeof t&&t.hasOwnProperty("value")&&null!==t.value&&void 0!==t.value&&t.id&&e.some((e=>t.id===e.id&&t.pid===e.panelId))));mn(t.length,a.length,He.value.length),a.length>0?gn(a):i.Warn("âš ï¸ No chart-relevant items found for storage",{totalItems:t.length,chartSeriesCount:He.value.length,sampleTotalItem:t[0],sampleChartSeries:e[0]})}}}),{deep:!0}),n(O,((e,t)=>{}),{deep:!0}),n(ae,(async(e,t)=>{i.Info("= TLChart: timeBase changed - Data Loading with Auto Scroll State Preserved",{oldTimeBase:t,newTimeBase:e,autoScrollState:de.value,timestamp:(new Date).toISOString()});try{we.value=!0,He.value.forEach((e=>{e.data=[]})),de.value?(i.Info(`ðŸ“Š ${e} timebase: Auto Scroll ON - Loading real-time + historical data`),await ln(),await pn(),ga||(i.Info(`ðŸ”„ Starting real-time updates for ${e} timebase`),Bn())):(i.Info(`ðŸ“š ${e} timebase: Auto Scroll OFF - Loading historical data only`),await pn()),i.Info("ðŸŽ¨ Updating charts with loaded data",{totalSeries:He.value.length,seriesWithData:He.value.filter((e=>e.data.length>0)).length,autoScrollEnabled:de.value}),await u(),He.value=[...He.value],setTimeout((()=>{i.Info("ðŸŽ¨ Executing delayed chart update after timebase data load"),Tn()}),100)}catch(a){i.Error("Error loading data for new timebase:",a)}finally{we.value=!1}i.Info("âœ… Timebase change completed",{newTimeBase:e,autoScrollState:de.value,dataSeriesCount:He.value.length,totalDataPoints:He.value.reduce(((e,t)=>e+t.data.length),0)})}),{immediate:!1}),n((()=>{var e;return null==(e=x.value)?void 0:e.panelsList}),(async(e,t)=>{const a=e&&e.length>0?e[0].sn:null,n=t&&t.length>0?t[0].sn:null,l=e&&e.length>0?e[0].panel_number:null,o=t&&t.length>0?t[0].panel_number:null;if(a&&n&&a!==n||l&&o&&l!==o){i.Info("ðŸ”„ Device changed - Reloading historical data",{oldSN:n,newSN:a,oldPanelId:o,newPanelId:l,serialChanged:a!==n,panelChanged:l!==o,timestamp:(new Date).toISOString()});try{we.value=!0,He.value.forEach((e=>{e.data=[]})),await pn(),Tn()}catch(r){i.Error("Error loading historical data for new device:",r)}finally{we.value=!1}}}),{deep:!0,immediate:!1});const sa=e=>({"5m":{stepMinutes:1,unit:"minute"},"10m":{stepMinutes:2,unit:"minute"},"30m":{stepMinutes:5,unit:"minute"},"1h":{stepMinutes:10,unit:"minute"},"4h":{stepMinutes:30,unit:"minute"},"12h":{stepMinutes:60,unit:"hour"},"1d":{stepMinutes:120,unit:"hour"},"4d":{stepMinutes:480,unit:"hour"}}[e]||{stepMinutes:10,unit:"minute"}),ua=(e,t,a)=>{const n=new Date(e),i=hn(ae.value)>1440,l=()=>`${n.getFullYear()}-${(n.getMonth()+1).toString().padStart(2,"0")}-${n.getDate().toString().padStart(2,"0")} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`,o=()=>`${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`,r=0===t,s=t===a.length-1;return i?r||s?l():o():r?l():o()};o((()=>{const e=(()=>{var e,t,a,n;const i=60*((null==(t=null==(e=Q.itemData)?void 0:e.t3Entry)?void 0:t.minute_interval_time)||0)+((null==(n=null==(a=Q.itemData)?void 0:a.t3Entry)?void 0:n.second_interval_time)||0);return i>0?i:60*Ja(ae.value)})();return{internalSec:e,roundedSec:(e=>{if(e<=5)return 5;if(e<=10)return 10;if(e<=15)return 15;if(e<=20)return 20;if(e<=30)return 30;if(e<=60)return 60;const t=e/60;return t<=5?300:t<=10?600:t<=15?900:t<=20?1200:t<=30?1800:60*Math.round(t/60)*60})(e)}})),a();const da=a(),ca=a([]);let pa=null,va={},ga=null;const ma=o((()=>{var e,t,a,n,i;return Q.title||(null==(t=null==(e=Q.itemData)?void 0:e.t3Entry)?void 0:t.description)||(null==(n=null==(a=Q.itemData)?void 0:a.t3Entry)?void 0:n.label)||(null==(i=Q.itemData)?void 0:i.title)||"Trend Log Chart"}));o((()=>He.value.reduce(((e,t)=>e+t.data.length),0)));const fa=o((()=>He.value.filter((e=>e.visible)).length)),ha=o((()=>1===ne.value||(pe.value[ne.value]||[]).length>0)),ya=o((()=>(pe.value[ne.value]||[]).length===He.value.length&&He.value.length>0));o((()=>0===(pe.value[ne.value]||[]).length));const ba=o((()=>{if(1===ne.value)return He.value;{const e=pe.value[ne.value]||[];return He.value.filter((t=>e.includes(t.name)))}})),wa=o((()=>({"5m":"Last 5 minutes","10m":"Last 10 minutes","30m":"Last 30 minutes","1h":"Last 1 hour","4h":"Last 4 hours","12h":"Last 12 hours","1d":"Last 1 day","4d":"Last 4 days"}[ae.value]||""))),Ia=["5m","10m","30m","1h","4h","12h","1d","4d"],Da=o((()=>Ia.indexOf(ae.value)>0)),_a=o((()=>{const e=Ia.indexOf(ae.value);return e>=0&&e<Ia.length-1})),Ta=o((()=>He.value.some((e=>e.visible)))),Sa=o((()=>He.value.some((e=>!e.visible)))),Ca=o((()=>He.value.filter((e=>"analog"===e.unitType)))),Ea=o((()=>He.value.filter((e=>"digital"===e.unitType)))),Oa=o((()=>He.value.filter((e=>2===e.pointType)))),xa=o((()=>He.value.filter((e=>1===e.pointType)))),ka=o((()=>He.value.filter((e=>3===e.pointType)))),Aa=o((()=>Ca.value.length>0)),La=o((()=>Ea.value.length>0)),Ra=o((()=>Oa.value.length>0)),$a=o((()=>xa.value.length>0)),Ma=o((()=>ka.value.length>0)),Pa=o((()=>Ca.value.length)),Na=o((()=>Ea.value.length)),Fa=o((()=>Oa.value.length)),Ha=o((()=>xa.value.length)),ja=o((()=>ka.value.length)),za=o((()=>{var e,t;const a=null==(t=null==(e=Q.itemData)?void 0:e.t3Entry)?void 0:t.input;return a&&a.length>0&&0===He.value.length})),Ua=o((()=>we.value||za.value)),Va=o((()=>Ca.value.length>0&&Ca.value.every((e=>e.visible)))),Ba=o((()=>Ea.value.length>0&&Ea.value.every((e=>e.visible)))),Wa=o((()=>Oa.value.length>0&&Oa.value.every((e=>e.visible)))),qa=o((()=>xa.value.length>0&&xa.value.every((e=>e.visible)))),Ya=o((()=>ka.value.length>0&&ka.value.every((e=>e.visible)))),Ga=o((()=>Ca.value.filter((e=>e.visible)))),Ka=o((()=>Ea.value.filter((e=>e.visible)))),Ja=e=>({"5m":1,"10m":1,"30m":2,"1h":5,"4h":15,"12h":30,"1d":60,"4d":240}[e]||1),Za=()=>{const e=He.value.filter((e=>e.visible)).flatMap((e=>e.data)).map((e=>e.timestamp));return 0===e.length?{min:void 0,max:void 0}:{min:Math.min(...e),max:Math.max(...e)}},Xa={id:"yAxisUnits",afterDraw:e=>{const t=e.scales.y;if(!t)return;const a=e.ctx;a.save();const n=new Map,i=Ga.value;if(i.forEach((e=>{e.unit&&!n.has(e.unit)&&n.set(e.unit,{color:e.color,count:0}),e.unit&&n.has(e.unit)&&n.get(e.unit).count++})),0===n.size)return void a.restore();const l=Array.from(n.keys());let o="",r=t.left;const s=e.chartArea.top-15;if(a.font="11px Inter, Helvetica, Arial, sans-serif",a.textAlign="left",a.textBaseline="middle",1===l.length){const e=l[0],t=n.get(e),u=i.length;a.fillStyle=t.color,o=t.count===u&&u>1?`${e} (${u} sensors)`:e,a.fillText(o,r,s)}else if(l.length<=3)l.forEach(((e,t)=>{const i=n.get(e);a.fillStyle=i.color,a.fillText(e,r,s);const o=a.measureText(e).width;r+=o,t<l.length-1&&(a.fillStyle="#666666",a.fillText(" | ",r,s),r+=a.measureText(" | ").width)}));else{for(let e=0;e<2;e++){const t=l[e],i=n.get(t);a.fillStyle=i.color,a.fillText(t,r,s);const o=a.measureText(t).width;r+=o,e<1&&(a.fillStyle="#666666",a.fillText(" | ",r,s),r+=a.measureText(" | ").width)}const t=l.length-2;a.fillStyle="#999999",a.fillText(` ... +${t} more`,r,s),e.fullUnitInfo=n}a.restore()}},Qa=a(0),en=()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0),a=new Date(t.getTime()+60*Qa.value*1e3),n=new Date(a.getTime()+6e4),i=hn(ae.value);return{min:new Date(n.getTime()-60*i*1e3).getTime(),max:n.getTime()}},tn=()=>{var e,t;return"ms-appx-web:"===window.location.protocol||void 0!==(null==(e=window.chrome)?void 0:e.webview)||void 0!==(null==(t=window.external)?void 0:t.sendMessage)?new k:A.WsClient},an=async()=>{var e,t,a,n,l;try{i.Info("ðŸ“¡ fetchRealTimeMonitorData: Starting data fetch",{hasMonitorConfig:!!Re.value,hasPanelsData:!!(null==(e=x.value.panelsData)?void 0:e.length),panelsDataLength:(null==(t=x.value.panelsData)?void 0:t.length)||0,timestamp:(new Date).toISOString()}),we.value=!0;const o=Re.value;if(!o)return i.Error("âŒ fetchRealTimeMonitorData: No monitor config available"),we.value=!1,[];const r=x.value.panelsData||[];let s=!1;if(s=r.length>0||await(async(e=1e4)=>{const t=Date.now();for(;Date.now()-t<e;){if((x.value.panelsData||[]).length>0)return!0;await new Promise((e=>setTimeout(e,200)))}return!1})(5e3),!s)return i.Error("âŒ fetchRealTimeMonitorData: Timeout waiting for panels data",{waitTimeout:"5000ms",currentPanelsDataLength:(null==(a=x.value.panelsData)?void 0:a.length)||0,T3000DataExists:!!x.value}),we.value=!1,[];const u=tn();if(i.Info("ðŸ”Œ fetchRealTimeMonitorData: Data client initialized",{hasDataClient:!!u,clientType:(null==(n=null==u?void 0:u.constructor)?void 0:n.name)||"unknown",isBuiltInBrowser:"ms-appx-web:"===window.location.protocol||void 0!==(null==(l=window.chrome)?void 0:l.webview)}),!u)return i.Error("âŒ fetchRealTimeMonitorData: Failed to initialize data client"),[];const d=x.value.panelsList||[],c=d.length>0?d[0].panel_number:1,p=(x.value.panelsData||[]).filter((e=>String(e.pid)===String(c)));if(!p)return[];let v=p;if(!Array.isArray(v)||0===v.length)return[];return await nn(u,o,{panelId:c,panelData:v})}catch(o){return[]}finally{we.value=!1}},nn=async(e,t,a)=>{var n;try{i.Info("ðŸ“¦ TrendLogChart: fetchAllItemsDataBatch called",{inputItemsCount:(null==(n=t.inputItems)?void 0:n.length)||0,panelId:a.panelId,timestamp:(new Date).toISOString()});const o=[],r=[];if(t.inputItems.forEach(((e,n)=>{const l=n,s=t.ranges[l]||0,u=on(e,a.panelData);if(u){const t=parseInt(u.index)||0,d=e.point_type;o.push({panelId:a.panelId,index:t,type:d}),r.push({inputItem:e,matchingDevice:u,rangeValue:s,itemIndex:l}),i.Info(`ðŸ“¦ Added item ${n} to batch request`,{deviceIndex:t,deviceType:d,panelId:a.panelId})}else i.Warn(`âš ï¸ No matching device found for item ${n}`),r.push(null)})),0===o.length)return i.Warn("âš ï¸ No valid items for batch request"),[];if(i.Info("ðŸ“¡ Sending BATCH GET_ENTRIES request",{itemCount:o.length,requestData:o}),e&&e.GetEntries)try{e.GetEntries(a.panelId,null,o),i.Info("ï¿½?BATCH GET_ENTRIES request sent successfully",{panelId:a.panelId,itemCount:o.length})}catch(l){i.Error("ï¿½?Error sending batch GET_ENTRIES request:",l)}const s=[];return r.forEach(((e,t)=>{if(e){const t=cn(e.matchingDevice,e.rangeValue);s.push([{timestamp:Date.now(),value:t.value}])}else s.push([{timestamp:Date.now(),value:0}])})),s}catch(l){return i.Error("ï¿½?Error in fetchAllItemsDataBatch:",l),[]}},ln=async()=>{var e,t;i.Info("ðŸ”§ initializeRealDataSeries: Starting initialization",{hasMonitorConfig:!!Re.value,monitorConfigData:Re.value,hasPanelsData:!!(null==(e=x.value.panelsData)?void 0:e.length),panelsDataLength:(null==(t=x.value.panelsData)?void 0:t.length)||0,hasConnectionError:ke.value,timestamp:(new Date).toISOString()});const a=Re.value;if(!a)return i.Warn("âŒ initializeRealDataSeries: No monitor config available",{monitorConfig:Re.value,T3000DataExists:!!x.value,propsItemData:!!Q.itemData}),void(He.value=[]);try{const e=await an();if(!e.some((e=>e.length>0)))return void(He.value=[]);const t=[];for(let n=0;n<a.inputItems.length;n++){const l=a.inputItems[n],o=z(l.point_type),r=a.ranges[n]||0,s=e[n]||[],u=o.category,d=Me(l.panel,l.point_type,l.point_number);if(0===s.length){i.Debug("ðŸš« Skipping item with no data:",{itemIndex:n,panel:l.panel,point_type:l.point_type,point_number:l.point_number,hasDescription:!!d});continue}const c=d||`${l.point_number+1} (P${l.panel})`,p=d||`${l.point_number+1}`,v=Ne(l.panel,l.point_type,l.point_number),g=0===v;let m,f;i.Info("= TLChart: Series generation - Digital/Analog analysis",{inputItemIndex:n,panelId:l.panel,pointType:l.point_type,pointNumber:l.point_number,digitalAnalog:v,isDigital:g}),g?(m="digital",f=Y(l.panel,l.point_type,l.point_number)):(m="analog",f=Y(l.panel,l.point_type,l.point_number)),i.Info("= TLChart: Series generation - Unit determination result",{unitType:m,unitSymbol:f});const h={name:c,color:`hsl(${360*t.length/a.inputItems.length}, 70%, 50%)`,data:s,visible:!0,isEmpty:!1,unit:f,unitType:m,unitCode:r,itemType:o.name,prefix:u,description:p,pointType:l.point_type,pointNumber:l.point_number,panelId:l.panel,id:sn(l.point_type,l.point_number)};t.push(h)}i.Info("= TLChart: initializeRealDataSeries updating dataSeries",{previousSeriesCount:He.value.length,newSeriesCount:t.length,newSeriesNames:t.map((e=>e.name)),timestamp:(new Date).toISOString()}),He.value.length>0&&(i.Info("ðŸ”„ Preserving existing historical data while updating series structure",{existingSeriesCount:He.value.length,existingDataPoints:He.value.reduce(((e,t)=>{var a;return e+((null==(a=t.data)?void 0:a.length)||0)}),0)}),t.forEach((e=>{const t=He.value.find((t=>t.id===e.id));t&&t.data&&t.data.length>0&&(e.data=t.data,i.Info(`ðŸ“ˆ Preserved ${t.data.length} historical data points for ${e.name}`,{seriesId:e.id,timeRange:t.data.length>0?{first:new Date(t.data[0].timestamp).toISOString(),last:new Date(t.data[t.data.length-1].timestamp).toISOString()}:null}))}))),He.value=t,Ee.value=(new Date).toLocaleTimeString()}catch(n){i.Error("= TLChart: Error initializing real data series:",n),i.Warn("= TLChart: Keeping loading state - data might still be loading"),He.value=[]}},on=(e,t)=>{const a=sn(e.point_type,e.point_number),n=t.find((e=>e.id===a));return n||(i.Warn("= TLChart: Device not found in panelsData",{deviceId:a}),null)},rn=e=>e>=1e3?e/1e3:e,sn=(e,t)=>`${un(e)}${t+1}`,un=e=>{switch(e-1){case 0:return"OUT";case 1:return"IN";case 2:return"VAR";case 3:return"PID";case 4:return"SCH";case 5:return"HOL";case 6:return"PRG";case 7:return"TBL";case 8:return"DMON";case 9:return"AMON";case 10:return"GRP";case 11:return"AY";case 12:return"ALARMM";case 13:return"UNIT";case 14:return"USER_NAME";case 15:return"ALARMS";case 16:return"WR_TIME";case 17:return"AR_Y";default:return""}},dn=e=>{switch(e-1){case 0:return"OUTPUT";case 1:return"INPUT";case 2:return"VARIABLE";case 3:return"PID";case 4:return"SCHEDULE";case 5:return"HOLIDAY";case 6:return"PROGRAM";case 7:return"TABLE";case 8:return"DMON";case 9:return"AMON";case 10:return"GROUP";case 11:return"ARRAY";case 12:return"ALARMM";case 13:return"UNIT";case 14:return"USER_NAME";case 15:return"ALARMS";case 16:return"WR_TIME";case 17:return"AR_Y";default:return"UNKNOWN"}},cn=(e,t)=>{const a=((e,t)=>{if(e&&void 0!==e.digital_analog)return 1===e.digital_analog;const a=0===t;return e&&e.control,a})(e,t),n=((e,t)=>{let a;if(t)a=rn(parseFloat(e.value)||0);else if("OUT1"===e.id||"OUT2"===e.id){const t=rn(parseFloat(e.control)||0),n=rn(parseFloat(e.value)||0),i=rn(parseFloat(e.auto_manual)||0);a=n>0?n:i>0?i:t}else a=rn(parseFloat(e.control)||0);return a})(e,a);if(a){let t;t=n>1e3?n/1e3:n;const a=((e,t)=>{if(t){const a=t.toLowerCase();if(Ue.analog[a]){const t=Ue.analog[a].find((t=>t.id===e));if(t)return t.unit}}return L(e)})(e.range,e.type);return{value:t,displayValue:`${t.toFixed(2)}`,unit:a}}{const t=K(e.range);return{value:n,displayValue:n>0?`1 (${t[1]})`:`0 (${t[0]})`,unit:""}}},pn=async()=>{var e,t;try{const a=x.value.panelsList||[],n=a.length>0?a[0].panel_number:1,l=a.length>0?a[0].serial_number:0;if(!l)return void i.Debug("No serial number available for historical data loading");const o=Re.value;if(!(null==(e=null==o?void 0:o.inputItems)?void 0:e.length))return void i.Debug("No monitor configuration available for historical data loading");const r=hn(ae.value),s=new Date,u=new Date(s.getTime()+60*Qa.value*1e3),d=new Date(u.getTime()-60*r*1e3),c=u,p=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`,v=p(d),g=p(c);let m=[];He.value&&He.value.length>0&&He.value.forEach(((e,t)=>{if(e.id&&"1"!==e.id&&e.name&&!e.name.includes("(P0)")&&!e.name.match(/^\d+\s*\([P]\d+\)$/)&&e.description){let a="VARIABLE",i=t,l=e.id;if(e.id.startsWith("VAR")){a="VARIABLE";const n=e.id.match(/VAR(\d+)/);i=n?parseInt(n[1])-1:t,l=e.id}else if(e.id.startsWith("IN")){a="INPUT";const n=e.id.match(/IN(\d+)/);i=n?parseInt(n[1])-1:t,l=e.id}else if(e.id.startsWith("OUT")){a="OUTPUT";const n=e.id.match(/OUT(\d+)/);i=n?parseInt(n[1])-1:t,l=e.id}m.push({point_id:l,point_type:a,point_index:i,panel_id:n})}})),0===m.length&&(i.Warn("No valid data series found, using minimal working point set"),m=[{point_id:"VAR1",point_type:"VARIABLE",point_index:0,panel_id:n},{point_id:"VAR3",point_type:"VARIABLE",point_index:2,panel_id:n}]);let f="1";if(o.id&&"string"==typeof o.id){const e=o.id.match(/MON(\d+)|TRL(\d+)/i);if(e){f=(parseInt(e[1]||e[2])-1).toString()}}i.Debug("ðŸ” Trendlog ID extraction for historical data request:",{originalId:o.id,extractedId:f,willUseUrl:`/trendlogs/${f}/history`});const h=r/60,y=12,b=Math.ceil(h*y*m.length),w=Math.max(200,1.5*b),I={serial_number:l,panel_id:n,trendlog_id:f,start_time:v,end_time:g,limit:w,point_types:["INPUT","OUTPUT","VARIABLE","MONITOR"],specific_points:m};i.Debug("ðŸ” Historical data request:",{timeRange:`${v} to ${g}`,timeRangeMinutes:r,pointsCount:m.length,limit:I.limit,trendlogId:f});const D=await Oe.getTrendlogHistory(I);(null==(t=null==D?void 0:D.data)?void 0:t.length)>0?(i.Info("ðŸ“š Historical data loaded:",{dataPointsCount:D.data.length,timeRange:`${r} minutes`}),vn(D.data)):i.Debug("ðŸ“­ No historical data found for current timebase")}catch(a){i.Error("Failed to load historical data from database:",a)}},vn=e=>{try{const t=new Map;e.forEach((e=>{const a=`${e.point_id}_${e.point_type}`;t.has(a)||t.set(a,[]),t.get(a).push(e)})),i.Info("ðŸ” Starting historical data population",{totalHistoricalItems:e.length,availableDataSeries:He.value.length,seriesIds:He.value.map((e=>e.id)),dataGroupKeys:Array.from(t.keys())}),He.value.forEach(((e,a)=>{var n;const l=`${e.id}_${dn(e.pointType||1)}`,o=t.get(l)||[];if(i.Debug(`ðŸ“Š Processing series ${a}: ${e.name}`,{seriesId:e.id,seriesKey:l,pointType:e.pointType,mappedPointType:dn(e.pointType||1),historicalDataCount:o.length,currentDataCount:(null==(n=e.data)?void 0:n.length)||0}),o.length>0){const t=o.map((e=>({timestamp:new Date(e.time).getTime(),value:parseFloat(e.value)||0,id:e.point_id,type:e.point_type,digital_analog:e.digital_analog||1,description:`Historical: ${e.point_id}`}))).sort(((e,t)=>e.timestamp-t.timestamp));e.data=t,i.Info(`ðŸ“ˆ Successfully loaded ${t.length} historical points for ${e.name}`,{seriesIndex:a,timeRange:t.length>0?{first:new Date(t[0].timestamp).toISOString(),last:new Date(t[t.length-1].timestamp).toISOString()}:null})}else i.Warn(`ðŸ“­ No historical data found for series: ${e.name}`,{seriesKey:l,availableKeys:Array.from(t.keys())})})),i.Info("ðŸ“Š Historical data population completed",{seriesWithData:He.value.filter((e=>e.data.length>0)).length,totalSeries:He.value.length})}catch(t){i.Error("Error populating data series with historical data:",t)}},gn=async e=>{try{i.Info("ðŸ”„ storeRealtimeDataToDatabase called",{itemsCount:e.length,timestamp:(new Date).toISOString(),sampleItems:e.slice(0,2)});const t=x.value.panelsList||[],a=t.length>0?t[0].panel_number:1,n=t.length>0?t[0].serial_number:0;if(i.Info("ðŸ“Š Device info for storage",{panelsListLength:t.length,currentPanelId:a,currentSN:n,hasPanelsList:!!t.length}),!n)return void i.Warn("âŒ No serial number available for data storage",{panelsList:t.slice(0,2),T3000DataExists:!!x.value});const l=e.map((e=>{var t,l,o,r,s,u,d,c,p;const v=e.id||"UNKNOWN",g=((e,t)=>e.startsWith("IN")?"INPUT":e.startsWith("OUT")?"OUTPUT":e.startsWith("VAR")?"VARIABLE":e.startsWith("PID")?"PID":e.startsWith("SCH")?"SCHEDULE":e.startsWith("HOL")?"HOLIDAY":e.startsWith("PRG")?"PROGRAM":e.startsWith("TBL")?"TABLE":t?dn(t):"INPUT")(v,e.point_type),m=(e=>{const t=e.match(/(\d+)$/);return t?parseInt(t[1],10):0})(v),f=((e,t)=>{const a=He.value.find((e=>e.id===t));return(null==a?void 0:a.unit)?a.unit:e.units||void 0})(e,v),h=(()=>{var e;let t=null,a="fallback";if(Re.value?(t=Re.value,a="monitorConfig"):(null==(e=Q.itemData)?void 0:e.t3Entry)&&(t=Q.itemData.t3Entry,a="itemData.t3Entry"),t){const e=t.hour_interval_time||0,n=t.minute_interval_time||0,l=t.second_interval_time||0,o=3600*e+60*n+l,r=o>0?Math.max(o,15):60;return i.Debug("ðŸ• Calculating sync interval from T3000 config",{dataSource:a,hourInterval:e,minuteInterval:n,secondInterval:l,totalSeconds:o,syncIntervalSeconds:r,timeBase:ae.value,configExists:!!t}),r}const n=be.value,l=Math.round(n/1e3);return i.Debug("ðŸ• Using fallback sync interval calculation",{dataSource:"updateInterval computed",fallbackMs:n,fallbackSeconds:l,timeBase:ae.value}),l})();return i.Debug("ðŸ”§ Processing item for database storage",{pointId:v,rawPointType:e.point_type,mappedPointType:g,calculatedIndex:m,rawIndex:e.index,rawValue:e.value,rawUnits:e.units,calculatedUnits:f,digitalAnalog:e.digital_analog,range:e.range,syncInterval:h,timeBase:ae.value,t3000Intervals:{hour:(null==(t=Re.value)?void 0:t.hour_interval_time)||(null==(o=null==(l=Q.itemData)?void 0:l.t3Entry)?void 0:o.hour_interval_time)||0,minute:(null==(r=Re.value)?void 0:r.minute_interval_time)||(null==(u=null==(s=Q.itemData)?void 0:s.t3Entry)?void 0:u.minute_interval_time)||0,second:(null==(d=Re.value)?void 0:d.second_interval_time)||(null==(p=null==(c=Q.itemData)?void 0:c.t3Entry)?void 0:p.second_interval_time)||0}}),{serial_number:n,panel_id:e.pid||a,point_id:v,point_index:m,point_type:g,value:String(e.value||0),range_field:e.range?String(e.range):void 0,digital_analog:e.digital_analog?String(e.digital_analog):void 0,units:f,data_source:"REALTIME",created_by:"FRONTEND",sync_interval:h}}));if(l.length>0){i.Info("ðŸ“¤ Sending real-time batch to API",{pointsCount:l.length,serialNumber:n,apiEndpoint:"localhost:9103/api/trendlog/realtime/batch",sampleDataPoint:l[0],detailedDataPoints:l.map((e=>({point_id:e.point_id,panel_id:e.panel_id,point_index:e.point_index,point_type:e.point_type,value:e.value,digital_analog:e.digital_analog,units:e.units,range_field:e.range_field,data_source:e.data_source,created_by:e.created_by,sync_interval:e.sync_interval})))});const e=await Oe.saveRealtimeBatch(l);i.Info(`âœ… Successfully stored ${e} real-time data points`,{pointsCount:l.length,rowsAffected:e,serialNumber:n,timestamp:(new Date).toISOString(),success:e>0})}else i.Warn("âš ï¸ No valid data points to store",{originalItemsCount:e.length,serialNumber:n})}catch(t){i.Error("Failed to store real-time data to database:",t)}},mn=(e,t,a)=>{i.Info("ðŸ” Filtering validation results",{originalDataCount:e,filteredDataCount:t,chartSeriesCount:a,reductionRatio:t>0?`${(t/e*100).toFixed(1)}%`:"0%",expectedRange:`â‰¤ ${a} items`,isReasonableFilter:t>0&&t<=a&&t<e,message:0===t?"No matches found - check filtering logic":t>a?"More items than chart series - check filtering logic":t===e?"No filtering occurred - check filtering logic":"Filtering working correctly"})},fn=e=>{var t,a;if(!(null==(t=He.value)?void 0:t.length)||!Array.isArray(e)||!e.length)return void i.Debug("ðŸ“ˆ TrendLogChart: No data to process",{hasSeriesConfig:!!(null==(a=He.value)?void 0:a.length),dataItemsCount:(null==e?void 0:e.length)||0});const n=new Date;let l=0,o=0;He.value.forEach(((t,a)=>{if(!t.id||!t.panelId)return i.Debug(`âš ï¸ Series ${a} missing id or panelId`,{seriesName:t.name,hasId:!!t.id,hasPanelId:!!t.panelId}),void o++;const r=e.find((e=>e.id===t.id&&e.pid===t.panelId));if(!r)return i.Debug(`No match found for series ${t.name}`,{searchingFor:{id:t.id,panelId:t.panelId},seriesIndex:a}),void o++;let s;s=1===r.digital_analog?r.value:r.control;const u=s||0,d=rn(u);u>=1e3&&i.Info(`ðŸ” Value Scaling Analysis for ${t.name}`,{rawValue:u,scaledValue:d,precisionLoss:u-1e3*d,seriesName:t.name,note:"Large values scaled down - check for precision loss"});const c={timestamp:n.getTime(),value:d,id:r.id,type:r.type,digital_analog:r.digital_analog||1,description:r.description||r.label||`Point ${r.id}`};t.data=t.data||[];const p=t.data.findIndex((e=>Math.abs(e.timestamp-c.timestamp)<1e3));p>=0?t.data[p]=c:(t.data.push(c),t.data.sort(((e,t)=>e.timestamp-t.timestamp))),t.data.length>200&&(t.data=t.data.slice(-200)),r.description&&!t.description&&(t.description=r.description),r.label&&t.name===t.description&&(t.name=r.label),l++,i.Debug(`âœ… Matched series ${t.name}`,{matchedItem:{id:r.id,pid:r.pid,digital_analog:r.digital_analog,rawValue:1===r.digital_analog?r.value:r.control,scaledValue:s}})})),i.Debug("ðŸ“Š TrendLogChart: Data processing complete",{matched:l,unmatched:o,totalSeries:He.value,validDataItems:e}),pa||Object.keys(va).length>0?Tn():i.Debug("âš ï¸ Chart instances not available for update")},hn=e=>({"5m":5,"10m":10,"30m":30,"1h":60,"4h":240,"12h":720,"1d":1440,"4d":5760}[e]||60),yn=async()=>{var e,t,a,n;i.Info("= TLChart: Starting hybrid data initialization (DB + real-time)",{currentDataSeriesLength:He.value.length,hasMonitorConfig:!!Re.value,timeBase:ae.value}),xe.value="realtime";const l=Re.value;if(l&&l.inputItems&&l.inputItems.length>0)try{we.value=!0,i.Info("ðŸ“š Loading historical data from database for current timebase"),await pn(),i.Info("ðŸ“¡ Starting real-time data monitoring"),await ln(),Tn(),u((()=>{Tn()})),we.value=!1}catch(o){i.Error("= TLChart: Error in hybrid data initialization:",o),ke.value=!0,He.value=[],we.value=!1}else i.Info("ðŸ“Š Empty State Configuration:",{configExists:!!l,hasInputItems:!!(null==l?void 0:l.inputItems),inputItemsLength:(null==(e=null==l?void 0:l.inputItems)?void 0:e.length)||0,scheduleDataExists:!!ee.value,scheduleId:null==(a=null==(t=ee.value)?void 0:t.t3Entry)?void 0:a.id,panelsDataLength:(null==(n=x.value.panelsData)?void 0:n.length)||0,dataType:"NO_DATA_AVAILABLE"}),ke.value=!0,He.value=[],we.value=!1;0!==He.value.length?ke.value?i.Info("ðŸ“Š TrendLogChart: Skipping data generation - connection error (should show empty chart)"):(i.Info("ðŸ“Š TrendLogChart: Mock/demo data generation removed - chart will only show real data"),Tn()):i.Info("ðŸ“Š TrendLogChart: No data series available - maintaining empty state",{dataSeriesLength:He.value.length,hasMonitorConfig:!!Re.value})},bn=async()=>{if(i.Info("ðŸ”„ addRealtimeDataPoint CALLED",{isRealTime:de.value,dataSeriesLength:He.value.length,hasMonitorConfig:!!Re.value,timestamp:(new Date).toISOString()}),!de.value)return void i.Warn("âŒ addRealtimeDataPoint: Not in real-time mode");if(0===He.value.length)return void i.Warn("âŒ addRealtimeDataPoint: No data series exist");const e=Re.value;if(e)if(e.inputItems&&0!==e.inputItems.length){try{i.Info("ðŸ“¡ addRealtimeDataPoint: About to send batch request"),await(async e=>{var t;i.Info("ðŸš€ sendPeriodicBatchRequest CALLED",{hasMonitorConfig:!!e,inputItemsCount:(null==(t=null==e?void 0:e.inputItems)?void 0:t.length)||0,timestamp:(new Date).toISOString()});try{const t=x.value.panelsList||[],a=t.length>0?t[0].panel_number:1,n=(x.value.panelsData||[]).filter((e=>String(e.pid)===String(a)));if(!n||0===n.length)return void i.Debug("GET_ENTRIES Batch Request -> No panel data available");const l=tn();if(!l)return void i.Debug("GET_ENTRIES Batch Request -> No data client available");const o=[];if(e.inputItems.forEach(((e,t)=>{const i=on(e,n);var l;i&&o.push({panelId:a,index:parseInt(i.index)||0,type:(l=e.point_type,l-1)})})),i.Debug("GET_ENTRIES Batch Request -> Sending periodic batch:",{itemCount:o.length,panelId:a,batchSample:o.slice(0,3),timestamp:(new Date).toISOString(),monitorConfigData:e}),0===o.length)return void i.Debug("GET_ENTRIES Batch Request -> No valid items for batch request");l.GetEntries?(i.Info("ðŸ“¡ Sending GET_ENTRIES request",{panelId:a,itemCount:o.length,timestamp:(new Date).toISOString()}),l.GetEntries(a,null,o)):i.Error("GET_ENTRIES Batch Request -> ERROR: GetEntries method not available")}catch(a){i.Error("GET_ENTRIES Batch Request -> ERROR in sendBatchGetEntriesRequest:",a)}})(e),Ee.value=(new Date).toLocaleTimeString(),ke.value&&(i.Info("TrendLogChart: Auto-recovering from connection error - batch request sent successfully"),ke.value=!1)}catch(t){i.Warn("TrendLogChart: Failed to send batch request, setting connection error:",t),ke.value=!0}Tn()}else i.Warn("âŒ addRealtimeDataPoint: No input items in monitor config");else i.Warn("âŒ addRealtimeDataPoint: No monitor config data")},wn=()=>{In(),Dn()},In=()=>{if(!da.value)return;if(0===da.value.offsetWidth||0===da.value.offsetHeight)return void setTimeout((()=>In()),100);const e=da.value.getContext("2d");if(e)try{pa&&pa.destroy();const t={type:"line",data:{datasets:[]},plugins:[Xa],options:{responsive:!0,maintainAspectRatio:!1,animation:!1,elements:{line:{borderWidth:2,skipNull:!1}},layout:{padding:{left:2,right:20,top:10,bottom:10}},interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!0,position:"top",labels:{color:"#000000",font:{size:11,family:"Inter, Helvetica, Arial, sans-serif"},usePointStyle:!1,boxWidth:2,boxHeight:12}},tooltip:{backgroundColor:"#ffffff",titleColor:"#000000",bodyColor:"#000000",borderColor:"#d9d9d9",borderWidth:1,cornerRadius:4,displayColors:!0,usePointStyle:!0,callbacks:{title:e=>{const t=e[0].parsed.x;return"number"==typeof t&&t>1e9?X(t):new Date(t).toLocaleString()},label:e=>{const t=Ga.value.find((t=>t.name===e.dataset.label));if(!t)return`${e.dataset.label}: ${e.parsed.y}`;const a=t.description||t.prefix||e.dataset.label,n=t.unit||"";return`${a}: ${e.parsed.y.toFixed(2)} ${n}`}}}},scales:{x:{type:"time",display:!0,grid:{color:De.value?"#e0e0e0":"transparent",display:De.value,lineWidth:1},ticks:{color:"#595959",font:{size:11,family:"Inter, Helvetica, Arial, sans-serif"},maxRotation:0,minRotation:0,maxTicksLimit:14,autoSkip:!1,callback:ua}},y:{grid:{color:De.value?"#e0e0e0":"transparent",display:De.value,lineWidth:1},ticks:{color:"#595959",font:{size:11,family:"Inter, Helvetica, Arial, sans-serif"},padding:2,callback:function(e){return Number(e).toFixed(2)}},afterDataLimits:function(e){const t=e.chart.data.datasets;if(0===t.length)return;const a=[];if(t.forEach((e=>{e.data&&e.data.length>0&&e.data.forEach((e=>{e&&"number"==typeof e.y&&a.push(e.y)}))})),0===a.length)return;const n=Math.min(...a),i=Math.max(...a),l=i-n;if(l>0&&l<2){const t=(n+i)/2,a=Math.max(2*l,1);e.min=t-a/2,e.max=t+a/2}}}}}};pa=new E(e,t)}catch(t){}},Dn=()=>{Object.values(va).forEach((e=>{e.destroy()})),va={},Ka.value.forEach(((e,t)=>{const a=ca.value[t];if(!a)return;const n=a.getContext("2d");if(n)try{const a=((e,t=!1)=>{const a=K(e.unitCode||1);return{type:"line",data:{datasets:[]},options:{responsive:!0,maintainAspectRatio:!1,animation:!1,elements:{line:{borderWidth:2,skipNull:!1}},layout:{padding:{left:5,right:20,top:5,bottom:5}},interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#ffffff",titleColor:"#000000",bodyColor:"#000000",borderColor:"#d9d9d9",borderWidth:1,cornerRadius:4,displayColors:!0,usePointStyle:!0,callbacks:{title:e=>{const t=e[0].parsed.x;return"number"==typeof t&&t>1e9?X(t):new Date(t).toLocaleString()},label:t=>{const n=1===t.parsed.y?1:0,i=a[n];return`${e.name}: ${i}`}}}},scales:{x:{type:"time",display:!0,grid:{color:"#e0e0e0",display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0},ticks:{display:!0,color:t?"#595959":"transparent",font:{size:10,family:"Inter, Helvetica, Arial, sans-serif"},maxRotation:0,minRotation:0,callback:ua}},y:{min:-.5,max:1.5,display:!0,grid:{color:"#F0F0F0",display:!0,lineWidth:.3},ticks:{display:!0,color:"#595959",font:{size:8,family:"Inter, Helvetica, Arial, sans-serif"},padding:5,maxTicksLimit:2,callback:function(e){return e>.5?a[1]:a[0]}}}}}}})(e,t===Ka.value.length-1);va[t]=new E(n,a)}catch(i){}}))},_n=()=>{pa&&(pa.destroy(),pa=null),Object.values(va).forEach((e=>{e.destroy()})),va={}},Tn=()=>{i.Info("ðŸŽ¨ updateCharts: Starting chart updates",{hasAnalogChart:!!pa,digitalChartsCount:Object.keys(va).length,totalDataSeries:He.value.length,seriesWithData:He.value.filter((e=>e.data.length>0)).length}),!pa&&Ga.value.length>0&&In(),Sn(),Cn(),i.Info("ðŸŽ¨ updateCharts: Chart updates completed")},Sn=()=>{var e,t;if(!pa)return void i.Debug("ðŸ“Š updateAnalogChart: No analog chart instance available");const a=Ga.value.filter((e=>e.data.length>0));if(i.Info("ðŸ“Š updateAnalogChart: Processing analog series",{totalVisibleSeries:Ga.value.length,seriesWithData:a.length,seriesDetails:Ga.value.map((e=>({name:e.name,id:e.id,dataCount:e.data.length,visible:e.visible})))}),pa.data.datasets=a.map((e=>{const t=e.data.slice().sort(((e,t)=>e.timestamp-t.timestamp)).map((e=>({x:e.timestamp,y:e.value})));return{label:e.name,data:t,borderColor:e.color,backgroundColor:e.color+"20",borderWidth:2,fill:!1,tension:Te.value?.4:0,pointRadius:Se.value?3:0,pointHoverRadius:6,pointBackgroundColor:e.color,pointBorderColor:"#fff",pointBorderWidth:2,pointStyle:"circle",spanGaps:!1}})),null==(e=pa.options.scales)?void 0:e.x){const e=pa.options.scales.x,t=sa(ae.value),a=(ae.value,"yyyy-MM-dd HH:mm");e.time={unit:t.unit,stepSize:t.stepMinutes,displayFormats:{minute:a,hour:a,day:"yyyy-MM-dd HH:mm"},minUnit:"second"};const n={"5m":6,"10m":6,"30m":7,"1h":7,"4h":9,"12h":13,"1d":13,"4d":13};e.ticks={...e.ticks,maxTicksLimit:n[ae.value]||7,maxRotation:0,minRotation:0,callback:ua,includeBounds:!0},e.grid={color:De.value?"#e0e0e0":"transparent",display:De.value,lineWidth:1};const i=en();e.min=i.min,e.max=i.max}if(null==(t=pa.options.scales)?void 0:t.y){pa.options.scales.y.grid={color:De.value?"#e0e0e0":"transparent",display:De.value,lineWidth:1}}pa.update("none")},Cn=()=>{Ka.value.forEach(((e,t)=>{var a;const n=va[t];if(!n||0===e.data.length)return;const i=e.data.slice().sort(((e,t)=>e.timestamp-t.timestamp)).map((e=>({x:e.timestamp,y:e.value>.5?1.2:.2})));if(n.data.datasets=[{label:e.name,data:i,borderColor:e.color,backgroundColor:"transparent",borderWidth:2,fill:!1,stepped:"middle",pointRadius:0,pointHoverRadius:4,spanGaps:!1}],null==(a=n.options.scales)?void 0:a.x){const e=n.options.scales.x,t=sa(ae.value),a=(ae.value,"yyyy-MM-dd HH:mm");e.time={unit:t.unit,stepSize:t.stepMinutes,displayFormats:{minute:a,hour:a,day:"yyyy-MM-dd HH:mm"},minUnit:"second"};const i={"5m":6,"10m":6,"30m":7,"1h":7,"4h":9,"12h":13,"1d":13,"4d":13};e.ticks={...e.ticks,maxTicksLimit:i[ae.value]||7,maxRotation:0,minRotation:0,callback:ua,includeBounds:!0},e.grid={color:De.value?"#e0e0e0":"transparent",display:De.value,lineWidth:.5};const l=en();e.min=l.min,e.max=l.max}n.update("none")}))},En=async()=>{if(de.value)return;const e=hn(ae.value);Qa.value-=e,await yn()},On=async()=>{if(de.value)return;const e=hn(ae.value);Qa.value+=e,await yn()},xn=()=>{const e=Ia.indexOf(ae.value);if(e>0){const t=Ia[e-1];ae.value=t,i.Info(`ðŸ” Zoom In: Changed timebase to ${t}`,{autoScrollState:de.value,note:"Auto Scroll state unchanged by zoom operation"}),de.value?yn():Vn()}},kn=()=>{const e=Ia.indexOf(ae.value);if(e>=0&&e<Ia.length-1){const t=Ia[e+1];ae.value=t,i.Info(`ðŸ” Zoom Out: Changed timebase to ${t}`,{autoScrollState:de.value,note:"Auto Scroll state unchanged by zoom operation"}),de.value?yn():Vn()}},An=()=>{ae.value="5m",Qa.value=0,i.Info("ðŸ”„ Reset to default timebase (5m)",{autoScrollState:de.value,note:"Auto Scroll state preserved during reset"}),de.value?yn():Vn()},Ln=e=>{if(ne.value=e,1===e)He.value.forEach((e=>{e.visible=!0})),i.Info("âœ… View 1: Showing all items",{totalSeries:He.value.length});else{const t=pe.value[e]||[],a=me.value.get(e)||[],n=a.filter((e=>e.is_selected)).map((e=>`${e.point_type}_${e.point_index}`)),l=n.length>0?n:t;He.value.forEach((e=>{e.visible=l.includes(e.name)})),i.Info(`âœ… View ${e}: Applied selections`,{ffiSelectionsCount:a.length,ffiTrackedNames:n,fallbackTrackedItems:t,activeTrackedItems:l,visibleSeries:He.value.filter((e=>e.visible)).length,totalSeries:He.value.length})}const t={1:{showGrid:!0,showLegend:!1,smoothLines:!1,showPoints:!1,title:"All Items View",description:"Show all 14 items for comprehensive analysis"},2:{showGrid:!0,showLegend:!1,smoothLines:!0,showPoints:!1,title:"Custom Tracking View 2",description:"User-selected items for focused tracking"},3:{showGrid:!0,showLegend:!1,smoothLines:!0,showPoints:!1,title:"Custom Tracking View 3",description:"User-selected items with detailed visualization"}}[e];t&&(De.value=t.showGrid,_e.value=t.showLegend,Te.value=t.smoothLines,Se.value=t.showPoints,u((()=>{Tn()})))},Rn=e=>{const t=pe.value[ne.value]||[],a=t.includes(e);pe.value[ne.value]=a?t.filter((t=>t!==e)):[...t,e],Nn(ne.value,pe.value[ne.value]),Ln(ne.value)},$n=()=>{pe.value[ne.value]=[],Nn(ne.value,[]),Ln(ne.value)},Mn=()=>{ya.value?$n():(()=>{const e=He.value.map((e=>e.name));pe.value[ne.value]=[...e],Nn(ne.value,e),Ln(ne.value)})()},Pn=()=>{ve.value=!1,Nn(ne.value,pe.value[ne.value]),Ln(ne.value)},Nn=async(e,t)=>{try{e>=2&&e<=3?(await ei(e),i.Info(`âœ… View ${e}: Selections saved to database`,{trackedSeries:t,count:t.length})):i.Info(`ðŸ“‹ View ${e}: No persistence needed (shows all items)`)}catch(a){i.Error(`âŒ Failed to save view ${e} tracking:`,a)}},Fn=()=>{if(ie.value&&le.value&&re.value&&se.value){const e=ie.value.hour(re.value.hour()).minute(re.value.minute()).second(0).millisecond(0),t=le.value.hour(se.value.hour()).minute(se.value.minute()).second(0).millisecond(0);if(t.isBefore(e))return void V.error("End time must be after start time");ie.value=e,le.value=t,ae.value="custom",de.value=!1,ue.value=!1,(async()=>{if("custom"===ae.value&&ie.value&&le.value){const e=Jn();if(Math.floor((le.value.valueOf()-ie.value.valueOf())/36e5),e.sn&&null!==e.panel_id&&null!==e.trendlog_id){const t={startTime:ie.value.toISOString(),endTime:le.value.toISOString(),durationMinutes:Math.floor((le.value.valueOf()-ie.value.valueOf())/6e4),expectedDataPoints:Math.floor((le.value.valueOf()-ie.value.valueOf())/15e3),timebaseLabel:`Custom Range (${ie.value.format("DD/MM HH:mm")} - ${le.value.format("DD/MM HH:mm")})`};await Zn(e,t)}else await yn();(pa||Object.keys(va).length>0)&&(_n(),wn())}})(),V.success("Custom date range applied successfully")}else V.error("Please select both start and end date/time")},Hn=()=>{ue.value=!1},jn=e=>{const t=C();switch(e){case"today":ie.value=t.startOf("day"),le.value=t.endOf("day"),re.value=C().hour(0).minute(0),se.value=C().hour(23).minute(59);break;case"yesterday":const e=t.subtract(1,"day");ie.value=e.startOf("day"),le.value=e.endOf("day"),re.value=C().hour(0).minute(0),se.value=C().hour(23).minute(59);break;case"thisWeek":ie.value=t.startOf("week"),le.value=t.endOf("week"),re.value=C().hour(0).minute(0),se.value=C().hour(23).minute(59);break;case"lastWeek":const a=t.subtract(1,"week");ie.value=a.startOf("week"),le.value=a.endOf("week"),re.value=C().hour(0).minute(0),se.value=C().hour(23).minute(59)}},zn=()=>{if(ie.value&&le.value&&re.value&&se.value){const e=ie.value.hour(re.value.hour()).minute(re.value.minute()),t=le.value.hour(se.value.hour()).minute(se.value.minute());return`${e.format("DD/MM/YYYY HH:mm")} - ${t.format("DD/MM/YYYY HH:mm")}`}return""},Un=e=>{var t,a;i.Info("ðŸ”„ TrendLogModal: Auto Scroll toggle - "+(e?"ON":"OFF"),{currentDataSeriesLength:He.value.length,hasRealData:!!(null==(a=null==(t=Re.value)?void 0:t.inputItems)?void 0:a.length)}),e?(Qa.value=0,yn(),Bn()):(Wn(),i.Info("ðŸ“Š TrendLogModal: Auto Scroll OFF - switching to historical data only"),Vn())},Vn=async()=>{i.Info("ðŸ“š TLChart: Loading historical data only (Auto Scroll disabled)",{currentDataSeriesLength:He.value.length,hasMonitorConfig:!!Re.value,timeBase:ae.value});const e=Re.value;if(e&&e.inputItems&&e.inputItems.length>0)try{we.value=!0,i.Info("ðŸ“š Loading historical data from database for current timebase"),await pn(),Tn(),u((()=>{Tn()})),we.value=!1}catch(t){i.Error("= TLChart: Error in historical data initialization:",t),ke.value=!0,He.value=[],we.value=!1}else i.Info("ðŸ“Š No monitor configuration available for historical data"),ke.value=!0,He.value=[],we.value=!1},Bn=()=>{i.Info("ðŸ”„ startRealTimeUpdates CALLED",{hasExistingInterval:!!ga,isRealTime:de.value,hasMonitorConfig:!!Re.value,timestamp:(new Date).toISOString()}),ga&&clearInterval(ga);const e=Re.value,t=(null==e?void 0:e.dataIntervalMs)||be.value,a=new Date,n=a.toLocaleTimeString()+"."+a.getMilliseconds().toString().padStart(3,"0");if(i.Info(`ðŸ”„ TrendLogModal: Starting real-time updates [${n}] with detailed interval analysis:`,{"monitorConfig.value exists":!!Re.value,monitorConfigData:e,"monitorConfigData?.dataIntervalMs":null==e?void 0:e.dataIntervalMs,"updateInterval.value (computed)":be.value,"actualInterval selected":t,intervalSeconds:t/1e3,intervalMinutes:t/6e4,"Raw monitorConfig":Re.value}),!(null==e?void 0:e.dataIntervalMs)){i.Info("ðŸ“Š TrendLogModal: Using computed updateInterval, calculating from monitorConfig:");const e=ye(Re.value);i.Info("ðŸ“Š TrendLogModal: Calculated interval result:",e)}i.Info(`ï¿½?TrendLogModal: Setting up polling timer [${n}] - Next request expected at: ${new Date(Date.now()+t).toLocaleTimeString()}`),ga=setInterval(bn,t)},Wn=()=>{ga&&(clearInterval(ga),ga=null)},qn=({key:e})=>{var t;"custom"!==(t=e)?(ae.value=t,de.value="5m"===t):ue.value=!0},Yn=({key:e})=>{switch(e){case"enable-all":He.value.forEach((e=>{e.visible=!0})),Tn();break;case"disable-all":He.value.forEach((e=>{e.visible=!1})),Tn()}},Gn=({key:e})=>{switch(e){case"png":ri();break;case"jpg":si();break;case"csv":oi();break;case"json":ui()}},Kn=({key:e})=>{switch(e){case"toggle-analog":(()=>{const e=!Va.value;He.value.forEach((t=>{"analog"===t.unitType&&(t.visible=e)})),Tn()})();break;case"toggle-digital":(()=>{const e=!Ba.value;He.value.forEach((t=>{"digital"===t.unitType&&(t.visible=e)})),Tn()})();break;case"toggle-input":(()=>{const e=!Wa.value;He.value.forEach((t=>{2===t.pointType&&(t.visible=e)})),Tn()})();break;case"toggle-output":(()=>{const e=!qa.value;He.value.forEach((t=>{1===t.pointType&&(t.visible=e)})),Tn()})();break;case"toggle-variable":(()=>{const e=!Ya.value;He.value.forEach((t=>{3===t.pointType&&(t.visible=e)})),Tn()})()}},Jn=()=>{var e;let t=null,a=null,n=null;try{Le.query.sn&&(t=parseInt(Le.query.sn)),Le.query.panel_id&&(a=parseInt(Le.query.panel_id)),Le.query.trendlog_id&&(n=parseInt(Le.query.trendlog_id))}catch(i){}if(null==(e=Q.itemData)?void 0:e.t3Entry){const e=Q.itemData.t3Entry;if(null===a&&(a=e.pid||null),null===n&&e.id&&"string"==typeof e.id){const t=e.id.match(/MON(\d+)|TRL(\d+)/i);if(t){n=parseInt(t[1]||t[2])-1}}}return!t&&x.value.panelsList&&x.value.panelsList.length>0&&(t=x.value.panelsList[0].serial_number),!a&&x.value.panelsList&&x.value.panelsList.length>0&&(a=x.value.panelsList[0].panel_number),{sn:t,panel_id:a,trendlog_id:n}},Zn=async(e,t)=>{try{we.value=!0,xe.value="api",de.value=!1;const a=(()=>{const e=[];return He.value&&0!==He.value.length?(He.value.forEach(((t,a)=>{try{const n=t.itemType||`${Jn().panel_id}VAR${a+1}`,i=n.match(/^(\d+)/),l=i?parseInt(i[1]):Jn().panel_id||2;let o,r,s;if(n.includes("Input")){o="INPUT";const e=n.match(/Input(\d+)$/);r=e?parseInt(e[1])-1:a}else if(n.includes("Output")){o="OUTPUT";const e=n.match(/Output(\d+)$/);r=e?parseInt(e[1])-1:a}else if(n.includes("VAR")){o="VARIABLE";const e=n.match(/VAR(\d+)$/);r=e?parseInt(e[1])-1:a}else if(n.includes("HOL")){o="MONITOR";const e=n.match(/HOL(\d+)$/);r=e?parseInt(e[1])-1:a}else o="VARIABLE",r=a;s="INPUT"===o?`IN${r+1}`:"OUTPUT"===o?`OUT${r+1}`:"VARIABLE"===o?`VAR${r+1}`:"MONITOR"===o?`HOL${r+1}`:`VAR${r+1}`,e.push({point_id:s,point_type:o,point_index:r,panel_id:l})}catch(n){const t=Jn();e.push({point_id:`VAR${a+1}`,point_type:"VARIABLE",point_index:a,panel_id:t.panel_id||2})}})),e):e})(),n={serial_number:e.sn,panel_id:e.panel_id,trendlog_id:e.trendlog_id.toString(),start_time:t.startTime,end_time:t.endTime,limit:Math.min(2*t.expectedDataPoints,5e3),point_types:["INPUT","OUTPUT","VARIABLE","MONITOR"],specific_points:a},i=await Oe.getTrendlogHistory(n);if(i&&i.data&&i.data.length>0){const e=Xn(i.data,t);He.value=e,Tn(),Ee.value=C().format("HH:mm:ss")}else ke.value=!0,He.value=[],await yn()}catch(a){ke.value=!0,He.value=[],W.error({message:"Historical Data Error",description:`Failed to load historical data: ${a instanceof Error?a.message:"Unknown error"}`,duration:4.5}),await yn()}finally{we.value=!1}},Xn=(e,t)=>{const a=He.value||[],n=new Map;e.forEach((e=>{const t=`${e.point_type}_${e.point_id}`;n.has(t)||n.set(t,[]),n.get(t).push(e)}));const i=[],l=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#F1948A","#85C1E9","#F4D03F"];return a.forEach(((e,t)=>{let a,o;if(n.forEach(((n,i)=>{if(a)return;const[l,r]=i.split("_");if(e.itemType&&e.itemType.includes(r))return a=n,void(o=i);if(e.name.includes(r))return a=n,void(o=i);if(e.prefix===l){if(r===`${"INPUT"===l?"IN":"OUTPUT"===l?"OUT":"VARIABLE"===l?"VAR":"UNK"}${t+1}`)return a=n,void(o=i)}})),a&&o){n.delete(o),a.sort(((e,t)=>new Date(e.time).getTime()-new Date(t.time).getTime()));const r=a.map((e=>({timestamp:new Date(e.time).getTime(),value:"number"==typeof e.value?e.value:parseFloat(e.value)||0}))),s={name:e.name,color:e.color||l[t%l.length],data:r,visible:!1!==e.visible,unit:e.unit||"",unitType:e.unitType,unitCode:e.unitCode,itemType:e.itemType,prefix:e.prefix,description:e.description};i.push(s)}else{const a={name:e.name,color:e.color||l[t%l.length],data:[],visible:!1!==e.visible,unit:e.unit||"",unitType:e.unitType,unitCode:e.unitCode,itemType:e.itemType,prefix:e.prefix,description:e.description,isEmpty:!0};i.push(a)}})),i},Qn=async e=>{try{for(let t=2;t<=3;t++){const a=await fetch(`/api/t3_device/trendlogs/${e}/views/${t}/selections`);if(a.ok){const e=await a.json();me.value.set(t,e);const n=e.filter((e=>e.is_selected)).map((e=>`${e.point_type}_${e.point_index}`));pe.value[t]=n,i.Info(`âœ… FFI: Loaded View ${t} selections`,{count:e.length,trackedNames:n})}else i.Info(`ðŸ“‹ FFI: No existing selections for View ${t}`)}}catch(t){i.Error("âŒ FFI: Failed to load view selections",t)}},ei=async e=>{if(!(e<2||e>3))try{const{trendlog_id:t}=ti();if(!t)return;const a=`MONITOR${t}`,n=(pe.value[e]||[]).map((e=>{const[t,a]=e.split("_");return{point_type:t,point_index:a,point_label:e,is_selected:!0}}));if(!(await fetch(`/api/t3_device/trendlogs/${a}/views/${e}/selections`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selections:n})})).ok)throw new Error("Failed to save view selections");me.value.set(e,n),i.Info(`âœ… FFI: Saved View ${e} selections`,{count:n.length,selections:n})}catch(t){i.Error(`âŒ FFI: Failed to save View ${e} selections`,t)}},ti=()=>{let e=0,t=0,a=0;return Le.query.sn&&(e=parseInt(Le.query.sn)),Le.query.panel_id&&(t=parseInt(Le.query.panel_id)),Le.query.trendlog_id&&(a=parseInt(Le.query.trendlog_id)),{sn:e,panel_id:t,trendlog_id:a}},ai=(e,t)=>{if(0===e.length)return"N/A";const a=e[e.length-1].value;if("digital"===(null==t?void 0:t.unitType)){const e=1===a?1:0;return`${K(t.unitCode||1)[e]} (${a})`}{const e=(null==t?void 0:t.unit)||"";return a.toFixed(2)+e}},ni=(e,t)=>{if(0===e.length)return"N/A";const a=e.reduce(((e,t)=>e+t.value),0)/e.length;if("digital"===(null==t?void 0:t.unitType)){return`${(e.filter((e=>1===e.value)).length/e.length*100).toFixed(1)}% High`}{const e=(null==t?void 0:t.unit)||"";return a.toFixed(2)+e}},ii=(e,t)=>{if(0===e.length)return"N/A";const a=Math.min(...e.map((e=>e.value)));if("digital"===(null==t?void 0:t.unitType)){const e=1===a?1:0;return`${K(t.unitCode||1)[e]} (${a})`}{const e=(null==t?void 0:t.unit)||"";return a.toFixed(2)+e}},li=(e,t)=>{if(0===e.length)return"N/A";const a=Math.max(...e.map((e=>e.value)));if("digital"===(null==t?void 0:t.unitType)){const e=1===a?1:0;return`${K(t.unitCode||1)[e]} (${a})`}{const e=(null==t?void 0:t.unit)||"";return a.toFixed(2)+e}},oi=()=>{const e=He.value.filter((e=>e.visible&&!e.isEmpty));if(0===e.length)return void V.warning("No visible data series to export");const t=[],a=["Timestamp",...e.map((e=>`${e.name} (${e.unit||e.unitType})`))];t.push(a.join(",")),Math.max(...e.map((e=>e.data.length)));const n=new Set;e.forEach((e=>{e.data.forEach((e=>{e.timestamp&&n.add(e.timestamp)}))}));const i=Array.from(n).sort(((e,t)=>e-t));i.forEach((a=>{const n=[];"number"==typeof a&&a>1e9?n.push(X(a)):n.push(new Date(a).toLocaleString()),e.forEach((e=>{const t=e.data.find((e=>e.timestamp===a));if(t)if("digital"===e.unitType){const a=G(e.unit||"");a?n.push(1===t.value?a[1]:a[0]):n.push(1===t.value?"HIGH":"LOW")}else n.push(t.value.toFixed(2));else n.push("")})),t.push(n.join(","))}));const l=new Blob([t.join("\n")],{type:"text/csv"}),o=document.createElement("a");o.download=`${ma.value}_AllSeries_${C().format("YYYY-MM-DD_HH-mm-ss")}.csv`,o.href=URL.createObjectURL(l),o.click(),V.success(`Data exported successfully (${e.length} series, ${i.length} data points)`)},ri=async()=>{var e;try{const t=[];if(pa&&Ga.value.length>0&&t.push({instance:pa,canvas:da.value,type:"analog",height:(null==(e=da.value)?void 0:e.offsetHeight)||400}),Ka.value.forEach(((e,a)=>{const n=va[a],i=ca.value[a];n&&i&&t.push({instance:n,canvas:i,type:"digital",height:i.offsetHeight||100,seriesName:e.name})})),0===t.length)return void V.warning("No charts available to export");const a=document.createElement("canvas"),n=a.getContext("2d");if(!n)return;const i=Math.max(...t.map((e=>{var t;return(null==(t=e.canvas)?void 0:t.offsetWidth)||800}))),l=t.reduce(((e,t)=>e+t.height+20),40);a.width=i,a.height=l,n.fillStyle="#ffffff",n.fillRect(0,0,i,l);const o=Za();let r="";if(o.min&&o.max){const e=X(o.min).split(" ")[1],t=X(o.max).split(" ")[1],a=X(o.min).split(" ")[0],n=X(o.max).split(" ")[0];r=a===n?` (${a} ${e} - ${t})`:` (${a} ${e} - ${n} ${t})`}else r=` (${ae.value})`;n.fillStyle="#000000",n.font="bold 16px Arial",n.textAlign="center",n.fillText(`${ma.value}${r}`,i/2,25);let s=50;for(const e of t){const t=document.createElement("canvas"),a=t.getContext("2d");if(!a||!e.canvas)continue;t.width=e.canvas.width,t.height=e.canvas.height,a.fillStyle="#ffffff",a.fillRect(0,0,t.width,t.height);const l=e.instance.toBase64Image("image/png",1),o=new Image;await new Promise((e=>{o.onload=()=>{a.drawImage(o,0,0),e()},o.src=l})),"digital"===e.type&&e.seriesName&&(n.fillStyle="#333333",n.font="bold 12px Arial",n.textAlign="left",n.fillText(`${e.seriesName}`,10,s-5),s+=15);const r=i,u=e.canvas.height*i/e.canvas.width;n.drawImage(t,0,s,r,u),s+=u+10}const u=document.createElement("a");u.download=`${ma.value}_${C().format("YYYY-MM-DD_HH-mm-ss")}.png`,u.href=a.toDataURL("image/png",1),u.click(),V.success("Chart exported as PNG successfully")}catch(t){V.error("Failed to export chart as PNG")}},si=async()=>{var e;try{const t=[];if(pa&&Ga.value.length>0&&t.push({instance:pa,canvas:da.value,type:"analog",height:(null==(e=da.value)?void 0:e.offsetHeight)||400}),Ka.value.forEach(((e,a)=>{const n=va[a],i=ca.value[a];n&&i&&t.push({instance:n,canvas:i,type:"digital",height:i.offsetHeight||100,seriesName:e.name})})),0===t.length)return void V.warning("No charts available to export");const a=document.createElement("canvas"),n=a.getContext("2d");if(!n)return;const i=Math.max(...t.map((e=>{var t;return(null==(t=e.canvas)?void 0:t.offsetWidth)||800}))),l=t.reduce(((e,t)=>e+t.height+20),40);a.width=i,a.height=l,n.fillStyle="#f5f5f5",n.fillRect(0,0,i,l);const o=Za();let r="";if(o.min&&o.max){const e=X(o.min).split(" ")[1],t=X(o.max).split(" ")[1],a=X(o.min).split(" ")[0],n=X(o.max).split(" ")[0];r=a===n?` (${a} ${e} - ${t})`:` (${a} ${e} - ${n} ${t})`}else r=` (${ae.value})`;n.fillStyle="#000000",n.font="bold 16px Arial",n.textAlign="center",n.fillText(`${ma.value}${r}`,i/2,25);let s=50;for(const e of t){const t=document.createElement("canvas"),a=t.getContext("2d");if(!a||!e.canvas)continue;t.width=e.canvas.width,t.height=e.canvas.height,a.fillStyle="#f5f5f5",a.fillRect(0,0,t.width,t.height);const l=e.instance.toBase64Image("image/png",1),o=new Image;await new Promise((e=>{o.onload=()=>{a.drawImage(o,0,0),e()},o.src=l})),"digital"===e.type&&e.seriesName&&(n.fillStyle="#222222",n.font="bold 12px Arial",n.textAlign="left",n.fillText(`${e.seriesName}`,10,s-5),s+=15);const r=i,u=e.canvas.height*i/e.canvas.width;n.drawImage(t,0,s,r,u),s+=u+10}const u=document.createElement("a");u.download=`${ma.value}_${C().format("YYYY-MM-DD_HH-mm-ss")}.jpg`,u.href=a.toDataURL("image/jpeg",.9),u.click(),V.success("Chart exported as JPG successfully")}catch(t){V.error("Failed to export chart as JPG")}},ui=()=>{const e=He.value.filter((e=>e.visible&&!e.isEmpty));if(0===e.length)return void V.warning("No visible data series to export");const t=e.flatMap((e=>e.data.map((e=>e.timestamp)))).filter((e=>e)),a={start:t.length>0?Math.min(...t):null,end:t.length>0?Math.max(...t):null,startFormatted:t.length>0?X(Math.min(...t)):null,endFormatted:t.length>0?X(Math.max(...t)):null},n={title:ma.value,exportedAt:(new Date).toISOString(),exportType:"multi-canvas-chart",timeBase:ae.value,totalDataPoints:t.length,timeRange:a,chartTypes:{analog:{count:e.filter((e=>"analog"===e.unitType)).length,series:e.filter((e=>"analog"===e.unitType)).map((e=>e.name))},digital:{count:e.filter((e=>"digital"===e.unitType)).length,series:e.filter((e=>"digital"===e.unitType)).map((e=>e.name))}},series:e.map((e=>({name:e.name,id:e.id,unit:e.unit,type:e.unitType,color:e.color,panelId:e.panelId,pointType:e.pointType,pointNumber:e.pointNumber,prefix:e.prefix,description:e.description,itemType:e.itemType,dataPoints:e.data.length,data:e.data.map((t=>({timestamp:t.timestamp,timestampFormatted:X(t.timestamp),value:t.value,..."digital"===e.unitType&&{digitalState:(()=>{const a=G(e.unit||"");return a?1===t.value?a[1]:a[0]:1===t.value?"HIGH":"LOW"})()}})))})))},i=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),l=document.createElement("a");l.download=`${ma.value}_AllSeries_${C().format("YYYY-MM-DD_HH-mm-ss")}.json`,l.href=URL.createObjectURL(i),l.click(),V.success(`Data exported as JSON successfully (${e.length} series, ${t.length} total data points)`)};return n([De,_e,Te,Se],(()=>{(pa||Object.keys(va).length>0)&&(_n(),wn())})),n(Ga,(async(e,t)=>{const a=(null==t?void 0:t.length)>0,n=e.length>0;a===n&&e.length===(null==t?void 0:t.length)||(await u(),pa&&(pa.destroy(),pa=null),n&&(In(),await u(),Sn()))}),{deep:!0}),n(Ka,(async(e,t)=>{const a=Object.keys(va).length>0,n=e.length>0;e.length===(null==t?void 0:t.length)&&a===n||(await u(),Dn(),Cn())}),{deep:!0}),s((async()=>{var e,t,a,n,l,o;try{i.Info("ðŸš€ TrendLogChart: Starting component initialization",{hasProps:!!Q,hasItemData:!!Q.itemData,itemDataId:null==(t=null==(e=Q.itemData)?void 0:e.t3Entry)?void 0:t.id,itemDataPid:null==(n=null==(a=Q.itemData)?void 0:a.t3Entry)?void 0:n.pid,currentItemDataExists:!!ee.value,T3000DataExists:!!x.value,hasPanelsData:!!(null==(l=x.value.panelsData)?void 0:l.length),timestamp:(new Date).toISOString()});const r=await(async()=>{var e,t,a,n,l;const o=null==(t=null==(e=ee.value)?void 0:e.t3Entry)?void 0:t.id,r=null==(n=null==(a=ee.value)?void 0:a.t3Entry)?void 0:n.pid;if(i.Info("ðŸ” getMonitorConfigFromT3000Data: Extracting config parameters",{monitorId:o,panelId:r,hasCurrentItemData:!!ee.value,currentItemDataType:typeof ee.value,t3EntryExists:!!(null==(l=ee.value)?void 0:l.t3Entry),propsItemData:!!Q.itemData,timestamp:(new Date).toISOString()}),!o)return i.Warn("âŒ getMonitorConfigFromT3000Data: No monitor ID available",{currentItemData:ee.value,propsItemData:Q.itemData}),null;if(!r&&0!==r)return i.Warn("âŒ getMonitorConfigFromT3000Data: No panel ID available",{monitorId:o,panelId:r,currentItemData:ee.value}),null;try{if(!(await Ve.waitForDataReady({timeout:15e3,specificEntries:[o]})).isValid)return null;const e=await Ve.getEntryByPid(o,r);if(!e)return null;const t=ye(e),a=[],n=[];if(e.input&&Array.isArray(e.input))for(let i=0;i<e.input.length;i++){const t=e.input[i];if(t&&void 0!==t.panel&&void 0!==t.point_number){a.push({panel:t.panel,point_number:t.point_number,index:i,point_type:t.point_type,network:t.network,sub_panel:t.sub_panel});const l=e.range&&e.range[i]?e.range[i]:0;n.push(l)}}return 0===a.length||0===a.filter((e=>void 0!==e.panel&&void 0!==e.point_number&&e.point_number>=0)).length?null:{id:e.id,label:e.label||e.description||`Monitor ${o}`,pid:e.pid,type:e.type,status:e.status,numInputs:a.length,inputItems:a,ranges:n,dataIntervalMs:t,originalConfig:e}}catch(s){return null}})();if(i.Info("ðŸ“Š TrendLogChart: Monitor config result",{hasMonitorConfig:!!r,monitorConfigType:typeof r,monitorConfigKeys:r?Object.keys(r):[],inputItemsLength:(null==(o=null==r?void 0:r.inputItems)?void 0:o.length)||0}),r){Re.value=r,i.Info("ðŸ”„ TrendLogChart: Starting FFI integration for complete TrendLog info");const e=await(async()=>{var e,t,a,n,l,o,r,s;const{sn:u,panel_id:d,trendlog_id:c}=ti();if(u&&null!=c)try{ge.value.syncing=!0,ge.value.error=null,i.Info("ðŸ”„ FFI: Starting complete TrendLog sync",{device_id:u,trendlog_id:c});const d=await Oe.initializeCompleteFFI(u,c.toString());if(d.success)return he.value=(null==(e=d.ffi)?void 0:e.trendlog_info)||(null==(t=d.initial)?void 0:t.trendlog_info),ge.value.completed=!0,ge.value.lastSync=(new Date).toISOString(),i.Info("âœ… FFI: Complete TrendLog initialization successful",{initial_info:null==(a=d.initial)?void 0:a.trendlog_info,ffi_info:null==(n=d.ffi)?void 0:n.trendlog_info,num_points:(null==(o=null==(l=he.value)?void 0:l.related_points)?void 0:o.length)||0}),await Qn(`MONITOR${c}`),he.value;throw new Error((null==(r=d.ffi)?void 0:r.message)||(null==(s=d.initial)?void 0:s.message)||"FFI initialization failed")}catch(p){return i.Error("âŒ FFI: Sync failed",p),ge.value.error=p.message,i.Info("ðŸ”„ FFI: Falling back to existing logic"),null}finally{ge.value.syncing=!1}else i.Warn("âŒ FFI Initialization: Missing required parameters",{sn:u,panel_id:d,trendlog_id:c})})();e&&i.Info("âœ… TrendLogChart: FFI integration completed",{ffiInfo:e,hasViewSelections:me.value.size>0}),tn(),i.Info("âœ… TrendLogChart: Initialization completed successfully")}else i.Warn("âš ï¸ TrendLogChart: No monitor config data available - keeping loading state")}catch(r){i.Error("âŒ TrendLogChart: Initialization failed:",r),r.message&&!r.message.includes("timeout")&&(ke.value=!0)}await(async()=>{try{i.Info("ðŸ“‹ View tracking loaded via FFI integration during initialization")}catch(r){i.Error("âŒ Failed to load view tracking:",r)}})(),Ln(1),u((async()=>{var e;if((null==(e=window.chrome)?void 0:e.webview)||await new Promise((e=>setTimeout(e,150))),da.value){da.value.offsetWidth>0&&da.value.offsetHeight>0||await new Promise((e=>setTimeout(e,300)))}await yn(),wn(),de.value&&Bn()}))})),d((()=>{Wn(),_n()})),(a,n)=>{const l=D("a-typography-text"),o=D("a-button"),r=D("a-menu-item"),s=D("a-menu-divider"),u=D("a-menu"),d=D("a-dropdown"),C=D("a-flex"),E=D("a-button-group"),O=D("a-tag"),x=D("h7"),k=D("a-switch"),A=D("a-spin"),L=D("a-col"),z=D("a-date-picker"),V=D("a-time-picker"),W=D("a-row"),Y=D("a-space"),G=D("a-alert"),K=D("a-modal"),X=D("a-checkbox"),Q=D("a-drawer"),ee=D("a-config-provider");return c(),p(ee,{theme:{token:{colorPrimary:"#0064c8",colorBgBase:"#ffffff",colorText:"#000000",colorBorder:"#d9d9d9"}}},{default:v((()=>[g("div",We,[t(C,{wrap:"wrap",gap:"small",class:"controls-main-flex"},{default:v((()=>[t(C,{align:"center",gap:"small",class:"control-group"},{default:v((()=>[t(l,{class:"control-label",style:{"font-size":"11px"}},{default:v((()=>[...n[18]||(n[18]=[m("Time Base:",-1)])])),_:1}),t(d,{placement:"bottomRight"},{overlay:v((()=>[t(u,{onClick:qn,class:"timebase-dropdown-menu"},{default:v((()=>[t(r,{key:"5m"},{default:v((()=>[...n[19]||(n[19]=[m("5 minutes",-1)])])),_:1}),t(r,{key:"10m"},{default:v((()=>[...n[20]||(n[20]=[m("10 minutes",-1)])])),_:1}),t(r,{key:"30m"},{default:v((()=>[...n[21]||(n[21]=[m("30 minutes",-1)])])),_:1}),t(r,{key:"1h"},{default:v((()=>[...n[22]||(n[22]=[m("1 hour",-1)])])),_:1}),t(r,{key:"4h"},{default:v((()=>[...n[23]||(n[23]=[m("4 hours",-1)])])),_:1}),t(r,{key:"12h"},{default:v((()=>[...n[24]||(n[24]=[m("12 hours",-1)])])),_:1}),t(r,{key:"1d"},{default:v((()=>[...n[25]||(n[25]=[m("1 day",-1)])])),_:1}),t(r,{key:"4d"},{default:v((()=>[...n[26]||(n[26]=[m("4 days",-1)])])),_:1}),t(s),t(r,{key:"custom"},{default:v((()=>[...n[27]||(n[27]=[m("Custom Define",-1)])])),_:1})])),_:1})])),default:v((()=>[t(o,{size:"small",style:{display:"flex","align-items":"center"}},{default:v((()=>[g("span",null,f({"5m":"5 minutes","10m":"10 minutes","30m":"30 minutes","1h":"1 hour","4h":"4 hours","12h":"12 hours","1d":"1 day","4d":"4 days",custom:"Custom Define"}[ae.value]||"1 hour"),1),t(h(R),{style:{"margin-left":"4px"}})])),_:1})])),_:1})])),_:1}),t(C,{align:"center",class:"control-group"},{default:v((()=>[t(E,{size:"small"},{default:v((()=>[t(o,{onClick:En,disabled:de.value},{icon:v((()=>[t(h(N))])),_:1},8,["disabled"]),t(o,{onClick:On,disabled:de.value},{icon:v((()=>[t(h($))])),_:1},8,["disabled"])])),_:1})])),_:1}),t(C,{align:"center",class:"control-group"},{default:v((()=>[t(E,{size:"small"},{default:v((()=>[t(o,{onClick:kn,disabled:!_a.value,title:"Zoom Out (Longer timebase)",style:{display:"flex","align-items":"center",gap:"2px"}},{default:v((()=>[t(h(M)),n[28]||(n[28]=g("span",null,"Zoom Out",-1))])),_:1},8,["disabled"]),t(o,{onClick:xn,disabled:!Da.value,title:"Zoom In (Shorter timebase)",style:{display:"flex","align-items":"center",gap:"2px"}},{default:v((()=>[t(h(P)),n[29]||(n[29]=g("span",null,"Zoom In",-1))])),_:1},8,["disabled"])])),_:1})])),_:1}),t(C,{align:"center",class:"control-group"},{default:v((()=>[t(o,{onClick:An,size:"small",title:"Reset to default 5 minutes timebase",style:{display:"flex","align-items":"center",gap:"2px"}},{default:v((()=>[t(h(F)),n[30]||(n[30]=g("span",null,"Reset",-1))])),_:1})])),_:1}),t(C,{align:"center",class:"control-group"},{default:v((()=>[t(E,{size:"small"},{default:v((()=>[t(o,{type:1===ne.value?"primary":"default",onClick:n[0]||(n[0]=e=>Ln(1))},{default:v((()=>[...n[31]||(n[31]=[m(" View 1 ",-1)])])),_:1},8,["type"]),t(o,{type:2===ne.value?"primary":"default",onClick:n[1]||(n[1]=e=>Ln(2))},{default:v((()=>[...n[32]||(n[32]=[m(" View 2 ",-1)])])),_:1},8,["type"]),t(o,{type:3===ne.value?"primary":"default",onClick:n[2]||(n[2]=e=>Ln(3))},{default:v((()=>[...n[33]||(n[33]=[m(" View 3 ",-1)])])),_:1},8,["type"])])),_:1}),1!==ne.value&&ha.value?(c(),p(o,{key:0,size:"small",onClick:n[3]||(n[3]=e=>ve.value=!0),class:"reconfigure-btn",title:"Reconfigure tracked items"},{default:v((()=>[t(h(Pe))])),_:1})):y("",!0)])),_:1}),t(C,{align:"center",wrap:"wrap",gap:"small",class:"control-group status-tags"},{default:v((()=>[de.value?(c(),p(O,{key:0,color:"green",size:"small"},{icon:v((()=>[t(h(ze),{spin:!0})])),default:v((()=>[m(" Live - "+f(Ee.value),1)])),_:1})):(c(),p(O,{key:1,color:"blue",size:"small"},{icon:v((()=>[t(h(H))])),default:v((()=>[n[34]||(n[34]=m(" Historical ",-1))])),_:1})),t(O,{size:"small"},{default:v((()=>[m(f("custom"===ae.value?"Custom":wa.value),1)])),_:1})])),_:1}),t(C,{align:"center",class:"control-group export-options"},{default:v((()=>[t(d,{placement:"bottomRight"},{overlay:v((()=>[t(u,{class:"export-options-menu",onClick:Gn},{default:v((()=>[t(r,{key:"png"},{default:v((()=>[t(h(fe)),n[36]||(n[36]=m(" Export as PNG ",-1))])),_:1}),t(s),t(r,{key:"csv"},{default:v((()=>[t(h(ce)),n[37]||(n[37]=m(" Export Data (CSV) ",-1))])),_:1}),t(r,{key:"json"},{default:v((()=>[t(h(j)),n[38]||(n[38]=m(" Export Data (JSON) ",-1))])),_:1})])),_:1})])),default:v((()=>[t(o,{size:"small",style:{display:"flex","align-items":"center"}},{default:v((()=>[t(h(oe),{style:{"margin-right":"4px"}}),n[35]||(n[35]=g("span",null,"Export",-1)),t(h(R),{style:{"margin-left":"4px"}})])),_:1})])),_:1})])),_:1})])),_:1})]),1===ne.value||ha.value?y("",!0):(c(),b("div",qe,[g("div",Ye,[n[40]||(n[40]=g("div",{class:"empty-icon"},"ðŸ“Š",-1)),g("div",Ge,f(2===ne.value?"Custom View 2":"Custom View 3"),1),n[41]||(n[41]=g("div",{class:"empty-description"}," Select items to track to start monitoring specific data points. ",-1)),t(o,{type:"primary",onClick:n[4]||(n[4]=e=>ve.value=!0),size:"large",class:"select-items-btn"},{default:v((()=>[...n[39]||(n[39]=[m(" Select Items to Track ",-1)])])),_:1})])])),1===ne.value||1!==ne.value&&ha.value?(c(),b("div",Ke,[g("div",Je,[g("div",Ze,[g("div",Xe,[g("div",Qe,[t(x,null,{default:v((()=>[m(f(ma.value)+" ("+f(fa.value)+"/"+f(ba.value.length)+")",1)])),_:1}),g("div",et,[Ua.value?(c(),b("span",tt," Loading... ")):"realtime"===xe.value?(c(),b("span",at," ðŸ“¡ Live ")):"api"===xe.value?(c(),b("span",nt," ðŸ“š Historical ("+f(ae.value)+") ",1)):ke.value?(c(),b("span",it," âŒ Connection Error ")):y("",!0)])]),g("div",lt,[g("div",ot,[t(d,null,{overlay:v((()=>[t(u,{onClick:Yn,class:"all-dropdown-menu"},{default:v((()=>[t(r,{key:"enable-all",disabled:!Sa.value},{default:v((()=>[t(h(U)),n[43]||(n[43]=m(" Enable All ",-1))])),_:1},8,["disabled"]),t(r,{key:"disable-all",disabled:!Ta.value},{default:v((()=>[t(h(te)),n[44]||(n[44]=m(" Disable All ",-1))])),_:1},8,["disabled"])])),_:1})])),default:v((()=>[t(o,{size:"small",style:{display:"flex","align-items":"center"}},{default:v((()=>[n[42]||(n[42]=g("span",null,"All",-1)),t(h(R),{style:{"margin-left":"4px"}})])),_:1})])),_:1}),t(d,null,{overlay:v((()=>[t(u,{onClick:Kn,class:"bytype-dropdown-menu"},{default:v((()=>[t(r,{key:"toggle-analog",disabled:!Aa.value},{default:v((()=>[t(h(Ae)),m(" "+f(Va.value?"Disable":"Enable")+" Analog ("+f(Pa.value)+") ",1)])),_:1},8,["disabled"]),t(r,{key:"toggle-digital",disabled:!La.value},{default:v((()=>[t(h(J)),m(" "+f(Ba.value?"Disable":"Enable")+" Digital ("+f(Na.value)+") ",1)])),_:1},8,["disabled"]),t(r,{key:"toggle-input",disabled:!Ra.value},{default:v((()=>[t(h(Ce)),m(" "+f(Wa.value?"Disable":"Enable")+" Input ("+f(Fa.value)+") ",1)])),_:1},8,["disabled"]),t(r,{key:"toggle-output",disabled:!$a.value},{default:v((()=>[t(h(oe)),m(" "+f(qa.value?"Disable":"Enable")+" Output ("+f(Ha.value)+") ",1)])),_:1},8,["disabled"]),t(r,{key:"toggle-variable",disabled:!Ma.value},{default:v((()=>[t(h(Ie)),m(" "+f(Ya.value?"Disable":"Enable")+" Variable ("+f(ja.value)+") ",1)])),_:1},8,["disabled"])])),_:1})])),default:v((()=>[t(o,{size:"small",style:{display:"flex","align-items":"center"}},{default:v((()=>[n[45]||(n[45]=g("span",null,"By Type",-1)),t(h(R),{style:{"margin-left":"4px"}})])),_:1})])),_:1})]),g("div",rt,[t(l,{class:"toggle-label"},{default:v((()=>[...n[46]||(n[46]=[m("Auto Scroll:",-1)])])),_:1}),t(k,{checked:de.value,"onUpdate:checked":n[5]||(n[5]=e=>de.value=e),size:"small",onChange:Un},null,8,["checked"])])])]),g("div",st,[0===He.value.length?(c(),b("div",ut,[g("div",dt,[Ua.value?(c(),b("div",ct,[t(A,{size:"small"})])):ke.value?(c(),b("div",pt,"âŒ")):(c(),b("div",vt,"ðŸ“Š")),Ua.value?(c(),b("div",gt,"Loading T3000 device data...")):ke.value?(c(),b("div",mt,"Data Connection Error")):(c(),b("div",ft,"No valid trend log data available")),Ua.value?(c(),b("div",ht," Connecting to your T3000 devices to retrieve trend data... ")):ke.value?(c(),b("div",yt," Unable to load real-time or historical data. Check system connections. ")):(c(),b("div",bt,"Configure monitor points with valid T3000 devices to see data series"))])])):y("",!0),(c(!0),b(w,null,I(ba.value,((a,l)=>(c(),b("div",{key:a.name,class:_(["series-item",{"series-disabled":!a.visible}])},[1!==ne.value?(c(),p(o,{key:0,size:"small",type:"text",class:"delete-series-btn delete-overlay",onClick:e=>((e,t)=>{t&&t.stopPropagation();const a=pe.value[ne.value]||[];pe.value[ne.value]=a.filter((t=>t!==e)),Nn(ne.value,pe.value[ne.value]),Ln(ne.value)})(a.name,e),title:"Remove from tracking"},{icon:v((()=>[t(h(B),{class:"delete-icon"})])),_:2},1032,["onClick"])):y("",!0),g("div",{class:"series-header",onClick:e=>((e,t)=>{t&&"function"==typeof t.stopPropagation&&t.stopPropagation(),He.value[e].isEmpty||(He.value[e].visible=!He.value[e].visible,Tn(),i.Debug(`Toggled visibility for series ${He.value[e].name} to ${He.value[e].visible}`))})(l,e)},[g("div",{class:_(["series-toggle-indicator",{active:a.visible,inactive:!a.visible}]),style:T({backgroundColor:a.visible?a.color:"#d9d9d9"})},[g("div",{class:_(["toggle-inner",{visible:a.visible}])},null,2)],6),g("div",It,[g("div",Dt,[g("div",_t,[g("span",Tt,f(q(a)),1),a.prefix?(c(),p(e,{key:0,label:a.prefix,color:"grey-4","text-color":"grey-8",size:"xs",dense:"",class:"series-prefix-tag-small"},null,8,["label"])):y("",!0)]),g("span",St,[g("span",{class:"unit-info",style:T({color:a.color})},f(Z(a)),5)])])]),g("div",Ct,[t(o,{size:"small",type:"text",class:"expand-toggle",onClick:e=>((e,t)=>{t&&"function"==typeof t.stopPropagation&&t.stopPropagation(),He.value[e].isEmpty||($e.value.has(e)?$e.value.delete(e):$e.value.add(e))})(l,e)},{icon:v((()=>[$e.value.has(l)?(c(),p(h(R),{key:0,class:"expand-icon expanded"})):(c(),p(h($),{key:1,class:"expand-icon"}))])),_:2},1032,["onClick"])])],8,wt),$e.value.has(l)?(c(),b("div",Et,[g("div",Ot,[n[47]||(n[47]=g("span",{class:"stat-label"},"Last:",-1)),g("span",xt,f(ai(a.data,a)),1)]),g("div",kt,[n[48]||(n[48]=g("span",{class:"stat-label"},"Avg:",-1)),g("span",At,f(ni(a.data,a)),1)]),g("div",Lt,[n[49]||(n[49]=g("span",{class:"stat-label"},"Min:",-1)),g("span",Rt,f(ii(a.data,a)),1)]),g("div",$t,[n[50]||(n[50]=g("span",{class:"stat-label"},"Max:",-1)),g("span",Mt,f(li(a.data,a)),1)])])):y("",!0)],2)))),128))])])]),g("div",Pt,[g("div",Nt,[g("div",Ft,[g("canvas",{ref_key:"analogChartCanvas",ref:da,id:"analog-chart"},null,512)]),(c(!0),b(w,null,I(Ka.value,((e,t)=>(c(),b("div",{key:e.name,class:"channel-chart"},[g("canvas",{ref_for:!0,ref:e=>((e,t)=>{e&&"tagName"in e&&"CANVAS"===e.tagName&&(ca.value[t]=e)})(e,t),id:`digital-${t}-chart`},null,8,Ht)])))),128))])])])):y("",!0),we.value?(c(),b("div",jt,[t(A,{size:"large"}),n[51]||(n[51]=g("div",{class:"loading-text"},"Loading trend log data...",-1))])):y("",!0),t(K,{visible:ue.value,"onUpdate:visible":n[14]||(n[14]=e=>ue.value=e),title:"X Axis",width:320,centered:"",onOk:Fn,onCancel:Hn},{default:v((()=>[g("div",zt,[t(W,{gutter:8,class:"date-time-row"},{default:v((()=>[t(L,{span:4,class:"label-col"},{default:v((()=>[...n[52]||(n[52]=[g("label",{class:"time-label"},"Start:",-1)])])),_:1}),t(L,{span:11},{default:v((()=>[t(z,{value:ie.value,"onUpdate:value":n[6]||(n[6]=e=>ie.value=e),placeholder:"Date",size:"small",style:{width:"100%","font-size":"11px"},format:"DD/MM/YYYY"},null,8,["value"])])),_:1}),t(L,{span:9},{default:v((()=>[t(V,{value:re.value,"onUpdate:value":n[7]||(n[7]=e=>re.value=e),placeholder:"Time",size:"small",style:{width:"100%","font-size":"11px"},format:"HH:mm"},null,8,["value"])])),_:1})])),_:1}),t(W,{gutter:8,class:"date-time-row"},{default:v((()=>[t(L,{span:4,class:"label-col"},{default:v((()=>[...n[53]||(n[53]=[g("label",{class:"time-label"},"End:",-1)])])),_:1}),t(L,{span:11},{default:v((()=>[t(z,{value:le.value,"onUpdate:value":n[8]||(n[8]=e=>le.value=e),placeholder:"Date",size:"small",style:{width:"100%","font-size":"11px"},format:"DD/MM/YYYY"},null,8,["value"])])),_:1}),t(L,{span:9},{default:v((()=>[t(V,{value:se.value,"onUpdate:value":n[9]||(n[9]=e=>se.value=e),placeholder:"Time",size:"small",style:{width:"100%","font-size":"11px"},format:"HH:mm"},null,8,["value"])])),_:1})])),_:1}),g("div",Ut,[t(Y,{size:"small"},{default:v((()=>[t(o,{size:"small",onClick:n[10]||(n[10]=e=>jn("today"))},{default:v((()=>[...n[54]||(n[54]=[m("Today",-1)])])),_:1}),t(o,{size:"small",onClick:n[11]||(n[11]=e=>jn("yesterday"))},{default:v((()=>[...n[55]||(n[55]=[m("Yesterday",-1)])])),_:1}),t(o,{size:"small",onClick:n[12]||(n[12]=e=>jn("thisWeek"))},{default:v((()=>[...n[56]||(n[56]=[m("This Week",-1)])])),_:1}),t(o,{size:"small",onClick:n[13]||(n[13]=e=>jn("lastWeek"))},{default:v((()=>[...n[57]||(n[57]=[m("Last Week",-1)])])),_:1})])),_:1})]),ie.value&&le.value&&re.value&&se.value?(c(),b("div",Vt,[t(G,{type:"info","show-icon":"",size:"small"},{message:v((()=>[g("span",Bt,f(zn()),1)])),_:1})])):y("",!0)])])),_:1},8,["visible"]),t(Q,{visible:ve.value,"onUpdate:visible":n[17]||(n[17]=e=>ve.value=e),title:"Select Items to Track",placement:"right",width:"400",closable:!0,"mask-closable":!0,class:"item-selector-drawer"},{title:v((()=>[g("div",Wt,[g("span",null,"ðŸ“Š Select Items for "+f(2===ne.value?"View 2":"View 3"),1),t(O,{color:"blue"},{default:v((()=>{var e;return[m(f((null==(e=pe.value[ne.value])?void 0:e.length)||0)+"/"+f(He.value.length)+" selected",1)]})),_:1})])])),footer:v((()=>[g("div",oa,[t(o,{onClick:Mn,type:ya.value?"default":"primary",class:"select-toggle-btn"},{default:v((()=>[m(f(ya.value?"Unselect All":"Select All"),1)])),_:1},8,["type"]),g("div",ra,[t(o,{onClick:n[16]||(n[16]=e=>ve.value=!1)},{default:v((()=>[...n[58]||(n[58]=[m(" Cancel ",-1)])])),_:1}),t(o,{type:"primary",onClick:Pn},{default:v((()=>[...n[59]||(n[59]=[m(" Apply Selection ",-1)])])),_:1})])])])),default:v((()=>[g("div",qt,[g("div",Yt,[(c(!0),b(w,null,I(He.value,(e=>{var a,i;return c(),b("div",{key:e.name,class:_(["item-row",{selected:null==(a=pe.value[ne.value])?void 0:a.includes(e.name),analog:"analog"===e.unitType,digital:"digital"===e.unitType}]),onClick:t=>Rn(e.name)},[g("div",{class:"item-selection",onClick:n[15]||(n[15]=S((()=>{}),["stop"]))},[t(X,{checked:null==(i=pe.value[ne.value])?void 0:i.includes(e.name),onChange:()=>Rn(e.name)},null,8,["checked","onChange"]),g("div",{class:"item-color-dot",style:T({backgroundColor:e.color})},null,4)]),g("div",Kt,[g("div",Jt,[g("span",Zt,f(e.name),1),e.unit?(c(),b("span",Xt,f(e.unit),1)):y("",!0)]),g("div",Qt,[g("span",{class:_(["item-type-badge",e.unitType])},f(e.unitType),3),e.description?(c(),b("span",ea,f(e.description),1)):y("",!0),e.data.length>0?(c(),b("span",ta,f(ii(e.data,e))+" - "+f(li(e.data,e)),1)):y("",!0)])]),g("div",aa,[e.isEmpty?(c(),b("span",na,"No Data")):e.visible?(c(),b("span",la,f(e.data.length)+" pts",1)):(c(),b("span",ia,"Hidden"))])],10,Gt)})),128))])])])),_:1},8,["visible"])])),_:1})}}}),[["__scopeId","data-v-7e9e6b9c"]]);export{sa as T,Ve as t,Be as u};

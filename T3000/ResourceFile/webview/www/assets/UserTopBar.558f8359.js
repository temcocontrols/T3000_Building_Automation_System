import{ab as a,a as e,Q as s,ad as o,a6 as t,h as A,o as l,aa as r,a1 as i,a8 as n,a9 as c,a3 as u,av as Q,a5 as f,c as B,a4 as m,bU as d,ar as g,k as p,C as U,as as k}from"./index.8dd48b07.js";import{Q as v,a as E}from"./QItem.8016c0b6.js";import{Q as F}from"./QChip.246fee19.js";import{a as j,Q as h}from"./QMenu.eb2fd7f0.js";import{Q as b}from"./QToolbar.4833ff00.js";import{C as S}from"./ClosePopup.0b02146e.js";import{u as R}from"./use-quasar.a5ac4cdc.js";import{b as C,c as D}from"./common.3f036025.js";import{u as y}from"./T3Data.301774c4.js";import{a as P,l as N}from"./api.6cc26dac.js";import{_ as w}from"./logo.7f3af87e.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";var H=a({name:"QToolbarTitle",props:{shrink:Boolean},setup(a,{slots:t}){const A=e((()=>"q-toolbar__title ellipsis"+(!0===a.shrink?" col-shrink":"")));return()=>s("div",{class:A.value},o(t.default))}});const L={class:"flex justify-start flex-nowrap"},x={class:"toolbar-title-wrapper"},W={class:"leading-text"},q={class:"name"},J={class:"flex-1 flex ml-4"};var X=I({props:{navItems:{type:Array,required:!1,default:()=>[]}},emits:["mobileMenuBtnClicked"],setup(){const a=t(),e=R(),s=A("");function o(){e.cookies.remove("token"),y.value=null,localStorage.removeItem("user"),P.post("logout").catch((a=>{})),a.replace({path:C.value.home})}function r(){if(!e.cookies.has("token"))return P.get("user").then((async a=>{if(200===a.status){const s=await a.json();(null==s?void 0:s.token)&&(e.cookies.set("token",s.token),r())}})).catch((a=>{})),localStorage.removeItem("user"),void(y.value=null);N.get("me").then((async a=>{200===a.status?(y.value=await a.json(),localStorage.setItem("user",JSON.stringify(y.value))):401===a.status&&o()})).catch((a=>{401===a.response.status&&o()}))}return l((()=>{y.value=localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))||null,r()})),{logout:o,search:s,user:y,globalNav:C,isAdmin:D}}},[["render",function(a,e,s,o,t,A){const l=r("router-link");return i(),n(b,{class:"toolbar bg-primary text-white"},{default:c((()=>[u("div",L,[o.globalNav.back?(i(),n(Q,{key:0,flat:"",round:"",dense:"",icon:"arrow_back",to:o.globalNav.back},null,8,["to"])):f("",!0),B(H,{class:"toolbar-title flex items-center"},{default:c((()=>[B(l,{to:o.globalNav.home,"exact-active-class":"exact-active"},{default:c((()=>[u("div",x,[e[1]||(e[1]=u("img",{class:"logo",src:w,alt:"Temco Controls"},null,-1)),u("div",W,[u("div",q,m(o.globalNav.title),1)])])])),_:1},8,["to"])])),_:1})]),u("div",J,[d(a.$slots,"action-btns",{},void 0,!0)]),d(a.$slots,"search-input",{},void 0,!0),d(a.$slots,"buttons",{},void 0,!0),o.user?(i(),n(Q,{key:0,flat:"",round:"",dense:"",class:"mx-2"},{default:c((()=>[B(g,{size:"35px"},{default:c((()=>[...e[2]||(e[2]=[u("img",{src:"data:image/png;base64,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"},null,-1)])])),_:1}),B(j,null,{default:c((()=>[B(h,{style:{"min-width":"200px"}},{default:c((()=>[p((i(),n(v,{disable:""},{default:c((()=>[B(E,null,{default:c((()=>{var a;return[U(m(null==(a=o.user)?void 0:a.name),1)]})),_:1}),B(E,{class:"items-end"},{default:c((()=>[o.isAdmin(o.user)?(i(),n(F,{key:0,class:"px-2",dense:"",size:"sm",icon:"verified_user"},{default:c((()=>[...e[3]||(e[3]=[U("Admin",-1)])])),_:1})):f("",!0)])),_:1})])),_:1})),[[S]]),B(k),p((i(),n(v,{clickable:"",onClick:e[0]||(e[0]=a=>o.logout())},{default:c((()=>[B(E,null,{default:c((()=>[...e[4]||(e[4]=[U("Logout",-1)])])),_:1})])),_:1})),[[S]])])),_:1})])),_:1})])),_:1})):(i(),n(Q,{key:1,flat:"",label:"Login",to:"/login"}))])),_:3})}],["__scopeId","data-v-0dc7a1b2"]]);export{X as U};

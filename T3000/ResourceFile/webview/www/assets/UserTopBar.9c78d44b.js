import{a6 as a,a as e,Q as o,a8 as s,a1 as t,h as l,o as A,a5 as r,X as i,a3 as n,a4 as u,Z as c,ao as Q,a0 as f,c as B,$ as m,bQ as g,av as d,k as p,C as U,ap as k}from"./index.2fa4ab44.js";import{Q as v,a as E}from"./QItem.6660ab2e.js";import{Q as F}from"./QChip.e2d03d14.js";import{a as h,Q as j}from"./QMenu.74384f3e.js";import{Q as S}from"./QToolbar.9613210d.js";import{C as b}from"./ClosePopup.1ed4ca4b.js";import{u as C}from"./use-quasar.2aa916f3.js";import{b as R,c as y}from"./common.1f115751.js";import{u as D}from"./T3Data.bcec6223.js";import{a as P,l as N}from"./api.48a191f0.js";import{_ as w}from"./logo.7f3af87e.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";var I=a({name:"QToolbarTitle",props:{shrink:Boolean},setup(a,{slots:t}){const l=e((()=>"q-toolbar__title ellipsis"+(!0===a.shrink?" col-shrink":"")));return()=>o("div",{class:l.value},s(t.default))}});const H={class:"flex justify-start flex-nowrap"},x={class:"toolbar-title-wrapper"},q={class:"leading-text"},W={class:"name"},X={class:"flex-1 flex ml-4"};var J=L({props:{navItems:{type:Array,required:!1,default:()=>[]}},emits:["mobileMenuBtnClicked"],setup(){const a=t(),e=C(),o=l("");function s(){e.cookies.remove("token"),D.value=null,localStorage.removeItem("user"),P.post("logout").catch((a=>{})),a.replace({path:R.value.home})}function r(){if(!e.cookies.has("token"))return P.get("user").then((async a=>{if(200===a.status){const o=await a.json();(null==o?void 0:o.token)&&(e.cookies.set("token",o.token),r())}})).catch((a=>{})),localStorage.removeItem("user"),void(D.value=null);N.get("me").then((async a=>{200===a.status?(D.value=await a.json(),localStorage.setItem("user",JSON.stringify(D.value))):401===a.status&&s()})).catch((a=>{401===a.response.status&&s()}))}return A((()=>{D.value=localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))||null,r()})),{logout:s,search:o,user:D,globalNav:R,isAdmin:y,navigateToLogin:function(){const e=a.currentRoute.value.path;a.push({path:"/login",query:{redirect:e}})}}}},[["render",function(a,e,o,s,t,l){const A=r("router-link");return i(),n(S,{class:"toolbar bg-primary text-white"},{default:u((()=>[c("div",H,[s.globalNav.back?(i(),n(Q,{key:0,flat:"",round:"",dense:"",icon:"arrow_back",to:s.globalNav.back},null,8,["to"])):f("",!0),B(I,{class:"toolbar-title flex items-center"},{default:u((()=>[B(A,{to:s.globalNav.home,"exact-active-class":"exact-active"},{default:u((()=>[c("div",x,[e[1]||(e[1]=c("img",{class:"logo",src:w,alt:"Temco Controls"},null,-1)),c("div",q,[c("div",W,m(s.globalNav.title),1)])])])),_:1},8,["to"])])),_:1})]),c("div",X,[g(a.$slots,"action-btns",{},void 0,!0)]),g(a.$slots,"search-input",{},void 0,!0),g(a.$slots,"buttons",{},void 0,!0),s.user?(i(),n(Q,{key:0,flat:"",round:"",dense:"",class:"mx-2"},{default:u((()=>[B(d,{size:"35px"},{default:u((()=>[...e[2]||(e[2]=[c("img",{src:"data:image/png;base64,/9j/4AAQSkZJRgABAQEAYABgAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gOTAK/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/9sAQwEDBAQFBAUJBQUJFA0LDRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgAYABgAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A+t/yo49qO1FABR+VFFAB+VH5UUUAH5Uce1H40fjQAce1H5Uv40n40AHHtRx7UfjS/jQAnaiiigAopa6j4eeGF8R61mdd1nbASSg9GP8ACv4/yBoAn8J/Dm88Qxrc3Dmysm5VyMvIP9kenuf1r0Gy+GegWaANaNct/fmkYk/gCB+ldSqhFCqAFHAA6Cj/AD1oA5e8+Gnh+7QhbQ27f34ZGBH4EkfpXn/iz4b3nh+N7q1c3tkvLEDDxj3Hce4r2j/PWggMCDgg9QaAPmaius+I3hhPD2sCS3ULZ3QLoo6I38S/qD+NclQAtFJ/npRQAUUUtACV7D8IbVYvDk8wHzy3DZPsAAB/P868er1r4PagsukXlmSPMhm8zH+ywA/mp/OgD0Gik/z0ooAWiko/z0oA4r4t2qzeGElI+aGdSD7EEEfqPyrxqvXvi/qCwaFbWgI8yebdj/ZUHP6kV5FQAn+etFLRQAlFHaigArY8J+IpPDOsRXaAvEfkljB+8h6/j3H0rIrR0Lw7feI7ryLKEuR9+RuEQepNAH0Bp2o2+q2cd1ayrNBIMqwP6H0NWP8APWuX8G+CB4VVnN7NPK4+dFO2L/vnufeupoAT/PWoL+/t9MtJLm5lWGCMZZ2NWK5fxl4K/wCEqRWF7NBJH9yNjuiz6lfX3oA8o8XeJJPE+sSXRBSBRshjP8Kj19z1rErS13w7feHLryL2EoT9yReUceoNZtABRRRQAhoopcZNAGv4W8N3HifVEtYfkjHzSy44Rf8AH0Fe7aRo9podjHaWcQjiT82PqT3NZXgXw4vhzQoo3UC7mAknPfJ6L+A4/Ouh/wA9aAD/AD0opf8APWk/z1oAKP8APSj/AD1pf89aAKWr6Pa65YvaXkQkib81PYg9jXhXijw3P4Y1R7Wb54z80UuOHX/H1FfQP+etc9458OL4j0OWNFBu4QZID3yOq/iOPyoA8HooIwaKAE7V0PgLShq/iqyidd0Ubec49l5/ngfjXPGvQ/g3bB9U1G4xzHEqA/7xz/7LQB6xRSUUALRSf56UUALRSUf56UALRSUUAeDePNKGkeKb2JF2xSN5yD2bn+eR+Fc/Xofxktgmp6fcY5khZCf905/9mrzygD//2Q=="},null,-1)])])),_:1}),B(h,null,{default:u((()=>[B(j,{style:{"min-width":"200px"}},{default:u((()=>[p((i(),n(v,{disable:""},{default:u((()=>[B(E,null,{default:u((()=>{var a;return[U(m(null==(a=s.user)?void 0:a.name),1)]})),_:1}),B(E,{class:"items-end"},{default:u((()=>[s.isAdmin(s.user)?(i(),n(F,{key:0,class:"px-2",dense:"",size:"sm",icon:"verified_user"},{default:u((()=>[...e[3]||(e[3]=[U("Admin",-1)])])),_:1})):f("",!0)])),_:1})])),_:1})),[[b]]),B(k),p((i(),n(v,{clickable:"",onClick:e[0]||(e[0]=a=>s.logout())},{default:u((()=>[B(E,null,{default:u((()=>[...e[4]||(e[4]=[U("Logout",-1)])])),_:1})])),_:1})),[[b]])])),_:1})])),_:1})])),_:1})):(i(),n(Q,{key:1,flat:"",label:"Login",onClick:s.navigateToLogin},null,8,["onClick"]))])),_:3})}],["__scopeId","data-v-273a6b0c"]]);export{J as U};

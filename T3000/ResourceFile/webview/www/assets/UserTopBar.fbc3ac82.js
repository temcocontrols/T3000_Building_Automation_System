import{b as C,d as R,h as y,f as D,a0 as b,y as N,m as w,r as I,o as A,c as n,w as a,W as i,X as B,a2 as h,a as s,R as U,bE as f,a3 as P,P as k,Q as g,V as j,_ as L,$ as H}from"./index.a446fa3f.js";import{c as x,Q as W,a as v,b as m,d as q,C as _}from"./ClosePopup.d1fae0b1.js";import{Q as V}from"./QToolbar.8c6eee1f.js";import{u as X,a as E,l as J}from"./api.1a67fc33.js";import{b as S,c as T}from"./common.a643a366.js";import{u as c}from"./T3Data.b51b73fb.js";import{_ as Z}from"./logo.7f3af87e.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";var K=C({name:"QToolbarTitle",props:{shrink:Boolean},setup(o,{slots:l}){const u=R(()=>"q-toolbar__title ellipsis"+(o.shrink===!0?" col-shrink":""));return()=>y("div",{class:u.value},D(l.default))}}),M="data:image/png;base64,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";const z={props:{navItems:{type:Array,required:!1,default:()=>[]}},emits:["mobileMenuBtnClicked"],setup(){const o=b(),l=X(),u=N("");w(()=>{c.value=localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))||null,Q()});function e(){l.cookies.remove("token"),c.value=null,localStorage.removeItem("user"),E.post("logout").catch(r=>{console.log(r)}),o.replace({path:S.value.home})}function Q(){if(!l.cookies.has("token")){E.get("user").then(async t=>{if(t.status===200){const d=await t.json();d!=null&&d.token&&(l.cookies.set("token",d.token),Q())}}).catch(t=>{}),localStorage.removeItem("user"),c.value=null;return}J.get("me").then(async t=>{t.status===200?(c.value=await t.json(),localStorage.setItem("user",JSON.stringify(c.value))):t.status===401&&e()}).catch(t=>{t.response.status===401&&e()})}function p(){const r=o.currentRoute.value.path;console.log("Redirecting to login from:",r),o.push({path:"/login",query:{redirect:r}})}return{logout:e,search:u,user:c,globalNav:S,isAdmin:T,navigateToLogin:p}}},F=o=>(L("data-v-02d73e8e"),o=o(),H(),o),Y={class:"flex justify-start flex-nowrap"},O={class:"toolbar-title-wrapper"},$=F(()=>i("img",{class:"logo",src:Z,alt:"Temco Controls"},null,-1)),ee={class:"leading-text"},oe={class:"name"},te={class:"flex-1 flex ml-4"},ae=F(()=>i("img",{src:M},null,-1));function se(o,l,u,e,Q,p){const r=I("router-link");return A(),n(V,{class:"toolbar bg-primary text-white"},{default:a(()=>[i("div",Y,[e.globalNav.back?(A(),n(B,{key:0,flat:"",round:"",dense:"",icon:"arrow_back",to:e.globalNav.back},null,8,["to"])):h("",!0),s(K,{class:"toolbar-title flex items-center"},{default:a(()=>[s(r,{to:e.globalNav.home,"exact-active-class":"exact-active"},{default:a(()=>[i("div",O,[$,i("div",ee,[i("div",oe,U(e.globalNav.title),1)])])]),_:1},8,["to"])]),_:1})]),i("div",te,[f(o.$slots,"action-btns",{},void 0,!0)]),f(o.$slots,"search-input",{},void 0,!0),f(o.$slots,"buttons",{},void 0,!0),e.user?(A(),n(B,{key:0,flat:"",round:"",dense:"",class:"mx-2"},{default:a(()=>[s(P,{size:"35px"},{default:a(()=>[ae]),_:1}),s(x,null,{default:a(()=>[s(W,{style:{"min-width":"200px"}},{default:a(()=>[k((A(),n(v,{disable:""},{default:a(()=>[s(m,null,{default:a(()=>{var t;return[g(U((t=e.user)==null?void 0:t.name),1)]}),_:1}),s(m,{class:"items-end"},{default:a(()=>[e.isAdmin(e.user)?(A(),n(q,{key:0,class:"px-2",dense:"",size:"sm",icon:"verified_user"},{default:a(()=>[g("Admin")]),_:1})):h("",!0)]),_:1})]),_:1})),[[_]]),s(j),k((A(),n(v,{clickable:"",onClick:l[0]||(l[0]=t=>e.logout())},{default:a(()=>[s(m,null,{default:a(()=>[g("Logout")]),_:1})]),_:1})),[[_]])]),_:1})]),_:1})]),_:1})):(A(),n(B,{key:1,flat:"",label:"Login",onClick:e.navigateToLogin},null,8,["onClick"]))]),_:3})}var Qe=G(z,[["render",se],["__scopeId","data-v-02d73e8e"]]);export{Qe as U};
